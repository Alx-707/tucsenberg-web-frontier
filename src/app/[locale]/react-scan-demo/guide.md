# React Scan å®Œæ•´ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

React Scan æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼€å‘å·¥å…·ï¼Œç”¨äºå®æ—¶ç›‘æ§ React åº”ç”¨çš„æ¸²æŸ“æ€§èƒ½ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…è¯†åˆ«ä¸å¿…è¦çš„æ¸²æŸ“ã€ä¼˜åŒ–ç»„ä»¶æ€§èƒ½ï¼Œå¹¶æä¾›è¯¦ç»†çš„æ€§èƒ½åˆ†ææ•°æ®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯ç”¨/ç¦ç”¨ React Scan

- **å¿«æ·é”®**: `Ctrl+Shift+X`
- **çŠ¶æ€æŒ‡ç¤º**: é¡µé¢å³ä¸‹è§’ä¼šæ˜¾ç¤º React Scan å·¥å…·æ 
- **æ§åˆ¶å°æ—¥å¿—**: åˆ‡æ¢æ—¶ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
2. æŒ‰ `Ctrl+Shift+X` å¯ç”¨ React Scan
3. ä¸é¡µé¢äº¤äº’ï¼Œè§‚å¯Ÿç»„ä»¶é«˜äº®æ•ˆæœ
4. ä½¿ç”¨å·¥å…·æ æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

## ğŸ¨ é¢œè‰²ç¼–ç ç³»ç»Ÿ

### ğŸ”´ çº¢è‰²é«˜äº® - ä¸å¿…è¦æ¸²æŸ“
- **å«ä¹‰**: ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰å¿…è¦
- **åŸå› **: 
  - Props æ²¡æœ‰å®é™…å˜åŒ–ä½†å¼•ç”¨å˜äº†
  - çˆ¶ç»„ä»¶æ¸²æŸ“å¯¼è‡´å­ç»„ä»¶æ— æ„ä¹‰æ¸²æŸ“
  - ç¼ºå°‘ React.memoã€useMemo æˆ– useCallback ä¼˜åŒ–
- **å½±å“**: æ€§èƒ½æµªè´¹ï¼Œå¯èƒ½å¯¼è‡´é¡µé¢å¡é¡¿

### ğŸŸ¢ ç»¿è‰²é«˜äº® - ä¼˜åŒ–æ¸²æŸ“
- **å«ä¹‰**: ç»„ä»¶è¿›è¡Œäº†å¿…è¦çš„æ¸²æŸ“
- **ç‰¹ç‚¹**: 
  - Props æˆ– state ç¡®å®å‘ç”Ÿäº†å˜åŒ–
  - æ¸²æŸ“æ˜¯æœ‰æ„ä¹‰çš„
  - æ€§èƒ½ä¼˜åŒ–è‰¯å¥½

### ğŸŸ¡ é»„è‰²é«˜äº® - æ­£å¸¸æ¸²æŸ“
- **å«ä¹‰**: æ ‡å‡†çš„ç»„ä»¶æ¸²æŸ“
- **ç‰¹ç‚¹**: 
  - é¦–æ¬¡æ¸²æŸ“
  - æ­£å¸¸çš„çŠ¶æ€æ›´æ–°
  - æ— ç‰¹æ®Šä¼˜åŒ–éœ€æ±‚

## ğŸ”§ å·¥å…·æ åŠŸèƒ½è¯¦è§£

### ä¸»è¦åŠŸèƒ½æŒ‰é’®

1. **æš‚åœ/ç»§ç»­ç›‘æ§**
   - æš‚åœå®æ—¶ç›‘æ§ä»¥åˆ†æå½“å‰çŠ¶æ€
   - ç»§ç»­ç›‘æ§ä»¥è§‚å¯Ÿæ–°çš„æ¸²æŸ“

2. **æ¸…é™¤é«˜äº®**
   - æ¸…é™¤æ‰€æœ‰å½“å‰çš„é«˜äº®æ•ˆæœ
   - é‡æ–°å¼€å§‹ç›‘æ§

3. **è®¾ç½®é€‰é¡¹**
   - è°ƒæ•´åŠ¨ç”»é€Ÿåº¦
   - åˆ‡æ¢æ—¥å¿—è¾“å‡º
   - é…ç½®ç›‘æ§é€‰é¡¹

4. **ç»„ä»¶æ£€æŸ¥å™¨**
   - ç‚¹å‡»ç»„ä»¶æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
   - æ˜¾ç¤ºæ¸²æŸ“æ¬¡æ•°å’ŒåŸå› 
   - æŸ¥çœ‹ç»„ä»¶æ ‘ç»“æ„

### æ€§èƒ½æ•°æ®é¢æ¿

- **æ€»æ¸²æŸ“æ¬¡æ•°**: åº”ç”¨å¯åŠ¨ä»¥æ¥çš„æ€»æ¸²æŸ“æ•°
- **ç»„ä»¶ç»Ÿè®¡**: å„ç»„ä»¶çš„æ¸²æŸ“é¢‘ç‡
- **æ€§èƒ½æŒ‡æ ‡**: æ¸²æŸ“æ—¶é—´å’Œæ•ˆç‡åˆ†æ

## ğŸ› å¸¸è§æ€§èƒ½é—®é¢˜è¯†åˆ«

### 1. é¢‘ç¹çš„çº¢è‰²é«˜äº®

**é—®é¢˜**: ç»„ä»¶é¢‘ç¹è¿›è¡Œä¸å¿…è¦æ¸²æŸ“

**è¯Šæ–­æ­¥éª¤**:
```javascript
// æ£€æŸ¥ props æ˜¯å¦é¢‘ç¹å˜åŒ–
console.log('Component props:', props);

// æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ä¾èµ–ä¼˜åŒ–
const memoizedValue = useMemo(() => {
  return expensiveCalculation(data);
}, [data]); // ç¡®ä¿ä¾èµ–æ•°ç»„æ­£ç¡®
```

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `React.memo` åŒ…è£…ç»„ä»¶
- ä½¿ç”¨ `useMemo` ç¼“å­˜è®¡ç®—ç»“æœ
- ä½¿ç”¨ `useCallback` ç¼“å­˜å‡½æ•°å¼•ç”¨

### 2. å¤§é‡ç»„ä»¶åŒæ—¶æ¸²æŸ“

**é—®é¢˜**: çˆ¶ç»„ä»¶å˜åŒ–å¯¼è‡´æ‰€æœ‰å­ç»„ä»¶æ¸²æŸ“

**è¯Šæ–­æ­¥éª¤**:
```javascript
// æ£€æŸ¥çŠ¶æ€æå‡æ˜¯å¦åˆç†
const [globalState, setGlobalState] = useState();

// è€ƒè™‘çŠ¶æ€åˆ†å‰²
const [localState, setLocalState] = useState();
```

**è§£å†³æ–¹æ¡ˆ**:
- çŠ¶æ€ä¸‹æ²‰åˆ°æœ€å°éœ€è¦èŒƒå›´
- ä½¿ç”¨ Context æ—¶æ³¨æ„ Provider åˆ†å‰²
- è€ƒè™‘ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ (Zustand, Redux)

### 3. åˆ—è¡¨æ¸²æŸ“æ€§èƒ½é—®é¢˜

**é—®é¢˜**: åˆ—è¡¨é¡¹é¢‘ç¹é‡æ–°æ¸²æŸ“

**è¯Šæ–­æ­¥éª¤**:
```javascript
// æ£€æŸ¥ key å±æ€§æ˜¯å¦ç¨³å®š
{items.map(item => (
  <Item key={item.id} data={item} /> // ä½¿ç”¨ç¨³å®šçš„ id
))}
```

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ç¨³å®šçš„ key å€¼
- å¯¹åˆ—è¡¨é¡¹ä½¿ç”¨ React.memo
- é¿å…åœ¨æ¸²æŸ“ä¸­åˆ›å»ºæ–°å¯¹è±¡

## ğŸ’¡ ä¼˜åŒ–æœ€ä½³å®è·µ

### 1. ç»„ä»¶ä¼˜åŒ–æ¨¡å¼

```javascript
// âœ… ä¼˜åŒ–çš„ç»„ä»¶
const OptimizedComponent = React.memo(({ data, onAction }) => {
  const processedData = useMemo(() => {
    return processData(data);
  }, [data]);

  const handleAction = useCallback((id) => {
    onAction(id);
  }, [onAction]);

  return (
    <div>
      {processedData.map(item => (
        <Item 
          key={item.id} 
          data={item} 
          onAction={handleAction}
        />
      ))}
    </div>
  );
});

// âŒ æœªä¼˜åŒ–çš„ç»„ä»¶
const UnoptimizedComponent = ({ data, onAction }) => {
  // æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—
  const processedData = processData(data);
  
  // æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å‡½æ•°
  const handleAction = (id) => onAction(id);

  return (
    <div>
      {processedData.map(item => (
        <Item 
          key={item.id} 
          data={item} 
          onAction={handleAction} // æ–°å‡½æ•°å¼•ç”¨
        />
      ))}
    </div>
  );
};
```

### 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–

```javascript
// âœ… çŠ¶æ€åˆ†å‰²
const useUserProfile = () => {
  const [profile, setProfile] = useState();
  return { profile, setProfile };
};

const useUserPreferences = () => {
  const [preferences, setPreferences] = useState();
  return { preferences, setPreferences };
};

// âŒ çŠ¶æ€é›†ä¸­
const useUser = () => {
  const [user, setUser] = useState({
    profile: {},
    preferences: {},
    settings: {}
  });
  return { user, setUser };
};
```

### 3. Context ä¼˜åŒ–

```javascript
// âœ… Context åˆ†å‰²
const UserProfileContext = createContext();
const UserPreferencesContext = createContext();

// âŒ å•ä¸€å¤§ Context
const UserContext = createContext();
```

## ğŸ“Š æ€§èƒ½ç›‘æ§å·¥ä½œæµ

### 1. å¼€å‘é˜¶æ®µ

1. **å¯ç”¨ React Scan**: `Ctrl+Shift+X`
2. **åŸºç¡€äº¤äº’æµ‹è¯•**: ç‚¹å‡»ã€è¾“å…¥ã€å¯¼èˆª
3. **è¯†åˆ«çº¢è‰²é«˜äº®**: è®°å½•ä¸å¿…è¦æ¸²æŸ“çš„ç»„ä»¶
4. **é€ä¸ªä¼˜åŒ–**: ä»æ¸²æŸ“é¢‘ç‡æœ€é«˜çš„ç»„ä»¶å¼€å§‹

### 2. ä¼˜åŒ–éªŒè¯

1. **åº”ç”¨ä¼˜åŒ–**: æ·»åŠ  memoã€useMemoã€useCallback
2. **é‡æ–°æµ‹è¯•**: ç›¸åŒçš„äº¤äº’æµç¨‹
3. **å¯¹æ¯”ç»“æœ**: çº¢è‰²é«˜äº®åº”è¯¥å‡å°‘
4. **æ€§èƒ½æµ‹é‡**: ä½¿ç”¨ React DevTools Profiler ç¡®è®¤æ”¹å–„

### 3. æŒç»­ç›‘æ§

1. **å®šæœŸæ£€æŸ¥**: æ–°åŠŸèƒ½å¼€å‘åè¿è¡Œ React Scan
2. **å›å½’æµ‹è¯•**: ç¡®ä¿ä¼˜åŒ–æ²¡æœ‰è¢«ç ´å
3. **å›¢é˜ŸåŸ¹è®­**: è®©å›¢é˜Ÿæˆå‘˜äº†è§£ä½¿ç”¨æ–¹æ³•

## ğŸ” é«˜çº§è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ React DevTools Profiler

ç»“åˆ React Scan å’Œ Profiler ä½¿ç”¨:
1. React Scan è¯†åˆ«é—®é¢˜ç»„ä»¶
2. Profiler æµ‹é‡å…·ä½“æ€§èƒ½å½±å“
3. å¯¹æ¯”ä¼˜åŒ–å‰åçš„ç«ç„°å›¾

### 2. è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§

```javascript
// æ·»åŠ è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§
const useRenderTracker = (componentName) => {
  useEffect(() => {
    console.log(`${componentName} rendered at ${Date.now()}`);
  });
};

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const MyComponent = () => {
  useRenderTracker('MyComponent');
  // ... ç»„ä»¶é€»è¾‘
};
```

### 3. æ€§èƒ½é¢„ç®—è®¾ç½®

```javascript
// è®¾ç½®æ¸²æŸ“æ¬¡æ•°é¢„ç®—
const useRenderBudget = (componentName, budget = 10) => {
  const renderCount = useRef(0);
  
  useEffect(() => {
    renderCount.current++;
    if (renderCount.current > budget) {
      console.warn(`${componentName} exceeded render budget: ${renderCount.current}/${budget}`);
    }
  });
};
```

## ğŸš¨ å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ

### 1. è¿‡åº¦ä¼˜åŒ–

**é—®é¢˜**: ä¸ºæ‰€æœ‰ç»„ä»¶æ·»åŠ  memo å’Œ useMemo
**è§£å†³**: åªä¼˜åŒ–ç¡®å®æœ‰æ€§èƒ½é—®é¢˜çš„ç»„ä»¶

### 2. ä¾èµ–æ•°ç»„é”™è¯¯

**é—®é¢˜**: useMemo/useCallback ä¾èµ–æ•°ç»„ä¸æ­£ç¡®
**è§£å†³**: ä½¿ç”¨ ESLint è§„åˆ™ `exhaustive-deps`

### 3. å¼•ç”¨æ¯”è¾ƒå¤±æ•ˆ

**é—®é¢˜**: å¯¹è±¡å’Œæ•°ç»„çš„æµ…æ¯”è¾ƒå¤±æ•ˆ
**è§£å†³**: ä½¿ç”¨æ·±æ¯”è¾ƒæˆ–ç¡®ä¿å¼•ç”¨ç¨³å®š

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•

- [ ] å¯ç”¨ React Scan ç›‘æ§
- [ ] è¯†åˆ«çº¢è‰²é«˜äº®ç»„ä»¶
- [ ] æ£€æŸ¥ props å˜åŒ–åŸå› 
- [ ] æ·»åŠ é€‚å½“çš„ memo ä¼˜åŒ–
- [ ] ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—
- [ ] ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
- [ ] éªŒè¯ä¼˜åŒ–æ•ˆæœ
- [ ] æµ‹é‡å®é™…æ€§èƒ½æ”¹å–„
- [ ] æ–‡æ¡£åŒ–ä¼˜åŒ–å†³ç­–

## ğŸ“ å­¦ä¹ èµ„æº

- [React å®˜æ–¹æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://react.dev/learn/render-and-commit)
- [React DevTools Profiler ä½¿ç”¨æŒ‡å—](https://react.dev/blog/2018/09/10/introducing-the-react-profiler)
- [React Scan GitHub ä»“åº“](https://github.com/aidenybai/react-scan)

---

é€šè¿‡éµå¾ªè¿™ä¸ªæŒ‡å—ï¼Œä½ å°†èƒ½å¤Ÿæœ‰æ•ˆåœ°ä½¿ç”¨ React Scan æ¥è¯†åˆ«å’Œè§£å†³ React åº”ç”¨ä¸­çš„æ€§èƒ½é—®é¢˜ï¼Œåˆ›å»ºæ›´å¿«ã€æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚
