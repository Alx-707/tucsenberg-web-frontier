# i18n 手动测试清单

## 📋 测试概述

**目的**: 确保 i18n 功能在真实浏览器环境下正常工作

**背景**: 由于 Next.js 15 + next-intl + Playwright 存在已知兼容性问题，E2E 测试无法完全覆盖 i18n 功能，因此需要通过手动测试来验证生产环境的 i18n 行为。

**测试环境**: 
- 开发环境: `npm run dev`
- 生产环境: `npm run build && npm run start`
- 浏览器: Chrome, Firefox, Safari, Edge

## 🎯 核心测试场景

### 1. 基础语言切换功能

#### 1.1 语言切换器可见性和交互
- [ ] **步骤**: 访问首页 `http://localhost:3000`
- [ ] **验证**: 页面右上角显示语言切换按钮（地球图标）
- [ ] **验证**: 点击语言切换按钮，下拉菜单正常展开
- [ ] **验证**: 下拉菜单显示 "English" 和 "中文" 选项
- [ ] **验证**: 当前语言选项有选中标识（勾选图标）

#### 1.2 英文到中文切换
- [ ] **步骤**: 在英文页面点击语言切换器
- [ ] **步骤**: 选择 "中文" 选项
- [ ] **验证**: URL 变更为 `/zh`
- [ ] **验证**: 页面内容切换为中文
- [ ] **验证**: 页面标题变更为中文
- [ ] **验证**: 导航菜单文字变更为中文
- [ ] **验证**: 页面无闪烁或布局错乱

#### 1.3 中文到英文切换
- [ ] **步骤**: 在中文页面 `/zh` 点击语言切换器
- [ ] **步骤**: 选择 "English" 选项
- [ ] **验证**: URL 变更为 `/en`
- [ ] **验证**: 页面内容切换为英文
- [ ] **验证**: 页面标题变更为英文
- [ ] **验证**: 导航菜单文字变更为英文
- [ ] **验证**: 页面无闪烁或布局错乱

### 2. URL 路由和直接访问

#### 2.1 直接访问本地化 URL
- [ ] **步骤**: 直接访问 `http://localhost:3000/en`
- [ ] **验证**: 页面正常加载，显示英文内容
- [ ] **验证**: HTML `lang` 属性为 `en`
- [ ] **验证**: 语言切换器显示当前选中英文

- [ ] **步骤**: 直接访问 `http://localhost:3000/zh`
- [ ] **验证**: 页面正常加载，显示中文内容
- [ ] **验证**: HTML `lang` 属性为 `zh`
- [ ] **验证**: 语言切换器显示当前选中中文

#### 2.2 根路径重定向
- [ ] **步骤**: 访问根路径 `http://localhost:3000/`
- [ ] **验证**: 自动重定向到 `/en`（默认语言）
- [ ] **验证**: 页面显示英文内容

#### 2.3 子页面本地化路由
- [ ] **步骤**: 访问 `/en/about`
- [ ] **验证**: About 页面显示英文内容
- [ ] **步骤**: 在该页面切换到中文
- [ ] **验证**: URL 变更为 `/zh/about`
- [ ] **验证**: About 页面显示中文内容

### 3. 页面内容本地化

#### 3.1 导航菜单本地化
- [ ] **英文环境验证**:
  - [ ] Home 显示为 "Home"
  - [ ] About 显示为 "About"
  - [ ] Contact 显示为 "Contact"
  - [ ] Products 显示为 "Products"
  - [ ] Blog 显示为 "Blog"

- [ ] **中文环境验证**:
  - [ ] Home 显示为 "首页"
  - [ ] About 显示为 "关于"
  - [ ] Contact 显示为 "联系"
  - [ ] Products 显示为 "产品"
  - [ ] Blog 显示为 "博客"

#### 3.2 页面标题和元数据
- [ ] **英文环境**:
  - [ ] 浏览器标签页标题为英文
  - [ ] Meta description 为英文
  - [ ] Open Graph 标签为英文

- [ ] **中文环境**:
  - [ ] 浏览器标签页标题为中文
  - [ ] Meta description 为中文
  - [ ] Open Graph 标签为中文

#### 3.3 主要内容区域
- [ ] **Hero 区域**:
  - [ ] 主标题正确本地化
  - [ ] 副标题正确本地化
  - [ ] CTA 按钮文字正确本地化

- [ ] **功能介绍区域**:
  - [ ] 功能标题正确本地化
  - [ ] 功能描述正确本地化

### 4. 用户体验和性能

#### 4.1 语言切换性能
- [ ] **步骤**: 多次快速切换语言
- [ ] **验证**: 切换响应迅速（< 500ms）
- [ ] **验证**: 无明显的加载延迟
- [ ] **验证**: 无内存泄漏或性能下降

#### 4.2 页面加载性能
- [ ] **步骤**: 刷新页面多次
- [ ] **验证**: 首次加载时间合理（< 2s）
- [ ] **验证**: 后续加载利用缓存（< 1s）

#### 4.3 浏览器兼容性
- [ ] **Chrome**: 所有功能正常
- [ ] **Firefox**: 所有功能正常
- [ ] **Safari**: 所有功能正常
- [ ] **Edge**: 所有功能正常

### 5. 错误处理和边界情况

#### 5.1 无效 URL 处理
- [ ] **步骤**: 访问 `http://localhost:3000/invalid-locale`
- [ ] **验证**: 重定向到默认语言 `/en`
- [ ] **验证**: 显示 404 页面或正确处理

#### 5.2 缺失翻译处理
- [ ] **步骤**: 检查是否有未翻译的文本
- [ ] **验证**: 所有可见文本都已正确翻译
- [ ] **验证**: 无显示原始键名的情况

#### 5.3 网络异常处理
- [ ] **步骤**: 在网络较慢的情况下切换语言
- [ ] **验证**: 有适当的加载指示
- [ ] **验证**: 切换最终成功完成

### 6. SEO 和可访问性

#### 6.1 SEO 元素
- [ ] **验证**: `<html lang="en">` 或 `<html lang="zh">` 正确设置
- [ ] **验证**: `<link rel="alternate" hreflang="en" href="...">` 存在
- [ ] **验证**: `<link rel="alternate" hreflang="zh" href="...">` 存在
- [ ] **验证**: Canonical URL 正确设置

#### 6.2 可访问性
- [ ] **验证**: 语言切换器有适当的 ARIA 标签
- [ ] **验证**: 键盘导航正常工作
- [ ] **验证**: 屏幕阅读器能正确识别语言变化

### 7. 移动端测试

#### 7.1 响应式设计
- [ ] **步骤**: 在移动设备或开发者工具的移动视图中测试
- [ ] **验证**: 语言切换器在移动端正常显示
- [ ] **验证**: 语言切换功能在触摸设备上正常工作
- [ ] **验证**: 页面布局在不同语言下保持响应式

#### 7.2 移动端性能
- [ ] **验证**: 语言切换在移动端响应迅速
- [ ] **验证**: 页面加载性能在移动端可接受

## 🔧 测试工具和辅助

### 开发者工具检查项
1. **Network 面板**: 检查语言切换时的网络请求
2. **Console 面板**: 确认无 JavaScript 错误
3. **Elements 面板**: 验证 HTML 结构和属性
4. **Application 面板**: 检查 localStorage 中的语言偏好

### 浏览器扩展推荐
- **React Developer Tools**: 检查组件状态
- **Web Vitals**: 监控性能指标
- **axe DevTools**: 可访问性检查

## 📊 测试记录模板

### 测试执行记录
```
测试日期: ___________
测试人员: ___________
测试环境: ___________
浏览器版本: ___________

核心功能测试:
□ 语言切换功能 - 通过/失败
□ URL 路由功能 - 通过/失败
□ 内容本地化 - 通过/失败
□ 性能表现 - 通过/失败
□ 错误处理 - 通过/失败
□ SEO 和可访问性 - 通过/失败
□ 移动端兼容性 - 通过/失败

发现的问题:
1. ___________
2. ___________
3. ___________

总体评估: 通过/需要修复
```

## 🚨 常见问题和解决方案

### 问题1: 语言切换后页面空白
**可能原因**: 翻译文件加载失败
**检查方法**: 查看 Network 面板和 Console 错误
**解决方案**: 检查翻译文件路径和内容

### 问题2: URL 不正确更新
**可能原因**: 路由配置问题
**检查方法**: 验证 `src/i18n/routing.ts` 配置
**解决方案**: 确认 pathnames 配置正确

### 问题3: 部分内容未翻译
**可能原因**: 翻译键缺失或组件未使用 useTranslations
**检查方法**: 检查组件代码和翻译文件
**解决方案**: 添加缺失的翻译或修复组件实现

## 📅 测试计划

### 发布前测试
- [ ] 完整执行所有测试项目
- [ ] 在所有支持的浏览器中测试
- [ ] 记录测试结果和问题

### 定期回归测试
- [ ] 每月执行核心功能测试
- [ ] 每次重大更新后执行完整测试
- [ ] 监控生产环境的 i18n 功能状态

---

**文档版本**: v1.0  
**最后更新**: 2025-01-XX  
**维护人员**: 开发团队
