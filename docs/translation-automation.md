# ç¿»è¯‘è‡ªåŠ¨åŒ–å·¥å…·æ–‡æ¡£

## æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†å®Œæ•´çš„ç¿»è¯‘è‡ªåŠ¨åŒ–å·¥å…·é“¾ï¼ŒåŒ…æ‹¬ç¿»è¯‘é”®æ‰«æã€åŒæ­¥ã€éªŒè¯å’Œè´¨é‡æ£€æŸ¥åŠŸèƒ½ã€‚æ”¯æŒä¸Lingo.devç­‰AIç¿»è¯‘æœåŠ¡é›†æˆï¼Œæä¾›ä¼ä¸šçº§çš„ç¿»è¯‘ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” ç¿»è¯‘é”®è‡ªåŠ¨æ‰«æ

- ä½¿ç”¨ASTè§£ææ‰«æä»£ç ä¸­çš„ç¿»è¯‘é”®
- æ”¯æŒå¤šç§ç¿»è¯‘å‡½æ•°è¯†åˆ«
- æ£€æµ‹ç¼ºå¤±å’Œæœªä½¿ç”¨çš„ç¿»è¯‘é”®
- ç”Ÿæˆè¯¦ç»†çš„ä½¿ç”¨æƒ…å†µæŠ¥å‘Š

### ğŸ”„ ç¿»è¯‘åŒæ­¥å’Œæ›´æ–°

- è‡ªåŠ¨åŒæ­¥ç¿»è¯‘æ–‡ä»¶ç»“æ„
- æ™ºèƒ½åˆ›å»ºç¼ºå¤±çš„ç¿»è¯‘é”®
- å¤‡ä»½æœºåˆ¶ä¿æŠ¤æ•°æ®å®‰å…¨
- å¢é‡æ›´æ–°æ”¯æŒ

### âœ… ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥

- å¤šç»´åº¦è´¨é‡éªŒè¯
- å ä½ç¬¦ä¸€è‡´æ€§æ£€æŸ¥
- ç¿»è¯‘é•¿åº¦æ¯”ä¾‹åˆ†æ
- å¯ç–‘ç¿»è¯‘æ£€æµ‹

### ğŸ¤– AIç¿»è¯‘è´¨é‡éªŒè¯

- ä¸Lingo.devé›†æˆ
- AIç¿»è¯‘ç»“æœè´¨é‡è¯„åˆ†
- ä¸äººå·¥ç¿»è¯‘å¯¹æ¯”åˆ†æ
- è´¨é‡åŸºå‡†å¯¹æ¯”

### ğŸ“Š è´¨é‡æŠ¥å‘Šå’Œç›‘æ§

- è¯¦ç»†çš„è´¨é‡æŠ¥å‘Šç”Ÿæˆ
- ç¿»è¯‘è¦†ç›–ç‡ç»Ÿè®¡
- è´¨é‡è¶‹åŠ¿åˆ†æ
- CI/CDé›†æˆæ”¯æŒ

## å·¥å…·åˆ—è¡¨

### æ ¸å¿ƒè„šæœ¬

| è„šæœ¬                       | å‘½ä»¤                                  | åŠŸèƒ½æè¿°                   |
| -------------------------- | ------------------------------------- | -------------------------- |
| `translation-scanner.js`   | `pnpm scan:translations`              | æ‰«æä»£ç ä¸­çš„ç¿»è¯‘é”®ä½¿ç”¨æƒ…å†µ |
| `translation-sync.js`      | `pnpm sync:translations:enhanced`     | åŒæ­¥å’Œæ›´æ–°ç¿»è¯‘æ–‡ä»¶         |
| `translation-validator.js` | `pnpm validate:translations:enhanced` | éªŒè¯ç¿»è¯‘å®Œæ•´æ€§å’Œè´¨é‡       |

### ç»„åˆå‘½ä»¤

| å‘½ä»¤                 | åŠŸèƒ½æè¿°                               |
| -------------------- | -------------------------------------- |
| `pnpm i18n:full`     | æ‰§è¡Œå®Œæ•´çš„ç¿»è¯‘å·¥ä½œæµï¼ˆæ‰«æâ†’åŒæ­¥â†’éªŒè¯ï¼‰ |
| `pnpm i18n:scan`     | ä»…æ‰§è¡Œç¿»è¯‘é”®æ‰«æ                       |
| `pnpm i18n:sync`     | ä»…æ‰§è¡Œç¿»è¯‘åŒæ­¥                         |
| `pnpm i18n:validate` | ä»…æ‰§è¡Œç¿»è¯‘éªŒè¯                         |

## ä½¿ç”¨æŒ‡å—

### åŸºç¡€ä½¿ç”¨

1. **æ‰«æç¿»è¯‘é”®**

   ```bash
   pnpm scan:translations
   ```

   - æ‰«ææ‰€æœ‰æºä»£ç æ–‡ä»¶
   - è¯†åˆ«ä½¿ç”¨çš„ç¿»è¯‘é”®
   - æ£€æµ‹ç¼ºå¤±å’Œæœªä½¿ç”¨çš„é”®
   - ç”Ÿæˆæ‰«ææŠ¥å‘Š

2. **åŒæ­¥ç¿»è¯‘æ–‡ä»¶**

   ```bash
   pnpm sync:translations:enhanced
   ```

   - è‡ªåŠ¨åˆ›å»ºå¤‡ä»½
   - åŒæ­¥ç¿»è¯‘æ–‡ä»¶ç»“æ„
   - åˆ›å»ºç¼ºå¤±çš„ç¿»è¯‘é”®
   - éªŒè¯åŒæ­¥ç»“æœ

3. **éªŒè¯ç¿»è¯‘è´¨é‡**

   ```bash
   pnpm validate:translations:enhanced
   ```

   - æ£€æŸ¥ç¿»è¯‘å®Œæ•´æ€§
   - éªŒè¯å ä½ç¬¦ä¸€è‡´æ€§
   - åˆ†æç¿»è¯‘è´¨é‡
   - ç”Ÿæˆè´¨é‡æŠ¥å‘Š

4. **å®Œæ•´å·¥ä½œæµ**
   ```bash
   pnpm i18n:full
   ```
   - ä¾æ¬¡æ‰§è¡Œæ‰«æã€åŒæ­¥ã€éªŒè¯
   - ç”Ÿæˆç»¼åˆæŠ¥å‘Š
   - é€‚åˆCI/CDé›†æˆ

### é«˜çº§é…ç½®

#### é…ç½®æ–‡ä»¶

é¡¹ç›®æ ¹ç›®å½•çš„ `translation.config.js` åŒ…å«æ‰€æœ‰é…ç½®é€‰é¡¹ï¼š

```javascript
module.exports = {
  locales: ['en', 'zh'],
  defaultLocale: 'en',
  messagesDir: './messages',

  // æ‰«æé…ç½®
  scanner: {
    patterns: ['src/**/*.{ts,tsx,js,jsx}'],
    translationFunctions: ['t', 'useTranslations'],
  },

  // è´¨é‡é˜ˆå€¼
  validation: {
    thresholds: {
      minTranslationCoverage: 95,
      maxLengthRatio: 3.0,
    },
  },

  // Lingo.devé›†æˆ
  lingo: {
    enabled: false,
    apiKey: process.env.LINGO_API_KEY,
  },
};
```

#### ç¯å¢ƒå˜é‡

```bash
# Lingo.devé›†æˆ
LINGO_API_KEY=your_api_key
LINGO_PROJECT_ID=your_project_id

# é€šçŸ¥é…ç½®
SLACK_WEBHOOK_URL=your_slack_webhook
```

## æŠ¥å‘Šè¯´æ˜

### æ‰«ææŠ¥å‘Š (`translation-scan-report.json`)

```json
{
  "summary": {
    "totalFiles": 51,
    "scannedFiles": 51,
    "uniqueKeys": 34,
    "missingKeys": ["key1", "key2"],
    "unusedKeys": ["key3", "key4"]
  },
  "keyUsages": {
    "home.title": [{ "file": "src/app/page.tsx", "line": 15 }]
  }
}
```

### éªŒè¯æŠ¥å‘Š (`translation-validation-report.json`)

```json
{
  "summary": {
    "totalKeys": 124,
    "issueCount": 5,
    "errorCount": 0,
    "warningCount": 5
  },
  "statistics": {
    "coverage": {
      "en": { "percentage": "100.00", "translated": 124 },
      "zh": { "percentage": "98.39", "translated": 122 }
    }
  },
  "issues": [
    {
      "type": "suspicious_translation",
      "severity": "warning",
      "key": "home.title",
      "message": "å¯èƒ½æœªç¿»è¯‘"
    }
  ]
}
```

## CI/CDé›†æˆ

### GitHub Actions

é¡¹ç›®åŒ…å«å®Œæ•´çš„GitHub
Actionså·¥ä½œæµ (`.github/workflows/translation-quality.yml`)ï¼š

- è‡ªåŠ¨è¿è¡Œç¿»è¯‘è´¨é‡æ£€æŸ¥
- åœ¨PRä¸­æ˜¾ç¤ºç¿»è¯‘çŠ¶æ€
- ä¸Šä¼ æŠ¥å‘Šä½œä¸ºæ„å»ºäº§ç‰©
- è´¨é‡é—¨ç¦æ§åˆ¶

### è´¨é‡é—¨ç¦

- âŒ å…³é”®é”™è¯¯ï¼šæ„å»ºå¤±è´¥
- âš ï¸ è­¦å‘Šï¼šæ„å»ºé€šè¿‡ä½†æ˜¾ç¤ºè­¦å‘Š
- âœ… æ— é—®é¢˜ï¼šæ„å»ºé€šè¿‡

## Lingo.devé›†æˆ

### é…ç½®æ­¥éª¤

1. è·å–Lingo.dev APIå¯†é’¥
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. å¯ç”¨é›†æˆåŠŸèƒ½
4. é…ç½®è´¨é‡é˜ˆå€¼

### åŠŸèƒ½ç‰¹æ€§

- AIç¿»è¯‘è´¨é‡è¯„åˆ†
- ä¸äººå·¥ç¿»è¯‘å¯¹æ¯”
- æœ¯è¯­ä¸€è‡´æ€§æ£€æŸ¥
- è´¨é‡åŸºå‡†å¯¹æ¯”

## æœ€ä½³å®è·µ

### å¼€å‘å·¥ä½œæµ

1. **å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨ `pnpm scan:translations` æ£€æŸ¥æ–°å¢çš„ç¿»è¯‘é”®
2. **æäº¤å‰**ï¼šè¿è¡Œ `pnpm i18n:full` ç¡®ä¿ç¿»è¯‘è´¨é‡
3. **CI/CD**ï¼šè‡ªåŠ¨è¿è¡Œç¿»è¯‘æ£€æŸ¥ï¼Œç¡®ä¿è´¨é‡é—¨ç¦

### ç¿»è¯‘ç®¡ç†

1. **é”®å‘½å**ï¼šä½¿ç”¨å±‚æ¬¡åŒ–å‘½åï¼ˆå¦‚ `home.title`ï¼‰
2. **å ä½ç¬¦**ï¼šä¿æŒå ä½ç¬¦ä¸€è‡´æ€§
3. **æœ¯è¯­**ï¼šç»´æŠ¤æœ¯è¯­è¯å…¸
4. **è´¨é‡**ï¼šå®šæœŸå®¡æŸ¥ç¿»è¯‘è´¨é‡æŠ¥å‘Š

### æ•…éšœæ’é™¤

1. **æ‰«æå¤±è´¥**ï¼šæ£€æŸ¥ä»£ç è¯­æ³•é”™è¯¯
2. **åŒæ­¥é—®é¢˜**ï¼šæ£€æŸ¥ç¿»è¯‘æ–‡ä»¶æ ¼å¼
3. **éªŒè¯å¤±è´¥**ï¼šæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. **é›†æˆé—®é¢˜**ï¼šéªŒè¯APIå¯†é’¥é…ç½®

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„éªŒè¯è§„åˆ™

```javascript
// åœ¨ translation-validator.js ä¸­æ·»åŠ 
function validateCustomRule(translations, allKeys) {
  const issues = [];
  // è‡ªå®šä¹‰éªŒè¯é€»è¾‘
  return issues;
}
```

### é›†æˆæ–°çš„ç¿»è¯‘æœåŠ¡

```javascript
// å®ç° AITranslationService æ¥å£
class CustomTranslationService {
  async translate(text, fromLocale, toLocale) {
    // ç¿»è¯‘å®ç°
  }
}
```

### è‡ªå®šä¹‰æŠ¥å‘Šæ ¼å¼

```javascript
// åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ¨¡æ¿
reporting: {
  formats: ['json', 'html', 'csv'],
  templates: {
    custom: './templates/custom-report.hbs'
  }
}
```

## æ€§èƒ½ä¼˜åŒ–

- **ç¼“å­˜**ï¼šå¯ç”¨ç¿»è¯‘ç»“æœç¼“å­˜
- **å¹¶å‘**ï¼šé…ç½®åˆé€‚çš„å¹¶å‘æ•°
- **å¢é‡**ï¼šä½¿ç”¨å¢é‡æ‰«æå’ŒåŒæ­¥
- **è¿‡æ»¤**ï¼šæ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶

## æ”¯æŒå’Œç»´æŠ¤

- æŸ¥çœ‹ `reports/` ç›®å½•ä¸‹çš„è¯¦ç»†æŠ¥å‘Š
- æ£€æŸ¥ `logs/` ç›®å½•ä¸‹çš„è°ƒè¯•æ—¥å¿—
- å‚è€ƒ `translation.config.js` é…ç½®é€‰é¡¹
- ä½¿ç”¨ `--help` å‚æ•°æŸ¥çœ‹è„šæœ¬å¸®åŠ©ä¿¡æ¯
