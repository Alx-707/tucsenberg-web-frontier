# TinaCMS 团队协作工作流程

## 角色定义和权限

### 技术人员 (Developers)
- **权限**：完全访问权限
- **工作方式**：
  - 可以直接编辑 MDX 文件
  - 可以通过 TinaCMS 界面编辑
  - 负责 schema 配置和技术维护
  - 处理复杂的内容结构和组件

### 内容编辑者 (Content Editors)
- **权限**：TinaCMS 界面编辑权限
- **工作方式**：
  - 仅通过 TinaCMS 界面编辑内容
  - 负责日常内容更新和维护
  - 可以编辑博客文章、页面内容
  - 不直接接触代码文件

### 审核者 (Reviewers)
- **权限**：审核和批准权限
- **工作方式**：
  - 通过 Git PR 流程审核内容变更
  - 确保内容质量和品牌一致性
  - 批准发布到生产环境

## 编辑流程规范

### 1. 内容创建流程

**步骤 1：选择编辑方式**
- 简单内容更新 → 使用 TinaCMS 界面
- 复杂技术内容 → 直接编辑 MDX 文件
- 新功能开发 → 技术人员负责

**步骤 2：内容编辑**
```bash
# 技术人员
git checkout -b feature/new-content
# 编辑文件或使用 TinaCMS
git add .
git commit -m "feat: add new blog post about React 19"
git push origin feature/new-content

# 内容编辑者
# 通过 TinaCMS 界面编辑，自动提交到 Git
```

**步骤 3：审核发布**
- 创建 Pull Request
- 指定审核者进行内容审核
- 审核通过后合并到主分支
- 自动部署到生产环境

### 2. 多语言内容同步

**英文内容优先原则**
1. 首先创建英文版本内容
2. 使用 TinaCMS 的语言切换功能创建中文版本
3. 确保两个版本的 slug 和结构保持一致

**同步检查清单**
- [ ] 英文和中文版本都已创建
- [ ] Front Matter 字段保持一致
- [ ] SEO 信息已本地化
- [ ] 图片和媒体文件已更新
- [ ] 内部链接已正确设置

### 3. 冲突预防策略

**编辑锁定机制**
- 同一时间只允许一人编辑同一文件
- 使用分支策略避免直接在 main 分支编辑
- 建立编辑日程和沟通机制

**分工明确**
- 技术文档：技术团队负责
- 营销内容：营销团队负责
- 产品介绍：产品团队负责
- 公司信息：管理团队负责

## 内容管理最佳实践

### 1. 文件命名规范

**博客文章**
```
content/posts/en/2025-01-15-react-19-features.mdx
content/posts/zh/2025-01-15-react-19-features.mdx
```

**页面内容**
```
content/pages/en/about-us.mdx
content/pages/zh/about-us.mdx
```

### 2. Front Matter 标准化

**必填字段**
- `title`: 页面标题
- `description`: 页面描述
- `slug`: URL 路径
- `locale`: 语言标识
- `publishedAt`: 发布日期

**可选字段**
- `author`: 作者信息
- `tags`: 标签列表
- `categories`: 分类信息
- `featured`: 是否推荐
- `draft`: 是否草稿

### 3. SEO 优化规范

**标题优化**
- 英文：50-60 字符
- 中文：25-30 字符
- 包含主要关键词

**描述优化**
- 英文：150-160 字符
- 中文：75-80 字符
- 吸引用户点击

**图片优化**
- 使用 WebP 格式
- 添加 alt 文本
- 优化文件大小

## 质量控制流程

### 1. 内容审核检查清单

**内容质量**
- [ ] 语法和拼写正确
- [ ] 内容结构清晰
- [ ] 符合品牌语调
- [ ] 信息准确无误

**技术质量**
- [ ] 链接有效性检查
- [ ] 图片加载正常
- [ ] 响应式设计适配
- [ ] 页面加载速度

**SEO 优化**
- [ ] 标题和描述优化
- [ ] 关键词合理分布
- [ ] 内部链接设置
- [ ] 结构化数据

### 2. 发布前检查

**本地测试**
```bash
# 启动开发服务器
pnpm run tina:dev

# 检查内容显示
# 测试多语言切换
# 验证链接和导航
```

**构建测试**
```bash
# 构建生产版本
pnpm run build

# 检查构建错误
# 验证静态生成
```

## 应急处理流程

### 1. 内容回滚

**快速回滚**
```bash
# 回滚到上一个版本
git revert HEAD

# 回滚到特定提交
git revert <commit-hash>
```

**紧急修复**
```bash
# 创建热修复分支
git checkout -b hotfix/urgent-fix

# 进行必要修改
# 快速审核和部署
```

### 2. 故障排除

**常见问题**
1. TinaCMS 界面无法加载
   - 检查环境变量配置
   - 验证 API 密钥有效性
   - 清除浏览器缓存

2. 内容保存失败
   - 检查 Git 权限设置
   - 验证分支保护规则
   - 查看网络连接状态

3. 多语言内容不同步
   - 检查文件路径结构
   - 验证 locale 字段设置
   - 确认 slug 一致性

**联系支持**
- 技术问题：联系开发团队
- 内容问题：联系内容团队
- 紧急情况：使用应急联系方式

## 培训和文档

### 1. 新用户培训

**技术人员培训**
- TinaCMS 架构和配置
- Schema 设计和维护
- 故障排除和优化

**内容编辑者培训**
- TinaCMS 界面使用
- 内容编辑最佳实践
- 多语言内容管理

### 2. 参考文档

**内部文档**
- 内容风格指南
- SEO 优化指南
- 品牌使用规范

**外部资源**
- [TinaCMS 官方文档](https://tina.io/docs/)
- [Markdown 语法指南](https://www.markdownguide.org/)
- [Next.js 国际化文档](https://nextjs.org/docs/advanced-features/i18n)
