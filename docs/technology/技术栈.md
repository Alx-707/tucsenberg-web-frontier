# 项目技术栈

## 1. 核心框架

### 前端框架
- **Next.js 15.4.6** - React 全栈框架，App Router 架构
- **React 19.1.1** - 用户界面库，支持服务器组件
- **TypeScript 5.9.2** - 类型安全的 JavaScript 超集
- **Tailwind CSS 4.1.11** - 原子化 CSS 框架

### 渲染策略
- **SSG + ISR** - 静态生成 + 增量静态再生
- **Server Actions** - 服务器端表单处理和数据变更
- **Edge Runtime** - 边缘计算支持（可选）

## 2. 内容管理系统

### MDX 内容管理
- **@next/mdx 15.4.6** - Next.js 原生 MDX 支持
- **@mdx-js/loader 3.1.0** - MDX 文件加载器
- **@mdx-js/react 3.1.0** - React 组件嵌入支持
- **gray-matter 4.0.3** - Front Matter 解析
- **@types/mdx 2.0.13** - MDX 类型定义

### 目录结构
```
content/
├── posts/          # 博客文章
│   ├── en/        # 英文内容
│   └── zh/        # 中文内容
├── pages/          # 静态页面
│   ├── en/        # 英文页面
│   └── zh/        # 中文页面
└── config/         # 配置文件
```

### 核心特性
- **直接文件编辑** - 无需额外界面
- **Git 工作流集成** - 版本控制和自动部署
- **多语言同步** - 强制双语内容一致性
- **类型安全验证** - TypeScript 接口保证
- **React 组件集成** - Markdown 中使用 React 组件

### 数据服务
- **Airtable 0.12.2** - 联系表单数据存储
- **Resend 4.7.0** - 邮件发送服务

## 3. UI 设计系统

### 组件库
- **shadcn/ui** - 现代化 UI 组件库（New York 风格）
- **@radix-ui/react-*** - 无障碍组件基础库
  - dialog 1.1.15 - 模态对话框
  - dropdown-menu 2.1.16 - 下拉菜单
  - label 2.1.8 - 表单标签
  - navigation-menu 1.2.14 - 导航菜单
  - slot 1.2.4 - 组件插槽系统
  - tabs 1.1.13 - 标签页组件
- **class-variance-authority 0.7.1** - 样式变体管理
- **clsx 2.1.1 + tailwind-merge 3.3.1** - 条件类名合并
- **lucide-react 0.540.0** - SVG 图标库
- **sonner 2.0.6** - 通知系统
- **embla-carousel-react 8.7.0** - 轮播组件
- **@bprogress/next** - 页面加载进度条

### 字体与排版
- **@tailwindcss/typography 0.5.16** - 排版系统
- **next/font + geist 1.4.2** - Vercel 官方字体
- **PingFang SC** - 中文系统字体
- **智能字体回退** - 中英文混排优化

### 主题与动画
- **next-themes 0.4.6** - 主题切换（系统/明亮/暗黑）
- **Tailwind CSS 动画** - 主要动画方案（性能优先）
  - tailwindcss-animate 1.0.7 - 动画扩展
  - tw-animate-css 1.3.6 - 额外动画工具
- **framer-motion 12.23.9** - 复杂动画备用方案
- **CSS 变量主题系统** - 动态主题切换

### 表单与验证
- **React Hook Form 7.61.1** - 高性能表单库
- **Zod 4.0.10** - TypeScript 模式验证
- **botid** - Vercel 机器人防护

## 4. 开发工具链

### 代码质量
- **eslint 9.32.0** - 代码质量检查（Flat Config）
- **typescript-eslint 8.39.0** - TypeScript 专用规则
- **eslint-plugin-react 7.37.5** - React 组件规则
- **eslint-plugin-react-hooks 5.2.0** - React Hooks 最佳实践
- **eslint-plugin-react-you-might-not-need-an-effect 0.4.1** - useEffect 优化
- **@next/eslint-plugin-next 15.4.6** - Next.js 专用规则
- **eslint-plugin-import 2.32.0** - 导入语句规则
- **eslint-plugin-promise 7.2.1** - Promise 最佳实践
- **eslint-config-prettier 10.1.8** - Prettier 冲突解决
- **eslint-plugin-security 3.0.1** - 安全规则检查
- **eslint-plugin-security-node 1.1.4** - Node.js 安全规则

### 代码格式化
- **prettier 3.6.2** - 代码格式化核心
- **@ianvs/prettier-plugin-sort-imports 4.5.1** - 导入排序
- **prettier-plugin-tailwindcss 0.6.8** - Tailwind CSS 类名排序

### 构建工具
- **@next/bundle-analyzer 15.4.6** - 包大小分析
- **Turbopack** - 开发环境构建（`next dev --turbo`）
- **Webpack 5 + SWC** - 生产环境构建
- **pnpm 10.13.1** - 包管理器
- **size-limit 11.2.0** - 包大小监控
- **dependency-cruiser 16.8.0** - 依赖分析
- **madge 8.0.0** - 循环依赖检测
- **jscpd 4.0.5** - 代码重复度检测

### 性能监控
- **react-scan 0.0.42** - React 组件性能监控
  - 开发环境自动启用
  - 实时检测不必要的重新渲染
  - 可视化性能瓶颈识别

### Git 工作流
- **lefthook 1.12.2** - Git hooks 管理
- **@commitlint/cli 19.8.1** - 提交信息规范
- **@commitlint/config-conventional 19.8.1** - 约定式提交
- **husky 9.1.7** - Git hooks 备用方案

### TypeScript 类型定义
- **@types/node 20.19.9** - Node.js 类型定义
- **@types/react 19.1.8** - React 19 类型定义
- **@types/react-dom 19.1.6** - React DOM 类型定义

## 5. 测试框架

### 核心测试工具
- **vitest 3.2.4** - 现代化测试框架
- **@vitest/coverage-v8 3.2.4** - V8 引擎覆盖率工具
- **@vitest/ui 3.2.4** - 可视化测试界面
- **jsdom 26.1.0** - 浏览器环境模拟
- **@testing-library/react 16.3.0** - React 组件测试
- **@testing-library/jest-dom 6.6.4** - DOM 断言扩展
- **@testing-library/user-event 14.6.1** - 用户交互模拟

### 端到端测试
- **@playwright/test 1.55.0** - 端到端测试框架

### 无障碍性和性能测试
- **@axe-core/playwright 4.10.2** - 无障碍性测试
- **axe-core 4.10.3** - 无障碍性测试核心
- **@lhci/cli 0.15.1** - Lighthouse CI 性能监控
- **lighthouse 12.8.1** - 性能和质量审计

## 6. 性能优化与监控

### 缓存策略
- **Next.js 内置缓存** - 框架原生缓存机制
- **Git-based 静态生成** - 内容变更触发重新构建
- **ISR 配置** - 静态生成 + 增量更新
- **Vercel Edge Cache** - CDN 缓存

### 监控与分析
- **@vercel/analytics 1.5.0** - 性能分析和用户行为追踪
- **web-vitals 5.0.3** - 核心性能指标监控
- **Google Analytics 4** - 用户行为分析
- **React Error Boundaries** - 错误边界处理

## 7. 安全与部署

### 安全防护
- **botid** - Vercel 机器人防护
- **Next.js 安全头配置** - CSP、X-Frame-Options 等
- **Next.js Middleware** - 中间件安全防护
- **@t3-oss/env-nextjs 0.13.8** - 类型安全环境变量

### 监控与日志
- **@sentry/nextjs 10.3.0** - 错误监控和性能追踪
- **@sentry/cli 2.52.0** - Sentry 命令行工具
- **Vercel 函数日志** - 服务端监控

## 8. 国际化与 SEO

### 国际化
- **next-intl 4.3.4** - Next.js 国际化框架
- **Lingo.dev 0.109.0** - AI 驱动翻译服务
- **支持语言** - 英语(en) + 中文(zh)

### SEO 优化
- **Next.js 15 Metadata API** - 原生 SEO 优化
- **next-sitemap 4.2.3** - 自动 sitemap 和 hreflang 生成
- **静态 OG 图片** - 社交媒体分享图片
- **结构化数据** - Schema.org JSON-LD 支持

### 企业通信
- **WhatsApp Business API** - Meta 官方企业级 API
- **免费服务对话** - 客户主动发起的对话完全免费
- **企业级功能** - 多媒体支持、交互式消息、CRM 集成

## 9. 可选扩展

### 媒体处理
- **sharp 0.34.3** - 高性能图片处理库
- **react-loading-skeleton** - 骨架屏加载状态
- **PDF 文档处理** - 推荐使用下载链接方案

### 地图集成
- **react-leaflet 5.0.0** - 开源地图组件

### 动画扩展
- **lottie-react** - 复杂动画和品牌动画支持
- **intersection-observer** - 滚动监听（原生 API）

## 10. 项目架构

### 目录结构
```
src/
├── app/[locale]/       # Next.js 15 App Router + 国际化
├── components/         # 组件库分层
│   ├── ui/            # shadcn/ui 基础组件
│   ├── layout/        # 布局组件
│   ├── content/       # 内容组件
│   └── shared/        # 共享组件
├── lib/               # 工具库
├── types/             # TypeScript 类型定义
└── ...

content/               # MDX 内容存储
messages/              # next-intl 国际化文件
```

### 设计系统
- **主题系统** - Light/Dark/System 三模式切换
- **组件库** - shadcn/ui New York 风格
- **字体系统** - Geist Sans + Geist Mono + 中文字体回退
- **命名规范** - 组件：PascalCase，文件：kebab-case，变量：camelCase

## 11. 配置与最佳实践

### 核心配置文件
- **eslint.config.mjs** - ESLint 9 Flat Config
- **.prettierrc.json** - Prettier 代码格式化
- **components.json** - shadcn/ui 组件库配置
- **next.config.ts** - Next.js 配置（集成 next-intl）
- **tsconfig.json** - TypeScript 配置
- **tailwind.config.js** - Tailwind CSS 配置
- **vitest.config.ts** - Vitest 测试配置
- **lefthook.yml** - Git hooks 配置
- **.npmrc** - pnpm 包管理器配置

### 代码质量标准
- **复杂度限制** - 最大复杂度 15，嵌套深度 4
- **函数长度** - 最大 120 行，参数不超过 5 个
- **文件大小** - 最大 500 行
- **测试覆盖率** - 目标 80% 以上

### 性能优化策略
- **开发模式** - Turbopack (`next dev --turbo`)
- **生产构建** - Webpack 5 + SWC 编译器
- **缓存策略** - SSG/ISR 混合渲染
- **图片优化** - sharp + WebP/AVIF 支持

### 安全最佳实践
- **CSP 头部** - 严格的内容安全策略
- **环境变量** - @t3-oss/env-nextjs 类型安全验证
- **依赖安全** - 定期 `pnpm audit` 检查
- **表单保护** - botid 机器人检测

### 开发工作流
```bash
# 开发环境
pnpm dev                    # 启动开发服务器
pnpm dev:scan              # 启用 React Scan 性能监控

# 代码质量检查
pnpm type-check            # TypeScript 类型检查
pnpm lint:check            # ESLint 代码检查
pnpm format:check          # Prettier 格式检查

# 测试
pnpm test                  # 运行单元测试
pnpm test:coverage         # 测试覆盖率报告

# 构建
pnpm build                 # 生产环境构建
pnpm analyze               # 包大小分析
```
