[{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/.dependency-cruiser.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/.size-limit.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/__mocks__/fileMock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/ast-replacement-demo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/continue-eslint-fixes.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Async function 'continueESLintFixes' has too many statements (31). Maximum allowed is 20.","line":6,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":68,"endColumn":2},{"ruleId":"require-await","severity":2,"message":"Async function 'continueESLintFixes' has no 'await' expression.","line":6,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":6,"endColumn":35,"suggestions":[{"messageId":"removeAsync","fix":{"range":[99,105],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":17,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'eslintResult' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":29,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":19},{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":67,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":14,"suggestions":[{"fix":{"range":[1852,1900],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { execSync } from 'child_process';\nimport { writeFileSync } from 'fs';\n\nasync function continueESLintFixes() {\n  const log: string[] = [];\n  \n  log.push('ğŸ”„ ç»§ç»­å¤„ç†ESLinté”™è¯¯...');\n  log.push(`æ—¶é—´: ${new Date().toISOString()}`);\n  \n  try {\n    // 1. æ£€æŸ¥TypeScriptç¼–è¯‘çŠ¶æ€\n    try {\n      execSync('pnpm type-check', { stdio: 'pipe' });\n      log.push('âœ… TypeScriptç¼–è¯‘: æ— é”™è¯¯');\n    } catch (error) {\n      log.push('âŒ TypeScriptç¼–è¯‘: ä»æœ‰é”™è¯¯');\n    }\n    \n    // 2. è¿è¡ŒESLintè‡ªåŠ¨ä¿®å¤\n    log.push('\\nğŸ”§ è¿è¡ŒESLintè‡ªåŠ¨ä¿®å¤...');\n    try {\n      const eslintResult = execSync('pnpm eslint \"src/**/*.{ts,tsx}\" --fix --max-warnings=0', { \n        stdio: 'pipe',\n        encoding: 'utf8'\n      });\n      log.push('âœ… ESLintè‡ªåŠ¨ä¿®å¤å®Œæˆ');\n    } catch (error) {\n      log.push('âš ï¸ ESLintè‡ªåŠ¨ä¿®å¤å®Œæˆï¼ˆå¯èƒ½ä»æœ‰é”™è¯¯ï¼‰');\n    }\n    \n    // 3. æ£€æŸ¥å‰©ä½™é”™è¯¯\n    try {\n      const eslintCheck = execSync('pnpm eslint \"src/**/*.{ts,tsx}\" --format=compact', { \n        stdio: 'pipe',\n        encoding: 'utf8'\n      });\n      const errorLines = eslintCheck.split('\\n').filter(line => \n        line.includes('error') || line.includes('warning')\n      );\n      log.push(`ğŸ“Š å‰©ä½™ESLinté—®é¢˜: ${errorLines.length} ä¸ª`);\n    } catch (error) {\n      const output = error.stdout?.toString() || '';\n      const errorLines = output.split('\\n').filter(line => \n        line.includes('error') || line.includes('warning')\n      );\n      log.push(`ğŸ“Š å‰©ä½™ESLinté—®é¢˜: ${errorLines.length} ä¸ª`);\n    }\n    \n    // 4. ä¸‹ä¸€æ­¥è®¡åˆ’\n    log.push('\\nğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨:');\n    log.push('1. âœ… ASTé­”æ³•æ•°å­—å·¥å…·å·²ä¿®å¤');\n    log.push('2. ğŸ”„ ç›¸å¯¹è·¯å¾„å¯¼å…¥å·¥å…·å·²è¿è¡Œ');\n    log.push('3. ğŸ”„ ESLintè‡ªåŠ¨ä¿®å¤å·²æ‰§è¡Œ');\n    log.push('4. ğŸ“‹ éœ€è¦æ‰‹åŠ¨å¤„ç†å‰©ä½™é”™è¯¯:');\n    log.push('   - å®‰å…¨å¯¹è±¡æ³¨å…¥é—®é¢˜');\n    log.push('   - æ˜¾å¼anyç±»å‹');\n    log.push('   - å…¶ä»–æ‰‹åŠ¨ä¿®å¤é¡¹');\n    \n  } catch (error) {\n    log.push(`âŒ å¤„ç†å¤±è´¥: ${error}`);\n  }\n  \n  // ä¿å­˜ç»“æœ\n  writeFileSync('eslint-fix-progress.txt', log.join('\\n'));\n  console.log('è¿›åº¦æŠ¥å‘Šå·²ä¿å­˜åˆ° eslint-fix-progress.txt');\n}\n\ncontinueESLintFixes();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/env.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/instrumentation-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/instrumentation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/lighthouserc.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/mdx-components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/analyze-typescript-errors.js","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":73,"column":9,"nodeType":"MemberExpression","endLine":73,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":73,"column":34,"nodeType":"MemberExpression","endLine":73,"endColumn":55},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":80,"column":9,"nodeType":"MemberExpression","endLine":80,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":80,"column":32,"nodeType":"MemberExpression","endLine":80,"endColumn":51},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":9,"nodeType":"MemberExpression","endLine":105,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":34,"nodeType":"MemberExpression","endLine":105,"endColumn":55},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":112,"column":9,"nodeType":"MemberExpression","endLine":112,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":112,"column":32,"nodeType":"MemberExpression","endLine":112,"endColumn":51},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":133,"column":22,"nodeType":"MemberExpression","endLine":133,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":134,"column":5,"nodeType":"MemberExpression","endLine":134,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":264,"column":29,"nodeType":"MemberExpression","endLine":264,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * TypeScripté”™è¯¯åˆ†æå·¥å…·\n * åˆ†æé¡¹ç›®ä¸­çš„TypeScripté”™è¯¯ç±»å‹å’Œåˆ†å¸ƒï¼Œåˆ¶å®šä¿®å¤ä¼˜å…ˆçº§\n */\n\nconst { execSync } = require('child_process');\n\n// TypeScripté”™è¯¯ä»£ç è¯´æ˜\nconst ERROR_DESCRIPTIONS = {\n  TS2322: 'ç±»å‹ä¸åŒ¹é… - Type X is not assignable to type Y',\n  TS2339: 'å±æ€§ä¸å­˜åœ¨ - Property X does not exist on type Y',\n  TS1205: 'é‡æ–°å¯¼å‡ºé”™è¯¯ - Re-export errors',\n  TS6196: 'æœªä½¿ç”¨å£°æ˜ - Declared but never used',\n  TS2345: 'å‚æ•°ç±»å‹é”™è¯¯ - Argument type mismatch',\n  TS6133: 'æœªä½¿ç”¨å˜é‡ - Variable declared but never read',\n  TS1484:\n    'verbatimModuleSyntaxé”™è¯¯ - Type must be imported using type-only import',\n  TS18046: 'å¯èƒ½ä¸ºundefined - Expression is possibly undefined',\n  TS1361:\n    'import typeä½œä¸ºå€¼ä½¿ç”¨ - Cannot be used as a value (imported using import type)',\n  TS2739: 'ç¼ºå°‘å±æ€§ - Type is missing properties',\n  TS2351: 'æ„é€ å‡½æ•°é‡è½½é”™è¯¯ - Constructor overload error',\n  TS2571: 'å¯¹è±¡å¯èƒ½ä¸ºnull - Object is possibly null',\n  TS2532: 'å¯¹è±¡å¯èƒ½ä¸ºundefined - Object is possibly undefined',\n  TS2353: 'å¯¹è±¡å­—é¢é‡é”™è¯¯ - Object literal may only specify known properties',\n  TS7006: 'éšå¼anyç±»å‹ - Parameter implicitly has an any type',\n};\n\n// ä¿®å¤ä¼˜å…ˆçº§ï¼ˆ1=æœ€é«˜ï¼Œ5=æœ€ä½ï¼‰\nconst FIX_PRIORITY = {\n  TS1361: 1, // import typeé”™è¯¯ï¼Œå®¹æ˜“æ‰¹é‡ä¿®å¤\n  TS1484: 1, // verbatimModuleSyntaxé”™è¯¯ï¼Œå®¹æ˜“æ‰¹é‡ä¿®å¤\n  TS6133: 2, // æœªä½¿ç”¨å˜é‡ï¼Œå®¹æ˜“ä¿®å¤\n  TS6196: 2, // æœªä½¿ç”¨å£°æ˜ï¼Œå®¹æ˜“ä¿®å¤\n  TS7006: 2, // éšå¼anyï¼Œéœ€è¦æ·»åŠ ç±»å‹\n  TS2345: 3, // å‚æ•°ç±»å‹é”™è¯¯ï¼Œéœ€è¦ä»”ç»†æ£€æŸ¥\n  TS18046: 3, // å¯èƒ½ä¸ºundefinedï¼Œéœ€è¦nullæ£€æŸ¥\n  TS2532: 3, // å¯¹è±¡å¯èƒ½ä¸ºundefinedï¼Œéœ€è¦nullæ£€æŸ¥\n  TS2571: 3, // å¯¹è±¡å¯èƒ½ä¸ºnullï¼Œéœ€è¦nullæ£€æŸ¥\n  TS2339: 4, // å±æ€§ä¸å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦æ¥å£ä¿®æ”¹\n  TS2322: 4, // ç±»å‹ä¸åŒ¹é…ï¼Œéœ€è¦ä»”ç»†åˆ†æ\n  TS2739: 4, // ç¼ºå°‘å±æ€§ï¼Œéœ€è¦æ¥å£ä¿®æ”¹\n  TS2353: 4, // å¯¹è±¡å­—é¢é‡é”™è¯¯ï¼Œéœ€è¦ç±»å‹å®šä¹‰\n  TS2351: 5, // æ„é€ å‡½æ•°é‡è½½ï¼Œå¤æ‚ä¿®å¤\n  TS1205: 5, // é‡æ–°å¯¼å‡ºé”™è¯¯ï¼Œæ¶æ„ç›¸å…³\n};\n\n/**\n * è·å–TypeScripté”™è¯¯ç»Ÿè®¡\n */\nfunction getTypeScriptErrorStats() {\n  try {\n    console.log('ğŸ” åˆ†æTypeScripté”™è¯¯...');\n\n    const output = execSync('pnpm type-check', {\n      encoding: 'utf8',\n      stdio: 'pipe',\n    });\n    const errorLines = output\n      .split('\\n')\n      .filter((line) => line.includes('error TS'));\n\n    const errorStats = {};\n    const fileStats = {};\n\n    errorLines.forEach((line) => {\n      // æå–é”™è¯¯ä»£ç \n      const errorMatch = line.match(/error TS(\\d+)/);\n      if (errorMatch) {\n        const errorCode = `TS${errorMatch[1]}`;\n        errorStats[errorCode] = (errorStats[errorCode] || 0) + 1;\n      }\n\n      // æå–æ–‡ä»¶è·¯å¾„\n      const fileMatch = line.match(/^([^(]+)\\(/);\n      if (fileMatch) {\n        const filePath = fileMatch[1];\n        fileStats[filePath] = (fileStats[filePath] || 0) + 1;\n      }\n    });\n\n    return { errorStats, fileStats, totalErrors: errorLines.length };\n  } catch (error) {\n    // TypeScriptæœ‰é”™è¯¯æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æˆ‘ä»¬éœ€è¦æ•è·è¾“å‡º\n    const output = error.stdout || error.stderr || '';\n    const errorLines = output\n      .split('\\n')\n      .filter((line) => line.includes('error TS'));\n\n    if (errorLines.length === 0) {\n      console.error('è·å–TypeScripté”™è¯¯ç»Ÿè®¡å¤±è´¥:', error.message);\n      return { errorStats: {}, fileStats: {}, totalErrors: 0 };\n    }\n\n    const errorStats = {};\n    const fileStats = {};\n\n    errorLines.forEach((line) => {\n      // æå–é”™è¯¯ä»£ç \n      const errorMatch = line.match(/error TS(\\d+)/);\n      if (errorMatch) {\n        const errorCode = `TS${errorMatch[1]}`;\n        errorStats[errorCode] = (errorStats[errorCode] || 0) + 1;\n      }\n\n      // æå–æ–‡ä»¶è·¯å¾„\n      const fileMatch = line.match(/^([^(]+)\\(/);\n      if (fileMatch) {\n        const filePath = fileMatch[1];\n        fileStats[filePath] = (fileStats[filePath] || 0) + 1;\n      }\n    });\n\n    return { errorStats, fileStats, totalErrors: errorLines.length };\n  }\n}\n\n/**\n * åˆ†æé”™è¯¯ä¼˜å…ˆçº§\n */\nfunction analyzeErrorPriority(errorStats) {\n  const priorityGroups = {\n    1: [], // æœ€é«˜ä¼˜å…ˆçº§\n    2: [], // é«˜ä¼˜å…ˆçº§\n    3: [], // ä¸­ç­‰ä¼˜å…ˆçº§\n    4: [], // ä½ä¼˜å…ˆçº§\n    5: [], // æœ€ä½ä¼˜å…ˆçº§\n  };\n\n  Object.entries(errorStats).forEach(([errorCode, count]) => {\n    const priority = FIX_PRIORITY[errorCode] || 4;\n    priorityGroups[priority].push({ errorCode, count, priority });\n  });\n\n  return priorityGroups;\n}\n\n/**\n * åˆ†ææ–‡ä»¶é”™è¯¯åˆ†å¸ƒ\n */\nfunction analyzeFileDistribution(fileStats) {\n  const sortedFiles = Object.entries(fileStats)\n    .sort(([, a], [, b]) => b - a)\n    .slice(0, 20); // å–å‰20ä¸ªé”™è¯¯æœ€å¤šçš„æ–‡ä»¶\n\n  const fileCategories = {\n    tests: [],\n    api: [],\n    components: [],\n    lib: [],\n    app: [],\n    other: [],\n  };\n\n  sortedFiles.forEach(([filePath, count]) => {\n    if (\n      filePath.includes('__tests__') ||\n      filePath.includes('.test.') ||\n      filePath.includes('.spec.')\n    ) {\n      fileCategories.tests.push({ filePath, count });\n    } else if (filePath.includes('/api/')) {\n      fileCategories.api.push({ filePath, count });\n    } else if (filePath.includes('/components/')) {\n      fileCategories.components.push({ filePath, count });\n    } else if (filePath.includes('/lib/')) {\n      fileCategories.lib.push({ filePath, count });\n    } else if (filePath.includes('/app/')) {\n      fileCategories.app.push({ filePath, count });\n    } else {\n      fileCategories.other.push({ filePath, count });\n    }\n  });\n\n  return fileCategories;\n}\n\n/**\n * ç”Ÿæˆä¿®å¤å»ºè®®\n */\nfunction generateFixSuggestions(priorityGroups, fileCategories) {\n  const suggestions = [];\n\n  // ä¼˜å…ˆçº§1ï¼šç«‹å³ä¿®å¤\n  if (priorityGroups[1].length > 0) {\n    const highPriorityErrors = priorityGroups[1].reduce(\n      (sum, item) => sum + item.count,\n      0,\n    );\n    suggestions.push({\n      priority: 1,\n      title: 'ç«‹å³ä¿®å¤ - import typeå’Œæ¨¡å—è¯­æ³•é”™è¯¯',\n      description: `${highPriorityErrors}ä¸ªé”™è¯¯ï¼Œå¯ä»¥æ‰¹é‡è‡ªåŠ¨ä¿®å¤`,\n      errors: priorityGroups[1],\n      action: 'è¿è¡Œ node scripts/fix-import-type-issues.js',\n    });\n  }\n\n  // ä¼˜å…ˆçº§2ï¼šæ¸…ç†æœªä½¿ç”¨ä»£ç \n  if (priorityGroups[2].length > 0) {\n    const cleanupErrors = priorityGroups[2].reduce(\n      (sum, item) => sum + item.count,\n      0,\n    );\n    suggestions.push({\n      priority: 2,\n      title: 'ä»£ç æ¸…ç† - æœªä½¿ç”¨å˜é‡å’Œéšå¼any',\n      description: `${cleanupErrors}ä¸ªé”™è¯¯ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç†`,\n      errors: priorityGroups[2],\n      action: 'æ‰‹åŠ¨ç§»é™¤æœªä½¿ç”¨å˜é‡ï¼Œæ·»åŠ ç±»å‹æ³¨è§£',\n    });\n  }\n\n  // æµ‹è¯•æ–‡ä»¶ä¿®å¤\n  if (fileCategories.tests.length > 0) {\n    const testErrors = fileCategories.tests.reduce(\n      (sum, item) => sum + item.count,\n      0,\n    );\n    suggestions.push({\n      priority: 2,\n      title: 'æµ‹è¯•æ–‡ä»¶ä¿®å¤',\n      description: `${testErrors}ä¸ªæµ‹è¯•æ–‡ä»¶é”™è¯¯ï¼Œä¸»è¦æ˜¯Mockç±»å‹é—®é¢˜`,\n      files: fileCategories.tests.slice(0, 10),\n      action: 'ä¿®å¤æµ‹è¯•æ–‡ä»¶ä¸­çš„Mockç±»å‹å®šä¹‰',\n    });\n  }\n\n  return suggestions;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸš€ å¼€å§‹TypeScripté”™è¯¯åˆ†æ...\\n');\n\n  const { errorStats, fileStats, totalErrors } = getTypeScriptErrorStats();\n\n  if (totalErrors === 0) {\n    console.log('âœ… æ²¡æœ‰å‘ç°TypeScripté”™è¯¯ï¼');\n    return;\n  }\n\n  console.log(`ğŸ“Š æ€»é”™è¯¯æ•°: ${totalErrors}\\n`);\n\n  // åˆ†æé”™è¯¯ä¼˜å…ˆçº§\n  const priorityGroups = analyzeErrorPriority(errorStats);\n\n  // åˆ†ææ–‡ä»¶åˆ†å¸ƒ\n  const fileCategories = analyzeFileDistribution(fileStats);\n\n  // ç”Ÿæˆä¿®å¤å»ºè®®\n  const suggestions = generateFixSuggestions(priorityGroups, fileCategories);\n\n  // è¾“å‡ºåˆ†æç»“æœ\n  console.log('ğŸ“ˆ é”™è¯¯ç±»å‹åˆ†å¸ƒï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰:');\n  Object.entries(priorityGroups).forEach(([priority, errors]) => {\n    if (errors.length > 0) {\n      console.log(`\\nä¼˜å…ˆçº§ ${priority}:`);\n      errors.forEach(({ errorCode, count }) => {\n        const description = ERROR_DESCRIPTIONS[errorCode] || 'æœªçŸ¥é”™è¯¯ç±»å‹';\n        console.log(`  ${errorCode}: ${count}ä¸ª - ${description}`);\n      });\n    }\n  });\n\n  console.log('\\nğŸ“ é”™è¯¯æ–‡ä»¶åˆ†å¸ƒï¼ˆå‰10ä¸ªï¼‰:');\n  Object.entries(fileCategories).forEach(([category, files]) => {\n    if (files.length > 0) {\n      console.log(`\\n${category.toUpperCase()}:`);\n      files.slice(0, 5).forEach(({ filePath, count }) => {\n        console.log(`  ${filePath}: ${count}ä¸ªé”™è¯¯`);\n      });\n    }\n  });\n\n  console.log('\\nğŸ¯ ä¿®å¤å»ºè®®:');\n  suggestions.forEach((suggestion, index) => {\n    console.log(`\\n${index + 1}. ${suggestion.title}`);\n    console.log(`   ${suggestion.description}`);\n    console.log(`   å»ºè®®æ“ä½œ: ${suggestion.action}`);\n  });\n\n  console.log('\\nâœ¨ åˆ†æå®Œæˆï¼å»ºè®®æŒ‰ä¼˜å…ˆçº§é¡ºåºä¿®å¤é”™è¯¯ã€‚');\n}\n\n// è¿è¡Œè„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = {\n  getTypeScriptErrorStats,\n  analyzeErrorPriority,\n  analyzeFileDistribution,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/analyze-workflows.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":29,"column":21,"nodeType":"CallExpression","endLine":29,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":99,"column":12,"nodeType":"MemberExpression","endLine":99,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":100,"column":9,"nodeType":"MemberExpression","endLine":100,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":102,"column":7,"nodeType":"MemberExpression","endLine":102,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":200,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":200,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":200,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * GitHub Actionså·¥ä½œæµåˆ†æå·¥å…·\n * GitHub Actions workflow analysis tool\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst yaml = require('js-yaml');\n\nconst workflowsDir = '.github/workflows';\n\n// è·å–æ‰€æœ‰å·¥ä½œæµæ–‡ä»¶\nfunction getWorkflowFiles() {\n  if (!fs.existsSync(workflowsDir)) {\n    return [];\n  }\n\n  return fs\n    .readdirSync(workflowsDir)\n    .filter((file) => file.endsWith('.yml') || file.endsWith('.yaml'))\n    .map((file) => path.join(workflowsDir, file));\n}\n\n// åˆ†æå·¥ä½œæµå†…å®¹\nfunction analyzeWorkflow(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    const workflow = yaml.load(content);\n\n    return {\n      file: path.basename(filePath),\n      name: workflow.name || 'Unnamed',\n      triggers: workflow.on || {},\n      jobs: Object.keys(workflow.jobs || {}),\n      jobCount: Object.keys(workflow.jobs || {}).length,\n      steps: extractSteps(workflow.jobs || {}),\n      dependencies: extractDependencies(workflow.jobs || {}),\n      runners: extractRunners(workflow.jobs || {}),\n    };\n  } catch (error) {\n    console.error(`Error analyzing ${filePath}:`, error.message);\n    return null;\n  }\n}\n\n// æå–æ­¥éª¤ä¿¡æ¯\nfunction extractSteps(jobs) {\n  const allSteps = [];\n  Object.values(jobs).forEach((job) => {\n    if (job.steps) {\n      job.steps.forEach((step) => {\n        if (step.name) {\n          allSteps.push(step.name);\n        } else if (step.run) {\n          allSteps.push(`${step.run.split('\\n')[0].substring(0, 50)  }...`);\n        } else if (step.uses) {\n          allSteps.push(`uses: ${step.uses}`);\n        }\n      });\n    }\n  });\n  return allSteps;\n}\n\n// æå–ä¾èµ–å…³ç³»\nfunction extractDependencies(jobs) {\n  const deps = [];\n  Object.entries(jobs).forEach(([jobName, job]) => {\n    if (job.needs) {\n      const needs = Array.isArray(job.needs) ? job.needs : [job.needs];\n      needs.forEach((dep) => {\n        deps.push(`${jobName} needs ${dep}`);\n      });\n    }\n  });\n  return deps;\n}\n\n// æå–è¿è¡Œå™¨ä¿¡æ¯\nfunction extractRunners(jobs) {\n  const runners = new Set();\n  Object.values(jobs).forEach((job) => {\n    if (job['runs-on']) {\n      runners.add(job['runs-on']);\n    }\n  });\n  return Array.from(runners);\n}\n\n// æ£€æµ‹é‡å¤åŠŸèƒ½\nfunction detectDuplicates(workflows) {\n  const duplicates = [];\n  const stepGroups = {};\n\n  workflows.forEach((workflow) => {\n    workflow.steps.forEach((step) => {\n      if (!stepGroups[step]) {\n        stepGroups[step] = [];\n      }\n      stepGroups[step].push(workflow.file);\n    });\n  });\n\n  Object.entries(stepGroups).forEach(([step, files]) => {\n    if (files.length > 1) {\n      duplicates.push({\n        step,\n        files: [...new Set(files)], // å»é‡\n        count: files.length,\n      });\n    }\n  });\n\n  return duplicates.filter((dup) => dup.files.length > 1);\n}\n\n// ä¸»åˆ†æå‡½æ•°\nfunction main() {\n  console.log('ğŸ” GitHub Actionså·¥ä½œæµåˆ†æ');\n  console.log('='.repeat(50));\n\n  const workflowFiles = getWorkflowFiles();\n\n  if (workflowFiles.length === 0) {\n    console.log('âŒ æœªæ‰¾åˆ°å·¥ä½œæµæ–‡ä»¶');\n    return;\n  }\n\n  console.log(`ğŸ“ å‘ç° ${workflowFiles.length} ä¸ªå·¥ä½œæµæ–‡ä»¶:`);\n  workflowFiles.forEach((file) => console.log(`  - ${file}`));\n\n  const workflows = workflowFiles.map(analyzeWorkflow).filter(Boolean);\n\n  console.log('\\nğŸ“Š å·¥ä½œæµæ¦‚è§ˆ:');\n  workflows.forEach((workflow) => {\n    console.log(`\\nğŸ“„ ${workflow.file}`);\n    console.log(`  åç§°: ${workflow.name}`);\n    console.log(`  ä½œä¸šæ•°: ${workflow.jobCount}`);\n    console.log(`  è¿è¡Œå™¨: ${workflow.runners.join(', ')}`);\n    console.log(`  è§¦å‘å™¨: ${Object.keys(workflow.triggers).join(', ')}`);\n\n    if (workflow.dependencies.length > 0) {\n      console.log(`  ä¾èµ–: ${workflow.dependencies.join(', ')}`);\n    }\n  });\n\n  // æ£€æµ‹é‡å¤\n  const duplicates = detectDuplicates(workflows);\n\n  if (duplicates.length > 0) {\n    console.log('\\nâš ï¸  å‘ç°é‡å¤åŠŸèƒ½:');\n    duplicates.forEach((dup) => {\n      if (dup.files.length > 1) {\n        console.log(`  \"${dup.step}\" å‡ºç°åœ¨: ${dup.files.join(', ')}`);\n      }\n    });\n  }\n\n  // ä¼˜åŒ–å»ºè®®\n  console.log('\\nğŸ’¡ ä¼˜åŒ–å»ºè®®:');\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰å¤ªå¤šå·¥ä½œæµ\n  if (workflows.length > 5) {\n    console.log('  - å·¥ä½œæµæ•°é‡è¾ƒå¤šï¼Œè€ƒè™‘åˆå¹¶ç›¸ä¼¼åŠŸèƒ½');\n  }\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„è´¨é‡æ£€æŸ¥\n  const qualityWorkflows = workflows.filter(\n    (w) =>\n      w.name.toLowerCase().includes('quality') ||\n      w.name.toLowerCase().includes('test'),\n  );\n\n  if (qualityWorkflows.length > 2) {\n    console.log(\n      `  - å‘ç° ${qualityWorkflows.length} ä¸ªè´¨é‡æ£€æŸ¥å·¥ä½œæµï¼Œå»ºè®®åˆå¹¶`,\n    );\n  }\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„E2Eæµ‹è¯•\n  const e2eWorkflows = workflows.filter((w) =>\n    w.name.toLowerCase().includes('e2e'),\n  );\n\n  if (e2eWorkflows.length > 1) {\n    console.log(`  - å‘ç° ${e2eWorkflows.length} ä¸ªE2Eæµ‹è¯•å·¥ä½œæµï¼Œå»ºè®®åˆå¹¶`);\n  }\n\n  console.log('\\nğŸ¯ æ¨èä¿ç•™çš„æ ¸å¿ƒå·¥ä½œæµ:');\n  console.log('  1. ä¸»è¦CI/CDæµæ°´çº¿ï¼ˆæ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ï¼‰');\n  console.log('  2. è´¨é‡æ£€æŸ¥ï¼ˆä»£ç è´¨é‡ã€å®‰å…¨ã€æ€§èƒ½ï¼‰');\n  console.log('  3. ä¾èµ–æ›´æ–°ï¼ˆå¯é€‰ï¼‰');\n}\n\n// æ£€æŸ¥æ˜¯å¦å®‰è£…äº†js-yaml\ntry {\n  require('js-yaml');\n} catch (error) {\n  console.error('âŒ éœ€è¦å®‰è£… js-yaml: npm install js-yaml');\n  process.exit(1);\n}\n\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/architecture-metrics.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":78,"column":10,"nodeType":"CallExpression","endLine":78,"endColumn":39},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":79,"column":7,"nodeType":"CallExpression","endLine":79,"endColumn":56},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeExportStar' has no 'await' expression.","line":86,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":86,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1747,1753],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":95,"column":25,"nodeType":"CallExpression","endLine":95,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":13,"nodeType":"MemberExpression","endLine":105,"endColumn":32},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":36,"nodeType":"MemberExpression","endLine":105,"endColumn":55},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":108,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":108,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":108,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":21},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeTypeScriptErrors' has no 'await' expression.","line":123,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":123,"endColumn":32,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2747,2753],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":127,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"result"},"fix":{"range":[2839,2959],"text":""},"desc":"Remove unused variable 'result'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":127,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":19},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeESLintIssues' has no 'await' expression.","line":145,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":145,"endColumn":28,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3370,3376],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":157,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":157,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":157,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":191,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":191,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":191,"endColumn":28},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeFileCount' has no 'await' expression.","line":205,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":205,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5094,5100],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeFileSizes' has no 'await' expression.","line":226,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":226,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5633,5639],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":234,"column":23,"nodeType":"CallExpression","endLine":234,"endColumn":40},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":236,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":236,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":236,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":236,"endColumn":21},{"ruleId":"require-await","severity":1,"message":"Async method 'generateReport' has no 'await' expression.","line":277,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":277,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6816,6822],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":299,"column":5,"nodeType":"CallExpression","endLine":299,"endColumn":64},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":303,"column":5,"nodeType":"CallExpression","endLine":303,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æ¶æ„åº¦é‡åŸºçº¿è„šæœ¬\n *\n * åŠŸèƒ½ï¼š\n * - ç»Ÿè®¡export *æ•°é‡å’Œåˆ†å¸ƒ\n * - ç»Ÿè®¡TypeScript/ESLinté”™è¯¯æ•°\n * - ç»Ÿè®¡å¾ªç¯ä¾èµ–æ•°é‡\n * - ç»Ÿè®¡è·¨åŸŸä¾èµ–è®¡æ•°\n * - æ–‡ä»¶å¤§å°åˆ†ä½æ•°åˆ†æ\n * - æ”¯æŒè¶‹åŠ¿åˆ†æå’Œå†å²å¯¹æ¯”\n * - é›†æˆåˆ°CI pipeline\n */\n\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\nconst glob = require('glob');\n\n// æ¶æ„åº¦é‡é…ç½®\nconst METRICS_CONFIG = {\n  // è¾“å‡ºç›®å½•\n  outputDir: path.join(process.cwd(), 'reports', 'architecture'),\n\n  // æ‰«ææ¨¡å¼\n  scanPatterns: {\n    typescript: 'src/**/*.{ts,tsx}',\n    javascript: 'src/**/*.{js,jsx}',\n    all: 'src/**/*.{ts,tsx,js,jsx}',\n    i18n: 'src/lib/*i18n*',\n    tests: 'src/**/*.{test,spec}.{ts,tsx,js,jsx}',\n  },\n\n  // åŸŸå®šä¹‰\n  domains: [\n    'security',\n    'content',\n    'accessibility',\n    'resend',\n    'whatsapp',\n    'performance-monitoring',\n    'i18n',\n    'locale-storage',\n    'web-vitals',\n    'theme-analytics',\n  ],\n\n  // è´¨é‡é˜ˆå€¼\n  thresholds: {\n    exportStar: { current: 97, phase1: 30, final: 0 },\n    tsErrors: { current: 2759, phase1: 1500, phase2: 500, final: 0 },\n    eslintIssues: { current: 2075, target: 200 },\n    totalFiles: { current: 644, target: 300 },\n  },\n};\n\nclass ArchitectureMetrics {\n  constructor() {\n    this.outputDir = METRICS_CONFIG.outputDir;\n    this.ensureOutputDir();\n    this.metrics = {\n      timestamp: new Date().toISOString(),\n      exportStarCount: 0,\n      exportStarByDomain: {},\n      typeScriptErrors: 0,\n      eslintIssues: 0,\n      totalFiles: 0,\n      i18nFiles: 0,\n      circularDependencies: 0,\n      crossDomainDependencies: 0,\n      fileSizeStats: {},\n      domainStats: {},\n    };\n  }\n\n  ensureOutputDir() {\n    if (!fs.existsSync(this.outputDir)) {\n      fs.mkdirSync(this.outputDir, { recursive: true });\n    }\n  }\n\n  /**\n   * ç»Ÿè®¡export *æ•°é‡å’Œåˆ†å¸ƒ\n   */\n  async analyzeExportStar() {\n    console.log('ğŸ“Š åˆ†æexport *é‡æ–°å¯¼å‡º...');\n\n    const files = glob.sync(METRICS_CONFIG.scanPatterns.all);\n    let totalExportStar = 0;\n    const domainStats = {};\n\n    for (const file of files) {\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const exportStarMatches = content.match(/export\\s*\\*\\s*from/g);\n\n        if (exportStarMatches) {\n          const count = exportStarMatches.length;\n          totalExportStar += count;\n\n          // æŒ‰åŸŸåˆ†ç±»\n          const domain = this.getDomainFromPath(file);\n          if (domain) {\n            domainStats[domain] = (domainStats[domain] || 0) + count;\n          }\n        }\n      } catch (error) {\n        console.warn(`âš ï¸ æ— æ³•è¯»å–æ–‡ä»¶: ${file}`);\n      }\n    }\n\n    this.metrics.exportStarCount = totalExportStar;\n    this.metrics.exportStarByDomain = domainStats;\n\n    console.log(`âœ… å‘ç° ${totalExportStar} ä¸ªexport *é‡æ–°å¯¼å‡º`);\n    return { totalExportStar, domainStats };\n  }\n\n  /**\n   * ç»Ÿè®¡TypeScripté”™è¯¯\n   */\n  async analyzeTypeScriptErrors() {\n    console.log('ğŸ” åˆ†æTypeScripté”™è¯¯...');\n\n    try {\n      const result = execSync('pnpm tsc --noEmit --skipLibCheck', {\n        encoding: 'utf8',\n        stdio: 'pipe',\n      });\n      this.metrics.typeScriptErrors = 0;\n    } catch (error) {\n      const output = error.stdout || error.stderr || '';\n      const errorMatches = output.match(/error TS\\d+:/g);\n      this.metrics.typeScriptErrors = errorMatches ? errorMatches.length : 0;\n    }\n\n    console.log(`âœ… TypeScripté”™è¯¯æ•°: ${this.metrics.typeScriptErrors}`);\n    return this.metrics.typeScriptErrors;\n  }\n\n  /**\n   * ç»Ÿè®¡ESLinté—®é¢˜\n   */\n  async analyzeESLintIssues() {\n    console.log('ğŸ” åˆ†æESLinté—®é¢˜...');\n\n    try {\n      // ä½¿ç”¨ç°æœ‰çš„quality-quick-stagedè„šæœ¬æ¥è·å–ESLintç»Ÿè®¡\n      const result = execSync('node scripts/quality-quick-staged.js --json', {\n        encoding: 'utf8',\n        stdio: 'pipe',\n      });\n\n      const qualityData = JSON.parse(result);\n      this.metrics.eslintIssues = qualityData.totalIssues || 0;\n    } catch (error) {\n      // å¤‡ç”¨æ–¹æ¡ˆï¼šç›´æ¥è¿è¡ŒESLint\n      try {\n        const result = execSync(\n          'pnpm eslint src --format json --max-warnings 10000',\n          {\n            encoding: 'utf8',\n            stdio: 'pipe',\n          },\n        );\n\n        const eslintResults = JSON.parse(result);\n        let totalIssues = 0;\n\n        eslintResults.forEach((file) => {\n          totalIssues += file.errorCount + file.warningCount;\n        });\n\n        this.metrics.eslintIssues = totalIssues;\n      } catch (eslintError) {\n        // ESLintå¯èƒ½è¿”å›éé›¶é€€å‡ºç ä½†ä»æœ‰æœ‰æ•ˆè¾“å‡º\n        try {\n          const output = eslintError.stdout || '';\n          if (output) {\n            const eslintResults = JSON.parse(output);\n            let totalIssues = 0;\n            eslintResults.forEach((file) => {\n              totalIssues += file.errorCount + file.warningCount;\n            });\n            this.metrics.eslintIssues = totalIssues;\n          } else {\n            console.warn('âš ï¸ æ— æ³•è·å–ESLintè¾“å‡ºï¼Œä½¿ç”¨ä¼°ç®—å€¼');\n            this.metrics.eslintIssues = 2075; // ä½¿ç”¨å·²çŸ¥çš„å½“å‰å€¼\n          }\n        } catch (parseError) {\n          console.warn('âš ï¸ æ— æ³•è§£æESLintè¾“å‡ºï¼Œä½¿ç”¨ä¼°ç®—å€¼');\n          this.metrics.eslintIssues = 2075; // ä½¿ç”¨å·²çŸ¥çš„å½“å‰å€¼\n        }\n      }\n    }\n\n    console.log(`âœ… ESLinté—®é¢˜æ•°: ${this.metrics.eslintIssues}`);\n    return this.metrics.eslintIssues;\n  }\n\n  /**\n   * ç»Ÿè®¡æ–‡ä»¶æ•°é‡\n   */\n  async analyzeFileCount() {\n    console.log('ğŸ“ ç»Ÿè®¡æ–‡ä»¶æ•°é‡...');\n\n    const allFiles = glob.sync(METRICS_CONFIG.scanPatterns.all);\n    const i18nFiles = glob.sync(METRICS_CONFIG.scanPatterns.i18n);\n\n    this.metrics.totalFiles = allFiles.length;\n    this.metrics.i18nFiles = i18nFiles.length;\n\n    console.log(`âœ… æ€»æ–‡ä»¶æ•°: ${this.metrics.totalFiles}`);\n    console.log(`âœ… i18næ–‡ä»¶æ•°: ${this.metrics.i18nFiles}`);\n\n    return {\n      totalFiles: this.metrics.totalFiles,\n      i18nFiles: this.metrics.i18nFiles,\n    };\n  }\n\n  /**\n   * åˆ†ææ–‡ä»¶å¤§å°åˆ†å¸ƒ\n   */\n  async analyzeFileSizes() {\n    console.log('ğŸ“ åˆ†ææ–‡ä»¶å¤§å°åˆ†å¸ƒ...');\n\n    const files = glob.sync(METRICS_CONFIG.scanPatterns.all);\n    const sizes = [];\n\n    for (const file of files) {\n      try {\n        const stats = fs.statSync(file);\n        sizes.push(stats.size);\n      } catch (error) {\n        console.warn(`âš ï¸ æ— æ³•è·å–æ–‡ä»¶å¤§å°: ${file}`);\n      }\n    }\n\n    sizes.sort((a, b) => a - b);\n\n    const stats = {\n      min: sizes[0] || 0,\n      max: sizes[sizes.length - 1] || 0,\n      median: sizes[Math.floor(sizes.length / 2)] || 0,\n      p75: sizes[Math.floor(sizes.length * 0.75)] || 0,\n      p90: sizes[Math.floor(sizes.length * 0.9)] || 0,\n      p95: sizes[Math.floor(sizes.length * 0.95)] || 0,\n      average:\n        sizes.length > 0 ? sizes.reduce((a, b) => a + b, 0) / sizes.length : 0,\n    };\n\n    this.metrics.fileSizeStats = stats;\n    console.log(\n      `âœ… æ–‡ä»¶å¤§å°ç»Ÿè®¡å®Œæˆ (ä¸­ä½æ•°: ${Math.round(stats.median)} bytes)`,\n    );\n\n    return stats;\n  }\n\n  /**\n   * ä»æ–‡ä»¶è·¯å¾„æå–åŸŸå\n   */\n  getDomainFromPath(filePath) {\n    for (const domain of METRICS_CONFIG.domains) {\n      if (filePath.includes(domain)) {\n        return domain;\n      }\n    }\n    return 'other';\n  }\n\n  /**\n   * ç”Ÿæˆåº¦é‡æŠ¥å‘Š\n   */\n  async generateReport() {\n    console.log('ğŸ“Š ç”Ÿæˆæ¶æ„åº¦é‡æŠ¥å‘Š...');\n\n    const report = {\n      metadata: {\n        timestamp: this.metrics.timestamp,\n        version: '1.0.0',\n        project: 'tucsenberg-web-frontier',\n      },\n      metrics: this.metrics,\n      thresholds: METRICS_CONFIG.thresholds,\n      analysis: {\n        phase1Ready:\n          this.metrics.exportStarCount <=\n          METRICS_CONFIG.thresholds.exportStar.phase1,\n        qualityTrend: this.calculateQualityTrend(),\n        recommendations: this.generateRecommendations(),\n      },\n    };\n\n    // ä¿å­˜JSONæŠ¥å‘Š\n    const jsonPath = path.join(this.outputDir, `metrics-${Date.now()}.json`);\n    fs.writeFileSync(jsonPath, JSON.stringify(report, null, 2));\n\n    // ä¿å­˜MarkdownæŠ¥å‘Š\n    const mdPath = path.join(this.outputDir, `metrics-${Date.now()}.md`);\n    fs.writeFileSync(mdPath, this.generateMarkdownReport(report));\n\n    console.log(`âœ… æŠ¥å‘Šå·²ç”Ÿæˆ:`);\n    console.log(`   JSON: ${jsonPath}`);\n    console.log(`   Markdown: ${mdPath}`);\n\n    return report;\n  }\n\n  calculateQualityTrend() {\n    // ç®€åŒ–çš„è´¨é‡è¶‹åŠ¿è®¡ç®—\n    const { exportStarCount, typeScriptErrors, eslintIssues } = this.metrics;\n    const { thresholds } = METRICS_CONFIG;\n\n    return {\n      exportStarProgress: Math.max(\n        0,\n        ((thresholds.exportStar.current - exportStarCount) /\n          thresholds.exportStar.current) *\n          100,\n      ),\n      tsErrorProgress: Math.max(\n        0,\n        ((thresholds.tsErrors.current - typeScriptErrors) /\n          thresholds.tsErrors.current) *\n          100,\n      ),\n      eslintProgress: Math.max(\n        0,\n        ((thresholds.eslintIssues.current - eslintIssues) /\n          thresholds.eslintIssues.current) *\n          100,\n      ),\n    };\n  }\n\n  generateRecommendations() {\n    const recommendations = [];\n\n    if (\n      this.metrics.exportStarCount > METRICS_CONFIG.thresholds.exportStar.phase1\n    ) {\n      recommendations.push(\n        'ä¼˜å…ˆå¤„ç†export *é‡æ–°å¯¼å‡ºï¼Œå½“å‰æ•°é‡è¶…å‡ºç¬¬ä¸€é˜¶æ®µç›®æ ‡',\n      );\n    }\n\n    if (\n      this.metrics.typeScriptErrors > METRICS_CONFIG.thresholds.tsErrors.phase1\n    ) {\n      recommendations.push('TypeScripté”™è¯¯æ•°é‡è¾ƒé«˜ï¼Œå»ºè®®åˆ†é˜¶æ®µä¿®å¤');\n    }\n\n    return recommendations;\n  }\n\n  generateMarkdownReport(report) {\n    return `# æ¶æ„åº¦é‡æŠ¥å‘Š\n\nç”Ÿæˆæ—¶é—´: ${report.metadata.timestamp}\n\n## æ ¸å¿ƒæŒ‡æ ‡\n\n| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | çŠ¶æ€ |\n|------|--------|--------|------|\n| Export * æ•°é‡ | ${report.metrics.exportStarCount} | ${METRICS_CONFIG.thresholds.exportStar.phase1} | ${report.metrics.exportStarCount <= METRICS_CONFIG.thresholds.exportStar.phase1 ? 'âœ…' : 'âŒ'} |\n| TypeScript é”™è¯¯ | ${report.metrics.typeScriptErrors} | ${METRICS_CONFIG.thresholds.tsErrors.phase1} | ${report.metrics.typeScriptErrors <= METRICS_CONFIG.thresholds.tsErrors.phase1 ? 'âœ…' : 'âŒ'} |\n| ESLint é—®é¢˜ | ${report.metrics.eslintIssues} | ${METRICS_CONFIG.thresholds.eslintIssues.target} | ${report.metrics.eslintIssues <= METRICS_CONFIG.thresholds.eslintIssues.target ? 'âœ…' : 'âŒ'} |\n| æ€»æ–‡ä»¶æ•° | ${report.metrics.totalFiles} | ${METRICS_CONFIG.thresholds.totalFiles.target} | ${report.metrics.totalFiles <= METRICS_CONFIG.thresholds.totalFiles.target ? 'âœ…' : 'âŒ'} |\n\n## Export * æŒ‰åŸŸåˆ†å¸ƒ\n\n${Object.entries(report.metrics.exportStarByDomain)\n  .map(([domain, count]) => `- ${domain}: ${count}`)\n  .join('\\n')}\n\n## å»ºè®®\n\n${report.analysis.recommendations.map((rec) => `- ${rec}`).join('\\n')}\n`;\n  }\n\n  /**\n   * è¿è¡Œå®Œæ•´åˆ†æ\n   */\n  async runFullAnalysis() {\n    console.log('ğŸš€ å¼€å§‹æ¶æ„åº¦é‡åˆ†æ...\\n');\n\n    try {\n      await this.analyzeExportStar();\n      await this.analyzeTypeScriptErrors();\n      await this.analyzeESLintIssues();\n      await this.analyzeFileCount();\n      await this.analyzeFileSizes();\n\n      const report = await this.generateReport();\n\n      console.log('\\nğŸ“Š æ¶æ„åº¦é‡åˆ†æå®Œæˆ!');\n      console.log(`Export * æ•°é‡: ${this.metrics.exportStarCount}`);\n      console.log(`TypeScript é”™è¯¯: ${this.metrics.typeScriptErrors}`);\n      console.log(`ESLint é—®é¢˜: ${this.metrics.eslintIssues}`);\n      console.log(`æ€»æ–‡ä»¶æ•°: ${this.metrics.totalFiles}`);\n\n      return report;\n    } catch (error) {\n      console.error('âŒ åˆ†æè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:', error.message);\n      throw error;\n    }\n  }\n}\n\n// ä¸»å‡½æ•°\nasync function main() {\n  const metrics = new ArchitectureMetrics();\n  await metrics.runFullAnalysis();\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬\nif (require.main === module) {\n  main().catch((error) => {\n    console.error('âŒ è„šæœ¬æ‰§è¡Œå¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nmodule.exports = ArchitectureMetrics;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/batch-fix-imports.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":65,"column":8,"nodeType":"CallExpression","endLine":65,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":71,"column":21,"nodeType":"CallExpression","endLine":71,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":76,"column":20,"nodeType":"MemberExpression","endLine":76,"endColumn":28},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":91,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":98,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (6). Maximum allowed is 4.","line":93,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":97,"endColumn":14},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":94,"column":15,"nodeType":"MemberExpression","endLine":94,"endColumn":23},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":105,"column":7,"nodeType":"CallExpression","endLine":105,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æ‰¹é‡ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜\n * ç›´æ¥å¤„ç†æ–‡ä»¶åˆ—è¡¨ï¼Œé¿å…ESLintè¾“å‡ºè§£æé—®é¢˜\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// é¡¹ç›®æ ¹ç›®å½•\nconst PROJECT_ROOT = process.cwd();\n\n// éœ€è¦ä¿®å¤çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆä»ESLintè¾“å‡ºä¸­æå–ï¼‰\nconst FILES_TO_FIX = [\n  'src/lib/locale-storage-history.ts',\n  'src/lib/locale-storage-maintenance.ts',\n  'src/lib/locale-storage-preference.ts',\n  'src/lib/locale-storage-types.ts',\n  'src/lib/performance-monitoring-coordinator.ts',\n  'src/lib/performance-monitoring-core.ts',\n  'src/lib/performance-monitoring-integrations.ts',\n];\n\n/**\n * å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„\n */\nfunction convertRelativeToAbsolute(filePath, importPath) {\n  // å¦‚æœå·²ç»æ˜¯ç»å¯¹è·¯å¾„ï¼Œè·³è¿‡\n  if (importPath.startsWith('@/') || !importPath.startsWith('.')) {\n    return importPath;\n  }\n\n  // è·å–æ–‡ä»¶æ‰€åœ¨ç›®å½•\n  const fileDir = path.dirname(filePath);\n\n  // è§£æç›¸å¯¹è·¯å¾„\n  const absolutePath = path.resolve(fileDir, importPath);\n\n  // æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•å†…\n  if (!absolutePath.startsWith(PROJECT_ROOT)) {\n    console.warn(`  è­¦å‘Š: è·¯å¾„è¶…å‡ºé¡¹ç›®èŒƒå›´ ${importPath} -> ${absolutePath}`);\n    return importPath; // ä¿æŒåŸæ ·\n  }\n\n  // è½¬æ¢ä¸ºç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„\n  let relativePath = path.relative(PROJECT_ROOT, absolutePath);\n\n  // å¦‚æœè·¯å¾„ä¸åœ¨ src ç›®å½•å†…ï¼Œä½¿ç”¨ @/../ å‰ç¼€\n  if (!relativePath.startsWith('src/')) {\n    return `@/../${relativePath.replace(/\\\\/g, '/')}`;\n  }\n\n  // ç§»é™¤ src/ å‰ç¼€å¹¶è½¬æ¢ä¸º @/ è·¯å¾„\n  relativePath = relativePath.substring(4); // ç§»é™¤ 'src/'\n  return `@/${relativePath.replace(/\\\\/g, '/')}`;\n}\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥\n */\nfunction fixFileImports(filePath) {\n  const fullPath = path.join(PROJECT_ROOT, filePath);\n\n  if (!fs.existsSync(fullPath)) {\n    console.log(`  æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return false;\n  }\n\n  try {\n    const content = fs.readFileSync(fullPath, 'utf8');\n    const lines = content.split('\\n');\n    let modified = false;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // åŒ¹é…å„ç§å¯¼å…¥/å¯¼å‡ºè¯­å¥\n      const patterns = [\n        /^(\\s*import\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n        /^(\\s*export\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n        /^(\\s*}\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      ];\n\n      for (const pattern of patterns) {\n        const match = line.match(pattern);\n        if (match) {\n          const [, prefix, importPath, suffix] = match;\n\n          // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n          if (importPath.startsWith('.')) {\n            const newPath = convertRelativeToAbsolute(fullPath, importPath);\n            if (newPath !== importPath) {\n              lines[i] = prefix + newPath + suffix;\n              modified = true;\n              console.log(`  ${importPath} -> ${newPath}`);\n            }\n          }\n          break; // æ‰¾åˆ°åŒ¹é…å°±è·³å‡º\n        }\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(fullPath, lines.join('\\n'));\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`ä¿®å¤æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹æ‰¹é‡ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜...\\n');\n\n  console.log(`å‡†å¤‡ä¿®å¤ ${FILES_TO_FIX.length} ä¸ªæ–‡ä»¶\\n`);\n\n  let fixedCount = 0;\n\n  for (const filePath of FILES_TO_FIX) {\n    console.log(`ä¿®å¤æ–‡ä»¶: ${filePath}`);\n\n    if (fixFileImports(filePath)) {\n      fixedCount++;\n    }\n\n    console.log('');\n  }\n\n  console.log(`âœ… ä¿®å¤å®Œæˆï¼å…±ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { convertRelativeToAbsolute, fixFileImports };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/check-status.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/clean-duplicate-imports.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":57,"column":21,"nodeType":"CallExpression","endLine":57,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":61,"column":22,"nodeType":"CallExpression","endLine":61,"endColumn":43},{"ruleId":"require-await","severity":1,"message":"Async method 'processFile' has no 'await' expression.","line":84,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":84,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1612,1618],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":86,"column":23,"nodeType":"CallExpression","endLine":86,"endColumn":56},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":107,"column":7,"nodeType":"CallExpression","endLine":107,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":125,"column":20,"nodeType":"MemberExpression","endLine":125,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * é‡å¤å¯¼å…¥æ¸…ç†è„šæœ¬\n * \n * åŠŸèƒ½ï¼š\n * 1. æ£€æµ‹å¹¶ç§»é™¤é‡å¤çš„importè¯­å¥\n * 2. ç»Ÿä¸€ä½¿ç”¨@/constantsè·¯å¾„\n * 3. æ¸…ç†å†—ä½™çš„å¯¼å…¥\n * \n * ä½¿ç”¨æ–¹æ³•ï¼š\n * node scripts/clean-duplicate-imports.js\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nclass DuplicateImportCleaner {\n  constructor() {\n    this.stats = {\n      filesProcessed: 0,\n      duplicatesFound: 0,\n      duplicatesFixed: 0,\n      errors: 0\n    };\n  }\n\n  /**\n   * ä¸»æ‰§è¡Œå‡½æ•°\n   */\n  async run() {\n    console.log('ğŸ”§ å¼€å§‹æ¸…ç†é‡å¤å¯¼å…¥...\\n');\n    \n    try {\n      const files = this.getFilesToProcess();\n      console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦å¤„ç†\\n`);\n      \n      for (const file of files) {\n        await this.processFile(file);\n      }\n      \n      this.printStats();\n      \n    } catch (error) {\n      console.error('âŒ æ‰§è¡Œå¤±è´¥:', error.message);\n      process.exit(1);\n    }\n  }\n\n  /**\n   * è·å–è¦å¤„ç†çš„æ–‡ä»¶åˆ—è¡¨\n   */\n  getFilesToProcess() {\n    const files = [];\n    \n    const walkDir = (dir) => {\n      const items = fs.readdirSync(dir);\n      \n      for (const item of items) {\n        const fullPath = path.join(dir, item);\n        const stat = fs.statSync(fullPath);\n        \n        if (stat.isDirectory()) {\n          if (!item.startsWith('.') && item !== 'node_modules' && !item.includes('test')) {\n            walkDir(fullPath);\n          }\n        } else if (stat.isFile()) {\n          if ((item.endsWith('.ts') || item.endsWith('.tsx')) && \n              !item.endsWith('.d.ts') && \n              !item.includes('.test.')) {\n            files.push(fullPath);\n          }\n        }\n      }\n    };\n    \n    walkDir('src');\n    return files;\n  }\n\n  /**\n   * å¤„ç†å•ä¸ªæ–‡ä»¶\n   */\n  async processFile(filePath) {\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      const lines = content.split('\\n');\n      \n      // æŸ¥æ‰¾é‡å¤å¯¼å…¥\n      const importLines = this.findImportLines(lines);\n      const duplicates = this.findDuplicates(importLines);\n      \n      if (duplicates.length === 0) {\n        return;\n      }\n      \n      this.stats.filesProcessed++;\n      this.stats.duplicatesFound += duplicates.length;\n      \n      console.log(`ğŸ” å¤„ç†æ–‡ä»¶: ${filePath}`);\n      console.log(`   å‘ç° ${duplicates.length} ä¸ªé‡å¤å¯¼å…¥`);\n      \n      // ä¿®å¤é‡å¤å¯¼å…¥\n      const fixedLines = this.fixDuplicates(lines, duplicates);\n      \n      // å†™å…¥ä¿®å¤åçš„å†…å®¹\n      fs.writeFileSync(filePath, fixedLines.join('\\n'), 'utf8');\n      \n      this.stats.duplicatesFixed += duplicates.length;\n      console.log(`   âœ… å·²ä¿®å¤\\n`);\n      \n    } catch (error) {\n      this.stats.errors++;\n      console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    }\n  }\n\n  /**\n   * æŸ¥æ‰¾å¯¼å…¥è¡Œ\n   */\n  findImportLines(lines) {\n    const imports = [];\n    \n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      \n      // åŒ¹é…importè¯­å¥\n      const importMatch = line.match(/^import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"];?\\s*$/);\n      if (importMatch) {\n        const [, importList, source] = importMatch;\n        const identifiers = importList\n          .split(',')\n          .map(id => id.trim())\n          .filter(id => id.length > 0);\n        \n        imports.push({\n          lineIndex: i,\n          line: line,\n          source: source,\n          identifiers: identifiers\n        });\n      }\n    }\n    \n    return imports;\n  }\n\n  /**\n   * æŸ¥æ‰¾é‡å¤å¯¼å…¥\n   */\n  findDuplicates(importLines) {\n    const duplicates = [];\n    const seenIdentifiers = new Map();\n    \n    for (const importLine of importLines) {\n      for (const identifier of importLine.identifiers) {\n        if (seenIdentifiers.has(identifier)) {\n          const existing = seenIdentifiers.get(identifier);\n          duplicates.push({\n            identifier,\n            existing,\n            duplicate: importLine\n          });\n        } else {\n          seenIdentifiers.set(identifier, importLine);\n        }\n      }\n    }\n    \n    return duplicates;\n  }\n\n  /**\n   * ä¿®å¤é‡å¤å¯¼å…¥\n   */\n  fixDuplicates(lines, duplicates) {\n    const linesToRemove = new Set();\n    \n    // æ ‡è®°è¦ç§»é™¤çš„é‡å¤å¯¼å…¥è¡Œ\n    for (const duplicate of duplicates) {\n      const { existing, duplicate: dup } = duplicate;\n      \n      // ä¼˜å…ˆä¿ç•™@/constantsè·¯å¾„çš„å¯¼å…¥\n      let removeImport;\n      if (existing.source === '@/constants') {\n        removeImport = dup;\n      } else if (dup.source === '@/constants') {\n        removeImport = existing;\n      } else {\n        // éƒ½ä¸æ˜¯@/constantsï¼Œç§»é™¤åé¢çš„\n        removeImport = dup;\n      }\n      \n      linesToRemove.add(removeImport.lineIndex);\n    }\n    \n    // ç§»é™¤é‡å¤çš„å¯¼å…¥è¡Œ\n    return lines.filter((line, index) => !linesToRemove.has(index));\n  }\n\n  /**\n   * è¾“å‡ºç»Ÿè®¡ä¿¡æ¯\n   */\n  printStats() {\n    console.log('\\nğŸ“Š å¤„ç†ç»Ÿè®¡:');\n    console.log(`   å¤„ç†æ–‡ä»¶æ•°: ${this.stats.filesProcessed}`);\n    console.log(`   å‘ç°é‡å¤å¯¼å…¥: ${this.stats.duplicatesFound}`);\n    console.log(`   ä¿®å¤é‡å¤å¯¼å…¥: ${this.stats.duplicatesFixed}`);\n    console.log(`   é”™è¯¯æ•°: ${this.stats.errors}`);\n    \n    if (this.stats.errors === 0) {\n      console.log('\\nâœ… é‡å¤å¯¼å…¥æ¸…ç†å®Œæˆï¼');\n    } else {\n      console.log('\\nâš ï¸  éƒ¨åˆ†æ–‡ä»¶å¤„ç†å¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯');\n    }\n  }\n}\n\n// æ‰§è¡Œè„šæœ¬\nif (require.main === module) {\n  const cleaner = new DuplicateImportCleaner();\n  cleaner.run().catch(console.error);\n}\n\nmodule.exports = DuplicateImportCleaner;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/codemods/alias-imports.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImportDeclaration' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Node' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":54},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":70,"column":11,"nodeType":"CallExpression","endLine":70,"endColumn":37},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":74,"column":11,"nodeType":"CallExpression","endLine":74,"endColumn":55},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":75,"column":11,"nodeType":"CallExpression","endLine":75,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * ç›¸å¯¹è·¯å¾„å¯¼å…¥ä¿®å¤å·¥å…·\n * å°† src å†…çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥ (./../...) æ”¹ä¸º @/ åˆ«åå¯¼å…¥\n */\n\nimport { Project, SourceFile, ImportDeclaration, Node } from 'ts-morph';\nimport { resolve, relative, dirname, join } from 'path';\nimport { existsSync, writeFileSync } from 'fs';\n\ninterface ImportFixResult {\n  filePath: string;\n  fixedImports: number;\n  errors: string[];\n}\n\nclass AliasImportFixer {\n  private project: Project;\n  private srcPath: string;\n  private results: ImportFixResult[] = [];\n\n  constructor() {\n    this.project = new Project({\n      tsConfigFilePath: 'tsconfig.json',\n    });\n    this.srcPath = resolve(process.cwd(), 'src');\n  }\n\n  /**\n   * æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æŒ‡å‘ src å†…éƒ¨\n   */\n  private isInternalSrcImport(importPath: string, currentFilePath: string): boolean {\n    if (!importPath.startsWith('.')) {\n      return false; // ä¸æ˜¯ç›¸å¯¹è·¯å¾„\n    }\n\n    const currentDir = dirname(currentFilePath);\n    const resolvedPath = resolve(currentDir, importPath);\n\n    // æ£€æŸ¥è§£æåçš„è·¯å¾„æ˜¯å¦åœ¨ src ç›®å½•å†…\n    return resolvedPath.startsWith(this.srcPath);\n  }\n\n  /**\n   * å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸º @/ åˆ«åè·¯å¾„\n   */\n  private convertToAliasPath(importPath: string, currentFilePath: string): string {\n    const currentDir = dirname(currentFilePath);\n    const resolvedPath = resolve(currentDir, importPath);\n    const relativePath = relative(this.srcPath, resolvedPath);\n\n    // ç¡®ä¿è·¯å¾„ä½¿ç”¨æ­£æ–œæ ï¼ˆUnixé£æ ¼ï¼‰\n    const normalizedPath = relativePath.replace(/\\\\/g, '/');\n\n    return `@/${normalizedPath}`;\n  }\n\n  /**\n   * éªŒè¯è½¬æ¢åçš„è·¯å¾„æ˜¯å¦æœ‰æ•ˆ\n   */\n  private validateAliasPath(aliasPath: string): boolean {\n    // ç§»é™¤ @/ å‰ç¼€ï¼Œè·å–å®é™…æ–‡ä»¶è·¯å¾„\n    const actualPath = aliasPath.replace(/^@\\//, '');\n    const fullPath = join(this.srcPath, actualPath);\n\n    // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆå¯èƒ½æœ‰æ‰©å±•åï¼‰\n    const possibleExtensions = ['', '.ts', '.tsx', '.js', '.jsx'];\n\n    for (const ext of possibleExtensions) {\n      if (existsSync(fullPath + ext)) {\n        return true;\n      }\n      // æ£€æŸ¥æ˜¯å¦æ˜¯ç›®å½•ï¼ˆindexæ–‡ä»¶ï¼‰\n      if (existsSync(join(fullPath + ext, 'index.ts')) ||\n          existsSync(join(fullPath + ext, 'index.tsx'))) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥\n   */\n  private fixFileImports(sourceFile: SourceFile): ImportFixResult {\n    const filePath = sourceFile.getFilePath();\n    const result: ImportFixResult = {\n      filePath: relative(process.cwd(), filePath),\n      fixedImports: 0,\n      errors: []\n    };\n\n    // åªå¤„ç† src ç›®å½•å†…çš„æ–‡ä»¶\n    if (!filePath.startsWith(this.srcPath)) {\n      return result;\n    }\n\n    const importDeclarations = sourceFile.getImportDeclarations();\n\n    for (const importDecl of importDeclarations) {\n      const moduleSpecifier = importDecl.getModuleSpecifierValue();\n\n      if (this.isInternalSrcImport(moduleSpecifier, filePath)) {\n        try {\n          const aliasPath = this.convertToAliasPath(moduleSpecifier, filePath);\n\n          // éªŒè¯è½¬æ¢åçš„è·¯å¾„\n          if (this.validateAliasPath(aliasPath)) {\n            importDecl.setModuleSpecifier(aliasPath);\n            result.fixedImports++;\n            console.log(`  âœ“ ${moduleSpecifier} â†’ ${aliasPath}`);\n          } else {\n            result.errors.push(`æ— æ³•éªŒè¯è·¯å¾„: ${moduleSpecifier} â†’ ${aliasPath}`);\n          }\n        } catch (error) {\n          result.errors.push(`è½¬æ¢å¤±è´¥: ${moduleSpecifier} - ${error}`);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * æ‰¹é‡ä¿®å¤æ‰€æœ‰æ–‡ä»¶\n   */\n  public async fixAllImports(dryRun: boolean = false): Promise<void> {\n    console.log('ğŸ”§ å¼€å§‹ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥...');\n    console.log(`ğŸ“ æºç ç›®å½•: ${this.srcPath}`);\n    console.log(`ğŸ” æ¨¡å¼: ${dryRun ? 'å¹²è·‘æ¨¡å¼' : 'å†™å…¥æ¨¡å¼'}`);\n    console.log();\n\n    // è·å–æ‰€æœ‰ TypeScript æ–‡ä»¶\n    const sourceFiles = this.project.getSourceFiles([\n      'src/**/*.ts',\n      'src/**/*.tsx'\n    ]);\n\n    console.log(`ğŸ“Š æ‰¾åˆ° ${sourceFiles.length} ä¸ªæ–‡ä»¶`);\n    console.log();\n\n    let totalFixed = 0;\n    let totalErrors = 0;\n\n    for (const sourceFile of sourceFiles) {\n      const result = this.fixFileImports(sourceFile);\n\n      if (result.fixedImports > 0 || result.errors.length > 0) {\n        console.log(`ğŸ“„ ${result.filePath}:`);\n\n        if (result.fixedImports > 0) {\n          console.log(`  âœ… ä¿®å¤ ${result.fixedImports} ä¸ªå¯¼å…¥`);\n          totalFixed += result.fixedImports;\n        }\n\n        if (result.errors.length > 0) {\n          console.log(`  âŒ ${result.errors.length} ä¸ªé”™è¯¯:`);\n          result.errors.forEach(error => console.log(`    - ${error}`));\n          totalErrors += result.errors.length;\n        }\n\n        console.log();\n      }\n\n      this.results.push(result);\n    }\n\n    // ä¿å­˜æ›´æ”¹\n    if (!dryRun && totalFixed > 0) {\n      console.log('ğŸ’¾ ä¿å­˜æ›´æ”¹...');\n      await this.project.save();\n      console.log('âœ… ä¿å­˜å®Œæˆ');\n    }\n\n    // è¾“å‡ºæ€»ç»“\n    console.log('ğŸ“Š ä¿®å¤æ€»ç»“:');\n    console.log(`  ä¿®å¤å¯¼å…¥: ${totalFixed} ä¸ª`);\n    console.log(`  é”™è¯¯æ•°é‡: ${totalErrors} ä¸ª`);\n    console.log(`  å¤„ç†æ–‡ä»¶: ${this.results.filter(r => r.fixedImports > 0).length} ä¸ª`);\n\n    if (dryRun) {\n      console.log('\\nğŸ” è¿™æ˜¯å¹²è·‘æ¨¡å¼ï¼Œæœªå®é™…ä¿®æ”¹æ–‡ä»¶');\n    }\n  }\n\n  /**\n   * è·å–ä¿®å¤ç»“æœ\n   */\n  public getResults(): ImportFixResult[] {\n    return this.results;\n  }\n}\n\nasync function main() {\n  const args = process.argv.slice(2);\n  const dryRun = args.includes('--dry-run');\n\n  const fixer = new AliasImportFixer();\n\n  try {\n    await fixer.fixAllImports(dryRun);\n\n    // ä¿å­˜ç»“æœåˆ°æ–‡ä»¶\n    const results = fixer.getResults();\n    const summary = {\n      timestamp: new Date().toISOString(),\n      dryRun,\n      totalFiles: results.length,\n      filesWithFixes: results.filter(r => r.fixedImports > 0).length,\n      totalFixes: results.reduce((sum, r) => sum + r.fixedImports, 0),\n      results\n    };\n\n    writeFileSync('alias-imports-result.json', JSON.stringify(summary, null, 2));\n    console.log('ç»“æœå·²ä¿å­˜åˆ° alias-imports-result.json');\n\n  } catch (error) {\n    console.error('âŒ ä¿®å¤å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/collect-missing-constants.js","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'run' has no 'await' expression.","line":23,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":23,"endColumn":12,"suggestions":[{"messageId":"removeAsync","fix":{"range":[347,353],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":19},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":99,"column":36,"nodeType":"Literal","endLine":99,"endColumn":58},{"ruleId":"no-unused-vars","severity":1,"message":"'name' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":116,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":116,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"name"},"fix":{"range":[2891,2895],"text":""},"desc":"Remove unused variable 'name'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'name' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":116,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":21},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":150,"column":21,"nodeType":"CallExpression","endLine":150,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'newConstants' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":153,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":153,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"newConstants"},"fix":{"range":[3937,4044],"text":""},"desc":"Remove unused variable 'newConstants'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newConstants' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":153,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":153,"endColumn":25},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":176,"column":9,"nodeType":"CallExpression","endLine":176,"endColumn":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æ”¶é›†ç¼ºå¤±å¸¸é‡è„šæœ¬\n * \n * åŠŸèƒ½ï¼š\n * 1. ä»TypeScripté”™è¯¯ä¸­æå–ç¼ºå¤±çš„å¸¸é‡\n * 2. åˆ†æå¸¸é‡ç±»å‹å¹¶ç”Ÿæˆå®šä¹‰\n * 3. æ·»åŠ åˆ°ç›¸åº”çš„å¸¸é‡æ–‡ä»¶ä¸­\n * \n * ä½¿ç”¨æ–¹æ³•ï¼š\n * node scripts/collect-missing-constants.js\n */\n\nconst fs = require('fs');\nconst { execSync } = require('child_process');\n\nclass MissingConstantsCollector {\n  constructor() {\n    this.missingConstants = new Map();\n  }\n\n  async run() {\n    console.log('ğŸ”§ å¼€å§‹æ”¶é›†ç¼ºå¤±å¸¸é‡...\\n');\n    \n    try {\n      // ä»TypeScripté”™è¯¯ä¸­æå–ç¼ºå¤±å¸¸é‡\n      this.extractMissingConstants();\n      \n      // åˆ†æå¹¶åˆ†ç±»å¸¸é‡\n      this.categorizeConstants();\n      \n      // æ·»åŠ å¸¸é‡åˆ°ç›¸åº”æ–‡ä»¶\n      this.addConstantsToFiles();\n      \n      console.log('\\nâœ… ç¼ºå¤±å¸¸é‡æ”¶é›†å®Œæˆï¼');\n      \n    } catch (error) {\n      console.error('âŒ æ‰§è¡Œå¤±è´¥:', error.message);\n      process.exit(1);\n    }\n  }\n\n  extractMissingConstants() {\n    console.log('ğŸ“Š ä»TypeScripté”™è¯¯ä¸­æå–ç¼ºå¤±å¸¸é‡...');\n    \n    try {\n      const output = execSync('pnpm type-check 2>&1', { encoding: 'utf8' });\n      const lines = output.split('\\n');\n      \n      for (const line of lines) {\n        const match = line.match(/Cannot find name '([^']+)'/);\n        if (match) {\n          const constantName = match[1];\n          if (!this.missingConstants.has(constantName)) {\n            this.missingConstants.set(constantName, {\n              name: constantName,\n              count: 1,\n              category: this.categorizeConstant(constantName),\n              value: this.inferValue(constantName)\n            });\n          } else {\n            this.missingConstants.get(constantName).count++;\n          }\n        }\n      }\n      \n      console.log(`   å‘ç° ${this.missingConstants.size} ä¸ªç¼ºå¤±å¸¸é‡`);\n      \n    } catch (error) {\n      console.log('   TypeScriptæ£€æŸ¥å®Œæˆï¼Œç»§ç»­å¤„ç†...');\n    }\n  }\n\n  categorizeConstant(name) {\n    if (name.startsWith('MAGIC_0_')) return 'decimal';\n    if (name.startsWith('MAGIC_')) return 'count';\n    if (name.includes('_PER_')) return 'time';\n    if (name.includes('PERCENTAGE_')) return 'decimal';\n    if (name.includes('DAYS_')) return 'time';\n    if (name.includes('_MS')) return 'time';\n    return 'count';\n  }\n\n  inferValue(name) {\n    // æ¨æ–­å¸¸é‡å€¼\n    if (name === 'DAYS_PER_MONTH') return '30';\n    if (name === 'PERCENTAGE_QUARTER') return '25';\n    if (name === 'MAGIC_0_5') return '0.5';\n    if (name === 'MAGIC_0_7') return '0.7';\n    if (name === 'MAGIC_0_9') return '0.9';\n    if (name === 'MAGIC_17') return '17';\n    if (name === 'MAGIC_18') return '18';\n    if (name === 'MAGIC_22') return '22';\n    if (name === 'MAGIC_999') return '999';\n    if (name === 'MINUTE_MS') return '60000';\n    \n    // ä»åç§°ä¸­æå–æ•°å­—\n    const numberMatch = name.match(/MAGIC_(\\d+(?:_\\d+)*)/);\n    if (numberMatch) {\n      return numberMatch[1].replace(/_/g, '.');\n    }\n    \n    return '1'; // é»˜è®¤å€¼\n  }\n\n  categorizeConstants() {\n    console.log('\\nğŸ“‹ åˆ†ç±»å¸¸é‡:');\n    \n    const categories = {\n      decimal: [],\n      count: [],\n      time: []\n    };\n    \n    for (const [name, info] of this.missingConstants) {\n      categories[info.category].push(info);\n    }\n    \n    for (const [category, constants] of Object.entries(categories)) {\n      if (constants.length > 0) {\n        console.log(`   ${category}: ${constants.map(c => c.name).join(', ')}`);\n      }\n    }\n  }\n\n  addConstantsToFiles() {\n    console.log('\\nğŸ“ æ·»åŠ å¸¸é‡åˆ°æ–‡ä»¶...');\n    \n    const categories = {\n      decimal: 'src/constants/decimal.ts',\n      count: 'src/constants/count.ts',\n      time: 'src/constants/time.ts'\n    };\n    \n    for (const [category, filePath] of Object.entries(categories)) {\n      const constants = Array.from(this.missingConstants.values())\n        .filter(c => c.category === category);\n      \n      if (constants.length > 0) {\n        this.addConstantsToFile(filePath, constants);\n      }\n    }\n  }\n\n  addConstantsToFile(filePath, constants) {\n    console.log(`   æ·»åŠ åˆ° ${filePath}: ${constants.map(c => c.name).join(', ')}`);\n    \n    try {\n      let content = fs.readFileSync(filePath, 'utf8');\n      \n      // åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ æ–°å¸¸é‡\n      const newConstants = constants.map(c => \n        `export const ${c.name} = ${c.value};`\n      ).join('\\n');\n      \n      // æ£€æŸ¥å¸¸é‡æ˜¯å¦å·²å­˜åœ¨\n      const existingConstants = constants.filter(c => \n        content.includes(`${c.name} =`) || content.includes(`${c.name}:`)\n      );\n      \n      const newConstantsToAdd = constants.filter(c => \n        !content.includes(`${c.name} =`) && !content.includes(`${c.name}:`)\n      );\n      \n      if (existingConstants.length > 0) {\n        console.log(`     è·³è¿‡å·²å­˜åœ¨çš„å¸¸é‡: ${existingConstants.map(c => c.name).join(', ')}`);\n      }\n      \n      if (newConstantsToAdd.length > 0) {\n        content += '\\n\\n// è‡ªåŠ¨æ·»åŠ çš„ç¼ºå¤±å¸¸é‡\\n';\n        content += newConstantsToAdd.map(c => \n          `export const ${c.name} = ${c.value};`\n        ).join('\\n');\n        \n        fs.writeFileSync(filePath, content, 'utf8');\n        console.log(`     âœ… æ·»åŠ äº† ${newConstantsToAdd.length} ä¸ªæ–°å¸¸é‡`);\n      }\n      \n    } catch (error) {\n      console.error(`     âŒ å¤„ç†æ–‡ä»¶å¤±è´¥: ${error.message}`);\n    }\n  }\n}\n\n// æ‰§è¡Œè„šæœ¬\nif (require.main === module) {\n  const collector = new MissingConstantsCollector();\n  collector.run().catch(console.error);\n}\n\nmodule.exports = MissingConstantsCollector;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/coverage-check.js","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of function 'readCoverageReport'.","line":49,"column":10,"nodeType":"FunctionDeclaration","messageId":"missingReturn","endLine":49,"endColumn":28},{"ruleId":"no-unused-vars","severity":1,"message":"'name' is assigned a value but never used. Allowed unused args must match /^_/u.","line":73,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"name"},"fix":{"range":[1242,1259],"text":""},"desc":"Remove unused variable 'name'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'name' is assigned a value but never used. Allowed unused args must match /^_/u.","line":73,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":50},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":80,"column":20,"nodeType":"MemberExpression","endLine":80,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":129,"column":22,"nodeType":"MemberExpression","endLine":129,"endColumn":44},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":166,"column":22,"nodeType":"MemberExpression","endLine":166,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * è¦†ç›–ç‡æ£€æŸ¥è„šæœ¬\n * ç”¨äºCI/CDæµç¨‹ä¸­çš„è¦†ç›–ç‡éªŒè¯\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// è¦†ç›–ç‡é˜ˆå€¼é…ç½®\nconst COVERAGE_THRESHOLDS = {\n  global: {\n    branches: 80,\n    functions: 85,\n    lines: 85,\n    statements: 85,\n  },\n  critical: {\n    branches: 90,\n    functions: 95,\n    lines: 95,\n    statements: 95,\n  },\n  security: {\n    branches: 95,\n    functions: 98,\n    lines: 98,\n    statements: 98,\n  },\n};\n\n// å…³é”®æ–‡ä»¶åˆ†ç±»\nconst CRITICAL_FILES = [\n  'src/lib/content-parser.ts',\n  'src/lib/content-validation.ts',\n  'src/lib/seo-metadata.ts',\n  'src/lib/structured-data.ts',\n];\n\nconst SECURITY_FILES = [\n  'src/lib/accessibility.ts',\n  'src/services/url-generator.ts',\n];\n\n/**\n * è¯»å–è¦†ç›–ç‡æŠ¥å‘Š\n */\nfunction readCoverageReport() {\n  const coveragePath = path.join(\n    process.cwd(),\n    'coverage',\n    'coverage-summary.json',\n  );\n\n  if (!fs.existsSync(coveragePath)) {\n    console.error('âŒ è¦†ç›–ç‡æŠ¥å‘Šä¸å­˜åœ¨ï¼Œè¯·å…ˆè¿è¡Œ: pnpm test:coverage');\n    process.exit(1);\n  }\n\n  try {\n    const coverageData = JSON.parse(fs.readFileSync(coveragePath, 'utf8'));\n    return coverageData;\n  } catch (error) {\n    console.error('âŒ è¯»å–è¦†ç›–ç‡æŠ¥å‘Šå¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\n/**\n * æ£€æŸ¥è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡\n */\nfunction checkCoverage(coverage, thresholds, name = 'Global') {\n  const results = {\n    passed: true,\n    details: [],\n  };\n\n  for (const [metric, threshold] of Object.entries(thresholds)) {\n    const actual = coverage[metric]?.pct || 0;\n    const passed = actual >= threshold;\n\n    results.details.push({\n      metric,\n      actual,\n      threshold,\n      passed,\n    });\n\n    if (!passed) {\n      results.passed = false;\n    }\n  }\n\n  return results;\n}\n\n/**\n * ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š\n */\nfunction generateReport(coverageData) {\n  console.log('\\nğŸ“Š æµ‹è¯•è¦†ç›–ç‡åˆ†ææŠ¥å‘Š');\n  console.log('='.repeat(50));\n\n  // å…¨å±€è¦†ç›–ç‡æ£€æŸ¥\n  const globalCoverage = coverageData.total;\n  const globalResults = checkCoverage(\n    globalCoverage,\n    COVERAGE_THRESHOLDS.global,\n    'Global',\n  );\n\n  console.log('\\nğŸŒ å…¨å±€è¦†ç›–ç‡:');\n  globalResults.details.forEach(({ metric, actual, threshold, passed }) => {\n    const status = passed ? 'âœ…' : 'âŒ';\n    const color = passed ? '\\x1b[32m' : '\\x1b[31m';\n    const reset = '\\x1b[0m';\n\n    console.log(\n      `  ${status} ${metric.padEnd(12)}: ${color}${actual.toFixed(1)}%${reset} (ç›®æ ‡: ${threshold}%)`,\n    );\n  });\n\n  // å…³é”®æ–‡ä»¶æ£€æŸ¥\n  console.log('\\nğŸ”¥ å…³é”®ä¸šåŠ¡é€»è¾‘æ–‡ä»¶:');\n  let criticalPassed = true;\n\n  CRITICAL_FILES.forEach((filePath) => {\n    const fileData = coverageData[filePath];\n    if (fileData) {\n      const results = checkCoverage(\n        fileData,\n        COVERAGE_THRESHOLDS.critical,\n        filePath,\n      );\n      const status = results.passed ? 'âœ…' : 'âŒ';\n      const avgCoverage =\n        results.details.reduce((sum, d) => sum + d.actual, 0) /\n        results.details.length;\n\n      console.log(\n        `  ${status} ${path.basename(filePath).padEnd(25)}: ${avgCoverage.toFixed(1)}%`,\n      );\n\n      if (!results.passed) {\n        criticalPassed = false;\n        results.details.forEach(({ metric, actual, threshold, passed }) => {\n          if (!passed) {\n            console.log(\n              `    âš ï¸  ${metric}: ${actual.toFixed(1)}% < ${threshold}%`,\n            );\n          }\n        });\n      }\n    } else {\n      console.log(`  âŒ ${path.basename(filePath).padEnd(25)}: æœªæµ‹è¯•`);\n      criticalPassed = false;\n    }\n  });\n\n  // å®‰å…¨æ–‡ä»¶æ£€æŸ¥\n  console.log('\\nğŸ”’ å®‰å…¨ç›¸å…³æ–‡ä»¶:');\n  let securityPassed = true;\n\n  SECURITY_FILES.forEach((filePath) => {\n    const fileData = coverageData[filePath];\n    if (fileData) {\n      const results = checkCoverage(\n        fileData,\n        COVERAGE_THRESHOLDS.security,\n        filePath,\n      );\n      const status = results.passed ? 'âœ…' : 'âŒ';\n      const avgCoverage =\n        results.details.reduce((sum, d) => sum + d.actual, 0) /\n        results.details.length;\n\n      console.log(\n        `  ${status} ${path.basename(filePath).padEnd(25)}: ${avgCoverage.toFixed(1)}%`,\n      );\n\n      if (!results.passed) {\n        securityPassed = false;\n        results.details.forEach(({ metric, actual, threshold, passed }) => {\n          if (!passed) {\n            console.log(\n              `    âš ï¸  ${metric}: ${actual.toFixed(1)}% < ${threshold}%`,\n            );\n          }\n        });\n      }\n    } else {\n      console.log(`  âŒ ${path.basename(filePath).padEnd(25)}: æœªæµ‹è¯•`);\n      securityPassed = false;\n    }\n  });\n\n  // æ€»ç»“\n  console.log('\\nğŸ“‹ æ£€æŸ¥ç»“æœ:');\n  console.log(\n    `  å…¨å±€è¦†ç›–ç‡: ${globalResults.passed ? 'âœ… é€šè¿‡' : 'âŒ æœªè¾¾æ ‡'}`,\n  );\n  console.log(`  å…³é”®æ–‡ä»¶: ${criticalPassed ? 'âœ… é€šè¿‡' : 'âŒ æœªè¾¾æ ‡'}`);\n  console.log(`  å®‰å…¨æ–‡ä»¶: ${securityPassed ? 'âœ… é€šè¿‡' : 'âŒ æœªè¾¾æ ‡'}`);\n\n  const allPassed = globalResults.passed && criticalPassed && securityPassed;\n\n  if (allPassed) {\n    console.log('\\nğŸ‰ æ‰€æœ‰è¦†ç›–ç‡æ£€æŸ¥é€šè¿‡ï¼');\n    return 0;\n  } \n    console.log('\\nâŒ è¦†ç›–ç‡æ£€æŸ¥å¤±è´¥ï¼Œè¯·æé«˜æµ‹è¯•è¦†ç›–ç‡');\n    console.log('\\nğŸ’¡ å»ºè®®:');\n    console.log('  1. è¿è¡Œ pnpm test:coverage æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š');\n    console.log('  2. é‡ç‚¹å…³æ³¨æœªè¾¾æ ‡çš„å…³é”®æ–‡ä»¶');\n    console.log('  3. è¡¥å……è¾¹ç¼˜æƒ…å†µå’Œé”™è¯¯å¤„ç†æµ‹è¯•');\n    return 1;\n  \n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  try {\n    const coverageData = readCoverageReport();\n    const exitCode = generateReport(coverageData);\n    process.exit(exitCode);\n  } catch (error) {\n    console.error('âŒ è¦†ç›–ç‡æ£€æŸ¥å¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = {\n  checkCoverage,\n  generateReport,\n  COVERAGE_THRESHOLDS,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/deployment-check.js","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'runBuildCheck' has no 'await' expression.","line":35,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":35,"endColumn":22,"suggestions":[{"messageId":"removeAsync","fix":{"range":[781,787],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runIntegrationTests' has no 'await' expression.","line":73,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":73,"endColumn":28,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1537,1543],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runSecurityCheck' has no 'await' expression.","line":111,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":111,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2286,2292],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runPerformanceCheck' has no 'await' expression.","line":171,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":171,"endColumn":28,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3622,3628],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runQualityCheck' has no 'await' expression.","line":209,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":209,"endColumn":24,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4405,4411],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'blocker' is defined but never used. Allowed unused args must match /^_/u.","line":251,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":251,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"blocker"},"fix":{"range":[5295,5302],"text":""},"desc":"Remove unused variable 'blocker'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'blocker' is defined but never used. Allowed unused args must match /^_/u.","line":251,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":251,"endColumn":53},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":257,"column":7,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":267,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * éƒ¨ç½²å‰æ£€æŸ¥å™¨ - ç¡®ä¿ä»£ç å¯ä»¥å®‰å…¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ\n * Deployment Checker - Ensure code is safe for production deployment\n */\n\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nclass DeploymentChecker {\n  constructor() {\n    this.report = {\n      timestamp: new Date().toISOString(),\n      deployment: {\n        ready: false,\n        score: 0,\n        blockers: [],\n        warnings: [],\n      },\n      checks: {\n        build: { status: 'PENDING', message: '' },\n        tests: { status: 'PENDING', message: '' },\n        security: { status: 'PENDING', message: '' },\n        performance: { status: 'PENDING', message: '' },\n        quality: { status: 'PENDING', message: '' },\n      },\n    };\n  }\n\n  /**\n   * è¿è¡Œæ„å»ºéªŒè¯\n   */\n  async runBuildCheck() {\n    try {\n      console.log('ğŸ—ï¸  æ„å»ºéªŒè¯æ£€æŸ¥...');\n\n      execSync('pnpm build:check', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 120000, // 2åˆ†é’Ÿè¶…æ—¶\n      });\n\n      this.report.checks.build = {\n        status: 'PASS',\n        message: 'æ„å»ºéªŒè¯æˆåŠŸ',\n      };\n\n      console.log('âœ… æ„å»ºéªŒè¯é€šè¿‡');\n      return true;\n    } catch (error) {\n      this.report.checks.build = {\n        status: 'FAIL',\n        message: `æ„å»ºå¤±è´¥: ${error.message.slice(0, 200)}...`,\n      };\n\n      this.report.deployment.blockers.push({\n        type: 'build',\n        severity: 'critical',\n        message: 'æ„å»ºå¤±è´¥ï¼Œæ— æ³•éƒ¨ç½²',\n        action: 'ä¿®å¤æ„å»ºé”™è¯¯åé‡è¯•',\n      });\n\n      console.log('âŒ æ„å»ºéªŒè¯å¤±è´¥');\n      return false;\n    }\n  }\n\n  /**\n   * è¿è¡Œé›†æˆæµ‹è¯•\n   */\n  async runIntegrationTests() {\n    try {\n      console.log('ğŸ§ª é›†æˆæµ‹è¯•æ£€æŸ¥...');\n\n      execSync('pnpm test', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 60000, // 1åˆ†é’Ÿè¶…æ—¶\n      });\n\n      this.report.checks.tests = {\n        status: 'PASS',\n        message: 'æ‰€æœ‰æµ‹è¯•é€šè¿‡',\n      };\n\n      console.log('âœ… é›†æˆæµ‹è¯•é€šè¿‡');\n      return true;\n    } catch (error) {\n      this.report.checks.tests = {\n        status: 'FAIL',\n        message: `æµ‹è¯•å¤±è´¥: ${error.message.slice(0, 200)}...`,\n      };\n\n      this.report.deployment.blockers.push({\n        type: 'tests',\n        severity: 'critical',\n        message: 'é›†æˆæµ‹è¯•å¤±è´¥',\n        action: 'ä¿®å¤å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹',\n      });\n\n      console.log('âŒ é›†æˆæµ‹è¯•å¤±è´¥');\n      return false;\n    }\n  }\n\n  /**\n   * è¿è¡Œå®‰å…¨æ£€æŸ¥\n   */\n  async runSecurityCheck() {\n    try {\n      console.log('ğŸ”’ å®‰å…¨æ£€æŸ¥...');\n\n      execSync('pnpm security:audit', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 60000,\n      });\n\n      this.report.checks.security = {\n        status: 'PASS',\n        message: 'å®‰å…¨æ£€æŸ¥é€šè¿‡',\n      };\n\n      console.log('âœ… å®‰å…¨æ£€æŸ¥é€šè¿‡');\n      return true;\n    } catch (error) {\n      // æ£€æŸ¥æ˜¯å¦æ˜¯ä¸¥é‡å®‰å…¨é—®é¢˜\n      if (\n        error.message.includes('high') ||\n        error.message.includes('critical')\n      ) {\n        this.report.checks.security = {\n          status: 'FAIL',\n          message: `å‘ç°ä¸¥é‡å®‰å…¨æ¼æ´: ${error.message.slice(0, 200)}...`,\n        };\n\n        this.report.deployment.blockers.push({\n          type: 'security',\n          severity: 'critical',\n          message: 'å‘ç°ä¸¥é‡å®‰å…¨æ¼æ´',\n          action: 'ä¿®å¤å®‰å…¨æ¼æ´åé‡è¯•éƒ¨ç½²',\n        });\n\n        console.log('âŒ å®‰å…¨æ£€æŸ¥å¤±è´¥');\n        return false;\n      } \n        // è½»å¾®å®‰å…¨é—®é¢˜ï¼Œè­¦å‘Šä½†ä¸é˜»å¡\n        this.report.checks.security = {\n          status: 'WARN',\n          message: `å‘ç°è½»å¾®å®‰å…¨é—®é¢˜: ${error.message.slice(0, 200)}...`,\n        };\n\n        this.report.deployment.warnings.push({\n          type: 'security',\n          severity: 'medium',\n          message: 'å‘ç°è½»å¾®å®‰å…¨é—®é¢˜',\n          action: 'å»ºè®®åœ¨ä¸‹æ¬¡æ›´æ–°ä¸­ä¿®å¤',\n        });\n\n        console.log('âš ï¸  å®‰å…¨æ£€æŸ¥æœ‰è­¦å‘Š');\n        return true;\n      \n    }\n  }\n\n  /**\n   * è¿è¡Œæ€§èƒ½æ£€æŸ¥\n   */\n  async runPerformanceCheck() {\n    try {\n      console.log('âš¡ æ€§èƒ½æ£€æŸ¥...');\n\n      execSync('pnpm perf:check', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 60000,\n      });\n\n      this.report.checks.performance = {\n        status: 'PASS',\n        message: 'æ€§èƒ½æ£€æŸ¥é€šè¿‡',\n      };\n\n      console.log('âœ… æ€§èƒ½æ£€æŸ¥é€šè¿‡');\n      return true;\n    } catch (error) {\n      this.report.checks.performance = {\n        status: 'WARN',\n        message: `æ€§èƒ½é—®é¢˜: ${error.message.slice(0, 200)}...`,\n      };\n\n      this.report.deployment.warnings.push({\n        type: 'performance',\n        severity: 'medium',\n        message: 'æ€§èƒ½æŒ‡æ ‡è¶…å‡ºå»ºè®®å€¼',\n        action: 'è€ƒè™‘ä¼˜åŒ–æ€§èƒ½åéƒ¨ç½²',\n      });\n\n      console.log('âš ï¸  æ€§èƒ½æ£€æŸ¥æœ‰è­¦å‘Š');\n      return true; // æ€§èƒ½é—®é¢˜ä¸é˜»å¡éƒ¨ç½²ï¼Œä½†å‘å‡ºè­¦å‘Š\n    }\n  }\n\n  /**\n   * è¿è¡Œè´¨é‡æ£€æŸ¥\n   */\n  async runQualityCheck() {\n    try {\n      console.log('ğŸ“Š è´¨é‡æ£€æŸ¥...');\n\n      execSync('pnpm quality:quick:verbose', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 60000,\n      });\n\n      this.report.checks.quality = {\n        status: 'PASS',\n        message: 'è´¨é‡æ£€æŸ¥é€šè¿‡',\n      };\n\n      console.log('âœ… è´¨é‡æ£€æŸ¥é€šè¿‡');\n      return true;\n    } catch (error) {\n      this.report.checks.quality = {\n        status: 'WARN',\n        message: `è´¨é‡é—®é¢˜: ${error.message.slice(0, 200)}...`,\n      };\n\n      this.report.deployment.warnings.push({\n        type: 'quality',\n        severity: 'low',\n        message: 'ä»£ç è´¨é‡æœ‰æ”¹è¿›ç©ºé—´',\n        action: 'å»ºè®®ä¿®å¤è´¨é‡é—®é¢˜',\n      });\n\n      console.log('âš ï¸  è´¨é‡æ£€æŸ¥æœ‰è­¦å‘Š');\n      return true; // è´¨é‡é—®é¢˜ä¸é˜»å¡éƒ¨ç½²ï¼Œä½†å‘å‡ºè­¦å‘Š\n    }\n  }\n\n  /**\n   * è®¡ç®—éƒ¨ç½²å°±ç»ªåˆ†æ•°\n   */\n  calculateDeploymentScore() {\n    let score = 100;\n\n    // é˜»å¡æ€§é—®é¢˜ä¸¥é‡æ‰£åˆ†\n    this.report.deployment.blockers.forEach((blocker) => {\n      score -= 50; // æ¯ä¸ªé˜»å¡æ€§é—®é¢˜æ‰£50åˆ†\n    });\n\n    // è­¦å‘Šé—®é¢˜è½»å¾®æ‰£åˆ†\n    this.report.deployment.warnings.forEach((warning) => {\n      switch (warning.severity) {\n        case 'high':\n          score -= 20;\n          break;\n        case 'medium':\n          score -= 10;\n          break;\n        case 'low':\n          score -= 5;\n          break;\n      }\n    });\n\n    this.report.deployment.score = Math.max(0, score);\n    this.report.deployment.ready =\n      score >= 80 && this.report.deployment.blockers.length === 0;\n  }\n\n  /**\n   * ç”Ÿæˆéƒ¨ç½²æŠ¥å‘Š\n   */\n  generateReport() {\n    this.calculateDeploymentScore();\n\n    console.log('\\nğŸš€ éƒ¨ç½²å°±ç»ªæ£€æŸ¥æŠ¥å‘Š');\n    console.log('='.repeat(50));\n    console.log(`ğŸ“Š éƒ¨ç½²å°±ç»ªåˆ†æ•°: ${this.report.deployment.score}/100`);\n    console.log(\n      `ğŸ¯ éƒ¨ç½²çŠ¶æ€: ${this.report.deployment.ready ? 'âœ… å¯ä»¥éƒ¨ç½²' : 'âŒ ä¸å¯éƒ¨ç½²'}`,\n    );\n    console.log(`ğŸš¨ é˜»å¡é—®é¢˜: ${this.report.deployment.blockers.length} ä¸ª`);\n    console.log(`âš ï¸  è­¦å‘Šé—®é¢˜: ${this.report.deployment.warnings.length} ä¸ª`);\n\n    if (this.report.deployment.blockers.length > 0) {\n      console.log('\\nğŸš¨ é˜»å¡æ€§é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰:');\n      this.report.deployment.blockers.forEach((blocker, index) => {\n        console.log(\n          `${index + 1}. [${blocker.severity.toUpperCase()}] ${blocker.message}`,\n        );\n        console.log(`   è§£å†³æ–¹æ¡ˆ: ${blocker.action}`);\n      });\n    }\n\n    if (this.report.deployment.warnings.length > 0) {\n      console.log('\\nâš ï¸  è­¦å‘Šé—®é¢˜ï¼ˆå»ºè®®ä¿®å¤ï¼‰:');\n      this.report.deployment.warnings.forEach((warning, index) => {\n        console.log(\n          `${index + 1}. [${warning.severity.toUpperCase()}] ${warning.message}`,\n        );\n        console.log(`   å»ºè®®: ${warning.action}`);\n      });\n    }\n\n    // ä¿å­˜æŠ¥å‘Š\n    this.saveReport();\n\n    return this.report.deployment.ready;\n  }\n\n  /**\n   * ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶\n   */\n  saveReport() {\n    try {\n      const reportsDir = path.join(process.cwd(), 'reports');\n      if (!fs.existsSync(reportsDir)) {\n        fs.mkdirSync(reportsDir, { recursive: true });\n      }\n\n      const reportPath = path.join(reportsDir, 'deployment-report.json');\n      fs.writeFileSync(reportPath, JSON.stringify(this.report, null, 2));\n\n      console.log(`\\nğŸ“„ éƒ¨ç½²æŠ¥å‘Šå·²ä¿å­˜: ${reportPath}`);\n    } catch (error) {\n      console.warn(`âš ï¸  ä¿å­˜æŠ¥å‘Šå¤±è´¥: ${error.message}`);\n    }\n  }\n\n  /**\n   * æ‰§è¡Œå®Œæ•´çš„éƒ¨ç½²å‰æ£€æŸ¥\n   */\n  async runDeploymentCheck() {\n    console.log('ğŸš€ å¼€å§‹éƒ¨ç½²å‰æ£€æŸ¥...\\n');\n\n    // æŒ‰é‡è¦æ€§é¡ºåºæ‰§è¡Œæ£€æŸ¥\n    const checks = [\n      () => this.runBuildCheck(),\n      () => this.runIntegrationTests(),\n      () => this.runSecurityCheck(),\n      () => this.runPerformanceCheck(),\n      () => this.runQualityCheck(),\n    ];\n\n    for (const check of checks) {\n      await check();\n      // å¦‚æœæœ‰é˜»å¡æ€§é—®é¢˜ï¼Œæå‰ç»“æŸ\n      if (this.report.deployment.blockers.length > 0) {\n        console.log('\\nâš ï¸  å‘ç°é˜»å¡æ€§é—®é¢˜ï¼Œåœæ­¢åç»­æ£€æŸ¥');\n        break;\n      }\n    }\n\n    return this.generateReport();\n  }\n}\n\n// å‘½ä»¤è¡Œæ¥å£\nif (require.main === module) {\n  const checker = new DeploymentChecker();\n  checker\n    .runDeploymentCheck()\n    .then((ready) => {\n      if (ready) {\n        console.log('\\nğŸ‰ éƒ¨ç½²å‰æ£€æŸ¥é€šè¿‡ï¼å¯ä»¥å®‰å…¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚');\n      } else {\n        console.log('\\nâŒ éƒ¨ç½²å‰æ£€æŸ¥å¤±è´¥ï¼è¯·ä¿®å¤é—®é¢˜åé‡è¯•ã€‚');\n      }\n      process.exit(ready ? 0 : 1);\n    })\n    .catch((error) => {\n      console.error(`âŒ éƒ¨ç½²æ£€æŸ¥æ‰§è¡Œå¤±è´¥: ${error.message}`);\n      process.exit(1);\n    });\n}\n\nmodule.exports = DeploymentChecker;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/deployment-ready.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":58,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"output"},"fix":{"range":[1104,1243],"text":""},"desc":"Remove unused variable 'output'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":58,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":103,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":103,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":19},{"ruleId":"require-await","severity":1,"message":"Async method 'inferFromQualityReport' has no 'await' expression.","line":113,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":113,"endColumn":31,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2414,2420],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":140,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":140,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":140,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'success' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":244,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":244,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"success"},"fix":{"range":[5715,5764],"text":""},"desc":"Remove unused variable 'success'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'success' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":244,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":244,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * éƒ¨ç½²å°±ç»ªæ£€æŸ¥å™¨ - è¶…ç®€å•çš„éƒ¨ç½²å†³ç­–\n * Deployment Ready Checker - Ultra-simple deployment decision\n */\n\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nclass DeploymentReadyChecker {\n  constructor() {\n    this.readiness = {\n      ready: false,\n      score: 0,\n      blockers: [],\n      warnings: [],\n      confidence: 'low',\n    };\n  }\n\n  /**\n   * æ˜¾ç¤ºè¿›åº¦æ¡\n   */\n  showProgress(steps) {\n    console.log('ğŸš€ éƒ¨ç½²å°±ç»ªæ£€æŸ¥è¿›è¡Œä¸­...\\n');\n\n    steps.forEach((step, index) => {\n      const progress =\n        'â–ˆ'.repeat(index + 1) + 'â–‘'.repeat(steps.length - index - 1);\n      process.stdout.write(`\\r[${progress}] ${step}`);\n\n      // æ¨¡æ‹Ÿæ£€æŸ¥æ—¶é—´\n      const delay = Math.random() * 1000 + 500;\n      execSync(`sleep ${delay / 1000}`, { stdio: 'ignore' });\n    });\n\n    console.log('\\n');\n  }\n\n  /**\n   * è¿è¡Œå®Œæ•´çš„éƒ¨ç½²å‰æ£€æŸ¥\n   */\n  async runDeploymentChecks() {\n    const steps = [\n      'ğŸ—ï¸  æ„å»ºéªŒè¯...',\n      'ğŸ§ª æµ‹è¯•æ‰§è¡Œ...',\n      'ğŸ”’ å®‰å…¨æ‰«æ...',\n      'âš¡ æ€§èƒ½æ£€æŸ¥...',\n      'ğŸ“Š è´¨é‡è¯„ä¼°...',\n    ];\n\n    this.showProgress(steps);\n\n    try {\n      // è¿è¡Œå®Œæ•´çš„éƒ¨ç½²æ£€æŸ¥ï¼ˆAIå±‚çš„å¤æ‚é€»è¾‘ï¼‰\n      const output = execSync('pnpm deploy:check', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 180000, // 3åˆ†é’Ÿè¶…æ—¶\n      });\n\n      console.log('âœ… éƒ¨ç½²æ£€æŸ¥å®Œæˆ\\n');\n\n      // è§£ææ£€æŸ¥ç»“æœ\n      await this.parseDeploymentReport();\n\n      return true;\n    } catch (error) {\n      console.log('âš ï¸  éƒ¨ç½²æ£€æŸ¥é‡åˆ°é—®é¢˜ï¼Œæ­£åœ¨åˆ†æ...\\n');\n\n      // å³ä½¿å‡ºé”™ä¹Ÿå°è¯•è§£æå·²æœ‰æŠ¥å‘Š\n      await this.parseDeploymentReport();\n\n      return false;\n    }\n  }\n\n  /**\n   * è§£æéƒ¨ç½²æŠ¥å‘Š\n   */\n  async parseDeploymentReport() {\n    try {\n      const reportPath = path.join(\n        process.cwd(),\n        'reports',\n        'deployment-report.json',\n      );\n\n      if (fs.existsSync(reportPath)) {\n        const report = JSON.parse(fs.readFileSync(reportPath, 'utf8'));\n\n        this.readiness.ready = report.deployment.ready;\n        this.readiness.score = report.deployment.score;\n        this.readiness.blockers = this.extractBlockers(report);\n        this.readiness.warnings = this.extractWarnings(report);\n        this.readiness.confidence = this.assessConfidence(report);\n      } else {\n        // å¦‚æœæ²¡æœ‰éƒ¨ç½²æŠ¥å‘Šï¼Œå°è¯•ä»è´¨é‡æŠ¥å‘Šæ¨æ–­\n        await this.inferFromQualityReport();\n      }\n    } catch (error) {\n      console.warn('âš ï¸  æ— æ³•è¯»å–éƒ¨ç½²æŠ¥å‘Šï¼Œä½¿ç”¨åŸºç¡€è¯„ä¼°');\n      this.readiness.ready = false;\n      this.readiness.confidence = 'low';\n    }\n  }\n\n  /**\n   * ä»è´¨é‡æŠ¥å‘Šæ¨æ–­éƒ¨ç½²å°±ç»ªæ€§\n   */\n  async inferFromQualityReport() {\n    try {\n      const qualityReportPath = path.join(\n        process.cwd(),\n        'reports',\n        'simple-quality-report.json',\n      );\n\n      if (fs.existsSync(qualityReportPath)) {\n        const report = JSON.parse(fs.readFileSync(qualityReportPath, 'utf8'));\n\n        const score = report.summary.overallScore || 0;\n        const failedChecks = report.summary.failedChecks || 0;\n\n        this.readiness.score = score;\n        this.readiness.ready = score >= 80 && failedChecks === 0;\n        this.readiness.confidence =\n          score >= 90 ? 'high' : score >= 70 ? 'medium' : 'low';\n\n        if (failedChecks > 0) {\n          this.readiness.blockers.push({\n            type: 'quality',\n            message: `${failedChecks} ä¸ªè´¨é‡æ£€æŸ¥å¤±è´¥`,\n            action: 'è¿è¡Œ pnpm health æŸ¥çœ‹è¯¦æƒ…',\n          });\n        }\n      }\n    } catch (error) {\n      // é™é»˜å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼\n    }\n  }\n\n  /**\n   * æå–é˜»å¡æ€§é—®é¢˜\n   */\n  extractBlockers(report) {\n    if (!report.deployment.blockers) return [];\n\n    return report.deployment.blockers.map((blocker) => ({\n      type: blocker.type,\n      message: blocker.message,\n      action: blocker.action,\n    }));\n  }\n\n  /**\n   * æå–è­¦å‘Šé—®é¢˜\n   */\n  extractWarnings(report) {\n    if (!report.deployment.warnings) return [];\n\n    return report.deployment.warnings.slice(0, 3).map((warning) => ({\n      type: warning.type,\n      message: warning.message,\n      action: warning.action,\n    }));\n  }\n\n  /**\n   * è¯„ä¼°ä¿¡å¿ƒåº¦\n   */\n  assessConfidence(report) {\n    const score = report.deployment.score || 0;\n    const blockers = report.deployment.blockers?.length || 0;\n\n    if (score >= 95 && blockers === 0) return 'high';\n    if (score >= 85 && blockers === 0) return 'medium';\n    return 'low';\n  }\n\n  /**\n   * æ˜¾ç¤ºéƒ¨ç½²å†³ç­–\n   */\n  displayDeploymentDecision() {\n    console.log('ğŸš€ éƒ¨ç½²å°±ç»ªè¯„ä¼°');\n    console.log('='.repeat(30));\n\n    // æ˜¾ç¤ºä¸»è¦å†³ç­–\n    if (this.readiness.ready) {\n      console.log('âœ… å¯ä»¥å®‰å…¨éƒ¨ç½²ï¼');\n      console.log(`ğŸ“Š å°±ç»ªåˆ†æ•°: ${this.readiness.score}/100`);\n\n      const confidenceIcons = {\n        high: 'ğŸŸ¢ é«˜ä¿¡å¿ƒ',\n        medium: 'ğŸŸ¡ ä¸­ç­‰ä¿¡å¿ƒ',\n        low: 'ğŸŸ  ä½ä¿¡å¿ƒ',\n      };\n\n      console.log(`ğŸ¯ ä¿¡å¿ƒåº¦: ${confidenceIcons[this.readiness.confidence]}`);\n    } else {\n      console.log('âŒ æš‚ä¸å»ºè®®éƒ¨ç½²');\n      console.log(`ğŸ“Š å°±ç»ªåˆ†æ•°: ${this.readiness.score}/100 (éœ€è¦â‰¥80)`);\n    }\n\n    // æ˜¾ç¤ºé˜»å¡æ€§é—®é¢˜\n    if (this.readiness.blockers.length > 0) {\n      console.log('\\nğŸš¨ å¿…é¡»ä¿®å¤çš„é—®é¢˜:');\n      this.readiness.blockers.forEach((blocker, index) => {\n        console.log(`${index + 1}. ${blocker.message}`);\n        console.log(`   ğŸ’¡ è§£å†³æ–¹æ¡ˆ: ${blocker.action}`);\n      });\n    }\n\n    // æ˜¾ç¤ºè­¦å‘Š\n    if (this.readiness.warnings.length > 0) {\n      console.log('\\nâš ï¸  å»ºè®®ä¿®å¤çš„é—®é¢˜:');\n      this.readiness.warnings.forEach((warning, index) => {\n        console.log(`${index + 1}. ${warning.message}`);\n        console.log(`   ğŸ’¡ å»ºè®®: ${warning.action}`);\n      });\n    }\n\n    // æ˜¾ç¤ºä¸‹ä¸€æ­¥å»ºè®®\n    console.log('\\nğŸ“‹ ä¸‹ä¸€æ­¥:');\n    if (this.readiness.ready) {\n      console.log('ğŸ‰ å¯ä»¥æ‰§è¡Œéƒ¨ç½²å‘½ä»¤');\n      console.log('ğŸ“Š æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š: pnpm report');\n    } else {\n      console.log('ğŸ”§ ä¿®å¤ä¸Šè¿°é—®é¢˜åé‡æ–°æ£€æŸ¥');\n      console.log('ğŸ¥ æŸ¥çœ‹é¡¹ç›®å¥åº·: pnpm health');\n      console.log('ğŸ“Š æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š: pnpm report');\n    }\n  }\n\n  /**\n   * æ‰§è¡Œéƒ¨ç½²å°±ç»ªæ£€æŸ¥\n   */\n  async checkReadiness() {\n    console.log('ğŸ¯ éƒ¨ç½²å°±ç»ªå¿«é€Ÿæ£€æŸ¥');\n    console.log('='.repeat(30));\n\n    const success = await this.runDeploymentChecks();\n    this.displayDeploymentDecision();\n\n    return this.readiness.ready;\n  }\n}\n\n// å‘½ä»¤è¡Œæ¥å£\nif (require.main === module) {\n  const checker = new DeploymentReadyChecker();\n  checker\n    .checkReadiness()\n    .then((ready) => {\n      if (ready) {\n        console.log('\\nğŸ‰ éƒ¨ç½²æ£€æŸ¥é€šè¿‡ï¼');\n      } else {\n        console.log('\\nâš ï¸  è¯·ä¿®å¤é—®é¢˜åé‡è¯•éƒ¨ç½²æ£€æŸ¥ã€‚');\n      }\n      process.exit(ready ? 0 : 1);\n    })\n    .catch((error) => {\n      console.error(`âŒ éƒ¨ç½²æ£€æŸ¥å¤±è´¥: ${error.message}`);\n      process.exit(1);\n    });\n}\n\nmodule.exports = DeploymentReadyChecker;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-all-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[106,135],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":47,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":47,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":55,"column":21,"nodeType":"CallExpression","endLine":55,"endColumn":54},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":60,"column":21,"nodeType":"NewExpression","endLine":60,"endColumn":57},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":75,"column":19,"nodeType":"CallExpression","endLine":75,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":104,"column":7,"nodeType":"CallExpression","endLine":104,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * ä¿®å¤æ‰€æœ‰importè¯­å¥\n * - åˆ†ææ¯ä¸ªæ–‡ä»¶ä½¿ç”¨çš„å¸¸é‡\n * - ç”Ÿæˆæ­£ç¡®çš„importè¯­å¥\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nfunction getAllAvailableConstants() {\n  try {\n    const constantsContent = fs.readFileSync(\n      'src/constants/magic-numbers.ts',\n      'utf8',\n    );\n    const constants = new Set();\n\n    const matches = constantsContent.matchAll(\n      /export const ([A-Z_][A-Z0-9_]*)/g,\n    );\n    for (const match of matches) {\n      constants.add(match[1]);\n    }\n\n    return constants;\n  } catch (error) {\n    console.error('âŒ æ— æ³•è¯»å–å¸¸é‡æ–‡ä»¶:', error.message);\n    return new Set();\n  }\n}\n\nfunction findFilesWithMagicConstants() {\n  try {\n    const result = execSync(\n      'find src/ -name \"*.ts\" -o -name \"*.tsx\" | xargs grep -l \"MAGIC_\\\\|ANIMATION_\\\\|SIZE_\\\\|OPACITY_\\\\|COUNT_\\\\|PERCENTAGE_\\\\|OFFSET_\\\\|HEX_\\\\|DECIMAL_\\\\|BYTES_\\\\|SECONDS_\\\\|HOURS_\\\\|DAYS_\"',\n      {\n        encoding: 'utf8',\n        shell: true,\n      },\n    );\n    return result\n      .trim()\n      .split('\\n')\n      .filter((file) => file.length > 0);\n  } catch (error) {\n    console.log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°ä½¿ç”¨å¸¸é‡çš„æ–‡ä»¶');\n    return [];\n  }\n}\n\nfunction getUsedConstantsInFile(filePath, availableConstants) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    const usedConstants = new Set();\n\n    // æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„å¸¸é‡ä½¿ç”¨\n    for (const constant of availableConstants) {\n      const regex = new RegExp(`\\\\b${constant}\\\\b`, 'g');\n      if (regex.test(content)) {\n        usedConstants.add(constant);\n      }\n    }\n\n    return usedConstants;\n  } catch (error) {\n    console.error(`âŒ æ— æ³•è¯»å–æ–‡ä»¶ ${filePath}:`, error.message);\n    return new Set();\n  }\n}\n\nfunction fixImportInFile(filePath, usedConstants) {\n  try {\n    let content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n\n    // ç§»é™¤ç°æœ‰çš„magic-numberså¯¼å…¥\n    const importRegex =\n      /import\\s*\\{[^}]*\\}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"];\\s*\\n?/g;\n    content = content.replace(importRegex, '');\n\n    if (usedConstants.size > 0) {\n      // ç”Ÿæˆæ–°çš„importè¯­å¥\n      const sortedConstants = Array.from(usedConstants).sort();\n      const newImport = `import { ${sortedConstants.join(', ')} } from '@/constants/magic-numbers';\\n`;\n\n      // åœ¨ç¬¬ä¸€ä¸ªimportè¯­å¥åæ’å…¥\n      const firstImportMatch = content.match(/^import .+;$/m);\n      if (firstImportMatch) {\n        content = content.replace(\n          firstImportMatch[0],\n          `${firstImportMatch[0]  }\\n${  newImport}`,\n        );\n      } else {\n        // å¦‚æœæ²¡æœ‰å…¶ä»–importï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ’å…¥\n        content = `${newImport  }\\n${  content}`;\n      }\n\n      modified = true;\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, content, 'utf8');\n      console.log(`âœ… ä¿®å¤: ${filePath} (${usedConstants.size}ä¸ªå¸¸é‡)`);\n      return 1;\n    }\n\n    return 0;\n  } catch (error) {\n    console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return 0;\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ ä¿®å¤æ‰€æœ‰importè¯­å¥...');\n\n  const availableConstants = getAllAvailableConstants();\n  console.log(`ğŸ“Š å¯ç”¨å¸¸é‡: ${availableConstants.size} ä¸ª`);\n\n  const affectedFiles = findFilesWithMagicConstants();\n  if (affectedFiles.length === 0) {\n    console.log('âœ… æ²¡æœ‰å‘ç°ä½¿ç”¨å¸¸é‡çš„æ–‡ä»¶');\n    return;\n  }\n\n  console.log(`ğŸ“Š å‘ç° ${affectedFiles.length} ä¸ªä½¿ç”¨å¸¸é‡çš„æ–‡ä»¶`);\n\n  let totalFixes = 0;\n  for (const filePath of affectedFiles) {\n    const usedConstants = getUsedConstantsInFile(filePath, availableConstants);\n    if (usedConstants.size > 0) {\n      totalFixes += fixImportInFile(filePath, usedConstants);\n    }\n  }\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log(`ğŸ“Š æ€»è®¡ä¿®å¤ ${totalFixes} ä¸ªæ–‡ä»¶çš„importè¯­å¥`);\n\n  if (totalFixes > 0) {\n    console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n    console.log('pnpm type-check');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-constant-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[126,155],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":26,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":26,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":35,"column":19,"nodeType":"CallExpression","endLine":35,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":57,"column":7,"nodeType":"CallExpression","endLine":57,"endColumn":50},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":84,"column":9,"nodeType":"CallExpression","endLine":84,"endColumn":28},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":96,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":96,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤å¸¸é‡å¯¼å…¥è¯­å¥\n * å°†æ‰€æœ‰ä» @/constants/magic-numbers çš„å¯¼å…¥æ”¹ä¸ºä» @/constants ç»Ÿä¸€å¯¼å…¥\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// æŸ¥æ‰¾æ‰€æœ‰åŒ…å« magic-numbers å¯¼å…¥çš„æ–‡ä»¶\nfunction findFilesWithMagicNumbersImports() {\n  try {\n    const result = execSync(\n      'find src/ -name \"*.ts\" -o -name \"*.tsx\" | xargs grep -l \"from \\'@/constants/magic-numbers\\'\" 2>/dev/null || true',\n      {\n        encoding: 'utf8',\n        shell: true,\n      },\n    );\n    return result\n      .trim()\n      .split('\\n')\n      .filter((file) => file.length > 0);\n  } catch (error) {\n    console.log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°ä½¿ç”¨ magic-numbers å¯¼å…¥çš„æ–‡ä»¶');\n    return [];\n  }\n}\n\n// ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥è¯­å¥\nfunction fixImportsInFile(filePath) {\n  try {\n    let content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n\n    // åŒ¹é… magic-numbers å¯¼å…¥è¯­å¥\n    const importRegex = /import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"];?/g;\n    \n    let match;\n    while ((match = importRegex.exec(content)) !== null) {\n      const fullImport = match[0];\n      const importList = match[1];\n      \n      // æ›¿æ¢ä¸ºç»Ÿä¸€å¯¼å…¥\n      const newImport = `import { ${importList} } from '@/constants';`;\n      content = content.replace(fullImport, newImport);\n      modified = true;\n      \n      console.log(`âœ… ä¿®å¤å¯¼å…¥: ${filePath}`);\n      console.log(`  åŸå§‹: ${fullImport}`);\n      console.log(`  ä¿®å¤: ${newImport}`);\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, content, 'utf8');\n      return 1;\n    }\n\n    return 0;\n  } catch (error) {\n    console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return 0;\n  }\n}\n\n// ä¸»å‡½æ•°\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹ä¿®å¤å¸¸é‡å¯¼å…¥è¯­å¥...\\n');\n\n  const files = findFilesWithMagicNumbersImports();\n  \n  if (files.length === 0) {\n    console.log('âœ… æ²¡æœ‰æ‰¾åˆ°éœ€è¦ä¿®å¤çš„æ–‡ä»¶');\n    return;\n  }\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªéœ€è¦ä¿®å¤çš„æ–‡ä»¶:\\n`);\n  \n  let fixedCount = 0;\n  \n  for (const file of files) {\n    if (fs.existsSync(file)) {\n      fixedCount += fixImportsInFile(file);\n    }\n  }\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼å…±ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n  \n  // éªŒè¯ä¿®å¤ç»“æœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤ç»“æœ...');\n  try {\n    execSync('pnpm type-check', { stdio: 'inherit' });\n    console.log('âœ… TypeScript ç¼–è¯‘é€šè¿‡ï¼');\n  } catch (error) {\n    console.log('âš ï¸  ä»æœ‰ TypeScript é”™è¯¯ï¼Œéœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-decimal-magic-numbers.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[108,137],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":42,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":42,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":50,"column":19,"nodeType":"CallExpression","endLine":50,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'constantName' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":54,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"constantName"},"fix":{"range":[1424,1438],"text":""},"desc":"Remove unused variable 'constantName'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'constantName' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":54,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":52},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":55,"column":21,"nodeType":"NewExpression","endLine":55,"endColumn":45},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":65,"column":7,"nodeType":"CallExpression","endLine":65,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * ä¿®å¤å°æ•°é­”æ³•æ•°å­—é”™è¯¯\n * - ä¿®å¤ç”±äºé­”æ³•æ•°å­—æ›¿æ¢å¯¼è‡´çš„å°æ•°æ‹†åˆ†é—®é¢˜\n * - æ¢å¤æ­£ç¡®çš„å°æ•°æ ¼å¼\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// éœ€è¦ä¿®å¤çš„é”™è¯¯æ¨¡å¼\nconst DECIMAL_FIXES = [\n  // æ ¼å¼: [é”™è¯¯æ¨¡å¼, æ­£ç¡®å€¼, å¸¸é‡å]\n  ['0\\\\.MAGIC_85', '0.85', 'DECIMAL_85_PERCENT'],\n  ['0\\\\.MAGIC_95', '0.95', 'DECIMAL_95_PERCENT'],\n  ['0\\\\.MAGIC_99', '0.99', 'DECIMAL_99_PERCENT'],\n  ['0\\\\.MAGIC_96', '0.96', 'DECIMAL_96_PERCENT'],\n  ['MAGIC_0_001', '0.001', 'DECIMAL_VERY_SMALL'],\n  ['MAGIC_0_05', '0.05', 'DECIMAL_5_PERCENT'],\n  ['MAGIC_0_12', '0.12', 'DECIMAL_12_PERCENT'],\n  ['MAGIC_0_03', '0.03', 'DECIMAL_3_PERCENT'],\n  ['MAGIC_0_85', '0.85', 'DECIMAL_85_PERCENT'],\n  ['MAGIC_0_95', '0.95', 'DECIMAL_95_PERCENT'],\n  ['MAGIC_0_99', '0.99', 'DECIMAL_99_PERCENT'],\n  ['MAGIC_0_96', '0.96', 'DECIMAL_96_PERCENT'],\n];\n\nfunction findAffectedFiles() {\n  try {\n    const result = execSync(\n      'grep -r \"0\\\\.MAGIC_\\\\|MAGIC_0_\" src/ --include=\"*.ts\" --include=\"*.tsx\" -l',\n      {\n        encoding: 'utf8',\n        shell: true,\n      },\n    );\n    return result\n      .trim()\n      .split('\\n')\n      .filter((file) => file.length > 0);\n  } catch (error) {\n    console.log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°å—å½±å“çš„æ–‡ä»¶');\n    return [];\n  }\n}\n\nfunction fixDecimalNumbers(filePath) {\n  try {\n    let content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n    const fixedPatterns = [];\n\n    for (const [pattern, correctValue, constantName] of DECIMAL_FIXES) {\n      const regex = new RegExp(pattern, 'g');\n      const matches = content.match(regex);\n      if (matches) {\n        content = content.replace(regex, correctValue);\n        modified = true;\n        fixedPatterns.push(`${pattern} â†’ ${correctValue}`);\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, content, 'utf8');\n      console.log(`âœ… ä¿®å¤: ${filePath}`);\n      fixedPatterns.forEach((fix) => console.log(`   ${fix}`));\n      return fixedPatterns.length;\n    }\n\n    return 0;\n  } catch (error) {\n    console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return 0;\n  }\n}\n\nfunction updateConstantsFile() {\n  const constantsPath = 'src/constants/magic-numbers.ts';\n\n  try {\n    let content = fs.readFileSync(constantsPath, 'utf8');\n\n    // æ·»åŠ å°æ•°å¸¸é‡\n    const decimalConstants = `\n// å°æ•°å¸¸é‡ (ç™¾åˆ†æ¯”å’Œæ¯”ä¾‹)\nexport const DECIMAL_3_PERCENT = 0.03;\nexport const DECIMAL_5_PERCENT = 0.05;\nexport const DECIMAL_12_PERCENT = 0.12;\nexport const DECIMAL_85_PERCENT = 0.85;\nexport const DECIMAL_95_PERCENT = 0.95;\nexport const DECIMAL_96_PERCENT = 0.96;\nexport const DECIMAL_99_PERCENT = 0.99;\nexport const DECIMAL_VERY_SMALL = 0.001;\n`;\n\n    // åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å°æ•°å¸¸é‡\n    if (!content.includes('DECIMAL_')) {\n      content += decimalConstants;\n      fs.writeFileSync(constantsPath, content, 'utf8');\n      console.log(`âœ… æ›´æ–°å¸¸é‡æ–‡ä»¶: ${constantsPath}`);\n    }\n  } catch (error) {\n    console.error(`âŒ æ›´æ–°å¸¸é‡æ–‡ä»¶å¤±è´¥:`, error.message);\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ ä¿®å¤å°æ•°é­”æ³•æ•°å­—é”™è¯¯...');\n\n  const affectedFiles = findAffectedFiles();\n  if (affectedFiles.length === 0) {\n    console.log('âœ… æ²¡æœ‰å‘ç°éœ€è¦ä¿®å¤çš„å°æ•°é”™è¯¯');\n    return;\n  }\n\n  console.log(`ğŸ“Š å‘ç° ${affectedFiles.length} ä¸ªå—å½±å“çš„æ–‡ä»¶`);\n\n  let totalFixes = 0;\n  for (const filePath of affectedFiles) {\n    totalFixes += fixDecimalNumbers(filePath);\n  }\n\n  // æ›´æ–°å¸¸é‡æ–‡ä»¶\n  updateConstantsFile();\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log(`ğŸ“Š æ€»è®¡ä¿®å¤ ${totalFixes} ä¸ªå°æ•°é”™è¯¯`);\n\n  if (totalFixes > 0) {\n    console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n    console.log('pnpm type-check');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-error-property.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[82,111],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":15,"column":21,"nodeType":"CallExpression","endLine":15,"endColumn":54},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":21,"column":7,"nodeType":"CallExpression","endLine":21,"endColumn":45},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":54,"column":9,"nodeType":"CallExpression","endLine":54,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤_errorå±æ€§åé”™è¯¯ï¼Œåº”è¯¥æ˜¯error\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶ä¸­çš„_errorå±æ€§\n */\nfunction fixErrorPropertyInFile(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n\n    // æ›¿æ¢ ._error ä¸º .error\n    const newContent = content.replace(/\\._error\\b/g, '.error');\n\n    if (content !== newContent) {\n      fs.writeFileSync(filePath, newContent);\n      console.log(`âœ… ä¿®å¤: ${filePath}`);\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`âŒ ä¿®å¤å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸš€ å¼€å§‹ä¿®å¤_errorå±æ€§åé”™è¯¯...\\n');\n\n  const filesToFix = [\n    'src/app/api/analytics/i18n/route.ts',\n    'src/app/api/analytics/web-vitals/route.ts',\n    'src/app/api/subscribe/route.ts',\n    'src/app/api/whatsapp/send/route.ts',\n    'src/app/api/whatsapp/webhook/route.ts',\n    'src/app/api/monitoring/dashboard/handlers/get-handler.ts',\n    'src/app/api/monitoring/dashboard/handlers/post-handler.ts',\n    'src/app/api/monitoring/dashboard/handlers/put-handler.ts',\n    'src/app/api/monitoring/dashboard/handlers/delete-handler.ts',\n  ];\n\n  let fixedCount = 0;\n\n  filesToFix.forEach((file) => {\n    if (fs.existsSync(file)) {\n      if (fixErrorPropertyInFile(file)) {\n        fixedCount++;\n      }\n    } else {\n      console.log(`âš ï¸ æ–‡ä»¶ä¸å­˜åœ¨: ${file}`);\n    }\n  });\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${fixedCount}`);\n  console.log('\\nğŸ¯ _errorå±æ€§ä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\n// è¿è¡Œè„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixErrorPropertyInFile };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-import-conflicts.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":50,"column":21,"nodeType":"CallExpression","endLine":50,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":54,"column":22,"nodeType":"CallExpression","endLine":54,"endColumn":43},{"ruleId":"require-await","severity":1,"message":"Async method 'processFile' has no 'await' expression.","line":74,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":74,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1496,1502],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":76,"column":23,"nodeType":"CallExpression","endLine":76,"endColumn":56},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":94,"column":7,"nodeType":"CallExpression","endLine":94,"endColumn":55},{"ruleId":"no-unused-vars","severity":1,"message":"'lines' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":107,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"lines"},"fix":{"range":[2365,2399],"text":""},"desc":"Remove unused variable 'lines'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lines' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":107,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'fullMatch' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"fullMatch"},"fix":{"range":[3970,3979],"text":""},"desc":"Remove unused variable 'fullMatch'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fullMatch' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤å¯¼å…¥å†²çªè„šæœ¬\n * \n * åŠŸèƒ½ï¼š\n * 1. æ£€æµ‹å¯¼å…¥å£°æ˜ä¸æœ¬åœ°å£°æ˜çš„å†²çª\n * 2. ç§»é™¤å†²çªçš„å¯¼å…¥è¯­å¥\n * 3. ä¿ç•™æœ¬åœ°å®šä¹‰çš„å¸¸é‡\n * \n * ä½¿ç”¨æ–¹æ³•ï¼š\n * node scripts/fix-import-conflicts.js\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nclass ImportConflictFixer {\n  constructor() {\n    this.stats = {\n      filesProcessed: 0,\n      conflictsFixed: 0,\n      errors: 0\n    };\n  }\n\n  async run() {\n    console.log('ğŸ”§ å¼€å§‹ä¿®å¤å¯¼å…¥å†²çª...\\n');\n    \n    try {\n      const files = this.getFilesToProcess();\n      console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦å¤„ç†\\n`);\n      \n      for (const file of files) {\n        await this.processFile(file);\n      }\n      \n      this.printStats();\n      \n    } catch (error) {\n      console.error('âŒ æ‰§è¡Œå¤±è´¥:', error.message);\n      process.exit(1);\n    }\n  }\n\n  getFilesToProcess() {\n    const files = [];\n    \n    const walkDir = (dir) => {\n      const items = fs.readdirSync(dir);\n      \n      for (const item of items) {\n        const fullPath = path.join(dir, item);\n        const stat = fs.statSync(fullPath);\n        \n        if (stat.isDirectory()) {\n          if (!item.startsWith('.') && item !== 'node_modules' && !item.includes('test')) {\n            walkDir(fullPath);\n          }\n        } else if (stat.isFile()) {\n          if ((item.endsWith('.ts') || item.endsWith('.tsx')) && \n              !item.endsWith('.d.ts') && \n              !item.includes('.test.')) {\n            files.push(fullPath);\n          }\n        }\n      }\n    };\n    \n    walkDir('src');\n    return files;\n  }\n\n  async processFile(filePath) {\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      \n      // æŸ¥æ‰¾å¯¼å…¥å†²çª\n      const conflicts = this.findImportConflicts(content);\n      \n      if (conflicts.length === 0) {\n        return;\n      }\n      \n      this.stats.filesProcessed++;\n      \n      console.log(`ğŸ” å¤„ç†æ–‡ä»¶: ${filePath}`);\n      console.log(`   å‘ç° ${conflicts.length} ä¸ªå¯¼å…¥å†²çª: ${conflicts.join(', ')}`);\n      \n      // ä¿®å¤å†²çª\n      const fixedContent = this.fixConflicts(content, conflicts);\n      \n      // å†™å…¥ä¿®å¤åçš„å†…å®¹\n      fs.writeFileSync(filePath, fixedContent, 'utf8');\n      \n      this.stats.conflictsFixed += conflicts.length;\n      console.log(`   âœ… å·²ä¿®å¤\\n`);\n      \n    } catch (error) {\n      this.stats.errors++;\n      console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    }\n  }\n\n  findImportConflicts(content) {\n    const conflicts = [];\n    const lines = content.split('\\n');\n    \n    // è·å–æ‰€æœ‰å¯¼å…¥çš„æ ‡è¯†ç¬¦\n    const importedIdentifiers = this.getImportedIdentifiers(content);\n    \n    // è·å–æ‰€æœ‰æœ¬åœ°å®šä¹‰çš„æ ‡è¯†ç¬¦\n    const localIdentifiers = this.getLocalIdentifiers(content);\n    \n    // æŸ¥æ‰¾å†²çª\n    for (const identifier of importedIdentifiers) {\n      if (localIdentifiers.has(identifier)) {\n        conflicts.push(identifier);\n      }\n    }\n    \n    return conflicts;\n  }\n\n  getImportedIdentifiers(content) {\n    const identifiers = new Set();\n    const importRegex = /import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"][^'\"]+['\"];?/g;\n    \n    let match;\n    while ((match = importRegex.exec(content)) !== null) {\n      const imports = match[1].split(',').map(imp => imp.trim());\n      imports.forEach(imp => identifiers.add(imp));\n    }\n    \n    return identifiers;\n  }\n\n  getLocalIdentifiers(content) {\n    const identifiers = new Set();\n    \n    // åŒ¹é… export const å£°æ˜\n    const exportConstRegex = /export\\s+const\\s+([A-Z_][A-Z0-9_]*)\\s*=/g;\n    let match;\n    while ((match = exportConstRegex.exec(content)) !== null) {\n      identifiers.add(match[1]);\n    }\n    \n    // åŒ¹é… const å£°æ˜\n    const constRegex = /^const\\s+([A-Z_][A-Z0-9_]*)\\s*=/gm;\n    while ((match = constRegex.exec(content)) !== null) {\n      identifiers.add(match[1]);\n    }\n    \n    return identifiers;\n  }\n\n  fixConflicts(content, conflicts) {\n    const lines = content.split('\\n');\n    const fixedLines = [];\n    \n    for (const line of lines) {\n      // æ£€æŸ¥æ˜¯å¦æ˜¯å¯¼å…¥è¡Œ\n      const importMatch = line.match(/import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"];?/);\n      \n      if (importMatch) {\n        const [fullMatch, importList, source] = importMatch;\n        const imports = importList.split(',').map(imp => imp.trim());\n        \n        // è¿‡æ»¤æ‰å†²çªçš„å¯¼å…¥\n        const filteredImports = imports.filter(imp => !conflicts.includes(imp));\n        \n        if (filteredImports.length === 0) {\n          // å¦‚æœæ‰€æœ‰å¯¼å…¥éƒ½å†²çªï¼Œåˆ é™¤æ•´è¡Œ\n          continue;\n        } else if (filteredImports.length < imports.length) {\n          // å¦‚æœéƒ¨åˆ†å¯¼å…¥å†²çªï¼Œé‡å†™å¯¼å…¥è¡Œ\n          const newImportLine = `import { ${filteredImports.join(', ')} } from '${source}';`;\n          fixedLines.push(newImportLine);\n        } else {\n          // æ²¡æœ‰å†²çªï¼Œä¿ç•™åŸè¡Œ\n          fixedLines.push(line);\n        }\n      } else {\n        // éå¯¼å…¥è¡Œï¼Œä¿ç•™\n        fixedLines.push(line);\n      }\n    }\n    \n    return fixedLines.join('\\n');\n  }\n\n  printStats() {\n    console.log('\\nğŸ“Š å¤„ç†ç»Ÿè®¡:');\n    console.log(`   å¤„ç†æ–‡ä»¶æ•°: ${this.stats.filesProcessed}`);\n    console.log(`   ä¿®å¤å†²çªæ•°: ${this.stats.conflictsFixed}`);\n    console.log(`   é”™è¯¯æ•°: ${this.stats.errors}`);\n    \n    if (this.stats.errors === 0) {\n      console.log('\\nâœ… å¯¼å…¥å†²çªä¿®å¤å®Œæˆï¼');\n    } else {\n      console.log('\\nâš ï¸  éƒ¨åˆ†æ–‡ä»¶å¤„ç†å¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯');\n    }\n  }\n}\n\n// æ‰§è¡Œè„šæœ¬\nif (require.main === module) {\n  const fixer = new ImportConflictFixer();\n  fixer.run().catch(console.error);\n}\n\nmodule.exports = ImportConflictFixer;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-import-statements.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[119,148],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":25,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":25,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":33,"column":19,"nodeType":"CallExpression","endLine":33,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":90,"column":7,"nodeType":"CallExpression","endLine":90,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * ä¿®å¤importè¯­å¥ä¸­çš„é­”æ³•æ•°å­—é”™è¯¯\n * - æ¸…ç†importè¯­å¥ä¸­ä¸å†éœ€è¦çš„å¸¸é‡\n * - ä¿®å¤é”™è¯¯çš„importè¯­æ³•\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nfunction findFilesWithBadImports() {\n  try {\n    const result = execSync(\n      'grep -r \"import.*MAGIC_\\\\|import.*[0-9]\\\\.[0-9]\" src/ --include=\"*.ts\" --include=\"*.tsx\" -l',\n      {\n        encoding: 'utf8',\n        shell: true,\n      },\n    );\n    return result\n      .trim()\n      .split('\\n')\n      .filter((file) => file.length > 0);\n  } catch (error) {\n    console.log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°æœ‰é—®é¢˜çš„importè¯­å¥');\n    return [];\n  }\n}\n\nfunction fixImportStatements(filePath) {\n  try {\n    let content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n\n    // æŸ¥æ‰¾æ‰€æœ‰importè¯­å¥\n    const importRegex =\n      /import\\s*\\{([^}]+)\\}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"];/g;\n    const matches = [...content.matchAll(importRegex)];\n\n    for (const match of matches) {\n      const fullImport = match[0];\n      const importList = match[1];\n\n      // æ£€æŸ¥æ˜¯å¦åŒ…å«æ— æ•ˆçš„å¯¼å…¥\n      if (importList.includes('MAGIC_') || /\\b\\d+\\.\\d+\\b/.test(importList)) {\n        console.log(`ğŸ” å‘ç°é—®é¢˜import: ${fullImport.substring(0, 100)}...`);\n\n        // åˆ†ææ–‡ä»¶ä¸­å®é™…ä½¿ç”¨çš„å¸¸é‡\n        const usedConstants = new Set();\n\n        // æŸ¥æ‰¾æ–‡ä»¶ä¸­ä½¿ç”¨çš„å¸¸é‡\n        const constantPatterns = [\n          /\\b(ANIMATION_DURATION_\\w+)\\b/g,\n          /\\b(SIZE_\\w+)\\b/g,\n          /\\b(OPACITY_\\w+)\\b/g,\n          /\\b(COUNT_\\w+)\\b/g,\n          /\\b(PERCENTAGE_\\w+)\\b/g,\n          /\\b(OFFSET_NEGATIVE_\\w+)\\b/g,\n          /\\b(HEX_\\w+)\\b/g,\n          /\\b(DECIMAL_\\w+)\\b/g,\n          /\\b(BYTES_PER_\\w+)\\b/g,\n          /\\b(SECONDS_PER_\\w+)\\b/g,\n          /\\b(HOURS_PER_\\w+)\\b/g,\n          /\\b(DAYS_PER_\\w+)\\b/g,\n        ];\n\n        for (const pattern of constantPatterns) {\n          const constantMatches = [...content.matchAll(pattern)];\n          constantMatches.forEach((m) => usedConstants.add(m[1]));\n        }\n\n        // ç”Ÿæˆæ–°çš„importè¯­å¥\n        if (usedConstants.size > 0) {\n          const newImportList = Array.from(usedConstants).sort().join(', ');\n          const newImport = `import { ${newImportList} } from '@/constants/magic-numbers';`;\n          content = content.replace(fullImport, newImport);\n          console.log(`âœ… ä¿®å¤import: ${newImport.substring(0, 100)}...`);\n        } else {\n          // å¦‚æœæ²¡æœ‰ä½¿ç”¨ä»»ä½•å¸¸é‡ï¼Œåˆ é™¤importè¯­å¥\n          content = content.replace(`${fullImport  }\\n`, '');\n          console.log(`ğŸ—‘ï¸  åˆ é™¤æœªä½¿ç”¨çš„importè¯­å¥`);\n        }\n\n        modified = true;\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, content, 'utf8');\n      console.log(`âœ… ä¿®å¤æ–‡ä»¶: ${filePath}`);\n      return 1;\n    }\n\n    return 0;\n  } catch (error) {\n    console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return 0;\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ ä¿®å¤importè¯­å¥ä¸­çš„é­”æ³•æ•°å­—é”™è¯¯...');\n\n  const affectedFiles = findFilesWithBadImports();\n  if (affectedFiles.length === 0) {\n    console.log('âœ… æ²¡æœ‰å‘ç°éœ€è¦ä¿®å¤çš„importè¯­å¥');\n    return;\n  }\n\n  console.log(`ğŸ“Š å‘ç° ${affectedFiles.length} ä¸ªå—å½±å“çš„æ–‡ä»¶`);\n\n  let totalFixes = 0;\n  for (const filePath of affectedFiles) {\n    totalFixes += fixImportStatements(filePath);\n  }\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log(`ğŸ“Š æ€»è®¡ä¿®å¤ ${totalFixes} ä¸ªæ–‡ä»¶çš„importè¯­å¥`);\n\n  if (totalFixes > 0) {\n    console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n    console.log('pnpm type-check');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-import-type-issues.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":129,"column":21,"nodeType":"CallExpression","endLine":129,"endColumn":54},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":136,"column":31,"nodeType":"NewExpression","endLine":139,"endColumn":8},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":188,"column":32,"nodeType":"NewExpression","endLine":191,"endColumn":8},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":238,"column":7,"nodeType":"CallExpression","endLine":238,"endColumn":53},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":256,"column":19,"nodeType":"CallExpression","endLine":256,"endColumn":46},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":260,"column":20,"nodeType":"CallExpression","endLine":260,"endColumn":41},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":277,"column":7,"nodeType":"CallExpression","endLine":277,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤verbatimModuleSyntaxå¯¼è‡´çš„import typeé—®é¢˜\n * è‡ªåŠ¨è¯†åˆ«å¹¶ä¿®å¤é”™è¯¯ä½¿ç”¨import typeçš„æƒ…å†µ\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// éœ€è¦ä½œä¸ºå€¼ä½¿ç”¨çš„ç±»å‹ï¼ˆä¸åº”è¯¥ç”¨import typeï¼‰\nconst VALUE_IMPORTS = [\n  'NextRequest',\n  'NextResponse',\n  'ReactElement',\n  'RenderOptions',\n  'exportTestResults',\n  'Mock',\n  'MockedFunction',\n  'vi',\n  'expect',\n  'describe',\n  'it',\n  'beforeEach',\n  'afterEach',\n  // æ–°å¢çš„å‡½æ•°ï¼ˆä¸åº”è¯¥ç”¨import typeï¼‰\n  'generateLocalizedMetadata',\n  'useLocaleStorage',\n  'useClientLocaleDetection',\n];\n\n// éœ€è¦ä½œä¸ºç±»å‹ä½¿ç”¨çš„å¯¼å…¥ï¼ˆåº”è¯¥ç”¨import typeï¼‰\nconst TYPE_ONLY_IMPORTS = [\n  'Metadata',\n  'ImageProps',\n  'TestResults',\n  'FC',\n  'ReactNode',\n  'ComponentProps',\n  // æ–°å¢çš„ç±»å‹\n  'ComponentStats',\n  'ContactFormData',\n  'FormSubmissionStatus',\n  'DateFormatOptions',\n  'LocaleDetectionResult',\n  'UserLocalePreference',\n  'Locale',\n  'EnhancedLocaleSwitcherProps',\n  'ApiResponse',\n  'AirtableRecord',\n  'EmailTemplateData',\n  'FormValidationError',\n  'ThemeMode',\n  'MockFunction',\n  'TestCallback',\n  'TestConfig',\n  'MockColorData',\n  'AccessibilityManagerPrivate',\n  'AccessibilityTestConfig',\n  'ThemeAnalyticsPrivate',\n  'ThemeAnalyticsInstance',\n  'IncompleteThemeColors',\n  'CSSVariablesTest',\n  'ExtendedMockFunction',\n  'SpyFunction',\n  'TestSuiteConfig',\n  'PatternMatchResult',\n  'TestDataGenerator',\n  'TestAssertion',\n  'AllTestTypes',\n  // æ–°å¢çš„ç±»å‹\n  'LucideIcon',\n  'ContentType',\n  'WhatsAppMessage',\n  'WhatsAppContact',\n  'WhatsAppMedia',\n  'WhatsAppTemplate',\n  'WhatsAppWebhookEvent',\n  'WhatsAppError',\n  'WhatsAppApiResponse',\n  'WhatsAppMessageStatus',\n  'WhatsAppBusinessProfile',\n  'WhatsAppPhoneNumber',\n  'WhatsAppWebhookPayload',\n  'WhatsAppMessageType',\n  'WhatsAppMediaType',\n  'WhatsAppTemplateType',\n  'WhatsAppButtonType',\n  'WhatsAppInteractiveType',\n  'WhatsAppLocationMessage',\n  'WhatsAppContactMessage',\n  'WhatsAppTextMessage',\n  'WhatsAppImageMessage',\n  'WhatsAppVideoMessage',\n  'WhatsAppAudioMessage',\n  'WhatsAppDocumentMessage',\n  'WhatsAppStickerMessage',\n  'WhatsAppReactionMessage',\n  'WhatsAppInteractiveMessage',\n  'WhatsAppTemplateMessage',\n  'WhatsAppSystemMessage',\n  'WhatsAppOrderMessage',\n  'WhatsAppPaymentMessage',\n  'WhatsAppReferralMessage',\n  'WhatsAppButtonReply',\n  'WhatsAppListReply',\n  'WhatsAppQuickReply',\n  'WhatsAppFlowReply',\n  'WhatsAppCatalogReply',\n  'WhatsAppProductReply',\n  'WhatsAppLocationReply',\n  'WhatsAppContactReply',\n  'WhatsAppMediaReply',\n  'WhatsAppTextReply',\n  'WhatsAppInteractiveReply',\n  'WhatsAppTemplateReply',\n  'WhatsAppSystemReply',\n  'WhatsAppOrderReply',\n  'WhatsAppPaymentReply',\n  'WhatsAppReferralReply',\n];\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„import typeé—®é¢˜\n */\nfunction fixImportTypeInFile(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    let newContent = content;\n    let modified = false;\n\n    // 1. ä¿®å¤é”™è¯¯çš„import typeï¼ˆåº”è¯¥æ˜¯å€¼å¯¼å…¥ï¼‰\n    VALUE_IMPORTS.forEach((importName) => {\n      // åŒ¹é… import type { ImportName } from 'module' æ¨¡å¼\n      const typeImportRegex = new RegExp(\n        `import\\\\s+type\\\\s*{([^}]*\\\\b${importName}\\\\b[^}]*)}\\\\s*from\\\\s*(['\"][^'\"]+['\"])`,\n        'g',\n      );\n\n      newContent = newContent.replace(\n        typeImportRegex,\n        (match, imports, module) => {\n          const importList = imports.split(',').map((imp) => imp.trim());\n          const valueImports = [];\n          const typeImports = [];\n\n          importList.forEach((imp) => {\n            if (VALUE_IMPORTS.some((val) => imp.includes(val))) {\n              valueImports.push(imp);\n            } else {\n              typeImports.push(imp);\n            }\n          });\n\n          let result = '';\n\n          // æ·»åŠ type importï¼ˆå¦‚æœæœ‰å‰©ä½™çš„ç±»å‹ï¼‰\n          if (typeImports.length > 0) {\n            result += `import type { ${typeImports.join(', ')} } from ${module};\\n`;\n          }\n\n          // æ·»åŠ value import\n          if (valueImports.length > 0) {\n            result += `import { ${valueImports.join(', ')} } from ${module};`;\n          }\n\n          if (result !== match) {\n            modified = true;\n            console.log(\n              `  ä¿®å¤ ${filePath}: ${importName} ä» type import æ”¹ä¸º value import`,\n            );\n          }\n\n          return result || match;\n        },\n      );\n    });\n\n    // 2. ç§»é™¤å¤šä½™çš„åˆ†å·\n    newContent = newContent.replace(/import[^;]*;\\s*;/g, (match) => {\n      return match.replace(/;\\s*;/, ';');\n    });\n\n    // 3. ä¿®å¤ç¼ºå°‘çš„import typeï¼ˆåº”è¯¥æ˜¯ç±»å‹å¯¼å…¥ï¼‰\n    TYPE_ONLY_IMPORTS.forEach((importName) => {\n      // åŒ¹é… import { ImportName } from 'module' æ¨¡å¼ï¼ˆétype importï¼‰\n      const valueImportRegex = new RegExp(\n        `import\\\\s*{([^}]*\\\\b${importName}\\\\b[^}]*)}\\\\s*from\\\\s*(['\"][^'\"]+['\"])`,\n        'g',\n      );\n\n      newContent = newContent.replace(\n        valueImportRegex,\n        (match, imports, module) => {\n          // è·³è¿‡å·²ç»æ˜¯type importçš„æƒ…å†µ\n          if (match.includes('import type')) {\n            return match;\n          }\n\n          const importList = imports.split(',').map((imp) => imp.trim());\n          const valueImports = [];\n          const typeImports = [];\n\n          importList.forEach((imp) => {\n            if (TYPE_ONLY_IMPORTS.some((type) => imp.includes(type))) {\n              typeImports.push(imp);\n            } else {\n              valueImports.push(imp);\n            }\n          });\n\n          let result = '';\n\n          // æ·»åŠ type import\n          if (typeImports.length > 0) {\n            result += `import type { ${typeImports.join(', ')} } from ${module};\\n`;\n          }\n\n          // æ·»åŠ value importï¼ˆå¦‚æœæœ‰ï¼‰\n          if (valueImports.length > 0) {\n            result += `import { ${valueImports.join(', ')} } from ${module};`;\n          }\n\n          if (result !== match && typeImports.length > 0) {\n            modified = true;\n            console.log(\n              `  ä¿®å¤ ${filePath}: ${importName} ä» value import æ”¹ä¸º type import`,\n            );\n          }\n\n          return result || match;\n        },\n      );\n    });\n\n    if (modified) {\n      fs.writeFileSync(filePath, newContent, 'utf8');\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`å¤„ç†æ–‡ä»¶ ${filePath} æ—¶å‡ºé”™:`, error.message);\n    return false;\n  }\n}\n\n/**\n * é€’å½’å¤„ç†ç›®å½•ä¸­çš„æ‰€æœ‰TypeScriptæ–‡ä»¶\n */\nfunction fixImportTypeInDirectory(dirPath) {\n  let fixedCount = 0;\n\n  function processDirectory(currentPath) {\n    const items = fs.readdirSync(currentPath);\n\n    for (const item of items) {\n      const fullPath = path.join(currentPath, item);\n      const stat = fs.statSync(fullPath);\n\n      if (stat.isDirectory()) {\n        // è·³è¿‡node_moduleså’Œå…¶ä»–ä¸éœ€è¦å¤„ç†çš„ç›®å½•\n        if (\n          !['node_modules', '.next', '.git', 'dist', 'build'].includes(item)\n        ) {\n          processDirectory(fullPath);\n        }\n      } else if (stat.isFile() && /\\.(ts|tsx)$/.test(item)) {\n        if (fixImportTypeInFile(fullPath)) {\n          fixedCount++;\n        }\n      }\n    }\n  }\n\n  if (fs.existsSync(dirPath)) {\n    processDirectory(dirPath);\n  }\n\n  return fixedCount;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸš€ å¼€å§‹ä¿®å¤verbatimModuleSyntaxå¯¼è‡´çš„import typeé—®é¢˜...\\n');\n\n  const startTime = Date.now();\n\n  // ä¿®å¤srcç›®å½•\n  console.log('ğŸ“ å¤„ç† src ç›®å½•...');\n  const srcFixedCount = fixImportTypeInDirectory('./src');\n\n  const totalFixed = srcFixedCount;\n  const duration = Date.now() - startTime;\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${totalFixed}`);\n  console.log(`   è€—æ—¶: ${duration}ms`);\n\n  // è¿è¡ŒTypeScriptæ£€æŸ¥éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    const output = execSync('pnpm type-check 2>&1', { encoding: 'utf8' });\n    const errorCount = (output.match(/error TS/g) || []).length;\n    console.log(`âœ… TypeScriptæ£€æŸ¥å®Œæˆï¼Œå‰©ä½™é”™è¯¯: ${errorCount}ä¸ª`);\n  } catch (error) {\n    const errorOutput = error.stdout || error.stderr || '';\n    const errorCount = (errorOutput.match(/error TS/g) || []).length;\n    console.log(`âš ï¸ ä»æœ‰TypeScripté”™è¯¯: ${errorCount}ä¸ª`);\n\n    // æ˜¾ç¤ºå‰10ä¸ªé”™è¯¯\n    const errorLines = errorOutput.split('\\n').slice(0, 15);\n    console.log('å‰©ä½™é”™è¯¯ç¤ºä¾‹:');\n    errorLines.forEach((line) => {\n      if (line.trim() && line.includes('error TS')) {\n        console.log(`  ${line}`);\n      }\n    });\n  }\n\n  console.log('\\nğŸ¯ import typeä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\n// è¿è¡Œè„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixImportTypeInFile, fixImportTypeInDirectory };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-import-type.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":27,"column":21,"nodeType":"CallExpression","endLine":27,"endColumn":54},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":34,"column":27,"nodeType":"NewExpression","endLine":37,"endColumn":8},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":77,"column":7,"nodeType":"CallExpression","endLine":77,"endColumn":45},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":93,"column":19,"nodeType":"CallExpression","endLine":93,"endColumn":67},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":133,"column":9,"nodeType":"CallExpression","endLine":133,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤verbatimModuleSyntaxå¯¼è‡´çš„import typeé—®é¢˜\n * æ‰¹é‡è½¬æ¢éœ€è¦ä½¿ç”¨import typeçš„å¯¼å…¥è¯­å¥\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// éœ€è¦è½¬æ¢ä¸ºimport typeçš„ç±»å‹å¯¼å…¥æ¨¡å¼\nconst TYPE_IMPORTS = [\n  'Metadata',\n  'ImageProps',\n  'TestResults',\n  'NextRequest',\n  'NextResponse',\n  // æ·»åŠ æ›´å¤šéœ€è¦type-onlyå¯¼å…¥çš„ç±»å‹\n];\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„import typeé—®é¢˜\n */\nfunction fixImportTypeInFile(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n    let newContent = content;\n\n    // ä¿®å¤æ¯ä¸ªç±»å‹å¯¼å…¥\n    TYPE_IMPORTS.forEach((typeName) => {\n      // åŒ¹é… import { TypeName } from 'module' æ¨¡å¼\n      const importRegex = new RegExp(\n        `import\\\\s*{([^}]*\\\\b${typeName}\\\\b[^}]*)}\\\\s*from\\\\s*(['\"][^'\"]+['\"])`,\n        'g',\n      );\n\n      newContent = newContent.replace(importRegex, (match, imports, module) => {\n        // æ£€æŸ¥æ˜¯å¦å·²ç»æ˜¯type import\n        if (match.includes('import type')) {\n          return match;\n        }\n\n        // åˆ†ç¦»ç±»å‹å¯¼å…¥å’Œå€¼å¯¼å…¥\n        const importList = imports.split(',').map((imp) => imp.trim());\n        const typeImports = [];\n        const valueImports = [];\n\n        importList.forEach((imp) => {\n          if (TYPE_IMPORTS.some((type) => imp.includes(type))) {\n            typeImports.push(imp);\n          } else {\n            valueImports.push(imp);\n          }\n        });\n\n        let result = '';\n\n        // æ·»åŠ type import\n        if (typeImports.length > 0) {\n          result += `import type { ${typeImports.join(', ')} } from ${module};\\n`;\n          modified = true;\n        }\n\n        // æ·»åŠ value importï¼ˆå¦‚æœæœ‰ï¼‰\n        if (valueImports.length > 0) {\n          result += `import { ${valueImports.join(', ')} } from ${module};`;\n        }\n\n        return result || match;\n      });\n    });\n\n    // å¦‚æœæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œå†™å›æ–‡ä»¶\n    if (modified) {\n      fs.writeFileSync(filePath, newContent);\n      console.log(`âœ… ä¿®å¤: ${filePath}`);\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`âŒ ä¿®å¤å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\n/**\n * é€’å½’æ‰«æç›®å½•å¹¶ä¿®å¤æ–‡ä»¶\n */\nfunction fixImportTypeInDirectory(dirPath) {\n  const entries = fs.readdirSync(dirPath, { withFileTypes: true });\n  let fixedCount = 0;\n\n  entries.forEach((entry) => {\n    const fullPath = path.join(dirPath, entry.name);\n\n    if (entry.isDirectory()) {\n      // è·³è¿‡node_moduleså’Œ.nextç­‰ç›®å½•\n      if (!['node_modules', '.next', 'dist', 'build'].includes(entry.name)) {\n        fixedCount += fixImportTypeInDirectory(fullPath);\n      }\n    } else if (entry.isFile() && /\\.(ts|tsx)$/.test(entry.name)) {\n      if (fixImportTypeInFile(fullPath)) {\n        fixedCount++;\n      }\n    }\n  });\n\n  return fixedCount;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸš€ å¼€å§‹ä¿®å¤verbatimModuleSyntaxå¯¼è‡´çš„import typeé—®é¢˜...\\n');\n\n  const startTime = Date.now();\n\n  // ä¿®å¤srcç›®å½•\n  const srcFixedCount = fixImportTypeInDirectory('./src');\n\n  // ä¿®å¤appç›®å½•\n  const appFixedCount = fixImportTypeInDirectory('./src/app');\n\n  // ä¿®å¤æ ¹ç›®å½•çš„ç‰¹å®šæ–‡ä»¶\n  const rootFiles = ['mdx-components.tsx'];\n  let rootFixedCount = 0;\n\n  rootFiles.forEach((file) => {\n    if (fs.existsSync(file)) {\n      if (fixImportTypeInFile(file)) {\n        rootFixedCount++;\n      }\n    }\n  });\n\n  const totalFixed = srcFixedCount + appFixedCount + rootFixedCount;\n  const duration = Date.now() - startTime;\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${totalFixed}`);\n  console.log(`   è€—æ—¶: ${duration}ms`);\n\n  // è¿è¡ŒTypeScriptæ£€æŸ¥éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    execSync('pnpm type-check', { stdio: 'pipe' });\n    console.log('âœ… TypeScriptæ£€æŸ¥é€šè¿‡ï¼');\n  } catch (error) {\n    console.log('âš ï¸ ä»æœ‰TypeScripté”™è¯¯ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®å¤');\n    // æ˜¾ç¤ºå‰©ä½™é”™è¯¯çš„å‰10è¡Œ\n    const errorOutput =\n      error.stdout?.toString() || error.stderr?.toString() || '';\n    const errorLines = errorOutput.split('\\n').slice(0, 10);\n    console.log('å‰©ä½™é”™è¯¯ç¤ºä¾‹:');\n    errorLines.forEach((line) => {\n      if (line.trim()) {\n        console.log(`  ${line}`);\n      }\n    });\n  }\n\n  console.log('\\nğŸ¯ import typeä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\n// è¿è¡Œè„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixImportTypeInFile, fixImportTypeInDirectory };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-imports-simple.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":29,"column":21,"nodeType":"CallExpression","endLine":29,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":97,"column":7,"nodeType":"CallExpression","endLine":97,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * ç®€åŒ–ç‰ˆç›¸å¯¹è·¯å¾„å¯¼å…¥ä¿®å¤è„šæœ¬\n * ä½¿ç”¨æ›´ç›´æ¥çš„å­—ç¬¦ä¸²æ›¿æ¢æ–¹æ³•\n */\n\nimport { readFileSync, writeFileSync } from 'fs';\nimport { glob } from 'glob';\nimport path from 'path';\n\ninterface FixResult {\n  file: string;\n  changes: number;\n  errors: string[];\n}\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥\n */\nfunction fixFileImports(filePath: string): FixResult {\n  const result: FixResult = {\n    file: filePath,\n    changes: 0,\n    errors: [],\n  };\n\n  try {\n    const content = readFileSync(filePath, 'utf-8');\n    let newContent = content;\n    \n    // è·å–æ–‡ä»¶ç›¸å¯¹äºsrcç›®å½•çš„è·¯å¾„ä¿¡æ¯\n    const relativePath = path.relative('src', filePath);\n    const currentDir = path.dirname(relativePath);\n    \n    // è®¡ç®—éœ€è¦å›é€€çš„å±‚çº§æ•°\n    const levels = currentDir === '.' ? 0 : currentDir.split('/').length;\n    \n    // æ›¿æ¢ ../xxx æ ¼å¼çš„å¯¼å…¥\n    const parentImportRegex = /from\\s+['\"](\\.\\.\\/)([^'\"]+)['\"]/g;\n    newContent = newContent.replace(parentImportRegex, (match, prefix, importPath) => {\n      result.changes++;\n      // ç®€å•å¤„ç†ï¼šç›´æ¥æ›¿æ¢ä¸º@/è·¯å¾„\n      // å¯¹äº ../xxxï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å½“å‰æ–‡ä»¶ä½ç½®è®¡ç®—æ­£ç¡®çš„@/è·¯å¾„\n      if (levels === 1) {\n        // å½“å‰åœ¨srcçš„ç›´æ¥å­ç›®å½•ä¸­ï¼Œ../xxx åº”è¯¥æ˜¯ @/xxx\n        return `from '@/${importPath}'`;\n      } else if (levels === 2) {\n        // å½“å‰åœ¨srcçš„äºŒçº§å­ç›®å½•ä¸­ï¼Œ../xxx å¯èƒ½æŒ‡å‘ä¸Šä¸€çº§\n        const parentDir = path.dirname(currentDir);\n        return `from '@/${parentDir}/${importPath}'`;\n      } \n        // å¤æ‚æƒ…å†µï¼Œå°è¯•æ™ºèƒ½æ¨æ–­\n        return `from '@/${importPath}'`;\n      \n    });\n    \n    // æ›¿æ¢ ./xxx æ ¼å¼çš„å¯¼å…¥\n    const currentImportRegex = /from\\s+['\"](\\.\\/)([^'\"]+)['\"]/g;\n    newContent = newContent.replace(currentImportRegex, (match, prefix, importPath) => {\n      result.changes++;\n      // ./xxx åº”è¯¥æ˜¯ @/currentDir/xxx\n      if (currentDir === '.') {\n        return `from '@/${importPath}'`;\n      } \n        return `from '@/${currentDir}/${importPath}'`;\n      \n    });\n    \n    // å¤„ç†åŠ¨æ€å¯¼å…¥ import('./xxx') å’Œ import('../xxx')\n    const dynamicImportRegex = /import\\s*\\(\\s*['\"](\\.\\.\\?\\/[^'\"]+)['\"]\\s*\\)/g;\n    newContent = newContent.replace(dynamicImportRegex, (match, importPath) => {\n      result.changes++;\n      if (importPath.startsWith('../')) {\n        const cleanPath = importPath.substring(3); // ç§»é™¤ ../\n        if (levels === 1) {\n          return `import('@/${cleanPath}')`;\n        } else if (levels === 2) {\n          const parentDir = path.dirname(currentDir);\n          return `import('@/${parentDir}/${cleanPath}')`;\n        } \n          return `import('@/${cleanPath}')`;\n        \n      } else if (importPath.startsWith('./')) {\n        const cleanPath = importPath.substring(2); // ç§»é™¤ ./\n        if (currentDir === '.') {\n          return `import('@/${cleanPath}')`;\n        } \n          return `import('@/${currentDir}/${cleanPath}')`;\n        \n      }\n      return match;\n    });\n    \n    // å¦‚æœæœ‰å˜æ›´ï¼Œå†™å›æ–‡ä»¶\n    if (result.changes > 0) {\n      writeFileSync(filePath, newContent, 'utf-8');\n    }\n    \n  } catch (error) {\n    result.errors.push(`å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™: ${error}`);\n  }\n  \n  return result;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  console.log('ğŸ”§ å¼€å§‹ç®€åŒ–ç‰ˆç›¸å¯¹è·¯å¾„å¯¼å…¥ä¿®å¤...');\n  \n  // æŸ¥æ‰¾æ‰€æœ‰éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼ˆæ’é™¤æµ‹è¯•æ–‡ä»¶ï¼‰\n  const files = await glob('src/**/*.{ts,tsx}', {\n    ignore: [\n      'src/**/*.test.{ts,tsx}',\n      'src/**/__tests__/**',\n      'src/test/**',\n      'src/testing/**',\n    ],\n  });\n  \n  console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦å¤„ç†`);\n  \n  let totalChanges = 0;\n  let processedFiles = 0;\n  const errors: string[] = [];\n  \n  // å¤„ç†æ¯ä¸ªæ–‡ä»¶\n  for (const file of files) {\n    const result = fixFileImports(file);\n    \n    if (result.changes > 0) {\n      console.log(`âœ… ${file}: ${result.changes} ä¸ªå¯¼å…¥å·²ä¿®å¤`);\n      processedFiles++;\n      totalChanges += result.changes;\n    }\n    \n    if (result.errors.length > 0) {\n      errors.push(...result.errors);\n    }\n  }\n  \n  // è¾“å‡ºç»Ÿè®¡ä¿¡æ¯\n  console.log('\\nğŸ“Š ä¿®å¤ç»Ÿè®¡:');\n  console.log(`- æ‰«ææ–‡ä»¶æ•°: ${files.length}`);\n  console.log(`- ä¿®æ”¹æ–‡ä»¶æ•°: ${processedFiles}`);\n  console.log(`- ä¿®å¤å¯¼å…¥æ•°: ${totalChanges}`);\n  \n  if (errors.length > 0) {\n    console.log('\\nâŒ é”™è¯¯ä¿¡æ¯:');\n    errors.forEach((error) => console.log(`  ${error}`));\n  }\n  \n  console.log('\\nâœ¨ ç›¸å¯¹è·¯å¾„å¯¼å…¥ä¿®å¤å®Œæˆï¼');\n  console.log('ğŸ’¡ å»ºè®®è¿è¡Œ pnpm lint:check éªŒè¯ä¿®å¤æ•ˆæœ');\n}\n\n// æ‰§è¡Œä¸»å‡½æ•°\nmain().catch((error) => {\n  console.error('âŒ è„šæœ¬æ‰§è¡Œå¤±è´¥:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-missing-constants-enhanced.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":104,"column":21,"nodeType":"CallExpression","endLine":104,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":108,"column":22,"nodeType":"CallExpression","endLine":108,"endColumn":43},{"ruleId":"require-await","severity":1,"message":"Async method 'processFile' has no 'await' expression.","line":128,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":128,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2925,2931],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":130,"column":23,"nodeType":"CallExpression","endLine":130,"endColumn":56},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":148,"column":7,"nodeType":"CallExpression","endLine":148,"endColumn":55},{"ruleId":"no-unused-vars","severity":1,"message":"'source' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"source"},"fix":{"range":[3985,3993],"text":""},"desc":"Remove unused variable 'source'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'source' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":33},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":169,"column":23,"nodeType":"NewExpression","endLine":169,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":200,"column":20,"nodeType":"MemberExpression","endLine":200,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":230,"column":15,"nodeType":"MemberExpression","endLine":230,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":230,"column":46,"nodeType":"MemberExpression","endLine":230,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * å¢å¼ºç‰ˆç¼ºå¤±å¸¸é‡ä¿®å¤è„šæœ¬\n * \n * åŠŸèƒ½ï¼š\n * 1. æ£€æµ‹ç¼ºå¤±çš„å¸¸é‡å¼•ç”¨\n * 2. è‡ªåŠ¨æ·»åŠ ç¼ºå¤±çš„å¯¼å…¥\n * 3. ç»Ÿè®¡ä¿®å¤ç»“æœ\n * \n * ä½¿ç”¨æ–¹æ³•ï¼š\n * node scripts/fix-missing-constants-enhanced.js\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// å¸¸é‡æ˜ å°„è¡¨ - æ ¹æ®å½“å‰å¸¸é‡ç³»ç»Ÿå®šä¹‰\nconst CONSTANT_MAPPINGS = {\n  // åŸºç¡€æ•°å€¼\n  'COUNT_PAIR': '@/constants',\n  'COUNT_TRIPLE': '@/constants', \n  'COUNT_QUAD': '@/constants',\n  'COUNT_FIVE': '@/constants',\n  'COUNT_TEN': '@/constants',\n  \n  // ç™¾åˆ†æ¯”\n  'PERCENTAGE_FULL': '@/constants',\n  'PERCENTAGE_HALF': '@/constants',\n  \n  // æ—¶é—´ç›¸å…³\n  'SECONDS_PER_MINUTE': '@/constants',\n  'MINUTES_PER_HOUR': '@/constants',\n  'HOURS_PER_DAY': '@/constants',\n  'DAYS_PER_WEEK': '@/constants',\n  'FIVE_SECONDS_MS': '@/constants',\n  'TEN_SECONDS_MS': '@/constants',\n  'THIRTY_SECONDS_MS': '@/constants',\n  'THREE_SECONDS_MS': '@/constants',\n  'MINUTE_MS': '@/constants',\n  \n  // é­”æ³•æ•°å­—\n  'MAGIC_0_1': '@/constants',\n  'MAGIC_0_25': '@/constants',\n  'MAGIC_0_8': '@/constants',\n  'MAGIC_0_95': '@/constants',\n  'MAGIC_0_99': '@/constants',\n  'MAGIC_6': '@/constants',\n  'MAGIC_8': '@/constants',\n  'MAGIC_9': '@/constants',\n  'MAGIC_20': '@/constants',\n  'MAGIC_36': '@/constants',\n  'MAGIC_72': '@/constants',\n  'MAGIC_75': '@/constants',\n  'MAGIC_90': '@/constants',\n  'MAGIC_95': '@/constants',\n  'MAGIC_99': '@/constants',\n  'MAGIC_256': '@/constants',\n  'MAGIC_300000': '@/constants',\n  'MAGIC_429': '@/constants',\n  'MAGIC_600': '@/constants',\n  'MAGIC_2000': '@/constants',\n  'MAGIC_2500': '@/constants',\n  'MAGIC_4000': '@/constants',\n  'MAGIC_4096': '@/constants',\n  'MAGIC_10000': '@/constants',\n  \n  // æµ‹è¯•ç›¸å…³\n  'TEST_BASE_NUMBERS': '@/constants'\n};\n\nclass MissingConstantsFixer {\n  constructor() {\n    this.stats = {\n      filesProcessed: 0,\n      constantsAdded: 0,\n      errors: 0\n    };\n  }\n\n  async run() {\n    console.log('ğŸ”§ å¼€å§‹ä¿®å¤ç¼ºå¤±å¸¸é‡å¯¼å…¥...\\n');\n    \n    try {\n      const files = this.getFilesToProcess();\n      console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦å¤„ç†\\n`);\n      \n      for (const file of files) {\n        await this.processFile(file);\n      }\n      \n      this.printStats();\n      \n    } catch (error) {\n      console.error('âŒ æ‰§è¡Œå¤±è´¥:', error.message);\n      process.exit(1);\n    }\n  }\n\n  getFilesToProcess() {\n    const files = [];\n    \n    const walkDir = (dir) => {\n      const items = fs.readdirSync(dir);\n      \n      for (const item of items) {\n        const fullPath = path.join(dir, item);\n        const stat = fs.statSync(fullPath);\n        \n        if (stat.isDirectory()) {\n          if (!item.startsWith('.') && item !== 'node_modules' && !item.includes('test')) {\n            walkDir(fullPath);\n          }\n        } else if (stat.isFile()) {\n          if ((item.endsWith('.ts') || item.endsWith('.tsx')) && \n              !item.endsWith('.d.ts') && \n              !item.includes('.test.')) {\n            files.push(fullPath);\n          }\n        }\n      }\n    };\n    \n    walkDir('src');\n    return files;\n  }\n\n  async processFile(filePath) {\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      \n      // æŸ¥æ‰¾ç¼ºå¤±çš„å¸¸é‡\n      const missingConstants = this.findMissingConstants(content);\n      \n      if (missingConstants.length === 0) {\n        return;\n      }\n      \n      this.stats.filesProcessed++;\n      \n      console.log(`ğŸ” å¤„ç†æ–‡ä»¶: ${filePath}`);\n      console.log(`   å‘ç° ${missingConstants.length} ä¸ªç¼ºå¤±å¸¸é‡: ${missingConstants.join(', ')}`);\n      \n      // æ·»åŠ ç¼ºå¤±çš„å¯¼å…¥\n      const fixedContent = this.addMissingImports(content, missingConstants);\n      \n      // å†™å…¥ä¿®å¤åçš„å†…å®¹\n      fs.writeFileSync(filePath, fixedContent, 'utf8');\n      \n      this.stats.constantsAdded += missingConstants.length;\n      console.log(`   âœ… å·²ä¿®å¤\\n`);\n      \n    } catch (error) {\n      this.stats.errors++;\n      console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    }\n  }\n\n  findMissingConstants(content) {\n    const missingConstants = [];\n    \n    // è·å–å·²å¯¼å…¥çš„å¸¸é‡\n    const importedConstants = this.getImportedConstants(content);\n    \n    // æŸ¥æ‰¾ä½¿ç”¨ä½†æœªå¯¼å…¥çš„å¸¸é‡\n    for (const [constant, source] of Object.entries(CONSTANT_MAPPINGS)) {\n      if (!importedConstants.has(constant)) {\n        // æ£€æŸ¥æ˜¯å¦åœ¨ä»£ç ä¸­ä½¿ç”¨äº†è¿™ä¸ªå¸¸é‡\n        const regex = new RegExp(`\\\\b${constant}\\\\b`);\n        if (regex.test(content)) {\n          missingConstants.push(constant);\n        }\n      }\n    }\n    \n    return missingConstants;\n  }\n\n  getImportedConstants(content) {\n    const importedConstants = new Set();\n    const importRegex = /import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"][^'\"]+['\"];?/g;\n    \n    let match;\n    while ((match = importRegex.exec(content)) !== null) {\n      const imports = match[1].split(',').map(imp => imp.trim());\n      imports.forEach(imp => importedConstants.add(imp));\n    }\n    \n    return importedConstants;\n  }\n\n  addMissingImports(content, missingConstants) {\n    const lines = content.split('\\n');\n    \n    // æŸ¥æ‰¾æœ€åä¸€ä¸ª@/constantså¯¼å…¥è¡Œ\n    let lastImportIndex = -1;\n    let existingConstantsImport = null;\n    \n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      if (line.includes(\"from '@/constants'\")) {\n        lastImportIndex = i;\n        const match = line.match(/import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*'@\\/constants'/);\n        if (match) {\n          existingConstantsImport = {\n            index: i,\n            imports: match[1].split(',').map(imp => imp.trim())\n          };\n        }\n      }\n    }\n    \n    if (existingConstantsImport) {\n      // åˆå¹¶åˆ°ç°æœ‰çš„å¯¼å…¥ä¸­\n      const allImports = [...existingConstantsImport.imports, ...missingConstants];\n      const uniqueImports = [...new Set(allImports)].sort();\n      const newImportLine = `import { ${uniqueImports.join(', ')} } from '@/constants';`;\n      lines[existingConstantsImport.index] = newImportLine;\n    } else {\n      // åˆ›å»ºæ–°çš„å¯¼å…¥è¡Œ\n      const newImportLine = `import { ${missingConstants.join(', ')} } from '@/constants';`;\n      \n      if (lastImportIndex >= 0) {\n        // åœ¨æœ€åä¸€ä¸ªå¯¼å…¥åæ·»åŠ \n        lines.splice(lastImportIndex + 1, 0, newImportLine);\n      } else {\n        // åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼ˆåœ¨'use client'æˆ–å…¶ä»–æŒ‡ä»¤åï¼‰\n        let insertIndex = 0;\n        for (let i = 0; i < lines.length; i++) {\n          if (lines[i].startsWith(\"'use\") || lines[i].startsWith('\"use')) {\n            insertIndex = i + 1;\n            break;\n          }\n        }\n        lines.splice(insertIndex, 0, '', newImportLine);\n      }\n    }\n    \n    return lines.join('\\n');\n  }\n\n  printStats() {\n    console.log('\\nğŸ“Š å¤„ç†ç»Ÿè®¡:');\n    console.log(`   å¤„ç†æ–‡ä»¶æ•°: ${this.stats.filesProcessed}`);\n    console.log(`   æ·»åŠ å¸¸é‡æ•°: ${this.stats.constantsAdded}`);\n    console.log(`   é”™è¯¯æ•°: ${this.stats.errors}`);\n    \n    if (this.stats.errors === 0) {\n      console.log('\\nâœ… ç¼ºå¤±å¸¸é‡ä¿®å¤å®Œæˆï¼');\n    } else {\n      console.log('\\nâš ï¸  éƒ¨åˆ†æ–‡ä»¶å¤„ç†å¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯');\n    }\n  }\n}\n\n// æ‰§è¡Œè„šæœ¬\nif (require.main === module) {\n  const fixer = new MissingConstantsFixer();\n  fixer.run().catch(console.error);\n}\n\nmodule.exports = MissingConstantsFixer;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-missing-constants.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[107,136],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":35,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":35,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * ä¿®å¤ç¼ºå¤±çš„é­”æ³•æ•°å­—å¸¸é‡\n * - æ”¶é›†æ‰€æœ‰ä½¿ç”¨çš„MAGIC_å¸¸é‡\n * - å°†å®ƒä»¬æ·»åŠ åˆ°å¸¸é‡æ–‡ä»¶ä¸­\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nfunction findAllMagicConstants() {\n  try {\n    const result = execSync(\n      'grep -r \"MAGIC_[0-9]\" src/ --include=\"*.ts\" --include=\"*.tsx\" -o',\n      {\n        encoding: 'utf8',\n        shell: true,\n      },\n    );\n\n    const constants = new Set();\n    const lines = result.trim().split('\\n');\n\n    for (const line of lines) {\n      const match = line.match(/MAGIC_([0-9_]+)/);\n      if (match) {\n        const constantName = match[0];\n        const value = match[1].replace(/_/g, '.');\n        constants.add({ name: constantName, value: value });\n      }\n    }\n\n    return Array.from(constants);\n  } catch (error) {\n    console.log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°MAGICå¸¸é‡');\n    return [];\n  }\n}\n\nfunction updateConstantsFile(magicConstants) {\n  const constantsPath = 'src/constants/magic-numbers.ts';\n\n  try {\n    let content = fs.readFileSync(constantsPath, 'utf8');\n\n    // ç”Ÿæˆç¼ºå¤±çš„å¸¸é‡\n    const missingConstants = [];\n\n    for (const { name, value } of magicConstants) {\n      if (!content.includes(`export const ${name}`)) {\n        missingConstants.push({ name, value });\n      }\n    }\n\n    if (missingConstants.length === 0) {\n      console.log('âœ… æ‰€æœ‰å¸¸é‡éƒ½å·²å­˜åœ¨');\n      return;\n    }\n\n    console.log(`ğŸ“Š å‘ç° ${missingConstants.length} ä¸ªç¼ºå¤±çš„å¸¸é‡`);\n\n    // æŒ‰æ•°å€¼å¤§å°æ’åº\n    missingConstants.sort((a, b) => {\n      const numA = parseFloat(a.value);\n      const numB = parseFloat(b.value);\n      return numA - numB;\n    });\n\n    // ç”Ÿæˆå¸¸é‡å®šä¹‰\n    const newConstants = `\n// è‡ªåŠ¨ç”Ÿæˆçš„ç¼ºå¤±å¸¸é‡\n${missingConstants\n  .map(({ name, value }) => {\n    const numValue = parseFloat(value);\n    if (isNaN(numValue)) {\n      return `export const ${name} = ${value}; // åŸå§‹å€¼: ${value}`;\n    } \n      return `export const ${name} = ${numValue};`;\n    \n  })\n  .join('\\n')}\n`;\n\n    // åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¸¸é‡\n    content += newConstants;\n    fs.writeFileSync(constantsPath, content, 'utf8');\n    console.log(\n      `âœ… æ·»åŠ äº† ${missingConstants.length} ä¸ªå¸¸é‡åˆ° ${constantsPath}`,\n    );\n\n    // æ˜¾ç¤ºæ·»åŠ çš„å¸¸é‡\n    console.log('\\nğŸ“‹ æ·»åŠ çš„å¸¸é‡:');\n    missingConstants.slice(0, 10).forEach(({ name, value }) => {\n      console.log(`  ${name} = ${value}`);\n    });\n    if (missingConstants.length > 10) {\n      console.log(`  ... è¿˜æœ‰ ${missingConstants.length - 10} ä¸ªå¸¸é‡`);\n    }\n  } catch (error) {\n    console.error(`âŒ æ›´æ–°å¸¸é‡æ–‡ä»¶å¤±è´¥:`, error.message);\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ ä¿®å¤ç¼ºå¤±çš„é­”æ³•æ•°å­—å¸¸é‡...');\n\n  const magicConstants = findAllMagicConstants();\n  if (magicConstants.length === 0) {\n    console.log('âœ… æ²¡æœ‰å‘ç°MAGICå¸¸é‡');\n    return;\n  }\n\n  console.log(`ğŸ“Š å‘ç° ${magicConstants.length} ä¸ªMAGICå¸¸é‡`);\n  updateConstantsFile(magicConstants);\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n  console.log('pnpm type-check');\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-missing-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[124,153],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":23,"column":8,"nodeType":"CallExpression","endLine":23,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":25,"column":19,"nodeType":"CallExpression","endLine":25,"endColumn":52},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":31,"column":19,"nodeType":"NewExpression","endLine":31,"endColumn":55},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":42,"column":19,"nodeType":"CallExpression","endLine":42,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":60,"column":17,"nodeType":"CallExpression","endLine":60,"endColumn":50},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":89,"column":3,"nodeType":"CallExpression","endLine":89,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * æ™ºèƒ½å¯¼å…¥ä¿®å¤å™¨\n * - åˆ†ææ–‡ä»¶ä¸­ä½¿ç”¨çš„é­”æ³•æ•°å­—å¸¸é‡\n * - è‡ªåŠ¨æ·»åŠ æˆ–æ›´æ–°å¯¼å…¥è¯­å¥\n * - ä½¿ç”¨Setå»é‡ç¡®ä¿å¯¼å…¥åˆ—è¡¨æ— é‡å¤\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// ä»magic-numbers.tsæå–æ‰€æœ‰å¯ç”¨å¸¸é‡\nfunction getAvailableConstants() {\n  const constantsFile = 'src/constants/magic-numbers.ts';\n  const content = fs.readFileSync(constantsFile, 'utf8');\n  const matches = content.match(/export const (\\w+)/g) || [];\n  return matches.map(match => match.replace('export const ', ''));\n}\n\n// åˆ†ææ–‡ä»¶ä¸­ä½¿ç”¨çš„å¸¸é‡\nfunction analyzeFileConstants(filePath) {\n  if (!fs.existsSync(filePath)) return [];\n  \n  const content = fs.readFileSync(filePath, 'utf8');\n  const availableConstants = getAvailableConstants();\n  const usedConstants = [];\n  \n  for (const constant of availableConstants) {\n    // æ£€æŸ¥å¸¸é‡æ˜¯å¦åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨ï¼ˆä½†ä¸æ˜¯åœ¨exportè¯­å¥ä¸­å®šä¹‰ï¼‰\n    const regex = new RegExp(`\\\\b${constant}\\\\b`, 'g');\n    if (regex.test(content) && !content.includes(`export const ${constant}`)) {\n      usedConstants.push(constant);\n    }\n  }\n  \n  return [...new Set(usedConstants)]; // å»é‡\n}\n\n// è·å–ç°æœ‰å¯¼å…¥\nfunction getExistingImports(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const importMatch = content.match(/import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"]/);\n  \n  if (!importMatch) return [];\n  \n  return importMatch[1]\n    .split(',')\n    .map(item => item.trim())\n    .filter(item => item.length > 0);\n}\n\n// æ›´æ–°å¯¼å…¥è¯­å¥\nfunction updateImports(filePath, usedConstants) {\n  if (usedConstants.length === 0) return false;\n  \n  const existingImports = getExistingImports(filePath);\n  const allConstants = [...new Set([...existingImports, ...usedConstants])].sort();\n  \n  let content = fs.readFileSync(filePath, 'utf8');\n  \n  // ç”Ÿæˆæ–°çš„å¯¼å…¥è¯­å¥\n  const newImportStatement = `import { ${allConstants.join(', ')} } from '@/constants/magic-numbers';`;\n  \n  // ç§»é™¤æ—§çš„å¯¼å…¥\n  content = content.replace(\n    /import\\s*{\\s*[^}]+\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"];?\\n?/g,\n    ''\n  );\n  \n  // æ·»åŠ æ–°çš„å¯¼å…¥\n  if (existingImports.length > 0 || content.includes('import')) {\n    // åœ¨ç¬¬ä¸€ä¸ªimportè¯­å¥åæ·»åŠ \n    const firstImportMatch = content.match(/^import .+;$/m);\n    if (firstImportMatch) {\n      content = content.replace(\n        firstImportMatch[0],\n        `${firstImportMatch[0]}\\n${newImportStatement}`\n      );\n    } else {\n      // åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ \n      content = `${newImportStatement}\\n\\n${content}`;\n    }\n  } else {\n    // åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ \n    content = `${newImportStatement}\\n\\n${content}`;\n  }\n  \n  fs.writeFileSync(filePath, content);\n  return true;\n}\n\n// è·å–éœ€è¦ä¿®å¤çš„æ–‡ä»¶åˆ—è¡¨\nfunction getFilesToFix() {\n  let output = '';\n  try {\n    output = execSync('pnpm run type-check 2>&1', {\n      encoding: 'utf8',\n      shell: true,\n      maxBuffer: 1024 * 1024 * 10,\n    });\n  } catch (error) {\n    output = error.stdout || error.output?.join('') || '';\n  }\n  \n  const files = new Set();\n  const lines = output.split('\\n');\n  \n  for (const line of lines) {\n    // åŒ¹é… \"Cannot find name\" é”™è¯¯çš„æ–‡ä»¶è·¯å¾„\n    const match = line.match(/^([^(]+)\\(\\d+,\\d+\\):\\s*error\\s+TS2304:\\s*Cannot find name/);\n    if (match) {\n      files.add(match[1]);\n    }\n  }\n  \n  return Array.from(files);\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nfunction main() {\n  console.log('ğŸ” åˆ†æéœ€è¦ä¿®å¤å¯¼å…¥çš„æ–‡ä»¶...');\n  \n  const filesToFix = getFilesToFix();\n  console.log(`ğŸ“Š å‘ç° ${filesToFix.length} ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤å¯¼å…¥`);\n  \n  if (filesToFix.length === 0) {\n    console.log('âœ… æ²¡æœ‰æ–‡ä»¶éœ€è¦ä¿®å¤å¯¼å…¥');\n    return;\n  }\n  \n  let fixedCount = 0;\n  \n  for (const filePath of filesToFix) {\n    try {\n      const usedConstants = analyzeFileConstants(filePath);\n      if (usedConstants.length > 0) {\n        const updated = updateImports(filePath, usedConstants);\n        if (updated) {\n          console.log(`âœ… ä¿®å¤: ${filePath} (${usedConstants.length}ä¸ªå¸¸é‡)`);\n          fixedCount++;\n        }\n      }\n    } catch (error) {\n      console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    }\n  }\n  \n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log(`ğŸ“Š æ€»è®¡ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n  \n  if (fixedCount > 0) {\n    console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n    console.log('pnpm run type-check');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-relative-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'SRC_DIR' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"SRC_DIR"},"fix":{"range":[219,266],"text":""},"desc":"Remove unused variable 'SRC_DIR'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SRC_DIR' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":14},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":23,"column":19,"nodeType":"CallExpression","endLine":23,"endColumn":45},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":27,"column":20,"nodeType":"CallExpression","endLine":27,"endColumn":41},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":51,"column":21,"nodeType":"CallExpression","endLine":51,"endColumn":54},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":53,"column":36,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":53,"endColumn":37,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1078,1079],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1078,1078],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":54,"column":36,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":54,"endColumn":37,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1136,1137],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1136,1136],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":56,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":56,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":100,"column":21,"nodeType":"CallExpression","endLine":100,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":105,"column":20,"nodeType":"MemberExpression","endLine":105,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":117,"column":11,"nodeType":"MemberExpression","endLine":117,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":133,"column":11,"nodeType":"MemberExpression","endLine":133,"endColumn":19},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":141,"column":7,"nodeType":"CallExpression","endLine":141,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":190,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":190,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":190,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":190,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * è‡ªåŠ¨ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜\n * å°†ç›¸å¯¹è·¯å¾„å¯¼å…¥è½¬æ¢ä¸º @/ ç»å¯¹è·¯å¾„å¯¼å…¥\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// é¡¹ç›®æ ¹ç›®å½•\nconst PROJECT_ROOT = process.cwd();\nconst SRC_DIR = path.join(PROJECT_ROOT, 'src');\n\n/**\n * é€’å½’è·å–æ‰€æœ‰ TypeScript æ–‡ä»¶\n */\nfunction getAllTSFiles(dir) {\n  const files = [];\n\n  function traverse(currentDir) {\n    const items = fs.readdirSync(currentDir);\n\n    for (const item of items) {\n      const fullPath = path.join(currentDir, item);\n      const stat = fs.statSync(fullPath);\n\n      if (stat.isDirectory()) {\n        // è·³è¿‡ node_modules å’Œå…¶ä»–ä¸éœ€è¦çš„ç›®å½•\n        if (\n          !['node_modules', '.next', '.git', 'dist', 'build'].includes(item)\n        ) {\n          traverse(fullPath);\n        }\n      } else if (item.match(/\\.(ts|tsx)$/)) {\n        files.push(fullPath);\n      }\n    }\n  }\n\n  traverse(dir);\n  return files;\n}\n\n/**\n * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åŒ…å«ç›¸å¯¹è·¯å¾„å¯¼å…¥\n */\nfunction hasRelativeImports(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    return (\n      /import\\s+.*?\\s+from\\s+['\"][.\\/]/m.test(content) ||\n      /export\\s+.*?\\s+from\\s+['\"][.\\/]/m.test(content)\n    );\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„\n */\nfunction convertRelativeToAbsolute(filePath, importPath) {\n  // å¦‚æœå·²ç»æ˜¯ç»å¯¹è·¯å¾„ï¼Œè·³è¿‡\n  if (importPath.startsWith('@/') || !importPath.startsWith('.')) {\n    return importPath;\n  }\n\n  // è·å–æ–‡ä»¶æ‰€åœ¨ç›®å½•\n  const fileDir = path.dirname(filePath);\n\n  // è§£æç›¸å¯¹è·¯å¾„\n  const absolutePath = path.resolve(fileDir, importPath);\n\n  // æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•å†…\n  if (!absolutePath.startsWith(PROJECT_ROOT)) {\n    console.warn(`  è­¦å‘Š: è·¯å¾„è¶…å‡ºé¡¹ç›®èŒƒå›´ ${importPath} -> ${absolutePath}`);\n    return importPath; // ä¿æŒåŸæ ·\n  }\n\n  // è½¬æ¢ä¸ºç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„\n  let relativePath = path.relative(PROJECT_ROOT, absolutePath);\n\n  // å¦‚æœè·¯å¾„ä¸åœ¨ src ç›®å½•å†…ï¼Œä½¿ç”¨ @/../ å‰ç¼€\n  if (!relativePath.startsWith('src/')) {\n    return `@/../${relativePath.replace(/\\\\/g, '/')}`;\n  }\n\n  // ç§»é™¤ src/ å‰ç¼€å¹¶è½¬æ¢ä¸º @/ è·¯å¾„\n  relativePath = relativePath.substring(4); // ç§»é™¤ 'src/'\n  return `@/${relativePath.replace(/\\\\/g, '/')}`;\n}\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥\n */\nfunction fixFileImports(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    const lines = content.split('\\n');\n    let modified = false;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // åŒ¹é… import è¯­å¥\n      const importMatch = line.match(\n        /^(\\s*import\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      );\n      if (importMatch) {\n        const [, prefix, importPath, suffix] = importMatch;\n\n        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n        if (importPath.startsWith('.')) {\n          const newPath = convertRelativeToAbsolute(filePath, importPath);\n          lines[i] = prefix + newPath + suffix;\n          modified = true;\n          console.log(`  ${importPath} -> ${newPath}`);\n        }\n      }\n\n      // åŒ¹é… export è¯­å¥\n      const exportMatch = line.match(\n        /^(\\s*export\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      );\n      if (exportMatch) {\n        const [, prefix, importPath, suffix] = exportMatch;\n\n        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n        if (importPath.startsWith('.')) {\n          const newPath = convertRelativeToAbsolute(filePath, importPath);\n          lines[i] = prefix + newPath + suffix;\n          modified = true;\n          console.log(`  ${importPath} -> ${newPath}`);\n        }\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, lines.join('\\n'));\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`ä¿®å¤æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜...\\n');\n\n  // è·å–æ‰€æœ‰ TypeScript æ–‡ä»¶\n  const allFiles = getAllTSFiles(PROJECT_ROOT);\n  console.log(`æ‰«æäº† ${allFiles.length} ä¸ª TypeScript æ–‡ä»¶`);\n\n  // ç­›é€‰å‡ºåŒ…å«ç›¸å¯¹è·¯å¾„å¯¼å…¥çš„æ–‡ä»¶\n  const filesToFix = allFiles.filter(hasRelativeImports);\n  console.log(`å‘ç° ${filesToFix.length} ä¸ªéœ€è¦ä¿®å¤çš„æ–‡ä»¶\\n`);\n\n  let fixedCount = 0;\n\n  for (const filePath of filesToFix) {\n    console.log(`ä¿®å¤æ–‡ä»¶: ${path.relative(PROJECT_ROOT, filePath)}`);\n\n    if (fixFileImports(filePath)) {\n      fixedCount++;\n    }\n\n    console.log('');\n  }\n\n  console.log(`âœ… ä¿®å¤å®Œæˆï¼å…±ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n\n  // è¿è¡Œ ESLint æ£€æŸ¥ä¿®å¤ç»“æœ\n  console.log('\\nğŸ” æ£€æŸ¥ä¿®å¤ç»“æœ...');\n  try {\n    const result = execSync(\n      'npm run lint:check 2>&1 | grep \"no-restricted-imports\" | wc -l',\n      {\n        encoding: 'utf8',\n      },\n    );\n    console.log(`å‰©ä½™ no-restricted-imports é”™è¯¯: ${result.trim()}`);\n  } catch (error) {\n    console.log('æ— æ³•æ£€æŸ¥ä¿®å¤ç»“æœ');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { convertRelativeToAbsolute, fixFileImports };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-relative-imports.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":40,"column":19,"nodeType":"CallExpression","endLine":40,"endColumn":50},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":87,"column":5,"nodeType":"CallExpression","endLine":87,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * æ‰¹é‡ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥è„šæœ¬\n * å°†æ‰€æœ‰ ../xxx å’Œ ./xxx å¯¼å…¥æ›¿æ¢ä¸º @/xxx ç»å¯¹è·¯å¾„å¯¼å…¥\n */\n\nimport { readFileSync, writeFileSync } from 'fs';\nimport { glob } from 'glob';\nimport path from 'path';\n\ninterface ImportReplacement {\n  file: string;\n  line: number;\n  original: string;\n  replacement: string;\n}\n\n/**\n * å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸º@/ç»å¯¹è·¯å¾„\n */\nfunction convertRelativeToAbsolute(relativePath: string, currentFilePath: string): string {\n  // è·å–å½“å‰æ–‡ä»¶ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„ç›®å½•è·¯å¾„\n  const currentDir = path.dirname(currentFilePath);\n\n  // è§£æç›¸å¯¹è·¯å¾„ï¼Œå¾—åˆ°ç»å¯¹è·¯å¾„\n  const absolutePath = path.resolve(currentDir, relativePath);\n\n  // å°†ç»å¯¹è·¯å¾„è½¬æ¢ä¸ºç›¸å¯¹äºsrcç›®å½•çš„è·¯å¾„\n  const srcRelativePath = path.relative('src', absolutePath);\n\n  // è¿”å›@/æ ¼å¼çš„è·¯å¾„ï¼Œç¡®ä¿ä½¿ç”¨æ­£æ–œæ \n  return `@/${srcRelativePath.replace(/\\\\/g, '/')}`;\n}\n\n/**\n * å¤„ç†å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥æ›¿æ¢\n */\nfunction processFile(filePath: string): ImportReplacement[] {\n  const content = readFileSync(filePath, 'utf-8');\n  const lines = content.split('\\n');\n  const replacements: ImportReplacement[] = [];\n\n  let hasChanges = false;\n  const newLines = lines.map((line, index) => {\n    // åŒ¹é…å„ç§å¯¼å…¥è¯­å¥çš„æ­£åˆ™è¡¨è¾¾å¼\n    const importPatterns = [\n      // import ... from './xxx' æˆ– '../xxx'\n      /^(\\s*import\\s+.*?\\s+from\\s+['\"])(\\.\\.?\\/[^'\"]+)(['\"])/,\n      // import('./xxx') æˆ– import('../xxx') åŠ¨æ€å¯¼å…¥\n      /^(\\s*.*?import\\s*\\(\\s*['\"])(\\.\\.?\\/[^'\"]+)(['\"])/,\n      // require('./xxx') æˆ– require('../xxx')\n      /^(\\s*.*?require\\s*\\(\\s*['\"])(\\.\\.?\\/[^'\"]+)(['\"])/,\n    ];\n\n    for (const pattern of importPatterns) {\n      const match = line.match(pattern);\n      if (match) {\n        const [, prefix, relativePath, suffix] = match;\n\n        // è·³è¿‡å·²ç»æ˜¯@/æ ¼å¼çš„å¯¼å…¥\n        if (relativePath.startsWith('@/')) {\n          continue;\n        }\n\n        // è½¬æ¢ä¸ºç»å¯¹è·¯å¾„\n        const absolutePath = convertRelativeToAbsolute(relativePath, filePath);\n        const newLine = `${prefix}${absolutePath}${suffix}`;\n\n        replacements.push({\n          file: filePath,\n          line: index + 1,\n          original: line.trim(),\n          replacement: newLine.trim(),\n        });\n\n        hasChanges = true;\n        return newLine;\n      }\n    }\n\n    return line;\n  });\n\n  // å¦‚æœæœ‰å˜æ›´ï¼Œå†™å›æ–‡ä»¶\n  if (hasChanges) {\n    writeFileSync(filePath, newLines.join('\\n'), 'utf-8');\n  }\n\n  return replacements;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  console.log('ğŸ”§ å¼€å§‹æ‰¹é‡ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥...');\n\n  // æŸ¥æ‰¾æ‰€æœ‰éœ€è¦å¤„ç†çš„æ–‡ä»¶\n  const files = await glob('src/**/*.{ts,tsx,js,jsx}', {\n    ignore: [\n      'src/**/*.test.{ts,tsx,js,jsx}',\n      'src/**/__tests__/**',\n      'src/test/**',\n      'src/testing/**',\n    ],\n  });\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦å¤„ç†`);\n\n  let totalReplacements = 0;\n  const allReplacements: ImportReplacement[] = [];\n\n  // å¤„ç†æ¯ä¸ªæ–‡ä»¶\n  for (const file of files) {\n    try {\n      const replacements = processFile(file);\n      if (replacements.length > 0) {\n        console.log(`âœ… ${file}: ${replacements.length} ä¸ªå¯¼å…¥å·²ä¿®å¤`);\n        allReplacements.push(...replacements);\n        totalReplacements += replacements.length;\n      }\n    } catch (error) {\n      console.error(`âŒ å¤„ç†æ–‡ä»¶ ${file} æ—¶å‡ºé”™:`, error);\n    }\n  }\n\n  // è¾“å‡ºç»Ÿè®¡ä¿¡æ¯\n  console.log('\\nğŸ“Š ä¿®å¤ç»Ÿè®¡:');\n  console.log(`- å¤„ç†æ–‡ä»¶æ•°: ${files.length}`);\n  console.log(`- ä¿®å¤å¯¼å…¥æ•°: ${totalReplacements}`);\n\n  if (allReplacements.length > 0) {\n    console.log('\\nğŸ“ ä¿®å¤è¯¦æƒ…:');\n    allReplacements.slice(0, 10).forEach((replacement) => {\n      console.log(`  ${replacement.file}:${replacement.line}`);\n      console.log(`    - ${replacement.original}`);\n      console.log(`    + ${replacement.replacement}`);\n    });\n\n    if (allReplacements.length > 10) {\n      console.log(`  ... è¿˜æœ‰ ${allReplacements.length - 10} ä¸ªä¿®å¤é¡¹`);\n    }\n  }\n\n  console.log('\\nâœ¨ ç›¸å¯¹è·¯å¾„å¯¼å…¥ä¿®å¤å®Œæˆï¼');\n  console.log('ğŸ’¡ å»ºè®®è¿è¡Œ pnpm lint:check éªŒè¯ä¿®å¤æ•ˆæœ');\n}\n\n// æ‰§è¡Œä¸»å‡½æ•°\nmain().catch((error) => {\n  console.error('âŒ è„šæœ¬æ‰§è¡Œå¤±è´¥:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-remaining-import-type.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[47,76],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":20,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":20,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":28,"column":8,"nodeType":"CallExpression","endLine":28,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":33,"column":17,"nodeType":"CallExpression","endLine":33,"endColumn":50},{"ruleId":"max-params","severity":2,"message":"Method 'replacement' has too many parameters (4). Maximum allowed is 3.","line":93,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":93,"endColumn":20},{"ruleId":"max-params","severity":2,"message":"Method 'replacement' has too many parameters (5). Maximum allowed is 3.","line":125,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":125,"endColumn":20},{"ruleId":"max-params","severity":2,"message":"Method 'replacement' has too many parameters (4). Maximum allowed is 3.","line":142,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":142,"endColumn":20},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":167,"column":27,"nodeType":"CallExpression","endLine":167,"endColumn":60},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":169,"column":5,"nodeType":"CallExpression","endLine":169,"endColumn":40},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":214,"column":9,"nodeType":"CallExpression","messageId":"missingRadix","endLine":214,"endColumn":35,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[6480,6480],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nconsole.log('ğŸš€ å¼€å§‹ä¿®å¤å‰©ä½™çš„import typeé—®é¢˜...');\n\n// è·å–æ‰€æœ‰æœ‰import typeé”™è¯¯çš„æ–‡ä»¶\nfunction getFilesWithImportTypeErrors() {\n  try {\n    const output = execSync(\n      'pnpm type-check 2>&1 | grep -E \"(TS1484|TS1361)\" | grep -o \"src/[^(]*\" | sort | uniq',\n      { encoding: 'utf8' },\n    );\n    return output\n      .trim()\n      .split('\\n')\n      .filter((file) => file.trim());\n  } catch (error) {\n    console.log('æ²¡æœ‰æ‰¾åˆ°import typeé”™è¯¯');\n    return [];\n  }\n}\n\n// ä¿®å¤å•ä¸ªæ–‡ä»¶çš„import typeé—®é¢˜\nfunction fixImportTypeInFile(filePath) {\n  if (!fs.existsSync(filePath)) {\n    console.log(`âš ï¸ æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return false;\n  }\n\n  let content = fs.readFileSync(filePath, 'utf8');\n  let modified = false;\n\n  // å¸¸è§çš„éœ€è¦ä¿®å¤çš„æ¨¡å¼\n  const fixes = [\n    // TS1484: éœ€è¦æ·»åŠ typeå…³é”®å­—çš„ç±»å‹å¯¼å…¥\n    {\n      pattern: /import \\{([^}]*)\\} from '([^']+)';/g,\n      replacement: (match, imports, from) => {\n        // æ£€æŸ¥æ˜¯å¦åŒ…å«éœ€è¦type-only importçš„ç±»å‹\n        const typeOnlyTypes = [\n          'QualityBenchmark',\n          'QualityComparison',\n          'QualityReport',\n          'TranslationManagerConfig',\n          'TranslationQualityCheck',\n          'ValidationReport',\n          'LocaleQualityReport',\n          'QualityIssue',\n          'QualityScore',\n          'TranslationSecurityConfig',\n          'SecurityReport',\n          'SecurityIssue',\n          'QualityCheckResult',\n          'QualityMetrics',\n          'TranslationQuality',\n          'QualityAnalysis',\n          'TranslationValidationConfig',\n          'ValidationError',\n          'ValidationResult',\n        ];\n\n        const importList = imports.split(',').map((imp) => imp.trim());\n        const typeImports = [];\n        const valueImports = [];\n\n        importList.forEach((imp) => {\n          if (typeOnlyTypes.some((type) => imp.includes(type))) {\n            typeImports.push(imp);\n          } else {\n            valueImports.push(imp);\n          }\n        });\n\n        let result = '';\n        if (typeImports.length > 0) {\n          result += `import type { ${typeImports.join(', ')} } from '${from}';`;\n        }\n        if (valueImports.length > 0) {\n          if (result) result += '\\n';\n          result += `import { ${valueImports.join(', ')} } from '${from}';`;\n        }\n\n        return result || match;\n      },\n    },\n    // STORAGE_KEYS åº”è¯¥æ˜¯å€¼å¯¼å…¥ï¼Œä¸æ˜¯ç±»å‹å¯¼å…¥\n    {\n      pattern:\n        /import type \\{([^}]*),\\s*STORAGE_KEYS,([^}]*)\\} from '([^']+)';/g,\n      replacement: (match, before, after, from) => {\n        const beforeClean = before.trim() ? `${before.trim()  },` : '';\n        const afterClean = after.trim() ? `,${  after.trim()}` : '';\n        return `import type {${beforeClean}${afterClean}} from '${from}';\\nimport { STORAGE_KEYS } from '${from}';`;\n      },\n    },\n    {\n      pattern: /import type \\{\\s*STORAGE_KEYS,([^}]*)\\} from '([^']+)';/g,\n      replacement: (match, after, from) => {\n        const afterClean = after.trim() ? after.trim() : '';\n        if (afterClean) {\n          return `import type {${afterClean}} from '${from}';\\nimport { STORAGE_KEYS } from '${from}';`;\n        } \n          return `import { STORAGE_KEYS } from '${from}';`;\n        \n      },\n    },\n    {\n      pattern: /import type \\{([^}]*),\\s*STORAGE_KEYS\\s*\\} from '([^']+)';/g,\n      replacement: (match, before, from) => {\n        const beforeClean = before.trim() ? before.trim() : '';\n        if (beforeClean) {\n          return `import type {${beforeClean}} from '${from}';\\nimport { STORAGE_KEYS } from '${from}';`;\n        } \n          return `import { STORAGE_KEYS } from '${from}';`;\n        \n      },\n    },\n    // å…¶ä»–å¸¸è§çš„å€¼å¯¼å…¥é”™è¯¯\n    {\n      pattern:\n        /import type \\{([^}]*),\\s*(QUALITY_BENCHMARKS|TRANSLATION_LIMITS|VALIDATION_RULES|STORAGE_CONSTANTS),([^}]*)\\} from '([^']+)';/g,\n      replacement: (match, before, constant, after, from) => {\n        const beforeClean = before.trim() ? `${before.trim()  },` : '';\n        const afterClean = after.trim() ? `,${  after.trim()}` : '';\n        return `import type {${beforeClean}${afterClean}} from '${from}';\\nimport { ${constant} } from '${from}';`;\n      },\n    },\n    // å•ç‹¬çš„å¸¸é‡å¯¼å…¥\n    {\n      pattern:\n        /import type \\{\\s*(STORAGE_CONSTANTS|QUALITY_BENCHMARKS|TRANSLATION_LIMITS|VALIDATION_RULES)\\s*\\} from '([^']+)';/g,\n      replacement: (match, constant, from) => {\n        return `import { ${constant} } from '${from}';`;\n      },\n    },\n    {\n      pattern:\n        /import type \\{([^}]*),\\s*(STORAGE_CONSTANTS|QUALITY_BENCHMARKS|TRANSLATION_LIMITS|VALIDATION_RULES)\\s*\\} from '([^']+)';/g,\n      replacement: (match, before, constant, from) => {\n        const beforeClean = before.trim() ? before.trim() : '';\n        if (beforeClean) {\n          return `import type {${beforeClean}} from '${from}';\\nimport { ${constant} } from '${from}';`;\n        } \n          return `import { ${constant} } from '${from}';`;\n        \n      },\n    },\n  ];\n\n  // åº”ç”¨ä¿®å¤\n  for (const fix of fixes) {\n    if (typeof fix.replacement === 'function') {\n      content = content.replace(fix.pattern, fix.replacement);\n    } else {\n      const newContent = content.replace(fix.pattern, fix.replacement);\n      if (newContent !== content) {\n        content = newContent;\n        modified = true;\n      }\n    }\n  }\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰ä¿®æ”¹\n  const originalContent = fs.readFileSync(filePath, 'utf8');\n  if (content !== originalContent) {\n    fs.writeFileSync(filePath, content);\n    modified = true;\n  }\n\n  return modified;\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nfunction main() {\n  const files = getFilesWithImportTypeErrors();\n\n  if (files.length === 0) {\n    console.log('âœ… æ²¡æœ‰æ‰¾åˆ°éœ€è¦ä¿®å¤çš„import typeé”™è¯¯');\n    return;\n  }\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤:`);\n  files.forEach((file) => console.log(`   - ${file}`));\n\n  let fixedCount = 0;\n\n  for (const file of files) {\n    if (fixImportTypeInFile(file)) {\n      console.log(`âœ… ä¿®å¤: ${file}`);\n      fixedCount++;\n    }\n  }\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${fixedCount}`);\n\n  // éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    const errorCount = execSync('pnpm type-check 2>&1 | grep -c \"error TS\"', {\n      encoding: 'utf8',\n    }).trim();\n    const importTypeErrors = execSync(\n      'pnpm type-check 2>&1 | grep -E \"(TS1484|TS1361)\" | wc -l',\n      { encoding: 'utf8' },\n    ).trim();\n\n    console.log(`æ€»é”™è¯¯æ•°: ${errorCount}`);\n    console.log(`å‰©ä½™import typeé”™è¯¯: ${importTypeErrors}`);\n\n    if (parseInt(importTypeErrors) > 0) {\n      console.log('\\nå‰©ä½™é”™è¯¯ç¤ºä¾‹:');\n      const examples = execSync(\n        'pnpm type-check 2>&1 | grep -E \"(TS1484|TS1361)\" | head -5',\n        { encoding: 'utf8' },\n      );\n      console.log(examples);\n    }\n  } catch (error) {\n    console.log('éªŒè¯æ—¶å‡ºé”™:', error.message);\n  }\n\n  console.log('\\nğŸ¯ æ‰¹é‡ä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-remaining-imports.js","messages":[{"ruleId":"max-statements","severity":1,"message":"Function 'fixFileImports' has too many statements (36). Maximum allowed is 35.","line":79,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":147,"endColumn":2},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":81,"column":21,"nodeType":"CallExpression","endLine":81,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":86,"column":20,"nodeType":"MemberExpression","endLine":86,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":98,"column":11,"nodeType":"MemberExpression","endLine":98,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":114,"column":11,"nodeType":"MemberExpression","endLine":114,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":130,"column":11,"nodeType":"MemberExpression","endLine":130,"endColumn":19},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":138,"column":7,"nodeType":"CallExpression","endLine":138,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":182,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":182,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤å‰©ä½™çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜\n * ä¸“é—¨å¤„ç† export { ... } from './...' è¯­æ³•\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// é¡¹ç›®æ ¹ç›®å½•\nconst PROJECT_ROOT = process.cwd();\n\n/**\n * è·å–æ‰€æœ‰æœ‰ no-restricted-imports é”™è¯¯çš„æ–‡ä»¶\n */\nfunction getFilesWithErrors() {\n  try {\n    const output = execSync('npm run lint:check 2>&1', { encoding: 'utf8' });\n    const lines = output.split('\\n');\n\n    const files = new Set();\n\n    for (const line of lines) {\n      if (line.includes('no-restricted-imports')) {\n        // æå–æ–‡ä»¶è·¯å¾„\n        const match = line.match(/^([^:]+):/);\n        if (match) {\n          files.add(match[1]);\n        }\n      }\n    }\n\n    return Array.from(files);\n  } catch (error) {\n    console.error('è·å–é”™è¯¯æ–‡ä»¶åˆ—è¡¨å¤±è´¥:', error.message);\n    return [];\n  }\n}\n\n/**\n * å°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„\n */\nfunction convertRelativeToAbsolute(filePath, importPath) {\n  // å¦‚æœå·²ç»æ˜¯ç»å¯¹è·¯å¾„ï¼Œè·³è¿‡\n  if (importPath.startsWith('@/') || !importPath.startsWith('.')) {\n    return importPath;\n  }\n\n  // è·å–æ–‡ä»¶æ‰€åœ¨ç›®å½•\n  const fileDir = path.dirname(filePath);\n\n  // è§£æç›¸å¯¹è·¯å¾„\n  const absolutePath = path.resolve(fileDir, importPath);\n\n  // æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•å†…\n  if (!absolutePath.startsWith(PROJECT_ROOT)) {\n    console.warn(`  è­¦å‘Š: è·¯å¾„è¶…å‡ºé¡¹ç›®èŒƒå›´ ${importPath} -> ${absolutePath}`);\n    return importPath; // ä¿æŒåŸæ ·\n  }\n\n  // è½¬æ¢ä¸ºç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„\n  let relativePath = path.relative(PROJECT_ROOT, absolutePath);\n\n  // å¦‚æœè·¯å¾„ä¸åœ¨ src ç›®å½•å†…ï¼Œä½¿ç”¨ @/../ å‰ç¼€\n  if (!relativePath.startsWith('src/')) {\n    return `@/../${relativePath.replace(/\\\\/g, '/')}`;\n  }\n\n  // ç§»é™¤ src/ å‰ç¼€å¹¶è½¬æ¢ä¸º @/ è·¯å¾„\n  relativePath = relativePath.substring(4); // ç§»é™¤ 'src/'\n  return `@/${relativePath.replace(/\\\\/g, '/')}`;\n}\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥\n */\nfunction fixFileImports(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    const lines = content.split('\\n');\n    let modified = false;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // åŒ¹é… import è¯­å¥\n      const importMatch = line.match(\n        /^(\\s*import\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      );\n      if (importMatch) {\n        const [, prefix, importPath, suffix] = importMatch;\n\n        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n        if (importPath.startsWith('.')) {\n          const newPath = convertRelativeToAbsolute(filePath, importPath);\n          lines[i] = prefix + newPath + suffix;\n          modified = true;\n          console.log(`  ${importPath} -> ${newPath}`);\n        }\n      }\n\n      // åŒ¹é… export è¯­å¥\n      const exportMatch = line.match(\n        /^(\\s*export\\s+.*?\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      );\n      if (exportMatch) {\n        const [, prefix, importPath, suffix] = exportMatch;\n\n        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n        if (importPath.startsWith('.')) {\n          const newPath = convertRelativeToAbsolute(filePath, importPath);\n          lines[i] = prefix + newPath + suffix;\n          modified = true;\n          console.log(`  ${importPath} -> ${newPath}`);\n        }\n      }\n\n      // åŒ¹é…å¤šè¡Œ export è¯­å¥ä¸­çš„ from è¡Œ\n      const multilineExportMatch = line.match(\n        /^(\\s*}\\s+from\\s+['\"])([^'\"]+)(['\"].*)/,\n      );\n      if (multilineExportMatch) {\n        const [, prefix, importPath, suffix] = multilineExportMatch;\n\n        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å¯¼å…¥\n        if (importPath.startsWith('.')) {\n          const newPath = convertRelativeToAbsolute(filePath, importPath);\n          lines[i] = prefix + newPath + suffix;\n          modified = true;\n          console.log(`  ${importPath} -> ${newPath}`);\n        }\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, lines.join('\\n'));\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`ä¿®å¤æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹ä¿®å¤å‰©ä½™çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜...\\n');\n\n  const filesToFix = getFilesWithErrors();\n  console.log(`å‘ç° ${filesToFix.length} ä¸ªæœ‰é”™è¯¯çš„æ–‡ä»¶\\n`);\n\n  let fixedCount = 0;\n\n  for (const filePath of filesToFix) {\n    console.log(`ä¿®å¤æ–‡ä»¶: ${path.relative(PROJECT_ROOT, filePath)}`);\n\n    if (fixFileImports(filePath)) {\n      fixedCount++;\n    }\n\n    console.log('');\n  }\n\n  console.log(`âœ… ä¿®å¤å®Œæˆï¼å…±ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n\n  // è¿è¡Œ ESLint æ£€æŸ¥ä¿®å¤ç»“æœ\n  console.log('\\nğŸ” æ£€æŸ¥ä¿®å¤ç»“æœ...');\n  try {\n    const result = execSync(\n      'npm run lint:check 2>&1 | grep \"no-restricted-imports\" | wc -l',\n      {\n        encoding: 'utf8',\n      },\n    );\n    console.log(`å‰©ä½™ no-restricted-imports é”™è¯¯: ${result.trim()}`);\n  } catch (error) {\n    console.log('æ— æ³•æ£€æŸ¥ä¿®å¤ç»“æœ');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { convertRelativeToAbsolute, fixFileImports };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-test-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[210,239],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":30,"column":21,"nodeType":"CallExpression","endLine":30,"endColumn":54},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":34,"column":46,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":34,"endColumn":47,"suggestions":[{"messageId":"removeEscape","fix":{"range":[948,949],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[948,948],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":41,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":41,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1234,1235],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1234,1234],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":48,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":48,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1529,1530],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1529,1529],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\/.","line":48,"column":49,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":48,"endColumn":50,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1539,1540],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1539,1539],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":58,"column":7,"nodeType":"CallExpression","endLine":58,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * ä¿®å¤æµ‹è¯•æ–‡ä»¶ä¸­é”™è¯¯çš„å¯¼å…¥è·¯å¾„\n * - å°† '@/app/[locale]/xxx/__tests__/page' ä¿®å¤ä¸º '@/app/[locale]/xxx/page'\n * - å°† '@/app/api/xxx/__tests__/route' ä¿®å¤ä¸º '@/app/api/xxx/route'\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nfunction findTestFiles() {\n  try {\n    const output = execSync(\n      'find . -name \"*.test.ts\" -o -name \"*.test.tsx\" -o -name \"*.spec.ts\" -o -name \"*.spec.tsx\"',\n      { encoding: 'utf8' },\n    );\n    return output\n      .trim()\n      .split('\\n')\n      .filter((f) => f && !f.includes('node_modules'));\n  } catch (error) {\n    console.error('Error finding test files:', error.message);\n    return [];\n  }\n}\n\nfunction fixImportPaths(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    let modified = false;\n\n    // ä¿®å¤æ¨¡å¼1: '@/app/[locale]/xxx/__tests__/page' -> '@/app/[locale]/xxx/page'\n    const pattern1 = /@\\/app\\/\\[locale\\]\\/([^\\/]+)\\/__tests__\\/page/g;\n    const newContent1 = content.replace(pattern1, (match, segment) => {\n      modified = true;\n      return `@/app/[locale]/${segment}/page`;\n    });\n\n    // ä¿®å¤æ¨¡å¼2: '@/app/api/xxx/__tests__/route' -> '@/app/api/xxx/route'\n    const pattern2 = /@\\/app\\/api\\/([^\\/]+)\\/__tests__\\/route/g;\n    const newContent2 = newContent1.replace(pattern2, (match, segment) => {\n      modified = true;\n      return `@/app/api/${segment}/route`;\n    });\n\n    // ä¿®å¤æ¨¡å¼3: '@/app/api/xxx/yyy/__tests__/route' -> '@/app/api/xxx/yyy/route'\n    const pattern3 = /@\\/app\\/api\\/([^\\/]+)\\/([^\\/]+)\\/__tests__\\/route/g;\n    const newContent3 = newContent2.replace(\n      pattern3,\n      (match, segment1, segment2) => {\n        modified = true;\n        return `@/app/api/${segment1}/${segment2}/route`;\n      },\n    );\n\n    if (modified) {\n      fs.writeFileSync(filePath, newContent3, 'utf8');\n      console.log(`âœ… ä¿®å¤: ${filePath}`);\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n    return false;\n  }\n}\n\nfunction main() {\n  console.log('ğŸ” æŸ¥æ‰¾æµ‹è¯•æ–‡ä»¶...');\n  const testFiles = findTestFiles();\n\n  if (testFiles.length === 0) {\n    console.log('æœªæ‰¾åˆ°æµ‹è¯•æ–‡ä»¶');\n    return;\n  }\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${testFiles.length} ä¸ªæµ‹è¯•æ–‡ä»¶`);\n\n  let fixedCount = 0;\n\n  for (const file of testFiles) {\n    if (fixImportPaths(file)) {\n      fixedCount++;\n    }\n  }\n\n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼`);\n  console.log(`ğŸ“Š æ€»è®¡ä¿®å¤ ${fixedCount} ä¸ªæ–‡ä»¶`);\n\n  if (fixedCount > 0) {\n    console.log('\\nğŸ’¡ å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¿®å¤æ•ˆæœï¼š');\n    console.log('pnpm type-check:tests');\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-test-relative-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[47,76],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":20,"column":8,"nodeType":"CallExpression","endLine":20,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":25,"column":19,"nodeType":"CallExpression","endLine":25,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":48,"column":5,"nodeType":"CallExpression","endLine":48,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * ä¿®å¤æµ‹è¯•æ–‡ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜\n */\n\nconst testFiles = [\n  'tests/e2e/homepage.spec.ts',\n  'tests/e2e/i18n.spec.ts', \n  'tests/e2e/navigation.spec.ts',\n  'tests/e2e/safe-navigation.spec.ts',\n  'tests/error-scenarios/error-handling-summary.test.ts',\n  'tests/error-scenarios/network-errors.test.ts'\n];\n\nfunction fixTestRelativeImports(filePath) {\n  if (!fs.existsSync(filePath)) {\n    console.log(`æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return;\n  }\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  let modifiedContent = content;\n  let changeCount = 0;\n\n  // ä¿®å¤ './test-environment-setup' å¯¼å…¥\n  modifiedContent = modifiedContent.replace(\n    /from\\s+['\"]\\.\\/test-environment-setup['\"]/g,\n    () => {\n      changeCount++;\n      return `from '@/tests/e2e/test-environment-setup'`;\n    }\n  );\n\n  // ä¿®å¤ './setup' å¯¼å…¥\n  modifiedContent = modifiedContent.replace(\n    /from\\s+['\"]\\.\\/setup['\"]/g,\n    () => {\n      changeCount++;\n      return `from '@/tests/error-scenarios/setup'`;\n    }\n  );\n\n  if (changeCount > 0) {\n    fs.writeFileSync(filePath, modifiedContent, 'utf8');\n    console.log(`âœ… ä¿®å¤ ${filePath}: ${changeCount} ä¸ªå¯¼å…¥è·¯å¾„`);\n  } else {\n    console.log(`â­ï¸  è·³è¿‡ ${filePath}: æ— éœ€ä¿®å¤`);\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹ä¿®å¤æµ‹è¯•æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥...\\n');\n  \n  let totalFixed = 0;\n  \n  testFiles.forEach(filePath => {\n    try {\n      fixTestRelativeImports(filePath);\n      totalFixed++;\n    } catch (error) {\n      console.error(`âŒ ä¿®å¤å¤±è´¥ ${filePath}:`, error.message);\n    }\n  });\n  \n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆ! å¤„ç†äº† ${totalFixed} ä¸ªæ–‡ä»¶`);\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixTestRelativeImports };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-ts1205-export-errors.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":17,"column":21,"nodeType":"CallExpression","endLine":17,"endColumn":56},{"ruleId":"max-statements","severity":1,"message":"Function 'fixExportStarInFile' has too many statements (40). Maximum allowed is 35.","line":60,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":160,"endColumn":2},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":62,"column":21,"nodeType":"CallExpression","endLine":62,"endColumn":54},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":87,"column":14,"nodeType":"CallExpression","endLine":87,"endColumn":41},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":95,"column":11,"nodeType":"CallExpression","endLine":95,"endColumn":38},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":121,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":123,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":126,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":128,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":131,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":137,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":139,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":145,"endColumn":12},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":151,"column":7,"nodeType":"CallExpression","endLine":151,"endColumn":53},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":169,"column":19,"nodeType":"CallExpression","endLine":169,"endColumn":46},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":173,"column":20,"nodeType":"CallExpression","endLine":173,"endColumn":41},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":197,"column":7,"nodeType":"CallExpression","endLine":197,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¿®å¤TS1205é‡æ–°å¯¼å‡ºé”™è¯¯\n * å°† export * from è½¬æ¢ä¸ºå…·ä½“çš„å‘½åå¯¼å‡º\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n/**\n * åˆ†ææ¨¡å—çš„å¯¼å‡ºå†…å®¹\n */\nfunction analyzeModuleExports(modulePath) {\n  try {\n    const content = fs.readFileSync(modulePath, 'utf8');\n    const exports = new Set();\n\n    // åŒ¹é… export { ... } from è¯­å¥\n    const namedExportRegex =\n      /export\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"][^'\"]+['\"]/g;\n    let match;\n    while ((match = namedExportRegex.exec(content)) !== null) {\n      const exportList = match[1].split(',').map((exp) => exp.trim());\n      exportList.forEach((exp) => {\n        // å¤„ç† as é‡å‘½å\n        const cleanExp = exp.split(' as ')[0].trim();\n        exports.add(cleanExp);\n      });\n    }\n\n    // åŒ¹é… export const/function/class/interface/type è¯­å¥\n    const directExportRegex =\n      /export\\s+(?:const|function|class|interface|type)\\s+(\\w+)/g;\n    while ((match = directExportRegex.exec(content)) !== null) {\n      exports.add(match[1]);\n    }\n\n    // åŒ¹é… export type { ... } è¯­å¥\n    const typeExportRegex = /export\\s+type\\s*{\\s*([^}]+)\\s*}/g;\n    while ((match = typeExportRegex.exec(content)) !== null) {\n      const typeList = match[1].split(',').map((exp) => exp.trim());\n      typeList.forEach((exp) => {\n        const cleanExp = exp.split(' as ')[0].trim();\n        exports.add(cleanExp);\n      });\n    }\n\n    return Array.from(exports);\n  } catch (error) {\n    console.warn(`æ— æ³•åˆ†ææ¨¡å— ${modulePath}: ${error.message}`);\n    return [];\n  }\n}\n\n/**\n * ä¿®å¤å•ä¸ªæ–‡ä»¶çš„export *é—®é¢˜\n */\nfunction fixExportStarInFile(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    let newContent = content;\n    let modified = false;\n\n    // åŒ¹é… export * from 'module' è¯­å¥\n    const exportStarRegex = /export\\s*\\*\\s*from\\s*['\"]([^'\"]+)['\"]/g;\n    const matches = [];\n    let match;\n\n    while ((match = exportStarRegex.exec(content)) !== null) {\n      matches.push({\n        fullMatch: match[0],\n        modulePath: match[1],\n      });\n    }\n\n    // å¤„ç†æ¯ä¸ª export * è¯­å¥\n    for (const matchInfo of matches) {\n      const { fullMatch, modulePath } = matchInfo;\n\n      // è§£æç›¸å¯¹è·¯å¾„\n      let resolvedPath;\n      if (modulePath.startsWith('./') || modulePath.startsWith('../')) {\n        resolvedPath = path.resolve(path.dirname(filePath), modulePath);\n        // å°è¯•æ·»åŠ .tsæ‰©å±•å\n        if (!fs.existsSync(resolvedPath) && !resolvedPath.endsWith('.ts')) {\n          resolvedPath += '.ts';\n        }\n      } else {\n        // è·³è¿‡å¤–éƒ¨æ¨¡å—\n        continue;\n      }\n\n      if (fs.existsSync(resolvedPath)) {\n        const exports = analyzeModuleExports(resolvedPath);\n\n        if (exports.length > 0) {\n          // å°†å¯¼å‡ºåˆ†ä¸ºç±»å‹å’Œå€¼\n          const typeExports = [];\n          const valueExports = [];\n\n          // ç®€å•çš„å¯å‘å¼åˆ†ç±»ï¼ˆå¯ä»¥æ ¹æ®éœ€è¦æ”¹è¿›ï¼‰\n          exports.forEach((exp) => {\n            if (\n              exp.includes('Type') ||\n              exp.includes('Interface') ||\n              exp.includes('Config') ||\n              exp.includes('Options') ||\n              (exp.startsWith('I') && exp[1] === exp[1].toUpperCase())\n            ) {\n              typeExports.push(exp);\n            } else {\n              valueExports.push(exp);\n            }\n          });\n\n          let replacement = '';\n\n          // æ·»åŠ ç±»å‹å¯¼å‡º\n          if (typeExports.length > 0) {\n            replacement += `export type { ${typeExports.join(', ')} } from '${modulePath}';\\n`;\n          }\n\n          // æ·»åŠ å€¼å¯¼å‡º\n          if (valueExports.length > 0) {\n            replacement += `export { ${valueExports.join(', ')} } from '${modulePath}';`;\n          }\n\n          // å¦‚æœæ²¡æœ‰åˆ†ç±»ï¼Œå…¨éƒ¨ä½œä¸ºå€¼å¯¼å‡º\n          if (\n            typeExports.length === 0 &&\n            valueExports.length === 0 &&\n            exports.length > 0\n          ) {\n            replacement = `export { ${exports.join(', ')} } from '${modulePath}';`;\n          }\n\n          if (replacement) {\n            newContent = newContent.replace(fullMatch, replacement);\n            modified = true;\n            console.log(\n              `  ä¿®å¤ ${filePath}: æ›¿æ¢ export * from '${modulePath}' -> ${exports.length}ä¸ªå…·ä½“å¯¼å‡º`,\n            );\n          }\n        }\n      }\n    }\n\n    if (modified) {\n      fs.writeFileSync(filePath, newContent, 'utf8');\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error(`å¤„ç†æ–‡ä»¶ ${filePath} æ—¶å‡ºé”™:`, error.message);\n    return false;\n  }\n}\n\n/**\n * é€’å½’å¤„ç†ç›®å½•ä¸­çš„æ‰€æœ‰TypeScriptæ–‡ä»¶\n */\nfunction fixExportStarInDirectory(dirPath) {\n  let fixedCount = 0;\n\n  function processDirectory(currentPath) {\n    const items = fs.readdirSync(currentPath);\n\n    for (const item of items) {\n      const fullPath = path.join(currentPath, item);\n      const stat = fs.statSync(fullPath);\n\n      if (stat.isDirectory()) {\n        // è·³è¿‡ä¸éœ€è¦å¤„ç†çš„ç›®å½•\n        if (\n          ![\n            'node_modules',\n            '.next',\n            '.git',\n            'dist',\n            'build',\n            'backups',\n          ].includes(item)\n        ) {\n          processDirectory(fullPath);\n        }\n      } else if (stat.isFile() && /\\.(ts|tsx)$/.test(item)) {\n        if (fixExportStarInFile(fullPath)) {\n          fixedCount++;\n        }\n      }\n    }\n  }\n\n  if (fs.existsSync(dirPath)) {\n    processDirectory(dirPath);\n  }\n\n  return fixedCount;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nfunction main() {\n  console.log('ğŸš€ å¼€å§‹ä¿®å¤TS1205é‡æ–°å¯¼å‡ºé”™è¯¯...\\n');\n\n  const startTime = Date.now();\n\n  // ä¿®å¤srcç›®å½•\n  console.log('ğŸ“ å¤„ç† src ç›®å½•...');\n  const srcFixedCount = fixExportStarInDirectory('./src');\n\n  const totalFixed = srcFixedCount;\n  const duration = Date.now() - startTime;\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${totalFixed}`);\n  console.log(`   è€—æ—¶: ${duration}ms`);\n\n  // è¿è¡ŒTypeScriptæ£€æŸ¥éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    const output = execSync('pnpm type-check 2>&1', { encoding: 'utf8' });\n    const errorCount = (output.match(/error TS/g) || []).length;\n    console.log(`âœ… TypeScriptæ£€æŸ¥å®Œæˆï¼Œå‰©ä½™é”™è¯¯: ${errorCount}ä¸ª`);\n  } catch (error) {\n    const errorOutput = error.stdout || error.stderr || '';\n    const errorCount = (errorOutput.match(/error TS/g) || []).length;\n    console.log(`âš ï¸ ä»æœ‰TypeScripté”™è¯¯: ${errorCount}ä¸ª`);\n\n    // æ˜¾ç¤ºTS1205ç›¸å…³é”™è¯¯\n    const errorLines = errorOutput.split('\\n');\n    const ts1205Errors = errorLines.filter((line) => line.includes('TS1205'));\n    if (ts1205Errors.length > 0) {\n      console.log('\\nå‰©ä½™TS1205é”™è¯¯:');\n      ts1205Errors.slice(0, 5).forEach((line) => {\n        console.log(`  ${line}`);\n      });\n    }\n  }\n\n  console.log('\\nğŸ¯ TS1205ä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\n// è¿è¡Œè„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixExportStarInFile, fixExportStarInDirectory };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-unused-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[47,76],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":26,"column":19,"nodeType":"CallExpression","messageId":"missingRadix","endLine":26,"endColumn":37,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[680,680],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":27,"column":21,"nodeType":"CallExpression","messageId":"missingRadix","endLine":27,"endColumn":39,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[720,720],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":35,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":35,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":17},{"ruleId":"max-statements","severity":1,"message":"Function 'fixUnusedImportsInFile' has too many statements (38). Maximum allowed is 35.","line":42,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":129,"endColumn":2},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":43,"column":8,"nodeType":"CallExpression","endLine":43,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":48,"column":19,"nodeType":"CallExpression","endLine":48,"endColumn":52},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":62,"column":23,"nodeType":"CallExpression","messageId":"missingRadix","endLine":62,"endColumn":40,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1524,1524],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":66,"column":20,"nodeType":"MemberExpression","endLine":66,"endColumn":36},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":76,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":105,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (6). Maximum allowed is 4.","line":83,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":94,"endColumn":14},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":114,"column":13,"nodeType":"MemberExpression","endLine":114,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'lines' is not defined.","line":123,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":123,"endColumn":29},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":124,"column":5,"nodeType":"CallExpression","endLine":124,"endColumn":43},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":180,"column":9,"nodeType":"CallExpression","messageId":"missingRadix","endLine":180,"endColumn":37,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[4808,4808],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nconsole.log('ğŸš€ å¼€å§‹ä¿®å¤æœªä½¿ç”¨çš„å¯¼å…¥å£°æ˜...');\n\n// è·å–æ‰€æœ‰TS6196é”™è¯¯ï¼ˆæœªä½¿ç”¨çš„å¯¼å…¥ï¼‰\nfunction getUnusedImportErrors() {\n  try {\n    const output = execSync('pnpm type-check 2>&1 | grep \"TS6196\"', {\n      encoding: 'utf8',\n    });\n    return output\n      .trim()\n      .split('\\n')\n      .filter((line) => line.trim())\n      .map((line) => {\n        const match = line.match(\n          /^([^(]+)\\((\\d+),(\\d+)\\): error TS6196: '([^']+)' is declared but never used\\./,\n        );\n        if (match) {\n          return {\n            file: match[1],\n            line: parseInt(match[2]),\n            column: parseInt(match[3]),\n            variable: match[4],\n            fullLine: line,\n          };\n        }\n        return null;\n      })\n      .filter(Boolean);\n  } catch (error) {\n    console.log('æ²¡æœ‰æ‰¾åˆ°æœªä½¿ç”¨çš„å¯¼å…¥é”™è¯¯');\n    return [];\n  }\n}\n\n// ä¿®å¤æ–‡ä»¶ä¸­çš„æœªä½¿ç”¨å¯¼å…¥\nfunction fixUnusedImportsInFile(filePath, errors) {\n  if (!fs.existsSync(filePath)) {\n    console.log(`âš ï¸ æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return false;\n  }\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  let modified = false;\n\n  // æŒ‰å˜é‡ååˆ†ç»„å¤„ç†\n  const variablesByLine = {};\n  errors.forEach((error) => {\n    if (!variablesByLine[error.line]) {\n      variablesByLine[error.line] = [];\n    }\n    variablesByLine[error.line].push(error.variable);\n  });\n\n  // å¤„ç†æ¯ä¸€è¡Œçš„å¯¼å…¥\n  for (const [lineNum, variables] of Object.entries(variablesByLine)) {\n    const lineIndex = parseInt(lineNum) - 1;\n    const lines = content.split('\\n');\n\n    if (lineIndex >= 0 && lineIndex < lines.length) {\n      const line = lines[lineIndex];\n\n      // æ£€æŸ¥æ˜¯å¦æ˜¯importè¯­å¥\n      if (line.trim().startsWith('import')) {\n        let newLine = line;\n\n        // å¤„ç†æ¯ä¸ªæœªä½¿ç”¨çš„å˜é‡\n        for (const variable of variables) {\n          // æ£€æŸ¥æ˜¯å¦æ˜¯èŠ±æ‹¬å·å¯¼å…¥ import { ... } from '...'\n          const braceMatch = newLine.match(/import\\s*\\{\\s*([^}]+)\\s*\\}\\s*from/);\n          if (braceMatch) {\n            const imports = braceMatch[1]\n              .split(',')\n              .map((imp) => imp.trim())\n              .filter((imp) => imp);\n            const filteredImports = imports.filter((imp) => imp !== variable);\n\n            if (filteredImports.length === 0) {\n              // å¦‚æœæ²¡æœ‰å‰©ä½™å¯¼å…¥ï¼Œåˆ é™¤æ•´è¡Œ\n              newLine = '';\n              console.log(`  âœ… åˆ é™¤ç©ºå¯¼å…¥è¡Œ: ${variable}`);\n            } else if (filteredImports.length < imports.length) {\n              // ç§»é™¤ç‰¹å®šçš„å¯¼å…¥\n              newLine = newLine.replace(\n                /\\{[^}]+\\}/,\n                `{ ${filteredImports.join(', ')} }`,\n              );\n              console.log(`  âœ… ä»å¯¼å…¥ä¸­ç§»é™¤: ${variable}`);\n            }\n          }\n          // æ£€æŸ¥æ˜¯å¦æ˜¯é»˜è®¤å¯¼å…¥ import Variable from '...'\n          else if (newLine.includes(`import ${variable} from`)) {\n            newLine = '';\n            console.log(`  âœ… åˆ é™¤æœªä½¿ç”¨çš„é»˜è®¤å¯¼å…¥: ${variable}`);\n          }\n          // æ£€æŸ¥æ˜¯å¦æ˜¯å‘½åç©ºé—´å¯¼å…¥ import * as Variable from '...'\n          else if (newLine.includes(`import * as ${variable} from`)) {\n            newLine = '';\n            console.log(`  âœ… åˆ é™¤æœªä½¿ç”¨çš„å‘½åç©ºé—´å¯¼å…¥: ${variable}`);\n          }\n        }\n\n        if (newLine !== line) {\n          if (newLine.trim() === '') {\n            // åˆ é™¤æ•´è¡Œ\n            lines.splice(lineIndex, 1);\n          } else {\n            // æ›´æ–°è¡Œå†…å®¹\n            lines[lineIndex] = newLine;\n          }\n          modified = true;\n        }\n      }\n    }\n  }\n\n  if (modified) {\n    const newContent = lines.join('\\n');\n    fs.writeFileSync(filePath, newContent);\n    return true;\n  }\n\n  return false;\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nfunction main() {\n  const errors = getUnusedImportErrors();\n\n  if (errors.length === 0) {\n    console.log('âœ… æ²¡æœ‰æ‰¾åˆ°éœ€è¦ä¿®å¤çš„æœªä½¿ç”¨å¯¼å…¥é”™è¯¯');\n    return;\n  }\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${errors.length} ä¸ªæœªä½¿ç”¨å¯¼å…¥é”™è¯¯`);\n\n  // æŒ‰æ–‡ä»¶åˆ†ç»„\n  const errorsByFile = {};\n  errors.forEach((error) => {\n    if (!errorsByFile[error.file]) {\n      errorsByFile[error.file] = [];\n    }\n    errorsByFile[error.file].push(error);\n  });\n\n  let fixedFiles = 0;\n  let totalFixed = 0;\n\n  for (const [file, fileErrors] of Object.entries(errorsByFile)) {\n    console.log(`\\nğŸ“„ å¤„ç†æ–‡ä»¶: ${file} (${fileErrors.length} ä¸ªé”™è¯¯)`);\n    if (fixUnusedImportsInFile(file, fileErrors)) {\n      fixedFiles++;\n      totalFixed += fileErrors.length;\n    }\n  }\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${fixedFiles}`);\n  console.log(`   ä¿®å¤é”™è¯¯æ•°: ${totalFixed}`);\n\n  // éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    const errorCount = execSync('pnpm type-check 2>&1 | grep -c \"error TS\"', {\n      encoding: 'utf8',\n    }).trim();\n    const unusedImportErrors = execSync(\n      'pnpm type-check 2>&1 | grep \"TS6196\" | wc -l',\n      { encoding: 'utf8' },\n    ).trim();\n\n    console.log(`æ€»é”™è¯¯æ•°: ${errorCount}`);\n    console.log(`å‰©ä½™æœªä½¿ç”¨å¯¼å…¥é”™è¯¯: ${unusedImportErrors}`);\n\n    if (parseInt(unusedImportErrors) > 0) {\n      console.log('\\nå‰©ä½™é”™è¯¯ç¤ºä¾‹:');\n      const examples = execSync(\n        'pnpm type-check 2>&1 | grep \"TS6196\" | head -5',\n        { encoding: 'utf8' },\n      );\n      console.log(examples);\n    }\n  } catch (error) {\n    console.log('éªŒè¯æ—¶å‡ºé”™:', error.message);\n  }\n\n  console.log('\\nğŸ¯ æœªä½¿ç”¨å¯¼å…¥ä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-unused-variables.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[47,76],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":27,"column":19,"nodeType":"CallExpression","messageId":"missingRadix","endLine":27,"endColumn":37,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[712,712],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":28,"column":21,"nodeType":"CallExpression","messageId":"missingRadix","endLine":28,"endColumn":39,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[752,752],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":37,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":37,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":17},{"ruleId":"max-statements","severity":1,"message":"Function 'fixUnusedVariableInFile' has too many statements (45). Maximum allowed is 35.","line":44,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":137,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Function 'fixUnusedVariableInFile' has a complexity of 21. Maximum allowed is 18.","line":44,"column":1,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":137,"endColumn":2},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":45,"column":8,"nodeType":"CallExpression","endLine":45,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":50,"column":19,"nodeType":"CallExpression","endLine":50,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":60,"column":20,"nodeType":"MemberExpression","endLine":60,"endColumn":36},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":74,"column":13,"nodeType":"NewExpression","endLine":74,"endColumn":44},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":77,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":83,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":78,"column":13,"nodeType":"MemberExpression","endLine":78,"endColumn":29},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":88,"column":13,"nodeType":"NewExpression","endLine":88,"endColumn":44},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":91,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":97,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":92,"column":13,"nodeType":"MemberExpression","endLine":92,"endColumn":29},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":107,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":123,"endColumn":14},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":120,"column":15,"nodeType":"MemberExpression","endLine":120,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":132,"column":5,"nodeType":"CallExpression","endLine":132,"endColumn":43},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":188,"column":9,"nodeType":"CallExpression","messageId":"missingRadix","endLine":188,"endColumn":31,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[5154,5154],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nconsole.log('ğŸš€ å¼€å§‹ä¿®å¤æœªä½¿ç”¨å˜é‡å’Œå£°æ˜é”™è¯¯...');\n\n// è·å–æ‰€æœ‰æœªä½¿ç”¨å˜é‡å’Œå£°æ˜é”™è¯¯\nfunction getUnusedVariableErrors() {\n  try {\n    const output = execSync(\n      'pnpm type-check 2>&1 | grep -E \"(TS6133|TS6196)\"',\n      { encoding: 'utf8' },\n    );\n    return output\n      .trim()\n      .split('\\n')\n      .filter((line) => line.trim())\n      .map((line) => {\n        const match = line.match(\n          /^([^(]+)\\((\\d+),(\\d+)\\): error (TS\\d+): '([^']+)' is declared but its value is never read\\./,\n        );\n        if (match) {\n          return {\n            file: match[1],\n            line: parseInt(match[2]),\n            column: parseInt(match[3]),\n            errorCode: match[4],\n            variable: match[5],\n            fullLine: line,\n          };\n        }\n        return null;\n      })\n      .filter(Boolean);\n  } catch (error) {\n    console.log('æ²¡æœ‰æ‰¾åˆ°æœªä½¿ç”¨å˜é‡é”™è¯¯');\n    return [];\n  }\n}\n\n// å®‰å…¨åœ°ä¿®å¤æœªä½¿ç”¨å˜é‡\nfunction fixUnusedVariableInFile(filePath, errors) {\n  if (!fs.existsSync(filePath)) {\n    console.log(`âš ï¸ æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return false;\n  }\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  let modified = false;\n\n  // æŒ‰è¡Œå·å€’åºå¤„ç†ï¼Œé¿å…è¡Œå·åç§»é—®é¢˜\n  const sortedErrors = errors.sort((a, b) => b.line - a.line);\n\n  for (const error of sortedErrors) {\n    const lineIndex = error.line - 1;\n    if (lineIndex >= 0 && lineIndex < lines.length) {\n      const line = lines[lineIndex];\n      const {variable} = error;\n\n      // å¤„ç†ä¸åŒç±»å‹çš„æœªä½¿ç”¨å˜é‡\n      if (error.errorCode === 'TS6133') {\n        // æœªä½¿ç”¨çš„å˜é‡\n        if (variable.startsWith('_')) {\n          // å·²ç»æ˜¯ä¸‹åˆ’çº¿å‰ç¼€ï¼Œè·³è¿‡\n          continue;\n        }\n\n        // ç‰¹æ®Šå¤„ç†ï¼šæµ‹è¯•æ–‡ä»¶ä¸­çš„å˜é‡å¯ä»¥æ·»åŠ ä¸‹åˆ’çº¿å‰ç¼€\n        if (filePath.includes('.test.') || filePath.includes('__tests__')) {\n          const newLine = line.replace(\n            new RegExp(`\\\\b${variable}\\\\b`),\n            `_${variable}`,\n          );\n          if (newLine !== line) {\n            lines[lineIndex] = newLine;\n            modified = true;\n            console.log(\n              `  âœ… æµ‹è¯•æ–‡ä»¶å˜é‡æ·»åŠ ä¸‹åˆ’çº¿å‰ç¼€: ${variable} -> _${variable}`,\n            );\n          }\n        }\n        // å¯¹äºéæµ‹è¯•æ–‡ä»¶ï¼Œå¦‚æœæ˜¯å‡½æ•°å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ·»åŠ ä¸‹åˆ’çº¿\n        else if (line.includes('(') && line.includes(')')) {\n          const newLine = line.replace(\n            new RegExp(`\\\\b${variable}\\\\b`),\n            `_${variable}`,\n          );\n          if (newLine !== line) {\n            lines[lineIndex] = newLine;\n            modified = true;\n            console.log(\n              `  âœ… å‡½æ•°å‚æ•°æ·»åŠ ä¸‹åˆ’çº¿å‰ç¼€: ${variable} -> _${variable}`,\n            );\n          }\n        }\n      } else if (error.errorCode === 'TS6196') {\n        // æœªä½¿ç”¨çš„å¯¼å…¥\n        // æ£€æŸ¥æ˜¯å¦æ˜¯å•ç‹¬çš„å¯¼å…¥è¡Œ\n        if (line.trim().startsWith('import') && line.includes(variable)) {\n          // å¦‚æœæ˜¯å•ç‹¬å¯¼å…¥ä¸”åªæœ‰è¿™ä¸€ä¸ªå˜é‡ï¼Œåˆ é™¤æ•´è¡Œ\n          const importMatch = line.match(/import\\s*\\{\\s*([^}]+)\\s*\\}/);\n          if (importMatch) {\n            const imports = importMatch[1].split(',').map((imp) => imp.trim());\n            if (imports.length === 1 && imports[0] === variable) {\n              // åˆ é™¤æ•´è¡Œå¯¼å…¥\n              lines.splice(lineIndex, 1);\n              modified = true;\n              console.log(`  âœ… åˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥è¡Œ: ${variable}`);\n              continue;\n            } else if (imports.length > 1) {\n              // ä»å¤šä¸ªå¯¼å…¥ä¸­ç§»é™¤è¿™ä¸ªå˜é‡\n              const newImports = imports.filter((imp) => imp !== variable);\n              const newLine = line.replace(\n                /\\{[^}]+\\}/,\n                `{ ${newImports.join(', ')} }`,\n              );\n              lines[lineIndex] = newLine;\n              modified = true;\n              console.log(`  âœ… ä»å¯¼å…¥ä¸­ç§»é™¤: ${variable}`);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (modified) {\n    const newContent = lines.join('\\n');\n    fs.writeFileSync(filePath, newContent);\n    return true;\n  }\n\n  return false;\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nfunction main() {\n  const errors = getUnusedVariableErrors();\n\n  if (errors.length === 0) {\n    console.log('âœ… æ²¡æœ‰æ‰¾åˆ°éœ€è¦ä¿®å¤çš„æœªä½¿ç”¨å˜é‡é”™è¯¯');\n    return;\n  }\n\n  console.log(`ğŸ“ æ‰¾åˆ° ${errors.length} ä¸ªæœªä½¿ç”¨å˜é‡é”™è¯¯`);\n\n  // æŒ‰æ–‡ä»¶åˆ†ç»„\n  const errorsByFile = {};\n  errors.forEach((error) => {\n    if (!errorsByFile[error.file]) {\n      errorsByFile[error.file] = [];\n    }\n    errorsByFile[error.file].push(error);\n  });\n\n  let fixedFiles = 0;\n  let totalFixed = 0;\n\n  for (const [file, fileErrors] of Object.entries(errorsByFile)) {\n    console.log(`\\nğŸ“„ å¤„ç†æ–‡ä»¶: ${file} (${fileErrors.length} ä¸ªé”™è¯¯)`);\n    if (fixUnusedVariableInFile(file, fileErrors)) {\n      fixedFiles++;\n      totalFixed += fileErrors.length;\n    }\n  }\n\n  console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡:`);\n  console.log(`   ä¿®å¤æ–‡ä»¶æ•°: ${fixedFiles}`);\n  console.log(`   ä¿®å¤é”™è¯¯æ•°: ${totalFixed}`);\n\n  // éªŒè¯ä¿®å¤æ•ˆæœ\n  console.log('\\nğŸ” éªŒè¯ä¿®å¤æ•ˆæœ...');\n  try {\n    const errorCount = execSync('pnpm type-check 2>&1 | grep -c \"error TS\"', {\n      encoding: 'utf8',\n    }).trim();\n    const unusedErrors = execSync(\n      'pnpm type-check 2>&1 | grep -E \"(TS6133|TS6196)\" | wc -l',\n      { encoding: 'utf8' },\n    ).trim();\n\n    console.log(`æ€»é”™è¯¯æ•°: ${errorCount}`);\n    console.log(`å‰©ä½™æœªä½¿ç”¨å˜é‡é”™è¯¯: ${unusedErrors}`);\n\n    if (parseInt(unusedErrors) > 0) {\n      console.log('\\nå‰©ä½™é”™è¯¯ç¤ºä¾‹:');\n      const examples = execSync(\n        'pnpm type-check 2>&1 | grep -E \"(TS6133|TS6196)\" | head -5',\n        { encoding: 'utf8' },\n      );\n      console.log(examples);\n    }\n  } catch (error) {\n    console.log('éªŒè¯æ—¶å‡ºé”™:', error.message);\n  }\n\n  console.log('\\nğŸ¯ æœªä½¿ç”¨å˜é‡ä¿®å¤ä»»åŠ¡å®Œæˆï¼');\n}\n\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/fix-whatsapp-relative-imports.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[47,76],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":26,"column":8,"nodeType":"CallExpression","endLine":26,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":31,"column":19,"nodeType":"CallExpression","endLine":31,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":86,"column":5,"nodeType":"CallExpression","endLine":86,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * ä¿®å¤WhatsAppç±»å‹æ–‡ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥é—®é¢˜\n * å°† './whatsapp-xxx' æ›¿æ¢ä¸º '@/types/whatsapp-xxx'\n */\n\nconst filesToFix = [\n  'src/types/whatsapp-service-types.ts',\n  'src/types/whatsapp-webhook-events.ts', \n  'src/types/whatsapp-webhook-types.ts',\n  'src/types/whatsapp-api-requests/api-types.ts',\n  'src/types/whatsapp-api-config.ts',\n  'src/types/whatsapp-webhook-utils.ts',\n  'src/types/__tests__/index.test.ts',\n  'src/types/whatsapp.ts',\n  'src/types/index.ts',\n  'src/types/whatsapp-service-interface.ts',\n  'src/types/whatsapp-webhook-utils/webhook-utils.ts'\n];\n\nfunction fixRelativeImports(filePath) {\n  if (!fs.existsSync(filePath)) {\n    console.log(`æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n    return;\n  }\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  let modifiedContent = content;\n  let changeCount = 0;\n\n  // ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥\n  // å°† './whatsapp-xxx' æ›¿æ¢ä¸º '@/types/whatsapp-xxx'\n  modifiedContent = modifiedContent.replace(\n    /from\\s+['\"]\\.\\/whatsapp-([^'\"]+)['\"]/g,\n    (match, moduleName) => {\n      changeCount++;\n      return `from '@/types/whatsapp-${moduleName}'`;\n    }\n  );\n\n  // ä¿®å¤ç›¸å¯¹è·¯å¾„å¯¼å…¥ - å¤„ç†å­ç›®å½•æƒ…å†µ\n  // å°† './whatsapp-xxx/yyy' æ›¿æ¢ä¸º '@/types/whatsapp-xxx/yyy'\n  modifiedContent = modifiedContent.replace(\n    /from\\s+['\"]\\.\\/whatsapp-([^'\"]+\\/[^'\"]+)['\"]/g,\n    (match, modulePath) => {\n      changeCount++;\n      return `from '@/types/whatsapp-${modulePath}'`;\n    }\n  );\n\n  // ä¿®å¤å…¶ä»–ç›¸å¯¹è·¯å¾„å¯¼å…¥\n  // å°† './interfaces' ç­‰æ›¿æ¢ä¸º '@/types/whatsapp-webhook-utils/interfaces'\n  if (filePath.includes('whatsapp-webhook-utils')) {\n    modifiedContent = modifiedContent.replace(\n      /from\\s+['\"]\\.\\/interfaces['\"]/g,\n      () => {\n        changeCount++;\n        return `from '@/types/whatsapp-webhook-utils/interfaces'`;\n      }\n    );\n    \n    modifiedContent = modifiedContent.replace(\n      /from\\s+['\"]\\.\\/functions['\"]/g,\n      () => {\n        changeCount++;\n        return `from '@/types/whatsapp-webhook-utils/functions'`;\n      }\n    );\n  }\n\n  // ä¿®å¤ä¸Šçº§ç›®å½•çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥\n  // å°† '../whatsapp-xxx' æ›¿æ¢ä¸º '@/types/whatsapp-xxx'\n  modifiedContent = modifiedContent.replace(\n    /from\\s+['\"]\\.\\.\\/whatsapp-([^'\"]+)['\"]/g,\n    (match, moduleName) => {\n      changeCount++;\n      return `from '@/types/whatsapp-${moduleName}'`;\n    }\n  );\n\n  if (changeCount > 0) {\n    fs.writeFileSync(filePath, modifiedContent, 'utf8');\n    console.log(`âœ… ä¿®å¤ ${filePath}: ${changeCount} ä¸ªå¯¼å…¥è·¯å¾„`);\n  } else {\n    console.log(`â­ï¸  è·³è¿‡ ${filePath}: æ— éœ€ä¿®å¤`);\n  }\n}\n\nfunction main() {\n  console.log('ğŸ”§ å¼€å§‹ä¿®å¤WhatsAppç±»å‹æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„å¯¼å…¥...\\n');\n  \n  let totalFixed = 0;\n  \n  filesToFix.forEach(filePath => {\n    try {\n      fixRelativeImports(filePath);\n      totalFixed++;\n    } catch (error) {\n      console.error(`âŒ ä¿®å¤å¤±è´¥ ${filePath}:`, error.message);\n    }\n  });\n  \n  console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆ! å¤„ç†äº† ${totalFixed} ä¸ªæ–‡ä»¶`);\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { fixRelativeImports };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/font-subset-implementation.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":37,"column":39,"nodeType":"CallExpression","endLine":37,"endColumn":77},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":43,"column":26,"nodeType":"CallExpression","endLine":43,"endColumn":66},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":123,"column":11,"nodeType":"MemberExpression","endLine":123,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":124,"column":15,"nodeType":"MemberExpression","endLine":124,"endColumn":23},{"ruleId":"no-multi-assign","severity":2,"message":"Unexpected chained assignment.","line":131,"column":17,"nodeType":"AssignmentExpression","messageId":"unexpectedChain","endLine":131,"endColumn":31},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":131,"column":23,"nodeType":"MemberExpression","endLine":131,"endColumn":31},{"ruleId":"require-await","severity":1,"message":"Async method 'runImplementation' has no 'await' expression.","line":334,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":334,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[7470,7476],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":354,"column":10,"nodeType":"CallExpression","endLine":354,"endColumn":34},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":355,"column":7,"nodeType":"CallExpression","endLine":355,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * å­—ä½“å­é›†åŒ–å®æ–½è„šæœ¬\n *\n * åŸºäºä¸­æ–‡å­—ç¬¦åˆ†æç»“æœï¼Œç”Ÿæˆå­—ä½“å­é›†åŒ–é…ç½®å’Œå®æ–½æŒ‡å—\n * æ”¯æŒPingFang SCå­—ä½“çš„å­é›†åŒ–å¤„ç†\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nclass FontSubsetImplementation {\n  constructor() {\n    this.config = {\n      sourceFont: 'PingFang SC',\n      targetFormats: ['woff2', 'woff'],\n      outputDir: 'public/fonts/subsets',\n      characterFile: 'reports/chinese-characters.txt',\n      analysisFile: 'reports/chinese-character-analysis.json',\n    };\n\n    this.results = {\n      subsetGenerated: false,\n      configUpdated: false,\n      fallbackOptimized: false,\n      cacheConfigured: false,\n    };\n  }\n\n  /**\n   * è¯»å–å­—ç¬¦åˆ†æç»“æœ\n   */\n  loadAnalysisResults() {\n    try {\n      const analysisPath = path.join(process.cwd(), this.config.analysisFile);\n      const analysisData = JSON.parse(fs.readFileSync(analysisPath, 'utf-8'));\n\n      const charactersPath = path.join(\n        process.cwd(),\n        this.config.characterFile,\n      );\n      const characters = fs.readFileSync(charactersPath, 'utf-8').trim();\n\n      return {\n        analysis: analysisData,\n        characters,\n        charCount: analysisData.summary.uniqueChars,\n        estimatedSavings: analysisData.recommendations.estimatedSavings,\n      };\n    } catch (error) {\n      console.error('âŒ æ— æ³•è¯»å–å­—ç¬¦åˆ†æç»“æœ:', error.message);\n      return null;\n    }\n  }\n\n  /**\n   * ç”Ÿæˆå­—ä½“å­é›†åŒ–é…ç½®\n   */\n  generateSubsetConfig(data) {\n    const config = {\n      // å­—ä½“å­é›†åŒ–é…ç½®\n      fontSubset: {\n        source: {\n          font: this.config.sourceFont,\n          fallbacks: ['system-ui', 'sans-serif'],\n        },\n        subset: {\n          characters: data.characters,\n          unicodeRange: this.generateUnicodeRanges(data.characters),\n          formats: this.config.targetFormats,\n          outputDir: this.config.outputDir,\n        },\n        optimization: {\n          hinting: true,\n          compression: 'maximum',\n          removeUnusedFeatures: true,\n        },\n        performance: {\n          preload: true,\n          display: 'swap',\n          fallbackDelay: '100ms',\n        },\n      },\n\n      // é¢„æœŸæ€§èƒ½æ”¹è¿›\n      expectedImprovements: {\n        fileSizeReduction: data.estimatedSavings.savingsPercentage,\n        loadTimeImprovement: '30-50ms',\n        lcpImprovement: '30-50ms',\n        cacheEfficiency: '95%',\n      },\n\n      // å®æ–½æ­¥éª¤\n      implementationSteps: [\n        '1. å®‰è£…å­—ä½“å¤„ç†å·¥å…· (fonttools, pyftsubset)',\n        '2. ç”Ÿæˆå­—ä½“å­é›†æ–‡ä»¶',\n        '3. æ›´æ–°CSSå­—ä½“é…ç½®',\n        '4. é…ç½®å­—ä½“é¢„åŠ è½½',\n        '5. å®æ–½å­—ä½“å›é€€ç­–ç•¥',\n        '6. é…ç½®ç¼“å­˜ç­–ç•¥',\n        '7. éªŒè¯å­—ä½“æ˜¾ç¤ºæ•ˆæœ',\n      ],\n    };\n\n    return config;\n  }\n\n  /**\n   * ç”ŸæˆUnicodeèŒƒå›´\n   */\n  generateUnicodeRanges(characters) {\n    const ranges = [];\n    const codes = characters\n      .split('')\n      .map((char) => char.charCodeAt(0))\n      .sort((a, b) => a - b);\n\n    let start = codes[0];\n    let end = codes[0];\n\n    for (let i = 1; i < codes.length; i++) {\n      if (codes[i] === end + 1) {\n        end = codes[i];\n      } else {\n        ranges.push(\n          start === end\n            ? `U+${start.toString(16).toUpperCase()}`\n            : `U+${start.toString(16).toUpperCase()}-${end.toString(16).toUpperCase()}`,\n        );\n        start = end = codes[i];\n      }\n    }\n\n    // æ·»åŠ æœ€åä¸€ä¸ªèŒƒå›´\n    ranges.push(\n      start === end\n        ? `U+${start.toString(16).toUpperCase()}`\n        : `U+${start.toString(16).toUpperCase()}-${end.toString(16).toUpperCase()}`,\n    );\n\n    return ranges;\n  }\n\n  /**\n   * ç”Ÿæˆå­—ä½“å­é›†åŒ–å‘½ä»¤\n   */\n  generateSubsetCommands(characters) {\n    const commands = {\n      // ä½¿ç”¨pyftsubsetç”Ÿæˆå­é›†\n      pyftsubset: [\n        'pip install fonttools',\n        `pyftsubset \"PingFang SC.ttc\" \\\\`,\n        `  --text=\"${characters}\" \\\\`,\n        `  --output-file=\"public/fonts/subsets/pingfang-sc-subset.woff2\" \\\\`,\n        `  --flavor=woff2 \\\\`,\n        `  --layout-features=\"*\" \\\\`,\n        `  --glyph-names \\\\`,\n        `  --symbol-cmap \\\\`,\n        `  --legacy-cmap \\\\`,\n        `  --notdef-glyph \\\\`,\n        `  --notdef-outline \\\\`,\n        `  --recommended-glyphs \\\\`,\n        `  --name-legacy \\\\`,\n        `  --drop-tables= \\\\`,\n        `  --no-hinting`,\n      ],\n\n      // ç”ŸæˆWOFFæ ¼å¼\n      woff: [\n        `pyftsubset \"PingFang SC.ttc\" \\\\`,\n        `  --text=\"${characters}\" \\\\`,\n        `  --output-file=\"public/fonts/subsets/pingfang-sc-subset.woff\" \\\\`,\n        `  --flavor=woff \\\\`,\n        `  --layout-features=\"*\"`,\n      ],\n    };\n\n    return commands;\n  }\n\n  /**\n   * ç”ŸæˆCSSé…ç½®\n   */\n  generateCSSConfig(unicodeRanges) {\n    return `\n/* å­—ä½“å­é›†åŒ–é…ç½® */\n@font-face {\n  font-family: 'PingFang SC Subset';\n  src: url('/fonts/subsets/pingfang-sc-subset.woff2') format('woff2'),\n       url('/fonts/subsets/pingfang-sc-subset.woff') format('woff');\n  font-display: swap;\n  font-weight: 400;\n  font-style: normal;\n  unicode-range: ${unicodeRanges.join(', ')};\n}\n\n@font-face {\n  font-family: 'PingFang SC Subset';\n  src: url('/fonts/subsets/pingfang-sc-subset-bold.woff2') format('woff2'),\n       url('/fonts/subsets/pingfang-sc-subset-bold.woff') format('woff');\n  font-display: swap;\n  font-weight: 700;\n  font-style: normal;\n  unicode-range: ${unicodeRanges.join(', ')};\n}\n\n/* ä¼˜åŒ–çš„ä¸­æ–‡å­—ä½“æ ˆ */\n.font-chinese {\n  font-family: 'PingFang SC Subset', 'PingFang SC', 'Hiragino Sans GB', \n               'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', \n               'WenQuanYi Micro Hei', sans-serif;\n  font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* å­—ä½“é¢„åŠ è½½æç¤º */\n/* åœ¨HTML headä¸­æ·»åŠ ï¼š\n<link rel=\"preload\" href=\"/fonts/subsets/pingfang-sc-subset.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>\n<link rel=\"preload\" href=\"/fonts/subsets/pingfang-sc-subset-bold.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>\n*/\n`;\n  }\n\n  /**\n   * åˆ›å»ºå®æ–½æŒ‡å—\n   */\n  createImplementationGuide(config, commands, cssConfig) {\n    const guide = `# å­—ä½“å­é›†åŒ–å®æ–½æŒ‡å—\n\n## æ¦‚è¿°\n\nåŸºäºé¡¹ç›®ä¸­æ–‡å­—ç¬¦åˆ†æï¼Œæˆ‘ä»¬è¯†åˆ«å‡º ${config.fontSubset.subset.characters.length} ä¸ªå”¯ä¸€ä¸­æ–‡å­—ç¬¦ã€‚\né€šè¿‡å­—ä½“å­é›†åŒ–ï¼Œé¢„æœŸå¯ä»¥å‡å°‘å­—ä½“æ–‡ä»¶å¤§å° ${config.expectedImprovements.fileSizeReduction}ï¼Œ\næå‡LCPæ€§èƒ½ ${config.expectedImprovements.lcpImprovement}ã€‚\n\n## å®æ–½æ­¥éª¤\n\n### 1. å®‰è£…å­—ä½“å¤„ç†å·¥å…·\n\n\\`\\`\\`bash\n# å®‰è£…Python fonttools\npip install fonttools\n\n# éªŒè¯å®‰è£…\npyftsubset --help\n\\`\\`\\`\n\n### 2. ç”Ÿæˆå­—ä½“å­é›†\n\n\\`\\`\\`bash\n# åˆ›å»ºè¾“å‡ºç›®å½•\nmkdir -p public/fonts/subsets\n\n# ç”ŸæˆWOFF2æ ¼å¼å­é›†\n${commands.pyftsubset.join('\\n')}\n\n# ç”ŸæˆWOFFæ ¼å¼å­é›†\n${commands.woff.join('\\n')}\n\\`\\`\\`\n\n### 3. æ›´æ–°CSSé…ç½®\n\nå°†ä»¥ä¸‹CSSæ·»åŠ åˆ° \\`src/app/globals.css\\`ï¼š\n\n\\`\\`\\`css${cssConfig}\\`\\`\\`\n\n### 4. æ›´æ–°layout.tsxé¢„åŠ è½½é…ç½®\n\nåœ¨ \\`src/app/[locale]/layout.tsx\\` ä¸­æ·»åŠ å­—ä½“é¢„åŠ è½½ï¼š\n\n\\`\\`\\`tsx\n{/* å­—ä½“å­é›†é¢„åŠ è½½ */}\n<link\n  rel='preload'\n  href='/fonts/subsets/pingfang-sc-subset.woff2'\n  as='font'\n  type='font/woff2'\n  crossOrigin='anonymous'\n/>\n<link\n  rel='preload'\n  href='/fonts/subsets/pingfang-sc-subset-bold.woff2'\n  as='font'\n  type='font/woff2'\n  crossOrigin='anonymous'\n/>\n\\`\\`\\`\n\n### 5. éªŒè¯å®æ–½æ•ˆæœ\n\n\\`\\`\\`bash\n# è¿è¡ŒéªŒè¯è„šæœ¬\nnode scripts/verify-font-subset.js\n\n# æ£€æŸ¥å­—ä½“æ–‡ä»¶å¤§å°\nls -lh public/fonts/subsets/\n\n# æµ‹è¯•å­—ä½“æ˜¾ç¤ºæ•ˆæœ\npnpm dev\n\\`\\`\\`\n\n## é¢„æœŸæ€§èƒ½æ”¹è¿›\n\n- **æ–‡ä»¶å¤§å°å‡å°‘**: ${config.expectedImprovements.fileSizeReduction}\n- **åŠ è½½æ—¶é—´æ”¹è¿›**: ${config.expectedImprovements.loadTimeImprovement}\n- **LCPæ”¹è¿›**: ${config.expectedImprovements.lcpImprovement}\n- **ç¼“å­˜æ•ˆç‡**: ${config.expectedImprovements.cacheEfficiency}\n\n## æ³¨æ„äº‹é¡¹\n\n1. **å­—ä½“ç‰ˆæƒ**: ç¡®ä¿æœ‰åˆæ³•çš„å­—ä½“ä½¿ç”¨æƒé™\n2. **å­—ç¬¦è¦†ç›–**: å®šæœŸæ›´æ–°å­—ç¬¦é›†ä»¥è¦†ç›–æ–°å¢å†…å®¹\n3. **å›é€€ç­–ç•¥**: ä¿æŒå®Œæ•´çš„å­—ä½“å›é€€é“¾\n4. **æµè§ˆå™¨å…¼å®¹**: æµ‹è¯•ä¸åŒæµè§ˆå™¨çš„å­—ä½“æ˜¾ç¤ºæ•ˆæœ\n5. **ç¼“å­˜ç­–ç•¥**: é…ç½®é€‚å½“çš„HTTPç¼“å­˜å¤´\n\n## ç»´æŠ¤å»ºè®®\n\n- æ¯å­£åº¦é‡æ–°åˆ†æå­—ç¬¦ä½¿ç”¨æƒ…å†µ\n- ç›‘æ§å­—ä½“åŠ è½½æ€§èƒ½æŒ‡æ ‡\n- å®šæœŸæ›´æ–°å­—ä½“å­é›†æ–‡ä»¶\n- ä¿æŒå­—ä½“å›é€€ç­–ç•¥çš„æœ‰æ•ˆæ€§\n`;\n\n    return guide;\n  }\n\n  /**\n   * è¿è¡Œå­—ä½“å­é›†åŒ–å®æ–½\n   */\n  async runImplementation() {\n    console.log('ğŸ”¤ å¼€å§‹å­—ä½“å­é›†åŒ–å®æ–½...\\n');\n\n    // 1. åŠ è½½åˆ†æç»“æœ\n    const data = this.loadAnalysisResults();\n    if (!data) {\n      console.error('âŒ æ— æ³•ç»§ç»­ï¼Œè¯·å…ˆè¿è¡Œå­—ç¬¦åˆ†æè„šæœ¬');\n      return false;\n    }\n\n    console.log(`âœ… åŠ è½½å­—ç¬¦åˆ†æç»“æœ: ${data.charCount} ä¸ªå”¯ä¸€å­—ç¬¦`);\n\n    // 2. ç”Ÿæˆé…ç½®\n    const config = this.generateSubsetConfig(data);\n    const unicodeRanges = this.generateUnicodeRanges(data.characters);\n    const commands = this.generateSubsetCommands(data.characters);\n    const cssConfig = this.generateCSSConfig(unicodeRanges);\n\n    // 3. åˆ›å»ºè¾“å‡ºç›®å½•\n    const outputDir = path.join(process.cwd(), this.config.outputDir);\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n      console.log(`âœ… åˆ›å»ºè¾“å‡ºç›®å½•: ${this.config.outputDir}`);\n    }\n\n    // 4. ç”Ÿæˆå®æ–½æŒ‡å—\n    const guide = this.createImplementationGuide(config, commands, cssConfig);\n    const guidePath = path.join(\n      process.cwd(),\n      'docs/font-subset-implementation-guide.md',\n    );\n    fs.writeFileSync(guidePath, guide);\n    console.log(`âœ… ç”Ÿæˆå®æ–½æŒ‡å—: docs/font-subset-implementation-guide.md`);\n\n    // 5. ä¿å­˜é…ç½®æ–‡ä»¶\n    const configPath = path.join(\n      process.cwd(),\n      'config/font-subset-config.json',\n    );\n    fs.writeFileSync(configPath, JSON.stringify(config, null, 2));\n    console.log(`âœ… ä¿å­˜é…ç½®æ–‡ä»¶: config/font-subset-config.json`);\n\n    // 6. ç”Ÿæˆå‘½ä»¤è„šæœ¬\n    const scriptPath = path.join(\n      process.cwd(),\n      'scripts/generate-font-subset.sh',\n    );\n    const scriptContent = `#!/bin/bash\n# å­—ä½“å­é›†ç”Ÿæˆè„šæœ¬\n\necho \"ğŸ”¤ å¼€å§‹ç”Ÿæˆå­—ä½“å­é›†...\"\n\n# æ£€æŸ¥ä¾èµ–\nif ! command -v pyftsubset &> /dev/null; then\n    echo \"âŒ pyftsubset æœªå®‰è£…ï¼Œè¯·è¿è¡Œ: pip install fonttools\"\n    exit 1\nfi\n\n# åˆ›å»ºè¾“å‡ºç›®å½•\nmkdir -p public/fonts/subsets\n\n# ç”ŸæˆWOFF2æ ¼å¼\necho \"ğŸ“¦ ç”ŸæˆWOFF2æ ¼å¼...\"\n${commands.pyftsubset.join(' \\\\\\n  ')}\n\n# ç”ŸæˆWOFFæ ¼å¼\necho \"ğŸ“¦ ç”ŸæˆWOFFæ ¼å¼...\"\n${commands.woff.join(' \\\\\\n  ')}\n\necho \"âœ… å­—ä½“å­é›†ç”Ÿæˆå®Œæˆï¼\"\necho \"ğŸ“Š è¯·è¿è¡ŒéªŒè¯è„šæœ¬æ£€æŸ¥ç»“æœ: node scripts/verify-font-subset.js\"\n`;\n    fs.writeFileSync(scriptPath, scriptContent);\n    fs.chmodSync(scriptPath, '755');\n    console.log(`âœ… ç”Ÿæˆæ‰§è¡Œè„šæœ¬: scripts/generate-font-subset.sh`);\n\n    this.generateReport(data, config);\n    return true;\n  }\n\n  /**\n   * ç”Ÿæˆå®æ–½æŠ¥å‘Š\n   */\n  generateReport(data, config) {\n    console.log('\\nğŸ“Š å­—ä½“å­é›†åŒ–å®æ–½æŠ¥å‘Š');\n    console.log('='.repeat(50));\n\n    console.log(`ğŸ”¤ å­—ç¬¦åˆ†æç»“æœ:`);\n    console.log(`   å”¯ä¸€å­—ç¬¦æ•°é‡: ${data.charCount}`);\n    console.log(\n      `   é¢„ä¼°æ–‡ä»¶å¤§å°å‡å°‘: ${data.estimatedSavings.savingsPercentage}`,\n    );\n    console.log(`   é¢„ä¼°èŠ‚çœç©ºé—´: ${data.estimatedSavings.savings}`);\n\n    console.log(`\\nğŸš€ é¢„æœŸæ€§èƒ½æ”¹è¿›:`);\n    console.log(`   LCPæ”¹è¿›: ${config.expectedImprovements.lcpImprovement}`);\n    console.log(\n      `   åŠ è½½æ—¶é—´æ”¹è¿›: ${config.expectedImprovements.loadTimeImprovement}`,\n    );\n    console.log(`   ç¼“å­˜æ•ˆç‡: ${config.expectedImprovements.cacheEfficiency}`);\n\n    console.log(`\\nğŸ“‹ ç”Ÿæˆçš„æ–‡ä»¶:`);\n    console.log(`   âœ… å®æ–½æŒ‡å—: docs/font-subset-implementation-guide.md`);\n    console.log(`   âœ… é…ç½®æ–‡ä»¶: config/font-subset-config.json`);\n    console.log(`   âœ… æ‰§è¡Œè„šæœ¬: scripts/generate-font-subset.sh`);\n\n    console.log(`\\nğŸ”§ ä¸‹ä¸€æ­¥æ“ä½œ:`);\n    console.log(`   1. å®‰è£…å­—ä½“å·¥å…·: pip install fonttools`);\n    console.log(`   2. æ‰§è¡Œå­—ä½“ç”Ÿæˆ: ./scripts/generate-font-subset.sh`);\n    console.log(`   3. æ›´æ–°CSSé…ç½®: å‚è€ƒå®æ–½æŒ‡å—`);\n    console.log(`   4. è¿è¡ŒéªŒè¯è„šæœ¬: node scripts/verify-font-subset.js`);\n\n    console.log('\\nğŸ‰ å­—ä½“å­é›†åŒ–å®æ–½é…ç½®å®Œæˆï¼');\n  }\n}\n\n// ä¸»å‡½æ•°\nasync function main() {\n  const implementation = new FontSubsetImplementation();\n  const success = await implementation.runImplementation();\n  process.exit(success ? 0 : 1);\n}\n\nif (require.main === module) {\n  main().catch(console.error);\n}\n\nmodule.exports = { FontSubsetImplementation };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/format-check-staged.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/ast-replace-magic-numbers.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SourceFile' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":33},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"node:fs\" with non literal argument at index 0","line":37,"column":19,"nodeType":"CallExpression","endLine":37,"endColumn":35},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"node:fs\" with non literal argument at index 0","line":41,"column":20,"nodeType":"CallExpression","endLine":41,"endColumn":38},{"ruleId":"max-statements","severity":1,"message":"Async function 'run' has too many statements (62). Maximum allowed is 35.","line":62,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":253,"endColumn":2},{"ruleId":"no-loop-func","severity":2,"message":"Function declared in a loop contains unsafe references to variable(s) 'totalReplacements'.","line":150,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"unsafeRefs","endLine":201,"endColumn":6},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":211,"column":67,"nodeType":"MemberExpression","endLine":211,"endColumn":77},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"node:fs\" with non literal argument at index 0","line":240,"column":3,"nodeType":"CallExpression","endLine":240,"endColumn":59},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":280,"column":21,"nodeType":"CallExpression","messageId":"missingRadix","endLine":280,"endColumn":51,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[7453,7453],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":284,"column":23,"nodeType":"CallExpression","messageId":"missingRadix","endLine":284,"endColumn":55,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[7607,7607],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { Project, ts, SourceFile } from 'ts-morph';\nimport { resolve, join } from 'node:path';\nimport { writeFileSync, readdirSync, statSync } from 'node:fs';\nimport { loadEnhancedMapping, ensureConstDefined, mergeAndAliasImports, shouldSkipNode } from './utils';\n\nexport interface ReplaceLogEntry {\n  file: string;\n  changes: Array<{\n    start: number;\n    end: number;\n    raw: string;\n    constant: string;\n    negated: boolean;\n  }>;\n  imports: {\n    added: string[];\n    aliased: Record<string, string>;\n  };\n}\n\nexport interface Options {\n  write: boolean;\n  files?: string;\n  limit?: number;\n  dryRun?: boolean;\n}\n\n/**\n * é€’å½’æŸ¥æ‰¾åŒ¹é…çš„TypeScriptæ–‡ä»¶\n */\nfunction findTsFiles(dir: string, pattern: RegExp = /\\.(ts|tsx)$/): string[] {\n  const results: string[] = [];\n\n  try {\n    const items = readdirSync(dir);\n\n    for (const item of items) {\n      const fullPath = join(dir, item);\n      const stat = statSync(fullPath);\n\n      if (stat.isDirectory()) {\n        // è·³è¿‡node_moduleså’Œ.gitç­‰ç›®å½•\n        if (!item.startsWith('.') && item !== 'node_modules') {\n          results.push(...findTsFiles(fullPath, pattern));\n        }\n      } else if (stat.isFile() && pattern.test(item)) {\n        results.push(fullPath);\n      }\n    }\n  } catch (error) {\n    console.warn(`âš ï¸ æ— æ³•è¯»å–ç›®å½• ${dir}:`, error);\n  }\n\n  return results;\n}\n\n/**\n * AST-based magic numbers replacement\n */\nexport async function run(opts: Options): Promise<ReplaceLogEntry[]> {\n  console.log('ğŸš€ ASTé­”æ³•æ•°å­—æ›¿æ¢å™¨å¯åŠ¨...');\n\n  // åˆå§‹åŒ–é¡¹ç›® - ä¿®å¤è·¯å¾„é—®é¢˜\n  const rootDir = process.cwd().endsWith('scripts/magic-numbers')\n    ? resolve(process.cwd(), '../..')\n    : process.cwd();\n\n  const project = new Project({\n    tsConfigFilePath: resolve(rootDir, 'tsconfig.json'),\n    manipulationSettings: {\n      indentationText: '  ',\n    },\n  });\n\n  // è·å–æ–‡ä»¶åˆ—è¡¨\n  let filePaths: string[];\n  if (opts.files) {\n    // æ£€æŸ¥æ˜¯å¦æ˜¯å•ä¸ªæ–‡ä»¶\n    if (opts.files.endsWith('.ts') || opts.files.endsWith('.tsx')) {\n      // å•ä¸ªæ–‡ä»¶æ¨¡å¼\n      const filePath = opts.files.startsWith('/') ? opts.files : resolve(rootDir, opts.files);\n      filePaths = [filePath];\n      console.log(`ğŸ¯ å•ä¸ªæ–‡ä»¶æ¨¡å¼: ${filePath}`);\n    } else {\n      // ç›®å½•æ¨¡å¼ - å¤„ç†ç›¸å¯¹è·¯å¾„\n      let searchDir: string;\n      if (opts.files.startsWith('/')) {\n        searchDir = opts.files;\n      } else {\n        // å¤„ç†ç›¸å¯¹è·¯å¾„ï¼Œç¡®ä¿æ­£ç¡®è§£æ\n        searchDir = resolve(rootDir, opts.files.replace('/**/*.{ts,tsx}', ''));\n      }\n\n      console.log(`ğŸ” æ–‡ä»¶æ¨¡å¼: ${opts.files}`);\n      console.log(`ğŸ“ æ ¹ç›®å½•: ${rootDir}`);\n      console.log(`ğŸ¯ æœç´¢ç›®å½•: ${searchDir}`);\n\n      // ä½¿ç”¨è‡ªå®šä¹‰æ–‡ä»¶æŸ¥æ‰¾\n      filePaths = findTsFiles(searchDir);\n      console.log(`ğŸ“„ æ‰¾åˆ°æ–‡ä»¶æ•°é‡: ${filePaths.length}`);\n\n      if (filePaths.length > 0) {\n        console.log(`ğŸ“‹ å‰5ä¸ªæ–‡ä»¶ç¤ºä¾‹:`);\n        filePaths.slice(0, 5).forEach(file => {\n          console.log(`  ${file.replace(rootDir, '.')}`);\n        });\n      }\n    }\n  } else {\n    // æ·»åŠ æ‰€æœ‰æºæ–‡ä»¶\n    const srcDir = resolve(rootDir, 'src');\n    console.log(`ğŸ“ é»˜è®¤æœç´¢ç›®å½•: ${srcDir}`);\n    filePaths = findTsFiles(srcDir);\n  }\n\n  // æ·»åŠ æ–‡ä»¶åˆ°é¡¹ç›®\n  const files = project.addSourceFilesAtPaths(filePaths);\n\n  const targetFiles = files.slice(0, opts.limit ?? files.length);\n\n  // åŠ è½½å¢å¼ºç‰ˆæ˜ å°„\n  const mapping = loadEnhancedMapping();\n  if (Object.keys(mapping).length === 0) {\n    console.error('âŒ æ˜ å°„æ–‡ä»¶ä¸ºç©ºæˆ–åŠ è½½å¤±è´¥');\n    return [];\n  }\n\n  console.log(`ğŸ“Š å¤„ç† ${targetFiles.length} ä¸ªæ–‡ä»¶...`);\n  console.log(`ğŸ“‹ å¯ç”¨å¸¸é‡æ˜ å°„: ${Object.keys(mapping).length} ä¸ª`);\n\n  const logs: ReplaceLogEntry[] = [];\n  let totalReplacements = 0;\n\n  for (const sourceFile of targetFiles) {\n    const filePath = sourceFile.getFilePath();\n    const relativePath = filePath.replace(`${process.cwd()  }/`, '');\n\n    const fileLog: ReplaceLogEntry = {\n      file: relativePath,\n      changes: [],\n      imports: { added: [], aliased: {} },\n    };\n\n    const newConstants = new Set<string>();\n    const constantsWithModules: Array<{ constant: string; module: string }> = [];\n\n    // ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œä½†å…ˆå¤„ç†å¯¼å…¥\n    sourceFile.forEachDescendant((node) => {\n      if (ts.isNumericLiteral(node.compilerNode)) {\n        const text = node.getText();\n\n        // æ£€æŸ¥æ˜¯å¦åº”è¯¥è·³è¿‡\n        if (shouldSkipNode(node)) {\n          return;\n        }\n\n        const { constantName, isSupported, module } = ensureConstDefined(mapping, text);\n\n        if (!isSupported) {\n          return;\n        }\n\n        const parent = node.getParent();\n\n        // å¤„ç†è´Ÿå·å‰ç¼€\n        if (parent && ts.isPrefixUnaryExpression(parent.compilerNode) &&\n            parent.compilerNode.operator === ts.SyntaxKind.MinusToken) {\n\n          fileLog.changes.push({\n            start: node.getStart(),\n            end: node.getEnd(),\n            raw: `-${text}`,\n            constant: constantName,\n            negated: true,\n          });\n\n          // æ›¿æ¢æ“ä½œæ•°ï¼Œä¿ç•™è´Ÿå·\n          node.replaceWithText(constantName);\n          newConstants.add(constantName);\n          constantsWithModules.push({ constant: constantName, module });\n          totalReplacements++;\n\n        } else {\n          fileLog.changes.push({\n            start: node.getStart(),\n            end: node.getEnd(),\n            raw: text,\n            constant: constantName,\n            negated: false,\n          });\n\n          // ç›´æ¥æ›¿æ¢\n          node.replaceWithText(constantName);\n          newConstants.add(constantName);\n          constantsWithModules.push({ constant: constantName, module });\n          totalReplacements++;\n        }\n      }\n    });\n\n    // å¤„ç†å¯¼å…¥ï¼ˆåœ¨æ›¿æ¢ä¹‹åï¼Œä½†åœ¨ä¿å­˜ä¹‹å‰ï¼‰\n    if (newConstants.size > 0) {\n      mergeAndAliasImports(sourceFile, constantsWithModules, fileLog);\n    }\n\n    if (newConstants.size > 0) {\n      console.log(`ğŸ”§ ${relativePath}: ${newConstants.size} ä¸ªæ›¿æ¢`);\n      newConstants.forEach(constName => {\n        console.log(`    ${mapping[Object.keys(mapping).find(k => mapping[k] === constName) || '']} â†’ ${constName}`);\n      });\n    }\n\n    // ä¿å­˜æ–‡ä»¶\n    if (!opts.dryRun && opts.write && newConstants.size > 0) {\n      await sourceFile.save();\n    }\n\n    if (fileLog.changes.length > 0) {\n      logs.push(fileLog);\n    }\n  }\n\n  // ç”Ÿæˆæ—¥å¿—\n  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n  const logPath = resolve(__dirname, '../logs', `ast-${timestamp}.json`);\n\n  const logData = {\n    timestamp: new Date().toISOString(),\n    options: opts,\n    summary: {\n      filesProcessed: targetFiles.length,\n      filesModified: logs.length,\n      totalReplacements,\n    },\n    logs,\n  };\n\n  writeFileSync(logPath, JSON.stringify(logData, null, 2));\n\n  console.log(`ğŸ“Š å¤„ç†å®Œæˆ:`);\n  console.log(`  æ–‡ä»¶å¤„ç†: ${targetFiles.length}`);\n  console.log(`  æ–‡ä»¶ä¿®æ”¹: ${logs.length}`);\n  console.log(`  æ€»æ›¿æ¢æ•°: ${totalReplacements}`);\n  console.log(`ğŸ“„ æ—¥å¿—ä¿å­˜åˆ°: ${logPath}`);\n\n  if (opts.dryRun) {\n    console.log('ğŸ” è¿™æ˜¯å¹²è·‘æ¨¡å¼ï¼Œæœªå®é™…ä¿®æ”¹æ–‡ä»¶');\n  }\n\n  return logs;\n}\n\n// CLI å…¥å£\nif (require.main === module) {\n  const args = process.argv.slice(2);\n\n  const options: Options = {\n    write: args.includes('--write'),\n    dryRun: args.includes('--dry-run'),\n    files: undefined,\n    limit: undefined,\n  };\n\n  // è§£æ --files å‚æ•°\n  const filesIndex = args.findIndex(arg => arg === '--files');\n  if (filesIndex !== -1 && filesIndex + 1 < args.length) {\n    options.files = args[filesIndex + 1];\n  } else {\n    const filesArg = args.find(arg => arg.startsWith('--files='));\n    if (filesArg) {\n      options.files = filesArg.split('=')[1];\n    }\n  }\n\n  // è§£æ --limit å‚æ•°\n  const limitIndex = args.findIndex(arg => arg === '--limit');\n  if (limitIndex !== -1 && limitIndex + 1 < args.length) {\n    options.limit = parseInt(args[limitIndex + 1]);\n  } else {\n    const limitArg = args.find(arg => arg.startsWith('--limit='));\n    if (limitArg) {\n      options.limit = parseInt(limitArg.split('=')[1]);\n    }\n  }\n\n  // é»˜è®¤ä¸ºå¹²è·‘æ¨¡å¼\n  if (!options.write) {\n    options.dryRun = true;\n  }\n\n  run(options).catch(console.error);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/codex-filter-analysis.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'readFileSync' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resolve' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * CODEXåˆ†å±‚æ²»ç†ï¼šåˆ†æè¿‡æ»¤åçš„æ•°å­—ï¼Œè¯†åˆ«çœŸæ­£æœ‰ä¸šåŠ¡è¯­ä¹‰çš„å¸¸é‡\n * \n * ç›®æ ‡ï¼šä»162ä¸ªæ•°å­—ä¸­ç­›é€‰å‡º40-60ä¸ªæœ‰æ„ä¹‰çš„ä¸šåŠ¡å¸¸é‡\n */\n\nimport { readFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\ninterface NumberAnalysis {\n  value: string;\n  constantName: string;\n  fileCount: number;\n  category: 'business' | 'config' | 'ui' | 'time' | 'http' | 'test' | 'noise';\n  priority: 'high' | 'medium' | 'low';\n  reason: string;\n}\n\n/**\n * åˆ†æè¿‡æ»¤åçš„æ•°å­—ï¼ŒæŒ‰ä¸šåŠ¡ä»·å€¼åˆ†ç±»\n */\nfunction analyzeFilteredNumbers(): NumberAnalysis[] {\n  // ä»é¢„æ£€è¾“å‡ºä¸­æå–çš„æ•°å­—ç»Ÿè®¡ï¼ˆç®€åŒ–ç‰ˆï¼Œå®é™…åº”è¯¥ä»mapping.jsonè¯»å–ï¼‰\n  const numbersFromPreflight = [\n    { value: '0', name: 'ZERO', count: 171 },\n    { value: '1', name: 'ONE', count: 118 },\n    { value: '2', name: 'COUNT_PAIR', count: 57 },\n    { value: '3', name: 'COUNT_TRIPLE', count: 38 },\n    { value: '4', name: 'COUNT_QUAD', count: 17 },\n    { value: '5', name: 'COUNT_FIVE', count: 47 },\n    { value: '10', name: 'COUNT_TEN', count: 54 },\n    { value: '24', name: 'HOURS_PER_DAY', count: 34 },\n    { value: '25', name: 'PERCENTAGE_QUARTER', count: 8 },\n    { value: '30', name: 'DAYS_PER_MONTH', count: 17 },\n    { value: '50', name: 'PERCENTAGE_HALF', count: 36 },\n    { value: '60', name: 'SECONDS_PER_MINUTE', count: 50 },\n    { value: '90', name: 'ANGLE_90_DEG', count: 11 },\n    { value: '100', name: 'PERCENTAGE_FULL', count: 101 },\n    { value: '200', name: 'HTTP_OK', count: 25 },\n    { value: '300', name: 'ANIMATION_DURATION_NORMAL', count: 20 },\n    { value: '360', name: 'ANGLE_360_DEG', count: 4 },\n    { value: '400', name: 'HTTP_BAD_REQUEST', count: 20 },\n    { value: '401', name: 'HTTP_UNAUTHORIZED', count: 2 },\n    { value: '500', name: 'ANIMATION_DURATION_SLOW', count: 39 },\n    { value: '640', name: 'BREAKPOINT_SM', count: 2 },\n    { value: '768', name: 'BREAKPOINT_MD', count: 4 },\n    { value: '1000', name: 'ANIMATION_DURATION_VERY_SLOW', count: 93 },\n    { value: '1024', name: 'BYTES_PER_KB', count: 22 },\n    { value: '1280', name: 'BREAKPOINT_XL', count: 3 },\n    { value: '1920', name: 'BREAKPOINT_FULL_HD', count: 2 },\n    { value: '3000', name: 'THREE_SECONDS_MS', count: 13 },\n    { value: '5000', name: 'FIVE_SECONDS_MS', count: 15 },\n    { value: '10000', name: 'TEN_SECONDS_MS', count: 16 },\n    { value: '30000', name: 'THIRTY_SECONDS_MS', count: 11 },\n    { value: '60000', name: 'MINUTE_MS', count: 12 },\n  ];\n\n  const analyses: NumberAnalysis[] = [];\n\n  for (const item of numbersFromPreflight) {\n    const analysis = categorizeNumber(item.value, item.name, item.count);\n    analyses.push(analysis);\n  }\n\n  return analyses.sort((a, b) => {\n    // æŒ‰ä¼˜å…ˆçº§å’Œä½¿ç”¨é¢‘ç‡æ’åº\n    const priorityOrder = { high: 3, medium: 2, low: 1 };\n    const priorityDiff = priorityOrder[b.priority] - priorityOrder[a.priority];\n    if (priorityDiff !== 0) return priorityDiff;\n    return b.fileCount - a.fileCount;\n  });\n}\n\n/**\n * å¯¹å•ä¸ªæ•°å­—è¿›è¡Œåˆ†ç±»å’Œä¼˜å…ˆçº§è¯„ä¼°\n */\nfunction categorizeNumber(value: string, constantName: string, fileCount: number): NumberAnalysis {\n  const num = parseFloat(value);\n\n  // HTTPçŠ¶æ€ç  - é«˜ä¼˜å…ˆçº§ä¸šåŠ¡å¸¸é‡\n  if ([200, 201, 400, 401, 403, 404, 429, 500, 502, 503].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'http',\n      priority: 'high',\n      reason: 'HTTPçŠ¶æ€ç ï¼ŒAPIäº¤äº’æ ¸å¿ƒå¸¸é‡'\n    };\n  }\n\n  // æ—¶é—´ç›¸å…³ - é«˜ä¼˜å…ˆçº§ä¸šåŠ¡å¸¸é‡\n  if ([60, 1000, 3000, 5000, 10000, 30000, 60000].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'time',\n      priority: 'high',\n      reason: 'æ—¶é—´å¸¸é‡ï¼Œç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ç›¸å…³'\n    };\n  }\n\n  // ç™¾åˆ†æ¯” - é«˜ä¼˜å…ˆçº§UIå¸¸é‡\n  if ([25, 50, 75, 100].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'ui',\n      priority: 'high',\n      reason: 'ç™¾åˆ†æ¯”å¸¸é‡ï¼ŒUIå¸ƒå±€å’ŒåŠ¨ç”»æ ¸å¿ƒ'\n    };\n  }\n\n  // å“åº”å¼æ–­ç‚¹ - é«˜ä¼˜å…ˆçº§UIå¸¸é‡\n  if ([640, 768, 1024, 1280, 1536, 1920].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'ui',\n      priority: 'high',\n      reason: 'å“åº”å¼æ–­ç‚¹ï¼Œç§»åŠ¨ç«¯é€‚é…æ ¸å¿ƒ'\n    };\n  }\n\n  // åŠ¨ç”»æŒç»­æ—¶é—´ - ä¸­ä¼˜å…ˆçº§UIå¸¸é‡\n  if ([150, 250, 300, 500, 750, 1000, 1500].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'ui',\n      priority: 'medium',\n      reason: 'åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒç›¸å…³'\n    };\n  }\n\n  // åŸºç¡€è®¡æ•° - ä¸­ä¼˜å…ˆçº§\n  if ([0, 1, 2, 3, 4, 5, 10].includes(num) && fileCount > 20) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'business',\n      priority: 'medium',\n      reason: 'é«˜é¢‘ä½¿ç”¨çš„åŸºç¡€è®¡æ•°ï¼Œä»£ç å¯è¯»æ€§é‡è¦'\n    };\n  }\n\n  // è§’åº¦ - ä¸­ä¼˜å…ˆçº§\n  if ([45, 90, 180, 270, 360].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'ui',\n      priority: 'medium',\n      reason: 'è§’åº¦å¸¸é‡ï¼Œå›¾å½¢å’ŒåŠ¨ç”»ç›¸å…³'\n    };\n  }\n\n  // æ•°æ®å¤§å° - ä¸­ä¼˜å…ˆçº§é…ç½®\n  if ([256, 512, 1024, 2048, 4096, 8192].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'config',\n      priority: 'medium',\n      reason: 'æ•°æ®å¤§å°å¸¸é‡ï¼Œæ€§èƒ½å’Œå­˜å‚¨ç›¸å…³'\n    };\n  }\n\n  // æµ‹è¯•æ•°æ® - ä½ä¼˜å…ˆçº§\n  if (constantName.includes('TEST_') || [1234, 12345, 999].includes(num)) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'test',\n      priority: 'low',\n      reason: 'æµ‹è¯•æ•°æ®ï¼Œå¯è€ƒè™‘è±å…'\n    };\n  }\n\n  // å…¶ä»–ä½é¢‘æ•°å­— - å™ªéŸ³\n  if (fileCount < 5) {\n    return {\n      value,\n      constantName,\n      fileCount,\n      category: 'noise',\n      priority: 'low',\n      reason: 'ä½é¢‘ä½¿ç”¨ï¼Œå¯è€ƒè™‘è±å…æˆ–å±€éƒ¨å¸¸é‡'\n    };\n  }\n\n  // é»˜è®¤åˆ†ç±»\n  return {\n    value,\n    constantName,\n    fileCount,\n    category: 'business',\n    priority: 'medium',\n    reason: 'ä¸­é¢‘ä¸šåŠ¡æ•°å­—ï¼Œéœ€è¦è¯„ä¼°'\n  };\n}\n\n/**\n * ç”ŸæˆCODEXæ¨èçš„ç²¾ç®€å¸¸é‡åº“\n */\nfunction generateCodexRecommendations(analyses: NumberAnalysis[]): void {\n  console.log('ğŸ¯ CODEXåˆ†å±‚æ²»ç†ï¼šç²¾ç®€å¸¸é‡åº“æ¨è');\n  console.log('');\n\n  // é«˜ä¼˜å…ˆçº§å¸¸é‡ï¼ˆå¿…é¡»ä¿ç•™ï¼‰\n  const highPriority = analyses.filter(a => a.priority === 'high');\n  console.log(`ğŸ”´ é«˜ä¼˜å…ˆçº§å¸¸é‡ (${highPriority.length}ä¸ª) - å¿…é¡»ä¿ç•™:`);\n  highPriority.forEach(item => {\n    console.log(`  ${item.value} â†’ ${item.constantName} (${item.fileCount}ä¸ªæ–‡ä»¶) - ${item.reason}`);\n  });\n  console.log('');\n\n  // ä¸­ä¼˜å…ˆçº§å¸¸é‡ï¼ˆé€‰æ‹©æ€§ä¿ç•™ï¼‰\n  const mediumPriority = analyses.filter(a => a.priority === 'medium');\n  console.log(`ğŸŸ¡ ä¸­ä¼˜å…ˆçº§å¸¸é‡ (${mediumPriority.length}ä¸ª) - é€‰æ‹©æ€§ä¿ç•™:`);\n  mediumPriority.forEach(item => {\n    console.log(`  ${item.value} â†’ ${item.constantName} (${item.fileCount}ä¸ªæ–‡ä»¶) - ${item.reason}`);\n  });\n  console.log('');\n\n  // ä½ä¼˜å…ˆçº§å¸¸é‡ï¼ˆå»ºè®®è±å…ï¼‰\n  const lowPriority = analyses.filter(a => a.priority === 'low');\n  console.log(`ğŸŸ¢ ä½ä¼˜å…ˆçº§å¸¸é‡ (${lowPriority.length}ä¸ª) - å»ºè®®è±å…æˆ–å±€éƒ¨å¤„ç†:`);\n  lowPriority.forEach(item => {\n    console.log(`  ${item.value} â†’ ${item.constantName} (${item.fileCount}ä¸ªæ–‡ä»¶) - ${item.reason}`);\n  });\n  console.log('');\n\n  // ç»Ÿè®¡å»ºè®®\n  const recommended = highPriority.length + Math.ceil(mediumPriority.length * 0.6);\n  console.log(`ğŸ“Š CODEXå»ºè®®ï¼šä¿ç•™ ${recommended} ä¸ªå¸¸é‡ (é«˜ä¼˜å…ˆçº§ + 60%ä¸­ä¼˜å…ˆçº§)`);\n  console.log(`ğŸ“ˆ ä¼˜åŒ–æ•ˆæœï¼šä» ${analyses.length} ä¸ªå‡å°‘åˆ° ${recommended} ä¸ªï¼Œå‡å°‘ ${Math.round((1 - recommended / analyses.length) * 100)}%`);\n  console.log('');\n\n  // æŒ‰ç±»åˆ«ç»Ÿè®¡\n  console.log('ğŸ“‹ æŒ‰ç±»åˆ«ç»Ÿè®¡:');\n  const categories = ['http', 'time', 'ui', 'business', 'config', 'test', 'noise'];\n  categories.forEach(category => {\n    const items = analyses.filter(a => a.category === category);\n    if (items.length > 0) {\n      console.log(`  ${category}: ${items.length}ä¸ª`);\n    }\n  });\n}\n\n// æ‰§è¡Œåˆ†æ\nif (require.main === module) {\n  const analyses = analyzeFilteredNumbers();\n  generateCodexRecommendations(analyses);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/codex-remaining-analysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/collect-existing-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExportAssignment' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":60},{"ruleId":"max-statements","severity":1,"message":"Async function 'collectExistingConstants' has too many statements (50). Maximum allowed is 35.","line":20,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":201,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'collectExistingConstants' has no 'await' expression.","line":20,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":20,"endColumn":40,"suggestions":[{"messageId":"removeAsync","fix":{"range":[399,405],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"prefer-template","severity":1,"message":"Unexpected string concatenation.","line":47,"column":55,"nodeType":"BinaryExpression","messageId":"unexpectedStringConcatenation","endLine":47,"endColumn":74,"fix":{"range":[1095,1114],"text":"`${process.cwd()  }/`"}},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":61,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":81,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (6). Maximum allowed is 4.","line":75,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":77,"endColumn":14},{"ruleId":"no-shadow","severity":2,"message":"'exportedDeclarations' is already declared in the upper scope on line 53 column 11.","line":107,"column":19,"nodeType":"Identifier","messageId":"noShadow","endLine":107,"endColumn":39},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":122,"column":15,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":124,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4128,4131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4128,4131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":147,"column":7,"nodeType":"MemberExpression","endLine":147,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":154,"column":7,"nodeType":"MemberExpression","endLine":154,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":158,"column":7,"nodeType":"MemberExpression","endLine":158,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":1,"source":"#!/usr/bin/env tsx\n\nimport { Project, ts, VariableDeclaration, ExportAssignment } from 'ts-morph';\nimport { resolve } from 'node:path';\nimport { writeFileSync } from 'node:fs';\n\ninterface ConstantInfo {\n  export: string;\n  module: string;\n  value: number;\n  filePath: string;\n  line: number;\n}\n\n// æ”¶é›†ç°æœ‰å¸¸é‡å®šä¹‰è„šæœ¬\n// æ‰«æè·¯å¾„ï¼š\n// - src/constants/**/* .ts\n// - src/config/**/* .ts\n// ç›®æ ‡ï¼šæŠ“å–å³å€¼ä¸ºå­—é¢é‡æ•°å­—çš„å‘½åå¯¼å‡ºï¼Œç”Ÿæˆå€™é€‰è¡¨\nasync function collectExistingConstants() {\n  console.log('ğŸ” æ”¶é›†ç°æœ‰å¸¸é‡å®šä¹‰...');\n\n  // åˆå§‹åŒ–é¡¹ç›®\n  const project = new Project({\n    tsConfigFilePath: resolve(process.cwd(), 'tsconfig.json')\n  });\n\n  // æ‰«æç›®æ ‡ç›®å½•\n  const targetPatterns = [\n    'src/constants/**/*.ts',\n    'src/config/**/*.ts',\n  ];\n\n  // æ·»åŠ æºæ–‡ä»¶\n  for (const pattern of targetPatterns) {\n    project.addSourceFilesAtPaths(pattern);\n  }\n\n  const sourceFiles = project.getSourceFiles();\n\n  console.log(`ğŸ“Š æ‰«æ ${sourceFiles.length} ä¸ªå¸¸é‡æ–‡ä»¶...`);\n\n  const constants: ConstantInfo[] = [];\n  const valueToConstants = new Map<number, ConstantInfo[]>();\n\n  for (const sourceFile of sourceFiles) {\n    const filePath = sourceFile.getFilePath().replace(process.cwd() + '/', '');\n    const modulePath = filePath.replace(/^src\\//, '@/').replace(/\\.ts$/, '');\n\n    console.log(`ğŸ” åˆ†ææ–‡ä»¶: ${filePath}`);\n\n    // æŸ¥æ‰¾å¯¼å‡ºçš„å˜é‡å£°æ˜\n    const exportedDeclarations = sourceFile.getExportedDeclarations();\n\n    for (const [exportName, declarations] of exportedDeclarations) {\n      for (const declaration of declarations) {\n        if (declaration.getKind() === ts.SyntaxKind.VariableDeclaration) {\n          const varDecl = declaration as VariableDeclaration;\n          const initializer = varDecl.getInitializer();\n\n          if (initializer && ts.isNumericLiteral(initializer.compilerNode)) {\n            const value = parseFloat(initializer.getText());\n            const line = varDecl.getStartLineNumber();\n\n            const constantInfo: ConstantInfo = {\n              export: exportName,\n              module: modulePath,\n              value,\n              filePath,\n              line,\n            };\n\n            constants.push(constantInfo);\n\n            if (!valueToConstants.has(value)) {\n              valueToConstants.set(value, []);\n            }\n            valueToConstants.get(value)!.push(constantInfo);\n\n            console.log(`  âœ… å‘ç°å¸¸é‡: ${exportName} = ${value} (è¡Œ ${line})`);\n          }\n        }\n      }\n    }\n\n    // æŸ¥æ‰¾å¯¹è±¡ä¸­çš„æ•°å­—å¸¸é‡\n    sourceFile.forEachDescendant((node) => {\n      if (ts.isPropertyAssignment(node.compilerNode)) {\n        const propAssignment = node;\n        const initializer = propAssignment.getInitializer();\n\n        if (initializer && ts.isNumericLiteral(initializer.compilerNode)) {\n          const value = parseFloat(initializer.getText());\n          const propertyName = propAssignment.getName();\n\n          // å°è¯•æ‰¾åˆ°åŒ…å«è¿™ä¸ªå±æ€§çš„å¯¼å‡ºå¯¹è±¡\n          let parent = propAssignment.getParent();\n          while (parent && !ts.isVariableDeclaration(parent.compilerNode)) {\n            parent = parent.getParent();\n          }\n\n          if (parent && ts.isVariableDeclaration(parent.compilerNode)) {\n            const varDecl = parent as VariableDeclaration;\n            const varName = varDecl.getName();\n\n            // æ£€æŸ¥æ˜¯å¦è¢«å¯¼å‡º\n            const exportedDeclarations = sourceFile.getExportedDeclarations();\n            if (exportedDeclarations.has(varName)) {\n              const line = propAssignment.getStartLineNumber();\n              const exportName = `${varName}.${propertyName}`;\n\n              const constantInfo: ConstantInfo = {\n                export: exportName,\n                module: modulePath,\n                value,\n                filePath,\n                line,\n              };\n\n              constants.push(constantInfo);\n\n              if (!valueToConstants.has(value)) {\n                valueToConstants.set(value, []);\n              }\n              valueToConstants.get(value)!.push(constantInfo);\n\n              console.log(`  âœ… å‘ç°å¯¹è±¡å¸¸é‡: ${exportName} = ${value} (è¡Œ ${line})`);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  console.log(`\\nğŸ“Š æ”¶é›†å®Œæˆ: å‘ç° ${constants.length} ä¸ªå¸¸é‡`);\n\n  // ç”Ÿæˆå€™é€‰æ˜ å°„\n  const candidateMapping: Record<string, any> = {};\n  const conflicts: Record<string, ConstantInfo[]> = {};\n\n  for (const [value, constantInfos] of valueToConstants) {\n    const valueStr = value.toString();\n\n    if (constantInfos.length === 1) {\n      // å”¯ä¸€å¸¸é‡ï¼Œç›´æ¥æ˜ å°„\n      const info = constantInfos[0];\n      candidateMapping[valueStr] = {\n        export: info.export,\n        module: info.module,\n        source: `${info.filePath}:${info.line}`,\n      };\n    } else {\n      // å¤šä¸ªå¸¸é‡ï¼Œè®°å½•å†²çª\n      conflicts[valueStr] = constantInfos;\n\n      // é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ï¼ˆæŒ‰æ¨¡å—ä¼˜å…ˆçº§ï¼‰\n      const prioritized = prioritizeConstant(constantInfos);\n      candidateMapping[valueStr] = {\n        export: prioritized.export,\n        module: prioritized.module,\n        source: `${prioritized.filePath}:${prioritized.line}`,\n        alternatives: constantInfos.filter(c => c !== prioritized).map(c => ({\n          export: c.export,\n          module: c.module,\n          source: `${c.filePath}:${c.line}`,\n        })),\n      };\n    }\n  }\n\n  // ä¿å­˜ç»“æœ\n  const outputPath = 'scripts/magic-numbers/existing-constants-analysis.json';\n  const result = {\n    _comment: \"ç°æœ‰å¸¸é‡åˆ†æç»“æœ\",\n    _generated: new Date().toISOString(),\n    _stats: {\n      totalConstants: constants.length,\n      uniqueValues: valueToConstants.size,\n      conflicts: Object.keys(conflicts).length,\n    },\n    candidateMapping,\n    conflicts,\n    allConstants: constants,\n  };\n\n  writeFileSync(outputPath, JSON.stringify(result, null, 2));\n  console.log(`\\nğŸ’¾ ç»“æœä¿å­˜åˆ°: ${outputPath}`);\n\n  // æ˜¾ç¤ºå†²çªæ‘˜è¦\n  if (Object.keys(conflicts).length > 0) {\n    console.log('\\nâš ï¸  å‘ç°å†²çªçš„æ•°å€¼:');\n    for (const [value, infos] of Object.entries(conflicts)) {\n      console.log(`  ${value}: ${infos.length} ä¸ªå¸¸é‡`);\n      infos.forEach(info => {\n        console.log(`    - ${info.export} (${info.module})`);\n      });\n    }\n  }\n\n  return result;\n}\n\n/**\n * å¸¸é‡ä¼˜å…ˆçº§ç­–ç•¥\n * é¢†åŸŸå¸¸é‡ > é€šç”¨å¸¸é‡ > magic-numbers.ts å…œåº•\n */\nfunction prioritizeConstant(constants: ConstantInfo[]): ConstantInfo {\n  // ä¼˜å…ˆçº§è§„åˆ™\n  const priorityOrder = [\n    // é¢†åŸŸå¸¸é‡ï¼ˆå…·ä½“ä¸šåŠ¡ï¼‰\n    /constants\\/app-constants/,\n    /config\\/security/,\n    /constants\\/performance/,\n\n    // é€šç”¨å¸¸é‡\n    /constants\\//,\n    /config\\//,\n\n    // å…œåº•\n    /magic-numbers/,\n  ];\n\n  for (const pattern of priorityOrder) {\n    const match = constants.find(c => pattern.test(c.filePath));\n    if (match) return match;\n  }\n\n  // å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œè¿”å›ç¬¬ä¸€ä¸ª\n  return constants[0];\n}\n\n// è¿è¡Œæ”¶é›†\nif (require.main === module) {\n  collectExistingConstants().catch((error) => {\n    console.error('âŒ æ”¶é›†å¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { collectExistingConstants, type ConstantInfo };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/deduplicate-mappings.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[226,229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[226,229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":30,"column":21,"nodeType":"CallExpression","endLine":30,"endColumn":63},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":36,"column":5,"nodeType":"CallExpression","endLine":36,"endColumn":48},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":71,"column":20,"nodeType":"MemberExpression","endLine":71,"endColumn":41},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":165,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":165,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4145,4151],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * å»é‡æ˜ å°„æ¡ç›®\n * \n * å¤„ç†é‡å¤çš„å¯¼å‡ºæ˜ å°„ï¼Œä¿ç•™æœ€åˆé€‚çš„æ¡ç›®\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\ninterface MappingEntry {\n  export: string;\n  module: string;\n  source?: string;\n  type?: string;\n  alternatives?: any[];\n}\n\nclass MappingDeduplicator {\n  private mappingPath: string;\n  private mappingData: Record<string, MappingEntry>;\n\n  constructor(mappingPath: string) {\n    this.mappingPath = mappingPath;\n    this.mappingData = this.loadMappingFile();\n  }\n\n  private loadMappingFile(): Record<string, MappingEntry> {\n    const content = fs.readFileSync(this.mappingPath, 'utf-8');\n    return JSON.parse(content);\n  }\n\n  private saveMappingFile(): void {\n    const content = JSON.stringify(this.mappingData, null, 2);\n    fs.writeFileSync(this.mappingPath, content);\n  }\n\n  /**\n   * å»é‡æ˜ å°„æ¡ç›®\n   */\n  deduplicateMappings(): void {\n    console.log('ğŸ”§ å¼€å§‹å»é‡æ˜ å°„æ¡ç›®...');\n    \n    // æŒ‰å¯¼å‡ºåç§°åˆ†ç»„\n    const exportGroups = new Map<string, Array<{key: string, entry: MappingEntry}>>();\n    \n    for (const [key, entry] of Object.entries(this.mappingData)) {\n      if (!entry || !entry.export) continue;\n      \n      if (!exportGroups.has(entry.export)) {\n        exportGroups.set(entry.export, []);\n      }\n      exportGroups.get(entry.export)!.push({key, entry});\n    }\n\n    let removedCount = 0;\n\n    // å¤„ç†é‡å¤çš„å¯¼å‡º\n    for (const [exportName, entries] of exportGroups) {\n      if (entries.length > 1) {\n        console.log(`\\nğŸ” å¤„ç†é‡å¤å¯¼å‡º: ${exportName} (${entries.length} ä¸ªæ¡ç›®)`);\n        \n        // é€‰æ‹©æœ€ä½³æ¡ç›®\n        const bestEntry = this.selectBestEntry(entries);\n        \n        // åˆ é™¤å…¶ä»–æ¡ç›®\n        for (const {key, entry} of entries) {\n          if (key !== bestEntry.key) {\n            console.log(`  âŒ åˆ é™¤é‡å¤æ¡ç›®: ${key} (${entry.module})`);\n            delete this.mappingData[key];\n            removedCount++;\n          } else {\n            console.log(`  âœ… ä¿ç•™æ¡ç›®: ${key} (${entry.module})`);\n          }\n        }\n      }\n    }\n\n    this.saveMappingFile();\n    console.log(`\\nğŸ“Š å»é‡å®Œæˆ: åˆ é™¤äº† ${removedCount} ä¸ªé‡å¤æ¡ç›®`);\n  }\n\n  /**\n   * é€‰æ‹©æœ€ä½³æ˜ å°„æ¡ç›®\n   */\n  private selectBestEntry(entries: Array<{key: string, entry: MappingEntry}>): {key: string, entry: MappingEntry} {\n    // ä¼˜å…ˆçº§è§„åˆ™ï¼š\n    // 1. ä¼˜å…ˆé€‰æ‹©åŸå§‹å®šä¹‰æ¨¡å—ï¼ˆémagic-numbersï¼‰\n    // 2. ä¼˜å…ˆé€‰æ‹©æ›´å…·ä½“çš„æ¨¡å—è·¯å¾„\n    // 3. ä¼˜å…ˆé€‰æ‹©è¾ƒå°çš„æ•°å€¼é”®ï¼ˆé€šå¸¸æ˜¯åŸå§‹æ˜ å°„ï¼‰\n\n    const nonMagicNumbers = entries.filter(({entry}) => \n      !entry.module.includes('magic-numbers')\n    );\n\n    if (nonMagicNumbers.length > 0) {\n      // åœ¨émagic-numbersæ¨¡å—ä¸­é€‰æ‹©æœ€å…·ä½“çš„\n      return nonMagicNumbers.sort((a, b) => {\n        // ä¼˜å…ˆé€‰æ‹©æ›´å…·ä½“çš„æ¨¡å—å\n        const aSpecificity = a.entry.module.split('/').length;\n        const bSpecificity = b.entry.module.split('/').length;\n        if (aSpecificity !== bSpecificity) {\n          return bSpecificity - aSpecificity;\n        }\n        \n        // å…¶æ¬¡æŒ‰æ•°å€¼é”®æ’åº\n        const aNum = parseFloat(a.key);\n        const bNum = parseFloat(b.key);\n        if (!isNaN(aNum) && !isNaN(bNum)) {\n          return aNum - bNum;\n        }\n        \n        return a.key.localeCompare(b.key);\n      })[0];\n    }\n\n    // å¦‚æœéƒ½æ˜¯magic-numbersï¼Œé€‰æ‹©æ•°å€¼æœ€å°çš„\n    return entries.sort((a, b) => {\n      const aNum = parseFloat(a.key);\n      const bNum = parseFloat(b.key);\n      if (!isNaN(aNum) && !isNaN(bNum)) {\n        return aNum - bNum;\n      }\n      return a.key.localeCompare(b.key);\n    })[0];\n  }\n\n  /**\n   * ç”Ÿæˆå»é‡æŠ¥å‘Š\n   */\n  generateReport(): string {\n    const lines: string[] = [];\n    \n    lines.push('# æ˜ å°„å»é‡æŠ¥å‘Š');\n    lines.push('');\n    lines.push(`ç”Ÿæˆæ—¶é—´: ${new Date().toISOString()}`);\n    lines.push('');\n\n    // ç»Ÿè®¡ä¿¡æ¯\n    const totalEntries = Object.keys(this.mappingData).length;\n    \n    lines.push('## å»é‡åç»Ÿè®¡');\n    lines.push(`- æ€»æ˜ å°„æ¡ç›®: ${totalEntries}`);\n    lines.push('');\n\n    // æŒ‰æ¨¡å—åˆ†ç»„ç»Ÿè®¡\n    const moduleStats = new Map<string, number>();\n    for (const entry of Object.values(this.mappingData)) {\n      if (entry && entry.module) {\n        moduleStats.set(entry.module, (moduleStats.get(entry.module) || 0) + 1);\n      }\n    }\n\n    lines.push('## æŒ‰æ¨¡å—åˆ†å¸ƒ');\n    for (const [module, count] of Array.from(moduleStats.entries()).sort()) {\n      lines.push(`- ${module}: ${count} ä¸ªæ˜ å°„`);\n    }\n    lines.push('');\n\n    return lines.join('\\n');\n  }\n}\n\nasync function main() {\n  const mappingPath = path.resolve(__dirname, 'enhanced-codex-mapping.json');\n  const deduplicator = new MappingDeduplicator(mappingPath);\n\n  try {\n    // å»é‡æ˜ å°„\n    deduplicator.deduplicateMappings();\n    \n    // ç”ŸæˆæŠ¥å‘Š\n    const report = deduplicator.generateReport();\n    console.log(`\\n${  report}`);\n    \n    // ä¿å­˜æŠ¥å‘Š\n    const reportPath = path.resolve(__dirname, 'mapping-dedup-report.md');\n    fs.writeFileSync(reportPath, report);\n    console.log(`ğŸ“„ å»é‡æŠ¥å‘Šå·²ä¿å­˜åˆ°: ${reportPath}`);\n    \n  } catch (error) {\n    console.error('âŒ å»é‡å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/direct-test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/fix-mapping-inconsistencies.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[277,280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[277,280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":37,"column":23,"nodeType":"CallExpression","endLine":37,"endColumn":65},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":49,"column":5,"nodeType":"CallExpression","endLine":49,"endColumn":48},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":64,"column":16,"nodeType":"MemberExpression","endLine":64,"endColumn":39},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":171,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":171,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3886,3892],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * ä¿®å¤æ˜ å°„ä¸ä¸€è‡´é—®é¢˜\n * \n * æ ¹æ®æ ¡éªŒæŠ¥å‘Šä¿®æ­£æ˜ å°„æ–‡ä»¶ä¸­çš„é—®é¢˜ï¼š\n * 1. ä¿®æ­£åµŒå¥—å¯¹è±¡å±æ€§çš„æ˜ å°„æ ¼å¼\n * 2. æ¸…ç†æ— æ•ˆçš„æ˜ å°„æ¡ç›®\n * 3. æ›´æ–°æ¨¡å—è·¯å¾„\n */\n\nimport fs from 'fs';\nimport path from 'path';\n\ninterface MappingEntry {\n  export: string;\n  module: string;\n  source?: string;\n  type?: string;\n  alternatives?: any[];\n}\n\nclass MappingFixer {\n  private mappingPath: string;\n  private mappingData: Record<string, MappingEntry>;\n\n  constructor(mappingPath: string) {\n    this.mappingPath = mappingPath;\n    this.mappingData = this.loadMappingFile();\n  }\n\n  /**\n   * åŠ è½½æ˜ å°„æ–‡ä»¶\n   */\n  private loadMappingFile(): Record<string, MappingEntry> {\n    try {\n      const content = fs.readFileSync(this.mappingPath, 'utf-8');\n      return JSON.parse(content);\n    } catch (error) {\n      throw new Error(`Failed to load mapping file: ${error}`);\n    }\n  }\n\n  /**\n   * ä¿å­˜æ˜ å°„æ–‡ä»¶\n   */\n  private saveMappingFile(): void {\n    const content = JSON.stringify(this.mappingData, null, 2);\n    fs.writeFileSync(this.mappingPath, content);\n  }\n\n  /**\n   * ä¿®å¤æ‰€æœ‰æ˜ å°„é—®é¢˜\n   */\n  fixAllMappings(): void {\n    console.log('ğŸ”§ å¼€å§‹ä¿®å¤æ˜ å°„ä¸ä¸€è‡´é—®é¢˜...');\n    \n    let fixedCount = 0;\n    let removedCount = 0;\n\n    for (const [value, entry] of Object.entries(this.mappingData)) {\n      if (!entry || !entry.export || !entry.module) {\n        console.log(`âŒ åˆ é™¤æ— æ•ˆæ¡ç›®: ${value}`);\n        delete this.mappingData[value];\n        removedCount++;\n        continue;\n      }\n\n      const originalExport = entry.export;\n      const fixed = this.fixSingleMapping(entry);\n      \n      if (fixed && entry.export !== originalExport) {\n        console.log(`âœ… ä¿®å¤æ˜ å°„: ${originalExport} â†’ ${entry.export}`);\n        fixedCount++;\n      }\n    }\n\n    this.saveMappingFile();\n    console.log(`\\nğŸ“Š ä¿®å¤å®Œæˆ:`);\n    console.log(`- ä¿®å¤çš„æ˜ å°„: ${fixedCount}`);\n    console.log(`- åˆ é™¤çš„æ— æ•ˆæ¡ç›®: ${removedCount}`);\n  }\n\n  /**\n   * ä¿®å¤å•ä¸ªæ˜ å°„æ¡ç›®\n   */\n  private fixSingleMapping(entry: MappingEntry): boolean {\n    let fixed = false;\n\n    // ä¿®å¤åµŒå¥—å¯¹è±¡å±æ€§æ˜ å°„\n    if (entry.export.includes('.')) {\n      const parts = entry.export.split('.');\n      if (parts.length === 2) {\n        // å¯¹äº OBJECT.PROPERTY æ ¼å¼ï¼Œæ”¹ä¸ºåªæ˜ å°„åˆ° OBJECT\n        entry.export = parts[0];\n        fixed = true;\n      }\n    }\n\n    // ä¿®å¤æ¨¡å—è·¯å¾„\n    const originalModule = entry.module;\n    entry.module = this.fixModulePath(entry.module);\n    if (entry.module !== originalModule) {\n      fixed = true;\n    }\n\n    return fixed;\n  }\n\n  /**\n   * ä¿®å¤æ¨¡å—è·¯å¾„\n   */\n  private fixModulePath(modulePath: string): string {\n    // å°†æŒ‡å‘magic-numbersçš„è·¯å¾„é‡å®šå‘åˆ°æ­£ç¡®çš„æ¨¡å—\n    if (modulePath === '@/constants/magic-numbers') {\n      // è¿™äº›åº”è¯¥æ ¹æ®å®é™…æƒ…å†µé‡å®šå‘åˆ°æ­£ç¡®çš„æ¨¡å—\n      // æš‚æ—¶ä¿æŒä¸å˜ï¼Œè®©åç»­çš„æ ¡éªŒæ¥å¤„ç†\n      return modulePath;\n    }\n\n    // æ ‡å‡†åŒ–æ¨¡å—è·¯å¾„æ ¼å¼\n    if (modulePath.startsWith('@/constants/') && !modulePath.endsWith('-constants')) {\n      // ç¡®ä¿è·¯å¾„æ ¼å¼æ­£ç¡®\n      return modulePath;\n    }\n\n    return modulePath;\n  }\n\n  /**\n   * ç”Ÿæˆä¿®å¤æŠ¥å‘Š\n   */\n  generateReport(): string {\n    const lines: string[] = [];\n    \n    lines.push('# æ˜ å°„ä¿®å¤æŠ¥å‘Š');\n    lines.push('');\n    lines.push(`ç”Ÿæˆæ—¶é—´: ${new Date().toISOString()}`);\n    lines.push('');\n\n    // ç»Ÿè®¡ä¿¡æ¯\n    const totalEntries = Object.keys(this.mappingData).length;\n    const validEntries = Object.values(this.mappingData).filter(entry => \n      entry && entry.export && entry.module\n    ).length;\n\n    lines.push('## ä¿®å¤åç»Ÿè®¡');\n    lines.push(`- æ€»æ˜ å°„æ¡ç›®: ${totalEntries}`);\n    lines.push(`- æœ‰æ•ˆæ¡ç›®: ${validEntries}`);\n    lines.push(`- æ— æ•ˆæ¡ç›®: ${totalEntries - validEntries}`);\n    lines.push('');\n\n    // æŒ‰æ¨¡å—åˆ†ç»„ç»Ÿè®¡\n    const moduleStats = new Map<string, number>();\n    for (const entry of Object.values(this.mappingData)) {\n      if (entry && entry.module) {\n        moduleStats.set(entry.module, (moduleStats.get(entry.module) || 0) + 1);\n      }\n    }\n\n    lines.push('## æŒ‰æ¨¡å—åˆ†å¸ƒ');\n    for (const [module, count] of Array.from(moduleStats.entries()).sort()) {\n      lines.push(`- ${module}: ${count} ä¸ªæ˜ å°„`);\n    }\n    lines.push('');\n\n    return lines.join('\\n');\n  }\n}\n\nasync function main() {\n  const mappingPath = path.resolve(__dirname, 'enhanced-codex-mapping.json');\n  const fixer = new MappingFixer(mappingPath);\n\n  try {\n    // ä¿®å¤æ˜ å°„\n    fixer.fixAllMappings();\n    \n    // ç”ŸæˆæŠ¥å‘Š\n    const report = fixer.generateReport();\n    console.log(`\\n${  report}`);\n    \n    // ä¿å­˜æŠ¥å‘Š\n    const reportPath = path.resolve(__dirname, 'mapping-fix-report.md');\n    fs.writeFileSync(reportPath, report);\n    console.log(`ğŸ“„ ä¿®å¤æŠ¥å‘Šå·²ä¿å­˜åˆ°: ${reportPath}`);\n    \n  } catch (error) {\n    console.error('âŒ ä¿®å¤å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/generate-constants-file.ts","messages":[{"ruleId":"complexity","severity":1,"message":"Function 'groupConstants' has a complexity of 22. Maximum allowed is 18.","line":19,"column":1,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":119,"endColumn":2},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'num' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":80,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":80,"endColumn":14},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":153,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":153,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3786,3792],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\n/**\n * ç”Ÿæˆå®Œæ•´çš„å¸¸é‡å®šä¹‰æ–‡ä»¶\n */\n\ninterface ConstantGroup {\n  title: string;\n  description: string;\n  constants: Array<{ name: string; value: string; comment?: string }>;\n}\n\n/**\n * æ ¹æ®å¸¸é‡ååˆ†ç»„\n */\nfunction groupConstants(mapping: Record<string, string>): ConstantGroup[] {\n  const groups: ConstantGroup[] = [\n    {\n      title: 'HTTPçŠ¶æ€ç ',\n      description: 'HTTPå“åº”çŠ¶æ€ç å¸¸é‡',\n      constants: []\n    },\n    {\n      title: 'æ—¶é—´ç›¸å…³å¸¸é‡',\n      description: 'æ—¶é—´ã€æŒç»­æ—¶é—´ç›¸å…³å¸¸é‡ï¼ˆæ¯«ç§’ï¼‰',\n      constants: []\n    },\n    {\n      title: 'å“åº”å¼æ–­ç‚¹',\n      description: 'å±å¹•å°ºå¯¸æ–­ç‚¹å¸¸é‡ï¼ˆåƒç´ ï¼‰',\n      constants: []\n    },\n    {\n      title: 'ç™¾åˆ†æ¯”å’Œé€æ˜åº¦',\n      description: 'ç™¾åˆ†æ¯”ã€é€æ˜åº¦ç›¸å…³å¸¸é‡ï¼ˆ0-1ä¹‹é—´çš„å°æ•°ï¼‰',\n      constants: []\n    },\n    {\n      title: 'åŠ¨ç”»æŒç»­æ—¶é—´',\n      description: 'åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœæŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰',\n      constants: []\n    },\n    {\n      title: 'å†…å­˜å’Œå­˜å‚¨å¤§å°',\n      description: 'å†…å­˜ã€å­˜å‚¨å¤§å°ç›¸å…³å¸¸é‡ï¼ˆå­—èŠ‚ï¼‰',\n      constants: []\n    },\n    {\n      title: 'è§’åº¦å¸¸é‡',\n      description: 'è§’åº¦ç›¸å…³å¸¸é‡ï¼ˆåº¦ï¼‰',\n      constants: []\n    },\n    {\n      title: 'åœ°ç†åæ ‡',\n      description: 'åœ°ç†åæ ‡å’Œæµ‹è¯•åæ ‡å¸¸é‡',\n      constants: []\n    },\n    {\n      title: 'ç«¯å£å·',\n      description: 'ç½‘ç»œç«¯å£å·å¸¸é‡',\n      constants: []\n    },\n    {\n      title: 'å¹´ä»½',\n      description: 'å¹´ä»½ç›¸å…³å¸¸é‡',\n      constants: []\n    },\n    {\n      title: 'æ•°å€¼å¸¸é‡',\n      description: 'é€šç”¨æ•°å€¼å¸¸é‡',\n      constants: []\n    }\n  ];\n\n  // åˆ†ç»„æ˜ å°„\n  for (const [numStr, constantName] of Object.entries(mapping)) {\n    const num = parseFloat(numStr);\n    const constant = { name: constantName, value: numStr };\n\n    if (constantName.startsWith('HTTP_')) {\n      groups[0].constants.push(constant);\n    } else if (constantName.includes('_MS') || constantName.includes('SECOND') || constantName.includes('MINUTE') || constantName.includes('HOUR') || constantName.includes('DAY') || constantName.includes('TIME_')) {\n      groups[1].constants.push(constant);\n    } else if (constantName.startsWith('BREAKPOINT_')) {\n      groups[2].constants.push(constant);\n    } else if (constantName.startsWith('PERCENT_') || constantName.startsWith('OPACITY_') || constantName.startsWith('DECIMAL_')) {\n      groups[3].constants.push(constant);\n    } else if (constantName.startsWith('ANIMATION_')) {\n      groups[4].constants.push(constant);\n    } else if (constantName.startsWith('BYTES_') || constantName.startsWith('MEMORY_')) {\n      groups[5].constants.push(constant);\n    } else if (constantName.startsWith('ANGLE_')) {\n      groups[6].constants.push(constant);\n    } else if (constantName.startsWith('COORD_') || constantName.startsWith('TEST_COORDINATE') || constantName.startsWith('COORDINATE_')) {\n      groups[7].constants.push(constant);\n    } else if (constantName.startsWith('PORT_')) {\n      groups[8].constants.push(constant);\n    } else if (constantName.startsWith('YEAR_')) {\n      groups[9].constants.push(constant);\n    } else {\n      groups[10].constants.push(constant);\n    }\n  }\n\n  // è¿‡æ»¤ç©ºç»„å¹¶æ’åº\n  return groups\n    .filter(group => group.constants.length > 0)\n    .map(group => ({\n      ...group,\n      constants: group.constants.sort((a, b) => {\n        const aNum = parseFloat(a.value);\n        const bNum = parseFloat(b.value);\n        return aNum - bNum;\n      })\n    }));\n}\n\n/**\n * ç”ŸæˆTypeScriptå¸¸é‡å®šä¹‰\n */\nfunction generateConstantDefinition(name: string, value: string): string {\n  const num = parseFloat(value);\n  \n  if (Number.isInteger(num)) {\n    return `export const ${name} = ${num};`;\n  } \n    return `export const ${name} = ${num};`;\n  \n}\n\n/**\n * ç”Ÿæˆæ–‡ä»¶å¤´éƒ¨æ³¨é‡Š\n */\nfunction generateFileHeader(): string {\n  return `// è‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—å¸¸é‡æ–‡ä»¶\n// ç”¨äºæ›¿æ¢ä»£ç ä¸­çš„é­”æ³•æ•°å­—ï¼Œæå‡å¯è¯»æ€§å’Œç»´æŠ¤æ€§\n// \n// æ­¤æ–‡ä»¶ç”± AST é­”æ³•æ•°å­—æ›¿æ¢ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ\n// ç”Ÿæˆæ—¶é—´: ${new Date().toISOString()}\n// \n// ğŸš« è¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹æ­¤æ–‡ä»¶\n// å¦‚éœ€æ·»åŠ æ–°å¸¸é‡ï¼Œè¯·æ›´æ–° scripts/magic-numbers/mapping.json\n\n`;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  console.log('ğŸ“ å¼€å§‹ç”Ÿæˆå¸¸é‡å®šä¹‰æ–‡ä»¶...');\n  \n  // è¯»å–æ˜ å°„æ–‡ä»¶\n  const mappingPath = resolve(__dirname, 'mapping.json');\n  const mapping: Record<string, string> = JSON.parse(readFileSync(mappingPath, 'utf-8'));\n  \n  console.log(`ğŸ“Š å¤„ç† ${Object.keys(mapping).length} ä¸ªå¸¸é‡`);\n  \n  // åˆ†ç»„å¸¸é‡\n  const groups = groupConstants(mapping);\n  \n  // ç”Ÿæˆæ–‡ä»¶å†…å®¹\n  let content = generateFileHeader();\n  \n  for (const group of groups) {\n    content += `// ${group.title}\\n`;\n    content += `// ${group.description}\\n`;\n    \n    for (const constant of group.constants) {\n      content += `${generateConstantDefinition(constant.name, constant.value)  }\\n`;\n    }\n    \n    content += '\\n';\n  }\n  \n  // å†™å…¥æ–‡ä»¶\n  const outputPath = resolve(process.cwd(), 'src/constants/magic-numbers.ts');\n  writeFileSync(outputPath, content);\n  \n  console.log('ğŸ“Š å¸¸é‡å®šä¹‰æ–‡ä»¶ç”Ÿæˆå®Œæˆï¼');\n  console.log(`  æ€»å¸¸é‡æ•°: ${Object.keys(mapping).length} ä¸ª`);\n  console.log(`  åˆ†ç»„æ•°: ${groups.length} ä¸ª`);\n  \n  // æ˜¾ç¤ºåˆ†ç»„ç»Ÿè®¡\n  console.log('');\n  console.log('ğŸ“ˆ åˆ†ç»„ç»Ÿè®¡:');\n  groups.forEach(group => {\n    console.log(`  ${group.title}: ${group.constants.length} ä¸ª`);\n  });\n  \n  console.log('');\n  console.log(`ğŸ“„ æ–‡ä»¶å·²ä¿å­˜åˆ°: ${outputPath}`);\n  \n  return content;\n}\n\n// è¿è¡Œç”Ÿæˆå™¨\nif (require.main === module) {\n  main().catch((error) => {\n    console.error('âŒ å¸¸é‡å®šä¹‰æ–‡ä»¶ç”Ÿæˆå¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { groupConstants, generateConstantDefinition };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/generate-constants.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Function 'generateConstantName' has too many statements (41). Maximum allowed is 35.","line":9,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":125,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Function 'generateConstantName' has a complexity of 34. Maximum allowed is 18.","line":9,"column":1,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":125,"endColumn":2},{"ruleId":"no-useless-escape","severity":1,"message":"Unnecessary escape character: \\..","line":12,"column":43,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":12,"endColumn":44,"suggestions":[{"messageId":"removeEscape","fix":{"range":[287,288],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[287,287],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":43,"column":9,"nodeType":"MemberExpression","endLine":43,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":44,"column":14,"nodeType":"MemberExpression","endLine":44,"endColumn":34},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":56,"column":20,"nodeType":"CallExpression","messageId":"missingRadix","endLine":56,"endColumn":33,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1477,1477],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":83,"column":7,"nodeType":"MemberExpression","endLine":83,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":84,"column":12,"nodeType":"MemberExpression","endLine":84,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":134,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3837,3840],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3837,3840],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"require-await","severity":1,"message":"Async function 'generateConstants' has no 'await' expression.","line":174,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":174,"endColumn":33,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4512,4518],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":191,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":191,"endColumn":17},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":200,"column":10,"nodeType":"MemberExpression","endLine":200,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":202,"column":7,"nodeType":"MemberExpression","endLine":202,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":217,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":217,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { writeFileSync, readFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\n/**\n * ç”Ÿæˆå¸¸é‡åç§°\n */\nfunction generateConstantName(num: string): string {\n  // å¤„ç†ç§‘å­¦è®¡æ•°æ³•\n  if (num.includes('e') || num.includes('E')) {\n    return `SCIENTIFIC_${num.replace(/[e\\-\\.]/gi, '_').replace(/\\+/g, 'PLUS_').toUpperCase()}`;\n  }\n  \n  // å¤„ç†è´Ÿæ•°\n  if (num.startsWith('-')) {\n    return `NEGATIVE_${generateConstantName(num.slice(1))}`;\n  }\n  \n  // å¤„ç†å°æ•°\n  if (num.includes('.')) {\n    const parts = num.split('.');\n    const intPart = parts[0] || '0';\n    const decPart = parts[1] || '0';\n    \n    // ç‰¹æ®Šå¤„ç†ä¸€äº›å¸¸è§çš„å°æ•°\n    const specialDecimals: Record<string, string> = {\n      '0.1': 'DECIMAL_TENTH',\n      '0.2': 'DECIMAL_TWENTY_PERCENT',\n      '0.25': 'DECIMAL_QUARTER',\n      '0.3': 'DECIMAL_THIRTY_PERCENT',\n      '0.4': 'DECIMAL_FORTY_PERCENT',\n      '0.5': 'DECIMAL_HALF',\n      '0.6': 'DECIMAL_SIXTY_PERCENT',\n      '0.7': 'DECIMAL_SEVENTY_PERCENT',\n      '0.75': 'DECIMAL_THREE_QUARTERS',\n      '0.8': 'DECIMAL_EIGHTY_PERCENT',\n      '0.9': 'DECIMAL_NINETY_PERCENT',\n      '0.95': 'DECIMAL_NINETY_FIVE_PERCENT',\n      '0.99': 'DECIMAL_NINETY_NINE_PERCENT',\n    };\n    \n    if (specialDecimals[num]) {\n      return specialDecimals[num];\n    }\n    \n    // å¤„ç†é•¿å°æ•°ï¼ˆæµ‹è¯•æ•°æ®ï¼‰\n    if (decPart.length > 6) {\n      return `TEST_DECIMAL_${intPart}_${decPart.slice(0, 6)}`;\n    }\n    \n    return `DECIMAL_${intPart}_${decPart}`;\n  }\n  \n  // å¤„ç†æ•´æ•°\n  const numValue = parseInt(num);\n  \n  // ç‰¹æ®Šå¤„ç†ä¸€äº›å¸¸è§çš„æ•°å­—\n  const specialNumbers: Record<string, string> = {\n    '0': 'ZERO',\n    '1': 'ONE',\n    '2': 'TWO',\n    '3': 'THREE',\n    '4': 'FOUR',\n    '5': 'FIVE',\n    '6': 'SIX',\n    '7': 'SEVEN',\n    '8': 'EIGHT',\n    '9': 'NINE',\n    '10': 'TEN',\n    '42': 'ANSWER_TO_EVERYTHING',\n    '100': 'ONE_HUNDRED',\n    '200': 'HTTP_OK',\n    '400': 'HTTP_BAD_REQUEST',\n    '401': 'HTTP_UNAUTHORIZED',\n    '403': 'HTTP_FORBIDDEN',\n    '404': 'HTTP_NOT_FOUND',\n    '500': 'HTTP_INTERNAL_SERVER_ERROR',\n    '1000': 'ONE_THOUSAND',\n    '1024': 'BYTES_PER_KB',\n  };\n  \n  if (specialNumbers[num]) {\n    return specialNumbers[num];\n  }\n  \n  // HTTPçŠ¶æ€ç \n  if (numValue >= 100 && numValue < 600) {\n    return `HTTP_${num}`;\n  }\n  \n  // ç«¯å£å·\n  if (numValue >= 1000 && numValue <= 65535 && num.endsWith('80') || num.endsWith('00')) {\n    return `PORT_${num}`;\n  }\n  \n  // æ—¶é—´ç›¸å…³\n  if (numValue === 60) return 'SECONDS_PER_MINUTE';\n  if (numValue === 3600) return 'SECONDS_PER_HOUR';\n  if (numValue === 86400) return 'SECONDS_PER_DAY';\n  if (numValue === 86400000) return 'MILLISECONDS_PER_DAY';\n  if (numValue === 3600000) return 'MILLISECONDS_PER_HOUR';\n  if (numValue === 60000) return 'MILLISECONDS_PER_MINUTE';\n  \n  // å±å¹•å°ºå¯¸\n  if (numValue === 320) return 'MOBILE_WIDTH_SMALL';\n  if (numValue === 375) return 'MOBILE_WIDTH_MEDIUM';\n  if (numValue === 640) return 'TABLET_WIDTH_SMALL';\n  if (numValue === 768) return 'TABLET_WIDTH';\n  if (numValue === 1024) return 'DESKTOP_WIDTH_SMALL';\n  if (numValue === 1280) return 'DESKTOP_WIDTH_MEDIUM';\n  if (numValue === 1920) return 'DESKTOP_WIDTH_LARGE';\n  \n  // å†…å­˜å¤§å°\n  if (numValue === 1048576) return 'BYTES_PER_MB';\n  if (numValue === 1073741824) return 'BYTES_PER_GB';\n  \n  // å¤§æ•°å­—\n  if (numValue >= 1000000000) return `BILLION_${Math.floor(numValue / 1000000000)}`;\n  if (numValue >= 1000000) return `MILLION_${Math.floor(numValue / 1000000)}`;\n  if (numValue >= 1000) return `THOUSAND_${Math.floor(numValue / 1000)}`;\n  \n  // é»˜è®¤å‘½å\n  return `NUMBER_${num.replace(/\\./g, '_')}`;\n}\n\n/**\n * ä»é¢„æ£€è¾“å‡ºä¸­æå–ç¼ºå¤±çš„å¸¸é‡\n */\nfunction extractMissingConstants(): string[] {\n  try {\n    // è¿è¡Œé¢„æ£€å¹¶æ•è·è¾“å‡º\n    const { execSync } = require('child_process');\n    const output = execSync('tsx scripts/magic-numbers/preflight.ts', { \n      encoding: 'utf8',\n      cwd: process.cwd(),\n    });\n    \n    // è¿™ä¸ä¼šæ‰§è¡Œåˆ°ï¼Œå› ä¸ºé¢„æ£€ä¼šå¤±è´¥\n    return [];\n  } catch (error: any) {\n    const output = error.stdout || error.message || '';\n    \n    // ä»è¾“å‡ºä¸­æå–æ•°å­—\n    const lines = output.split('\\n');\n    const numbers: string[] = [];\n    \n    let inMissingSection = false;\n    for (const line of lines) {\n      if (line.includes('ç¼ºå¤±å¸¸é‡å®šä¹‰')) {\n        inMissingSection = true;\n        continue;\n      }\n      \n      if (inMissingSection && line.includes('ğŸ“ æ¶‰åŠçš„æ–‡ä»¶')) {\n        break;\n      }\n      \n      if (inMissingSection && line.includes('\"') && line.includes(':')) {\n        const match = line.match(/\"([^\"]+)\":/);\n        if (match) {\n          numbers.push(match[1]);\n        }\n      }\n    }\n    \n    return numbers;\n  }\n}\n\n/**\n * ç”Ÿæˆæ˜ å°„æ–‡ä»¶å’Œå¸¸é‡å®šä¹‰\n */\nasync function generateConstants() {\n  console.log('ğŸ” æå–ç¼ºå¤±çš„å¸¸é‡...');\n  \n  const missingNumbers = extractMissingConstants();\n  console.log(`ğŸ“Š å‘ç° ${missingNumbers.length} ä¸ªç¼ºå¤±çš„å¸¸é‡`);\n  \n  if (missingNumbers.length === 0) {\n    console.log('âœ… æ²¡æœ‰ç¼ºå¤±çš„å¸¸é‡');\n    return;\n  }\n  \n  // è¯»å–ç°æœ‰æ˜ å°„\n  const mappingPath = resolve(__dirname, 'mapping.json');\n  let existingMapping: Record<string, string> = {};\n  \n  try {\n    existingMapping = JSON.parse(readFileSync(mappingPath, 'utf-8'));\n  } catch (error) {\n    console.log('ğŸ“ åˆ›å»ºæ–°çš„æ˜ å°„æ–‡ä»¶');\n  }\n  \n  // ç”Ÿæˆæ–°çš„æ˜ å°„\n  const newMapping = { ...existingMapping };\n  const newConstants: Array<{ name: string; value: string }> = [];\n  \n  for (const num of missingNumbers) {\n    if (!newMapping[num]) {\n      const constantName = generateConstantName(num);\n      newMapping[num] = constantName;\n      newConstants.push({ name: constantName, value: num });\n    }\n  }\n  \n  // ä¿å­˜æ˜ å°„æ–‡ä»¶\n  writeFileSync(mappingPath, JSON.stringify(newMapping, null, 2));\n  console.log(`ğŸ“„ æ˜ å°„æ–‡ä»¶å·²æ›´æ–°: ${Object.keys(newMapping).length} ä¸ªå¸¸é‡`);\n  \n  // è¯»å–ç°æœ‰çš„å¸¸é‡æ–‡ä»¶\n  const constantsPath = resolve(process.cwd(), 'src/constants/magic-numbers.ts');\n  let constantsContent = '';\n  \n  try {\n    constantsContent = readFileSync(constantsPath, 'utf-8');\n  } catch (error) {\n    constantsContent = '// è‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—å¸¸é‡æ–‡ä»¶\\n// ç”¨äºæ›¿æ¢ä»£ç ä¸­çš„é­”æ³•æ•°å­—ï¼Œæå‡å¯è¯»æ€§å’Œç»´æŠ¤æ€§\\n\\n';\n  }\n  \n  // æ·»åŠ æ–°å¸¸é‡\n  if (newConstants.length > 0) {\n    constantsContent += '\\n// è‡ªåŠ¨ç”Ÿæˆçš„å¸¸é‡\\n';\n    \n    for (const { name, value } of newConstants) {\n      constantsContent += `export const ${name} = ${value};\\n`;\n    }\n    \n    writeFileSync(constantsPath, constantsContent);\n    console.log(`ğŸ“„ å¸¸é‡æ–‡ä»¶å·²æ›´æ–°: æ·»åŠ äº† ${newConstants.length} ä¸ªæ–°å¸¸é‡`);\n  }\n  \n  console.log('âœ… å¸¸é‡ç”Ÿæˆå®Œæˆ');\n}\n\n// è¿è¡Œç”Ÿæˆå™¨\nif (require.main === module) {\n  generateConstants().catch(console.error);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/generate-enhanced-mapping.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resolve' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ConstantInfo' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MappingEntry' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":23},{"ruleId":"max-statements","severity":1,"message":"Async function 'generateEnhancedMapping' has too many statements (37). Maximum allowed is 35.","line":29,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":129,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'generateEnhancedMapping' has no 'await' expression.","line":29,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":29,"endColumn":39,"suggestions":[{"messageId":"removeAsync","fix":{"range":[455,461],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_stats'.","line":41,"column":29,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":41,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1463,1466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1463,1466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_stats'.","line":59,"column":26,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":59,"endColumn":45},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_stats'.","line":60,"column":21,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":60,"endColumn":40},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":68,"column":7,"nodeType":"MemberExpression","endLine":68,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":80,"column":30,"nodeType":"MemberExpression","endLine":80,"endColumn":74},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":82,"column":7,"nodeType":"MemberExpression","endLine":82,"endColumn":37},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_stats'.","line":96,"column":3,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":96,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":101,"column":10,"nodeType":"MemberExpression","endLine":101,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":101,"column":37,"nodeType":"MemberExpression","endLine":101,"endColumn":74},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":102,"column":25,"nodeType":"MemberExpression","endLine":102,"endColumn":62},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":103,"column":7,"nodeType":"MemberExpression","endLine":103,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4363,4366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4363,4366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\ninterface ConstantInfo {\n  export: string;\n  module: string;\n  value: number;\n  filePath: string;\n  line: number;\n}\n\ninterface MappingEntry {\n  export: string;\n  module: string;\n  source: string;\n  alternatives?: Array<{\n    export: string;\n    module: string;\n    source: string;\n  }>;\n}\n\n/**\n * ç”Ÿæˆå¢å¼ºç‰ˆCODEXæ˜ å°„\n * æ•´åˆç°æœ‰å¸¸é‡åˆ†æç»“æœï¼Œç”Ÿæˆæ”¯æŒæ¨¡å—å¯¼å…¥çš„æ˜ å°„æ–‡ä»¶\n */\nasync function generateEnhancedMapping() {\n  console.log('ğŸ”§ ç”Ÿæˆå¢å¼ºç‰ˆCODEXæ˜ å°„...');\n  \n  // è¯»å–ç°æœ‰å¸¸é‡åˆ†æç»“æœ\n  const analysisPath = 'scripts/magic-numbers/existing-constants-analysis.json';\n  const analysisData = JSON.parse(readFileSync(analysisPath, 'utf-8'));\n  \n  // è¯»å–åŸå§‹CODEXæ˜ å°„\n  const originalMappingPath = 'scripts/magic-numbers/codex-mapping.json';\n  const originalMapping = JSON.parse(readFileSync(originalMappingPath, 'utf-8'));\n  \n  console.log(`ğŸ“Š åŸå§‹CODEXæ˜ å°„: ${Object.keys(originalMapping).filter(k => !k.startsWith('_')).length} ä¸ª`);\n  console.log(`ğŸ“Š ç°æœ‰å¸¸é‡åˆ†æ: ${analysisData._stats.uniqueValues} ä¸ªå”¯ä¸€æ•°å€¼`);\n  \n  // é¢„æ£€ä¸­å‘ç°çš„ç¼ºå¤±æ•°å­—\n  const missingNumbers = [\n    \"14\", \"17\", \"18\", \"22\", \"23\", \"35\", \"36\", \"64\", \"82\", \"83\", \"84\", \"87\", \"88\",\n    \"130\", \"131\", \"132\", \"133\", \"136\", \"184.704\", \"254\", \"255\", \"368\", \"450\", \"600\",\n    \"890\", \"1005\", \"1010\", \"1020\", \"1080\", \"1180\", \"1250\", \"1300\", \"1400\", \"1412\",\n    \"1450\", \"1900\", \"2200\", \"2800\", \"200100\"\n  ];\n  \n  // ç”Ÿæˆå¢å¼ºæ˜ å°„\n  const enhancedMapping: Record<string, any> = {\n    _comment: \"CODEXåˆ†å±‚æ²»ç†ï¼šå¢å¼ºç‰ˆé­”æ³•æ•°å­—æ˜ å°„\",\n    _description: \"æ•´åˆç°æœ‰å¸¸é‡å®šä¹‰ï¼Œæ”¯æŒæ¨¡å—å¯¼å…¥çš„æ˜ å°„æ–‡ä»¶\",\n    _optimization: \"ä»301ä¸ªå‡å°‘åˆ°æ ¸å¿ƒå¸¸é‡ï¼Œå¤ç”¨ç°æœ‰è¯­ä¹‰åŒ–å¸¸é‡\",\n    _updated: new Date().toISOString(),\n    _stats: {\n      originalCodexConstants: Object.keys(originalMapping).filter(k => !k.startsWith('_')).length,\n      existingConstants: analysisData._stats.totalConstants,\n      uniqueValues: analysisData._stats.uniqueValues,\n      missingNumbersFound: 0,\n    },\n  };\n  \n  // 1. ä¿ç•™åŸå§‹CODEXæ˜ å°„ä¸­çš„æ ¸å¿ƒå¸¸é‡\n  for (const [value, constantName] of Object.entries(originalMapping)) {\n    if (!value.startsWith('_')) {\n      enhancedMapping[value] = {\n        export: constantName,\n        module: \"@/constants/magic-numbers\",\n        source: \"CODEXæ ¸å¿ƒå¸¸é‡\",\n        type: \"codex-core\",\n      };\n    }\n  }\n  \n  // 2. æ·»åŠ ç¼ºå¤±æ•°å­—çš„ç°æœ‰å¸¸é‡æ˜ å°„\n  let foundCount = 0;\n  for (const missingNumber of missingNumbers) {\n    const candidateMapping = analysisData.candidateMapping[missingNumber];\n    if (candidateMapping) {\n      enhancedMapping[missingNumber] = {\n        export: candidateMapping.export,\n        module: candidateMapping.module,\n        source: candidateMapping.source,\n        type: \"existing-constant\",\n        alternatives: candidateMapping.alternatives,\n      };\n      foundCount++;\n      console.log(`  âœ… æ‰¾åˆ°ç¼ºå¤±æ•°å­— ${missingNumber}: ${candidateMapping.export}`);\n    } else {\n      console.log(`  âŒ æœªæ‰¾åˆ°ç¼ºå¤±æ•°å­— ${missingNumber} çš„å¸¸é‡å®šä¹‰`);\n    }\n  }\n  \n  enhancedMapping._stats.missingNumbersFound = foundCount;\n  \n  // 3. æ·»åŠ é«˜é¢‘ä½¿ç”¨çš„å…¶ä»–å¸¸é‡ï¼ˆå¯é€‰ï¼‰\n  const highFrequencyNumbers = [\"100\", \"200\", \"300\", \"400\", \"500\", \"1000\"];\n  for (const number of highFrequencyNumbers) {\n    if (!enhancedMapping[number] && analysisData.candidateMapping[number]) {\n      const candidate = analysisData.candidateMapping[number];\n      enhancedMapping[number] = {\n        export: candidate.export,\n        module: candidate.module,\n        source: candidate.source,\n        type: \"high-frequency\",\n        alternatives: candidate.alternatives,\n      };\n      console.log(`  ğŸ“ˆ æ·»åŠ é«˜é¢‘æ•°å­— ${number}: ${candidate.export}`);\n    }\n  }\n  \n  // ä¿å­˜å¢å¼ºæ˜ å°„\n  const outputPath = 'scripts/magic-numbers/enhanced-codex-mapping.json';\n  writeFileSync(outputPath, JSON.stringify(enhancedMapping, null, 2));\n  \n  console.log(`\\nğŸ’¾ å¢å¼ºæ˜ å°„ä¿å­˜åˆ°: ${outputPath}`);\n  console.log(`ğŸ“Š æ€»è®¡æ˜ å°„: ${Object.keys(enhancedMapping).filter(k => !k.startsWith('_')).length} ä¸ªæ•°å€¼`);\n  console.log(`âœ… ç¼ºå¤±æ•°å­—è¦†ç›–: ${foundCount}/${missingNumbers.length} (${Math.round(foundCount/missingNumbers.length*100)}%)`);\n  \n  // ç”Ÿæˆå¯¼å…¥ä¼˜åŒ–å»ºè®®\n  const importSuggestions = generateImportSuggestions(enhancedMapping);\n  const suggestionsPath = 'scripts/magic-numbers/import-optimization-suggestions.json';\n  writeFileSync(suggestionsPath, JSON.stringify(importSuggestions, null, 2));\n  console.log(`ğŸ“‹ å¯¼å…¥ä¼˜åŒ–å»ºè®®ä¿å­˜åˆ°: ${suggestionsPath}`);\n  \n  return enhancedMapping;\n}\n\n/**\n * ç”Ÿæˆå¯¼å…¥ä¼˜åŒ–å»ºè®®\n */\nfunction generateImportSuggestions(mapping: Record<string, any>) {\n  const moduleUsage = new Map<string, string[]>();\n  \n  for (const [value, info] of Object.entries(mapping)) {\n    if (!value.startsWith('_') && info.module) {\n      if (!moduleUsage.has(info.module)) {\n        moduleUsage.set(info.module, []);\n      }\n      moduleUsage.get(info.module)!.push(`${info.export} (${value})`);\n    }\n  }\n  \n  const suggestions = {\n    _comment: \"å¯¼å…¥ä¼˜åŒ–å»ºè®®\",\n    _description: \"æŒ‰æ¨¡å—åˆ†ç»„çš„å¸¸é‡ä½¿ç”¨æƒ…å†µï¼Œç”¨äºä¼˜åŒ–å¯¼å…¥è¯­å¥\",\n    _generated: new Date().toISOString(),\n    moduleUsage: Object.fromEntries(moduleUsage),\n    importStatements: Array.from(moduleUsage.entries()).map(([module, constants]) => ({\n      module,\n      constantCount: constants.length,\n      suggestedImport: `import { ${constants.map(c => c.split(' ')[0]).join(', ')} } from '${module}';`,\n    })),\n  };\n  \n  return suggestions;\n}\n\n// è¿è¡Œç”Ÿæˆ\nif (require.main === module) {\n  generateEnhancedMapping().catch((error) => {\n    console.error('âŒ ç”Ÿæˆå¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { generateEnhancedMapping };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/preflight.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Async function 'preflight' has too many statements (36). Maximum allowed is 35.","line":11,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":103,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'preflight' has no 'await' expression.","line":11,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":11,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[209,215],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":69,"column":47,"nodeType":"MemberExpression","endLine":69,"endColumn":59},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":97,"column":31,"nodeType":"MemberExpression","endLine":97,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { Project, ts } from 'ts-morph';\nimport { loadMapping, shouldSkipNode, normalize } from './utils';\nimport { resolve } from 'node:path';\n\n/**\n * é¢„æ£€éªŒè¯è„šæœ¬\n * æ‰«ææ‰€æœ‰å°†è¢«æ›¿æ¢çš„æ•°å­—ï¼Œç¡®ä¿å¯¹åº”çš„å¸¸é‡éƒ½å·²å®šä¹‰\n */\nasync function preflight() {\n  console.log('ğŸ” ASTé­”æ³•æ•°å­—é¢„æ£€éªŒè¯å¯åŠ¨...');\n\n  // åˆå§‹åŒ–é¡¹ç›® - ä¿®å¤è·¯å¾„é—®é¢˜\n  const rootDir = process.cwd().endsWith('scripts/magic-numbers')\n    ? resolve(process.cwd(), '../..')\n    : process.cwd();\n\n  const project = new Project({\n    tsConfigFilePath: resolve(rootDir, 'tsconfig.json')\n  });\n\n  // æ·»åŠ æºæ–‡ä»¶\n  project.addSourceFilesAtPaths(resolve(rootDir, 'src/**/*.{ts,tsx}'));\n  const sourceFiles = project.getSourceFiles();\n\n  console.log(`ğŸ“Š æ‰«æ ${sourceFiles.length} ä¸ªæ–‡ä»¶...`);\n\n  // åŠ è½½æ˜ å°„\n  const mapping = loadMapping();\n  if (Object.keys(mapping).length === 0) {\n    console.error('âŒ æ˜ å°„æ–‡ä»¶ä¸ºç©ºæˆ–åŠ è½½å¤±è´¥');\n    process.exit(1);\n  }\n\n  console.log(`ğŸ“‹ å¯ç”¨å¸¸é‡æ˜ å°„: ${Object.keys(mapping).length} ä¸ª`);\n\n  // æ”¶é›†æ‰€æœ‰å°†è¢«ä½¿ç”¨çš„æ•°å­—\n  const willUse = new Set<string>();\n  const fileUsage = new Map<string, Set<string>>();\n\n  for (const sourceFile of sourceFiles) {\n    const filePath = sourceFile.getFilePath().replace(`${process.cwd()  }/`, '');\n    const numbersInFile = new Set<string>();\n\n    sourceFile.forEachDescendant((node) => {\n      if (ts.isNumericLiteral(node.compilerNode)) {\n        // åº”ç”¨ç›¸åŒçš„è¿‡æ»¤é€»è¾‘\n        if (shouldSkipNode(node)) {\n          return;\n        }\n\n        const text = node.getText();\n        const normalized = normalize(text);\n\n        willUse.add(normalized);\n        numbersInFile.add(normalized);\n      }\n    });\n\n    if (numbersInFile.size > 0) {\n      fileUsage.set(filePath, numbersInFile);\n    }\n  }\n\n  console.log(`ğŸ”¢ å‘ç° ${willUse.size} ä¸ªä¸åŒçš„æ•°å­—å°†è¢«æ›¿æ¢`);\n\n  // æ£€æŸ¥ç¼ºå¤±çš„å¸¸é‡\n  const missing = [...willUse].filter(num => !mapping[num]);\n\n  if (missing.length > 0) {\n    console.error('âŒ ç¼ºå¤±å¸¸é‡å®šä¹‰ï¼Œè¯·å…ˆè¡¥å……ä»¥ä¸‹å¸¸é‡åˆ° mapping.json å’Œ src/constants/magic-numbers.ts:');\n    console.error('');\n\n    missing.sort((a, b) => parseFloat(a) - parseFloat(b)).forEach(num => {\n      console.error(`  \"${num}\": \"MAGIC_${num.replace('.', '_').replace('-', 'NEG_')}\",`);\n    });\n\n    console.error('');\n    console.error('ğŸ“ æ¶‰åŠçš„æ–‡ä»¶:');\n    fileUsage.forEach((numbers, file) => {\n      const missingInFile = [...numbers].filter(num => missing.includes(num));\n      if (missingInFile.length > 0) {\n        console.error(`  ${file}: ${missingInFile.join(', ')}`);\n      }\n    });\n\n    process.exit(1);\n  }\n\n  // æ˜¾ç¤ºå°†è¢«æ›¿æ¢çš„æ•°å­—ç»Ÿè®¡\n  console.log('');\n  console.log('ğŸ“Š å°†è¢«æ›¿æ¢çš„æ•°å­—ç»Ÿè®¡:');\n  const sortedNumbers = [...willUse].sort((a, b) => parseFloat(a) - parseFloat(b));\n  sortedNumbers.forEach(num => {\n    const count = [...fileUsage.values()].reduce((acc, set) => acc + (set.has(num) ? 1 : 0), 0);\n    console.log(`  ${num} â†’ ${mapping[num]} (${count} ä¸ªæ–‡ä»¶)`);\n  });\n\n  console.log('');\n  console.log('âœ… é¢„æ£€é€šè¿‡ï¼æ‰€æœ‰å°†æ›¿æ¢çš„æ•°å€¼å‡æœ‰å¸¸é‡å®šä¹‰ã€‚');\n  console.log(`ğŸ“ˆ æ€»è®¡: ${willUse.size} ç§æ•°å­—ï¼Œåˆ†å¸ƒåœ¨ ${fileUsage.size} ä¸ªæ–‡ä»¶ä¸­`);\n}\n\n// è¿è¡Œé¢„æ£€\nif (require.main === module) {\n  preflight().catch((error) => {\n    console.error('âŒ é¢„æ£€å¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/process-remaining-numbers.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'readFileSync' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":22},{"ruleId":"require-await","severity":1,"message":"Async function 'extendESLintExemptions' has no 'await' expression.","line":182,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":182,"endColumn":38,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9233,9239],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * å¤„ç†å‰©ä½™43ä¸ªæ•°å­—çš„è‡ªåŠ¨åŒ–è„šæœ¬\n * \n * æ ¹æ®CODEXåˆ†å±‚æ²»ç†åˆ†æç»“æœï¼Œè‡ªåŠ¨å¤„ç†å‰©ä½™æ•°å­—ï¼š\n * 1. å±€éƒ¨å¸¸é‡å®šä¹‰\n * 2. é…ç½®é›†ä¸­åŒ–è¿ç§»\n * 3. å•ä½å·¥å…·åº“æ›¿æ¢\n * 4. ESLintè±å…æ‰©å±•\n */\n\nimport { readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\ninterface RemainingNumberAction {\n  value: string;\n  files: string[];\n  action: 'local_const' | 'config_migrate' | 'units_lib' | 'eslint_exempt';\n  constantName?: string;\n  replacement?: string;\n  reason: string;\n}\n\n/**\n * å‰©ä½™43ä¸ªæ•°å­—çš„å¤„ç†æ–¹æ¡ˆ\n */\nconst remainingNumbers: RemainingNumberAction[] = [\n  // ç‰¹æ®Šä¸šåŠ¡æ•°å­— - å±€éƒ¨å¸¸é‡\n  { value: '184.704', files: ['src/lib/colors/dark-theme.ts', 'src/lib/colors/light-theme.ts'], \n    action: 'local_const', constantName: 'COLOR_LIGHTNESS_FACTOR', reason: 'é¢œè‰²è®¡ç®—å› å­ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '255', files: ['src/constants/security-constants.ts', 'src/lib/locale-storage-types-base.ts'], \n    action: 'local_const', constantName: 'MAX_RGB_VALUE', reason: 'RGBæœ€å¤§å€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '254', files: ['src/constants/security-constants.ts', 'src/lib/security-validation.ts'], \n    action: 'local_const', constantName: 'MAX_SAFE_RGB', reason: 'å®‰å…¨RGBå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '365', files: ['src/constants/i18n-constants.ts'], \n    action: 'local_const', constantName: 'DAYS_PER_YEAR', reason: 'å¹´å¤©æ•°ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  \n  // HTTPçŠ¶æ€ç  - å±€éƒ¨å¸¸é‡\n  { value: '403', files: ['src/app/api/whatsapp/webhook/route.ts'], \n    action: 'local_const', constantName: 'HTTP_FORBIDDEN', reason: 'HTTPçŠ¶æ€ç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '429', files: ['src/app/api/contact/route.ts'], \n    action: 'local_const', constantName: 'HTTP_TOO_MANY_REQUESTS', reason: 'HTTPçŠ¶æ€ç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '503', files: ['src/app/api/whatsapp/send/route.ts'], \n    action: 'local_const', constantName: 'HTTP_SERVICE_UNAVAILABLE', reason: 'HTTPçŠ¶æ€ç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  \n  // é…ç½®æ•°å­— - é…ç½®é›†ä¸­åŒ–\n  { value: '8888', files: ['src/lib/performance-monitoring-types.ts'], \n    action: 'config_migrate', replacement: 'DEV_SERVER_CONFIG.MONITORING_PORT', reason: 'ç›‘æ§ç«¯å£ï¼Œè¿ç§»åˆ°é…ç½®' },\n  { value: '8900', files: ['src/app/api/monitoring/dashboard/handlers/get-handler.ts'], \n    action: 'config_migrate', replacement: 'DEV_SERVER_CONFIG.API_MONITORING_PORT', reason: 'APIç›‘æ§ç«¯å£ï¼Œè¿ç§»åˆ°é…ç½®' },\n  \n  // å°æ•°å­— - ESLintè±å…æ‰©å±•\n  { value: '14', files: ['src/lib/i18n-cache-types-advanced.ts', 'src/lib/site-config.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '17', files: ['src/lib/locale-storage-analytics-performance.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '18', files: ['src/lib/locale-storage-analytics-performance.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '22', files: ['src/lib/site-config.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '23', files: ['src/lib/locale-storage-analytics-performance.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '35', files: ['src/lib/i18n-metrics-collector.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '36', files: ['src/config/security.ts', 'src/constants/performance-constants.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  { value: '64', files: ['src/lib/locale-storage-types-config/validation.ts'], \n    action: 'eslint_exempt', reason: 'å°æ•°å­—ï¼Œæ‰©å±•ESLintè±å…' },\n  \n  // ç™¾åˆ†æ¯”æ•°å­— - å•ä½å·¥å…·åº“\n  { value: '82', files: ['src/lib/translation-benchmarks.ts'], \n    action: 'units_lib', replacement: 'percent(82)', reason: 'ç™¾åˆ†æ¯”ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  { value: '83', files: ['src/lib/translation-benchmarks.ts'], \n    action: 'units_lib', replacement: 'percent(83)', reason: 'ç™¾åˆ†æ¯”ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  { value: '84', files: ['src/lib/translation-benchmarks.ts'], \n    action: 'units_lib', replacement: 'percent(84)', reason: 'ç™¾åˆ†æ¯”ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  { value: '87', files: ['src/lib/translation-benchmarks.ts'], \n    action: 'units_lib', replacement: 'percent(87)', reason: 'ç™¾åˆ†æ¯”ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  { value: '88', files: ['src/lib/translation-benchmarks.ts'], \n    action: 'units_lib', replacement: 'percent(88)', reason: 'ç™¾åˆ†æ¯”ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  \n  // ç‰¹æ®Šä¸šåŠ¡æ•°å­— - å±€éƒ¨å¸¸é‡\n  { value: '130', files: ['src/constants/performance.ts'], \n    action: 'local_const', constantName: 'PERFORMANCE_THRESHOLD', reason: 'æ€§èƒ½é˜ˆå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '131', files: ['src/types/whatsapp-api-config/errors.ts'], \n    action: 'local_const', constantName: 'WHATSAPP_ERROR_BASE', reason: 'WhatsAppé”™è¯¯ç åŸºæ•°ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '132', files: ['src/types/whatsapp-api-config/errors.ts'], \n    action: 'local_const', constantName: 'WHATSAPP_ERROR_PARAM', reason: 'WhatsAppå‚æ•°é”™è¯¯ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '133', files: ['src/types/whatsapp-api-config/errors.ts'], \n    action: 'local_const', constantName: 'WHATSAPP_ERROR_FORMAT', reason: 'WhatsAppæ ¼å¼é”™è¯¯ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '136', files: ['src/types/whatsapp-api-config/errors.ts'], \n    action: 'local_const', constantName: 'WHATSAPP_ERROR_LIMIT', reason: 'WhatsAppé™åˆ¶é”™è¯¯ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '368', files: ['src/types/whatsapp-api-config/errors.ts'], \n    action: 'local_const', constantName: 'WHATSAPP_ERROR_MEDIA', reason: 'WhatsAppåª’ä½“é”™è¯¯ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  \n  // å…¶ä»–æ•°å­— - æ ¹æ®å…·ä½“æƒ…å†µå¤„ç†\n  { value: '450', files: ['src/app/api/analytics/web-vitals/route.ts', 'src/app/api/monitoring/dashboard/handlers/get-handler.ts'], \n    action: 'local_const', constantName: 'ANALYTICS_THRESHOLD', reason: 'åˆ†æé˜ˆå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '600', files: ['src/lib/i18n-preloader-strategies/configs.ts'], \n    action: 'units_lib', replacement: 'seconds(0.6)', reason: 'æ—¶é—´ç›¸å…³ï¼Œä½¿ç”¨å•ä½å·¥å…·åº“' },\n  { value: '890', files: ['src/app/api/analytics/i18n/route.ts'], \n    action: 'local_const', constantName: 'I18N_ANALYTICS_LIMIT', reason: 'i18nåˆ†æé™åˆ¶ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  \n  // å¤§æ•°å­— - å±€éƒ¨å¸¸é‡æˆ–é…ç½®\n  { value: '1005', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'APP_VERSION_CODE', reason: 'åº”ç”¨ç‰ˆæœ¬ç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1010', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'APP_BUILD_NUMBER', reason: 'åº”ç”¨æ„å»ºå·ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1020', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'APP_RELEASE_CODE', reason: 'åº”ç”¨å‘å¸ƒç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1080', files: ['src/lib/web-vitals/constants.ts'], \n    action: 'local_const', constantName: 'HD_HEIGHT', reason: 'HDé«˜åº¦ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1180', files: ['src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'WEB_VITALS_THRESHOLD', reason: 'Web Vitalsé˜ˆå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1250', files: ['src/app/api/analytics/i18n/route.ts', 'src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'ANALYTICS_BATCH_SIZE', reason: 'åˆ†ææ‰¹æ¬¡å¤§å°ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1300', files: ['src/constants/app-constants.ts', 'src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'EXTENDED_TIMEOUT', reason: 'æ‰©å±•è¶…æ—¶ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1400', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'MAX_CONTENT_LENGTH', reason: 'æœ€å¤§å†…å®¹é•¿åº¦ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1412', files: ['src/app/api/analytics/i18n/route.ts'], \n    action: 'local_const', constantName: 'I18N_CACHE_SIZE', reason: 'i18nç¼“å­˜å¤§å°ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1450', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'BUFFER_SIZE', reason: 'ç¼“å†²åŒºå¤§å°ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '1900', files: ['src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'VITALS_MAX_THRESHOLD', reason: 'Vitalsæœ€å¤§é˜ˆå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '2200', files: ['src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'PERFORMANCE_CEILING', reason: 'æ€§èƒ½ä¸Šé™ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '2800', files: ['src/app/api/analytics/web-vitals/route.ts'], \n    action: 'local_const', constantName: 'CRITICAL_THRESHOLD', reason: 'å…³é”®é˜ˆå€¼ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n  { value: '200100', files: ['src/constants/app-constants.ts'], \n    action: 'local_const', constantName: 'EXTENDED_SUCCESS_CODE', reason: 'æ‰©å±•æˆåŠŸç ï¼Œå®šä¹‰å±€éƒ¨å¸¸é‡' },\n];\n\n/**\n * æ‰§è¡Œå‰©ä½™æ•°å­—å¤„ç†\n */\nasync function processRemainingNumbers(): Promise<void> {\n  console.log('ğŸ”§ å¼€å§‹å¤„ç†å‰©ä½™43ä¸ªæ•°å­—...');\n  console.log('');\n\n  // æŒ‰å¤„ç†ç±»å‹åˆ†ç»„\n  const byAction = {\n    local_const: remainingNumbers.filter(n => n.action === 'local_const'),\n    config_migrate: remainingNumbers.filter(n => n.action === 'config_migrate'),\n    units_lib: remainingNumbers.filter(n => n.action === 'units_lib'),\n    eslint_exempt: remainingNumbers.filter(n => n.action === 'eslint_exempt'),\n  };\n\n  console.log('ğŸ“Š å¤„ç†æ–¹æ¡ˆç»Ÿè®¡:');\n  console.log(`  å±€éƒ¨å¸¸é‡å®šä¹‰: ${byAction.local_const.length}ä¸ª`);\n  console.log(`  é…ç½®é›†ä¸­åŒ–: ${byAction.config_migrate.length}ä¸ª`);\n  console.log(`  å•ä½å·¥å…·åº“: ${byAction.units_lib.length}ä¸ª`);\n  console.log(`  ESLintè±å…: ${byAction.eslint_exempt.length}ä¸ª`);\n  console.log('');\n\n  // 1. æ‰©å±•ESLintè±å…\n  await extendESLintExemptions(byAction.eslint_exempt);\n\n  // 2. ç”Ÿæˆå±€éƒ¨å¸¸é‡å»ºè®®\n  generateLocalConstantSuggestions(byAction.local_const);\n\n  // 3. ç”Ÿæˆé…ç½®è¿ç§»å»ºè®®\n  generateConfigMigrationSuggestions(byAction.config_migrate);\n\n  // 4. ç”Ÿæˆå•ä½å·¥å…·åº“ä½¿ç”¨å»ºè®®\n  generateUnitsLibSuggestions(byAction.units_lib);\n\n  console.log('âœ… å‰©ä½™æ•°å­—å¤„ç†æ–¹æ¡ˆç”Ÿæˆå®Œæˆï¼');\n  console.log('');\n  console.log('ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ:');\n  console.log('  1. æŸ¥çœ‹ç”Ÿæˆçš„å»ºè®®æ–‡ä»¶');\n  console.log('  2. æ ¹æ®å»ºè®®æ‰‹åŠ¨æˆ–è‡ªåŠ¨åº”ç”¨æ›´æ”¹');\n  console.log('  3. è¿è¡Œé¢„æ£€éªŒè¯: tsx scripts/magic-numbers/preflight.ts');\n  console.log('  4. éªŒè¯ç±»å‹æ£€æŸ¥: pnpm type-check');\n}\n\n/**\n * æ‰©å±•ESLintè±å…åˆ—è¡¨\n */\nasync function extendESLintExemptions(numbers: RemainingNumberAction[]): Promise<void> {\n  console.log('ğŸ”¸ æ‰©å±•ESLintè±å…åˆ—è¡¨...');\n  \n  const exemptValues = numbers.map(n => parseFloat(n.value)).sort((a, b) => a - b);\n  console.log(`  æ–°å¢è±å…æ•°å­—: ${exemptValues.join(', ')}`);\n  \n  // è¿™äº›æ•°å­—å°†åœ¨ä¸‹ä¸€æ­¥çš„ESLinté…ç½®æ›´æ–°ä¸­æ·»åŠ \n  console.log('  âœ… å°†åœ¨ESLinté…ç½®æ›´æ–°ä¸­å¤„ç†');\n}\n\n/**\n * ç”Ÿæˆå±€éƒ¨å¸¸é‡å»ºè®®\n */\nfunction generateLocalConstantSuggestions(numbers: RemainingNumberAction[]): void {\n  console.log('ğŸ”¸ ç”Ÿæˆå±€éƒ¨å¸¸é‡å®šä¹‰å»ºè®®...');\n  \n  const suggestions = numbers.map(n => ({\n    file: n.files[0], // å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºä¸»è¦æ–‡ä»¶\n    value: n.value,\n    constantName: n.constantName,\n    reason: n.reason\n  }));\n\n  const content = `# å±€éƒ¨å¸¸é‡å®šä¹‰å»ºè®®\n\n## ä½¿ç”¨è¯´æ˜\nåœ¨ç›¸åº”æ–‡ä»¶ä¸­å®šä¹‰ä»¥ä¸‹å±€éƒ¨å¸¸é‡ï¼Œæ›¿ä»£é­”æ³•æ•°å­—ï¼š\n\n${suggestions.map(s => `\n### ${s.file}\n\\`\\`\\`typescript\n// ${s.reason}\nconst ${s.constantName} = ${s.value};\n\\`\\`\\`\n`).join('')}\n\n## åº”ç”¨æ–¹å¼\n1. åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰å¸¸é‡\n2. æ›¿æ¢æ–‡ä»¶ä¸­çš„é­”æ³•æ•°å­—\n3. æ·»åŠ é€‚å½“çš„æ³¨é‡Šè¯´æ˜\n`;\n\n  writeFileSync(resolve(__dirname, 'local-constants-suggestions.md'), content);\n  console.log('  âœ… å·²ç”Ÿæˆ: local-constants-suggestions.md');\n}\n\n/**\n * ç”Ÿæˆé…ç½®è¿ç§»å»ºè®®\n */\nfunction generateConfigMigrationSuggestions(numbers: RemainingNumberAction[]): void {\n  console.log('ğŸ”¸ ç”Ÿæˆé…ç½®è¿ç§»å»ºè®®...');\n  \n  const content = `# é…ç½®è¿ç§»å»ºè®®\n\n## ä½¿ç”¨è¯´æ˜\nå°†ä»¥ä¸‹æ•°å­—è¿ç§»åˆ° src/config/app.ts çš„ç›¸åº”é…ç½®ä¸­ï¼š\n\n${numbers.map(n => `\n### ${n.value} â†’ ${n.replacement}\n- **æ–‡ä»¶**: ${n.files.join(', ')}\n- **åŸå› **: ${n.reason}\n- **æ›¿æ¢**: ä½¿ç”¨ \\`${n.replacement}\\`\n`).join('')}\n\n## åº”ç”¨æ–¹å¼\n1. ç¡®è®¤ src/config/app.ts ä¸­å·²å®šä¹‰ç›¸åº”é…ç½®\n2. åœ¨ä½¿ç”¨æ–‡ä»¶ä¸­å¯¼å…¥é…ç½®\n3. æ›¿æ¢é­”æ³•æ•°å­—ä¸ºé…ç½®å¼•ç”¨\n`;\n\n  writeFileSync(resolve(__dirname, 'config-migration-suggestions.md'), content);\n  console.log('  âœ… å·²ç”Ÿæˆ: config-migration-suggestions.md');\n}\n\n/**\n * ç”Ÿæˆå•ä½å·¥å…·åº“ä½¿ç”¨å»ºè®®\n */\nfunction generateUnitsLibSuggestions(numbers: RemainingNumberAction[]): void {\n  console.log('ğŸ”¸ ç”Ÿæˆå•ä½å·¥å…·åº“ä½¿ç”¨å»ºè®®...');\n  \n  const content = `# å•ä½å·¥å…·åº“ä½¿ç”¨å»ºè®®\n\n## ä½¿ç”¨è¯´æ˜\nä½¿ç”¨ src/lib/units.ts ä¸­çš„å•ä½è½¬æ¢å‡½æ•°æ›¿ä»£ä»¥ä¸‹é­”æ³•æ•°å­—ï¼š\n\n${numbers.map(n => `\n### ${n.value} â†’ ${n.replacement}\n- **æ–‡ä»¶**: ${n.files.join(', ')}\n- **åŸå› **: ${n.reason}\n- **æ›¿æ¢**: \\`${n.replacement}\\`\n`).join('')}\n\n## åº”ç”¨æ–¹å¼\n1. å¯¼å…¥å•ä½å·¥å…·åº“: \\`import { percent, seconds } from '@/lib/units';\\`\n2. æ›¿æ¢é­”æ³•æ•°å­—ä¸ºå•ä½å‡½æ•°è°ƒç”¨\n3. ç¡®ä¿è¯­ä¹‰æ¸…æ™°å’Œç±»å‹å®‰å…¨\n`;\n\n  writeFileSync(resolve(__dirname, 'units-lib-suggestions.md'), content);\n  console.log('  âœ… å·²ç”Ÿæˆ: units-lib-suggestions.md');\n}\n\n// æ‰§è¡Œå¤„ç†\nif (require.main === module) {\n  processRemainingNumbers().catch((error) => {\n    console.error('âŒ å¤„ç†å¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/run-batch.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Async function 'runBatch' has too many statements (45). Maximum allowed is 35.","line":15,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":119,"endColumn":2},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":22,"column":12,"nodeType":"CallExpression","messageId":"missingRadix","endLine":22,"endColumn":88,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[624,624],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":23,"column":16,"nodeType":"CallExpression","messageId":"missingRadix","endLine":23,"endColumn":97,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[735,735],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":73,"column":35,"nodeType":"CallExpression","messageId":"missingRadix","endLine":73,"endColumn":62,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[2029,2029],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { run, Options } from './ast-replace-magic-numbers';\nimport { execSync } from 'node:child_process';\n\ninterface BatchOptions extends Options {\n  batchSize?: number;\n  validateAfterEach?: boolean;\n}\n\n/**\n * æ‰¹å¤„ç†æ‰§è¡Œå™¨\n * æ”¯æŒåˆ†æ‰¹å¤„ç†ã€è‡ªåŠ¨éªŒè¯å’Œå¤±è´¥å›æ»š\n */\nasync function runBatch() {\n  const args = process.argv.slice(2);\n  \n  const options: BatchOptions = {\n    write: args.includes('--write'),\n    dryRun: args.includes('--dry-run'),\n    files: args.find(arg => arg.startsWith('--files='))?.split('=')[1] || 'src/**/*.{ts,tsx}',\n    limit: parseInt(args.find(arg => arg.startsWith('--limit='))?.split('=')[1] || '0') || undefined,\n    batchSize: parseInt(args.find(arg => arg.startsWith('--batch-size='))?.split('=')[1] || '5'),\n    validateAfterEach: !args.includes('--no-validate'),\n  };\n  \n  // é»˜è®¤ä¸ºå¹²è·‘æ¨¡å¼\n  if (!options.write) {\n    options.dryRun = true;\n  }\n  \n  console.log('ğŸš€ ASTé­”æ³•æ•°å­—æ‰¹å¤„ç†å™¨å¯åŠ¨...');\n  console.log(`ğŸ“Š é…ç½®: ${JSON.stringify(options, null, 2)}`);\n  \n  try {\n    // è¿è¡Œé¢„æ£€\n    console.log('ğŸ” è¿è¡Œé¢„æ£€éªŒè¯...');\n    execSync('tsx scripts/magic-numbers/preflight.ts', { \n      stdio: 'inherit',\n      cwd: process.cwd(),\n    });\n    console.log('âœ… é¢„æ£€é€šè¿‡');\n    \n    // æ‰§è¡Œæ›¿æ¢\n    console.log('ğŸ”§ å¼€å§‹æ‰§è¡Œæ›¿æ¢...');\n    const logs = await run(options);\n    \n    if (logs.length === 0) {\n      console.log('â„¹ï¸  æ²¡æœ‰æ–‡ä»¶éœ€è¦ä¿®æ”¹');\n      return;\n    }\n    \n    // éªŒè¯ç»“æœ\n    if (options.validateAfterEach && options.write && !options.dryRun) {\n      console.log('ğŸ” éªŒè¯ä¿®æ”¹ç»“æœ...');\n      \n      try {\n        // TypeScript ç¼–è¯‘æ£€æŸ¥\n        console.log('  æ£€æŸ¥ TypeScript ç¼–è¯‘...');\n        execSync('pnpm run type-check', { \n          stdio: 'pipe',\n          cwd: process.cwd(),\n        });\n        console.log('  âœ… TypeScript ç¼–è¯‘æ­£å¸¸');\n        \n        // ESLint æ£€æŸ¥é­”æ³•æ•°å­—\n        console.log('  æ£€æŸ¥é­”æ³•æ•°å­—é”™è¯¯...');\n        const lintOutput = execSync('pnpm run lint:check 2>&1 | grep \"no-magic-numbers\" | wc -l', {\n          encoding: 'utf8',\n          cwd: process.cwd(),\n        });\n        \n        const magicNumberErrors = parseInt(lintOutput.trim());\n        console.log(`  é­”æ³•æ•°å­—é”™è¯¯: ${magicNumberErrors} ä¸ª`);\n        \n        if (magicNumberErrors > 0) {\n          console.warn('âš ï¸  ä»æœ‰é­”æ³•æ•°å­—é”™è¯¯ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥å¤„ç†');\n        }\n        \n      } catch (error) {\n        console.error('âŒ éªŒè¯å¤±è´¥:', error);\n        console.error('ğŸ’¡ å»ºè®®æ£€æŸ¥æœ€è¿‘çš„ä¿®æ”¹å¹¶è€ƒè™‘å›æ»š');\n        process.exit(1);\n      }\n    }\n    \n    // è¾“å‡ºæ‘˜è¦\n    console.log('');\n    console.log('ğŸ“Š æ‰¹å¤„ç†å®Œæˆæ‘˜è¦:');\n    console.log(`  å¤„ç†æ–‡ä»¶: ${logs.length}`);\n    \n    const totalReplacements = logs.reduce((sum, log) => sum + log.changes.length, 0);\n    console.log(`  æ€»æ›¿æ¢æ•°: ${totalReplacements}`);\n    \n    if (totalReplacements > 0) {\n      console.log('');\n      console.log('ğŸ“‹ ä¿®æ”¹çš„æ–‡ä»¶:');\n      logs.forEach(log => {\n        console.log(`  ${log.file}: ${log.changes.length} ä¸ªæ›¿æ¢`);\n        if (log.imports.added.length > 0) {\n          console.log(`    æ–°å¢å¯¼å…¥: ${log.imports.added.join(', ')}`);\n        }\n        if (Object.keys(log.imports.aliased).length > 0) {\n          console.log(`    åˆ«åå¯¼å…¥: ${Object.entries(log.imports.aliased).map(([k, v]) => `${k} as ${v}`).join(', ')}`);\n        }\n      });\n    }\n    \n    if (options.dryRun) {\n      console.log('');\n      console.log('ğŸ” è¿™æ˜¯å¹²è·‘æ¨¡å¼ï¼Œæœªå®é™…ä¿®æ”¹æ–‡ä»¶');\n      console.log('ğŸ’¡ ä½¿ç”¨ --write å‚æ•°æ‰§è¡Œå®é™…ä¿®æ”¹');\n    }\n    \n  } catch (error) {\n    console.error('âŒ æ‰¹å¤„ç†å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\n// æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\nfunction showHelp() {\n  console.log(`\nASTé­”æ³•æ•°å­—æ‰¹å¤„ç†å™¨\n\nç”¨æ³•:\n  tsx scripts/magic-numbers/run-batch.ts [é€‰é¡¹]\n\né€‰é¡¹:\n  --write              æ‰§è¡Œå®é™…ä¿®æ”¹ï¼ˆé»˜è®¤ä¸ºå¹²è·‘æ¨¡å¼ï¼‰\n  --dry-run            å¹²è·‘æ¨¡å¼ï¼Œä¸ä¿®æ”¹æ–‡ä»¶\n  --files=<pattern>    æ–‡ä»¶åŒ¹é…æ¨¡å¼ï¼ˆé»˜è®¤: src/**/*.{ts,tsx}ï¼‰\n  --limit=<number>     é™åˆ¶å¤„ç†çš„æ–‡ä»¶æ•°é‡\n  --batch-size=<number> æ‰¹å¤„ç†å¤§å°ï¼ˆé»˜è®¤: 5ï¼‰\n  --no-validate        è·³è¿‡ä¿®æ”¹åçš„éªŒè¯\n  --help               æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯\n\nç¤ºä¾‹:\n  # å¹²è·‘æ¨¡å¼æŸ¥çœ‹å°†è¦ä¿®æ”¹çš„å†…å®¹\n  tsx scripts/magic-numbers/run-batch.ts --files=\"src/components/**/*.tsx\"\n  \n  # å®é™…æ‰§è¡Œä¿®æ”¹ï¼Œé™åˆ¶5ä¸ªæ–‡ä»¶\n  tsx scripts/magic-numbers/run-batch.ts --write --limit=5\n  \n  # æ‰¹é‡å¤„ç†æ‰€æœ‰æ–‡ä»¶\n  tsx scripts/magic-numbers/run-batch.ts --write\n`);\n}\n\n// CLI å…¥å£\nif (require.main === module) {\n  const args = process.argv.slice(2);\n  \n  if (args.includes('--help') || args.includes('-h')) {\n    showHelp();\n    process.exit(0);\n  }\n  \n  runBatch().catch(console.error);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/semantic-analyzer.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'readFileSync' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":76,"column":14,"nodeType":"MemberExpression","endLine":76,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":156,"column":14,"nodeType":"MemberExpression","endLine":156,"endColumn":26},{"ruleId":"complexity","severity":1,"message":"Function 'extractNumbersFromPreflight' has a complexity of 19. Maximum allowed is 18.","line":274,"column":1,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":339,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":344,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":344,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9205,9211],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":357,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":357,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9504,9507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9504,9507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":362,"column":5,"nodeType":"MemberExpression","endLine":362,"endColumn":21},{"ruleId":"consistent-return","severity":1,"message":"Async function 'main' expected no return value.","line":395,"column":3,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":395,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\n/**\n * æ•°å­—è¯­ä¹‰åˆ†ç±»å™¨\n * å°†é­”æ³•æ•°å­—æŒ‰ç…§ä¸šåŠ¡è¯­ä¹‰è¿›è¡Œæ™ºèƒ½åˆ†ç±»\n */\n\ninterface NumberCategory {\n  name: string;\n  description: string;\n  pattern: (num: number, str: string) => boolean;\n  generateName: (num: number, str: string) => string;\n  priority: number; // ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜\n}\n\n// å®šä¹‰è¯­ä¹‰åˆ†ç±»è§„åˆ™\nconst categories: NumberCategory[] = [\n  // HTTPçŠ¶æ€ç \n  {\n    name: 'HTTP_STATUS',\n    description: 'HTTPçŠ¶æ€ç ',\n    pattern: (num) => [200, 201, 204, 300, 301, 302, 400, 401, 403, 404, 415, 429, 500, 503].includes(num),\n    generateName: (num) => `HTTP_${num}`,\n    priority: 1\n  },\n\n  // æ—¶é—´ç›¸å…³ - æ¯«ç§’\n  {\n    name: 'TIME_MS',\n    description: 'æ—¶é—´ç›¸å…³ï¼ˆæ¯«ç§’ï¼‰',\n    pattern: (num) => {\n      // å¸¸è§çš„æ¯«ç§’å€¼ï¼š1000, 2000, 3000, 5000, 10000, 30000, 60000ç­‰\n      return num >= 1000 && num <= 86400000 && num % 1000 === 0;\n    },\n    generateName: (num) => {\n      if (num === 1000) return 'SECOND_MS';\n      if (num === 2000) return 'TWO_SECONDS_MS';\n      if (num === 3000) return 'THREE_SECONDS_MS';\n      if (num === 5000) return 'FIVE_SECONDS_MS';\n      if (num === 10000) return 'TEN_SECONDS_MS';\n      if (num === 30000) return 'THIRTY_SECONDS_MS';\n      if (num === 60000) return 'MINUTE_MS';\n      if (num === 3600000) return 'HOUR_MS';\n      if (num === 86400000) return 'DAY_MS';\n      return `TIME_${num}_MS`;\n    },\n    priority: 2\n  },\n\n  // å±å¹•å°ºå¯¸å’Œæ–­ç‚¹\n  {\n    name: 'BREAKPOINT',\n    description: 'å“åº”å¼æ–­ç‚¹',\n    pattern: (num) => [320, 375, 480, 640, 667, 720, 768, 800, 1024, 1080, 1200, 1280, 1536, 1600, 1920].includes(num),\n    generateName: (num) => {\n      const breakpoints: Record<number, string> = {\n        320: 'BREAKPOINT_MOBILE_SMALL',\n        375: 'BREAKPOINT_MOBILE',\n        480: 'BREAKPOINT_MOBILE_LARGE',\n        640: 'BREAKPOINT_SM',\n        667: 'BREAKPOINT_MOBILE_LANDSCAPE',\n        720: 'BREAKPOINT_HD_HEIGHT',\n        768: 'BREAKPOINT_MD',\n        800: 'BREAKPOINT_TABLET_SMALL',\n        1024: 'BREAKPOINT_LG',\n        1080: 'BREAKPOINT_HD_HEIGHT_FULL',\n        1200: 'BREAKPOINT_DESKTOP',\n        1280: 'BREAKPOINT_XL',\n        1536: 'BREAKPOINT_2XL',\n        1600: 'BREAKPOINT_DESKTOP_LARGE',\n        1920: 'BREAKPOINT_FULL_HD'\n      };\n      return breakpoints[num] || `BREAKPOINT_${num}`;\n    },\n    priority: 3\n  },\n\n  // ç™¾åˆ†æ¯”ï¼ˆ0-1ä¹‹é—´çš„å°æ•°ï¼‰\n  {\n    name: 'PERCENTAGE_DECIMAL',\n    description: 'ç™¾åˆ†æ¯”ï¼ˆå°æ•°å½¢å¼ï¼‰',\n    pattern: (num) => num > 0 && num < 1 && num.toString().length <= 5,\n    generateName: (num) => {\n      const percentageMap: Record<string, string> = {\n        '0.01': 'PERCENT_1',\n        '0.02': 'PERCENT_2',\n        '0.03': 'PERCENT_3',\n        '0.05': 'PERCENT_5',\n        '0.08': 'PERCENT_8',\n        '0.1': 'PERCENT_10',\n        '0.12': 'PERCENT_12',\n        '0.15': 'PERCENT_15',\n        '0.2': 'PERCENT_20',\n        '0.25': 'PERCENT_25',\n        '0.3': 'PERCENT_30',\n        '0.4': 'PERCENT_40',\n        '0.45': 'PERCENT_45',\n        '0.5': 'PERCENT_50',\n        '0.55': 'PERCENT_55',\n        '0.6': 'PERCENT_60',\n        '0.65': 'PERCENT_65',\n        '0.7': 'PERCENT_70',\n        '0.75': 'PERCENT_75',\n        '0.8': 'PERCENT_80',\n        '0.85': 'PERCENT_85',\n        '0.9': 'PERCENT_90',\n        '0.94': 'PERCENT_94',\n        '0.95': 'PERCENT_95',\n        '0.96': 'PERCENT_96',\n        '0.97': 'PERCENT_97',\n        '0.99': 'PERCENT_99'\n      };\n      return percentageMap[num.toString()] || `OPACITY_${Math.round(num * 100)}`;\n    },\n    priority: 4\n  },\n\n  // åŠ¨ç”»æŒç»­æ—¶é—´\n  {\n    name: 'ANIMATION_DURATION',\n    description: 'åŠ¨ç”»æŒç»­æ—¶é—´',\n    pattern: (num) => [150, 200, 250, 300, 400, 500, 600, 700, 750, 800, 900, 1000, 1200, 1250, 1500, 2000].includes(num),\n    generateName: (num) => `ANIMATION_DURATION_${num}`,\n    priority: 5\n  },\n\n  // å†…å­˜å’Œå­˜å‚¨å¤§å°\n  {\n    name: 'MEMORY_SIZE',\n    description: 'å†…å­˜å’Œå­˜å‚¨å¤§å°',\n    pattern: (num) => {\n      // 2çš„å¹‚æ¬¡æ–¹ï¼Œå¸¸è§çš„å†…å­˜å¤§å°\n      return [256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304].includes(num);\n    },\n    generateName: (num) => {\n      const sizeMap: Record<number, string> = {\n        256: 'BYTES_256',\n        512: 'BYTES_512',\n        1024: 'BYTES_1KB',\n        2048: 'BYTES_2KB',\n        4096: 'BYTES_4KB',\n        8192: 'BYTES_8KB',\n        16384: 'BYTES_16KB',\n        32768: 'BYTES_32KB',\n        65536: 'BYTES_64KB',\n        131072: 'BYTES_128KB',\n        262144: 'BYTES_256KB',\n        524288: 'BYTES_512KB',\n        1048576: 'BYTES_1MB',\n        2097152: 'BYTES_2MB',\n        4194304: 'BYTES_4MB'\n      };\n      return sizeMap[num] || `MEMORY_SIZE_${num}`;\n    },\n    priority: 6\n  },\n\n  // å¹´ä»½\n  {\n    name: 'YEAR',\n    description: 'å¹´ä»½',\n    pattern: (num) => num >= 2020 && num <= 2030 && Number.isInteger(num),\n    generateName: (num) => `YEAR_${num}`,\n    priority: 7\n  },\n\n  // è§’åº¦\n  {\n    name: 'ANGLE',\n    description: 'è§’åº¦å€¼',\n    pattern: (num) => [0, 45, 90, 180, 270, 360].includes(num) || (num > 359 && num < 361),\n    generateName: (num) => {\n      if (num === 0) return 'ANGLE_ZERO';\n      if (num === 45) return 'ANGLE_45_DEG';\n      if (num === 90) return 'ANGLE_90_DEG';\n      if (num === 180) return 'ANGLE_180_DEG';\n      if (num === 270) return 'ANGLE_270_DEG';\n      if (num === 360 || (num > 359 && num < 361)) return 'ANGLE_360_DEG';\n      return `ANGLE_${num.toString().replace('.', '_')}_DEG`;\n    },\n    priority: 8\n  },\n\n  // åœ°ç†åæ ‡\n  {\n    name: 'COORDINATE',\n    description: 'åœ°ç†åæ ‡',\n    pattern: (num, str) => {\n      // çº¬åº¦èŒƒå›´ -90 åˆ° 90ï¼Œç»åº¦èŒƒå›´ -180 åˆ° 180\n      return (num >= -90 && num <= 90 && str.includes('.')) ||\n             (num >= -180 && num <= 180 && str.includes('.') && Math.abs(num) > 90);\n    },\n    generateName: (num, str) => {\n      // æ ¹æ®å¸¸è§åŸå¸‚åæ ‡è¿›è¡Œå‘½å\n      if (Math.abs(num - 39.9042) < 0.001) return 'COORD_BEIJING_LAT';\n      if (Math.abs(num - 116.4074) < 0.001) return 'COORD_BEIJING_LNG';\n      if (Math.abs(num - 40.7128) < 0.001) return 'COORD_NYC_LAT';\n      if (Math.abs(num - 74.006) < 0.001) return 'COORD_NYC_LNG';\n      return `COORDINATE_${str.replace('.', '_').replace('-', 'NEG_')}`;\n    },\n    priority: 9\n  },\n\n  // æµ‹è¯•æ•°æ® - ç²¾ç¡®å°æ•°\n  {\n    name: 'TEST_PRECISION',\n    description: 'æµ‹è¯•ç”¨ç²¾ç¡®å°æ•°',\n    pattern: (num, str) => {\n      // é•¿å°æ•°ï¼Œé€šå¸¸ç”¨äºç²¾åº¦æµ‹è¯•\n      return str.includes('.') && str.length > 10;\n    },\n    generateName: (num, str) => `TEST_PRECISION_${str.replace('.', '_')}`,\n    priority: 10\n  },\n\n  // ç«¯å£å·\n  {\n    name: 'PORT',\n    description: 'ç«¯å£å·',\n    pattern: (num) => num >= 3000 && num <= 9000 && Number.isInteger(num),\n    generateName: (num) => `PORT_${num}`,\n    priority: 11\n  },\n\n  // é»˜è®¤åˆ†ç±»\n  {\n    name: 'NUMERIC',\n    description: 'æ•°å€¼å¸¸é‡',\n    pattern: () => true, // åŒ¹é…æ‰€æœ‰å‰©ä½™çš„æ•°å­—\n    generateName: (num, str) => {\n      if (Number.isInteger(num)) {\n        return `NUMBER_${num}`;\n      } \n        return `DECIMAL_${str.replace('.', '_').replace('-', 'NEG_')}`;\n      \n    },\n    priority: 99\n  }\n];\n\n/**\n * åˆ†ææ•°å­—å¹¶åˆ†ç±»\n */\nfunction analyzeNumber(numStr: string): { category: string; constantName: string; description: string } {\n  const num = parseFloat(numStr);\n\n  // æŒ‰ä¼˜å…ˆçº§æ’åºï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„åˆ†ç±»\n  const sortedCategories = categories.sort((a, b) => a.priority - b.priority);\n\n  for (const category of sortedCategories) {\n    if (category.pattern(num, numStr)) {\n      return {\n        category: category.name,\n        constantName: category.generateName(num, numStr),\n        description: category.description\n      };\n    }\n  }\n\n  // é»˜è®¤åˆ†ç±»ï¼ˆç†è®ºä¸Šä¸ä¼šåˆ°è¾¾è¿™é‡Œï¼‰\n  return {\n    category: 'UNKNOWN',\n    constantName: `UNKNOWN_${numStr.replace('.', '_')}`,\n    description: 'æœªçŸ¥ç±»å‹'\n  };\n}\n\n/**\n * ä»é¢„æ£€è¾“å‡ºä¸­æå–æ‰€æœ‰æ•°å­—\n */\nfunction extractNumbersFromPreflight(): string[] {\n  try {\n    const { execSync } = require('child_process');\n    const output = execSync('tsx scripts/magic-numbers/preflight.ts', {\n      encoding: 'utf8',\n      cwd: process.cwd(),\n    });\n\n    // è§£æè¾“å‡ºï¼Œæå–æ•°å­—åˆ—è¡¨\n    const lines = output.split('\\n');\n    const numbers: string[] = [];\n    let inNumberSection = false;\n\n    for (const line of lines) {\n      if (line.includes('ç¼ºå¤±å¸¸é‡å®šä¹‰')) {\n        inNumberSection = true;\n        continue;\n      }\n\n      if (inNumberSection && line.includes('ğŸ“ æ¶‰åŠçš„æ–‡ä»¶:')) {\n        break;\n      }\n\n      if (inNumberSection && line.trim().startsWith('\"')) {\n        // æå–æ•°å­—ï¼š  \"0.123\": \"MAGIC_0_123\",\n        const match = line.match(/\"([^\"]+)\":/);\n        if (match) {\n          numbers.push(match[1]);\n        }\n      }\n    }\n\n    return numbers;\n  } catch (error) {\n    // å¦‚æœé¢„æ£€å¤±è´¥ï¼Œä»é”™è¯¯è¾“å‡ºä¸­æå–æ•°å­—\n    const errorOutput = error.stderr || error.stdout || '';\n    const lines = errorOutput.split('\\n');\n    const numbers: string[] = [];\n    let inNumberSection = false;\n\n    for (const line of lines) {\n      if (line.includes('ç¼ºå¤±å¸¸é‡å®šä¹‰')) {\n        inNumberSection = true;\n        continue;\n      }\n\n      if (inNumberSection && line.includes('ğŸ“ æ¶‰åŠçš„æ–‡ä»¶:')) {\n        break;\n      }\n\n      if (inNumberSection && line.trim().startsWith('\"')) {\n        // æå–æ•°å­—ï¼š  \"0.123\": \"MAGIC_0_123\",\n        const match = line.match(/\"([^\"]+)\":/);\n        if (match) {\n          numbers.push(match[1]);\n        }\n      }\n    }\n\n    if (numbers.length === 0) {\n      console.error('Failed to extract numbers from preflight:', error.message);\n    }\n\n    return numbers;\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  console.log('ğŸ” å¼€å§‹è¯­ä¹‰åˆ†æ...');\n\n  // æå–æ‰€æœ‰éœ€è¦å¤„ç†çš„æ•°å­—\n  const numbers = extractNumbersFromPreflight();\n  console.log(`ğŸ“Š å‘ç° ${numbers.length} ä¸ªæ•°å­—éœ€è¦åˆ†æ`);\n\n  if (numbers.length === 0) {\n    console.log('âŒ æ²¡æœ‰æ‰¾åˆ°éœ€è¦å¤„ç†çš„æ•°å­—');\n    return;\n  }\n\n  // åˆ†ææ¯ä¸ªæ•°å­—\n  const analysis: Record<string, any> = {};\n  const categoryStats: Record<string, number> = {};\n\n  for (const numStr of numbers) {\n    const result = analyzeNumber(numStr);\n    analysis[numStr] = result;\n\n    categoryStats[result.category] = (categoryStats[result.category] || 0) + 1;\n  }\n\n  // ç”Ÿæˆåˆ†ææŠ¥å‘Š\n  const report = {\n    timestamp: new Date().toISOString(),\n    summary: {\n      totalNumbers: numbers.length,\n      categoriesFound: Object.keys(categoryStats).length,\n      categoryStats\n    },\n    analysis,\n    recommendations: generateRecommendations(categoryStats)\n  };\n\n  // ä¿å­˜åˆ†æç»“æœ\n  const reportPath = resolve(__dirname, 'semantic-analysis-report.json');\n  writeFileSync(reportPath, JSON.stringify(report, null, 2));\n\n  console.log('ğŸ“Š åˆ†æå®Œæˆï¼');\n  console.log('');\n  console.log('ğŸ“ˆ åˆ†ç±»ç»Ÿè®¡:');\n  Object.entries(categoryStats)\n    .sort(([,a], [,b]) => b - a)\n    .forEach(([category, count]) => {\n      console.log(`  ${category}: ${count} ä¸ª`);\n    });\n\n  console.log('');\n  console.log(`ğŸ“„ è¯¦ç»†æŠ¥å‘Šå·²ä¿å­˜åˆ°: ${reportPath}`);\n\n  return report;\n}\n\n/**\n * ç”Ÿæˆä¼˜åŒ–å»ºè®®\n */\nfunction generateRecommendations(stats: Record<string, number>): string[] {\n  const recommendations: string[] = [];\n\n  if (stats.TEST_PRECISION > 10) {\n    recommendations.push('å»ºè®®å°†æµ‹è¯•ç”¨ç²¾ç¡®å°æ•°å½’ç±»åˆ°ä¸“é—¨çš„æµ‹è¯•å¸¸é‡æ–‡ä»¶ä¸­');\n  }\n\n  if (stats.NUMERIC > 50) {\n    recommendations.push('å­˜åœ¨å¤§é‡é€šç”¨æ•°å€¼å¸¸é‡ï¼Œå»ºè®®è¿›ä¸€æ­¥ç»†åŒ–åˆ†ç±»è§„åˆ™');\n  }\n\n  if (stats.BREAKPOINT > 5) {\n    recommendations.push('å“åº”å¼æ–­ç‚¹è¾ƒå¤šï¼Œå»ºè®®ç»Ÿä¸€åˆ°ä¸“é—¨çš„æ–­ç‚¹å¸¸é‡æ–‡ä»¶ä¸­');\n  }\n\n  return recommendations;\n}\n\n// è¿è¡Œåˆ†æ\nif (require.main === module) {\n  main().catch((error) => {\n    console.error('âŒ è¯­ä¹‰åˆ†æå¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { analyzeNumber, categories };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/simple-constant-collector.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1085,1088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1085,1088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":53,"column":7,"nodeType":"MemberExpression","endLine":53,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":59,"column":7,"nodeType":"MemberExpression","endLine":59,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":61,"column":7,"nodeType":"MemberExpression","endLine":61,"endColumn":33},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"node:fs\" with non literal argument at index 0","line":96,"column":17,"nodeType":"CallExpression","endLine":96,"endColumn":37},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"node:fs\" with non literal argument at index 0","line":100,"column":18,"nodeType":"CallExpression","endLine":100,"endColumn":36},{"ruleId":"max-statements","severity":1,"message":"Async function 'scanFile' has too many statements (38). Maximum allowed is 35.","line":110,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":197,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'scanFile' has no 'await' expression.","line":110,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":110,"endColumn":24,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2949,2955],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"node:fs\" with non literal argument at index 0","line":111,"column":19,"nodeType":"CallExpression","endLine":111,"endColumn":50},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":121,"column":5,"nodeType":"Literal","endLine":121,"endColumn":80},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":123,"column":5,"nodeType":"Literal","endLine":123,"endColumn":93},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":127,"column":18,"nodeType":"MemberExpression","endLine":127,"endColumn":26},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":151,"column":5,"nodeType":"Literal","endLine":151,"endColumn":66},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":158,"column":18,"nodeType":"MemberExpression","endLine":158,"endColumn":26}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { readFileSync, writeFileSync, readdirSync, statSync } from 'node:fs';\nimport { resolve, join } from 'node:path';\n\ninterface ConstantInfo {\n  export: string;\n  module: string;\n  value: number;\n  filePath: string;\n  line: number;\n}\n\n/**\n * ç®€å•çš„å¸¸é‡æ”¶é›†å™¨\n * ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰«ææ–‡ä»¶ï¼ŒæŸ¥æ‰¾å¯¼å‡ºçš„æ•°å­—å¸¸é‡\n */\nasync function collectConstants() {\n  console.log('ğŸ” æ”¶é›†ç°æœ‰å¸¸é‡å®šä¹‰...');\n  \n  const constants: ConstantInfo[] = [];\n  const targetDirs = ['src/constants', 'src/config'];\n  \n  for (const dir of targetDirs) {\n    const fullPath = resolve(process.cwd(), dir);\n    try {\n      await scanDirectory(fullPath, constants);\n    } catch (error) {\n      console.log(`âš ï¸  è·³è¿‡ç›®å½• ${dir}: ${error}`);\n    }\n  }\n  \n  console.log(`ğŸ“Š æ”¶é›†å®Œæˆ: å‘ç° ${constants.length} ä¸ªå¸¸é‡`);\n  \n  // æŒ‰æ•°å€¼åˆ†ç»„\n  const valueToConstants = new Map<number, ConstantInfo[]>();\n  for (const constant of constants) {\n    if (!valueToConstants.has(constant.value)) {\n      valueToConstants.set(constant.value, []);\n    }\n    valueToConstants.get(constant.value)!.push(constant);\n  }\n  \n  // ç”Ÿæˆæ˜ å°„\n  const candidateMapping: Record<string, any> = {};\n  const conflicts: Record<string, ConstantInfo[]> = {};\n  \n  for (const [value, constantInfos] of valueToConstants) {\n    const valueStr = value.toString();\n    \n    if (constantInfos.length === 1) {\n      const info = constantInfos[0];\n      candidateMapping[valueStr] = {\n        export: info.export,\n        module: info.module,\n        source: `${info.filePath}:${info.line}`,\n      };\n    } else {\n      conflicts[valueStr] = constantInfos;\n      const prioritized = prioritizeConstant(constantInfos);\n      candidateMapping[valueStr] = {\n        export: prioritized.export,\n        module: prioritized.module,\n        source: `${prioritized.filePath}:${prioritized.line}`,\n        alternatives: constantInfos.filter(c => c !== prioritized).map(c => ({\n          export: c.export,\n          module: c.module,\n          source: `${c.filePath}:${c.line}`,\n        })),\n      };\n    }\n  }\n  \n  // ä¿å­˜ç»“æœ\n  const result = {\n    _comment: \"ç°æœ‰å¸¸é‡åˆ†æç»“æœ\",\n    _generated: new Date().toISOString(),\n    _stats: {\n      totalConstants: constants.length,\n      uniqueValues: valueToConstants.size,\n      conflicts: Object.keys(conflicts).length,\n    },\n    candidateMapping,\n    conflicts,\n    allConstants: constants,\n  };\n  \n  const outputPath = 'scripts/magic-numbers/existing-constants-analysis.json';\n  writeFileSync(outputPath, JSON.stringify(result, null, 2));\n  console.log(`ğŸ’¾ ç»“æœä¿å­˜åˆ°: ${outputPath}`);\n  \n  return result;\n}\n\nasync function scanDirectory(dirPath: string, constants: ConstantInfo[]) {\n  const items = readdirSync(dirPath);\n  \n  for (const item of items) {\n    const itemPath = join(dirPath, item);\n    const stat = statSync(itemPath);\n    \n    if (stat.isDirectory()) {\n      await scanDirectory(itemPath, constants);\n    } else if (item.endsWith('.ts') && !item.endsWith('.d.ts')) {\n      await scanFile(itemPath, constants);\n    }\n  }\n}\n\nasync function scanFile(filePath: string, constants: ConstantInfo[]) {\n  const content = readFileSync(filePath, 'utf-8');\n  const lines = content.split('\\n');\n  const relativePath = filePath.replace(`${process.cwd()  }/`, '');\n  const modulePath = relativePath.replace(/^src\\//, '@/').replace(/\\.ts$/, '');\n  \n  console.log(`ğŸ” åˆ†ææ–‡ä»¶: ${relativePath}`);\n  \n  // æ­£åˆ™æ¨¡å¼åŒ¹é…å¯¼å‡ºçš„æ•°å­—å¸¸é‡\n  const patterns = [\n    // export const NAME = 123;\n    /^export\\s+const\\s+([A-Z_][A-Z0-9_]*)\\s*=\\s*([0-9]+(?:\\.[0-9]+)?)\\s*;?\\s*$/,\n    // export const NAME: number = 123;\n    /^export\\s+const\\s+([A-Z_][A-Z0-9_]*)\\s*:\\s*number\\s*=\\s*([0-9]+(?:\\.[0-9]+)?)\\s*;?\\s*$/,\n  ];\n  \n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    \n    for (const pattern of patterns) {\n      const match = line.match(pattern);\n      if (match) {\n        const [, exportName, valueStr] = match;\n        const value = parseFloat(valueStr);\n        \n        constants.push({\n          export: exportName,\n          module: modulePath,\n          value,\n          filePath: relativePath,\n          line: i + 1,\n        });\n        \n        console.log(`  âœ… å‘ç°å¸¸é‡: ${exportName} = ${value} (è¡Œ ${i + 1})`);\n      }\n    }\n  }\n  \n  // æŸ¥æ‰¾å¯¹è±¡ä¸­çš„å¸¸é‡ï¼ˆç®€åŒ–ç‰ˆï¼‰\n  const objectPatterns = [\n    // NAME: 123,\n    /^\\s*([A-Z_][A-Z0-9_]*)\\s*:\\s*([0-9]+(?:\\.[0-9]+)?)\\s*,?\\s*$/,\n  ];\n  \n  let inExportedObject = false;\n  let currentObjectName = '';\n  \n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    \n    // æ£€æµ‹å¯¼å‡ºå¯¹è±¡çš„å¼€å§‹\n    const exportObjectMatch = line.match(/^export\\s+const\\s+([A-Z_][A-Z0-9_]*)\\s*=\\s*\\{/);\n    if (exportObjectMatch) {\n      inExportedObject = true;\n      currentObjectName = exportObjectMatch[1];\n      continue;\n    }\n    \n    // æ£€æµ‹å¯¹è±¡ç»“æŸ\n    if (inExportedObject && line.includes('}')) {\n      inExportedObject = false;\n      currentObjectName = '';\n      continue;\n    }\n    \n    // åœ¨å¯¼å‡ºå¯¹è±¡å†…æŸ¥æ‰¾æ•°å­—å¸¸é‡\n    if (inExportedObject) {\n      for (const pattern of objectPatterns) {\n        const match = line.match(pattern);\n        if (match) {\n          const [, propertyName, valueStr] = match;\n          const value = parseFloat(valueStr);\n          const exportName = `${currentObjectName}.${propertyName}`;\n          \n          constants.push({\n            export: exportName,\n            module: modulePath,\n            value,\n            filePath: relativePath,\n            line: i + 1,\n          });\n          \n          console.log(`  âœ… å‘ç°å¯¹è±¡å¸¸é‡: ${exportName} = ${value} (è¡Œ ${i + 1})`);\n        }\n      }\n    }\n  }\n}\n\nfunction prioritizeConstant(constants: ConstantInfo[]): ConstantInfo {\n  const priorityOrder = [\n    /constants\\/app-constants/,\n    /config\\/security/,\n    /constants\\/performance/,\n    /constants\\//,\n    /config\\//,\n    /magic-numbers/,\n  ];\n  \n  for (const pattern of priorityOrder) {\n    const match = constants.find(c => pattern.test(c.filePath));\n    if (match) return match;\n  }\n  \n  return constants[0];\n}\n\n// è¿è¡Œæ”¶é›†\nif (require.main === module) {\n  collectConstants().catch((error) => {\n    console.error('âŒ æ”¶é›†å¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { collectConstants, type ConstantInfo };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/simple-test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/smart-constant-generator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[548,551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[548,551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":88,"column":10,"nodeType":"MemberExpression","endLine":88,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":133,"column":10,"nodeType":"MemberExpression","endLine":133,"endColumn":28},{"ruleId":"complexity","severity":1,"message":"Function 'generatePercentageName' has a complexity of 29. Maximum allowed is 18.","line":136,"column":1,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":172,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":213,"column":10,"nodeType":"MemberExpression","endLine":213,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":254,"column":10,"nodeType":"MemberExpression","endLine":254,"endColumn":22},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":285,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":285,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8832,8838],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":300,"column":5,"nodeType":"MemberExpression","endLine":300,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":309,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":309,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\n/**\n * æ™ºèƒ½å¸¸é‡ç”Ÿæˆå™¨\n * åŸºäºè¯­ä¹‰åˆ†æç»“æœç”Ÿæˆæœ‰æ„ä¹‰çš„å¸¸é‡å\n */\n\ninterface SemanticAnalysis {\n  timestamp: string;\n  summary: {\n    totalNumbers: number;\n    categoriesFound: number;\n    categoryStats: Record<string, number>;\n  };\n  analysis: Record<string, {\n    category: string;\n    constantName: string;\n    description: string;\n  }>;\n  recommendations: string[];\n}\n\n/**\n * ç”Ÿæˆæ›´æœ‰æ„ä¹‰çš„å¸¸é‡å\n */\nfunction generateMeaningfulConstantName(numStr: string, analysis: any): string {\n  const num = parseFloat(numStr);\n  const {category} = analysis;\n  \n  // æ ¹æ®åˆ†ç±»ç”Ÿæˆæ›´æœ‰æ„ä¹‰çš„å¸¸é‡å\n  switch (category) {\n    case 'HTTP_STATUS':\n      return generateHttpStatusName(num);\n    \n    case 'TIME_MS':\n      return generateTimeConstantName(num);\n    \n    case 'BREAKPOINT':\n      return generateBreakpointName(num);\n    \n    case 'PERCENTAGE_DECIMAL':\n      return generatePercentageName(num);\n    \n    case 'ANIMATION_DURATION':\n      return generateAnimationDurationName(num);\n    \n    case 'MEMORY_SIZE':\n      return generateMemorySizeName(num);\n    \n    case 'ANGLE':\n      return generateAngleName(num);\n    \n    case 'COORDINATE':\n      return generateCoordinateName(num, numStr);\n    \n    case 'PORT':\n      return generatePortName(num);\n    \n    case 'YEAR':\n      return `YEAR_${num}`;\n    \n    case 'NUMERIC':\n    default:\n      return generateNumericConstantName(num, numStr);\n  }\n}\n\nfunction generateHttpStatusName(num: number): string {\n  const statusMap: Record<number, string> = {\n    200: 'HTTP_OK',\n    201: 'HTTP_CREATED',\n    204: 'HTTP_NO_CONTENT',\n    300: 'HTTP_MULTIPLE_CHOICES',\n    301: 'HTTP_MOVED_PERMANENTLY',\n    302: 'HTTP_FOUND',\n    400: 'HTTP_BAD_REQUEST',\n    401: 'HTTP_UNAUTHORIZED',\n    403: 'HTTP_FORBIDDEN',\n    404: 'HTTP_NOT_FOUND',\n    415: 'HTTP_UNSUPPORTED_MEDIA_TYPE',\n    429: 'HTTP_TOO_MANY_REQUESTS',\n    500: 'HTTP_INTERNAL_SERVER_ERROR',\n    503: 'HTTP_SERVICE_UNAVAILABLE'\n  };\n  return statusMap[num] || `HTTP_${num}`;\n}\n\nfunction generateTimeConstantName(num: number): string {\n  if (num === 1000) return 'SECOND_MS';\n  if (num === 2000) return 'TWO_SECONDS_MS';\n  if (num === 3000) return 'THREE_SECONDS_MS';\n  if (num === 5000) return 'FIVE_SECONDS_MS';\n  if (num === 10000) return 'TEN_SECONDS_MS';\n  if (num === 15000) return 'FIFTEEN_SECONDS_MS';\n  if (num === 30000) return 'THIRTY_SECONDS_MS';\n  if (num === 60000) return 'MINUTE_MS';\n  if (num === 120000) return 'TWO_MINUTES_MS';\n  if (num === 1800000) return 'THIRTY_MINUTES_MS';\n  if (num === 3600000) return 'HOUR_MS';\n  if (num === 86400000) return 'DAY_MS';\n  if (num === 31536000) return 'YEAR_SECONDS';\n  \n  // è‡ªåŠ¨è®¡ç®—æ—¶é—´å•ä½\n  if (num >= 86400000) return `TIME_${Math.round(num / 86400000)}_DAYS_MS`;\n  if (num >= 3600000) return `TIME_${Math.round(num / 3600000)}_HOURS_MS`;\n  if (num >= 60000) return `TIME_${Math.round(num / 60000)}_MINUTES_MS`;\n  if (num >= 1000) return `TIME_${Math.round(num / 1000)}_SECONDS_MS`;\n  \n  return `TIME_${num}_MS`;\n}\n\nfunction generateBreakpointName(num: number): string {\n  const breakpointMap: Record<number, string> = {\n    320: 'BREAKPOINT_MOBILE_SMALL',\n    375: 'BREAKPOINT_MOBILE',\n    480: 'BREAKPOINT_MOBILE_LARGE',\n    640: 'BREAKPOINT_SM',\n    667: 'BREAKPOINT_MOBILE_LANDSCAPE',\n    720: 'BREAKPOINT_HD_HEIGHT',\n    768: 'BREAKPOINT_MD',\n    800: 'BREAKPOINT_TABLET_SMALL',\n    1024: 'BREAKPOINT_LG',\n    1080: 'BREAKPOINT_HD_HEIGHT_FULL',\n    1200: 'BREAKPOINT_DESKTOP',\n    1280: 'BREAKPOINT_XL',\n    1536: 'BREAKPOINT_2XL',\n    1600: 'BREAKPOINT_DESKTOP_LARGE',\n    1920: 'BREAKPOINT_FULL_HD'\n  };\n  return breakpointMap[num] || `BREAKPOINT_${num}`;\n}\n\nfunction generatePercentageName(num: number): string {\n  const percentage = Math.round(num * 100);\n  \n  // ç‰¹æ®Šç™¾åˆ†æ¯”å‘½å\n  if (percentage === 1) return 'PERCENT_1';\n  if (percentage === 2) return 'PERCENT_2';\n  if (percentage === 3) return 'PERCENT_3';\n  if (percentage === 5) return 'PERCENT_5';\n  if (percentage === 8) return 'PERCENT_8';\n  if (percentage === 10) return 'PERCENT_10';\n  if (percentage === 12) return 'PERCENT_12';\n  if (percentage === 15) return 'PERCENT_15';\n  if (percentage === 20) return 'PERCENT_20';\n  if (percentage === 25) return 'PERCENT_25';\n  if (percentage === 30) return 'PERCENT_30';\n  if (percentage === 40) return 'PERCENT_40';\n  if (percentage === 45) return 'PERCENT_45';\n  if (percentage === 50) return 'PERCENT_50';\n  if (percentage === 55) return 'PERCENT_55';\n  if (percentage === 60) return 'PERCENT_60';\n  if (percentage === 65) return 'PERCENT_65';\n  if (percentage === 70) return 'PERCENT_70';\n  if (percentage === 75) return 'PERCENT_75';\n  if (percentage === 80) return 'PERCENT_80';\n  if (percentage === 85) return 'PERCENT_85';\n  if (percentage === 90) return 'PERCENT_90';\n  if (percentage === 94) return 'PERCENT_94';\n  if (percentage === 95) return 'PERCENT_95';\n  if (percentage === 96) return 'PERCENT_96';\n  if (percentage === 97) return 'PERCENT_97';\n  if (percentage === 99) return 'PERCENT_99';\n  \n  // é€æ˜åº¦ç›¸å…³\n  if (num <= 1) return `OPACITY_${percentage}`;\n  \n  return `DECIMAL_${num.toString().replace('.', '_')}`;\n}\n\nfunction generateAnimationDurationName(num: number): string {\n  if (num === 150) return 'ANIMATION_FAST';\n  if (num === 200) return 'ANIMATION_QUICK';\n  if (num === 250) return 'ANIMATION_NORMAL';\n  if (num === 300) return 'ANIMATION_SMOOTH';\n  if (num === 400) return 'ANIMATION_MEDIUM';\n  if (num === 500) return 'ANIMATION_SLOW';\n  if (num === 600) return 'ANIMATION_SLOWER';\n  if (num === 700) return 'ANIMATION_VERY_SLOW';\n  if (num === 750) return 'ANIMATION_EXTRA_SLOW';\n  if (num === 800) return 'ANIMATION_ULTRA_SLOW';\n  if (num === 900) return 'ANIMATION_SUPER_SLOW';\n  if (num === 1000) return 'ANIMATION_VERY_SLOW_1S';\n  if (num === 1200) return 'ANIMATION_SLOW_1_2S';\n  if (num === 1250) return 'ANIMATION_SLOW_1_25S';\n  if (num === 1500) return 'ANIMATION_SLOW_1_5S';\n  if (num === 2000) return 'ANIMATION_SLOW_2S';\n  \n  return `ANIMATION_DURATION_${num}`;\n}\n\nfunction generateMemorySizeName(num: number): string {\n  const sizeMap: Record<number, string> = {\n    256: 'BYTES_256',\n    512: 'BYTES_512',\n    1024: 'BYTES_1KB',\n    2048: 'BYTES_2KB',\n    4096: 'BYTES_4KB',\n    8192: 'BYTES_8KB',\n    16384: 'BYTES_16KB',\n    32768: 'BYTES_32KB',\n    65536: 'BYTES_64KB',\n    131072: 'BYTES_128KB',\n    262144: 'BYTES_256KB',\n    524288: 'BYTES_512KB',\n    1048576: 'BYTES_1MB',\n    2097152: 'BYTES_2MB',\n    4194304: 'BYTES_4MB'\n  };\n  return sizeMap[num] || `MEMORY_SIZE_${num}`;\n}\n\nfunction generateAngleName(num: number): string {\n  if (num === 0) return 'ANGLE_ZERO';\n  if (num === 45) return 'ANGLE_45_DEG';\n  if (num === 90) return 'ANGLE_90_DEG';\n  if (num === 180) return 'ANGLE_180_DEG';\n  if (num === 270) return 'ANGLE_270_DEG';\n  if (num === 360 || (num > 359 && num < 361)) return 'ANGLE_360_DEG';\n  if (num === 720) return 'ANGLE_720_DEG';\n  \n  return `ANGLE_${num.toString().replace('.', '_')}_DEG`;\n}\n\nfunction generateCoordinateName(num: number, numStr: string): string {\n  // æ ¹æ®å¸¸è§åŸå¸‚åæ ‡è¿›è¡Œå‘½å\n  if (Math.abs(num - 39.9042) < 0.001) return 'COORD_BEIJING_LAT';\n  if (Math.abs(num - 116.4074) < 0.001) return 'COORD_BEIJING_LNG';\n  if (Math.abs(num - 40.7128) < 0.001) return 'COORD_NYC_LAT';\n  if (Math.abs(num - 74.006) < 0.001) return 'COORD_NYC_LNG';\n  \n  // æµ‹è¯•ç”¨ç²¾ç¡®åæ ‡\n  if (numStr.includes('.') && numStr.length > 10) {\n    return `TEST_COORDINATE_${numStr.replace('.', '_').replace('-', 'NEG_')}`;\n  }\n  \n  return `COORDINATE_${numStr.replace('.', '_').replace('-', 'NEG_')}`;\n}\n\nfunction generatePortName(num: number): string {\n  const portMap: Record<number, string> = {\n    3000: 'PORT_DEV_SERVER',\n    3001: 'PORT_DEV_SERVER_ALT',\n    4000: 'PORT_DEV_API',\n    5000: 'PORT_DEV_FRONTEND',\n    8000: 'PORT_HTTP_ALT',\n    8080: 'PORT_HTTP_PROXY',\n    8888: 'PORT_DEV_SPECIAL',\n    9000: 'PORT_DEV_BUILD'\n  };\n  return portMap[num] || `PORT_${num}`;\n}\n\nfunction generateNumericConstantName(num: number, numStr: string): string {\n  // ç‰¹æ®Šæ•°å­—\n  if (num === 42) return 'ANSWER_TO_EVERYTHING'; // é“¶æ²³ç³»æ¼«æ¸¸æŒ‡å—\n  if (num === 123) return 'TEST_NUMBER_123';\n  if (num === 456) return 'TEST_NUMBER_456';\n  if (num === 999) return 'TEST_MAX_999';\n  if (num === 1234) return 'TEST_NUMBER_1234';\n  if (num === 12345) return 'TEST_NUMBER_12345';\n  if (num === 1234567) return 'TEST_NUMBER_LARGE';\n  \n  // å¤§æ•°å­—\n  if (num >= 1000000000000) return `TRILLION_${Math.floor(num / 1000000000000)}`;\n  if (num >= 1000000000) return `BILLION_${Math.floor(num / 1000000000)}`;\n  if (num >= 1000000) return `MILLION_${Math.floor(num / 1000000)}`;\n  if (num >= 1000) return `THOUSAND_${Math.floor(num / 1000)}`;\n  \n  // æ•´æ•°\n  if (Number.isInteger(num)) {\n    return `NUMBER_${num}`;\n  }\n  \n  // å°æ•°\n  return `DECIMAL_${numStr.replace('.', '_').replace('-', 'NEG_')}`;\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  console.log('ğŸ¯ å¼€å§‹ç”Ÿæˆæ™ºèƒ½å¸¸é‡æ˜ å°„...');\n  \n  // è¯»å–è¯­ä¹‰åˆ†æç»“æœ\n  const analysisPath = resolve(__dirname, 'semantic-analysis-report.json');\n  const analysisData: SemanticAnalysis = JSON.parse(readFileSync(analysisPath, 'utf-8'));\n  \n  console.log(`ğŸ“Š å¤„ç† ${analysisData.summary.totalNumbers} ä¸ªæ•°å­—`);\n  console.log(`ğŸ“‹ å‘ç° ${analysisData.summary.categoriesFound} ä¸ªåˆ†ç±»`);\n  \n  // ç”Ÿæˆæ–°çš„æ˜ å°„\n  const newMapping: Record<string, string> = {};\n  \n  for (const [numStr, analysis] of Object.entries(analysisData.analysis)) {\n    const meaningfulName = generateMeaningfulConstantName(numStr, analysis);\n    newMapping[numStr] = meaningfulName;\n  }\n  \n  // åˆå¹¶ç°æœ‰æ˜ å°„\n  const existingMappingPath = resolve(__dirname, 'mapping.json');\n  let existingMapping: Record<string, string> = {};\n  \n  try {\n    existingMapping = JSON.parse(readFileSync(existingMappingPath, 'utf-8'));\n  } catch (error) {\n    console.log('ğŸ“ åˆ›å»ºæ–°çš„æ˜ å°„æ–‡ä»¶');\n  }\n  \n  // åˆå¹¶æ˜ å°„ï¼Œæ–°çš„æ™ºèƒ½æ˜ å°„ä¼˜å…ˆ\n  const finalMapping = { ...existingMapping, ...newMapping };\n  \n  // ä¿å­˜æ˜ å°„æ–‡ä»¶\n  writeFileSync(existingMappingPath, JSON.stringify(finalMapping, null, 2));\n  \n  console.log('ğŸ“Š æ˜ å°„ç”Ÿæˆå®Œæˆï¼');\n  console.log(`  ç°æœ‰å¸¸é‡: ${Object.keys(existingMapping).length} ä¸ª`);\n  console.log(`  æ–°å¢å¸¸é‡: ${Object.keys(newMapping).length} ä¸ª`);\n  console.log(`  æ€»è®¡å¸¸é‡: ${Object.keys(finalMapping).length} ä¸ª`);\n  \n  // æ˜¾ç¤ºåˆ†ç±»ç»Ÿè®¡\n  console.log('');\n  console.log('ğŸ“ˆ æ™ºèƒ½åˆ†ç±»ç»Ÿè®¡:');\n  Object.entries(analysisData.summary.categoryStats)\n    .sort(([,a], [,b]) => b - a)\n    .forEach(([category, count]) => {\n      console.log(`  ${category}: ${count} ä¸ª`);\n    });\n  \n  console.log('');\n  console.log(`ğŸ“„ æ˜ å°„æ–‡ä»¶å·²æ›´æ–°: ${existingMappingPath}`);\n  \n  return finalMapping;\n}\n\n// è¿è¡Œç”Ÿæˆå™¨\nif (require.main === module) {\n  main().catch((error) => {\n    console.error('âŒ æ™ºèƒ½å¸¸é‡ç”Ÿæˆå¤±è´¥:', error);\n    process.exit(1);\n  });\n}\n\nexport { generateMeaningfulConstantName };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/test-ast-core.ts","messages":[{"ruleId":"require-await","severity":1,"message":"Async function 'testASTCore' has no 'await' expression.","line":9,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":9,"endColumn":27,"suggestions":[{"messageId":"removeAsync","fix":{"range":[238,244],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { Project, ts } from 'ts-morph';\nimport { resolve } from 'node:path';\nimport { writeFileSync } from 'node:fs';\nimport { loadEnhancedMapping, ensureConstDefined, shouldSkipNode } from './utils';\n\n// æµ‹è¯•ASTå·¥å…·çš„æ ¸å¿ƒåŠŸèƒ½\nasync function testASTCore() {\n  const log: string[] = [];\n  log.push('ğŸ§ª æµ‹è¯•ASTå·¥å…·æ ¸å¿ƒåŠŸèƒ½...');\n\n  // åˆå§‹åŒ–é¡¹ç›®\n  const rootDir = resolve(__dirname, '../..');\n  const project = new Project({\n    tsConfigFilePath: resolve(rootDir, 'tsconfig.json'),\n  });\n\n  // æ·»åŠ æµ‹è¯•æ–‡ä»¶\n  const testFilePath = resolve(__dirname, 'test-sample.ts');\n  log.push(`ğŸ“„ æµ‹è¯•æ–‡ä»¶: ${testFilePath}`);\n\n  try {\n    const sourceFile = project.addSourceFileAtPath(testFilePath);\n    log.push(`âœ… æˆåŠŸåŠ è½½æµ‹è¯•æ–‡ä»¶`);\n\n    // åŠ è½½æ˜ å°„\n    const mapping = loadEnhancedMapping();\n    log.push(`ğŸ“‹ åŠ è½½æ˜ å°„: ${Object.keys(mapping).length} ä¸ªå¸¸é‡`);\n\n    // æŸ¥æ‰¾æ•°å­—å­—é¢é‡\n    let foundNumbers = 0;\n    let replacements = 0;\n\n    sourceFile.forEachDescendant((node) => {\n      if (ts.isNumericLiteral(node.compilerNode)) {\n        const text = node.getText();\n        foundNumbers++;\n\n        log.push(`ğŸ” å‘ç°æ•°å­—: ${text}`);\n\n        // æ£€æŸ¥æ˜¯å¦åº”è¯¥è·³è¿‡\n        if (shouldSkipNode(node)) {\n          log.push(`  â­ï¸ è·³è¿‡: ${text}`);\n          return;\n        }\n\n        const { constantName, isSupported } = ensureConstDefined(mapping, text);\n\n        if (isSupported) {\n          log.push(`  âœ… å¯æ›¿æ¢: ${text} â†’ ${constantName}`);\n          replacements++;\n        } else {\n          log.push(`  âŒ æ— æ˜ å°„: ${text}`);\n        }\n      }\n    });\n\n    log.push(`\\nğŸ“Š æµ‹è¯•ç»“æœ:`);\n    log.push(`  å‘ç°æ•°å­—: ${foundNumbers}`);\n    log.push(`  å¯æ›¿æ¢: ${replacements}`);\n\n    // å†™å…¥ç»“æœåˆ°æ–‡ä»¶\n    const resultPath = resolve(__dirname, 'test-result.txt');\n    writeFileSync(resultPath, log.join('\\n'));\n\n    if (foundNumbers > 0 && replacements > 0) {\n      log.push(`\\nğŸ‰ ASTå·¥å…·æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸ï¼`);\n      writeFileSync(resultPath, log.join('\\n'));\n      return true;\n    } \n      log.push(`\\nâŒ ASTå·¥å…·å¯èƒ½å­˜åœ¨é—®é¢˜`);\n      writeFileSync(resultPath, log.join('\\n'));\n      return false;\n    \n\n  } catch (error) {\n    log.push(`âŒ æµ‹è¯•å¤±è´¥: ${error}`);\n    const resultPath = resolve(__dirname, 'test-result.txt');\n    writeFileSync(resultPath, log.join('\\n'));\n    return false;\n  }\n}\n\n// è¿è¡Œæµ‹è¯•\nif (require.main === module) {\n  testASTCore().then(success => {\n    process.exit(success ? 0 : 1);\n  });\n}\n\nexport { testASTCore };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/test-file-finder.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"node:fs\" with non literal argument at index 0","line":13,"column":19,"nodeType":"CallExpression","endLine":13,"endColumn":35},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"node:fs\" with non literal argument at index 0","line":17,"column":20,"nodeType":"CallExpression","endLine":17,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { resolve, join } from 'node:path';\nimport { readdirSync, statSync } from 'node:fs';\n\n/**\n * é€’å½’æŸ¥æ‰¾åŒ¹é…çš„TypeScriptæ–‡ä»¶\n */\nfunction findTsFiles(dir: string, pattern: RegExp = /\\.(ts|tsx)$/): string[] {\n  const results: string[] = [];\n  \n  try {\n    const items = readdirSync(dir);\n    \n    for (const item of items) {\n      const fullPath = join(dir, item);\n      const stat = statSync(fullPath);\n      \n      if (stat.isDirectory()) {\n        // è·³è¿‡node_moduleså’Œ.gitç­‰ç›®å½•\n        if (!item.startsWith('.') && item !== 'node_modules') {\n          results.push(...findTsFiles(fullPath, pattern));\n        }\n      } else if (stat.isFile() && pattern.test(item)) {\n        results.push(fullPath);\n      }\n    }\n  } catch (error) {\n    console.warn(`æ— æ³•è¯»å–ç›®å½• ${dir}:`, error);\n  }\n  \n  return results;\n}\n\n// æµ‹è¯•æ–‡ä»¶æŸ¥æ‰¾\nconst rootDir = process.cwd().endsWith('scripts/magic-numbers')\n  ? resolve(process.cwd(), '../..')\n  : process.cwd();\n\nconst srcDir = resolve(rootDir, 'src');\n\nconsole.log('æ ¹ç›®å½•:', rootDir);\nconsole.log('æºç ç›®å½•:', srcDir);\n\nconst files = findTsFiles(srcDir);\nconsole.log(`æ‰¾åˆ° ${files.length} ä¸ªTypeScriptæ–‡ä»¶`);\n\nif (files.length > 0) {\n  console.log('å‰10ä¸ªæ–‡ä»¶:');\n  files.slice(0, 10).forEach((file, index) => {\n    console.log(`${index + 1}. ${file.replace(rootDir, '.')}`);\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/test-sample.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/utils.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"node:fs\" with non literal argument at index 0","line":33,"column":17,"nodeType":"CallExpression","endLine":33,"endColumn":59},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"node:fs\" with non literal argument at index 0","line":36,"column":17,"nodeType":"CallExpression","endLine":36,"endColumn":59},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":48,"column":11,"nodeType":"MemberExpression","endLine":48,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":56,"column":11,"nodeType":"MemberExpression","endLine":56,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":76,"column":5,"nodeType":"MemberExpression","endLine":76,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":106,"column":17,"nodeType":"MemberExpression","endLine":106,"endColumn":32},{"ruleId":"complexity","severity":1,"message":"Function 'shouldSkipNode' has a complexity of 21. Maximum allowed is 18.","line":133,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":192,"endColumn":2},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'callExpression' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":359,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCoordinateRange' is defined but never used. Allowed unused vars must match /^_/u.","line":511,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":511,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCommonNumber' is defined but never used. Allowed unused vars must match /^_/u.","line":535,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":535,"endColumn":24},{"ruleId":"max-params","severity":2,"message":"Function 'processModuleImports' has too many parameters (4). Maximum allowed is 3.","line":610,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":610,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":653,"column":7,"nodeType":"MemberExpression","endLine":653,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":654,"column":7,"nodeType":"MemberExpression","endLine":654,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SourceFile, Node, ts, SyntaxKind } from 'ts-morph';\nimport { readFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\n\n/**\n * æ˜ å°„æ¡ç›®æ¥å£\n */\nexport interface MappingEntry {\n  export: string;\n  module: string;\n  source: string;\n  type?: string;\n  alternatives?: Array<{\n    export: string;\n    module: string;\n    source: string;\n  }>;\n}\n\n/**\n * åŠ è½½å¢å¼ºç‰ˆæ˜ å°„æ–‡ä»¶\n */\nexport function loadEnhancedMapping(): Record<string, MappingEntry> {\n  // ä¼˜å…ˆä½¿ç”¨å¢å¼ºç‰ˆæ˜ å°„ - ä¿®å¤è·¯å¾„è§£æ\n  const baseDir = __dirname.includes('scripts/magic-numbers') ? resolve(__dirname, '../..') : process.cwd();\n  const enhancedMappingPath = resolve(baseDir, 'scripts/magic-numbers/enhanced-codex-mapping.json');\n  const fallbackMappingPath = resolve(baseDir, 'scripts/magic-numbers/codex-mapping.json');\n\n  try {\n    let content: string;\n\n    try {\n      content = readFileSync(enhancedMappingPath, 'utf-8');\n      console.log('ğŸ“‹ ä½¿ç”¨å¢å¼ºç‰ˆCODEXæ˜ å°„');\n    } catch {\n      content = readFileSync(fallbackMappingPath, 'utf-8');\n      console.log('ğŸ“‹ ä½¿ç”¨åŸå§‹CODEXæ˜ å°„');\n    }\n\n    const data = JSON.parse(content);\n\n    // è¿‡æ»¤æ‰å…ƒæ•°æ®å­—æ®µ\n    const mapping: Record<string, MappingEntry> = {};\n    for (const [key, value] of Object.entries(data)) {\n      if (!key.startsWith('_')) {\n        if (typeof value === 'string') {\n          // å…¼å®¹åŸå§‹æ ¼å¼\n          mapping[key] = {\n            export: value,\n            module: \"@/constants/magic-numbers\",\n            source: \"åŸå§‹CODEXæ˜ å°„\",\n            type: \"codex-legacy\",\n          };\n        } else if (typeof value === 'object' && value !== null) {\n          // å¢å¼ºæ ¼å¼\n          mapping[key] = value as MappingEntry;\n        }\n      }\n    }\n\n    return mapping;\n  } catch (error) {\n    console.error('âŒ æ— æ³•åŠ è½½æ˜ å°„æ–‡ä»¶:', error);\n    return {};\n  }\n}\n\n/**\n * å…¼å®¹æ€§å‡½æ•°ï¼šè·å–ç®€å•çš„å­—ç¬¦ä¸²æ˜ å°„\n */\nexport function loadMapping(): Record<string, string> {\n  const enhancedMapping = loadEnhancedMapping();\n  const simpleMapping: Record<string, string> = {};\n\n  for (const [key, entry] of Object.entries(enhancedMapping)) {\n    simpleMapping[key] = entry.export;\n  }\n\n  return simpleMapping;\n}\n\n/**\n * è§„èŒƒåŒ–æ•°å­—å­—ç¬¦ä¸²\n * å¤„ç†ç§‘å­¦è®¡æ•°æ³•ã€æ•°å­—åˆ†éš”ç¬¦ç­‰\n */\nexport function normalize(text: string): string {\n  // ç§»é™¤æ•°å­—åˆ†éš”ç¬¦ (1_000 -> 1000)\n  const withoutSeparators = text.replace(/_/g, '');\n\n  // è½¬æ¢ä¸ºæ•°å­—å†è½¬å›å­—ç¬¦ä¸²ä»¥è§„èŒƒåŒ–æ ¼å¼\n  const num = parseFloat(withoutSeparators);\n\n  // å¤„ç†æ•´æ•°å’Œå°æ•°\n  if (Number.isInteger(num)) {\n    return num.toString();\n  } \n    return num.toString();\n  \n}\n\n/**\n * ç¡®ä¿å¸¸é‡å·²å®šä¹‰ - æ”¯æŒå¢å¼ºç‰ˆæ˜ å°„æ ¼å¼\n */\nexport function ensureConstDefined(map: Record<string, MappingEntry | string>, text: string) {\n  const normalized = normalize(text);\n  const entry = map[normalized];\n\n  if (!entry) {\n    return { constantName: '', isSupported: false, module: '' };\n  }\n\n  // å…¼å®¹æ—§æ ¼å¼ï¼ˆå­—ç¬¦ä¸²ï¼‰\n  if (typeof entry === 'string') {\n    return {\n      constantName: entry,\n      isSupported: true,\n      module: '@/constants/magic-numbers'\n    };\n  }\n\n  // æ–°æ ¼å¼ï¼ˆMappingEntryå¯¹è±¡ï¼‰\n  return {\n    constantName: entry.export,\n    isSupported: true,\n    module: entry.module\n  };\n}\n\n/**\n * CODEXåˆ†å±‚æ²»ç†ï¼šåˆ¤æ–­æ˜¯å¦åº”è¯¥è·³è¿‡è¯¥èŠ‚ç‚¹\n * è·³è¿‡ç±»å‹åŸŸã€BigIntã€å­—ç¬¦ä¸²/æ¨¡æ¿/JSX/æ­£åˆ™/æ³¨é‡Šã€æµ‹è¯•æ–‡ä»¶ã€æ•°æ®å‹æ•°å­—ç­‰\n */\nexport function shouldSkipNode(node: Node): boolean {\n  const {compilerNode} = node;\n  const sourceFile = node.getSourceFile();\n  const filePath = sourceFile.getFilePath();\n\n  // 1. è·¯å¾„è¿‡æ»¤ï¼šè·³è¿‡æµ‹è¯•æ–‡ä»¶ã€å¤¹å…·ã€Mockç­‰\n  if (shouldSkipByPath(filePath)) {\n    return true;\n  }\n\n  // 2. è·³è¿‡ BigInt å­—é¢é‡\n  if (ts.isBigIntLiteral(compilerNode)) {\n    return true;\n  }\n\n  // 3. è·³è¿‡å¸¸é‡å®šä¹‰æ–‡ä»¶å’Œå•ä½å·¥å…·åº“ï¼Œé¿å…å¾ªç¯å¼•ç”¨\n  if (filePath.includes('constants/magic-numbers.ts') ||\n      filePath.includes('constants/count.ts') ||\n      filePath.includes('constants/decimal.ts') ||\n      filePath.includes('constants/hex.ts') ||\n      filePath.includes('constants/time.ts') ||\n      filePath.includes('lib/units.ts') ||\n      filePath.includes('constants/app-constants.ts') ||\n      filePath.includes('constants/performance-constants.ts') ||\n      filePath.includes('constants/security-constants.ts') ||\n      filePath.includes('constants/i18n-constants.ts') ||\n      filePath.includes('constants/performance.ts') ||\n      (filePath.includes('constants/') && filePath.includes('-constants.ts'))) {\n    return true;\n  }\n\n  // 4. è¯­å¢ƒè¿‡æ»¤ï¼šè·³è¿‡ç±»å‹åŸŸã€å­—ç¬¦ä¸²ç­‰\n  if (shouldSkipByContext(node)) {\n    return true;\n  }\n\n  // 5. æ•°å€¼å½¢æ€è¿‡æ»¤ï¼šè·³è¿‡æ•°æ®å‹æ•°å­—\n  const text = node.getText();\n  const num = parseFloat(text);\n  if (shouldSkipByNumericPattern(num, text)) {\n    return true;\n  }\n\n  // 6. è¯­ä¹‰é”®åè¿‡æ»¤ï¼šæ ¹æ®å±æ€§ååˆ¤æ–­æ˜¯å¦ä¸ºåæ ‡ç­‰æ•°æ®\n  if (shouldSkipBySemanticContext(node)) {\n    return true;\n  }\n\n  // 7. æ–¹æ³•è°ƒç”¨è¯­å¢ƒè¿‡æ»¤ï¼šè·³è¿‡ç‰¹å®šæ–¹æ³•è°ƒç”¨ä¸­çš„å‚æ•°\n  if (shouldSkipByMethodContext(node)) {\n    return true;\n  }\n\n  // 8. è¯­ä¹‰ä¸åŒ¹é…è¿‡æ»¤ï¼šæ ¹æ®å˜é‡åå’Œä¸Šä¸‹æ–‡åˆ¤æ–­è¯­ä¹‰\n  if (shouldSkipBySemanticMismatch(node)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * è·¯å¾„è¿‡æ»¤ï¼šè·³è¿‡æµ‹è¯•æ–‡ä»¶ã€å¤¹å…·ã€Mockç­‰\n */\nfunction shouldSkipByPath(filePath: string): boolean {\n  const skipPatterns = [\n    // æµ‹è¯•æ–‡ä»¶\n    /\\.test\\.(js|jsx|ts|tsx)$/,\n    /__tests__\\//,\n    /\\/tests?\\//,\n    /\\/e2e\\//,\n\n    // å¤¹å…·å’ŒMock\n    /__fixtures__\\//,\n    /\\/mocks?\\//,\n    /\\/fixtures?\\//,\n\n    // é…ç½®å’Œè„šæœ¬ï¼ˆéƒ¨åˆ†è±å…ï¼‰\n    /\\/scripts\\//,\n    /\\.config\\.(js|ts|mjs)$/,\n\n    // ç±»å‹å®šä¹‰æ–‡ä»¶\n    /\\.d\\.ts$/,\n    /@types\\//,\n\n    // CODEXåˆ†å±‚æ²»ç†ï¼šæ‰©å±•æµ‹è¯•ç›¸å…³æ–‡ä»¶\n    /test-.*\\.ts$/,\n    /test-.*\\.tsx$/,\n    /\\/test-/,\n    /-test\\./,\n    /constants\\/test-/,\n    /constants.*test/,\n\n    // å¼€å‘å·¥å…·å’Œè¯Šæ–­æ–‡ä»¶\n    /dev-tools/,\n    /diagnostics/,\n    /react-scan/,\n\n    // é…ç½®æ–‡ä»¶ï¼ˆåº”è¯¥ä½¿ç”¨é…ç½®é›†ä¸­åŒ–ï¼‰\n    /config\\/app\\.ts$/,\n\n    // CODEXåˆ†å±‚æ²»ç†ï¼šå†…å®¹å‹æ•°æ®æ–‡ä»¶è±å…\n    /lib\\/site-config\\.ts$/,\n    /lib\\/colors\\/.*\\.ts$/,\n    /lib\\/translation-benchmarks\\.ts$/,\n    /lib\\/.*-benchmarks\\.ts$/,\n\n    // APIè·¯ç”±ä¸­çš„ä¸šåŠ¡æ•°æ®\n    /app\\/api\\/.*\\/route\\.ts$/,\n\n    // ç±»å‹å®šä¹‰ä¸­çš„é…ç½®æ•°æ®\n    /types\\/.*-config\\/.*\\.ts$/,\n  ];\n\n  return skipPatterns.some(pattern => pattern.test(filePath));\n}\n\n/**\n * è¯­å¢ƒè¿‡æ»¤ï¼šè·³è¿‡ç±»å‹åŸŸã€å­—ç¬¦ä¸²ã€æ¨¡æ¿ã€JSXç­‰\n */\nfunction shouldSkipByContext(node: Node): boolean {\n  const parent = node.getParent();\n  if (!parent) return true;\n\n  const parentNode = parent.compilerNode;\n\n  // è·³è¿‡ç±»å‹åŸŸä¸­çš„å­—é¢é‡\n  if (ts.isLiteralTypeNode(parentNode)) {\n    return true;\n  }\n\n  // è·³è¿‡å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„å†…å®¹\n  if (ts.isStringLiteral(parentNode) || ts.isNoSubstitutionTemplateLiteral(parentNode)) {\n    return true;\n  }\n\n  // è·³è¿‡æ¨¡æ¿å­—é¢é‡çš„éè¡¨è¾¾å¼éƒ¨åˆ†\n  if (ts.isTemplateHead(parentNode) || ts.isTemplateMiddle(parentNode) || ts.isTemplateTail(parentNode)) {\n    return true;\n  }\n\n  // è·³è¿‡æ­£åˆ™è¡¨è¾¾å¼\n  if (ts.isRegularExpressionLiteral(parentNode)) {\n    return true;\n  }\n\n  // è·³è¿‡ JSX æ–‡æœ¬å’Œå±æ€§\n  if (ts.isJsxText(parentNode) || ts.isJsxAttribute(parentNode)) {\n    return true;\n  }\n\n  // è·³è¿‡æ³¨é‡Šï¼ˆé€šè¿‡æ£€æŸ¥çˆ¶èŠ‚ç‚¹çš„ triviaï¼‰\n  const sourceFile = node.getSourceFile();\n  const start = node.getStart();\n  const fullStart = node.getFullStart();\n\n  if (start !== fullStart) {\n    const triviaText = sourceFile.getFullText().slice(fullStart, start);\n    if (triviaText.includes('//') || triviaText.includes('/*')) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * æ•°å€¼å½¢æ€è¿‡æ»¤ï¼šè·³è¿‡æ•°æ®å‹æ•°å­—\n */\nfunction shouldSkipByNumericPattern(num: number, text: string): boolean {\n  // 1. æ—¶é—´æˆ³è¿‡æ»¤ï¼š13ä½æ¯«ç§’æ—¶é—´æˆ³\n  if (isTimestampMs(num)) {\n    return true;\n  }\n\n  // 2. é•¿å°æ•°è¿‡æ»¤ï¼šç²¾åº¦æµ‹è¯•ç”¨çš„é•¿å°æ•°\n  if (isLongDecimal(text)) {\n    return true;\n  }\n\n  // 3. å¤§æ•´æ•°è¿‡æ»¤ï¼šIDã€è®¡æ•°ç­‰\n  if (isHugeInteger(num)) {\n    return true;\n  }\n\n  // 4. åœ°ç†åæ ‡èŒƒå›´è¿‡æ»¤ (ä¸´æ—¶ç¦ç”¨ç”¨äºæµ‹è¯•)\n  // if (isCoordinateRange(num)) {\n  //   return true;\n  // }\n\n  // 5. CODEXåˆ†å±‚æ²»ç†ï¼šå¸¸è§æ•°å­—è±å… (ä¸´æ—¶ç¦ç”¨ç”¨äºæµ‹è¯•)\n  // if (isCommonNumber(num)) {\n  //   return true;\n  // }\n\n  // 6. æµ‹è¯•æ•°æ®è¿‡æ»¤\n  if (isTestData(num)) {\n    return true;\n  }\n\n  // 7. é…ç½®æ•°å­—è¿‡æ»¤ï¼ˆåº”è¯¥ç”¨é…ç½®é›†ä¸­åŒ–ï¼‰\n  if (isConfigNumber(num)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * æ–¹æ³•è°ƒç”¨è¯­å¢ƒè¿‡æ»¤ï¼šè·³è¿‡ç‰¹å®šæ–¹æ³•è°ƒç”¨ä¸­çš„å‚æ•°\n */\nfunction shouldSkipByMethodContext(node: Node): boolean {\n  const parent = node.getParent();\n  if (!parent) return false;\n\n  // æ£€æŸ¥æ˜¯å¦åœ¨æ–¹æ³•è°ƒç”¨ä¸­\n  let current = parent;\n  while (current && !ts.isCallExpression(current.compilerNode)) {\n    current = current.getParent();\n    if (!current) return false;\n  }\n\n  if (!current || !ts.isCallExpression(current.compilerNode)) {\n    return false;\n  }\n\n  const callExpression = current.compilerNode as ts.CallExpression;\n  const callText = current.getText();\n\n  // è·³è¿‡è¿›åˆ¶è½¬æ¢æ–¹æ³•\n  if (callText.includes('.toString(') && node.getText() === '36') {\n    return true;\n  }\n\n  // è·³è¿‡æ•°ç»„åˆ‡ç‰‡æ–¹æ³•\n  if (callText.includes('.slice(') && (node.getText() === '500' || node.getText() === '-500')) {\n    return true;\n  }\n\n  // è·³è¿‡æ•°å­¦è¿ç®—æ–¹æ³•\n  if (callText.includes('Math.') && ['36', '16', '10', '2'].includes(node.getText())) {\n    return true;\n  }\n\n  // è·³è¿‡æ—¶é—´æˆ³å’Œéšæœºæ•°ç”Ÿæˆ\n  if (callText.includes('Date.now()') || callText.includes('Math.random()')) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * è¯­ä¹‰ä¸åŒ¹é…è¿‡æ»¤ï¼šæ ¹æ®å˜é‡åå’Œä¸Šä¸‹æ–‡åˆ¤æ–­è¯­ä¹‰æ˜¯å¦åŒ¹é…\n */\nfunction shouldSkipBySemanticMismatch(node: Node): boolean {\n  const value = node.getText();\n  const parent = node.getParent();\n  if (!parent) return false;\n\n  // è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯\n  const contextText = parent.getText().toLowerCase();\n\n  // HTTPçŠ¶æ€ç è¯­ä¹‰æ£€æŸ¥\n  if (['200', '400', '401', '404', '500'].includes(value)) {\n    // å¦‚æœä¸Šä¸‹æ–‡åŒ…å«åŠ¨ç”»ã€æŒç»­æ—¶é—´ã€å»¶è¿Ÿç­‰å…³é”®è¯ï¼Œè·³è¿‡HTTPçŠ¶æ€ç æ˜ å°„\n    const animationKeywords = [\n      'animation', 'duration', 'delay', 'timeout', 'interval',\n      'transition', 'easing', 'timing', 'debounce', 'throttle'\n    ];\n\n    if (animationKeywords.some(keyword => contextText.includes(keyword))) {\n      return true;\n    }\n  }\n\n  // åŠ¨ç”»æŒç»­æ—¶é—´è¯­ä¹‰æ£€æŸ¥\n  if (['300', '500', '1000'].includes(value)) {\n    // å¦‚æœä¸Šä¸‹æ–‡åŒ…å«HTTPã€çŠ¶æ€ã€å“åº”ç­‰å…³é”®è¯ï¼Œè·³è¿‡åŠ¨ç”»æŒç»­æ—¶é—´æ˜ å°„\n    const httpKeywords = [\n      'http', 'status', 'response', 'request', 'api', 'error',\n      'success', 'fail', 'code', 'result'\n    ];\n\n    if (httpKeywords.some(keyword => contextText.includes(keyword))) {\n      return true;\n    }\n  }\n\n  // å°ºå¯¸å’Œåƒç´ å€¼è¯­ä¹‰æ£€æŸ¥\n  if (['640', '768', '1024', '1280', '1920'].includes(value)) {\n    // å¦‚æœä¸Šä¸‹æ–‡ä¸åŒ…å«å±å¹•ã€å®½åº¦ã€æ–­ç‚¹ç­‰å…³é”®è¯ï¼Œå¯èƒ½æ˜¯å…¶ä»–ç”¨é€”\n    const sizeKeywords = [\n      'width', 'height', 'screen', 'breakpoint', 'viewport',\n      'resolution', 'size', 'dimension'\n    ];\n\n    if (!sizeKeywords.some(keyword => contextText.includes(keyword))) {\n      // è¿›ä¸€æ­¥æ£€æŸ¥æ˜¯å¦ä¸ºæ—¶é—´æˆ³æˆ–å…¶ä»–æ•°æ®\n      if (contextText.includes('timestamp') || contextText.includes('time') ||\n          contextText.includes('date') || contextText.includes('id')) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * è¯­ä¹‰é”®åè¿‡æ»¤ï¼šæ ¹æ®å±æ€§ååˆ¤æ–­æ˜¯å¦ä¸ºåæ ‡ç­‰æ•°æ®\n */\nfunction shouldSkipBySemanticContext(node: Node): boolean {\n  // æŸ¥æ‰¾çˆ¶çº§å±æ€§åæˆ–å˜é‡å\n  let current = node.getParent();\n  let depth = 0;\n  const maxDepth = 3; // æœ€å¤šå‘ä¸ŠæŸ¥æ‰¾3å±‚\n\n  while (current && depth < maxDepth) {\n    const currentNode = current.compilerNode;\n\n    // æ£€æŸ¥å±æ€§èµ‹å€¼ï¼š{ lat: 39.9042 }\n    if (ts.isPropertyAssignment(currentNode)) {\n      const propertyName = currentNode.name;\n      if (ts.isIdentifier(propertyName) || ts.isStringLiteral(propertyName)) {\n        const name = propertyName.getText().toLowerCase();\n        if (isCoordinatePropertyName(name)) {\n          return true;\n        }\n      }\n    }\n\n    // æ£€æŸ¥å˜é‡å£°æ˜ï¼šconst lat = 39.9042\n    if (ts.isVariableDeclaration(currentNode)) {\n      const {name} = currentNode;\n      if (ts.isIdentifier(name)) {\n        const varName = name.getText().toLowerCase();\n        if (isCoordinatePropertyName(varName)) {\n          return true;\n        }\n      }\n    }\n\n    current = current.getParent();\n    depth++;\n  }\n\n  return false;\n}\n\n// ============================================================================\n// è¾…åŠ©å‡½æ•°\n// ============================================================================\n\n/**\n * åˆ¤æ–­æ˜¯å¦ä¸ºæ—¶é—´æˆ³ï¼ˆ13ä½æ¯«ç§’ï¼‰\n */\nfunction isTimestampMs(num: number): boolean {\n  return num >= 1_000_000_000_000 && num < 2_000_000_000_000;\n}\n\n/**\n * åˆ¤æ–­æ˜¯å¦ä¸ºé•¿å°æ•°ï¼ˆç²¾åº¦æµ‹è¯•ç”¨ï¼‰\n */\nfunction isLongDecimal(text: string): boolean {\n  return /\\.\\d{4,}$/.test(text);\n}\n\n/**\n * åˆ¤æ–­æ˜¯å¦ä¸ºå¤§æ•´æ•°ï¼ˆIDã€è®¡æ•°ç­‰ï¼‰\n */\nfunction isHugeInteger(num: number): boolean {\n  return Number.isInteger(num) && Math.abs(num) >= 1_000_000;\n}\n\n/**\n * åˆ¤æ–­æ˜¯å¦åœ¨åœ°ç†åæ ‡èŒƒå›´å†…\n */\nfunction isCoordinateRange(num: number): boolean {\n  // çº¬åº¦èŒƒå›´ -90 åˆ° 90ï¼Œç»åº¦èŒƒå›´ -180 åˆ° 180\n  return (num >= -180 && num <= 180) && (num % 1 !== 0); // æœ‰å°æ•°éƒ¨åˆ†\n}\n\n/**\n * åˆ¤æ–­å±æ€§åæ˜¯å¦ä¸ºåæ ‡ç›¸å…³\n */\nfunction isCoordinatePropertyName(name: string): boolean {\n  const coordinatePatterns = [\n    /^(lat|latitude)$/i,\n    /^(lng|lon|longitude)$/i,\n    /^(x|y)$/i,\n    /coord/i,\n    /position/i,\n    /location/i,\n  ];\n\n  return coordinatePatterns.some(pattern => pattern.test(name));\n}\n\n/**\n * CODEXåˆ†å±‚æ²»ç†ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå¸¸è§æ•°å­—ï¼ˆåº”è¯¥è±å…ï¼‰\n */\nfunction isCommonNumber(num: number): boolean {\n  // åŸºç¡€æ•°å­—\n  if (num >= 0 && num <= 10) return true;\n\n  // å¸¸è§å°æ•°å­—\n  if ([12, 15, 16, 20, 24, 25, 30, 32, 40, 42, 45, 49, 50].includes(num)) return true;\n\n  // ç™¾åˆ†æ¯”ç›¸å…³\n  if ([60, 65, 70, 75, 80, 85, 90, 95, 99, 100].includes(num)) return true;\n\n  // å°ºå¯¸å’Œåƒç´ \n  if ([120, 128, 150, 160, 190, 250, 256, 300, 360, 365].includes(num)) return true;\n\n  // æ•°æ®å¤§å°\n  if ([512, 640, 700, 750, 768, 800, 900].includes(num)) return true;\n\n  // å¤§æ•°å­—å’Œæ—¶é—´\n  if ([1000, 1024, 1200, 1280, 1500, 1536, 1600, 1800, 1920].includes(num)) return true;\n  if ([2000, 2048, 2500, 3000, 4000, 4096, 5000, 6000, 7000, 8000, 8192, 9000].includes(num)) return true;\n  if ([10000, 12000, 15000, 30000, 45000, 50000, 60000, 65536].includes(num)) return true;\n  if ([100000, 120000, 125000, 170000, 200000, 300000, 500000].includes(num)) return true;\n\n  return false;\n}\n\n/**\n * åˆ¤æ–­æ˜¯å¦ä¸ºæµ‹è¯•æ•°æ®\n */\nfunction isTestData(num: number): boolean {\n  return [42, 999, 1234, 12345, 996, 997, 998].includes(num) ||\n         (num >= 131000 && num <= 131100); // WhatsAppé”™è¯¯ç èŒƒå›´\n}\n\n/**\n * åˆ¤æ–­æ˜¯å¦ä¸ºé…ç½®æ•°å­—ï¼ˆç«¯å£ã€è¶…æ—¶ç­‰ï¼‰\n */\nfunction isConfigNumber(num: number): boolean {\n  // ç«¯å£å·\n  if ([8888, 8900].includes(num)) return true;\n\n  // HTTPçŠ¶æ€ç ï¼ˆä½é¢‘ï¼‰\n  if ([403, 429, 503].includes(num)) return true;\n\n  return false;\n}\n\n/**\n * æ¨¡å—åŒ–å¯¼å…¥å¤„ç† - æ”¯æŒå¤šæ¨¡å—å¯¼å…¥\n * æ ¹æ®æ˜ å°„ä¿¡æ¯å°†å¸¸é‡å¯¼å…¥åˆ°å¯¹åº”çš„æ¨¡å—\n */\nexport function mergeAndAliasImports(\n  sourceFile: SourceFile,\n  constantsWithModules: Array<{ constant: string; module: string }>,\n  log: { imports: { added: string[]; aliased: Record<string, string> } }\n): void {\n  if (constantsWithModules.length === 0) return;\n\n  // æŒ‰æ¨¡å—åˆ†ç»„å¸¸é‡\n  const moduleGroups = new Map<string, string[]>();\n  constantsWithModules.forEach(({ constant, module }) => {\n    if (!moduleGroups.has(module)) {\n      moduleGroups.set(module, []);\n    }\n    moduleGroups.get(module)!.push(constant);\n  });\n\n  // å¤„ç†æ¯ä¸ªæ¨¡å—çš„å¯¼å…¥\n  moduleGroups.forEach((constants, module) => {\n    processModuleImports(sourceFile, module, constants, log);\n  });\n}\n\n/**\n * å¤„ç†å•ä¸ªæ¨¡å—çš„å¯¼å…¥\n */\nfunction processModuleImports(\n  sourceFile: SourceFile,\n  module: string,\n  newConstants: string[],\n  log: { imports: { added: string[]; aliased: Record<string, string> } }\n): void {\n\n  // è·å–ç°æœ‰çš„å¯¼å…¥å£°æ˜\n  const existingImports = sourceFile.getImportDeclarations()\n    .filter(imp => imp.getModuleSpecifierValue() === module);\n\n  // æ”¶é›†ç°æœ‰çš„å¯¼å…¥åç§°\n  const existingNames = new Set<string>();\n  existingImports.forEach(imp => {\n    const namedImports = imp.getNamedImports();\n    namedImports.forEach(namedImport => {\n      existingNames.add(namedImport.getName());\n    });\n  });\n\n  // æ£€æŸ¥æœ¬åœ°ä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦å†²çªï¼ˆæ’é™¤æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„å¸¸é‡ï¼‰\n  const localIdentifiers = new Set<string>();\n  const newConstantNames = new Set(newConstants);\n\n  sourceFile.getDescendantsOfKind(SyntaxKind.Identifier).forEach(identifier => {\n    const identifierText = identifier.getText();\n    // æ’é™¤æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„å¸¸é‡åï¼Œé¿å…è¯¯åˆ¤ä¸ºå†²çª\n    if (!newConstantNames.has(identifierText)) {\n      localIdentifiers.add(identifierText);\n    }\n  });\n\n\n\n  // å¤„ç†æ–°å¸¸é‡ï¼Œç”Ÿæˆåˆ«åå¦‚æœéœ€è¦\n  const finalImports: string[] = [];\n  const aliasMap: Record<string, string> = {};\n\n  [...existingNames, ...newConstants].forEach(constName => {\n    if (localIdentifiers.has(constName) && !existingNames.has(constName)) {\n      // éœ€è¦åˆ«å\n      const aliasName = `${constName}_CONST`;\n      finalImports.push(`${constName} as ${aliasName}`);\n      aliasMap[constName] = aliasName;\n      log.imports.aliased[constName] = aliasName;\n    } else {\n      finalImports.push(constName);\n      if (!existingNames.has(constName)) {\n        log.imports.added.push(constName);\n      }\n    }\n  });\n\n  // ç§»é™¤æ‰€æœ‰ç°æœ‰çš„å¯¼å…¥\n  existingImports.forEach(imp => imp.remove());\n\n  // æ·»åŠ æ–°çš„åˆå¹¶å¯¼å…¥\n  if (finalImports.length > 0) {\n    const sortedImports = [...new Set(finalImports)].sort();\n    sourceFile.addImportDeclaration({\n      moduleSpecifier: module,\n      namedImports: sortedImports,\n    });\n  }\n\n  // å¦‚æœæœ‰åˆ«åï¼Œéœ€è¦æ›¿æ¢å¯¹åº”çš„å¼•ç”¨\n  Object.entries(aliasMap).forEach(([original, alias]) => {\n    sourceFile.getDescendantsOfKind(SyntaxKind.Identifier)\n      .filter(identifier => identifier.getText() === original)\n      .forEach(identifier => {\n        identifier.replaceWithText(alias);\n      });\n  });\n\n  // ç»„ç»‡å¯¼å…¥\n  sourceFile.organizeImports();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/validate-mapping-consistency.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":69,"column":23,"nodeType":"CallExpression","endLine":69,"endColumn":60},{"ruleId":"require-await","severity":1,"message":"Async method 'validateEntry' has no 'await' expression.","line":100,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":100,"endColumn":30,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2342,2348],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\n/**\n * æ˜ å°„ä¸€è‡´æ€§æ ¡éªŒè„šæœ¬\n *\n * æŒ‰ç…§CODEXå»ºè®®ï¼ŒéªŒè¯enhanced-codex-mapping.jsonä¸­æ¯ä¸ªæ˜ å°„æ¡ç›®\n * ä¸å®é™…æ¨¡å—å¯¼å‡ºçš„ä¸€è‡´æ€§ï¼Œç”Ÿæˆç¼ºå¤±/å†²çªæŠ¥å‘Š\n */\n\nimport { Project, SourceFile } from 'ts-morph';\nimport fs from 'fs';\nimport path from 'path';\n\ninterface MappingEntry {\n  export: string;\n  module: string;\n  source?: string;\n  type?: string;\n}\n\ninterface ValidationResult {\n  valid: MappingEntry[];\n  missing: Array<{ entry: MappingEntry; reason: string }>;\n  conflicts: Array<{ entry: MappingEntry; reason: string }>;\n  duplicates: Array<{ export: string; modules: string[] }>;\n}\n\nclass MappingValidator {\n  private project: Project;\n  private srcPath: string;\n\n  constructor() {\n    // ç¡®ä¿ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ\n    const projectRoot = path.resolve(__dirname, '../..');\n    this.project = new Project({\n      tsConfigFilePath: path.resolve(projectRoot, 'tsconfig.json'),\n    });\n    this.srcPath = path.resolve(projectRoot, 'src');\n  }\n\n  /**\n   * éªŒè¯æ˜ å°„æ–‡ä»¶çš„ä¸€è‡´æ€§\n   */\n  async validateMapping(mappingPath: string): Promise<ValidationResult> {\n    const mappingData = this.loadMappingFile(mappingPath);\n    const result: ValidationResult = {\n      valid: [],\n      missing: [],\n      conflicts: [],\n      duplicates: []\n    };\n\n    // æ£€æŸ¥é‡å¤å¯¼å‡º\n    this.checkDuplicateExports(mappingData, result);\n\n    // éªŒè¯æ¯ä¸ªæ˜ å°„æ¡ç›®\n    for (const [value, entry] of Object.entries(mappingData)) {\n      await this.validateEntry(value, entry, result);\n    }\n\n    return result;\n  }\n\n  /**\n   * åŠ è½½æ˜ å°„æ–‡ä»¶\n   */\n  private loadMappingFile(mappingPath: string): Record<string, MappingEntry> {\n    try {\n      const content = fs.readFileSync(mappingPath, 'utf-8');\n      return JSON.parse(content);\n    } catch (error) {\n      throw new Error(`Failed to load mapping file: ${error}`);\n    }\n  }\n\n  /**\n   * æ£€æŸ¥é‡å¤å¯¼å‡º\n   */\n  private checkDuplicateExports(mappingData: Record<string, MappingEntry>, result: ValidationResult) {\n    const exportMap = new Map<string, string[]>();\n\n    for (const entry of Object.values(mappingData)) {\n      const exportName = entry.export;\n      if (!exportMap.has(exportName)) {\n        exportMap.set(exportName, []);\n      }\n      exportMap.get(exportName)!.push(entry.module);\n    }\n\n    for (const [exportName, modules] of exportMap) {\n      if (modules.length > 1) {\n        result.duplicates.push({ export: exportName, modules });\n      }\n    }\n  }\n\n  /**\n   * éªŒè¯å•ä¸ªæ˜ å°„æ¡ç›®\n   */\n  private async validateEntry(value: string, entry: MappingEntry, result: ValidationResult) {\n    try {\n      // æ£€æŸ¥æ¡ç›®æ˜¯å¦æœ‰æ•ˆ\n      if (!entry || !entry.export || !entry.module) {\n        result.conflicts.push({\n          entry,\n          reason: `Invalid mapping entry: missing export or module field`\n        });\n        return;\n      }\n\n      const modulePath = this.resolveModulePath(entry.module);\n      const sourceFile = this.project.getSourceFile(modulePath);\n\n      if (!sourceFile) {\n        result.missing.push({\n          entry,\n          reason: `Module file not found: ${modulePath}`\n        });\n        return;\n      }\n\n      const hasExport = this.checkExportExists(sourceFile, entry.export);\n      if (!hasExport) {\n        result.missing.push({\n          entry,\n          reason: `Export '${entry.export}' not found in module ${entry.module}`\n        });\n        return;\n      }\n\n      result.valid.push(entry);\n    } catch (error) {\n      result.conflicts.push({\n        entry,\n        reason: `Validation error: ${error}`\n      });\n    }\n  }\n\n  /**\n   * è§£ææ¨¡å—è·¯å¾„\n   */\n  private resolveModulePath(moduleSpecifier: string): string {\n    // å¤„ç† @/ åˆ«å\n    if (moduleSpecifier.startsWith('@/')) {\n      return path.resolve(this.srcPath, `${moduleSpecifier.slice(2)  }.ts`);\n    }\n\n    // å¤„ç†ç›¸å¯¹è·¯å¾„\n    if (moduleSpecifier.startsWith('./')) {\n      return path.resolve(this.srcPath, 'constants', `${moduleSpecifier.slice(2)  }.ts`);\n    }\n\n    // å¤„ç†ç»å¯¹è·¯å¾„\n    return path.resolve(this.srcPath, `${moduleSpecifier  }.ts`);\n  }\n\n  /**\n   * æ£€æŸ¥å¯¼å‡ºæ˜¯å¦å­˜åœ¨\n   */\n  private checkExportExists(sourceFile: SourceFile, exportName: string): boolean {\n    // æ£€æŸ¥å‘½åå¯¼å‡º\n    const namedExports = sourceFile.getExportedDeclarations();\n    if (namedExports.has(exportName)) {\n      return true;\n    }\n\n    // æ£€æŸ¥ export * é‡æ–°å¯¼å‡º\n    const exportDeclarations = sourceFile.getExportDeclarations();\n    for (const exportDecl of exportDeclarations) {\n      if (exportDecl.isNamespaceExport()) {\n        // è¿™æ˜¯ export * from '...' çš„æƒ…å†µ\n        const moduleSpecifier = exportDecl.getModuleSpecifierValue();\n        if (moduleSpecifier) {\n          const reexportedFile = this.resolveReexportedFile(sourceFile, moduleSpecifier);\n          if (reexportedFile && this.checkExportExists(reexportedFile, exportName)) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * è§£æé‡æ–°å¯¼å‡ºçš„æ–‡ä»¶\n   */\n  private resolveReexportedFile(sourceFile: SourceFile, moduleSpecifier: string): SourceFile | undefined {\n    const sourceDir = path.dirname(sourceFile.getFilePath());\n    let resolvedPath: string;\n\n    if (moduleSpecifier.startsWith('./') || moduleSpecifier.startsWith('../')) {\n      resolvedPath = path.resolve(sourceDir, `${moduleSpecifier  }.ts`);\n    } else if (moduleSpecifier.startsWith('@/')) {\n      resolvedPath = path.resolve(this.srcPath, `${moduleSpecifier.slice(2)  }.ts`);\n    } else {\n      resolvedPath = path.resolve(sourceDir, `${moduleSpecifier  }.ts`);\n    }\n\n    return this.project.getSourceFile(resolvedPath);\n  }\n\n  /**\n   * ç”ŸæˆéªŒè¯æŠ¥å‘Š\n   */\n  generateReport(result: ValidationResult): string {\n    const lines: string[] = [];\n\n    lines.push('# æ˜ å°„ä¸€è‡´æ€§æ ¡éªŒæŠ¥å‘Š');\n    lines.push('');\n    lines.push(`ç”Ÿæˆæ—¶é—´: ${new Date().toISOString()}`);\n    lines.push('');\n\n    // ç»Ÿè®¡ä¿¡æ¯\n    lines.push('## ç»Ÿè®¡ä¿¡æ¯');\n    lines.push(`- æœ‰æ•ˆæ˜ å°„: ${result.valid.length}`);\n    lines.push(`- ç¼ºå¤±å¯¼å‡º: ${result.missing.length}`);\n    lines.push(`- å†²çªé”™è¯¯: ${result.conflicts.length}`);\n    lines.push(`- é‡å¤å¯¼å‡º: ${result.duplicates.length}`);\n    lines.push('');\n\n    // ç¼ºå¤±å¯¼å‡º\n    if (result.missing.length > 0) {\n      lines.push('## ç¼ºå¤±å¯¼å‡º');\n      for (const item of result.missing) {\n        lines.push(`- **${item.entry.export}** (${item.entry.module}): ${item.reason}`);\n      }\n      lines.push('');\n    }\n\n    // å†²çªé”™è¯¯\n    if (result.conflicts.length > 0) {\n      lines.push('## å†²çªé”™è¯¯');\n      for (const item of result.conflicts) {\n        lines.push(`- **${item.entry.export}** (${item.entry.module}): ${item.reason}`);\n      }\n      lines.push('');\n    }\n\n    // é‡å¤å¯¼å‡º\n    if (result.duplicates.length > 0) {\n      lines.push('## é‡å¤å¯¼å‡º');\n      for (const item of result.duplicates) {\n        lines.push(`- **${item.export}**: ${item.modules.join(', ')}`);\n      }\n      lines.push('');\n    }\n\n    return lines.join('\\n');\n  }\n}\n\nasync function main() {\n  const mappingPath = path.resolve(__dirname, 'enhanced-codex-mapping.json');\n  const validator = new MappingValidator();\n\n  console.log('ğŸ” å¼€å§‹éªŒè¯æ˜ å°„ä¸€è‡´æ€§...');\n\n  try {\n    const result = await validator.validateMapping(mappingPath);\n    const report = validator.generateReport(result);\n\n    // è¾“å‡ºæŠ¥å‘Šåˆ°æ§åˆ¶å°\n    console.log(report);\n\n    // ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶\n    const reportPath = path.resolve(__dirname, 'mapping-validation-report.md');\n    fs.writeFileSync(reportPath, report);\n    console.log(`\\nğŸ“„ æŠ¥å‘Šå·²ä¿å­˜åˆ°: ${reportPath}`);\n\n    // è¿”å›é€‚å½“çš„é€€å‡ºç \n    const hasErrors = result.missing.length > 0 || result.conflicts.length > 0;\n    process.exit(hasErrors ? 1 : 0);\n\n  } catch (error) {\n    console.error('âŒ éªŒè¯å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/verify-and-continue.ts","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"node:fs\" with non literal argument at index 0","line":12,"column":19,"nodeType":"CallExpression","endLine":12,"endColumn":35},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"node:fs\" with non literal argument at index 0","line":16,"column":20,"nodeType":"CallExpression","endLine":16,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":26,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport { resolve, join } from 'node:path';\nimport { readdirSync, statSync, writeFileSync } from 'node:fs';\nimport { run } from './ast-replace-magic-numbers';\n\n// éªŒè¯æ–‡ä»¶æŸ¥æ‰¾åŠŸèƒ½\nfunction findTsFiles(dir: string, pattern: RegExp = /\\.(ts|tsx)$/): string[] {\n  const results: string[] = [];\n  \n  try {\n    const items = readdirSync(dir);\n    \n    for (const item of items) {\n      const fullPath = join(dir, item);\n      const stat = statSync(fullPath);\n      \n      if (stat.isDirectory()) {\n        if (!item.startsWith('.') && item !== 'node_modules') {\n          results.push(...findTsFiles(fullPath, pattern));\n        }\n      } else if (stat.isFile() && pattern.test(item)) {\n        results.push(fullPath);\n      }\n    }\n  } catch (error) {\n    // å¿½ç•¥é”™è¯¯\n  }\n  \n  return results;\n}\n\nasync function verifyAndContinue() {\n  const log: string[] = [];\n  const rootDir = resolve(__dirname, '../..');\n  \n  log.push('ğŸ” éªŒè¯ASTå·¥å…·ä¿®å¤çŠ¶æ€...');\n  \n  // 1. éªŒè¯æ–‡ä»¶æŸ¥æ‰¾åŠŸèƒ½\n  const srcDir = resolve(rootDir, 'src');\n  const allFiles = findTsFiles(srcDir);\n  log.push(`ğŸ“„ æ‰¾åˆ° ${allFiles.length} ä¸ªTypeScriptæ–‡ä»¶`);\n  \n  // 2. æµ‹è¯•ASTå·¥å…·ï¼ˆå°èŒƒå›´ï¼‰\n  try {\n    log.push('\\nğŸ§ª æµ‹è¯•ASTå·¥å…·åŠŸèƒ½...');\n    \n    // æµ‹è¯•constantsç›®å½•\n    const constantsDir = resolve(rootDir, 'src/constants');\n    const constantsFiles = findTsFiles(constantsDir);\n    log.push(`ğŸ“ constantsç›®å½•: ${constantsFiles.length} ä¸ªæ–‡ä»¶`);\n    \n    if (constantsFiles.length > 0) {\n      // å°è¯•è¿è¡ŒASTå·¥å…·\n      const result = await run({\n        files: 'src/constants',\n        limit: 5,\n        dryRun: true,\n        write: false\n      });\n      \n      log.push(`âœ… ASTå·¥å…·è¿è¡ŒæˆåŠŸ`);\n      log.push(`ğŸ“Š å¤„ç†ç»“æœ: ${result.length} ä¸ªæ–‡ä»¶æœ‰å˜æ›´`);\n      \n      if (result.length > 0) {\n        log.push('ğŸ‰ ASTå·¥å…·ä¿®å¤æˆåŠŸï¼å¯ä»¥å¤„ç†é­”æ³•æ•°å­—');\n      } else {\n        log.push('â„¹ï¸ ASTå·¥å…·è¿è¡Œæ­£å¸¸ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°éœ€è¦æ›¿æ¢çš„é­”æ³•æ•°å­—');\n      }\n    }\n    \n  } catch (error) {\n    log.push(`âŒ ASTå·¥å…·æµ‹è¯•å¤±è´¥: ${error}`);\n  }\n  \n  // 3. ç»§ç»­å¤„ç†å…¶ä»–ESLinté”™è¯¯\n  log.push('\\nğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’:');\n  log.push('1. âœ… ASTå·¥å…·æ–‡ä»¶è·¯å¾„é—®é¢˜å·²ä¿®å¤');\n  log.push('2. ğŸ”„ ç»§ç»­å¤„ç†å‰©ä½™ESLinté”™è¯¯:');\n  log.push('   - ç›¸å¯¹è·¯å¾„å¯¼å…¥ (237ä¸ª)');\n  log.push('   - æœªä½¿ç”¨å˜é‡ (183ä¸ª)');\n  log.push('   - å®‰å…¨å¯¹è±¡æ³¨å…¥ (175ä¸ª)');\n  log.push('   - é­”æ³•æ•°å­— (83ä¸ª) - ä½¿ç”¨ä¿®å¤åçš„ASTå·¥å…·');\n  \n  // å†™å…¥ç»“æœ\n  const resultPath = resolve(__dirname, 'verification-result.txt');\n  writeFileSync(resultPath, log.join('\\n'));\n  \n  console.log('éªŒè¯å®Œæˆï¼Œç»“æœå·²ä¿å­˜åˆ° verification-result.txt');\n  return allFiles.length > 0;\n}\n\nverifyAndContinue();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/magic-numbers/verify-fix.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":8,"column":19,"nodeType":"CallExpression","endLine":8,"endColumn":35},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":12,"column":20,"nodeType":"CallExpression","endLine":12,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { readdirSync, statSync } = require('fs');\nconst { join, resolve } = require('path');\n\nfunction findTsFiles(dir, pattern = /\\.(ts|tsx)$/) {\n  const results = [];\n  \n  try {\n    const items = readdirSync(dir);\n    \n    for (const item of items) {\n      const fullPath = join(dir, item);\n      const stat = statSync(fullPath);\n      \n      if (stat.isDirectory()) {\n        if (!item.startsWith('.') && item !== 'node_modules') {\n          results.push(...findTsFiles(fullPath, pattern));\n        }\n      } else if (stat.isFile() && pattern.test(item)) {\n        results.push(fullPath);\n      }\n    }\n  } catch (error) {\n    console.warn(`æ— æ³•è¯»å–ç›®å½• ${dir}:`, error.message);\n  }\n  \n  return results;\n}\n\n// æµ‹è¯•\nconst rootDir = resolve(__dirname, '../..');\nconst srcDir = resolve(rootDir, 'src');\n\nconsole.log('æ ¹ç›®å½•:', rootDir);\nconsole.log('æºç ç›®å½•:', srcDir);\n\nconst files = findTsFiles(srcDir);\nconsole.log(`æ‰¾åˆ° ${files.length} ä¸ªTypeScriptæ–‡ä»¶`);\n\nif (files.length > 0) {\n  console.log('å‰10ä¸ªæ–‡ä»¶:');\n  files.slice(0, 10).forEach((file, index) => {\n    console.log(`${index + 1}. ${file.replace(rootDir, '.')}`);\n  });\n  \n  console.log('\\nâœ… æ–‡ä»¶æŸ¥æ‰¾åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼');\n} else {\n  console.log('âŒ æœªæ‰¾åˆ°ä»»ä½•TypeScriptæ–‡ä»¶');\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/performance-analyzer.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":127,"column":11,"nodeType":"CallExpression","endLine":127,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":128,"column":23,"nodeType":"CallExpression","endLine":128,"endColumn":44},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":133,"column":27,"nodeType":"CallExpression","endLine":133,"endColumn":48},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":224,"column":7,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":234,"endColumn":8},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":248,"column":60,"nodeType":"MemberExpression","endLine":248,"endColumn":68},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":464,"column":12,"nodeType":"MemberExpression","endLine":464,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":477,"column":12,"nodeType":"MemberExpression","endLine":477,"endColumn":27},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":535,"column":11,"nodeType":"CallExpression","endLine":535,"endColumn":38},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":536,"column":37,"nodeType":"CallExpression","endLine":536,"endColumn":74},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":564,"column":7,"nodeType":"CallExpression","endLine":564,"endColumn":72},{"ruleId":"require-await","severity":1,"message":"Async method 'analyze' has no 'await' expression.","line":685,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":685,"endColumn":16,"suggestions":[{"messageId":"removeAsync","fix":{"range":[18421,18427],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æ€§èƒ½åˆ†æå™¨ - ç›‘æ§æ‰“åŒ…å¤§å°ã€åŠ è½½æ—¶é—´å’Œå†…å­˜ä½¿ç”¨\n * Performance Analyzer - Monitor bundle size, load time and memory usage\n *\n * æ–°å¢åŠŸèƒ½ï¼š\n * - æ€§èƒ½åŸºå‡†å¯¹æ¯”\n * - å›å½’æ£€æµ‹\n * - CI/CDé›†æˆ\n * - è¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Š\n * - æ€§èƒ½è¶‹åŠ¿åˆ†æ\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nclass PerformanceAnalyzer {\n  constructor(options = {}) {\n    this.options = {\n      saveBaseline: options.saveBaseline || false,\n      compareWithBaseline: options.compareWithBaseline || false,\n      baselineFile: options.baselineFile || 'performance-baseline.json',\n      ciMode: options.ciMode || false,\n      ...options,\n    };\n\n    this.report = {\n      timestamp: new Date().toISOString(),\n      performance: {\n        bundleSize: {},\n        loadTime: {},\n        memoryUsage: {},\n        score: 0,\n        webVitals: {},\n      },\n      limits: {\n        mainBundle: 50 * 1024, // 50KB\n        totalBundle: 260 * 1024, // 260KB\n        loadTime: 3000, // 3ç§’\n        memoryUsage: 50 * 1024 * 1024, // 50MB\n        regressionThreshold: 10, // 10% å›å½’é˜ˆå€¼\n      },\n      baseline: null,\n      regression: {\n        detected: false,\n        details: [],\n      },\n      passed: true,\n      issues: [],\n      environment: {\n        nodeVersion: process.version,\n        platform: process.platform,\n        arch: process.arch,\n        ci: process.env.CI || false,\n        branch: this.getCurrentBranch(),\n        commit: this.getCurrentCommit(),\n      },\n    };\n  }\n\n  /**\n   * åˆ†ææ‰“åŒ…æ–‡ä»¶å¤§å°\n   */\n  analyzeBundleSize() {\n    try {\n      console.log('ğŸ“¦ åˆ†ææ‰“åŒ…æ–‡ä»¶å¤§å°...');\n\n      const nextDir = path.join(process.cwd(), '.next');\n      if (!fs.existsSync(nextDir)) {\n        throw new Error('æœªæ‰¾åˆ°æ„å»ºæ–‡ä»¶ï¼Œè¯·å…ˆè¿è¡Œ pnpm build');\n      }\n\n      // åˆ†æé™æ€æ–‡ä»¶å¤§å°\n      const staticDir = path.join(nextDir, 'static');\n      if (fs.existsSync(staticDir)) {\n        const chunks = this.getChunkSizes(staticDir);\n        this.report.performance.bundleSize = chunks;\n\n        // æ£€æŸ¥ä¸»åŒ…å¤§å°\n        const mainBundleSize = chunks.main || 0;\n        if (mainBundleSize > this.report.limits.mainBundle) {\n          this.report.passed = false;\n          this.report.issues.push({\n            type: 'bundle-size',\n            severity: 'high',\n            message: `ä¸»åŒ…å¤§å° ${this.formatBytes(mainBundleSize)} è¶…å‡ºé™åˆ¶ ${this.formatBytes(this.report.limits.mainBundle)}`,\n          });\n        }\n\n        // æ£€æŸ¥æ€»åŒ…å¤§å°\n        const totalSize = Object.values(chunks).reduce(\n          (sum, size) => sum + size,\n          0,\n        );\n        if (totalSize > this.report.limits.totalBundle) {\n          this.report.passed = false;\n          this.report.issues.push({\n            type: 'bundle-size',\n            severity: 'medium',\n            message: `æ€»åŒ…å¤§å° ${this.formatBytes(totalSize)} è¶…å‡ºé™åˆ¶ ${this.formatBytes(this.report.limits.totalBundle)}`,\n          });\n        }\n\n        console.log(`âœ… ä¸»åŒ…å¤§å°: ${this.formatBytes(mainBundleSize)}`);\n        console.log(`âœ… æ€»åŒ…å¤§å°: ${this.formatBytes(totalSize)}`);\n      }\n    } catch (error) {\n      console.warn(`âš ï¸  æ‰“åŒ…å¤§å°åˆ†æå¤±è´¥: ${error.message}`);\n      this.report.issues.push({\n        type: 'analysis-error',\n        severity: 'low',\n        message: `æ‰“åŒ…å¤§å°åˆ†æå¤±è´¥: ${error.message}`,\n      });\n    }\n  }\n\n  /**\n   * è·å–chunkæ–‡ä»¶å¤§å°\n   */\n  getChunkSizes(staticDir) {\n    const chunks = {};\n\n    try {\n      const jsDir = path.join(staticDir, 'chunks');\n      if (fs.existsSync(jsDir)) {\n        const files = fs.readdirSync(jsDir);\n\n        files.forEach((file) => {\n          if (file.endsWith('.js')) {\n            const filePath = path.join(jsDir, file);\n            const stats = fs.statSync(filePath);\n\n            if (file.includes('main')) {\n              chunks.main = (chunks.main || 0) + stats.size;\n            } else if (file.includes('framework')) {\n              chunks.framework = (chunks.framework || 0) + stats.size;\n            } else {\n              chunks.shared = (chunks.shared || 0) + stats.size;\n            }\n          }\n        });\n      }\n    } catch (error) {\n      console.warn(`âš ï¸  è¯»å–chunkæ–‡ä»¶å¤±è´¥: ${error.message}`);\n    }\n\n    return chunks;\n  }\n\n  /**\n   * æ¨¡æ‹Ÿé¡µé¢åŠ è½½æ—¶é—´åˆ†æ\n   */\n  analyzeLoadTime() {\n    try {\n      console.log('â±ï¸  åˆ†æé¡µé¢åŠ è½½æ—¶é—´...');\n\n      // ç®€å•çš„åŠ è½½æ—¶é—´ä¼°ç®—ï¼ˆåŸºäºåŒ…å¤§å°ï¼‰\n      const bundleSize = Object.values(\n        this.report.performance.bundleSize,\n      ).reduce((sum, size) => sum + size, 0);\n      const estimatedLoadTime = Math.max(1000, bundleSize / 100); // ç®€å•ä¼°ç®—å…¬å¼\n\n      this.report.performance.loadTime = {\n        estimated: estimatedLoadTime,\n        threshold: this.report.limits.loadTime,\n      };\n\n      if (estimatedLoadTime > this.report.limits.loadTime) {\n        this.report.passed = false;\n        this.report.issues.push({\n          type: 'load-time',\n          severity: 'medium',\n          message: `é¢„ä¼°åŠ è½½æ—¶é—´ ${estimatedLoadTime}ms è¶…å‡ºé™åˆ¶ ${this.report.limits.loadTime}ms`,\n        });\n      }\n\n      console.log(`âœ… é¢„ä¼°åŠ è½½æ—¶é—´: ${estimatedLoadTime}ms`);\n    } catch (error) {\n      console.warn(`âš ï¸  åŠ è½½æ—¶é—´åˆ†æå¤±è´¥: ${error.message}`);\n    }\n  }\n\n  /**\n   * åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µ\n   */\n  analyzeMemoryUsage() {\n    try {\n      console.log('ğŸ§  åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µ...');\n\n      // è·å–å½“å‰Node.jsè¿›ç¨‹å†…å­˜ä½¿ç”¨\n      const memUsage = process.memoryUsage();\n      this.report.performance.memoryUsage = {\n        heapUsed: memUsage.heapUsed,\n        heapTotal: memUsage.heapTotal,\n        external: memUsage.external,\n        rss: memUsage.rss,\n      };\n\n      if (memUsage.heapUsed > this.report.limits.memoryUsage) {\n        this.report.passed = false;\n        this.report.issues.push({\n          type: 'memory-usage',\n          severity: 'medium',\n          message: `å†…å­˜ä½¿ç”¨ ${this.formatBytes(memUsage.heapUsed)} è¶…å‡ºé™åˆ¶ ${this.formatBytes(this.report.limits.memoryUsage)}`,\n        });\n      }\n\n      console.log(`âœ… å†…å­˜ä½¿ç”¨: ${this.formatBytes(memUsage.heapUsed)}`);\n    } catch (error) {\n      console.warn(`âš ï¸  å†…å­˜åˆ†æå¤±è´¥: ${error.message}`);\n    }\n  }\n\n  /**\n   * è®¡ç®—æ€§èƒ½å¾—åˆ†\n   */\n  calculatePerformanceScore() {\n    let score = 100;\n\n    // æ ¹æ®é—®é¢˜ä¸¥é‡ç¨‹åº¦æ‰£åˆ†\n    this.report.issues.forEach((issue) => {\n      switch (issue.severity) {\n        case 'high':\n          score -= 30;\n          break;\n        case 'medium':\n          score -= 15;\n          break;\n        case 'low':\n          score -= 5;\n          break;\n      }\n    });\n\n    this.report.performance.score = Math.max(0, score);\n  }\n\n  /**\n   * æ ¼å¼åŒ–å­—èŠ‚æ•°\n   */\n  formatBytes(bytes) {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / k**i).toFixed(2))  } ${  sizes[i]}`;\n  }\n\n  /**\n   * ç”ŸæˆæŠ¥å‘Š\n   */\n  generateReport() {\n    console.log('\\nğŸ“Š æ€§èƒ½åˆ†ææŠ¥å‘Š');\n    console.log('='.repeat(50));\n    console.log(`ğŸ• æ—¶é—´: ${new Date(this.report.timestamp).toLocaleString()}`);\n    console.log(`ğŸŒ¿ åˆ†æ”¯: ${this.report.environment.branch}`);\n    console.log(`ğŸ“ æäº¤: ${this.report.environment.commit}`);\n    console.log(`âš¡ æ€§èƒ½å¾—åˆ†: ${this.report.performance.score}/100`);\n    console.log(`ğŸ“¦ æ•´ä½“çŠ¶æ€: ${this.report.passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`);\n\n    // åŒ…å¤§å°è¯¦æƒ…\n    this.printBundleSizeDetails();\n\n    // åŸºå‡†å¯¹æ¯”\n    if (this.report.baseline) {\n      this.printBaselineComparison();\n    }\n\n    // å›å½’æ£€æµ‹ç»“æœ\n    if (this.report.regression.detected) {\n      this.printRegressionDetails();\n    }\n\n    // é—®é¢˜åˆ—è¡¨\n    if (this.report.issues.length > 0) {\n      console.log('\\nğŸš¨ å‘ç°çš„é—®é¢˜:');\n      this.report.issues.forEach((issue, index) => {\n        const icon = this.getSeverityIcon(issue.severity);\n        console.log(`${index + 1}. ${icon} ${issue.message}`);\n      });\n    }\n\n    // CIæ¨¡å¼ä¸‹çš„ç‰¹æ®Šå¤„ç†\n    if (this.options.ciMode) {\n      this.generateCIReport();\n    }\n\n    // ä¿å­˜æŠ¥å‘Š\n    this.saveReport();\n\n    return this.report.passed;\n  }\n\n  /**\n   * æ‰“å°åŒ…å¤§å°è¯¦æƒ…\n   */\n  printBundleSizeDetails() {\n    console.log('\\nğŸ“¦ åŒ…å¤§å°åˆ†æ:');\n    const {bundleSize} = this.report.performance;\n\n    Object.entries(bundleSize).forEach(([type, size]) => {\n      const limit = this.getBundleLimit(type);\n      const percentage = limit ? ((size / limit) * 100).toFixed(1) : 'N/A';\n      const status = limit && size > limit ? 'ğŸ”´' : 'ğŸŸ¢';\n\n      console.log(\n        `  ${type}: ${this.formatBytes(size)} ${status} ${percentage !== 'N/A' ? `(${percentage}%)` : ''}`,\n      );\n    });\n\n    const totalSize = Object.values(bundleSize).reduce(\n      (sum, size) => sum + size,\n      0,\n    );\n    const totalLimit = this.report.limits.totalBundle;\n    const totalPercentage = ((totalSize / totalLimit) * 100).toFixed(1);\n    const totalStatus = totalSize > totalLimit ? 'ğŸ”´' : 'ğŸŸ¢';\n\n    console.log(\n      `  æ€»è®¡: ${this.formatBytes(totalSize)} ${totalStatus} (${totalPercentage}%)`,\n    );\n  }\n\n  /**\n   * æ‰“å°åŸºå‡†å¯¹æ¯”\n   */\n  printBaselineComparison() {\n    console.log('\\nğŸ“ˆ ä¸åŸºå‡†å¯¹æ¯”:');\n    console.log(\n      `  åŸºå‡†æ—¶é—´: ${new Date(this.report.baseline.timestamp).toLocaleString()}`,\n    );\n\n    const current = this.report.performance;\n    const baseline = this.report.baseline.performance;\n\n    // åŒ…å¤§å°å¯¹æ¯”\n    const currentTotal = Object.values(current.bundleSize).reduce(\n      (sum, size) => sum + size,\n      0,\n    );\n    const baselineTotal = Object.values(baseline.bundleSize || {}).reduce(\n      (sum, size) => sum + size,\n      0,\n    );\n\n    if (baselineTotal > 0) {\n      const change = currentTotal - baselineTotal;\n      const changePercent = ((change / baselineTotal) * 100).toFixed(1);\n      const trend = change > 0 ? 'ğŸ“ˆ' : change < 0 ? 'ğŸ“‰' : 'â¡ï¸';\n      console.log(\n        `  åŒ…å¤§å°: ${trend} ${change > 0 ? '+' : ''}${this.formatBytes(change)} (${change > 0 ? '+' : ''}${changePercent}%)`,\n      );\n    }\n\n    // åŠ è½½æ—¶é—´å¯¹æ¯”\n    if (current.loadTime?.estimated && baseline.loadTime?.estimated) {\n      const change = current.loadTime.estimated - baseline.loadTime.estimated;\n      const changePercent = (\n        (change / baseline.loadTime.estimated) *\n        100\n      ).toFixed(1);\n      const trend = change > 0 ? 'ğŸ“ˆ' : change < 0 ? 'ğŸ“‰' : 'â¡ï¸';\n      console.log(\n        `  åŠ è½½æ—¶é—´: ${trend} ${change > 0 ? '+' : ''}${change}ms (${change > 0 ? '+' : ''}${changePercent}%)`,\n      );\n    }\n  }\n\n  /**\n   * æ‰“å°å›å½’è¯¦æƒ…\n   */\n  printRegressionDetails() {\n    console.log('\\nğŸš¨ æ€§èƒ½å›å½’æ£€æµ‹:');\n    this.report.regression.details.forEach((regression, index) => {\n      const icon = this.getSeverityIcon(regression.severity);\n      console.log(`${index + 1}. ${icon} ${regression.metric}:`);\n      console.log(`     å½“å‰: ${regression.current}`);\n      console.log(`     åŸºå‡†: ${regression.baseline}`);\n      console.log(`     å˜åŒ–: ${regression.change}`);\n    });\n  }\n\n  /**\n   * ç”ŸæˆCIæŠ¥å‘Š\n   */\n  generateCIReport() {\n    console.log('\\nğŸ¤– CI/CD é›†æˆä¿¡æ¯:');\n\n    // è®¾ç½®GitHub Actionsè¾“å‡º\n    if (process.env.GITHUB_ACTIONS) {\n      const summary = this.generateMarkdownSummary();\n      console.log('::group::Performance Analysis Summary');\n      console.log(summary);\n      console.log('::endgroup::');\n\n      // è®¾ç½®è¾“å‡ºå˜é‡\n      console.log(\n        `::set-output name=performance-score::${this.report.performance.score}`,\n      );\n      console.log(`::set-output name=passed::${this.report.passed}`);\n      console.log(\n        `::set-output name=regression-detected::${this.report.regression.detected}`,\n      );\n    }\n\n    // è®¾ç½®é€€å‡ºç \n    if (!this.report.passed) {\n      console.log('âŒ æ€§èƒ½æ£€æŸ¥å¤±è´¥ï¼Œè®¾ç½®é€€å‡ºç ä¸º1');\n    }\n  }\n\n  /**\n   * ç”ŸæˆMarkdownæ‘˜è¦\n   */\n  generateMarkdownSummary() {\n    const lines = [];\n\n    lines.push('## ğŸ“Š æ€§èƒ½åˆ†ææŠ¥å‘Š');\n    lines.push('');\n    lines.push(`**æ€§èƒ½å¾—åˆ†:** ${this.report.performance.score}/100`);\n    lines.push(`**çŠ¶æ€:** ${this.report.passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`);\n    lines.push(`**åˆ†æ”¯:** ${this.report.environment.branch}`);\n    lines.push(`**æäº¤:** ${this.report.environment.commit}`);\n    lines.push('');\n\n    // åŒ…å¤§å°è¡¨æ ¼\n    lines.push('### ğŸ“¦ åŒ…å¤§å°åˆ†æ');\n    lines.push('| ç±»å‹ | å¤§å° | çŠ¶æ€ |');\n    lines.push('|------|------|------|');\n\n    Object.entries(this.report.performance.bundleSize).forEach(\n      ([type, size]) => {\n        const limit = this.getBundleLimit(type);\n        const status = limit && size > limit ? 'ğŸ”´ è¶…é™' : 'ğŸŸ¢ æ­£å¸¸';\n        lines.push(`| ${type} | ${this.formatBytes(size)} | ${status} |`);\n      },\n    );\n\n    // å›å½’æ£€æµ‹\n    if (this.report.regression.detected) {\n      lines.push('');\n      lines.push('### ğŸš¨ æ€§èƒ½å›å½’');\n      this.report.regression.details.forEach((regression) => {\n        lines.push(\n          `- **${regression.metric}:** ${regression.change} (${regression.current} vs ${regression.baseline})`,\n        );\n      });\n    }\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * è·å–åŒ…å¤§å°é™åˆ¶\n   */\n  getBundleLimit(type) {\n    const limits = {\n      main: this.report.limits.mainBundle,\n      framework: 130 * 1024, // 130KB\n      shared: 220 * 1024, // 220KB\n    };\n    return limits[type];\n  }\n\n  /**\n   * è·å–ä¸¥é‡ç¨‹åº¦å›¾æ ‡\n   */\n  getSeverityIcon(severity) {\n    const icons = {\n      critical: 'ğŸ”´',\n      high: 'ğŸŸ ',\n      medium: 'ğŸŸ¡',\n      low: 'ğŸŸ¢',\n    };\n    return icons[severity] || 'ğŸ”µ';\n  }\n\n  /**\n   * ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶\n   */\n  saveReport() {\n    try {\n      const reportsDir = path.join(process.cwd(), 'reports');\n      if (!fs.existsSync(reportsDir)) {\n        fs.mkdirSync(reportsDir, { recursive: true });\n      }\n\n      const reportPath = path.join(reportsDir, 'performance-report.json');\n      fs.writeFileSync(reportPath, JSON.stringify(this.report, null, 2));\n\n      console.log(`\\nğŸ“„ æ€§èƒ½æŠ¥å‘Šå·²ä¿å­˜: ${reportPath}`);\n    } catch (error) {\n      console.warn(`âš ï¸  ä¿å­˜æŠ¥å‘Šå¤±è´¥: ${error.message}`);\n    }\n  }\n\n  /**\n   * è·å–å½“å‰Gitåˆ†æ”¯\n   */\n  getCurrentBranch() {\n    try {\n      return execSync('git rev-parse --abbrev-ref HEAD', {\n        encoding: 'utf8',\n      }).trim();\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  /**\n   * è·å–å½“å‰Gitæäº¤\n   */\n  getCurrentCommit() {\n    try {\n      return execSync('git rev-parse HEAD', { encoding: 'utf8' })\n        .trim()\n        .substring(0, 8);\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  /**\n   * åŠ è½½æ€§èƒ½åŸºå‡†\n   */\n  loadBaseline() {\n    try {\n      const baselinePath = path.join(\n        process.cwd(),\n        'reports',\n        this.options.baselineFile,\n      );\n      if (fs.existsSync(baselinePath)) {\n        const baseline = JSON.parse(fs.readFileSync(baselinePath, 'utf8'));\n        this.report.baseline = baseline;\n        console.log(`ğŸ“Š å·²åŠ è½½æ€§èƒ½åŸºå‡†: ${baseline.timestamp}`);\n        return baseline;\n      }\n    } catch (error) {\n      console.warn(`âš ï¸  åŠ è½½åŸºå‡†å¤±è´¥: ${error.message}`);\n    }\n    return null;\n  }\n\n  /**\n   * ä¿å­˜æ€§èƒ½åŸºå‡†\n   */\n  saveBaseline() {\n    try {\n      const reportsDir = path.join(process.cwd(), 'reports');\n      if (!fs.existsSync(reportsDir)) {\n        fs.mkdirSync(reportsDir, { recursive: true });\n      }\n\n      const baselinePath = path.join(reportsDir, this.options.baselineFile);\n      const baseline = {\n        timestamp: this.report.timestamp,\n        performance: this.report.performance,\n        environment: this.report.environment,\n      };\n\n      fs.writeFileSync(baselinePath, JSON.stringify(baseline, null, 2));\n      console.log(`ğŸ’¾ æ€§èƒ½åŸºå‡†å·²ä¿å­˜: ${baselinePath}`);\n    } catch (error) {\n      console.warn(`âš ï¸  ä¿å­˜åŸºå‡†å¤±è´¥: ${error.message}`);\n    }\n  }\n\n  /**\n   * æ£€æµ‹æ€§èƒ½å›å½’\n   */\n  detectRegression() {\n    if (!this.report.baseline) {\n      console.log('ğŸ“Š æ— åŸºå‡†æ•°æ®ï¼Œè·³è¿‡å›å½’æ£€æµ‹');\n      return;\n    }\n\n    console.log('ğŸ” æ£€æµ‹æ€§èƒ½å›å½’...');\n    const current = this.report.performance;\n    const baseline = this.report.baseline.performance;\n    const regressions = [];\n\n    // æ£€æŸ¥åŒ…å¤§å°å›å½’\n    this.checkBundleSizeRegression(current, baseline, regressions);\n\n    // æ£€æŸ¥åŠ è½½æ—¶é—´å›å½’\n    this.checkLoadTimeRegression(current, baseline, regressions);\n\n    // æ£€æŸ¥å†…å­˜ä½¿ç”¨å›å½’\n    this.checkMemoryRegression(current, baseline, regressions);\n\n    if (regressions.length > 0) {\n      this.report.regression.detected = true;\n      this.report.regression.details = regressions;\n      this.report.passed = false;\n\n      console.log(`ğŸš¨ æ£€æµ‹åˆ° ${regressions.length} ä¸ªæ€§èƒ½å›å½’:`);\n      regressions.forEach((regression, index) => {\n        console.log(\n          `${index + 1}. ${regression.metric}: ${regression.message}`,\n        );\n      });\n    } else {\n      console.log('âœ… æœªæ£€æµ‹åˆ°æ€§èƒ½å›å½’');\n    }\n  }\n\n  /**\n   * æ£€æŸ¥åŒ…å¤§å°å›å½’\n   */\n  checkBundleSizeRegression(current, baseline, regressions) {\n    const currentTotal = Object.values(current.bundleSize).reduce(\n      (sum, size) => sum + size,\n      0,\n    );\n    const baselineTotal = Object.values(baseline.bundleSize || {}).reduce(\n      (sum, size) => sum + size,\n      0,\n    );\n\n    if (baselineTotal > 0) {\n      const change = ((currentTotal - baselineTotal) / baselineTotal) * 100;\n      if (change > this.report.limits.regressionThreshold) {\n        regressions.push({\n          metric: 'Bundle Size',\n          current: this.formatBytes(currentTotal),\n          baseline: this.formatBytes(baselineTotal),\n          change: `+${change.toFixed(1)}%`,\n          message: `åŒ…å¤§å°å¢åŠ  ${change.toFixed(1)}% (${this.formatBytes(currentTotal - baselineTotal)})`,\n          severity: change > 25 ? 'critical' : change > 15 ? 'high' : 'medium',\n        });\n      }\n    }\n  }\n\n  /**\n   * æ£€æŸ¥åŠ è½½æ—¶é—´å›å½’\n   */\n  checkLoadTimeRegression(current, baseline, regressions) {\n    if (current.loadTime?.estimated && baseline.loadTime?.estimated) {\n      const change =\n        ((current.loadTime.estimated - baseline.loadTime.estimated) /\n          baseline.loadTime.estimated) *\n        100;\n      if (change > this.report.limits.regressionThreshold) {\n        regressions.push({\n          metric: 'Load Time',\n          current: `${current.loadTime.estimated}ms`,\n          baseline: `${baseline.loadTime.estimated}ms`,\n          change: `+${change.toFixed(1)}%`,\n          message: `åŠ è½½æ—¶é—´å¢åŠ  ${change.toFixed(1)}%`,\n          severity: change > 30 ? 'critical' : change > 20 ? 'high' : 'medium',\n        });\n      }\n    }\n  }\n\n  /**\n   * æ£€æŸ¥å†…å­˜ä½¿ç”¨å›å½’\n   */\n  checkMemoryRegression(current, baseline, regressions) {\n    if (current.memoryUsage?.heapUsed && baseline.memoryUsage?.heapUsed) {\n      const change =\n        ((current.memoryUsage.heapUsed - baseline.memoryUsage.heapUsed) /\n          baseline.memoryUsage.heapUsed) *\n        100;\n      if (change > this.report.limits.regressionThreshold) {\n        regressions.push({\n          metric: 'Memory Usage',\n          current: this.formatBytes(current.memoryUsage.heapUsed),\n          baseline: this.formatBytes(baseline.memoryUsage.heapUsed),\n          change: `+${change.toFixed(1)}%`,\n          message: `å†…å­˜ä½¿ç”¨å¢åŠ  ${change.toFixed(1)}%`,\n          severity: change > 50 ? 'critical' : change > 30 ? 'high' : 'medium',\n        });\n      }\n    }\n  }\n\n  /**\n   * æ‰§è¡Œå®Œæ•´çš„æ€§èƒ½åˆ†æ\n   */\n  async analyze() {\n    console.log('ğŸš€ å¼€å§‹æ€§èƒ½åˆ†æ...\\n');\n\n    // åŠ è½½åŸºå‡†æ•°æ®\n    if (this.options.compareWithBaseline) {\n      this.loadBaseline();\n    }\n\n    // æ‰§è¡Œåˆ†æ\n    this.analyzeBundleSize();\n    this.analyzeLoadTime();\n    this.analyzeMemoryUsage();\n    this.calculatePerformanceScore();\n\n    // æ£€æµ‹å›å½’\n    if (this.options.compareWithBaseline) {\n      this.detectRegression();\n    }\n\n    // ä¿å­˜åŸºå‡†\n    if (this.options.saveBaseline) {\n      this.saveBaseline();\n    }\n\n    return this.generateReport();\n  }\n}\n\n// å‘½ä»¤è¡Œæ¥å£\nif (require.main === module) {\n  // è§£æå‘½ä»¤è¡Œå‚æ•°\n  const args = process.argv.slice(2);\n  const options = {\n    saveBaseline: args.includes('--save-baseline'),\n    compareWithBaseline: args.includes('--compare-baseline'),\n    ciMode: args.includes('--ci') || process.env.CI === 'true',\n    baselineFile: 'performance-baseline.json',\n  };\n\n  // è‡ªå®šä¹‰åŸºå‡†æ–‡ä»¶\n  const baselineIndex = args.indexOf('--baseline-file');\n  if (baselineIndex !== -1 && args[baselineIndex + 1]) {\n    options.baselineFile = args[baselineIndex + 1];\n  }\n\n  // æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\n  if (args.includes('--help') || args.includes('-h')) {\n    console.log(`\nğŸ“Š æ€§èƒ½åˆ†æå™¨ - Performance Analyzer\n\nç”¨æ³•:\n  node scripts/performance-analyzer.js [é€‰é¡¹]\n\né€‰é¡¹:\n  --save-baseline          ä¿å­˜å½“å‰æ€§èƒ½æ•°æ®ä½œä¸ºåŸºå‡†\n  --compare-baseline       ä¸åŸºå‡†æ•°æ®è¿›è¡Œå¯¹æ¯”\n  --baseline-file <file>   æŒ‡å®šåŸºå‡†æ–‡ä»¶å (é»˜è®¤: performance-baseline.json)\n  --ci                     CI/CDæ¨¡å¼ï¼Œè¾“å‡ºé€‚åˆè‡ªåŠ¨åŒ–çš„æ ¼å¼\n  --help, -h               æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯\n\nç¤ºä¾‹:\n  # åŸºæœ¬åˆ†æ\n  node scripts/performance-analyzer.js\n\n  # ä¿å­˜åŸºå‡†\n  node scripts/performance-analyzer.js --save-baseline\n\n  # å¯¹æ¯”åŸºå‡†å¹¶æ£€æµ‹å›å½’\n  node scripts/performance-analyzer.js --compare-baseline\n\n  # CIæ¨¡å¼\n  node scripts/performance-analyzer.js --compare-baseline --ci\n    `);\n    process.exit(0);\n  }\n\n  console.log('ğŸš€ å¯åŠ¨æ€§èƒ½åˆ†æå™¨...');\n  console.log(`ğŸ“‹ é…ç½®: ${JSON.stringify(options, null, 2)}`);\n\n  const analyzer = new PerformanceAnalyzer(options);\n  analyzer\n    .analyze()\n    .then((success) => {\n      if (options.ciMode) {\n        console.log(`\\nğŸ¯ åˆ†æå®Œæˆï¼Œé€€å‡ºç : ${success ? 0 : 1}`);\n      }\n      process.exit(success ? 0 : 1);\n    })\n    .catch((error) => {\n      console.error(`âŒ æ€§èƒ½åˆ†æå¤±è´¥: ${error.message}`);\n      if (options.ciMode) {\n        console.log('::error::Performance analysis failed');\n      }\n      process.exit(1);\n    });\n}\n\nmodule.exports = PerformanceAnalyzer;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/performance-benchmark-monitor.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":39,"column":10,"nodeType":"CallExpression","endLine":39,"endColumn":37},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":40,"column":7,"nodeType":"CallExpression","endLine":40,"endColumn":54},{"ruleId":"require-await","severity":1,"message":"Async method 'benchmarkTypeCheck' has no 'await' expression.","line":80,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":80,"endColumn":27,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1841,1847],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'benchmarkLint' has no 'await' expression.","line":111,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":111,"endColumn":22,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2643,2649],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'benchmarkTest' has no 'await' expression.","line":142,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":142,"endColumn":22,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3400,3406],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'benchmarkBuild' has no 'await' expression.","line":176,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":176,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4178,4184],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'analyzeBundleSize' has no 'await' expression.","line":207,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":207,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4917,4923],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":245,"column":9,"nodeType":"CallExpression","endLine":245,"endColumn":31},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":246,"column":21,"nodeType":"CallExpression","endLine":246,"endColumn":44},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found statSync from package \"fs\" with non literal argument at index 0","line":249,"column":23,"nodeType":"CallExpression","endLine":249,"endColumn":44},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":267,"column":5,"nodeType":"CallExpression","endLine":267,"endColumn":68},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":278,"column":21,"nodeType":"CallExpression","endLine":278,"endColumn":49},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":283,"column":29,"nodeType":"CallExpression","messageId":"missingRadix","endLine":285,"endColumn":12,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[6895,6895],"text":" 10,"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found unlinkSync from package \"fs\" with non literal argument at index 0","line":287,"column":13,"nodeType":"CallExpression","endLine":287,"endColumn":57},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":310,"column":25,"nodeType":"MemberExpression","endLine":310,"endColumn":58},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":362,"column":21,"nodeType":"CallExpression","endLine":363,"endColumn":35},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":371,"column":25,"nodeType":"CallExpression","endLine":371,"endColumn":79},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":393,"column":24,"nodeType":"MemberExpression","endLine":393,"endColumn":44},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":401,"column":11,"nodeType":"MemberExpression","endLine":401,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":402,"column":11,"nodeType":"MemberExpression","endLine":402,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":405,"column":9,"nodeType":"MemberExpression","endLine":405,"endColumn":23},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":472,"column":5,"nodeType":"CallExpression","endLine":475,"endColumn":6},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":515,"column":60,"nodeType":"MemberExpression","endLine":515,"endColumn":68},{"ruleId":"no-unused-vars","severity":1,"message":"'benchmarks' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":524,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":524,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"benchmarks"},"fix":{"range":[13302,13313],"text":""},"desc":"Remove unused variable 'benchmarks'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'benchmarks' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":524,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":524,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æ€§èƒ½åŸºå‡†ç›‘æ§ç³»ç»Ÿ\n *\n * ç›‘æ§æ„å»ºæ€§èƒ½ã€æµ‹è¯•æ€§èƒ½ã€åŒ…å¤§å°ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nclass PerformanceBenchmarkMonitor {\n  constructor() {\n    this.dataDir = path.join(\n      process.cwd(),\n      'reports',\n      'performance-benchmarks',\n    );\n    this.baselines = {\n      buildTime: 60000, // 60ç§’\n      testTime: 120000, // 2åˆ†é’Ÿ\n      bundleSize: 50 * 1024, // 50KB\n      typeCheckTime: 30000, // 30ç§’\n      lintTime: 20000, // 20ç§’\n    };\n    this.regressionThresholds = {\n      buildTime: 1.2, // 20%å¢é•¿è§¦å‘è­¦æŠ¥\n      testTime: 1.3, // 30%å¢é•¿è§¦å‘è­¦æŠ¥\n      bundleSize: 1.1, // 10%å¢é•¿è§¦å‘è­¦æŠ¥\n      typeCheckTime: 1.5, // 50%å¢é•¿è§¦å‘è­¦æŠ¥\n      lintTime: 1.5, // 50%å¢é•¿è§¦å‘è­¦æŠ¥\n    };\n\n    this.ensureDirectories();\n  }\n\n  ensureDirectories() {\n    if (!fs.existsSync(this.dataDir)) {\n      fs.mkdirSync(this.dataDir, { recursive: true });\n    }\n  }\n\n  /**\n   * è¿è¡Œå®Œæ•´æ€§èƒ½åŸºå‡†æµ‹è¯•\n   */\n  async runBenchmarks() {\n    console.log('ğŸš€ å¼€å§‹æ€§èƒ½åŸºå‡†æµ‹è¯•...\\n');\n\n    const benchmarks = {\n      timestamp: new Date().toISOString(),\n      commit: this.getCurrentCommit(),\n      branch: this.getCurrentBranch(),\n      environment: this.getEnvironmentInfo(),\n      metrics: {},\n    };\n\n    // è¿è¡Œå„é¡¹æ€§èƒ½æµ‹è¯•\n    benchmarks.metrics.typeCheck = await this.benchmarkTypeCheck();\n    benchmarks.metrics.lint = await this.benchmarkLint();\n    benchmarks.metrics.test = await this.benchmarkTest();\n    benchmarks.metrics.build = await this.benchmarkBuild();\n    benchmarks.metrics.bundle = await this.analyzeBundleSize();\n\n    // ä¿å­˜åŸºå‡†æ•°æ®\n    this.saveBenchmarkData(benchmarks);\n\n    // åˆ†ææ€§èƒ½å›å½’\n    const analysis = this.analyzePerformanceRegression(benchmarks);\n\n    // ç”ŸæˆæŠ¥å‘Š\n    this.generatePerformanceReport(benchmarks, analysis);\n\n    return { benchmarks, analysis };\n  }\n\n  /**\n   * TypeScript ç±»å‹æ£€æŸ¥åŸºå‡†æµ‹è¯•\n   */\n  async benchmarkTypeCheck() {\n    console.log('ğŸ” TypeScript ç±»å‹æ£€æŸ¥åŸºå‡†æµ‹è¯•...');\n\n    try {\n      const startTime = Date.now();\n      execSync('pnpm type-check', { stdio: 'pipe', timeout: 60000 });\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n\n      console.log(`âœ… TypeScript ç±»å‹æ£€æŸ¥å®Œæˆ: ${duration}ms`);\n      return {\n        duration,\n        status: 'success',\n        baseline: this.baselines.typeCheckTime,\n        regression: duration / this.baselines.typeCheckTime,\n      };\n    } catch (error) {\n      console.log(`âŒ TypeScript ç±»å‹æ£€æŸ¥å¤±è´¥: ${error.message}`);\n      return {\n        duration: 0,\n        status: 'failed',\n        error: error.message,\n        baseline: this.baselines.typeCheckTime,\n        regression: 0,\n      };\n    }\n  }\n\n  /**\n   * ESLint åŸºå‡†æµ‹è¯•\n   */\n  async benchmarkLint() {\n    console.log('ğŸ” ESLint åŸºå‡†æµ‹è¯•...');\n\n    try {\n      const startTime = Date.now();\n      execSync('pnpm lint:check', { stdio: 'pipe', timeout: 60000 });\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n\n      console.log(`âœ… ESLint æ£€æŸ¥å®Œæˆ: ${duration}ms`);\n      return {\n        duration,\n        status: 'success',\n        baseline: this.baselines.lintTime,\n        regression: duration / this.baselines.lintTime,\n      };\n    } catch (error) {\n      console.log(`âŒ ESLint æ£€æŸ¥å¤±è´¥: ${error.message}`);\n      return {\n        duration: 0,\n        status: 'failed',\n        error: error.message,\n        baseline: this.baselines.lintTime,\n        regression: 0,\n      };\n    }\n  }\n\n  /**\n   * æµ‹è¯•åŸºå‡†æµ‹è¯•\n   */\n  async benchmarkTest() {\n    console.log('ğŸ§ª æµ‹è¯•åŸºå‡†æµ‹è¯•...');\n\n    try {\n      const startTime = Date.now();\n      execSync('pnpm test --run --reporter=json', {\n        stdio: 'pipe',\n        timeout: 180000,\n      });\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n\n      console.log(`âœ… æµ‹è¯•å®Œæˆ: ${duration}ms`);\n      return {\n        duration,\n        status: 'success',\n        baseline: this.baselines.testTime,\n        regression: duration / this.baselines.testTime,\n      };\n    } catch (error) {\n      console.log(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);\n      return {\n        duration: 0,\n        status: 'failed',\n        error: error.message,\n        baseline: this.baselines.testTime,\n        regression: 0,\n      };\n    }\n  }\n\n  /**\n   * æ„å»ºåŸºå‡†æµ‹è¯•\n   */\n  async benchmarkBuild() {\n    console.log('ğŸ—ï¸  æ„å»ºåŸºå‡†æµ‹è¯•...');\n\n    try {\n      const startTime = Date.now();\n      execSync('pnpm build', { stdio: 'pipe', timeout: 180000 });\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n\n      console.log(`âœ… æ„å»ºå®Œæˆ: ${duration}ms`);\n      return {\n        duration,\n        status: 'success',\n        baseline: this.baselines.buildTime,\n        regression: duration / this.baselines.buildTime,\n      };\n    } catch (error) {\n      console.log(`âŒ æ„å»ºå¤±è´¥: ${error.message}`);\n      return {\n        duration: 0,\n        status: 'failed',\n        error: error.message,\n        baseline: this.baselines.buildTime,\n        regression: 0,\n      };\n    }\n  }\n\n  /**\n   * åŒ…å¤§å°åˆ†æ\n   */\n  async analyzeBundleSize() {\n    console.log('ğŸ“¦ åŒ…å¤§å°åˆ†æ...');\n\n    try {\n      const buildDir = path.join(process.cwd(), '.next');\n      if (!fs.existsSync(buildDir)) {\n        throw new Error('æ„å»ºç›®å½•ä¸å­˜åœ¨ï¼Œè¯·å…ˆè¿è¡Œæ„å»º');\n      }\n\n      const size = this.getDirectorySize(buildDir);\n      const regression = size / this.baselines.bundleSize;\n\n      console.log(`ğŸ“Š åŒ…å¤§å°: ${this.formatBytes(size)}`);\n      return {\n        size,\n        sizeFormatted: this.formatBytes(size),\n        status: 'success',\n        baseline: this.baselines.bundleSize,\n        regression,\n      };\n    } catch (error) {\n      console.log(`âŒ åŒ…å¤§å°åˆ†æå¤±è´¥: ${error.message}`);\n      return {\n        size: 0,\n        status: 'failed',\n        error: error.message,\n        baseline: this.baselines.bundleSize,\n        regression: 0,\n      };\n    }\n  }\n\n  /**\n   * è·å–ç›®å½•å¤§å°\n   */\n  getDirectorySize(dirPath) {\n    let totalSize = 0;\n\n    if (fs.existsSync(dirPath)) {\n      const files = fs.readdirSync(dirPath);\n      files.forEach((file) => {\n        const filePath = path.join(dirPath, file);\n        const stats = fs.statSync(filePath);\n        if (stats.isDirectory()) {\n          totalSize += this.getDirectorySize(filePath);\n        } else {\n          totalSize += stats.size;\n        }\n      });\n    }\n\n    return totalSize;\n  }\n\n  /**\n   * ä¿å­˜åŸºå‡†æ•°æ®\n   */\n  saveBenchmarkData(benchmarks) {\n    const filename = `benchmark-${Date.now()}.json`;\n    const filepath = path.join(this.dataDir, filename);\n    fs.writeFileSync(filepath, JSON.stringify(benchmarks, null, 2));\n\n    // æ¸…ç†æ—§æ•°æ®ï¼ˆä¿ç•™æœ€è¿‘30å¤©ï¼‰\n    this.cleanupOldData();\n  }\n\n  /**\n   * æ¸…ç†æ—§æ•°æ®\n   */\n  cleanupOldData() {\n    try {\n      const files = fs.readdirSync(this.dataDir);\n      const cutoffTime = Date.now() - 30 * 24 * 60 * 60 * 1000; // 30å¤©å‰\n\n      files.forEach((file) => {\n        if (file.startsWith('benchmark-') && file.endsWith('.json')) {\n          const timestamp = parseInt(\n            file.replace('benchmark-', '').replace('.json', ''),\n          );\n          if (timestamp < cutoffTime) {\n            fs.unlinkSync(path.join(this.dataDir, file));\n          }\n        }\n      });\n    } catch (error) {\n      console.warn('âš ï¸  æ¸…ç†æ—§æ•°æ®æ—¶å‡ºé”™:', error.message);\n    }\n  }\n\n  /**\n   * åˆ†ææ€§èƒ½å›å½’\n   */\n  analyzePerformanceRegression(benchmarks) {\n    console.log('ğŸ“Š åˆ†ææ€§èƒ½å›å½’...');\n\n    const regressions = [];\n    const improvements = [];\n    const alerts = [];\n\n    Object.entries(benchmarks.metrics).forEach(([metric, data]) => {\n      if (data.status !== 'success') return;\n\n      const {regression} = data;\n      const threshold = this.regressionThresholds[metric] || 1.2;\n\n      if (regression > threshold) {\n        const regressionData = {\n          metric,\n          regression,\n          threshold,\n          severity: regression > threshold * 1.5 ? 'critical' : 'warning',\n          message: `${metric} æ€§èƒ½å›å½’ ${((regression - 1) * 100).toFixed(1)}%`,\n          current: data.duration || data.size,\n          baseline: data.baseline,\n        };\n\n        regressions.push(regressionData);\n        alerts.push(regressionData);\n      } else if (regression < 0.9) {\n        improvements.push({\n          metric,\n          improvement: 1 - regression,\n          message: `${metric} æ€§èƒ½æå‡ ${((1 - regression) * 100).toFixed(1)}%`,\n          current: data.duration || data.size,\n          baseline: data.baseline,\n        });\n      }\n    });\n\n    // åŠ è½½å†å²æ•°æ®è¿›è¡Œè¶‹åŠ¿åˆ†æ\n    const historicalData = this.loadHistoricalData();\n    const trends = this.analyzeTrends(historicalData, benchmarks);\n\n    return {\n      regressions,\n      improvements,\n      alerts,\n      trends,\n      summary: {\n        totalMetrics: Object.keys(benchmarks.metrics).length,\n        successfulMetrics: Object.values(benchmarks.metrics).filter(\n          (m) => m.status === 'success',\n        ).length,\n        regressionCount: regressions.length,\n        improvementCount: improvements.length,\n        alertCount: alerts.length,\n      },\n    };\n  }\n\n  /**\n   * åŠ è½½å†å²æ•°æ®\n   */\n  loadHistoricalData() {\n    try {\n      const files = fs\n        .readdirSync(this.dataDir)\n        .filter(\n          (file) => file.startsWith('benchmark-') && file.endsWith('.json'),\n        )\n        .sort()\n        .slice(-10); // æœ€è¿‘10æ¬¡\n\n      return files.map((file) => {\n        const content = fs.readFileSync(path.join(this.dataDir, file), 'utf8');\n        return JSON.parse(content);\n      });\n    } catch (error) {\n      console.warn('âš ï¸  åŠ è½½å†å²æ•°æ®æ—¶å‡ºé”™:', error.message);\n      return [];\n    }\n  }\n\n  /**\n   * åˆ†æè¶‹åŠ¿\n   */\n  analyzeTrends(historicalData, current) {\n    if (historicalData.length < 2) {\n      return { status: 'insufficient-data' };\n    }\n\n    const trends = {};\n    const metrics = ['typeCheck', 'lint', 'test', 'build', 'bundle'];\n\n    metrics.forEach((metric) => {\n      const values = historicalData\n        .map((data) => data.metrics[metric])\n        .filter((m) => m && m.status === 'success')\n        .map((m) => m.duration || m.size);\n\n      if (values.length >= 2) {\n        const recent = values.slice(-3); // æœ€è¿‘3æ¬¡\n        const average = recent.reduce((a, b) => a + b, 0) / recent.length;\n        const currentValue =\n          current.metrics[metric]?.duration ||\n          current.metrics[metric]?.size ||\n          0;\n\n        trends[metric] = {\n          average,\n          current: currentValue,\n          trend:\n            currentValue > average * 1.1\n              ? 'declining'\n              : currentValue < average * 0.9\n                ? 'improving'\n                : 'stable',\n          changePercent: ((currentValue - average) / average) * 100,\n        };\n      }\n    });\n\n    return { status: 'success', trends };\n  }\n\n  /**\n   * ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š\n   */\n  generatePerformanceReport(benchmarks, analysis) {\n    console.log('\\nğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•æŠ¥å‘Š');\n    console.log('='.repeat(60));\n\n    console.log(\n      `ğŸ“… æµ‹è¯•æ—¶é—´: ${new Date(benchmarks.timestamp).toLocaleString()}`,\n    );\n    console.log(`ğŸŒ¿ åˆ†æ”¯: ${benchmarks.branch}`);\n    console.log(`ğŸ“ æäº¤: ${benchmarks.commit.substring(0, 8)}`);\n\n    console.log('\\nğŸ“ˆ æ€§èƒ½æŒ‡æ ‡:');\n    Object.entries(benchmarks.metrics).forEach(([metric, data]) => {\n      if (data.status === 'success') {\n        const value = data.duration\n          ? `${data.duration}ms`\n          : this.formatBytes(data.size);\n        const regressionPercent = ((data.regression - 1) * 100).toFixed(1);\n        const emoji =\n          data.regression > 1.2 ? 'ğŸ”´' : data.regression < 0.9 ? 'ğŸŸ¢' : 'ğŸŸ¡';\n        console.log(\n          `  ${emoji} ${metric}: ${value} (${regressionPercent >= 0 ? '+' : ''}${regressionPercent}%)`,\n        );\n      } else {\n        console.log(`  âŒ ${metric}: å¤±è´¥ - ${data.error}`);\n      }\n    });\n\n    if (analysis.improvements.length > 0) {\n      console.log('\\nğŸŸ¢ æ€§èƒ½æå‡:');\n      analysis.improvements.forEach((improvement) => {\n        console.log(`  âœ… ${improvement.message}`);\n      });\n    }\n\n    if (analysis.regressions.length > 0) {\n      console.log('\\nğŸ”´ æ€§èƒ½å›å½’:');\n      analysis.regressions.forEach((regression) => {\n        const emoji = regression.severity === 'critical' ? 'ğŸš¨' : 'âš ï¸';\n        console.log(`  ${emoji} ${regression.message}`);\n      });\n    }\n\n    // ä¿å­˜æŠ¥å‘Š\n    const reportPath = path.join(\n      this.dataDir,\n      `performance-report-${Date.now()}.json`,\n    );\n    fs.writeFileSync(\n      reportPath,\n      JSON.stringify({ benchmarks, analysis }, null, 2),\n    );\n    console.log(`\\nğŸ’¾ æŠ¥å‘Šå·²ä¿å­˜: ${reportPath}`);\n  }\n\n  /**\n   * è·å–ç¯å¢ƒä¿¡æ¯\n   */\n  getEnvironmentInfo() {\n    return {\n      nodeVersion: process.version,\n      platform: process.platform,\n      arch: process.arch,\n      cpus: require('os').cpus().length,\n      memory: `${Math.round(require('os').totalmem() / 1024 / 1024 / 1024)  }GB`,\n    };\n  }\n\n  getCurrentCommit() {\n    try {\n      return execSync('git rev-parse HEAD', { encoding: 'utf8' }).trim();\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  getCurrentBranch() {\n    try {\n      return execSync('git rev-parse --abbrev-ref HEAD', {\n        encoding: 'utf8',\n      }).trim();\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  formatBytes(bytes) {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / k**i).toFixed(2))  } ${  sizes[i]}`;\n  }\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nasync function main() {\n  const monitor = new PerformanceBenchmarkMonitor();\n\n  try {\n    const { benchmarks, analysis } = await monitor.runBenchmarks();\n\n    // å¦‚æœæœ‰ä¸¥é‡æ€§èƒ½å›å½’ï¼Œé€€å‡ºç ä¸º1\n    if (analysis.alerts.some((alert) => alert.severity === 'critical')) {\n      console.log('\\nğŸš¨ æ£€æµ‹åˆ°ä¸¥é‡æ€§èƒ½å›å½’ï¼Œè¯·ç«‹å³å¤„ç†ï¼');\n      process.exit(1);\n    }\n\n    console.log('\\nâœ… æ€§èƒ½åŸºå‡†æµ‹è¯•å®Œæˆ');\n  } catch (error) {\n    console.error('âŒ æ€§èƒ½åŸºå‡†æµ‹è¯•å¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { PerformanceBenchmarkMonitor };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/project-health.js","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":31,"column":33,"nodeType":"MemberExpression","endLine":31,"endColumn":42},{"ruleId":"no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":54,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"output"},"fix":{"range":[1024,1165],"text":""},"desc":"Remove unused variable 'output'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":54,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":66,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":66,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":19},{"ruleId":"require-await","severity":1,"message":"Async method 'parseDetailedReport' has no 'await' expression.","line":79,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":79,"endColumn":28,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1485,1491],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":98,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":98,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'success' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":243,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":243,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"success"},"fix":{"range":[5556,5602],"text":""},"desc":"Remove unused variable 'success'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'success' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":243,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":243,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * é¡¹ç›®å¥åº·æ£€æŸ¥å™¨ - è¶…ç®€å•çš„ç”¨æˆ·ç•Œé¢\n * Project Health Checker - Ultra-simple user interface\n */\n\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nclass ProjectHealthChecker {\n  constructor() {\n    this.healthStatus = {\n      overall: 'unknown',\n      score: 0,\n      issues: [],\n      recommendations: [],\n      canDeploy: false,\n    };\n  }\n\n  /**\n   * æ˜¾ç¤ºåŠ è½½åŠ¨ç”»\n   */\n  showLoading(message) {\n    const frames = ['â ‹', 'â ™', 'â ¹', 'â ¸', 'â ¼', 'â ´', 'â ¦', 'â §', 'â ‡', 'â '];\n    let i = 0;\n\n    const interval = setInterval(() => {\n      process.stdout.write(`\\r${frames[i]} ${message}`);\n      i = (i + 1) % frames.length;\n    }, 100);\n\n    return interval;\n  }\n\n  /**\n   * åœæ­¢åŠ è½½åŠ¨ç”»\n   */\n  stopLoading(interval, finalMessage) {\n    clearInterval(interval);\n    process.stdout.write(`\\r${finalMessage}\\n`);\n  }\n\n  /**\n   * è¿è¡Œåå°å¤æ‚æ£€æŸ¥\n   */\n  async runComplexChecks() {\n    const loader = this.showLoading('ğŸ” AIæ­£åœ¨è¿›è¡Œå…¨é¢å¥åº·æ£€æŸ¥...');\n\n    try {\n      // è¿è¡Œå®Œæ•´çš„è´¨é‡æ£€æŸ¥ï¼ˆAIå±‚çš„å¤æ‚é€»è¾‘ï¼‰\n      const output = execSync('pnpm quality:report', {\n        stdio: 'pipe',\n        encoding: 'utf8',\n        timeout: 120000, // 2åˆ†é’Ÿè¶…æ—¶\n      });\n\n      this.stopLoading(loader, 'âœ… å¥åº·æ£€æŸ¥å®Œæˆ');\n\n      // è¯»å–è¯¦ç»†æŠ¥å‘Š\n      await this.parseDetailedReport();\n\n      return true;\n    } catch (error) {\n      this.stopLoading(loader, 'âŒ å¥åº·æ£€æŸ¥é‡åˆ°é—®é¢˜');\n\n      // å³ä½¿å‡ºé”™ä¹Ÿå°è¯•è§£æå·²æœ‰æŠ¥å‘Š\n      await this.parseDetailedReport();\n\n      return false;\n    }\n  }\n\n  /**\n   * è§£æè¯¦ç»†æŠ¥å‘Šï¼Œæå–å…³é”®ä¿¡æ¯\n   */\n  async parseDetailedReport() {\n    try {\n      const reportPath = path.join(\n        process.cwd(),\n        'reports',\n        'simple-quality-report.json',\n      );\n\n      if (fs.existsSync(reportPath)) {\n        const report = JSON.parse(fs.readFileSync(reportPath, 'utf8'));\n\n        // æå–å…³é”®ä¿¡æ¯\n        this.healthStatus.score = report.summary.overallScore || 0;\n        this.healthStatus.issues = this.extractCriticalIssues(report);\n        this.healthStatus.recommendations =\n          this.extractTopRecommendations(report);\n        this.healthStatus.canDeploy = this.assessDeploymentReadiness(report);\n        this.healthStatus.overall = this.determineOverallHealth(report);\n      }\n    } catch (error) {\n      console.warn('âš ï¸  æ— æ³•è¯»å–è¯¦ç»†æŠ¥å‘Šï¼Œä½¿ç”¨åŸºç¡€æ£€æŸ¥ç»“æœ');\n      this.healthStatus.overall = 'unknown';\n    }\n  }\n\n  /**\n   * æå–å…³é”®é—®é¢˜\n   */\n  extractCriticalIssues(report) {\n    const issues = [];\n\n    // ä»æ£€æŸ¥ç»“æœä¸­æå–å¤±è´¥é¡¹\n    if (report.checks) {\n      report.checks.forEach((check) => {\n        if (check.status === 'FAIL') {\n          issues.push({\n            type: 'quality',\n            message: `${check.name  }å¤±è´¥`,\n            severity: 'high',\n          });\n        }\n      });\n    }\n\n    // ä»å®‰å…¨æŠ¥å‘Šä¸­æå–æ¼æ´\n    if (report.security && report.security.vulnerabilities > 0) {\n      issues.push({\n        type: 'security',\n        message: `å‘ç° ${report.security.vulnerabilities} ä¸ªå®‰å…¨æ¼æ´`,\n        severity: 'critical',\n      });\n    }\n\n    // ä»æ€§èƒ½æŠ¥å‘Šä¸­æå–é—®é¢˜\n    if (report.performance && report.performance.issues > 0) {\n      issues.push({\n        type: 'performance',\n        message: `å‘ç° ${report.performance.issues} ä¸ªæ€§èƒ½é—®é¢˜`,\n        severity: 'medium',\n      });\n    }\n\n    return issues.slice(0, 3); // åªæ˜¾ç¤ºå‰3ä¸ªæœ€é‡è¦çš„é—®é¢˜\n  }\n\n  /**\n   * æå–é¡¶çº§å»ºè®®\n   */\n  extractTopRecommendations(report) {\n    if (!report.recommendations) return [];\n\n    return report.recommendations\n      .filter((rec) => rec.priority === 'HIGH')\n      .slice(0, 2)\n      .map((rec) => rec.title);\n  }\n\n  /**\n   * è¯„ä¼°éƒ¨ç½²å°±ç»ªæ€§\n   */\n  assessDeploymentReadiness(report) {\n    // åŸºäºåˆ†æ•°å’Œå…³é”®é—®é¢˜åˆ¤æ–­\n    const score = report.summary.overallScore || 0;\n    const criticalIssues = this.healthStatus.issues.filter(\n      (issue) => issue.severity === 'critical',\n    ).length;\n\n    return score >= 70 && criticalIssues === 0;\n  }\n\n  /**\n   * ç¡®å®šæ•´ä½“å¥åº·çŠ¶å†µ\n   */\n  determineOverallHealth(report) {\n    const score = report.summary.overallScore || 0;\n    const failedChecks = report.summary.failedChecks || 0;\n\n    if (score >= 90 && failedChecks === 0) return 'excellent';\n    if (score >= 80 && failedChecks <= 1) return 'good';\n    if (score >= 70 && failedChecks <= 2) return 'fair';\n    if (score >= 50) return 'poor';\n    return 'critical';\n  }\n\n  /**\n   * æ˜¾ç¤ºç®€å•çš„å¥åº·çŠ¶æ€\n   */\n  displaySimpleHealth() {\n    console.log('\\nğŸ¥ é¡¹ç›®å¥åº·çŠ¶å†µ');\n    console.log('='.repeat(30));\n\n    // æ˜¾ç¤ºæ•´ä½“çŠ¶æ€\n    const statusIcons = {\n      excellent: 'ğŸŸ¢ ä¼˜ç§€',\n      good: 'ğŸŸ¢ è‰¯å¥½',\n      fair: 'ğŸŸ¡ ä¸€èˆ¬',\n      poor: 'ğŸŸ  è¾ƒå·®',\n      critical: 'ğŸ”´ å±é™©',\n      unknown: 'âšª æœªçŸ¥',\n    };\n\n    console.log(`çŠ¶æ€: ${statusIcons[this.healthStatus.overall]}`);\n    console.log(`è¯„åˆ†: ${this.healthStatus.score}/100`);\n\n    // æ˜¾ç¤ºå…³é”®é—®é¢˜\n    if (this.healthStatus.issues.length > 0) {\n      console.log('\\nğŸš¨ éœ€è¦å…³æ³¨çš„é—®é¢˜:');\n      this.healthStatus.issues.forEach((issue, index) => {\n        const severityIcon = {\n          critical: 'ğŸ”´',\n          high: 'ğŸŸ ',\n          medium: 'ğŸŸ¡',\n          low: 'ğŸŸ¢',\n        }[issue.severity];\n\n        console.log(`${index + 1}. ${severityIcon} ${issue.message}`);\n      });\n    }\n\n    // æ˜¾ç¤ºéƒ¨ç½²çŠ¶æ€\n    console.log(\n      `\\nğŸš€ éƒ¨ç½²çŠ¶æ€: ${this.healthStatus.canDeploy ? 'âœ… å¯ä»¥éƒ¨ç½²' : 'âŒ æš‚ä¸å»ºè®®éƒ¨ç½²'}`,\n    );\n\n    // æ˜¾ç¤ºå»ºè®®\n    if (this.healthStatus.recommendations.length > 0) {\n      console.log('\\nğŸ’¡ å»ºè®®ä¼˜å…ˆå¤„ç†:');\n      this.healthStatus.recommendations.forEach((rec, index) => {\n        console.log(`${index + 1}. ${rec}`);\n      });\n    }\n\n    // æ˜¾ç¤ºè¯¦ç»†æŠ¥å‘Šæç¤º\n    console.log('\\nğŸ“Š æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š: pnpm report');\n    console.log('ğŸš€ æ£€æŸ¥éƒ¨ç½²å°±ç»ª: pnpm ready');\n  }\n\n  /**\n   * æ‰§è¡Œå¥åº·æ£€æŸ¥\n   */\n  async checkHealth() {\n    console.log('ğŸ¯ é¡¹ç›®å¥åº·å¿«é€Ÿæ£€æŸ¥');\n    console.log('='.repeat(30));\n\n    const success = await this.runComplexChecks();\n    this.displaySimpleHealth();\n\n    // è¿”å›ç®€å•çš„é€€å‡ºç \n    const isHealthy =\n      this.healthStatus.overall === 'excellent' ||\n      this.healthStatus.overall === 'good';\n\n    return isHealthy;\n  }\n}\n\n// å‘½ä»¤è¡Œæ¥å£\nif (require.main === module) {\n  const checker = new ProjectHealthChecker();\n  checker\n    .checkHealth()\n    .then((healthy) => {\n      process.exit(healthy ? 0 : 1);\n    })\n    .catch((error) => {\n      console.error(`âŒ å¥åº·æ£€æŸ¥å¤±è´¥: ${error.message}`);\n      process.exit(1);\n    });\n}\n\nmodule.exports = ProjectHealthChecker;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/quality-gate.js","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'checkCoverage' has no 'await' expression.","line":161,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":161,"endColumn":22,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3606,3612],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":197,"column":27,"nodeType":"MemberExpression","endLine":197,"endColumn":55},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":198,"column":29,"nodeType":"MemberExpression","endLine":198,"endColumn":47},{"ruleId":"require-await","severity":1,"message":"Async method 'checkPerformance' has no 'await' expression.","line":229,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":229,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5339,5345],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runTypeCheck' has no 'await' expression.","line":333,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":333,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8094,8100],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runESLintCheck' has no 'await' expression.","line":345,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":345,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8362,8368],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":355,"column":30,"nodeType":"CallExpression","messageId":"missingRadix","endLine":355,"endColumn":53,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[8768,8768],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":356,"column":34,"nodeType":"CallExpression","messageId":"missingRadix","endLine":356,"endColumn":59,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[8832,8832],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'runSecurityAudit' has no 'await' expression.","line":366,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":366,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8927,8933],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"complexity","severity":1,"message":"Async method 'runSecurityAudit' has a complexity of 23. Maximum allowed is 18.","line":366,"column":25,"nodeType":"FunctionExpression","messageId":"complex","endLine":405,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":393,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":393,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":393,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":393,"endColumn":26},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":412,"column":7,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":425,"endColumn":8},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":459,"column":5,"nodeType":"CallExpression","endLine":459,"endColumn":64},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":460,"column":5,"nodeType":"CallExpression","endLine":471,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * è´¨é‡é—¨ç¦ç³»ç»Ÿ\n *\n * åœ¨CI/CDæµç¨‹ä¸­æ‰§è¡Œè´¨é‡æ£€æŸ¥ï¼Œç¡®ä¿ä»£ç è´¨é‡æ ‡å‡†\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\nclass QualityGate {\n  constructor() {\n    this.config = {\n      // è´¨é‡é—¨ç¦æ ‡å‡†\n      gates: {\n        coverage: {\n          enabled: true,\n          thresholds: {\n            lines: 85,\n            functions: 85,\n            branches: 80,\n            statements: 85,\n          },\n          blocking: true, // æ˜¯å¦é˜»å¡æ„å»º\n        },\n        codeQuality: {\n          enabled: true,\n          thresholds: {\n            eslintErrors: 0,\n            eslintWarnings: 10,\n            typeErrors: 0,\n          },\n          blocking: true,\n        },\n        performance: {\n          enabled: true,\n          thresholds: {\n            buildTime: 120000, // 2åˆ†é’Ÿ\n            testTime: 180000, // 3åˆ†é’Ÿ\n          },\n          blocking: false, // æ€§èƒ½é—®é¢˜ä¸é˜»å¡ï¼Œä½†ä¼šè­¦å‘Š\n        },\n        security: {\n          enabled: true,\n          thresholds: {\n            vulnerabilities: 0,\n            highSeverity: 0,\n          },\n          blocking: true,\n        },\n      },\n      // ç¯å¢ƒé…ç½®\n      environment: process.env.NODE_ENV || 'development',\n      ciMode: process.env.CI === 'true',\n      branch: process.env.GITHUB_REF_NAME || 'unknown',\n    };\n\n    this.results = {\n      gates: {},\n      summary: {\n        passed: 0,\n        failed: 0,\n        warnings: 0,\n        blocked: false,\n      },\n    };\n  }\n\n  /**\n   * æ‰§è¡Œæ‰€æœ‰è´¨é‡é—¨ç¦æ£€æŸ¥\n   */\n  async executeQualityGates() {\n    console.log('ğŸšª å¼€å§‹æ‰§è¡Œè´¨é‡é—¨ç¦æ£€æŸ¥...\\n');\n    console.log(`ğŸŒ¿ åˆ†æ”¯: ${this.config.branch}`);\n    console.log(`ğŸ—ï¸  ç¯å¢ƒ: ${this.config.environment}`);\n    console.log(`ğŸ¤– CIæ¨¡å¼: ${this.config.ciMode ? 'æ˜¯' : 'å¦'}\\n`);\n\n    // æ‰§è¡Œå„é¡¹é—¨ç¦æ£€æŸ¥\n    if (this.config.gates.codeQuality.enabled) {\n      this.results.gates.codeQuality = await this.checkCodeQuality();\n    }\n\n    if (this.config.gates.coverage.enabled) {\n      this.results.gates.coverage = await this.checkCoverage();\n    }\n\n    if (this.config.gates.performance.enabled) {\n      this.results.gates.performance = await this.checkPerformance();\n    }\n\n    if (this.config.gates.security.enabled) {\n      this.results.gates.security = await this.checkSecurity();\n    }\n\n    // æ±‡æ€»ç»“æœ\n    this.summarizeResults();\n\n    // ç”ŸæˆæŠ¥å‘Š\n    this.generateGateReport();\n\n    // è¿”å›ç»“æœ\n    return this.results;\n  }\n\n  /**\n   * ä»£ç è´¨é‡é—¨ç¦æ£€æŸ¥\n   */\n  async checkCodeQuality() {\n    console.log('ğŸ” æ‰§è¡Œä»£ç è´¨é‡é—¨ç¦æ£€æŸ¥...');\n\n    const gate = {\n      name: 'Code Quality',\n      status: 'unknown',\n      checks: {},\n      blocking: this.config.gates.codeQuality.blocking,\n      issues: [],\n    };\n\n    try {\n      // TypeScript ç±»å‹æ£€æŸ¥\n      gate.checks.typeCheck = await this.runTypeCheck();\n\n      // ESLint æ£€æŸ¥\n      gate.checks.eslint = await this.runESLintCheck();\n\n      // æ±‡æ€»ä»£ç è´¨é‡ç»“æœ\n      const hasErrors =\n        gate.checks.typeCheck.errors > 0 ||\n        gate.checks.eslint.errors >\n          this.config.gates.codeQuality.thresholds.eslintErrors;\n\n      const hasWarnings =\n        gate.checks.eslint.warnings >\n        this.config.gates.codeQuality.thresholds.eslintWarnings;\n\n      if (hasErrors) {\n        gate.status = 'failed';\n        gate.issues.push('ä»£ç è´¨é‡æ£€æŸ¥å‘ç°é”™è¯¯');\n      } else if (hasWarnings) {\n        gate.status = 'warning';\n        gate.issues.push('ä»£ç è´¨é‡æ£€æŸ¥å‘ç°è­¦å‘Š');\n      } else {\n        gate.status = 'passed';\n      }\n    } catch (error) {\n      gate.status = 'error';\n      gate.issues.push(`ä»£ç è´¨é‡æ£€æŸ¥å¤±è´¥: ${error.message}`);\n    }\n\n    console.log(\n      `${this.getStatusEmoji(gate.status)} ä»£ç è´¨é‡é—¨ç¦: ${gate.status}`,\n    );\n    return gate;\n  }\n\n  /**\n   * è¦†ç›–ç‡é—¨ç¦æ£€æŸ¥\n   */\n  async checkCoverage() {\n    console.log('ğŸ“Š æ‰§è¡Œè¦†ç›–ç‡é—¨ç¦æ£€æŸ¥...');\n\n    const gate = {\n      name: 'Coverage',\n      status: 'unknown',\n      checks: {},\n      blocking: this.config.gates.coverage.blocking,\n      issues: [],\n    };\n\n    try {\n      // è¿è¡Œè¦†ç›–ç‡æµ‹è¯•\n      console.log('ğŸ§ª è¿è¡Œæµ‹è¯•ä»¥ç”Ÿæˆè¦†ç›–ç‡...');\n      execSync('pnpm test:coverage --run --reporter=json', {\n        stdio: 'pipe',\n        timeout: 180000,\n      });\n\n      // è¯»å–è¦†ç›–ç‡æ•°æ®\n      const coverageJsonPath = path.join(\n        process.cwd(),\n        'coverage',\n        'coverage-summary.json',\n      );\n\n      if (fs.existsSync(coverageJsonPath)) {\n        const rawData = fs.readFileSync(coverageJsonPath, 'utf8');\n        const coverageData = JSON.parse(rawData);\n        gate.checks.coverage = coverageData.total;\n\n        // æ£€æŸ¥è¦†ç›–ç‡é˜ˆå€¼\n        const {thresholds} = this.config.gates.coverage;\n        const failedMetrics = [];\n\n        Object.keys(thresholds).forEach((metric) => {\n          const current = gate.checks.coverage[metric]?.pct || 0;\n          const threshold = thresholds[metric];\n\n          if (current < threshold) {\n            failedMetrics.push(`${metric}: ${current}% < ${threshold}%`);\n          }\n        });\n\n        if (failedMetrics.length > 0) {\n          gate.status = 'failed';\n          gate.issues.push(`è¦†ç›–ç‡ä¸è¾¾æ ‡: ${failedMetrics.join(', ')}`);\n        } else {\n          gate.status = 'passed';\n        }\n      } else {\n        gate.status = 'error';\n        gate.issues.push('è¦†ç›–ç‡æŠ¥å‘Šæ–‡ä»¶ä¸å­˜åœ¨');\n      }\n    } catch (error) {\n      gate.status = 'error';\n      gate.issues.push(`è¦†ç›–ç‡æ£€æŸ¥å¤±è´¥: ${error.message}`);\n    }\n\n    console.log(\n      `${this.getStatusEmoji(gate.status)} è¦†ç›–ç‡é—¨ç¦: ${gate.status}`,\n    );\n    return gate;\n  }\n\n  /**\n   * æ€§èƒ½é—¨ç¦æ£€æŸ¥\n   */\n  async checkPerformance() {\n    console.log('âš¡ æ‰§è¡Œæ€§èƒ½é—¨ç¦æ£€æŸ¥...');\n\n    const gate = {\n      name: 'Performance',\n      status: 'unknown',\n      checks: {},\n      blocking: this.config.gates.performance.blocking,\n      issues: [],\n    };\n\n    try {\n      // æ„å»ºæ€§èƒ½æ£€æŸ¥\n      const buildStart = Date.now();\n      execSync('pnpm build', { stdio: 'pipe', timeout: 180000 });\n      const buildTime = Date.now() - buildStart;\n\n      gate.checks.buildTime = buildTime;\n\n      // æµ‹è¯•æ€§èƒ½æ£€æŸ¥\n      const testStart = Date.now();\n      execSync('pnpm test --run --reporter=json', {\n        stdio: 'pipe',\n        timeout: 240000,\n      });\n      const testTime = Date.now() - testStart;\n\n      gate.checks.testTime = testTime;\n\n      // æ£€æŸ¥æ€§èƒ½é˜ˆå€¼\n      const issues = [];\n      if (buildTime > this.config.gates.performance.thresholds.buildTime) {\n        issues.push(\n          `æ„å»ºæ—¶é—´ ${Math.round(buildTime / 1000)}s è¶…è¿‡é˜ˆå€¼ ${Math.round(this.config.gates.performance.thresholds.buildTime / 1000)}s`,\n        );\n      }\n\n      if (testTime > this.config.gates.performance.thresholds.testTime) {\n        issues.push(\n          `æµ‹è¯•æ—¶é—´ ${Math.round(testTime / 1000)}s è¶…è¿‡é˜ˆå€¼ ${Math.round(this.config.gates.performance.thresholds.testTime / 1000)}s`,\n        );\n      }\n\n      if (issues.length > 0) {\n        gate.status = gate.blocking ? 'failed' : 'warning';\n        gate.issues.push(...issues);\n      } else {\n        gate.status = 'passed';\n      }\n    } catch (error) {\n      gate.status = 'error';\n      gate.issues.push(`æ€§èƒ½æ£€æŸ¥å¤±è´¥: ${error.message}`);\n    }\n\n    console.log(`${this.getStatusEmoji(gate.status)} æ€§èƒ½é—¨ç¦: ${gate.status}`);\n    return gate;\n  }\n\n  /**\n   * å®‰å…¨é—¨ç¦æ£€æŸ¥\n   */\n  async checkSecurity() {\n    console.log('ğŸ”’ æ‰§è¡Œå®‰å…¨é—¨ç¦æ£€æŸ¥...');\n\n    const gate = {\n      name: 'Security',\n      status: 'unknown',\n      checks: {},\n      blocking: this.config.gates.security.blocking,\n      issues: [],\n    };\n\n    try {\n      // npm audit æ£€æŸ¥\n      gate.checks.audit = await this.runSecurityAudit();\n\n      // æ£€æŸ¥å®‰å…¨é˜ˆå€¼\n      const vulnerabilities = gate.checks.audit.vulnerabilities || 0;\n      const highSeverity = gate.checks.audit.high || 0;\n\n      if (\n        vulnerabilities >\n          this.config.gates.security.thresholds.vulnerabilities ||\n        highSeverity > this.config.gates.security.thresholds.highSeverity\n      ) {\n        gate.status = 'failed';\n        gate.issues.push(\n          `å‘ç° ${vulnerabilities} ä¸ªå®‰å…¨æ¼æ´ï¼Œå…¶ä¸­ ${highSeverity} ä¸ªé«˜å±`,\n        );\n      } else {\n        gate.status = 'passed';\n      }\n    } catch (error) {\n      gate.status = 'warning'; // å®‰å…¨æ£€æŸ¥å¤±è´¥ä¸é˜»å¡ï¼Œä½†å‘å‡ºè­¦å‘Š\n      gate.issues.push(`å®‰å…¨æ£€æŸ¥å¤±è´¥: ${error.message}`);\n    }\n\n    console.log(`${this.getStatusEmoji(gate.status)} å®‰å…¨é—¨ç¦: ${gate.status}`);\n    return gate;\n  }\n\n  /**\n   * è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥\n   */\n  async runTypeCheck() {\n    try {\n      execSync('pnpm type-check', { stdio: 'pipe' });\n      return { errors: 0, status: 'passed' };\n    } catch (error) {\n      return { errors: 1, status: 'failed', message: error.message };\n    }\n  }\n\n  /**\n   * è¿è¡Œ ESLint æ£€æŸ¥\n   */\n  async runESLintCheck() {\n    try {\n      execSync('pnpm lint:check', { stdio: 'pipe' });\n      return { errors: 0, warnings: 0, status: 'passed' };\n    } catch (error) {\n      const output = error.stdout || error.stderr || '';\n      const errorMatch = output.match(/(\\d+) error/);\n      const warningMatch = output.match(/(\\d+) warning/);\n\n      return {\n        errors: errorMatch ? parseInt(errorMatch[1]) : 0,\n        warnings: warningMatch ? parseInt(warningMatch[1]) : 0,\n        status: 'failed',\n        output,\n      };\n    }\n  }\n\n  /**\n   * è¿è¡Œå®‰å…¨å®¡è®¡\n   */\n  async runSecurityAudit() {\n    try {\n      const output = execSync('pnpm audit --json', {\n        encoding: 'utf8',\n        stdio: 'pipe',\n      });\n      const auditData = JSON.parse(output);\n\n      return {\n        vulnerabilities: auditData.metadata?.vulnerabilities?.total || 0,\n        high: auditData.metadata?.vulnerabilities?.high || 0,\n        critical: auditData.metadata?.vulnerabilities?.critical || 0,\n        status: 'completed',\n      };\n    } catch (error) {\n      // npm audit åœ¨å‘ç°æ¼æ´æ—¶ä¼šè¿”å›éé›¶é€€å‡ºç \n      try {\n        const output = error.stdout || '';\n        if (output) {\n          const auditData = JSON.parse(output);\n          return {\n            vulnerabilities: auditData.metadata?.vulnerabilities?.total || 0,\n            high: auditData.metadata?.vulnerabilities?.high || 0,\n            critical: auditData.metadata?.vulnerabilities?.critical || 0,\n            status: 'completed',\n          };\n        }\n      } catch (parseError) {\n        // è§£æå¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼\n      }\n\n      return {\n        vulnerabilities: 0,\n        high: 0,\n        critical: 0,\n        status: 'failed',\n        error: error.message,\n      };\n    }\n  }\n\n  /**\n   * æ±‡æ€»ç»“æœ\n   */\n  summarizeResults() {\n    Object.values(this.results.gates).forEach((gate) => {\n      switch (gate.status) {\n        case 'passed':\n          this.results.summary.passed++;\n          break;\n        case 'failed':\n          this.results.summary.failed++;\n          if (gate.blocking) {\n            this.results.summary.blocked = true;\n          }\n          break;\n        case 'warning':\n          this.results.summary.warnings++;\n          break;\n      }\n    });\n  }\n\n  /**\n   * ç”Ÿæˆé—¨ç¦æŠ¥å‘Š\n   */\n  generateGateReport() {\n    console.log('\\nğŸšª è´¨é‡é—¨ç¦æ£€æŸ¥æŠ¥å‘Š');\n    console.log('='.repeat(50));\n\n    console.log(`âœ… é€šè¿‡: ${this.results.summary.passed}`);\n    console.log(`âŒ å¤±è´¥: ${this.results.summary.failed}`);\n    console.log(`âš ï¸  è­¦å‘Š: ${this.results.summary.warnings}`);\n    console.log(`ğŸš« é˜»å¡æ„å»º: ${this.results.summary.blocked ? 'æ˜¯' : 'å¦'}`);\n\n    console.log('\\nğŸ“‹ è¯¦ç»†ç»“æœ:');\n    Object.values(this.results.gates).forEach((gate) => {\n      console.log(\n        `${this.getStatusEmoji(gate.status)} ${gate.name}: ${gate.status}`,\n      );\n      if (gate.issues.length > 0) {\n        gate.issues.forEach((issue) => {\n          console.log(`   - ${issue}`);\n        });\n      }\n    });\n\n    // ä¿å­˜æŠ¥å‘Š\n    const reportPath = path.join(\n      process.cwd(),\n      'reports',\n      `quality-gate-${Date.now()}.json`,\n    );\n    fs.mkdirSync(path.dirname(reportPath), { recursive: true });\n    fs.writeFileSync(\n      reportPath,\n      JSON.stringify(\n        {\n          timestamp: new Date().toISOString(),\n          config: this.config,\n          results: this.results,\n        },\n        null,\n        2,\n      ),\n    );\n\n    console.log(`\\nğŸ’¾ æŠ¥å‘Šå·²ä¿å­˜: ${reportPath}`);\n\n    // CI ç¯å¢ƒä¸‹çš„ç‰¹æ®Šå¤„ç†\n    if (this.config.ciMode) {\n      this.handleCIOutput();\n    }\n  }\n\n  /**\n   * å¤„ç† CI ç¯å¢ƒè¾“å‡º\n   */\n  handleCIOutput() {\n    // GitHub Actions æ³¨è§£\n    if (process.env.GITHUB_ACTIONS) {\n      Object.values(this.results.gates).forEach((gate) => {\n        if (gate.status === 'failed' && gate.blocking) {\n          console.log(\n            `::error::è´¨é‡é—¨ç¦å¤±è´¥: ${gate.name} - ${gate.issues.join(', ')}`,\n          );\n        } else if (gate.status === 'warning') {\n          console.log(\n            `::warning::è´¨é‡é—¨ç¦è­¦å‘Š: ${gate.name} - ${gate.issues.join(', ')}`,\n          );\n        }\n      });\n    }\n\n    // è®¾ç½®è¾“å‡ºå˜é‡\n    console.log(\n      `::set-output name=quality-gate-passed::${!this.results.summary.blocked}`,\n    );\n    console.log(\n      `::set-output name=quality-gate-score::${this.calculateQualityScore()}`,\n    );\n  }\n\n  /**\n   * è®¡ç®—è´¨é‡è¯„åˆ†\n   */\n  calculateQualityScore() {\n    const totalGates = Object.keys(this.results.gates).length;\n    if (totalGates === 0) return 0;\n\n    const score = (this.results.summary.passed / totalGates) * 100;\n    return Math.round(score);\n  }\n\n  getStatusEmoji(status) {\n    switch (status) {\n      case 'passed':\n        return 'âœ…';\n      case 'failed':\n        return 'âŒ';\n      case 'warning':\n        return 'âš ï¸';\n      case 'error':\n        return 'ğŸ’¥';\n      default:\n        return 'â“';\n    }\n  }\n}\n\n// ä¸»æ‰§è¡Œå‡½æ•°\nasync function main() {\n  const gate = new QualityGate();\n\n  try {\n    const results = await gate.executeQualityGates();\n\n    if (results.summary.blocked) {\n      console.log('\\nğŸš« è´¨é‡é—¨ç¦æ£€æŸ¥å¤±è´¥ï¼Œæ„å»ºè¢«é˜»å¡ï¼');\n      process.exit(1);\n    } else if (results.summary.failed > 0 || results.summary.warnings > 0) {\n      console.log('\\nâš ï¸  è´¨é‡é—¨ç¦æ£€æŸ¥å‘ç°é—®é¢˜ï¼Œä½†ä¸é˜»å¡æ„å»º');\n      console.log('è¯·åŠæ—¶ä¿®å¤ç›¸å…³é—®é¢˜ä»¥æé«˜ä»£ç è´¨é‡');\n    } else {\n      console.log('\\nğŸ‰ æ‰€æœ‰è´¨é‡é—¨ç¦æ£€æŸ¥é€šè¿‡ï¼');\n    }\n  } catch (error) {\n    console.error('âŒ è´¨é‡é—¨ç¦æ£€æŸ¥å¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { QualityGate };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/quality-monitor.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":41,"column":10,"nodeType":"CallExpression","endLine":41,"endColumn":39},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":42,"column":7,"nodeType":"CallExpression","endLine":42,"endColumn":56},{"ruleId":"require-await","severity":1,"message":"Async method 'collectQualityMetrics' has no 'await' expression.","line":49,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":49,"endColumn":30,"suggestions":[{"messageId":"removeAsync","fix":{"range":[912,918],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":122,"column":14,"nodeType":"MemberExpression","endLine":122,"endColumn":44},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":123,"column":11,"nodeType":"MemberExpression","endLine":123,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":128,"column":9,"nodeType":"MemberExpression","endLine":128,"endColumn":39},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":159,"column":38,"nodeType":"MemberExpression","endLine":159,"endColumn":66},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":177,"column":5,"nodeType":"CallExpression","endLine":177,"endColumn":67},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":201,"column":5,"nodeType":"CallExpression","endLine":201,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ä¼ä¸šçº§ä»£ç è´¨é‡ç›‘æ§å·¥å…·\n *\n * åŠŸèƒ½ï¼š\n * - å®æ—¶ç›‘æ§ESLinté”™è¯¯å’Œè­¦å‘Šæ•°é‡\n * - ç”Ÿæˆè´¨é‡æŒ‡æ ‡æŠ¥å‘Š\n * - è®¾ç½®è´¨é‡é—¨ç¦é˜ˆå€¼\n * - é›†æˆCI/CDè´¨é‡æ£€æŸ¥\n */\n\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\n// è´¨é‡æŒ‡æ ‡é˜ˆå€¼é…ç½®\nconst QUALITY_THRESHOLDS = {\n  // é”™è¯¯æ•°é‡é˜ˆå€¼\n  maxErrors: 0, // ä¼ä¸šçº§æ ‡å‡†ï¼šé›¶é”™è¯¯å®¹å¿\n  maxWarnings: 500, // å½“å‰ç›®æ ‡ï¼š500ä¸ªè­¦å‘Šä»¥ä¸‹\n\n  // ç‰¹å®šè§„åˆ™é˜ˆå€¼\n  maxAnyTypeUsage: 0, // ä¸¥æ ¼ç¦æ­¢anyç±»å‹\n  maxComplexityViolations: 10, // å¤æ‚åº¦è¿è§„æœ€å¤š10ä¸ª\n  maxFunctionLengthViolations: 20, // å‡½æ•°é•¿åº¦è¿è§„æœ€å¤š20ä¸ª\n  maxSecurityWarnings: 30, // å®‰å…¨è­¦å‘Šæœ€å¤š30ä¸ª\n\n  // è´¨é‡è¶‹åŠ¿é˜ˆå€¼\n  maxQualityRegression: 50, // è´¨é‡å›é€€æœ€å¤š50ä¸ªé—®é¢˜\n};\n\n// è´¨é‡æŒ‡æ ‡æ”¶é›†å™¨\nclass QualityMonitor {\n  constructor() {\n    this.reportDir = path.join(process.cwd(), 'reports', 'quality');\n    this.ensureReportDir();\n  }\n\n  ensureReportDir() {\n    if (!fs.existsSync(this.reportDir)) {\n      fs.mkdirSync(this.reportDir, { recursive: true });\n    }\n  }\n\n  /**\n   * è¿è¡ŒESLintå¹¶æ”¶é›†è´¨é‡æŒ‡æ ‡\n   */\n  async collectQualityMetrics() {\n    console.log('ğŸ” æ”¶é›†ä»£ç è´¨é‡æŒ‡æ ‡...');\n\n    try {\n      // ç›´æ¥è¿è¡ŒESLintå‘½ä»¤ï¼Œé¿å…pnpmè¾“å‡ºå¹²æ‰°\n      // å¤ç”¨é¡¹ç›®è„šæœ¬ï¼Œç¡®ä¿ä¸ lint:check å®Œå…¨ä¸€è‡´ï¼ˆå¹¶å¼€å¯ç¼“å­˜ï¼‰ï¼Œä»…è¦†ç›–è¾“å‡ºæ ¼å¼ä¸º JSON\n      const lintOutput = execSync('pnpm run -s lint:check -- --format json', {\n        encoding: 'utf8',\n        maxBuffer: 10 * 1024 * 1024, // 10MB buffer\n        stdio: ['pipe', 'pipe', 'pipe'], // ç¡®ä¿åªè·å–stdout\n      });\n\n      const lintResults = JSON.parse(lintOutput);\n      return this.analyzeLintResults(lintResults);\n    } catch (error) {\n      // ESLintæœ‰é”™è¯¯æ—¶ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æˆ‘ä»¬ä»éœ€è¦è§£æç»“æœ\n      if (error.stdout) {\n        try {\n          // æ¸…ç†è¾“å‡ºï¼Œç§»é™¤éJSONå†…å®¹\n          const cleanOutput = error.stdout.trim();\n          const jsonStart = cleanOutput.indexOf('[');\n          const jsonEnd = cleanOutput.lastIndexOf(']') + 1;\n\n          if (jsonStart >= 0 && jsonEnd > jsonStart) {\n            const jsonOutput = cleanOutput.substring(jsonStart, jsonEnd);\n            const lintResults = JSON.parse(jsonOutput);\n            return this.analyzeLintResults(lintResults);\n          } \n            console.error('âŒ æœªæ‰¾åˆ°æœ‰æ•ˆçš„JSONè¾“å‡º');\n            throw new Error('ESLintè¾“å‡ºæ ¼å¼æ— æ•ˆ');\n          \n        } catch (parseError) {\n          console.error('âŒ è§£æESLintè¾“å‡ºå¤±è´¥:', parseError.message);\n          console.error('åŸå§‹è¾“å‡º:', error.stdout.substring(0, 500));\n          throw parseError;\n        }\n      }\n\n      // å¦‚æœæ²¡æœ‰stdoutï¼Œå¯èƒ½æ˜¯ä¸¥é‡é”™è¯¯\n      console.error('âŒ ESLintæ‰§è¡Œå¤±è´¥:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * åˆ†æESLintç»“æœ\n   */\n  analyzeLintResults(lintResults) {\n    const metrics = {\n      timestamp: new Date().toISOString(),\n      totalFiles: lintResults.length,\n      totalErrors: 0,\n      totalWarnings: 0,\n      ruleViolations: {},\n      fileMetrics: [],\n      qualityScore: 0,\n    };\n\n    // åˆ†ææ¯ä¸ªæ–‡ä»¶çš„ç»“æœ\n    lintResults.forEach((fileResult) => {\n      const fileMetric = {\n        filePath: fileResult.filePath,\n        errorCount: fileResult.errorCount,\n        warningCount: fileResult.warningCount,\n        messages: fileResult.messages,\n      };\n\n      metrics.totalErrors += fileResult.errorCount;\n      metrics.totalWarnings += fileResult.warningCount;\n\n      // ç»Ÿè®¡è§„åˆ™è¿è§„æƒ…å†µ\n      fileResult.messages.forEach((message) => {\n        const ruleId = message.ruleId || 'unknown';\n        if (!metrics.ruleViolations[ruleId]) {\n          metrics.ruleViolations[ruleId] = {\n            count: 0,\n            severity: message.severity === 2 ? 'error' : 'warning',\n          };\n        }\n        metrics.ruleViolations[ruleId].count++;\n      });\n\n      metrics.fileMetrics.push(fileMetric);\n    });\n\n    // è®¡ç®—è´¨é‡åˆ†æ•° (0-100)\n    metrics.qualityScore = this.calculateQualityScore(metrics);\n\n    return metrics;\n  }\n\n  /**\n   * è®¡ç®—è´¨é‡åˆ†æ•°\n   */\n  calculateQualityScore(metrics) {\n    const baseScore = 100;\n\n    // é”™è¯¯æ‰£åˆ†ï¼šæ¯ä¸ªé”™è¯¯æ‰£5åˆ†\n    const errorPenalty = metrics.totalErrors * 5;\n\n    // è­¦å‘Šæ‰£åˆ†ï¼šæ¯ä¸ªè­¦å‘Šæ‰£0.1åˆ†\n    const warningPenalty = metrics.totalWarnings * 0.1;\n\n    // ç‰¹å®šè§„åˆ™é¢å¤–æ‰£åˆ†\n    const anyTypePenalty =\n      (metrics.ruleViolations['@typescript-eslint/no-explicit-any']?.count ||\n        0) * 2;\n    const securityPenalty =\n      Object.keys(metrics.ruleViolations)\n        .filter((rule) => rule.startsWith('security/'))\n        .reduce((sum, rule) => sum + metrics.ruleViolations[rule].count, 0) * 1;\n\n    const totalPenalty =\n      errorPenalty + warningPenalty + anyTypePenalty + securityPenalty;\n\n    return Math.max(0, Math.round(baseScore - totalPenalty));\n  }\n\n  /**\n   * ç”Ÿæˆè´¨é‡æŠ¥å‘Š\n   */\n  generateQualityReport(metrics) {\n    const reportPath = path.join(\n      this.reportDir,\n      `quality-report-${Date.now()}.json`,\n    );\n\n    // ä¿å­˜è¯¦ç»†æŠ¥å‘Š\n    fs.writeFileSync(reportPath, JSON.stringify(metrics, null, 2));\n\n    // ç”Ÿæˆæ‘˜è¦æŠ¥å‘Š\n    const summary = {\n      timestamp: metrics.timestamp,\n      qualityScore: metrics.qualityScore,\n      totalErrors: metrics.totalErrors,\n      totalWarnings: metrics.totalWarnings,\n      totalFiles: metrics.totalFiles,\n      topViolations: Object.entries(metrics.ruleViolations)\n        .sort(([, a], [, b]) => b.count - a.count)\n        .slice(0, 10)\n        .map(([rule, data]) => ({\n          rule,\n          count: data.count,\n          severity: data.severity,\n        })),\n      thresholdStatus: this.checkThresholds(metrics),\n    };\n\n    const summaryPath = path.join(\n      this.reportDir,\n      'latest-quality-summary.json',\n    );\n    fs.writeFileSync(summaryPath, JSON.stringify(summary, null, 2));\n\n    return { reportPath, summaryPath, summary };\n  }\n\n  /**\n   * æ£€æŸ¥è´¨é‡é—¨ç¦é˜ˆå€¼\n   */\n  checkThresholds(metrics) {\n    const status = {\n      passed: true,\n      violations: [],\n    };\n\n    // æ£€æŸ¥é”™è¯¯æ•°é‡\n    if (metrics.totalErrors > QUALITY_THRESHOLDS.maxErrors) {\n      status.passed = false;\n      status.violations.push({\n        type: 'errors',\n        current: metrics.totalErrors,\n        threshold: QUALITY_THRESHOLDS.maxErrors,\n        message: `é”™è¯¯æ•°é‡è¶…è¿‡é˜ˆå€¼: ${metrics.totalErrors} > ${QUALITY_THRESHOLDS.maxErrors}`,\n      });\n    }\n\n    // æ£€æŸ¥è­¦å‘Šæ•°é‡\n    if (metrics.totalWarnings > QUALITY_THRESHOLDS.maxWarnings) {\n      status.passed = false;\n      status.violations.push({\n        type: 'warnings',\n        current: metrics.totalWarnings,\n        threshold: QUALITY_THRESHOLDS.maxWarnings,\n        message: `è­¦å‘Šæ•°é‡è¶…è¿‡é˜ˆå€¼: ${metrics.totalWarnings} > ${QUALITY_THRESHOLDS.maxWarnings}`,\n      });\n    }\n\n    // æ£€æŸ¥anyç±»å‹ä½¿ç”¨\n    const anyTypeCount =\n      metrics.ruleViolations['@typescript-eslint/no-explicit-any']?.count || 0;\n    if (anyTypeCount > QUALITY_THRESHOLDS.maxAnyTypeUsage) {\n      status.passed = false;\n      status.violations.push({\n        type: 'any-type',\n        current: anyTypeCount,\n        threshold: QUALITY_THRESHOLDS.maxAnyTypeUsage,\n        message: `anyç±»å‹ä½¿ç”¨è¶…è¿‡é˜ˆå€¼: ${anyTypeCount} > ${QUALITY_THRESHOLDS.maxAnyTypeUsage}`,\n      });\n    }\n\n    return status;\n  }\n\n  /**\n   * æ‰“å°è´¨é‡æŠ¥å‘Šæ‘˜è¦\n   */\n  printQualitySummary(summary) {\n    console.log('\\nğŸ“Š ä»£ç è´¨é‡æŠ¥å‘Šæ‘˜è¦');\n    console.log('='.repeat(50));\n    console.log(`ğŸ¯ è´¨é‡åˆ†æ•°: ${summary.qualityScore}/100`);\n    console.log(`ğŸ“ æ£€æŸ¥æ–‡ä»¶: ${summary.totalFiles} ä¸ª`);\n    console.log(`âŒ é”™è¯¯æ•°é‡: ${summary.totalErrors} ä¸ª`);\n    console.log(`âš ï¸  è­¦å‘Šæ•°é‡: ${summary.totalWarnings} ä¸ª`);\n\n    console.log('\\nğŸ” ä¸»è¦é—®é¢˜ç±»å‹:');\n    summary.topViolations.slice(0, 5).forEach((violation, index) => {\n      const icon = violation.severity === 'error' ? 'âŒ' : 'âš ï¸';\n      console.log(\n        `  ${index + 1}. ${icon} ${violation.rule}: ${violation.count} ä¸ª`,\n      );\n    });\n\n    console.log('\\nğŸšª è´¨é‡é—¨ç¦çŠ¶æ€:');\n    if (summary.thresholdStatus.passed) {\n      console.log('âœ… é€šè¿‡ - æ‰€æœ‰è´¨é‡æŒ‡æ ‡ç¬¦åˆä¼ä¸šçº§æ ‡å‡†');\n    } else {\n      console.log('âŒ æœªé€šè¿‡ - å‘ç°ä»¥ä¸‹é—®é¢˜:');\n      summary.thresholdStatus.violations.forEach((violation) => {\n        console.log(`  â€¢ ${violation.message}`);\n      });\n    }\n\n    console.log('='.repeat(50));\n  }\n\n  /**\n   * ä¸»æ‰§è¡Œå‡½æ•°\n   */\n  async run() {\n    try {\n      console.log('ğŸš€ å¯åŠ¨ä¼ä¸šçº§ä»£ç è´¨é‡ç›‘æ§...\\n');\n\n      const metrics = await this.collectQualityMetrics();\n      const { summaryPath, summary } = this.generateQualityReport(metrics);\n\n      this.printQualitySummary(summary);\n\n      console.log(`\\nğŸ“„ è¯¦ç»†æŠ¥å‘Šå·²ä¿å­˜è‡³: ${summaryPath}`);\n\n      // å¦‚æœè´¨é‡é—¨ç¦æœªé€šè¿‡ï¼Œé€€å‡ºç ä¸º1\n      if (!summary.thresholdStatus.passed) {\n        console.log('\\nğŸ’¡ å»ºè®®ä¼˜å…ˆä¿®å¤errorçº§åˆ«é—®é¢˜ï¼Œç„¶åé€æ­¥å‡å°‘warningæ•°é‡');\n        process.exit(1);\n      }\n\n      console.log('\\nğŸ‰ ä»£ç è´¨é‡ç›‘æ§å®Œæˆï¼');\n    } catch (error) {\n      console.error('âŒ è´¨é‡ç›‘æ§æ‰§è¡Œå¤±è´¥:', error.message);\n      process.exit(1);\n    }\n  }\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬\nif (require.main === module) {\n  const monitor = new QualityMonitor();\n  monitor.run();\n}\n\nmodule.exports = QualityMonitor;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/quality-quick-staged.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/safe-magic-numbers-fix.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":24,"column":19,"nodeType":"CallExpression","endLine":24,"endColumn":52},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":43,"column":17,"nodeType":"CallExpression","endLine":43,"endColumn":50},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":69,"column":3,"nodeType":"CallExpression","endLine":69,"endColumn":38},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":98,"column":13,"nodeType":"NewExpression","endLine":98,"endColumn":76},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":101,"column":13,"nodeType":"NewExpression","endLine":101,"endColumn":48},{"ruleId":"security/detect-non-literal-regexp","severity":1,"message":"Found non-literal argument to RegExp Constructor","line":105,"column":13,"nodeType":"NewExpression","endLine":105,"endColumn":76},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":148,"column":23,"nodeType":"CallExpression","endLine":148,"endColumn":56},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":153,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":156,"endColumn":12},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":160,"column":11,"nodeType":"CallExpression","endLine":160,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":176,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":176,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":176,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'severity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":216,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":216,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"severity"},"fix":{"range":[5916,5924],"text":""},"desc":"Remove unused variable 'severity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'severity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":216,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":216,"endColumn":41},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":221,"column":15,"nodeType":"CallExpression","messageId":"missingRadix","endLine":221,"endColumn":32,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[6084,6084],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":222,"column":17,"nodeType":"CallExpression","messageId":"missingRadix","endLine":222,"endColumn":33,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[6118,6118],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":246,"column":10,"nodeType":"MemberExpression","endLine":246,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * å®‰å…¨é­”æ³•æ•°å­—ä¿®å¤å™¨ (åŸºäºCODEXå»ºè®®)\n * - ä¿®å¤åŸè„šæœ¬çš„å¯¼å…¥é€»è¾‘ç¼ºé™·\n * - æ·»åŠ é¢„æ£€æŸ¥éªŒè¯æœºåˆ¶\n * - å®æ–½åˆ†æ‰¹å¤„ç†å’Œè‡ªåŠ¨éªŒè¯\n * - é˜²æ­¢ä¸Šä¸‹æ–‡æ›¿æ¢é”™è¯¯\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// ä»magic-numbers.tsæå–æ‰€æœ‰å¯ç”¨å¸¸é‡\nfunction getAvailableConstants() {\n  const constantsFile = 'src/constants/magic-numbers.ts';\n  const content = fs.readFileSync(constantsFile, 'utf8');\n  const matches = content.match(/export const (\\w+)/g) || [];\n  return matches.map(match => match.replace('export const ', ''));\n}\n\n// è·å–ç°æœ‰å¯¼å…¥å¸¸é‡\nfunction getExistingImports(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const importMatch = content.match(/import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"]/);\n  \n  if (!importMatch) return [];\n  \n  return importMatch[1]\n    .split(',')\n    .map(item => item.trim())\n    .filter(item => item.length > 0);\n}\n\n// æ™ºèƒ½æ›´æ–°å¯¼å…¥è¯­å¥ (ä¿®å¤åŸè„šæœ¬ç¼ºé™·)\nfunction updateImports(filePath, newConstants) {\n  if (newConstants.length === 0) return false;\n  \n  const existingImports = getExistingImports(filePath);\n  // ä½¿ç”¨Setå»é‡å¹¶æŒ‰å­—æ¯é¡ºåºæ’åº (CODEXå»ºè®®)\n  const allConstants = [...new Set([...existingImports, ...newConstants])].sort();\n  \n  let content = fs.readFileSync(filePath, 'utf8');\n  \n  // ç”Ÿæˆæ–°çš„å¯¼å…¥è¯­å¥\n  const newImportStatement = `import { ${allConstants.join(', ')} } from '@/constants/magic-numbers';`;\n  \n  // ç§»é™¤æ—§çš„å¯¼å…¥\n  content = content.replace(\n    /import\\s*{\\s*[^}]+\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"];?\\n?/g,\n    ''\n  );\n  \n  // æ™ºèƒ½æ·»åŠ æ–°å¯¼å…¥ (å¤„ç†å„ç§æ–‡ä»¶å¼€å¤´æƒ…å†µ)\n  if (content.includes('import')) {\n    // åœ¨ç¬¬ä¸€ä¸ªimportè¯­å¥åæ·»åŠ \n    const firstImportMatch = content.match(/^import .+;$/m);\n    if (firstImportMatch) {\n      content = content.replace(\n        firstImportMatch[0],\n        `${firstImportMatch[0]}\\n${newImportStatement}`\n      );\n    }\n  } else {\n    // åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ  (å¤„ç†æ²¡æœ‰å…¶ä»–importçš„æƒ…å†µ)\n    content = `${newImportStatement}\\n\\n${content}`;\n  }\n  \n  fs.writeFileSync(filePath, content);\n  return true;\n}\n\n// é¢„æ£€æŸ¥éªŒè¯ (CODEXå»ºè®®)\nfunction validateConstants(errors) {\n  const availableConstants = getAvailableConstants();\n  const missingConstants = errors.filter(e => \n    !availableConstants.includes(e.constantName)\n  );\n  \n  if (missingConstants.length > 0) {\n    console.error('âŒ é¢„æ£€æŸ¥å¤±è´¥ï¼šä»¥ä¸‹å¸¸é‡æœªå®šä¹‰');\n    missingConstants.forEach(c => {\n      console.error(`  - ${c.constantName} (ç”¨äºæ•°å­— ${c.number})`);\n    });\n    throw new Error(`ç¼ºå¤±å¸¸é‡å®šä¹‰: ${missingConstants.map(c => c.constantName).join(', ')}`);\n  }\n  \n  console.log('âœ… é¢„æ£€æŸ¥é€šè¿‡ï¼šæ‰€æœ‰å¸¸é‡éƒ½å·²å®šä¹‰');\n}\n\n// å®‰å…¨çš„æ•°å­—æ›¿æ¢ (é˜²æ­¢ä¸Šä¸‹æ–‡é”™è¯¯)\nfunction safeNumberReplace(content, number, constantName) {\n  // æ„å»ºæ›´å®‰å…¨çš„æ­£åˆ™è¡¨è¾¾å¼\n  let regex;\n  \n  if (number.startsWith('-')) {\n    // è´Ÿæ•°å¤„ç†\n    regex = new RegExp(`(?<!\\\\d)${number.replace('.', '\\\\.')}(?!\\\\d)`, 'g');\n  } else if (number.startsWith('0x')) {\n    // åå…­è¿›åˆ¶å¤„ç†\n    regex = new RegExp(`\\\\b${number}\\\\b`, 'gi');\n  } else {\n    // æ™®é€šæ•°å­— - æ·»åŠ æ›´ä¸¥æ ¼çš„è¾¹ç•Œæ£€æŸ¥\n    const escapedNumber = number.replace('.', '\\\\.');\n    regex = new RegExp(`(?<![\\\\.\\\\d])\\\\b${escapedNumber}\\\\b(?![\\\\d])`, 'g');\n  }\n  \n  // æ‰§è¡Œæ›¿æ¢å¹¶è®°å½•\n  const newContent = content.replace(regex, constantName);\n  const replacements = (content.match(regex) || []).length;\n  \n  if (replacements > 0) {\n    console.log(`    æ›¿æ¢ ${number} â†’ ${constantName} (${replacements}æ¬¡)`);\n  }\n  \n  return newContent;\n}\n\n// æ‰¹å¤„ç†ä¿®å¤ (CODEXå»ºè®®)\nfunction processBatch(errors, batchSize = 5) {\n  const fileGroups = new Map();\n  \n  // æŒ‰æ–‡ä»¶åˆ†ç»„é”™è¯¯\n  for (const error of errors) {\n    if (!fileGroups.has(error.file)) {\n      fileGroups.set(error.file, []);\n    }\n    fileGroups.get(error.file).push(error);\n  }\n  \n  const files = Array.from(fileGroups.keys());\n  let processedFiles = 0;\n  \n  for (let i = 0; i < files.length; i += batchSize) {\n    const batch = files.slice(i, i + batchSize);\n    console.log(`\\nğŸ“¦ å¤„ç†æ‰¹æ¬¡ ${Math.floor(i/batchSize) + 1}/${Math.ceil(files.length/batchSize)}`);\n    \n    for (const filePath of batch) {\n      try {\n        const fileErrors = fileGroups.get(filePath);\n        console.log(`ğŸ”§ å¤„ç†æ–‡ä»¶: ${path.relative(process.cwd(), filePath)}`);\n        \n        // æ›´æ–°å¯¼å…¥\n        const constantNames = fileErrors.map(e => e.constantName);\n        updateImports(filePath, constantNames);\n        \n        // å®‰å…¨æ›¿æ¢æ•°å­—\n        let content = fs.readFileSync(filePath, 'utf8');\n        let modified = false;\n        \n        for (const error of fileErrors) {\n          const newContent = safeNumberReplace(content, error.number, error.constantName);\n          if (newContent !== content) {\n            content = newContent;\n            modified = true;\n          }\n        }\n        \n        if (modified) {\n          fs.writeFileSync(filePath, content);\n        }\n        \n        processedFiles++;\n        \n      } catch (error) {\n        console.error(`âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ ${filePath}:`, error.message);\n        throw error; // å¿«é€Ÿå¤±è´¥\n      }\n    }\n    \n    // æ‰¹æ¬¡éªŒè¯ (CODEXå»ºè®®)\n    console.log('ğŸ” éªŒè¯æ‰¹æ¬¡ç»“æœ...');\n    try {\n      execSync('pnpm run type-check', { stdio: 'pipe' });\n      console.log('âœ… æ‰¹æ¬¡éªŒè¯é€šè¿‡');\n    } catch (error) {\n      console.error('âŒ æ‰¹æ¬¡éªŒè¯å¤±è´¥ï¼Œåœæ­¢å¤„ç†');\n      throw new Error('TypeScriptç¼–è¯‘é”™è¯¯ï¼Œè¯·æ£€æŸ¥ä¿®å¤ç»“æœ');\n    }\n  }\n  \n  return processedFiles;\n}\n\n// è·å–é­”æ³•æ•°å­—é”™è¯¯\nfunction getMagicNumberErrors() {\n  let output = '';\n  try {\n    output = execSync('pnpm lint:check 2>&1', {\n      encoding: 'utf8',\n      shell: true,\n      maxBuffer: 1024 * 1024 * 10,\n    });\n  } catch (error) {\n    output = error.stdout || error.output?.join('') || '';\n  }\n  \n  const errors = [];\n  const lines = output.split('\\n');\n  let currentFile = '';\n  \n  for (const line of lines) {\n    // æ£€æŸ¥æ–‡ä»¶è·¯å¾„\n    const fileMatch = line.match(/^\\/.*\\.(ts|tsx|js|jsx)$/);\n    if (fileMatch) {\n      currentFile = line.trim();\n      continue;\n    }\n    \n    // æ£€æŸ¥é­”æ³•æ•°å­—é”™è¯¯\n    const errorMatch = line.match(\n      /^\\s*(\\d+):(\\d+)\\s+(error|warning)\\s+No magic number:\\s+([-]?(?:0x)?[0-9a-fA-F.]+)\\s+no-magic-numbers/\n    );\n    \n    if (errorMatch && currentFile) {\n      const [, lineNum, colNum, severity, number] = errorMatch;\n      const constantName = getConstantName(number);\n      \n      errors.push({\n        file: currentFile,\n        line: parseInt(lineNum),\n        column: parseInt(colNum),\n        number: number,\n        constantName: constantName\n      });\n    }\n  }\n  \n  return errors;\n}\n\n// ç”Ÿæˆå¸¸é‡å\nfunction getConstantName(number) {\n  const constantMap = {\n    '0.5': 'MAGIC_0_5',\n    '0.9': 'MAGIC_0_9', \n    '1.5': 'MAGIC_1_5',\n    '131': 'MAGIC_131',\n    '132': 'MAGIC_132',\n    '133': 'MAGIC_133',\n    '136': 'MAGIC_136',\n    '190': 'MAGIC_190',\n    '368': 'MAGIC_368'\n  };\n  \n  return constantMap[number] || `MAGIC_${number.replace(/[.-]/g, '_').replace(/^0x/, 'HEX_')}`;\n}\n\n// ä¸»å‡½æ•°\nfunction main() {\n  console.log('ğŸ” å®‰å…¨é­”æ³•æ•°å­—ä¿®å¤å™¨å¯åŠ¨...');\n  \n  const errors = getMagicNumberErrors();\n  if (errors.length === 0) {\n    console.log('âœ… æœªå‘ç°éœ€è¦ä¿®å¤çš„é­”æ³•æ•°å­—');\n    return;\n  }\n  \n  console.log(`ğŸ“Š å‘ç° ${errors.length} ä¸ªé­”æ³•æ•°å­—é”™è¯¯`);\n  \n  try {\n    // é¢„æ£€æŸ¥éªŒè¯\n    validateConstants(errors);\n    \n    // åˆ†æ‰¹å¤„ç†\n    const processedFiles = processBatch(errors, 3); // å°æ‰¹æ¬¡ï¼Œæ›´å®‰å…¨\n    \n    console.log(`\\nğŸ‰ ä¿®å¤å®Œæˆï¼å¤„ç†äº† ${processedFiles} ä¸ªæ–‡ä»¶`);\n    \n    // æœ€ç»ˆéªŒè¯\n    console.log('ğŸ” æ‰§è¡Œæœ€ç»ˆéªŒè¯...');\n    execSync('pnpm run type-check', { stdio: 'inherit' });\n    \n    const remainingErrors = getMagicNumberErrors().length;\n    console.log(`ğŸ“Š å‰©ä½™é­”æ³•æ•°å­—é”™è¯¯: ${remainingErrors} ä¸ª`);\n    \n  } catch (error) {\n    console.error('âŒ ä¿®å¤è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:', error.message);\n    console.log('\\nğŸ’¡ å»ºè®®æ£€æŸ¥æœ€è¿‘çš„ä¿®æ”¹å¹¶è¿è¡Œ pnpm run type-check');\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/security-check.js","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'runChecks' has no 'await' expression.","line":26,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":26,"endColumn":18,"suggestions":[{"messageId":"removeAsync","fix":{"range":[452,458],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":61,"column":11,"nodeType":"CallExpression","endLine":61,"endColumn":30},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":235,"column":11,"nodeType":"CallExpression","endLine":235,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Security Configuration Check Script\n *\n * This script validates the security configuration of the application\n * and provides recommendations for improvement.\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nclass SecurityChecker {\n  constructor() {\n    this.results = {\n      passed: true,\n      checks: [],\n      warnings: [],\n      recommendations: [],\n    };\n  }\n\n  /**\n   * Run all security checks\n   */\n  async runChecks() {\n    console.log('ğŸ”’ Running security configuration checks...\\n');\n\n    this.checkEnvironmentVariables();\n    this.checkSecurityHeaders();\n    this.checkCSPConfiguration();\n    this.checkDependencies();\n    this.checkFilePermissions();\n    this.checkGitIgnore();\n    this.checkTurnstileConfiguration();\n\n    this.generateReport();\n  }\n\n  /**\n   * Check environment variables configuration\n   */\n  checkEnvironmentVariables() {\n    console.log('ğŸ” Checking environment variables...');\n\n    // Check .env.example exists\n    this.addCheck(\n      'Environment template exists',\n      fs.existsSync('.env.example'),\n      '.env.example file should exist as a template',\n    );\n\n    // Check .env files are not committed\n    const envFiles = [\n      '.env',\n      '.env.local',\n      '.env.production',\n      '.env.development',\n    ];\n    envFiles.forEach((file) => {\n      if (fs.existsSync(file)) {\n        this.addWarning(\n          `${file} exists - ensure it's not committed to version control`,\n        );\n      }\n    });\n\n    // Check env.mjs exists\n    this.addCheck(\n      'Environment validation exists',\n      fs.existsSync('env.mjs'),\n      'env.mjs file should exist for environment variable validation',\n    );\n\n    // Check for sensitive data in .env.example\n    if (fs.existsSync('.env.example')) {\n      const envExample = fs.readFileSync('.env.example', 'utf8');\n\n      // Look for uncommented lines with sensitive values that don't look like placeholders\n      const lines = envExample.split('\\n');\n      const sensitiveLines = lines.filter((line) => {\n        // Skip comments\n        if (line.trim().startsWith('#')) return false;\n\n        // Check for sensitive keys with non-placeholder values\n        const sensitivePattern = /(password|secret|key|token)=/i;\n        const placeholderPattern =\n          /(your_|test_|example_|placeholder|changeme|replace)/i;\n\n        if (sensitivePattern.test(line)) {\n          const value = line.split('=')[1]?.trim();\n          if (value && !placeholderPattern.test(value) && value.length > 10) {\n            return true;\n          }\n        }\n        return false;\n      });\n\n      this.addCheck(\n        'No sensitive data in .env.example',\n        sensitiveLines.length === 0,\n        '.env.example should not contain real sensitive data',\n      );\n\n      if (sensitiveLines.length > 0) {\n        console.log(\n          `     Found potentially sensitive lines: ${sensitiveLines.length}`,\n        );\n      }\n    }\n  }\n\n  /**\n   * Check security headers configuration\n   */\n  checkSecurityHeaders() {\n    console.log('ğŸ›¡ï¸  Checking security headers...');\n\n    // Check security config exists\n    const securityConfigPath = 'src/config/security.ts';\n    this.addCheck(\n      'Security configuration exists',\n      fs.existsSync(securityConfigPath),\n      'Security configuration file should exist',\n    );\n\n    // Check next.config.ts for security headers\n    if (fs.existsSync('next.config.ts')) {\n      const nextConfig = fs.readFileSync('next.config.ts', 'utf8');\n\n      this.addCheck(\n        'Security headers configured',\n        nextConfig.includes('getSecurityHeaders'),\n        'next.config.ts should use getSecurityHeaders function',\n      );\n\n      this.addCheck(\n        'CSP configured',\n        nextConfig.includes('Content-Security-Policy') ||\n          nextConfig.includes('getSecurityHeaders'),\n        'Content Security Policy should be configured',\n      );\n    }\n  }\n\n  /**\n   * Check CSP configuration\n   */\n  checkCSPConfiguration() {\n    console.log('ğŸ” Checking CSP configuration...');\n\n    // Check CSP report endpoint exists\n    const cspReportPath = 'src/app/api/csp-report/route.ts';\n    this.addCheck(\n      'CSP report endpoint exists',\n      fs.existsSync(cspReportPath),\n      'CSP report endpoint should exist for violation reporting',\n    );\n\n    // Check middleware includes security\n    if (fs.existsSync('middleware.ts')) {\n      const middleware = fs.readFileSync('middleware.ts', 'utf8');\n\n      this.addCheck(\n        'Middleware includes security',\n        middleware.includes('getSecurityHeaders') ||\n          middleware.includes('generateNonce'),\n        'Middleware should include security headers',\n      );\n    }\n  }\n\n  /**\n   * Check dependencies for security vulnerabilities\n   */\n  checkDependencies() {\n    console.log('ğŸ“¦ Checking dependencies...');\n\n    // Check if security-related packages are installed\n    if (fs.existsSync('package.json')) {\n      const packageJson = JSON.parse(fs.readFileSync('package.json', 'utf8'));\n      const dependencies = {\n        ...packageJson.dependencies,\n        ...packageJson.devDependencies,\n      };\n\n      this.addCheck(\n        'Environment validation package installed',\n        '@t3-oss/env-nextjs' in dependencies,\n        '@t3-oss/env-nextjs should be installed for environment validation',\n      );\n\n      this.addCheck(\n        'Bot protection package installed',\n        '@marsidev/react-turnstile' in dependencies,\n        'Turnstile package should be installed for bot protection',\n      );\n\n      this.addCheck(\n        'Security linting installed',\n        'eslint-plugin-security' in dependencies,\n        'Security ESLint plugin should be installed',\n      );\n\n      // Check for known vulnerable packages (basic check)\n      const vulnerablePackages = ['lodash', 'moment', 'request'];\n      vulnerablePackages.forEach((pkg) => {\n        if (pkg in dependencies) {\n          this.addWarning(\n            `${pkg} is installed - consider using modern alternatives`,\n          );\n        }\n      });\n    }\n  }\n\n  /**\n   * Check file permissions and sensitive files\n   */\n  checkFilePermissions() {\n    console.log('ğŸ“ Checking file permissions...');\n\n    // Check for sensitive files that shouldn't exist\n    const sensitiveFiles = [\n      '.env',\n      '.env.local',\n      '.env.production',\n      'private.key',\n      'server.key',\n      'id_rsa',\n      'id_dsa',\n    ];\n\n    sensitiveFiles.forEach((file) => {\n      if (fs.existsSync(file)) {\n        this.addWarning(\n          `Sensitive file ${file} exists - ensure it's properly secured`,\n        );\n      }\n    });\n  }\n\n  /**\n   * Check .gitignore configuration\n   */\n  checkGitIgnore() {\n    console.log('ğŸ“ Checking .gitignore...');\n\n    if (fs.existsSync('.gitignore')) {\n      const gitignore = fs.readFileSync('.gitignore', 'utf8');\n\n      const requiredEntries = [\n        { pattern: '.env', alternatives: ['.env', '.env*'] },\n        { pattern: '.env.local', alternatives: ['.env.local', '.env*'] },\n        { pattern: '.env.*.local', alternatives: ['.env.*.local', '.env*'] },\n        {\n          pattern: 'node_modules',\n          alternatives: ['node_modules', '/node_modules'],\n        },\n      ];\n\n      requiredEntries.forEach(({ pattern, alternatives }) => {\n        const isIncluded = alternatives.some((alt) => gitignore.includes(alt));\n        this.addCheck(\n          `.gitignore includes ${pattern}`,\n          isIncluded,\n          `${pattern} should be in .gitignore`,\n        );\n      });\n    } else {\n      this.addCheck('.gitignore exists', false, '.gitignore file should exist');\n    }\n  }\n\n  /**\n   * Check Turnstile configuration\n   */\n  checkTurnstileConfiguration() {\n    console.log('ğŸ¤– Checking bot protection...');\n\n    // Check Turnstile component exists\n    const turnstilePath = 'src/components/security/turnstile.tsx';\n    this.addCheck(\n      'Turnstile component exists',\n      fs.existsSync(turnstilePath),\n      'Turnstile component should exist for bot protection',\n    );\n\n    // Check Turnstile verification endpoint exists\n    const verifyPath = 'src/app/api/verify-turnstile/route.ts';\n    this.addCheck(\n      'Turnstile verification endpoint exists',\n      fs.existsSync(verifyPath),\n      'Turnstile verification endpoint should exist',\n    );\n  }\n\n  /**\n   * Add a check result\n   */\n  addCheck(name, passed, message) {\n    this.results.checks.push({\n      name,\n      passed,\n      message,\n    });\n\n    if (!passed) {\n      this.results.passed = false;\n    }\n\n    const status = passed ? 'âœ…' : 'âŒ';\n    console.log(`  ${status} ${name}`);\n    if (!passed) {\n      console.log(`     ${message}`);\n    }\n  }\n\n  /**\n   * Add a warning\n   */\n  addWarning(message) {\n    this.results.warnings.push(message);\n    console.log(`  âš ï¸  ${message}`);\n  }\n\n  /**\n   * Add a recommendation\n   */\n  addRecommendation(message) {\n    this.results.recommendations.push(message);\n  }\n\n  /**\n   * Generate final report\n   */\n  generateReport() {\n    console.log('\\nğŸ“Š Security Check Report');\n    console.log('========================');\n\n    const totalChecks = this.results.checks.length;\n    const passedChecks = this.results.checks.filter((c) => c.passed).length;\n    const failedChecks = totalChecks - passedChecks;\n\n    console.log(`Total checks: ${totalChecks}`);\n    console.log(`Passed: ${passedChecks}`);\n    console.log(`Failed: ${failedChecks}`);\n    console.log(`Warnings: ${this.results.warnings.length}`);\n\n    if (this.results.passed) {\n      console.log('\\nğŸ‰ All security checks passed!');\n    } else {\n      console.log(\n        '\\nâš ï¸  Some security checks failed. Please review and fix the issues above.',\n      );\n    }\n\n    // Add general recommendations\n    this.addRecommendation(\n      'Regularly update dependencies to patch security vulnerabilities',\n    );\n    this.addRecommendation('Use strong, unique secrets in production');\n    this.addRecommendation('Enable security monitoring and alerting');\n    this.addRecommendation(\n      'Regularly review and update security configurations',\n    );\n\n    if (this.results.recommendations.length > 0) {\n      console.log('\\nğŸ’¡ Recommendations:');\n      this.results.recommendations.forEach((rec) => {\n        console.log(`  â€¢ ${rec}`);\n      });\n    }\n\n    // Save report to file\n    const reportPath = 'reports/security-check-report.json';\n    const reportsDir = path.dirname(reportPath);\n\n    if (!fs.existsSync(reportsDir)) {\n      fs.mkdirSync(reportsDir, { recursive: true });\n    }\n\n    fs.writeFileSync(reportPath, JSON.stringify(this.results, null, 2));\n    console.log(`\\nğŸ“„ Report saved to ${reportPath}`);\n\n    // Exit with appropriate code\n    process.exit(this.results.passed ? 0 : 1);\n  }\n}\n\n// Run the security check\nif (require.main === module) {\n  const checker = new SecurityChecker();\n  checker.runChecks().catch((error) => {\n    console.error('Error running security checks:', error);\n    process.exit(1);\n  });\n}\n\nmodule.exports = SecurityChecker;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/start-test-server.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'fs' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"fs"},"fix":{"range":[179,204],"text":""},"desc":"Remove unused variable 'fs'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fs' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[205,234],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"require-await","severity":1,"message":"Async method 'startServer' has no 'await' expression.","line":43,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":43,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[928,934],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'output' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨è„šæœ¬\n *\n * ä¸“é—¨ä¸º E2E æµ‹è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œç¡®ä¿ï¼š\n * 1. React Scan è¢«ç¦ç”¨ä»¥é¿å…æµ‹è¯•å¹²æ‰°\n * 2. å…¶ä»–å¼€å‘å·¥å…·è¢«é€‚å½“é…ç½®\n * 3. æµ‹è¯•ç¯å¢ƒå˜é‡è¢«æ­£ç¡®è®¾ç½®\n */\n\nconst { spawn } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nclass TestServerManager {\n  constructor() {\n    this.serverProcess = null;\n    this.isShuttingDown = false;\n  }\n\n  /**\n   * è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡\n   */\n  setupTestEnvironment() {\n    console.log('ğŸ§ª Setting up test environment...');\n\n    // è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡\n    process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN = 'true';\n    process.env.NEXT_PUBLIC_DISABLE_DEV_TOOLS = 'true';\n    process.env.NEXT_PUBLIC_TEST_MODE = 'true';\n    process.env.PLAYWRIGHT_TEST = 'true';\n\n    console.log('   âœ… NEXT_PUBLIC_DISABLE_REACT_SCAN=true');\n    console.log('   âœ… NEXT_PUBLIC_DISABLE_DEV_TOOLS=true');\n    console.log('   âœ… NEXT_PUBLIC_TEST_MODE=true');\n    console.log('   âœ… PLAYWRIGHT_TEST=true');\n  }\n\n  /**\n   * å¯åŠ¨å¼€å‘æœåŠ¡å™¨\n   */\n  async startServer() {\n    return new Promise((resolve, reject) => {\n      console.log('ğŸš€ Starting test server...');\n\n      this.setupTestEnvironment();\n\n      // å¯åŠ¨ Next.js å¼€å‘æœåŠ¡å™¨\n      this.serverProcess = spawn('pnpm', ['dev'], {\n        stdio: ['pipe', 'pipe', 'pipe'],\n        env: {\n          ...process.env,\n          // ç¡®ä¿æµ‹è¯•ç¯å¢ƒå˜é‡è¢«ä¼ é€’\n          NEXT_PUBLIC_DISABLE_REACT_SCAN: 'true',\n          NEXT_PUBLIC_TEST_MODE: 'true',\n        },\n      });\n\n      let serverReady = false;\n      let output = '';\n\n      this.serverProcess.stdout.on('data', (data) => {\n        const text = data.toString();\n        output += text;\n\n        // æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å‡†å¤‡å°±ç»ª\n        if (text.includes('Ready') || text.includes('localhost:3000')) {\n          if (!serverReady) {\n            serverReady = true;\n            console.log('âœ… Test server is ready');\n            resolve(this.serverProcess);\n          }\n        }\n\n        // è¾“å‡ºæœåŠ¡å™¨æ—¥å¿—ï¼ˆè¿‡æ»¤æ‰å™ªéŸ³ï¼‰\n        if (!text.includes('webpack') && !text.includes('Compiled')) {\n          process.stdout.write(text);\n        }\n      });\n\n      this.serverProcess.stderr.on('data', (data) => {\n        const text = data.toString();\n\n        // è¿‡æ»¤æ‰å·²çŸ¥çš„æ— å®³è­¦å‘Š\n        if (\n          !text.includes('ExperimentalWarning') &&\n          !text.includes('punycode') &&\n          !text.includes('deprecated')\n        ) {\n          process.stderr.write(text);\n        }\n      });\n\n      this.serverProcess.on('error', (error) => {\n        console.error('âŒ Failed to start test server:', error);\n        reject(error);\n      });\n\n      this.serverProcess.on('exit', (code) => {\n        if (!this.isShuttingDown) {\n          console.log(`ğŸ”„ Test server exited with code ${code}`);\n        }\n      });\n\n      // è¶…æ—¶å¤„ç†\n      setTimeout(() => {\n        if (!serverReady) {\n          console.error('âŒ Test server failed to start within timeout');\n          reject(new Error('Server startup timeout'));\n        }\n      }, 30000); // 30ç§’è¶…æ—¶\n    });\n  }\n\n  /**\n   * åœæ­¢æœåŠ¡å™¨\n   */\n  async stopServer() {\n    if (this.serverProcess && !this.isShuttingDown) {\n      console.log('ğŸ›‘ Stopping test server...');\n      this.isShuttingDown = true;\n\n      this.serverProcess.kill('SIGTERM');\n\n      // ç­‰å¾…è¿›ç¨‹ç»“æŸ\n      await new Promise((resolve) => {\n        this.serverProcess.on('exit', resolve);\n\n        // å¼ºåˆ¶ç»“æŸè¶…æ—¶\n        setTimeout(() => {\n          if (this.serverProcess) {\n            this.serverProcess.kill('SIGKILL');\n          }\n          resolve(null);\n        }, 5000);\n      });\n\n      console.log('âœ… Test server stopped');\n    }\n  }\n\n  /**\n   * éªŒè¯æœåŠ¡å™¨çŠ¶æ€\n   */\n  async verifyServer(url = 'http://localhost:3000') {\n    console.log(`ğŸ” Verifying server at ${url}...`);\n\n    try {\n      const response = await fetch(url);\n      const isHealthy = response.ok;\n\n      if (isHealthy) {\n        console.log('âœ… Server is healthy');\n\n        // æ£€æŸ¥å“åº”ä¸­æ˜¯å¦åŒ…å« React Scan ç›¸å…³å†…å®¹\n        const html = await response.text();\n        const hasReactScan =\n          html.includes('react-scan') || html.includes('React Scan');\n\n        if (hasReactScan) {\n          console.warn('âš ï¸  Server response contains React Scan content');\n          return { healthy: true, hasInterference: true };\n        } \n          console.log('âœ… Server response is clean (no React Scan content)');\n          return { healthy: true, hasInterference: false };\n        \n      } \n        console.error(`âŒ Server returned status ${response.status}`);\n        return { healthy: false, hasInterference: false };\n      \n    } catch (error) {\n      console.error('âŒ Server verification failed:', error.message);\n      return { healthy: false, hasInterference: false };\n    }\n  }\n\n  /**\n   * å®Œæ•´çš„æµ‹è¯•æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†\n   */\n  async runWithServer(testFunction) {\n    try {\n      await this.startServer();\n\n      // ç­‰å¾…æœåŠ¡å™¨å®Œå…¨å¯åŠ¨\n      await new Promise((resolve) => setTimeout(resolve, 3000));\n\n      // éªŒè¯æœåŠ¡å™¨çŠ¶æ€\n      const status = await this.verifyServer();\n      if (!status.healthy) {\n        throw new Error('Server is not healthy');\n      }\n\n      if (status.hasInterference) {\n        console.warn(\n          'âš ï¸  Detected potential interference, but proceeding with tests',\n        );\n      }\n\n      // è¿è¡Œæµ‹è¯•å‡½æ•°\n      await testFunction();\n    } finally {\n      await this.stopServer();\n    }\n  }\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬\nif (require.main === module) {\n  const manager = new TestServerManager();\n\n  // å¤„ç†é€€å‡ºä¿¡å·\n  process.on('SIGINT', async () => {\n    console.log('\\nğŸ›‘ Received SIGINT, shutting down...');\n    await manager.stopServer();\n    process.exit(0);\n  });\n\n  process.on('SIGTERM', async () => {\n    console.log('\\nğŸ›‘ Received SIGTERM, shutting down...');\n    await manager.stopServer();\n    process.exit(0);\n  });\n\n  // å¯åŠ¨æœåŠ¡å™¨å¹¶ä¿æŒè¿è¡Œ\n  manager\n    .startServer()\n    .then(() => {\n      console.log('ğŸ¯ Test server is running. Press Ctrl+C to stop.');\n    })\n    .catch((error) => {\n      console.error('âŒ Failed to start test server:', error);\n      process.exit(1);\n    });\n}\n\nmodule.exports = TestServerManager;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/summarize-eslint.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/tools/eslint-summarize.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Function 'main' has too many statements (66). Maximum allowed is 35.","line":40,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":174,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * ESLinté”™è¯¯ç»Ÿè®¡åˆ†æå·¥å…·\n * è¯»å–ESLint JSONè¾“å‡ºï¼ŒæŒ‰è§„åˆ™èšåˆè®¡æ•°ä¸æ–‡ä»¶åˆ†å¸ƒ\n */\n\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\ninterface ESLintMessage {\n  ruleId: string | null;\n  severity: number;\n  message: string;\n  line: number;\n  column: number;\n  nodeType?: string;\n  messageId?: string;\n  endLine?: number;\n  endColumn?: number;\n}\n\ninterface ESLintResult {\n  filePath: string;\n  messages: ESLintMessage[];\n  errorCount: number;\n  warningCount: number;\n  fixableErrorCount: number;\n  fixableWarningCount: number;\n  source?: string;\n}\n\ninterface RuleSummary {\n  ruleId: string;\n  errorCount: number;\n  warningCount: number;\n  totalCount: number;\n  files: Map<string, number>;\n}\n\nfunction main() {\n  try {\n    const eslintJsonPath = join(process.cwd(), '.tmp/eslint.json');\n    const eslintData: ESLintResult[] = JSON.parse(readFileSync(eslintJsonPath, 'utf-8'));\n    \n    console.log('ğŸ” ESLinté”™è¯¯ç»Ÿè®¡åˆ†ææŠ¥å‘Š');\n    console.log('=' .repeat(50));\n    \n    // ç»Ÿè®¡æ€»ä½“æƒ…å†µ\n    const totalFiles = eslintData.length;\n    const filesWithIssues = eslintData.filter(result => result.messages.length > 0).length;\n    const totalErrors = eslintData.reduce((sum, result) => sum + result.errorCount, 0);\n    const totalWarnings = eslintData.reduce((sum, result) => sum + result.warningCount, 0);\n    \n    console.log(`ğŸ“Š æ€»ä½“ç»Ÿè®¡:`);\n    console.log(`  æ£€æŸ¥æ–‡ä»¶: ${totalFiles}`);\n    console.log(`  æœ‰é—®é¢˜æ–‡ä»¶: ${filesWithIssues}`);\n    console.log(`  é”™è¯¯æ€»æ•°: ${totalErrors}`);\n    console.log(`  è­¦å‘Šæ€»æ•°: ${totalWarnings}`);\n    console.log(`  é—®é¢˜æ€»è®¡: ${totalErrors + totalWarnings}`);\n    console.log();\n    \n    // æŒ‰è§„åˆ™èšåˆ\n    const ruleSummaries = new Map<string, RuleSummary>();\n    \n    for (const result of eslintData) {\n      for (const message of result.messages) {\n        const ruleId = message.ruleId || 'no-rule';\n        \n        if (!ruleSummaries.has(ruleId)) {\n          ruleSummaries.set(ruleId, {\n            ruleId,\n            errorCount: 0,\n            warningCount: 0,\n            totalCount: 0,\n            files: new Map()\n          });\n        }\n        \n        const summary = ruleSummaries.get(ruleId)!;\n        \n        if (message.severity === 2) {\n          summary.errorCount++;\n        } else {\n          summary.warningCount++;\n        }\n        summary.totalCount++;\n        \n        // ç»Ÿè®¡æ–‡ä»¶åˆ†å¸ƒ\n        const fileName = result.filePath.replace(process.cwd(), '').replace(/^\\//, '');\n        const currentCount = summary.files.get(fileName) || 0;\n        summary.files.set(fileName, currentCount + 1);\n      }\n    }\n    \n    // æŒ‰æ€»æ•°æ’åº\n    const sortedRules = Array.from(ruleSummaries.values())\n      .sort((a, b) => b.totalCount - a.totalCount);\n    \n    console.log(`ğŸ”¥ Top 10 ESLintè§„åˆ™ (æŒ‰é—®é¢˜æ•°é‡æ’åº):`);\n    console.log('-'.repeat(80));\n    console.log(`${'è§„åˆ™åç§°'.padEnd(40) + 'é”™è¯¯'.padEnd(8) + 'è­¦å‘Š'.padEnd(8)  }æ€»è®¡`);\n    console.log('-'.repeat(80));\n    \n    for (const rule of sortedRules.slice(0, 10)) {\n      console.log(\n        rule.ruleId.padEnd(40) + \n        rule.errorCount.toString().padEnd(8) + \n        rule.warningCount.toString().padEnd(8) + \n        rule.totalCount.toString()\n      );\n    }\n    \n    console.log();\n    console.log(`ğŸ“ Top 5 é—®é¢˜æœ€å¤šçš„æ–‡ä»¶:`);\n    console.log('-'.repeat(60));\n    \n    // ç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶çš„æ€»é—®é¢˜æ•°\n    const fileIssues = new Map<string, number>();\n    for (const result of eslintData) {\n      if (result.messages.length > 0) {\n        const fileName = result.filePath.replace(process.cwd(), '').replace(/^\\//, '');\n        fileIssues.set(fileName, result.messages.length);\n      }\n    }\n    \n    const sortedFiles = Array.from(fileIssues.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 5);\n    \n    for (const [fileName, count] of sortedFiles) {\n      console.log(`${count.toString().padStart(3)} é—®é¢˜ - ${fileName}`);\n    }\n    \n    console.log();\n    console.log(`ğŸ¯ é‡ç‚¹å…³æ³¨è§„åˆ™è¯¦æƒ…:`);\n    console.log('-'.repeat(60));\n    \n    // é‡ç‚¹è§„åˆ™è¯¦ç»†åˆ†æ\n    const focusRules = [\n      'no-restricted-imports',\n      'security/detect-object-injection', \n      '@typescript-eslint/no-unused-vars',\n      'no-magic-numbers',\n      '@typescript-eslint/no-explicit-any'\n    ];\n    \n    for (const ruleId of focusRules) {\n      const rule = ruleSummaries.get(ruleId);\n      if (rule) {\n        console.log(`\\nğŸ“Œ ${ruleId}: ${rule.totalCount} ä¸ªé—®é¢˜`);\n        console.log(`   é”™è¯¯: ${rule.errorCount}, è­¦å‘Š: ${rule.warningCount}`);\n        console.log(`   å½±å“æ–‡ä»¶: ${rule.files.size} ä¸ª`);\n        \n        // æ˜¾ç¤ºé—®é¢˜æœ€å¤šçš„3ä¸ªæ–‡ä»¶\n        const topFiles = Array.from(rule.files.entries())\n          .sort((a, b) => b[1] - a[1])\n          .slice(0, 3);\n        \n        for (const [fileName, count] of topFiles) {\n          console.log(`     ${count} ä¸ª - ${fileName}`);\n        }\n      } else {\n        console.log(`\\nğŸ“Œ ${ruleId}: 0 ä¸ªé—®é¢˜ âœ…`);\n      }\n    }\n    \n    console.log();\n    console.log('âœ… ç»Ÿè®¡å®Œæˆï¼');\n    \n  } catch (error) {\n    console.error('âŒ ç»Ÿè®¡å¤±è´¥:', error);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/transform-barrel-exports.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":78,"column":12,"nodeType":"CallExpression","endLine":78,"endColumn":30},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":79,"column":9,"nodeType":"CallExpression","endLine":79,"endColumn":47},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":102,"column":23,"nodeType":"CallExpression","endLine":102,"endColumn":56},{"ruleId":"require-await","severity":1,"message":"Async method 'resolveExportsFromModule' has no 'await' expression.","line":153,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":153,"endColumn":33,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3379,3385],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":158,"column":29,"nodeType":"CallExpression","endLine":158,"endColumn":56},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":162,"column":23,"nodeType":"CallExpression","endLine":162,"endColumn":60},{"ruleId":"no-unused-vars","severity":1,"message":"'nodePath' is defined but never used. Allowed unused args must match /^_/u.","line":194,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":194,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"nodePath"},"fix":{"range":[4657,4665],"text":""},"desc":"Remove unused variable 'nodePath'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nodePath' is defined but never used. Allowed unused args must match /^_/u.","line":194,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":42},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":233,"column":11,"nodeType":"CallExpression","endLine":233,"endColumn":34},{"ruleId":"max-statements","severity":1,"message":"Async method 'transformFile' has too many statements (40). Maximum allowed is 35.","line":244,"column":22,"nodeType":"FunctionExpression","messageId":"exceed","endLine":392,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async method 'transformFile' has a complexity of 19. Maximum allowed is 18.","line":244,"column":22,"nodeType":"FunctionExpression","messageId":"complex","endLine":392,"endColumn":4},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":288,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":290,"endColumn":14},{"ruleId":"no-loop-func","severity":2,"message":"Function declared in a loop contains unsafe references to variable(s) 'hasChanges'.","line":306,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"unsafeRefs","endLine":332,"endColumn":14},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":358,"column":9,"nodeType":"CallExpression","endLine":358,"endColumn":48},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":402,"column":10,"nodeType":"CallExpression","endLine":402,"endColumn":34},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":403,"column":7,"nodeType":"CallExpression","endLine":403,"endColumn":51},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":406,"column":5,"nodeType":"CallExpression","endLine":406,"endColumn":42},{"ruleId":"require-await","severity":1,"message":"Async method 'generateReport' has no 'await' expression.","line":466,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":466,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[11493,11499],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":490,"column":5,"nodeType":"CallExpression","endLine":490,"endColumn":66},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":504,"column":5,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":517,"endColumn":6},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":504,"column":13,"nodeType":"MemberExpression","endLine":504,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Export * è½¬æ¢ Codemod è„šæœ¬\n *\n * åŠŸèƒ½ï¼š\n * - è‡ªåŠ¨å°† export * è½¬æ¢ä¸ºå‘½åå¯¼å‡º\n * - ä¿æŒåŠŸèƒ½ç­‰ä»·æ€§\n * - æ”¯æŒæ‰¹é‡å¤„ç†å’Œå¢é‡è½¬æ¢\n * - ç”Ÿæˆè½¬æ¢æŠ¥å‘Š\n * - æ”¯æŒå›æ»šæ“ä½œ\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { parse } = require('@babel/parser');\nconst traverse = require('@babel/traverse').default;\nconst generate = require('@babel/generator').default;\nconst glob = require('glob');\n\n// è½¬æ¢é…ç½®\nconst TRANSFORM_CONFIG = {\n  // æ‰«ææ¨¡å¼\n  scanPatterns: [\n    'src/**/*.{ts,tsx,js,jsx}',\n    '!src/**/*.{test,spec}.{ts,tsx,js,jsx}',\n    '!src/**/*.d.ts',\n  ],\n\n  // è¾“å‡ºç›®å½•\n  outputDir: path.join(process.cwd(), 'reports', 'transforms'),\n\n  // å¤‡ä»½ç›®å½•\n  backupDir: path.join(process.cwd(), 'backups', 'barrel-exports'),\n\n  // è§£æå™¨é€‰é¡¹\n  parserOptions: {\n    sourceType: 'module',\n    allowImportExportEverywhere: true,\n    allowReturnOutsideFunction: true,\n    plugins: [\n      'typescript',\n      'jsx',\n      'decorators-legacy',\n      'classProperties',\n      'objectRestSpread',\n      'asyncGenerators',\n      'functionBind',\n      'exportDefaultFrom',\n      'exportNamespaceFrom',\n      'dynamicImport',\n    ],\n  },\n\n  // è½¬æ¢é€‰é¡¹\n  transformOptions: {\n    createBackup: true,\n    dryRun: false,\n    verbose: true,\n    preserveComments: true,\n  },\n};\n\nclass BarrelExportTransformer {\n  constructor(options = {}) {\n    this.options = { ...TRANSFORM_CONFIG.transformOptions, ...options };\n    this.outputDir = TRANSFORM_CONFIG.outputDir;\n    this.backupDir = TRANSFORM_CONFIG.backupDir;\n\n    // ç¡®ä¿transformStatsåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ­£ç¡®åˆå§‹åŒ–\n    this.initializeStats();\n\n    this.ensureDirectories();\n  }\n\n  ensureDirectories() {\n    [this.outputDir, this.backupDir].forEach((dir) => {\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n    });\n  }\n\n  /**\n   * åˆå§‹åŒ–ç»Ÿè®¡ä¿¡æ¯\n   */\n  initializeStats() {\n    this.transformStats = {\n      filesProcessed: 0,\n      filesTransformed: 0,\n      exportStarRemoved: 0,\n      namedExportsAdded: 0,\n      errors: [],\n    };\n  }\n\n  /**\n   * åˆ†ææ–‡ä»¶ä¸­çš„export *è¯­å¥\n   */\n  analyzeExportStar(filePath) {\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      const ast = parse(content, TRANSFORM_CONFIG.parserOptions);\n\n      const exportStarNodes = [];\n      const existingExports = new Set();\n\n      traverse(ast, {\n        ExportAllDeclaration(nodePath) {\n          exportStarNodes.push({\n            node: nodePath.node,\n            source: nodePath.node.source.value,\n            line: nodePath.node.loc?.start.line,\n          });\n        },\n        ExportNamedDeclaration(nodePath) {\n          if (nodePath.node.specifiers) {\n            nodePath.node.specifiers.forEach((spec) => {\n              if (spec.exported) {\n                existingExports.add(spec.exported.name);\n              }\n            });\n          }\n        },\n      });\n\n      return { exportStarNodes, existingExports, ast, content };\n    } catch (error) {\n      // è®°å½•é”™è¯¯ä½†ä¸è¦åœ¨å¤„ç†ä¸­é‡ç½®ç»Ÿè®¡å¯¹è±¡ï¼Œé¿å…å¼•ç”¨ä¸¢å¤±\n      (\n        this.transformStats ||\n        (this.transformStats = {\n          filesProcessed: 0,\n          filesTransformed: 0,\n          exportStarRemoved: 0,\n          namedExportsAdded: 0,\n          errors: [],\n        })\n      ).errors.push({\n        file: filePath,\n        error: error.message,\n        type: 'parse_error',\n      });\n\n      console.error(`âŒ è§£æå¤±è´¥: ${filePath} - ${error.message}`);\n      return null;\n    }\n  }\n\n  /**\n   * è§£æç›®æ ‡æ–‡ä»¶çš„å¯¼å‡º\n   */\n  async resolveExportsFromModule(modulePath, currentFilePath) {\n    try {\n      // è§£æç›¸å¯¹è·¯å¾„\n      const resolvedPath = this.resolveModulePath(modulePath, currentFilePath);\n\n      if (!resolvedPath || !fs.existsSync(resolvedPath)) {\n        return [];\n      }\n\n      const content = fs.readFileSync(resolvedPath, 'utf8');\n      const ast = parse(content, TRANSFORM_CONFIG.parserOptions);\n\n      const exports = [];\n\n      traverse(ast, {\n        ExportNamedDeclaration(nodePath) {\n          const { node } = nodePath;\n\n          // å¤„ç† export { a, b }\n          if (node.specifiers && node.specifiers.length > 0) {\n            node.specifiers.forEach((spec) => {\n              if (spec.exported) {\n                exports.push(spec.exported.name);\n              }\n            });\n          }\n\n          // å¤„ç† export const/function/class\n          if (node.declaration) {\n            if (node.declaration.id) {\n              exports.push(node.declaration.id.name);\n            } else if (node.declaration.declarations) {\n              node.declaration.declarations.forEach((decl) => {\n                if (decl.id && decl.id.name) {\n                  exports.push(decl.id.name);\n                }\n              });\n            }\n          }\n        },\n\n        ExportDefaultDeclaration(nodePath) {\n          exports.push('default');\n        },\n      });\n\n      return exports;\n    } catch (error) {\n      if (this.options.verbose) {\n        console.warn(`âš ï¸ æ— æ³•è§£ææ¨¡å—å¯¼å‡º: ${modulePath} - ${error.message}`);\n      }\n      return [];\n    }\n  }\n\n  /**\n   * è§£ææ¨¡å—è·¯å¾„\n   */\n  resolveModulePath(modulePath, currentFilePath) {\n    if (!modulePath.startsWith('.')) {\n      return null; // è·³è¿‡ node_modules\n    }\n\n    const currentDir = path.dirname(currentFilePath);\n    const resolvedPath = path.resolve(currentDir, modulePath);\n\n    // å°è¯•ä¸åŒçš„æ‰©å±•å\n    const extensions = [\n      '.ts',\n      '.tsx',\n      '.js',\n      '.jsx',\n      '/index.ts',\n      '/index.tsx',\n      '/index.js',\n      '/index.jsx',\n    ];\n\n    for (const ext of extensions) {\n      const testPath = resolvedPath + ext;\n      if (fs.existsSync(testPath)) {\n        return testPath;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * è½¬æ¢å•ä¸ªæ–‡ä»¶\n   */\n  async transformFile(filePath) {\n    try {\n      if (this.options.verbose) {\n        console.log(`ğŸ”„ å¤„ç†æ–‡ä»¶: ${filePath}`);\n      }\n\n      // æ•è·ç¨³å®šå¼•ç”¨ï¼Œé¿å…åœ¨ traverse å›è°ƒä¸­ä¸¢å¤± this ä¸Šä¸‹æ–‡\n      const stats =\n        this.transformStats ||\n        (this.transformStats = {\n          filesProcessed: 0,\n          filesTransformed: 0,\n          exportStarRemoved: 0,\n          namedExportsAdded: 0,\n          errors: [],\n        });\n\n      stats.filesProcessed++;\n\n      const analysis = this.analyzeExportStar(filePath);\n      if (!analysis || analysis.exportStarNodes.length === 0) {\n        return false; // æ²¡æœ‰éœ€è¦è½¬æ¢çš„å†…å®¹\n      }\n\n      const { exportStarNodes, existingExports, ast, content } = analysis;\n      let hasChanges = false;\n\n      // åˆ›å»ºå¤‡ä»½\n      if (this.options.createBackup && !this.options.dryRun) {\n        this.createBackup(filePath, content);\n      }\n\n      // å¤„ç†æ¯ä¸ª export * è¯­å¥\n      for (const exportInfo of exportStarNodes) {\n        try {\n          const { node, source } = exportInfo;\n\n          // è·å–ç›®æ ‡æ¨¡å—çš„å¯¼å‡º\n          const moduleExports = await this.resolveExportsFromModule(\n            source,\n            filePath,\n          );\n\n          if (moduleExports.length === 0) {\n            if (this.options.verbose) {\n              console.warn(`âš ï¸ æ— æ³•è§£ææ¨¡å—å¯¼å‡º: ${source}`);\n            }\n            continue;\n          }\n\n          // è¿‡æ»¤æ‰å·²å­˜åœ¨çš„å¯¼å‡º\n          const newExports = moduleExports.filter(\n            (exp) => !existingExports.has(exp),\n          );\n\n          if (newExports.length === 0) {\n            continue;\n          }\n\n          // è½¬æ¢ AST\n          traverse(ast, {\n            // ä½¿ç”¨ç®­å¤´å‡½æ•°ä»¥æ•è·å¤–å±‚ä½œç”¨åŸŸï¼Œé¿å… this å˜æ›´\n            ExportAllDeclaration: (nodePath) => {\n              if (nodePath.node === node) {\n                // åˆ›å»ºå‘½åå¯¼å‡ºèŠ‚ç‚¹\n                const specifiers = newExports.map((exportName) => {\n                  return {\n                    type: 'ExportSpecifier',\n                    local: { type: 'Identifier', name: exportName },\n                    exported: { type: 'Identifier', name: exportName },\n                  };\n                });\n\n                const namedExportNode = {\n                  type: 'ExportNamedDeclaration',\n                  declaration: null,\n                  specifiers: specifiers,\n                  source: node.source,\n                };\n\n                // æ›¿æ¢èŠ‚ç‚¹\n                nodePath.replaceWith(namedExportNode);\n                hasChanges = true;\n\n                // ç»Ÿè®¡ä¿¡æ¯æ›´æ–°ä½¿ç”¨ç¨³å®šå¼•ç”¨\n                stats.exportStarRemoved++;\n                stats.namedExportsAdded += newExports.length;\n              }\n            },\n          });\n        } catch (exportError) {\n          // å¤„ç†å•ä¸ª export å¤„ç†é”™è¯¯ï¼ˆä¸é‡ç½®ç»Ÿè®¡å¯¹è±¡ï¼‰\n          stats.errors.push({\n            file: filePath,\n            error: `Export processing error: ${exportError.message}`,\n            type: 'export_processing_error',\n          });\n\n          if (this.options.verbose) {\n            console.warn(\n              `âš ï¸ å¤„ç†exportæ—¶å‡ºé”™: ${filePath} - ${exportError.message}`,\n            );\n          }\n          continue; // ç»§ç»­å¤„ç†å…¶ä»–export\n        }\n      }\n\n      // ç”Ÿæˆæ–°ä»£ç \n      if (hasChanges && !this.options.dryRun) {\n        const result = generate(ast, {\n          retainLines: true,\n          comments: this.options.preserveComments,\n        });\n\n        fs.writeFileSync(filePath, result.code);\n\n        stats.filesTransformed++;\n\n        if (this.options.verbose) {\n          console.log(`âœ… å·²è½¬æ¢: ${filePath}`);\n        }\n      }\n\n      return hasChanges;\n    } catch (error) {\n      // æ•´ä¸ªæ–¹æ³•çš„é”™è¯¯å¤„ç†ï¼ˆä¸é‡ç½®ç»Ÿè®¡å¯¹è±¡ï¼‰\n      const stats =\n        this.transformStats ||\n        (this.transformStats = {\n          filesProcessed: 0,\n          filesTransformed: 0,\n          exportStarRemoved: 0,\n          namedExportsAdded: 0,\n          errors: [],\n        });\n\n      stats.errors.push({\n        file: filePath,\n        error: `Transform file error: ${error.message}`,\n        type: 'transform_file_error',\n      });\n\n      if (this.options.verbose) {\n        console.error(`âŒ è½¬æ¢æ–‡ä»¶å¤±è´¥: ${filePath} - ${error.message}`);\n      }\n\n      return false;\n    }\n  }\n\n  /**\n   * åˆ›å»ºæ–‡ä»¶å¤‡ä»½\n   */\n  createBackup(filePath, content) {\n    const relativePath = path.relative(process.cwd(), filePath);\n    const backupPath = path.join(this.backupDir, relativePath);\n    const backupDir = path.dirname(backupPath);\n\n    if (!fs.existsSync(backupDir)) {\n      fs.mkdirSync(backupDir, { recursive: true });\n    }\n\n    fs.writeFileSync(backupPath, content);\n  }\n\n  /**\n   * æ‰¹é‡è½¬æ¢æ–‡ä»¶\n   */\n  async transformFiles(patterns = TRANSFORM_CONFIG.scanPatterns) {\n    console.log('ğŸš€ å¼€å§‹ Export * è½¬æ¢...\\n');\n\n    // è·å–è¦å¤„ç†çš„æ–‡ä»¶\n    const files = [];\n    for (const pattern of patterns) {\n      const matchedFiles = glob.sync(pattern, { cwd: process.cwd() });\n      files.push(...matchedFiles);\n    }\n\n    console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶å¾…å¤„ç†\\n`);\n\n    // å¤„ç†æ–‡ä»¶\n    for (const file of files) {\n      try {\n        await this.transformFile(file);\n      } catch (error) {\n        (\n          this.transformStats ||\n          (this.transformStats = {\n            filesProcessed: 0,\n            filesTransformed: 0,\n            exportStarRemoved: 0,\n            namedExportsAdded: 0,\n            errors: [],\n          })\n        ).errors.push({\n          file,\n          error: error.message,\n          type: 'transform_error',\n        });\n        console.error(`âŒ è½¬æ¢å¤±è´¥: ${file} - ${error.message}`);\n      }\n    }\n\n    // ç”ŸæˆæŠ¥å‘Š\n    await this.generateReport();\n\n    console.log('\\nğŸ“Š è½¬æ¢å®Œæˆ!');\n    console.log(`å¤„ç†æ–‡ä»¶: ${this.transformStats.filesProcessed}`);\n    console.log(`è½¬æ¢æ–‡ä»¶: ${this.transformStats.filesTransformed}`);\n    console.log(`ç§»é™¤ export *: ${this.transformStats.exportStarRemoved}`);\n    console.log(`æ·»åŠ å‘½åå¯¼å‡º: ${this.transformStats.namedExportsAdded}`);\n\n    if (this.transformStats.errors.length > 0) {\n      console.log(`é”™è¯¯æ•°é‡: ${this.transformStats.errors.length}`);\n    }\n\n    return this.transformStats;\n  }\n\n  /**\n   * ç”Ÿæˆè½¬æ¢æŠ¥å‘Š\n   */\n  async generateReport() {\n    const report = {\n      timestamp: new Date().toISOString(),\n      options: this.options,\n      stats: this.transformStats,\n      summary: {\n        success: this.transformStats.errors.length === 0,\n        filesProcessed: this.transformStats.filesProcessed,\n        filesTransformed: this.transformStats.filesTransformed,\n        transformationRate:\n          this.transformStats.filesProcessed > 0\n            ? `${(\n                (this.transformStats.filesTransformed /\n                  this.transformStats.filesProcessed) *\n                100\n              ).toFixed(2)  }%`\n            : '0%',\n      },\n    };\n\n    const reportPath = path.join(\n      this.outputDir,\n      `barrel-transform-${Date.now()}.json`,\n    );\n    fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n\n    console.log(`ğŸ“„ æŠ¥å‘Šå·²ç”Ÿæˆ: ${reportPath}`);\n    return report;\n  }\n}\n\n// å‘½ä»¤è¡Œæ¥å£\nasync function main() {\n  const args = process.argv.slice(2);\n  const options = {};\n\n  // è§£æå‘½ä»¤è¡Œå‚æ•°\n  for (let i = 0; i < args.length; i++) {\n    switch (args[i]) {\n      case '--dry-run':\n        options.dryRun = true;\n        break;\n      case '--no-backup':\n        options.createBackup = false;\n        break;\n      case '--quiet':\n        options.verbose = false;\n        break;\n      case '--no-comments':\n        options.preserveComments = false;\n        break;\n    }\n  }\n\n  const transformer = new BarrelExportTransformer(options);\n\n  try {\n    await transformer.transformFiles();\n  } catch (error) {\n    console.error('âŒ è½¬æ¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:', error);\n    process.exit(1);\n  }\n}\n\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = BarrelExportTransformer;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/translation-scanner.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":60,"column":21,"nodeType":"CallExpression","endLine":60,"endColumn":54},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'CallExpression'.","line":120,"column":7,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":120,"endColumn":21},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":174,"column":23,"nodeType":"CallExpression","endLine":174,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":175,"column":7,"nodeType":"MemberExpression","endLine":175,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":179,"column":7,"nodeType":"MemberExpression","endLine":179,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":213,"column":9,"nodeType":"MemberExpression","endLine":213,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":214,"column":18,"nodeType":"MemberExpression","endLine":214,"endColumn":38},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":272,"column":8,"nodeType":"CallExpression","endLine":272,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":273,"column":5,"nodeType":"CallExpression","endLine":273,"endColumn":57},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":281,"column":3,"nodeType":"CallExpression","endLine":281,"endColumn":64},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":331,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":331,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[7953,7959],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ç¿»è¯‘é”®è‡ªåŠ¨æ‰«æå·¥å…·\n * ä½¿ç”¨ASTè§£ææ‰«æä»£ç ä¸­çš„ç¿»è¯‘é”®ï¼Œç¡®ä¿ç¿»è¯‘å®Œæ•´æ€§\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { parse } = require('@babel/parser');\nconst traverse = require('@babel/traverse').default;\nconst glob = require('glob');\n\nconsole.log('ğŸ” å¼€å§‹ç¿»è¯‘é”®æ‰«æ...\\n');\n\n// é…ç½®\nconst CONFIG = {\n  // æ‰«æçš„æ–‡ä»¶æ¨¡å¼\n  SCAN_PATTERNS: [\n    'src/**/*.{ts,tsx,js,jsx}',\n    'app/**/*.{ts,tsx,js,jsx}',\n    '!src/**/*.test.{ts,tsx,js,jsx}',\n    '!src/**/*.spec.{ts,tsx,js,jsx}',\n    '!**/*.d.ts',\n  ],\n\n  // ç¿»è¯‘å‡½æ•°å\n  TRANSLATION_FUNCTIONS: ['t', 'useTranslations', 'getTranslations'],\n\n  // è¾“å‡ºç›®å½•\n  OUTPUT_DIR: path.join(process.cwd(), 'reports'),\n\n  // ç¿»è¯‘æ–‡ä»¶ç›®å½•\n  MESSAGES_DIR: path.join(process.cwd(), 'messages'),\n\n  // æ”¯æŒçš„è¯­è¨€\n  LOCALES: ['en', 'zh'],\n};\n\nconst scanResults = {\n  totalFiles: 0,\n  scannedFiles: 0,\n  translationKeys: new Set(),\n  keyUsages: new Map(),\n  errors: [],\n  warnings: [],\n  statistics: {\n    totalKeys: 0,\n    uniqueKeys: 0,\n    missingKeys: [],\n    unusedKeys: [],\n  },\n};\n\n/**\n * æ‰«ææ–‡ä»¶ä¸­çš„ç¿»è¯‘é”®\n */\nfunction scanFile(filePath) {\n  try {\n    const content = fs.readFileSync(filePath, 'utf8');\n    const ast = parse(content, {\n      sourceType: 'module',\n      plugins: [\n        'typescript',\n        'jsx',\n        'decorators-legacy',\n        'classProperties',\n        'objectRestSpread',\n        'asyncGenerators',\n        'functionBind',\n        'exportDefaultFrom',\n        'exportNamespaceFrom',\n        'dynamicImport',\n        'nullishCoalescingOperator',\n        'optionalChaining',\n      ],\n    });\n\n    const fileKeys = new Set();\n\n    traverse(ast, {\n      // æ‰«æ useTranslations hook\n      CallExpression(nodePath) {\n        const { node } = nodePath;\n\n        if (\n          node.callee.name === 'useTranslations' &&\n          node.arguments.length > 0 &&\n          node.arguments[0].type === 'StringLiteral'\n        ) {\n          const namespace = node.arguments[0].value;\n          fileKeys.add(namespace);\n          recordKeyUsage(namespace, filePath, node.loc);\n        }\n      },\n\n      // æ‰«æ t() å‡½æ•°è°ƒç”¨\n      MemberExpression(nodePath) {\n        const { node } = nodePath;\n\n        if (\n          node.property &&\n          node.property.type === 'Identifier' &&\n          node.property.name === 't' &&\n          nodePath.parent.type === 'CallExpression'\n        ) {\n          const callExpression = nodePath.parent;\n          if (\n            callExpression.arguments.length > 0 &&\n            callExpression.arguments[0].type === 'StringLiteral'\n          ) {\n            const key = callExpression.arguments[0].value;\n            fileKeys.add(key);\n            recordKeyUsage(key, filePath, callExpression.loc);\n          }\n        }\n      },\n\n      // æ‰«æç›´æ¥çš„ t() è°ƒç”¨\n      CallExpression(nodePath) {\n        const { node } = nodePath;\n\n        if (\n          node.callee.type === 'Identifier' &&\n          node.callee.name === 't' &&\n          node.arguments.length > 0 &&\n          node.arguments[0].type === 'StringLiteral'\n        ) {\n          const key = node.arguments[0].value;\n          fileKeys.add(key);\n          recordKeyUsage(key, filePath, node.loc);\n        }\n      },\n    });\n\n    scanResults.scannedFiles++;\n    fileKeys.forEach((key) => scanResults.translationKeys.add(key));\n\n    console.log(`âœ… æ‰«æå®Œæˆ: ${filePath} (å‘ç° ${fileKeys.size} ä¸ªç¿»è¯‘é”®)`);\n  } catch (error) {\n    scanResults.errors.push({\n      file: filePath,\n      error: error.message,\n      type: 'parse_error',\n    });\n    console.error(`âŒ æ‰«æå¤±è´¥: ${filePath} - ${error.message}`);\n  }\n}\n\n/**\n * è®°å½•ç¿»è¯‘é”®ä½¿ç”¨æƒ…å†µ\n */\nfunction recordKeyUsage(key, filePath, location) {\n  if (!scanResults.keyUsages.has(key)) {\n    scanResults.keyUsages.set(key, []);\n  }\n\n  scanResults.keyUsages.get(key).push({\n    file: filePath,\n    line: location ? location.start.line : null,\n    column: location ? location.start.column : null,\n  });\n}\n\n/**\n * åŠ è½½ç°æœ‰ç¿»è¯‘æ–‡ä»¶\n */\nfunction loadExistingTranslations() {\n  const translations = {};\n\n  for (const locale of CONFIG.LOCALES) {\n    const filePath = path.join(CONFIG.MESSAGES_DIR, `${locale}.json`);\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      translations[locale] = JSON.parse(content);\n      console.log(`ğŸ“– åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json`);\n    } catch (error) {\n      console.warn(`âš ï¸  æ— æ³•åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json - ${error.message}`);\n      translations[locale] = {};\n    }\n  }\n\n  return translations;\n}\n\n/**\n * è·å–åµŒå¥—å¯¹è±¡çš„æ‰€æœ‰é”®\n */\nfunction getAllKeys(obj, prefix = '') {\n  const keys = new Set();\n\n  for (const [key, value] of Object.entries(obj)) {\n    const fullKey = prefix ? `${prefix}.${key}` : key;\n\n    if (typeof value === 'object' && value !== null) {\n      getAllKeys(value, fullKey).forEach((k) => keys.add(k));\n    } else {\n      keys.add(fullKey);\n    }\n  }\n\n  return keys;\n}\n\n/**\n * åˆ†æç¿»è¯‘é”®ä½¿ç”¨æƒ…å†µ\n */\nfunction analyzeTranslationUsage(translations) {\n  const allTranslationKeys = new Set();\n\n  // æ”¶é›†æ‰€æœ‰ç¿»è¯‘æ–‡ä»¶ä¸­çš„é”®\n  for (const locale of CONFIG.LOCALES) {\n    if (translations[locale]) {\n      getAllKeys(translations[locale]).forEach((key) =>\n        allTranslationKeys.add(key),\n      );\n    }\n  }\n\n  // æ‰¾å‡ºç¼ºå¤±çš„é”®ï¼ˆä»£ç ä¸­ä½¿ç”¨ä½†ç¿»è¯‘æ–‡ä»¶ä¸­æ²¡æœ‰ï¼‰\n  const missingKeys = [];\n  scanResults.translationKeys.forEach((key) => {\n    if (!allTranslationKeys.has(key)) {\n      missingKeys.push(key);\n    }\n  });\n\n  // æ‰¾å‡ºæœªä½¿ç”¨çš„é”®ï¼ˆç¿»è¯‘æ–‡ä»¶ä¸­æœ‰ä½†ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨ï¼‰\n  const unusedKeys = [];\n  allTranslationKeys.forEach((key) => {\n    if (!scanResults.translationKeys.has(key)) {\n      unusedKeys.push(key);\n    }\n  });\n\n  scanResults.statistics = {\n    totalKeys: allTranslationKeys.size,\n    uniqueKeys: scanResults.translationKeys.size,\n    missingKeys,\n    unusedKeys,\n  };\n\n  return { missingKeys, unusedKeys };\n}\n\n/**\n * ç”Ÿæˆæ‰«ææŠ¥å‘Š\n */\nfunction generateScanReport(translations, analysis) {\n  const report = {\n    timestamp: new Date().toISOString(),\n    summary: {\n      totalFiles: scanResults.totalFiles,\n      scannedFiles: scanResults.scannedFiles,\n      errorCount: scanResults.errors.length,\n      warningCount: scanResults.warnings.length,\n      ...scanResults.statistics,\n    },\n    translationKeys: Array.from(scanResults.translationKeys).sort(),\n    keyUsages: Object.fromEntries(\n      Array.from(scanResults.keyUsages.entries()).map(([key, usages]) => [\n        key,\n        usages,\n      ]),\n    ),\n    analysis,\n    errors: scanResults.errors,\n    warnings: scanResults.warnings,\n  };\n\n  // ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨\n  if (!fs.existsSync(CONFIG.OUTPUT_DIR)) {\n    fs.mkdirSync(CONFIG.OUTPUT_DIR, { recursive: true });\n  }\n\n  // å†™å…¥æŠ¥å‘Šæ–‡ä»¶\n  const reportPath = path.join(\n    CONFIG.OUTPUT_DIR,\n    'translation-scan-report.json',\n  );\n  fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n\n  console.log(`ğŸ“Š æ‰«ææŠ¥å‘Šå·²ç”Ÿæˆ: ${reportPath}`);\n  return report;\n}\n\n/**\n * æ˜¾ç¤ºæ‰«æç»“æœ\n */\nfunction displayResults(analysis) {\n  console.log('\\nğŸ“Š æ‰«æç»Ÿè®¡:\\n');\n  console.log(\n    `   æ‰«ææ–‡ä»¶: ${scanResults.scannedFiles}/${scanResults.totalFiles}`,\n  );\n  console.log(`   å‘ç°ç¿»è¯‘é”®: ${scanResults.statistics.uniqueKeys}`);\n  console.log(`   ç¿»è¯‘æ–‡ä»¶æ€»é”®æ•°: ${scanResults.statistics.totalKeys}`);\n  console.log(`   ç¼ºå¤±é”®: ${analysis.missingKeys.length}`);\n  console.log(`   æœªä½¿ç”¨é”®: ${analysis.unusedKeys.length}`);\n  console.log(`   é”™è¯¯: ${scanResults.errors.length}`);\n  console.log(`   è­¦å‘Š: ${scanResults.warnings.length}\\n`);\n\n  // æ˜¾ç¤ºç¼ºå¤±çš„é”®\n  if (analysis.missingKeys.length > 0) {\n    console.log('âŒ ç¼ºå¤±çš„ç¿»è¯‘é”®:');\n    analysis.missingKeys.slice(0, 10).forEach((key) => {\n      const usages = scanResults.keyUsages.get(key) || [];\n      console.log(`   - ${key} (ä½¿ç”¨ ${usages.length} æ¬¡)`);\n    });\n    if (analysis.missingKeys.length > 10) {\n      console.log(`   ... è¿˜æœ‰ ${analysis.missingKeys.length - 10} ä¸ªé”®`);\n    }\n    console.log();\n  }\n\n  // æ˜¾ç¤ºæœªä½¿ç”¨çš„é”®\n  if (analysis.unusedKeys.length > 0) {\n    console.log('âš ï¸  æœªä½¿ç”¨çš„ç¿»è¯‘é”®:');\n    analysis.unusedKeys.slice(0, 10).forEach((key) => {\n      console.log(`   - ${key}`);\n    });\n    if (analysis.unusedKeys.length > 10) {\n      console.log(`   ... è¿˜æœ‰ ${analysis.unusedKeys.length - 10} ä¸ªé”®`);\n    }\n    console.log();\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  try {\n    // è·å–è¦æ‰«æçš„æ–‡ä»¶\n    const files = [];\n    for (const pattern of CONFIG.SCAN_PATTERNS) {\n      const matchedFiles = glob.sync(pattern, { cwd: process.cwd() });\n      files.push(...matchedFiles);\n    }\n\n    scanResults.totalFiles = files.length;\n    console.log(`ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶å¾…æ‰«æ\\n`);\n\n    // æ‰«ææ–‡ä»¶\n    for (const file of files) {\n      scanFile(file);\n    }\n\n    // åŠ è½½ç°æœ‰ç¿»è¯‘\n    const translations = loadExistingTranslations();\n\n    // åˆ†æä½¿ç”¨æƒ…å†µ\n    const analysis = analyzeTranslationUsage(translations);\n\n    // ç”ŸæˆæŠ¥å‘Š\n    generateScanReport(translations, analysis);\n\n    // æ˜¾ç¤ºç»“æœ\n    displayResults(analysis);\n\n    // åˆ¤æ–­æ˜¯å¦é€šè¿‡\n    const hasErrors = scanResults.errors.length > 0;\n    const hasMissingKeys = analysis.missingKeys.length > 0;\n\n    if (!hasErrors && !hasMissingKeys) {\n      console.log('âœ… ç¿»è¯‘é”®æ‰«æé€šè¿‡ï¼æ‰€æœ‰ç¿»è¯‘é”®éƒ½å·²æ­£ç¡®å®šä¹‰ã€‚\\n');\n      process.exit(0);\n    } else if (!hasErrors && hasMissingKeys) {\n      console.log('âš ï¸  ç¿»è¯‘é”®æ‰«æå®Œæˆï¼Œä½†å‘ç°ç¼ºå¤±çš„ç¿»è¯‘é”®ã€‚\\n');\n      process.exit(1);\n    } else {\n      console.log('âŒ ç¿»è¯‘é”®æ‰«æå¤±è´¥ï¼å­˜åœ¨è§£æé”™è¯¯ã€‚\\n');\n      process.exit(1);\n    }\n  } catch (error) {\n    console.error('ğŸ’¥ ç¿»è¯‘é”®æ‰«æå¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\n// è¿è¡Œä¸»å‡½æ•°\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/translation-sync.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":48,"column":8,"nodeType":"CallExpression","endLine":48,"endColumn":32},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":49,"column":5,"nodeType":"CallExpression","endLine":49,"endColumn":49},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":56,"column":9,"nodeType":"CallExpression","endLine":56,"endColumn":34},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":75,"column":23,"nodeType":"CallExpression","endLine":75,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":76,"column":7,"nodeType":"MemberExpression","endLine":76,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":80,"column":7,"nodeType":"MemberExpression","endLine":80,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":106,"column":9,"nodeType":"MemberExpression","endLine":106,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":107,"column":19,"nodeType":"MemberExpression","endLine":107,"endColumn":39},{"ruleId":"no-shadow","severity":2,"message":"'path' is already declared in the upper scope on line 9 column 7.","line":117,"column":30,"nodeType":"Identifier","messageId":"noShadow","endLine":117,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":119,"column":23,"nodeType":"MemberExpression","endLine":119,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":119,"column":52,"nodeType":"MemberExpression","endLine":119,"endColumn":64},{"ruleId":"no-shadow","severity":2,"message":"'path' is already declared in the upper scope on line 9 column 7.","line":126,"column":30,"nodeType":"Identifier","messageId":"noShadow","endLine":126,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":132,"column":10,"nodeType":"MemberExpression","endLine":132,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":132,"column":33,"nodeType":"MemberExpression","endLine":132,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":133,"column":7,"nodeType":"MemberExpression","endLine":133,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":135,"column":15,"nodeType":"MemberExpression","endLine":135,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":138,"column":3,"nodeType":"MemberExpression","endLine":138,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":152,"column":43,"nodeType":"MemberExpression","endLine":152,"endColumn":69},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":160,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":162,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":165,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":178,"endColumn":12},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (6). Maximum allowed is 4.","line":166,"column":13,"nodeType":"ForOfStatement","messageId":"tooDeeply","endLine":177,"endColumn":14},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (7). Maximum allowed is 4.","line":167,"column":15,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":176,"endColumn":16},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":169,"column":19,"nodeType":"MemberExpression","endLine":169,"endColumn":50},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (8). Maximum allowed is 4.","line":172,"column":17,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":175,"endColumn":18},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (5). Maximum allowed is 4.","line":181,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":183,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":185,"column":26,"nodeType":"MemberExpression","endLine":185,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":208,"column":7,"nodeType":"MemberExpression","endLine":208,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":208,"column":39,"nodeType":"MemberExpression","endLine":208,"endColumn":59},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":213,"column":19,"nodeType":"MemberExpression","endLine":213,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":213,"column":51,"nodeType":"MemberExpression","endLine":213,"endColumn":65},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":261,"column":41,"nodeType":"MemberExpression","endLine":261,"endColumn":61},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":262,"column":7,"nodeType":"CallExpression","endLine":262,"endColumn":50},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":298,"column":8,"nodeType":"CallExpression","endLine":298,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":299,"column":5,"nodeType":"CallExpression","endLine":299,"endColumn":57},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":306,"column":3,"nodeType":"CallExpression","endLine":306,"endColumn":64},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":352,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":352,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8522,8528],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":34,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * å¢å¼ºçš„ç¿»è¯‘åŒæ­¥å’Œæ›´æ–°å·¥å…·\n * è‡ªåŠ¨åŒæ­¥ç¿»è¯‘æ–‡ä»¶ï¼Œæ”¯æŒå¢é‡æ›´æ–°å’Œæ™ºèƒ½åˆå¹¶\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nconsole.log('ğŸ”„ å¼€å§‹ç¿»è¯‘åŒæ­¥å’Œæ›´æ–°...\\n');\n\n// é…ç½®\nconst CONFIG = {\n  LOCALES: ['en', 'zh'],\n  MESSAGES_DIR: path.join(process.cwd(), 'messages'),\n  BACKUP_DIR: path.join(process.cwd(), 'backups', 'translations'),\n  OUTPUT_DIR: path.join(process.cwd(), 'reports'),\n\n  // åŒæ­¥é€‰é¡¹\n  SYNC_OPTIONS: {\n    createMissingKeys: true,\n    removeUnusedKeys: false, // è°¨æ…åˆ é™¤ï¼Œé»˜è®¤ä¸åˆ é™¤\n    backupBeforeSync: true,\n    validateAfterSync: true,\n  },\n};\n\nconst syncResults = {\n  processed: 0,\n  created: 0,\n  updated: 0,\n  removed: 0,\n  errors: [],\n  warnings: [],\n  backups: [],\n};\n\n/**\n * åˆ›å»ºå¤‡ä»½\n */\nfunction createBackup() {\n  if (!CONFIG.SYNC_OPTIONS.backupBeforeSync) return;\n\n  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n  const backupDir = path.join(CONFIG.BACKUP_DIR, timestamp);\n\n  if (!fs.existsSync(backupDir)) {\n    fs.mkdirSync(backupDir, { recursive: true });\n  }\n\n  for (const locale of CONFIG.LOCALES) {\n    const sourceFile = path.join(CONFIG.MESSAGES_DIR, `${locale}.json`);\n    const backupFile = path.join(backupDir, `${locale}.json`);\n\n    if (fs.existsSync(sourceFile)) {\n      fs.copyFileSync(sourceFile, backupFile);\n      syncResults.backups.push(backupFile);\n      console.log(`ğŸ’¾ å¤‡ä»½åˆ›å»º: ${locale}.json -> ${backupFile}`);\n    }\n  }\n\n  console.log(`ğŸ“¦ å¤‡ä»½ç›®å½•: ${backupDir}\\n`);\n}\n\n/**\n * åŠ è½½ç¿»è¯‘æ–‡ä»¶\n */\nfunction loadTranslations() {\n  const translations = {};\n\n  for (const locale of CONFIG.LOCALES) {\n    const filePath = path.join(CONFIG.MESSAGES_DIR, `${locale}.json`);\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      translations[locale] = JSON.parse(content);\n      console.log(`ğŸ“– åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json`);\n    } catch (error) {\n      console.warn(`âš ï¸  æ— æ³•åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json - ${error.message}`);\n      translations[locale] = {};\n    }\n  }\n\n  return translations;\n}\n\n/**\n * è·å–æ‰€æœ‰ç¿»è¯‘é”®çš„å¹¶é›†\n */\nfunction getAllTranslationKeys(translations) {\n  const allKeys = new Set();\n\n  function extractKeys(obj, prefix = '') {\n    for (const [key, value] of Object.entries(obj)) {\n      const fullKey = prefix ? `${prefix}.${key}` : key;\n\n      if (typeof value === 'object' && value !== null) {\n        extractKeys(value, fullKey);\n      } else {\n        allKeys.add(fullKey);\n      }\n    }\n  }\n\n  for (const locale of CONFIG.LOCALES) {\n    if (translations[locale]) {\n      extractKeys(translations[locale]);\n    }\n  }\n\n  return Array.from(allKeys).sort();\n}\n\n/**\n * è·å–åµŒå¥—å¯¹è±¡çš„å€¼\n */\nfunction getNestedValue(obj, path) {\n  return path.split('.').reduce((current, key) => {\n    return current && current[key] !== undefined ? current[key] : undefined;\n  }, obj);\n}\n\n/**\n * è®¾ç½®åµŒå¥—å¯¹è±¡çš„å€¼\n */\nfunction setNestedValue(obj, path, value) {\n  const keys = path.split('.');\n  const lastKey = keys.pop();\n\n  let current = obj;\n  for (const key of keys) {\n    if (!current[key] || typeof current[key] !== 'object') {\n      current[key] = {};\n    }\n    current = current[key];\n  }\n\n  current[lastKey] = value;\n}\n\n/**\n * åŒæ­¥ç¿»è¯‘é”®\n */\nfunction syncTranslationKeys(translations) {\n  const allKeys = getAllTranslationKeys(translations);\n  const syncedTranslations = JSON.parse(JSON.stringify(translations));\n\n  console.log(`ğŸ” å‘ç° ${allKeys.length} ä¸ªå”¯ä¸€ç¿»è¯‘é”®\\n`);\n\n  for (const key of allKeys) {\n    for (const locale of CONFIG.LOCALES) {\n      const currentValue = getNestedValue(syncedTranslations[locale], key);\n\n      if (currentValue === undefined) {\n        if (CONFIG.SYNC_OPTIONS.createMissingKeys) {\n          // å°è¯•ä»å…¶ä»–è¯­è¨€å¤åˆ¶æˆ–åˆ›å»ºå ä½ç¬¦\n          let fallbackValue = null;\n\n          // é¦–å…ˆå°è¯•ä»è‹±æ–‡å¤åˆ¶\n          if (locale !== 'en') {\n            fallbackValue = getNestedValue(syncedTranslations['en'], key);\n          }\n\n          // å¦‚æœæ²¡æœ‰è‹±æ–‡ï¼Œå°è¯•ä»å…¶ä»–è¯­è¨€å¤åˆ¶\n          if (!fallbackValue) {\n            for (const otherLocale of CONFIG.LOCALES) {\n              if (otherLocale !== locale) {\n                const otherValue = getNestedValue(\n                  syncedTranslations[otherLocale],\n                  key,\n                );\n                if (otherValue && typeof otherValue === 'string') {\n                  fallbackValue = otherValue;\n                  break;\n                }\n              }\n            }\n          }\n\n          // å¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œåˆ›å»ºå ä½ç¬¦\n          if (!fallbackValue) {\n            fallbackValue = `[TODO: ${key}]`;\n          }\n\n          setNestedValue(syncedTranslations[locale], key, fallbackValue);\n          syncResults.created++;\n\n          console.log(`â• åˆ›å»ºç¼ºå¤±é”®: ${locale}.${key} = \"${fallbackValue}\"`);\n        }\n      }\n    }\n  }\n\n  return syncedTranslations;\n}\n\n/**\n * éªŒè¯ç¿»è¯‘å®Œæ•´æ€§\n */\nfunction validateTranslations(translations) {\n  const issues = [];\n  const allKeys = getAllTranslationKeys(translations);\n\n  for (const key of allKeys) {\n    const values = {};\n\n    for (const locale of CONFIG.LOCALES) {\n      values[locale] = getNestedValue(translations[locale], key);\n    }\n\n    // æ£€æŸ¥ç¼ºå¤±å€¼\n    const missingLocales = CONFIG.LOCALES.filter(\n      (locale) => values[locale] === undefined || values[locale] === '',\n    );\n\n    if (missingLocales.length > 0) {\n      issues.push({\n        type: 'missing_translation',\n        key,\n        locales: missingLocales,\n      });\n    }\n\n    // æ£€æŸ¥å¯ç–‘çš„æœªç¿»è¯‘å†…å®¹\n    const stringValues = Object.entries(values)\n      .filter(([_, value]) => typeof value === 'string' && value.trim() !== '')\n      .map(([locale, value]) => ({ locale, value }));\n\n    if (stringValues.length > 1) {\n      const firstValue = stringValues[0].value;\n      const sameValues = stringValues.filter(\n        ({ value }) => value === firstValue,\n      );\n\n      if (\n        sameValues.length === stringValues.length &&\n        !key.includes('url') &&\n        firstValue.length > 3 &&\n        !firstValue.startsWith('[TODO:')\n      ) {\n        issues.push({\n          type: 'suspicious_translation',\n          key,\n          value: firstValue,\n        });\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * ä¿å­˜ç¿»è¯‘æ–‡ä»¶\n */\nfunction saveTranslations(translations) {\n  for (const locale of CONFIG.LOCALES) {\n    const filePath = path.join(CONFIG.MESSAGES_DIR, `${locale}.json`);\n\n    try {\n      const content = `${JSON.stringify(translations[locale], null, 2)  }\\n`;\n      fs.writeFileSync(filePath, content, 'utf8');\n      syncResults.updated++;\n      console.log(`ğŸ’¾ ä¿å­˜ç¿»è¯‘æ–‡ä»¶: ${locale}.json`);\n    } catch (error) {\n      syncResults.errors.push({\n        type: 'save_error',\n        locale,\n        error: error.message,\n      });\n      console.error(`âŒ ä¿å­˜å¤±è´¥: ${locale}.json - ${error.message}`);\n    }\n  }\n}\n\n/**\n * ç”ŸæˆåŒæ­¥æŠ¥å‘Š\n */\nfunction generateSyncReport(validationIssues) {\n  const report = {\n    timestamp: new Date().toISOString(),\n    summary: {\n      processed: syncResults.processed,\n      created: syncResults.created,\n      updated: syncResults.updated,\n      removed: syncResults.removed,\n      errorCount: syncResults.errors.length,\n      warningCount: syncResults.warnings.length,\n      backupCount: syncResults.backups.length,\n    },\n    validationIssues,\n    errors: syncResults.errors,\n    warnings: syncResults.warnings,\n    backups: syncResults.backups,\n  };\n\n  // ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨\n  if (!fs.existsSync(CONFIG.OUTPUT_DIR)) {\n    fs.mkdirSync(CONFIG.OUTPUT_DIR, { recursive: true });\n  }\n\n  const reportPath = path.join(\n    CONFIG.OUTPUT_DIR,\n    'translation-sync-report.json',\n  );\n  fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n\n  console.log(`ğŸ“Š åŒæ­¥æŠ¥å‘Šå·²ç”Ÿæˆ: ${reportPath}`);\n  return report;\n}\n\n/**\n * æ˜¾ç¤ºåŒæ­¥ç»“æœ\n */\nfunction displayResults(validationIssues) {\n  console.log('\\nğŸ“Š åŒæ­¥ç»Ÿè®¡:\\n');\n  console.log(`   å¤„ç†æ–‡ä»¶: ${syncResults.processed}`);\n  console.log(`   åˆ›å»ºé”®: ${syncResults.created}`);\n  console.log(`   æ›´æ–°æ–‡ä»¶: ${syncResults.updated}`);\n  console.log(`   åˆ é™¤é”®: ${syncResults.removed}`);\n  console.log(`   é”™è¯¯: ${syncResults.errors.length}`);\n  console.log(`   è­¦å‘Š: ${syncResults.warnings.length}`);\n  console.log(`   å¤‡ä»½: ${syncResults.backups.length}\\n`);\n\n  // æ˜¾ç¤ºéªŒè¯é—®é¢˜\n  if (validationIssues.length > 0) {\n    console.log('âš ï¸  å‘ç°çš„é—®é¢˜:');\n\n    const missingTranslations = validationIssues.filter(\n      (issue) => issue.type === 'missing_translation',\n    );\n\n    const suspiciousTranslations = validationIssues.filter(\n      (issue) => issue.type === 'suspicious_translation',\n    );\n\n    if (missingTranslations.length > 0) {\n      console.log(`   ç¼ºå¤±ç¿»è¯‘: ${missingTranslations.length} ä¸ªé”®`);\n    }\n\n    if (suspiciousTranslations.length > 0) {\n      console.log(`   å¯ç–‘ç¿»è¯‘: ${suspiciousTranslations.length} ä¸ªé”®`);\n    }\n\n    console.log();\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  try {\n    // åˆ›å»ºå¤‡ä»½\n    createBackup();\n\n    // åŠ è½½ç¿»è¯‘æ–‡ä»¶\n    const translations = loadTranslations();\n    syncResults.processed = CONFIG.LOCALES.length;\n\n    // åŒæ­¥ç¿»è¯‘é”®\n    const syncedTranslations = syncTranslationKeys(translations);\n\n    // ä¿å­˜ç¿»è¯‘æ–‡ä»¶\n    saveTranslations(syncedTranslations);\n\n    // éªŒè¯ç¿»è¯‘å®Œæ•´æ€§\n    let validationIssues = [];\n    if (CONFIG.SYNC_OPTIONS.validateAfterSync) {\n      console.log('\\nğŸ” éªŒè¯ç¿»è¯‘å®Œæ•´æ€§...');\n      validationIssues = validateTranslations(syncedTranslations);\n    }\n\n    // ç”ŸæˆæŠ¥å‘Š\n    generateSyncReport(validationIssues);\n\n    // æ˜¾ç¤ºç»“æœ\n    displayResults(validationIssues);\n\n    // åˆ¤æ–­æ˜¯å¦é€šè¿‡\n    const hasErrors = syncResults.errors.length > 0;\n    const hasCriticalIssues = validationIssues.some(\n      (issue) => issue.type === 'missing_translation',\n    );\n\n    if (!hasErrors && !hasCriticalIssues) {\n      console.log('âœ… ç¿»è¯‘åŒæ­¥å®Œæˆï¼æ‰€æœ‰ç¿»è¯‘æ–‡ä»¶å·²æˆåŠŸåŒæ­¥ã€‚\\n');\n      process.exit(0);\n    } else if (!hasErrors && hasCriticalIssues) {\n      console.log('âš ï¸  ç¿»è¯‘åŒæ­¥å®Œæˆï¼Œä½†å­˜åœ¨éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚\\n');\n      process.exit(0);\n    } else {\n      console.log('âŒ ç¿»è¯‘åŒæ­¥å¤±è´¥ï¼å­˜åœ¨éœ€è¦ä¿®å¤çš„é”™è¯¯ã€‚\\n');\n      process.exit(1);\n    }\n  } catch (error) {\n    console.error('ğŸ’¥ ç¿»è¯‘åŒæ­¥å¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\n// è¿è¡Œä¸»å‡½æ•°\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/translation-validator.js","messages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":101,"column":23,"nodeType":"CallExpression","endLine":101,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":102,"column":7,"nodeType":"MemberExpression","endLine":102,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":132,"column":9,"nodeType":"MemberExpression","endLine":132,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":133,"column":19,"nodeType":"MemberExpression","endLine":133,"endColumn":39},{"ruleId":"no-shadow","severity":2,"message":"'path' is already declared in the upper scope on line 9 column 7.","line":143,"column":30,"nodeType":"Identifier","messageId":"noShadow","endLine":143,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":145,"column":23,"nodeType":"MemberExpression","endLine":145,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":145,"column":52,"nodeType":"MemberExpression","endLine":145,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":157,"column":36,"nodeType":"MemberExpression","endLine":157,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":182,"column":36,"nodeType":"MemberExpression","endLine":182,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":209,"column":36,"nodeType":"MemberExpression","endLine":209,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":210,"column":7,"nodeType":"MemberExpression","endLine":210,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":265,"column":36,"nodeType":"MemberExpression","endLine":265,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":267,"column":9,"nodeType":"MemberExpression","endLine":267,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":308,"column":36,"nodeType":"MemberExpression","endLine":308,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":313,"column":9,"nodeType":"MemberExpression","endLine":313,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":319,"column":19,"nodeType":"MemberExpression","endLine":319,"endColumn":39},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":326,"column":50,"nodeType":"MemberExpression","endLine":326,"endColumn":76},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":380,"column":36,"nodeType":"MemberExpression","endLine":380,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":383,"column":9,"nodeType":"MemberExpression","endLine":383,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":434,"column":36,"nodeType":"MemberExpression","endLine":434,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":446,"column":5,"nodeType":"MemberExpression","endLine":446,"endColumn":21},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":477,"column":8,"nodeType":"CallExpression","endLine":477,"endColumn":40},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found mkdirSync from package \"fs\" with non literal argument at index 0","line":478,"column":5,"nodeType":"CallExpression","endLine":478,"endColumn":57},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found writeFileSync from package \"fs\" with non literal argument at index 0","line":485,"column":3,"nodeType":"CallExpression","endLine":485,"endColumn":64},{"ruleId":"max-statements","severity":1,"message":"Async function 'main' has too many statements (40). Maximum allowed is 35.","line":550,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":635,"endColumn":2},{"ruleId":"require-await","severity":1,"message":"Async function 'main' has no 'await' expression.","line":550,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":550,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[12120,12126],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥å·¥å…·\n * éªŒè¯ç¿»è¯‘æ–‡ä»¶çš„å®Œæ•´æ€§ã€ä¸€è‡´æ€§å’Œè´¨é‡\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\nconsole.log('ğŸ” å¼€å§‹ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥...\\n');\n\n// é…ç½®\nconst CONFIG = {\n  LOCALES: ['en', 'zh'],\n  MESSAGES_DIR: path.join(process.cwd(), 'messages'),\n  OUTPUT_DIR: path.join(process.cwd(), 'reports'),\n\n  // éªŒè¯è§„åˆ™\n  VALIDATION_RULES: {\n    checkMissingKeys: true,\n    checkEmptyValues: true,\n    checkTypeConsistency: true,\n    checkSuspiciousTranslations: true,\n    checkPlaceholderConsistency: true,\n    checkTranslationLength: true,\n    checkSpecialCharacters: true,\n  },\n\n  // è´¨é‡é˜ˆå€¼\n  QUALITY_THRESHOLDS: {\n    minTranslationCoverage: 95, // æœ€å°ç¿»è¯‘è¦†ç›–ç‡ (%)\n    maxLengthRatio: 6.0, // ç¿»è¯‘é•¿åº¦æ¯”ä¾‹ä¸Šé™ (ä¸­è‹±æ–‡å·®å¼‚è¾ƒå¤§æ˜¯æ­£å¸¸çš„)\n    minLengthRatio: 0.2, // ç¿»è¯‘é•¿åº¦æ¯”ä¾‹ä¸‹é™\n  },\n\n  // ç™½åå•é…ç½®\n  WHITELIST: {\n    // å“ç‰Œåç§°å’Œä¸“æœ‰åè¯ (å…è®¸ç›¸åŒ)\n    brandTerms: [\n      'Tucsenberg',\n      'Next.js',\n      'React',\n      'TypeScript',\n      'GitHub',\n      'LinkedIn',\n      'Twitter',\n      'API',\n      'URL',\n      'SEO',\n      'UI',\n      'UX',\n      'CSS',\n      'HTML',\n      'JavaScript',\n    ],\n\n    // URLå’Œé“¾æ¥ (å…è®¸ç›¸åŒ)\n    urlPatterns: [\n      /^https?:\\/\\//,\n      /^mailto:/,\n      /^tel:/,\n      /\\.com$/,\n      /\\.org$/,\n      /\\.net$/,\n    ],\n\n    // å…è®¸ç›¸åŒå€¼çš„é”®æ¨¡å¼\n    allowSameValueKeys: [\n      /\\.url$/,\n      /\\.link$/,\n      /\\.email$/,\n      /\\.phone$/,\n      /social\\./,\n      /structured-data\\./,\n      /schema\\./,\n    ],\n  },\n};\n\nconst validationResults = {\n  totalKeys: 0,\n  validatedKeys: 0,\n  issues: [],\n  warnings: [],\n  statistics: {\n    coverage: {},\n    quality: {},\n  },\n};\n\n/**\n * åŠ è½½ç¿»è¯‘æ–‡ä»¶\n */\nfunction loadTranslations() {\n  const translations = {};\n\n  for (const locale of CONFIG.LOCALES) {\n    const filePath = path.join(CONFIG.MESSAGES_DIR, `${locale}.json`);\n    try {\n      const content = fs.readFileSync(filePath, 'utf8');\n      translations[locale] = JSON.parse(content);\n      console.log(`ğŸ“– åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json`);\n    } catch (error) {\n      console.error(`âŒ æ— æ³•åŠ è½½ç¿»è¯‘æ–‡ä»¶: ${locale}.json - ${error.message}`);\n      process.exit(1);\n    }\n  }\n\n  return translations;\n}\n\n/**\n * è·å–æ‰€æœ‰ç¿»è¯‘é”®\n */\nfunction getAllTranslationKeys(translations) {\n  const allKeys = new Set();\n\n  function extractKeys(obj, prefix = '') {\n    for (const [key, value] of Object.entries(obj)) {\n      const fullKey = prefix ? `${prefix}.${key}` : key;\n\n      if (typeof value === 'object' && value !== null) {\n        extractKeys(value, fullKey);\n      } else {\n        allKeys.add(fullKey);\n      }\n    }\n  }\n\n  for (const locale of CONFIG.LOCALES) {\n    if (translations[locale]) {\n      extractKeys(translations[locale]);\n    }\n  }\n\n  return Array.from(allKeys).sort();\n}\n\n/**\n * è·å–åµŒå¥—å¯¹è±¡çš„å€¼\n */\nfunction getNestedValue(obj, path) {\n  return path.split('.').reduce((current, key) => {\n    return current && current[key] !== undefined ? current[key] : undefined;\n  }, obj);\n}\n\n/**\n * éªŒè¯ç¼ºå¤±é”®\n */\nfunction validateMissingKeys(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n\n      if (value === undefined) {\n        issues.push({\n          type: 'missing_key',\n          severity: 'error',\n          key,\n          locale,\n          message: `ç¿»è¯‘é”® \"${key}\" åœ¨ ${locale} ä¸­ç¼ºå¤±`,\n        });\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * éªŒè¯ç©ºå€¼\n */\nfunction validateEmptyValues(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n\n      if (typeof value === 'string' && value.trim() === '') {\n        issues.push({\n          type: 'empty_value',\n          severity: 'warning',\n          key,\n          locale,\n          message: `ç¿»è¯‘é”® \"${key}\" åœ¨ ${locale} ä¸­ä¸ºç©ºå€¼`,\n        });\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * éªŒè¯ç±»å‹ä¸€è‡´æ€§\n */\nfunction validateTypeConsistency(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    const types = {};\n\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n      types[locale] = typeof value;\n    }\n\n    const uniqueTypes = new Set(\n      Object.values(types).filter((t) => t !== 'undefined'),\n    );\n\n    if (uniqueTypes.size > 1) {\n      issues.push({\n        type: 'type_inconsistency',\n        severity: 'error',\n        key,\n        types,\n        message: `ç¿»è¯‘é”® \"${key}\" åœ¨ä¸åŒè¯­è¨€ä¸­ç±»å‹ä¸ä¸€è‡´: ${JSON.stringify(types)}`,\n      });\n    }\n  }\n\n  return issues;\n}\n\n/**\n * æ£€æŸ¥å€¼æ˜¯å¦åœ¨ç™½åå•ä¸­\n */\nfunction isWhitelistedValue(key, value) {\n  // æ£€æŸ¥å“ç‰Œæœ¯è¯­\n  if (CONFIG.WHITELIST.brandTerms.some((term) => value.includes(term))) {\n    return true;\n  }\n\n  // æ£€æŸ¥URLæ¨¡å¼\n  if (CONFIG.WHITELIST.urlPatterns.some((pattern) => pattern.test(value))) {\n    return true;\n  }\n\n  // æ£€æŸ¥é”®æ¨¡å¼\n  if (\n    CONFIG.WHITELIST.allowSameValueKeys.some((pattern) => pattern.test(key))\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * éªŒè¯å¯ç–‘ç¿»è¯‘\n */\nfunction validateSuspiciousTranslations(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    const values = {};\n\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n      if (typeof value === 'string' && value.trim() !== '') {\n        values[locale] = value;\n      }\n    }\n\n    const stringValues = Object.values(values);\n\n    // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å€¼éƒ½ç›¸åŒ\n    if (stringValues.length > 1) {\n      const firstValue = stringValues[0];\n      const allSame = stringValues.every((value) => value === firstValue);\n\n      if (\n        allSame &&\n        !firstValue.startsWith('[TODO:') &&\n        firstValue.length > 3 &&\n        !isWhitelistedValue(key, firstValue)\n      ) {\n        issues.push({\n          type: 'suspicious_translation',\n          severity: 'warning',\n          key,\n          value: firstValue,\n          message: `ç¿»è¯‘é”® \"${key}\" åœ¨æ‰€æœ‰è¯­è¨€ä¸­éƒ½æ˜¯ç›¸åŒçš„å€¼ï¼Œå¯èƒ½æœªç¿»è¯‘`,\n        });\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * éªŒè¯å ä½ç¬¦ä¸€è‡´æ€§\n */\nfunction validatePlaceholderConsistency(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    const placeholders = {};\n\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n\n      if (typeof value === 'string') {\n        // æå–å ä½ç¬¦ {variable}\n        const matches = value.match(/\\{[^}]+\\}/g) || [];\n        placeholders[locale] = matches.sort();\n      }\n    }\n\n    // æ£€æŸ¥å ä½ç¬¦æ˜¯å¦ä¸€è‡´\n    const localesWithPlaceholders = Object.keys(placeholders).filter(\n      (locale) => placeholders[locale].length > 0,\n    );\n\n    if (localesWithPlaceholders.length > 1) {\n      const firstPlaceholders = placeholders[localesWithPlaceholders[0]];\n\n      for (let i = 1; i < localesWithPlaceholders.length; i++) {\n        const currentPlaceholders = placeholders[localesWithPlaceholders[i]];\n\n        if (\n          JSON.stringify(firstPlaceholders) !==\n          JSON.stringify(currentPlaceholders)\n        ) {\n          issues.push({\n            type: 'placeholder_inconsistency',\n            severity: 'error',\n            key,\n            placeholders,\n            message: `ç¿»è¯‘é”® \"${key}\" çš„å ä½ç¬¦åœ¨ä¸åŒè¯­è¨€ä¸­ä¸ä¸€è‡´`,\n          });\n          break;\n        }\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦åº”è¯¥è·³è¿‡é•¿åº¦æ£€æŸ¥\n */\nfunction shouldSkipLengthCheck(key, lengths) {\n  // è·³è¿‡å¾ˆçŸ­çš„æ–‡æœ¬ (å•è¯æˆ–çŸ­è¯­)\n  const maxLength = Math.max(...Object.values(lengths));\n  if (maxLength < 10) {\n    return true;\n  }\n\n  // è·³è¿‡ç‰¹å®šç±»å‹çš„é”®\n  const skipPatterns = [\n    /\\.title$/,\n    /\\.name$/,\n    /\\.label$/,\n    /common\\./,\n    /accessibility\\./,\n  ];\n\n  return skipPatterns.some((pattern) => pattern.test(key));\n}\n\n/**\n * éªŒè¯ç¿»è¯‘é•¿åº¦\n */\nfunction validateTranslationLength(translations, allKeys) {\n  const issues = [];\n\n  for (const key of allKeys) {\n    const lengths = {};\n\n    for (const locale of CONFIG.LOCALES) {\n      const value = getNestedValue(translations[locale], key);\n\n      if (typeof value === 'string') {\n        lengths[locale] = value.length;\n      }\n    }\n\n    const validLengths = Object.values(lengths).filter((len) => len > 0);\n\n    if (validLengths.length > 1) {\n      const maxLength = Math.max(...validLengths);\n      const minLength = Math.min(...validLengths);\n      const ratio = maxLength / minLength;\n\n      // è·³è¿‡æŸäº›ç±»å‹çš„é•¿åº¦æ£€æŸ¥\n      if (shouldSkipLengthCheck(key, lengths)) {\n        continue;\n      }\n\n      if (ratio > CONFIG.QUALITY_THRESHOLDS.maxLengthRatio) {\n        issues.push({\n          type: 'length_ratio_high',\n          severity: 'warning',\n          key,\n          lengths,\n          ratio: ratio.toFixed(2),\n          message: `ç¿»è¯‘é”® \"${key}\" çš„é•¿åº¦æ¯”ä¾‹è¿‡é«˜ (${ratio.toFixed(2)})ï¼Œå¯èƒ½å­˜åœ¨ç¿»è¯‘è´¨é‡é—®é¢˜`,\n        });\n      } else if (ratio < CONFIG.QUALITY_THRESHOLDS.minLengthRatio) {\n        issues.push({\n          type: 'length_ratio_low',\n          severity: 'warning',\n          key,\n          lengths,\n          ratio: ratio.toFixed(2),\n          message: `ç¿»è¯‘é”® \"${key}\" çš„é•¿åº¦æ¯”ä¾‹è¿‡ä½ (${ratio.toFixed(2)})ï¼Œå¯èƒ½å­˜åœ¨ç¿»è¯‘ä¸å®Œæ•´`,\n        });\n      }\n    }\n  }\n\n  return issues;\n}\n\n/**\n * è®¡ç®—ç¿»è¯‘è¦†ç›–ç‡\n */\nfunction calculateCoverage(translations, allKeys) {\n  const coverage = {};\n\n  for (const locale of CONFIG.LOCALES) {\n    let translatedKeys = 0;\n\n    for (const key of allKeys) {\n      const value = getNestedValue(translations[locale], key);\n\n      if (\n        value !== undefined &&\n        typeof value === 'string' &&\n        value.trim() !== '' &&\n        !value.startsWith('[TODO:')\n      ) {\n        translatedKeys++;\n      }\n    }\n\n    coverage[locale] = {\n      total: allKeys.length,\n      translated: translatedKeys,\n      percentage: ((translatedKeys / allKeys.length) * 100).toFixed(2),\n    };\n  }\n\n  return coverage;\n}\n\n/**\n * ç”ŸæˆéªŒè¯æŠ¥å‘Š\n */\nfunction generateValidationReport() {\n  const report = {\n    timestamp: new Date().toISOString(),\n    summary: {\n      totalKeys: validationResults.totalKeys,\n      validatedKeys: validationResults.validatedKeys,\n      issueCount: validationResults.issues.length,\n      warningCount: validationResults.warnings.length,\n      errorCount: validationResults.issues.filter(\n        (issue) => issue.severity === 'error',\n      ).length,\n    },\n    statistics: validationResults.statistics,\n    issues: validationResults.issues,\n    warnings: validationResults.warnings,\n  };\n\n  // ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨\n  if (!fs.existsSync(CONFIG.OUTPUT_DIR)) {\n    fs.mkdirSync(CONFIG.OUTPUT_DIR, { recursive: true });\n  }\n\n  const reportPath = path.join(\n    CONFIG.OUTPUT_DIR,\n    'translation-validation-report.json',\n  );\n  fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n\n  console.log(`ğŸ“Š éªŒè¯æŠ¥å‘Šå·²ç”Ÿæˆ: ${reportPath}`);\n  return report;\n}\n\n/**\n * æ˜¾ç¤ºéªŒè¯ç»“æœ\n */\nfunction displayResults() {\n  console.log('\\nğŸ“Š éªŒè¯ç»Ÿè®¡:\\n');\n  console.log(`   æ€»é”®æ•°: ${validationResults.totalKeys}`);\n  console.log(`   éªŒè¯é”®æ•°: ${validationResults.validatedKeys}`);\n  console.log(`   é—®é¢˜æ•°: ${validationResults.issues.length}`);\n  console.log(\n    `   é”™è¯¯æ•°: ${validationResults.issues.filter((i) => i.severity === 'error').length}`,\n  );\n  console.log(\n    `   è­¦å‘Šæ•°: ${validationResults.issues.filter((i) => i.severity === 'warning').length}\\n`,\n  );\n\n  // æ˜¾ç¤ºè¦†ç›–ç‡\n  console.log('ğŸ“ˆ ç¿»è¯‘è¦†ç›–ç‡:');\n  for (const [locale, coverage] of Object.entries(\n    validationResults.statistics.coverage,\n  )) {\n    console.log(\n      `   ${locale}: ${coverage.percentage}% (${coverage.translated}/${coverage.total})`,\n    );\n  }\n  console.log();\n\n  // æ˜¾ç¤ºä¸»è¦é—®é¢˜\n  const errorIssues = validationResults.issues.filter(\n    (issue) => issue.severity === 'error',\n  );\n  if (errorIssues.length > 0) {\n    console.log('âŒ ä¸»è¦é”™è¯¯:');\n    errorIssues.slice(0, 5).forEach((issue) => {\n      console.log(`   - ${issue.message}`);\n    });\n    if (errorIssues.length > 5) {\n      console.log(`   ... è¿˜æœ‰ ${errorIssues.length - 5} ä¸ªé”™è¯¯`);\n    }\n    console.log();\n  }\n\n  const warningIssues = validationResults.issues.filter(\n    (issue) => issue.severity === 'warning',\n  );\n  if (warningIssues.length > 0) {\n    console.log('âš ï¸  ä¸»è¦è­¦å‘Š:');\n    warningIssues.slice(0, 5).forEach((issue) => {\n      console.log(`   - ${issue.message}`);\n    });\n    if (warningIssues.length > 5) {\n      console.log(`   ... è¿˜æœ‰ ${warningIssues.length - 5} ä¸ªè­¦å‘Š`);\n    }\n    console.log();\n  }\n}\n\n/**\n * ä¸»å‡½æ•°\n */\nasync function main() {\n  try {\n    // åŠ è½½ç¿»è¯‘æ–‡ä»¶\n    const translations = loadTranslations();\n\n    // è·å–æ‰€æœ‰ç¿»è¯‘é”®\n    const allKeys = getAllTranslationKeys(translations);\n    validationResults.totalKeys = allKeys.length;\n    validationResults.validatedKeys = allKeys.length;\n\n    console.log(`ğŸ” å¼€å§‹éªŒè¯ ${allKeys.length} ä¸ªç¿»è¯‘é”®...\\n`);\n\n    // æ‰§è¡Œå„ç§éªŒè¯\n    const allIssues = [];\n\n    if (CONFIG.VALIDATION_RULES.checkMissingKeys) {\n      console.log('ğŸ” æ£€æŸ¥ç¼ºå¤±é”®...');\n      allIssues.push(...validateMissingKeys(translations, allKeys));\n    }\n\n    if (CONFIG.VALIDATION_RULES.checkEmptyValues) {\n      console.log('ğŸ” æ£€æŸ¥ç©ºå€¼...');\n      allIssues.push(...validateEmptyValues(translations, allKeys));\n    }\n\n    if (CONFIG.VALIDATION_RULES.checkTypeConsistency) {\n      console.log('ğŸ” æ£€æŸ¥ç±»å‹ä¸€è‡´æ€§...');\n      allIssues.push(...validateTypeConsistency(translations, allKeys));\n    }\n\n    if (CONFIG.VALIDATION_RULES.checkSuspiciousTranslations) {\n      console.log('ğŸ” æ£€æŸ¥å¯ç–‘ç¿»è¯‘...');\n      allIssues.push(...validateSuspiciousTranslations(translations, allKeys));\n    }\n\n    if (CONFIG.VALIDATION_RULES.checkPlaceholderConsistency) {\n      console.log('ğŸ” æ£€æŸ¥å ä½ç¬¦ä¸€è‡´æ€§...');\n      allIssues.push(...validatePlaceholderConsistency(translations, allKeys));\n    }\n\n    if (CONFIG.VALIDATION_RULES.checkTranslationLength) {\n      console.log('ğŸ” æ£€æŸ¥ç¿»è¯‘é•¿åº¦...');\n      allIssues.push(...validateTranslationLength(translations, allKeys));\n    }\n\n    // è®¡ç®—ç»Ÿè®¡ä¿¡æ¯\n    validationResults.statistics.coverage = calculateCoverage(\n      translations,\n      allKeys,\n    );\n    validationResults.issues = allIssues;\n\n    // ç”ŸæˆæŠ¥å‘Š\n    generateValidationReport();\n\n    // æ˜¾ç¤ºç»“æœ\n    displayResults();\n\n    // åˆ¤æ–­æ˜¯å¦é€šè¿‡\n    const errorCount = validationResults.issues.filter(\n      (issue) => issue.severity === 'error',\n    ).length;\n    const minCoverage = Math.min(\n      ...Object.values(validationResults.statistics.coverage).map((c) =>\n        parseFloat(c.percentage),\n      ),\n    );\n\n    if (\n      errorCount === 0 &&\n      minCoverage >= CONFIG.QUALITY_THRESHOLDS.minTranslationCoverage\n    ) {\n      console.log('âœ… ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡ï¼æ‰€æœ‰ç¿»è¯‘æ–‡ä»¶è´¨é‡è‰¯å¥½ã€‚\\n');\n      process.exit(0);\n    } else if (errorCount === 0) {\n      console.log('âš ï¸  ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥åŸºæœ¬é€šè¿‡ï¼Œä½†è¦†ç›–ç‡éœ€è¦æå‡ã€‚\\n');\n      process.exit(0);\n    } else {\n      console.log('âŒ ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥å¤±è´¥ï¼å­˜åœ¨éœ€è¦ä¿®å¤çš„é”™è¯¯ã€‚\\n');\n      process.exit(1);\n    }\n  } catch (error) {\n    console.error('ğŸ’¥ ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥å¤±è´¥:', error.message);\n    process.exit(1);\n  }\n}\n\n// è¿è¡Œä¸»å‡½æ•°\nmain();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/type-check-staged.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[204,233],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * å¢é‡TypeScriptç±»å‹æ£€æŸ¥ï¼ˆä»…é’ˆå¯¹æš‚å­˜æ–‡ä»¶ï¼‰\n * - è¯»å– Git æš‚å­˜åŒºçš„ TypeScript æ–‡ä»¶åˆ—è¡¨\n * - ä»…å¯¹è¿™äº›æ–‡ä»¶è¿è¡Œ tsc --noEmit\n * - ä¼˜åŒ–pre-commitæ€§èƒ½ï¼Œé¿å…å…¨é‡ç±»å‹æ£€æŸ¥\n */\n\nconst { execSync, spawnSync } = require('child_process');\nconst path = require('path');\n\nfunction getStagedTSFiles() {\n  try {\n    const output = execSync(\n      'git diff --name-only --cached --diff-filter=ACMR',\n      { stdio: ['ignore', 'pipe', 'ignore'] },\n    )\n      .toString()\n      .trim();\n    if (!output) return [];\n    return output.split('\\n').filter((f) => /\\.(ts|tsx)$/i.test(f));\n  } catch {\n    return [];\n  }\n}\n\nfunction runTypeCheck(files) {\n  if (files.length === 0) {\n    console.log('[type-check:staged] æ— éœ€æ£€æŸ¥ï¼šæ²¡æœ‰æš‚å­˜çš„ TypeScript æ–‡ä»¶');\n    return 0;\n  }\n\n  console.log(`[type-check:staged] æ£€æŸ¥ ${files.length} ä¸ª TypeScript æ–‡ä»¶...`);\n\n  // ä½¿ç”¨ tsc --noEmit å¯¹æŒ‡å®šæ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥\n  // æ³¨æ„ï¼štsc ä¸æ”¯æŒç›´æ¥æŒ‡å®šæ–‡ä»¶åˆ—è¡¨è¿›è¡Œ --noEmit æ£€æŸ¥\n  // æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é¡¹ç›®é…ç½®ï¼Œä½†åªåœ¨æœ‰TSæ–‡ä»¶å˜æ›´æ—¶è¿è¡Œ\n  const result = spawnSync('npx', ['tsc', '--noEmit', '--skipLibCheck'], {\n    stdio: 'inherit',\n    cwd: process.cwd(),\n  });\n\n  if (result.status !== 0) {\n    console.error('[type-check:staged] TypeScript ç±»å‹æ£€æŸ¥å¤±è´¥');\n    console.error('è¯·ä¿®å¤ç±»å‹é”™è¯¯åé‡æ–°æäº¤');\n    return result.status;\n  }\n\n  console.log('[type-check:staged] âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡');\n  return 0;\n}\n\nfunction main() {\n  const stagedFiles = getStagedTSFiles();\n  const exitCode = runTypeCheck(stagedFiles);\n  process.exit(exitCode);\n}\n\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { getStagedTSFiles, runTypeCheck };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/validate-colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/validate-magic-numbers.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'severity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"severity"},"fix":{"range":[1281,1289],"text":""},"desc":"Remove unused variable 'severity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'severity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":41},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":53,"column":15,"nodeType":"CallExpression","messageId":"missingRadix","endLine":53,"endColumn":32,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1390,1390],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":1,"message":"Missing radix parameter.","line":54,"column":17,"nodeType":"CallExpression","messageId":"missingRadix","endLine":54,"endColumn":33,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1424,1424],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":78,"column":10,"nodeType":"MemberExpression","endLine":78,"endColumn":29},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":138,"column":10,"nodeType":"CallExpression","endLine":138,"endColumn":33},{"ruleId":"security/detect-non-literal-fs-filename","severity":1,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":140,"column":21,"nodeType":"CallExpression","endLine":140,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/*\n * é­”æ³•æ•°å­—ä¿®å¤éªŒè¯å™¨ (åŸºäºCODEXå»ºè®®)\n * - éªŒè¯å¸¸é‡å®šä¹‰å®Œæ•´æ€§\n * - æ£€æŸ¥å¯¼å…¥è¯­å¥æ­£ç¡®æ€§\n * - ç”Ÿæˆä¿®å¤å‰åå¯¹æ¯”æŠ¥å‘Š\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n// è·å–æ‰€æœ‰å¯ç”¨å¸¸é‡\nfunction getAvailableConstants() {\n  const constantsFile = 'src/constants/magic-numbers.ts';\n  const content = fs.readFileSync(constantsFile, 'utf8');\n  const matches = content.match(/export const (\\w+)/g) || [];\n  return matches.map(match => match.replace('export const ', ''));\n}\n\n// è·å–å½“å‰é­”æ³•æ•°å­—é”™è¯¯\nfunction getCurrentMagicNumberErrors() {\n  let output = '';\n  try {\n    output = execSync('pnpm lint:check 2>&1', {\n      encoding: 'utf8',\n      shell: true,\n      maxBuffer: 1024 * 1024 * 10,\n    });\n  } catch (error) {\n    output = error.stdout || error.output?.join('') || '';\n  }\n  \n  const errors = [];\n  const lines = output.split('\\n');\n  let currentFile = '';\n  \n  for (const line of lines) {\n    const fileMatch = line.match(/^\\/.*\\.(ts|tsx|js|jsx)$/);\n    if (fileMatch) {\n      currentFile = line.trim();\n      continue;\n    }\n    \n    const errorMatch = line.match(\n      /^\\s*(\\d+):(\\d+)\\s+(error|warning)\\s+No magic number:\\s+([-]?(?:0x)?[0-9a-fA-F.]+)\\s+no-magic-numbers/\n    );\n    \n    if (errorMatch && currentFile) {\n      const [, lineNum, colNum, severity, number] = errorMatch;\n      errors.push({\n        file: currentFile,\n        line: parseInt(lineNum),\n        column: parseInt(colNum),\n        number: number,\n        constantName: getConstantName(number)\n      });\n    }\n  }\n  \n  return errors;\n}\n\n// ç”Ÿæˆå¸¸é‡å\nfunction getConstantName(number) {\n  const constantMap = {\n    '0.5': 'MAGIC_0_5',\n    '0.9': 'MAGIC_0_9', \n    '1.5': 'MAGIC_1_5',\n    '131': 'MAGIC_131',\n    '132': 'MAGIC_132',\n    '133': 'MAGIC_133',\n    '136': 'MAGIC_136',\n    '190': 'MAGIC_190',\n    '368': 'MAGIC_368'\n  };\n  \n  return constantMap[number] || `MAGIC_${number.replace(/[.-]/g, '_').replace(/^0x/, 'HEX_')}`;\n}\n\n// éªŒè¯å¸¸é‡å®šä¹‰å®Œæ•´æ€§\nfunction validateConstantDefinitions() {\n  console.log('ğŸ” éªŒè¯å¸¸é‡å®šä¹‰å®Œæ•´æ€§...');\n  \n  const errors = getCurrentMagicNumberErrors();\n  const availableConstants = getAvailableConstants();\n  const missingConstants = [];\n  \n  for (const error of errors) {\n    if (!availableConstants.includes(error.constantName)) {\n      missingConstants.push({\n        number: error.number,\n        constantName: error.constantName,\n        files: errors.filter(e => e.constantName === error.constantName).map(e => e.file)\n      });\n    }\n  }\n  \n  // å»é‡\n  const uniqueMissing = missingConstants.reduce((acc, current) => {\n    const existing = acc.find(item => item.constantName === current.constantName);\n    if (!existing) {\n      acc.push(current);\n    }\n    return acc;\n  }, []);\n  \n  if (uniqueMissing.length === 0) {\n    console.log('âœ… æ‰€æœ‰éœ€è¦çš„å¸¸é‡éƒ½å·²å®šä¹‰');\n    return true;\n  } \n    console.log('âŒ å‘ç°ç¼ºå¤±çš„å¸¸é‡å®šä¹‰:');\n    uniqueMissing.forEach(missing => {\n      console.log(`  - ${missing.constantName} = ${missing.number}; // ç”¨äº ${missing.files.length} ä¸ªæ–‡ä»¶`);\n    });\n    return false;\n  \n}\n\n// æ£€æŸ¥å¯¼å…¥è¯­å¥æ­£ç¡®æ€§\nfunction validateImports() {\n  console.log('ğŸ” éªŒè¯å¯¼å…¥è¯­å¥æ­£ç¡®æ€§...');\n  \n  const errors = getCurrentMagicNumberErrors();\n  const fileGroups = new Map();\n  \n  // æŒ‰æ–‡ä»¶åˆ†ç»„\n  for (const error of errors) {\n    if (!fileGroups.has(error.file)) {\n      fileGroups.set(error.file, []);\n    }\n    fileGroups.get(error.file).push(error);\n  }\n  \n  const importIssues = [];\n  \n  for (const [filePath, fileErrors] of fileGroups) {\n    if (!fs.existsSync(filePath)) continue;\n    \n    const content = fs.readFileSync(filePath, 'utf8');\n    const importMatch = content.match(/import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]@\\/constants\\/magic-numbers['\"]/);\n    \n    const neededConstants = fileErrors.map(e => e.constantName);\n    const importedConstants = importMatch ? \n      importMatch[1].split(',').map(item => item.trim()).filter(item => item.length > 0) : [];\n    \n    const missingImports = neededConstants.filter(constant => !importedConstants.includes(constant));\n    \n    if (missingImports.length > 0) {\n      importIssues.push({\n        file: filePath,\n        missing: missingImports,\n        needed: neededConstants,\n        imported: importedConstants\n      });\n    }\n  }\n  \n  if (importIssues.length === 0) {\n    console.log('âœ… æ‰€æœ‰å¯¼å…¥è¯­å¥éƒ½æ­£ç¡®');\n    return true;\n  } \n    console.log('âŒ å‘ç°å¯¼å…¥é—®é¢˜:');\n    importIssues.forEach(issue => {\n      console.log(`  æ–‡ä»¶: ${path.relative(process.cwd(), issue.file)}`);\n      console.log(`    ç¼ºå¤±å¯¼å…¥: ${issue.missing.join(', ')}`);\n    });\n    return false;\n  \n}\n\n// ç”Ÿæˆä¿®å¤æŠ¥å‘Š\nfunction generateReport() {\n  console.log('ğŸ“Š ç”Ÿæˆä¿®å¤çŠ¶æ€æŠ¥å‘Š...');\n  \n  const errors = getCurrentMagicNumberErrors();\n  const availableConstants = getAvailableConstants();\n  \n  const report = {\n    timestamp: new Date().toISOString(),\n    summary: {\n      total_magic_number_errors: errors.length,\n      total_available_constants: availableConstants.length,\n      files_with_errors: new Set(errors.map(e => e.file)).size\n    },\n    errors_by_number: {},\n    errors_by_file: {},\n    next_steps: []\n  };\n  \n  // æŒ‰æ•°å­—åˆ†ç»„é”™è¯¯\n  for (const error of errors) {\n    if (!report.errors_by_number[error.number]) {\n      report.errors_by_number[error.number] = {\n        constant_name: error.constantName,\n        count: 0,\n        files: []\n      };\n    }\n    report.errors_by_number[error.number].count++;\n    report.errors_by_number[error.number].files.push(error.file);\n  }\n  \n  // æŒ‰æ–‡ä»¶åˆ†ç»„é”™è¯¯\n  for (const error of errors) {\n    if (!report.errors_by_file[error.file]) {\n      report.errors_by_file[error.file] = [];\n    }\n    report.errors_by_file[error.file].push({\n      line: error.line,\n      column: error.column,\n      number: error.number,\n      constant_name: error.constantName\n    });\n  }\n  \n  // ç”Ÿæˆä¸‹ä¸€æ­¥å»ºè®®\n  if (errors.length === 0) {\n    report.next_steps.push('ğŸ‰ æ‰€æœ‰é­”æ³•æ•°å­—é”™è¯¯å·²ä¿®å¤ï¼');\n  } else {\n    report.next_steps.push(`ğŸ“ å‰©ä½™ ${errors.length} ä¸ªé­”æ³•æ•°å­—é”™è¯¯éœ€è¦ä¿®å¤`);\n    report.next_steps.push('ğŸ”§ è¿è¡Œ node scripts/safe-magic-numbers-fix.js è¿›è¡Œå®‰å…¨ä¿®å¤');\n    report.next_steps.push('âœ… æ¯æ‰¹ä¿®å¤åè¿è¡Œ pnpm run type-check éªŒè¯');\n  }\n  \n  // ä¿å­˜æŠ¥å‘Š\n  const reportPath = 'scripts/magic-numbers-report.json';\n  fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n  console.log(`ğŸ“„ æŠ¥å‘Šå·²ä¿å­˜åˆ°: ${reportPath}`);\n  \n  return report;\n}\n\n// ä¸»å‡½æ•°\nfunction main() {\n  console.log('ğŸ” é­”æ³•æ•°å­—ä¿®å¤éªŒè¯å™¨å¯åŠ¨...\\n');\n  \n  try {\n    // éªŒè¯TypeScriptç¼–è¯‘çŠ¶æ€\n    console.log('ğŸ” éªŒè¯TypeScriptç¼–è¯‘çŠ¶æ€...');\n    execSync('pnpm run type-check', { stdio: 'pipe' });\n    console.log('âœ… TypeScriptç¼–è¯‘æ­£å¸¸\\n');\n    \n    // éªŒè¯å¸¸é‡å®šä¹‰\n    const constantsValid = validateConstantDefinitions();\n    console.log('');\n    \n    // éªŒè¯å¯¼å…¥è¯­å¥\n    const importsValid = validateImports();\n    console.log('');\n    \n    // ç”ŸæˆæŠ¥å‘Š\n    const report = generateReport();\n    \n    // æ€»ç»“\n    console.log('\\nğŸ“‹ éªŒè¯æ€»ç»“:');\n    console.log(`  TypeScriptç¼–è¯‘: âœ… æ­£å¸¸`);\n    console.log(`  å¸¸é‡å®šä¹‰: ${constantsValid ? 'âœ… å®Œæ•´' : 'âŒ ç¼ºå¤±'}`);\n    console.log(`  å¯¼å…¥è¯­å¥: ${importsValid ? 'âœ… æ­£ç¡®' : 'âŒ æœ‰é—®é¢˜'}`);\n    console.log(`  å‰©ä½™é­”æ³•æ•°å­—é”™è¯¯: ${report.summary.total_magic_number_errors} ä¸ª`);\n    \n    if (constantsValid && importsValid && report.summary.total_magic_number_errors === 0) {\n      console.log('\\nğŸ‰ æ‰€æœ‰éªŒè¯é€šè¿‡ï¼é­”æ³•æ•°å­—ä¿®å¤å®Œæˆï¼');\n    } else {\n      console.log('\\nâš ï¸  ä»æœ‰é—®é¢˜éœ€è¦è§£å†³ï¼Œè¯·æŸ¥çœ‹ä¸Šè¿°è¯¦ç»†ä¿¡æ¯');\n    }\n    \n  } catch (error) {\n    console.error('âŒ éªŒè¯è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:', error.message);\n    process.exit(1);\n  }\n}\n\nif (require.main === module) {\n  main();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/scripts/vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/sentry.edge.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/sentry.server.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/__tests__/layout-fonts.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/__tests__/layout-metadata.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/__tests__/layout-structured-data.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/about/__tests__/page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/about/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/components/automated-test-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/components/keyboard-shortcuts-guide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/components/manual-test-guide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/components/screen-reader-guide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/components/test-target-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/accessibility-test/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/blog/__tests__/page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/blog/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page-i18n-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page-i18n.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page-rendering-basic-core.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":74,"column":14,"nodeType":"MemberExpression","endLine":74,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page-rendering-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page-rendering.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/__tests__/page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/contact/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/demo-construction/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/components/demo-sections.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/components/documentation-links.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/components/keyboard-shortcuts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/components/other-dev-tools.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/components/react-scan-intro.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/issue-reporting.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/keyboard-shortcuts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/layout-status.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/layout-strategy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/test-instructions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/components/test-operations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/layout-test/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/dev-tools/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/demo/components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/demo/hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/demo/main-content.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/demo/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/demo/utils.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n// æ€§èƒ½è¯Šæ–­å¸¸é‡å®šä¹‰\nexport const PERFORMANCE_CONSTANTS = {\n  SIMULATION_DELAY: 2000,\n  DIAGNOSTIC_DELAY: 2000,\n  BLOCKING_DURATION: 100,\n  SPACING_INDENT: 2,\n  DECIMAL_PLACES: 3,\n  AUTO_RUN_DELAY: 1000,\n  // Web Vitals é˜ˆå€¼\n  CLS_GOOD_THRESHOLD: 0.1,\n  CLS_NEEDS_IMPROVEMENT_THRESHOLD: 0.25,\n  LCP_GOOD_THRESHOLD: 2500,\n  LCP_NEEDS_IMPROVEMENT_THRESHOLD: 4000,\n  FID_GOOD_THRESHOLD: 100,\n  FID_NEEDS_IMPROVEMENT_THRESHOLD: 300,\n  FCP_GOOD_THRESHOLD: 1800,\n  FCP_NEEDS_IMPROVEMENT_THRESHOLD: 3000,\n  TTFB_GOOD_THRESHOLD: 800,\n  TTFB_NEEDS_IMPROVEMENT_THRESHOLD: 1800,\n} as const;\n\n// ç±»å‹å®šä¹‰\nexport interface TestResults {\n  metrics: {\n    cls: number;\n    lcp: number;\n    fid: number;\n    fcp: number;\n    ttfb: number;\n    inp?: number;\n  };\n  analysis: {\n    score: number;\n    issues: string[];\n    recommendations: string[];\n  };\n  timestamp: number;\n}\n\n// å·¥å…·å‡½æ•°ï¼šæ¨¡æ‹Ÿæ€§èƒ½é—®é¢˜ï¼ˆä¼˜åŒ–ç‰ˆæœ¬ - å‡å°‘ CLS å½±å“ï¼‰\nexport function simulatePerformanceIssues(): void {\n  // æ¨¡æ‹Ÿå¸ƒå±€åç§» - ä½¿ç”¨æ›´æ¸©å’Œçš„æ–¹å¼ï¼Œé¿å…ä¸¥é‡çš„ CLS\n  const div = document.createElement('div');\n  div.style.height = '50px'; // å‡å°‘åˆå§‹é«˜åº¦\n  div.style.backgroundColor = 'rgba(255, 0, 0, 0.3)'; // åŠé€æ˜ï¼Œå‡å°‘è§†è§‰å†²å‡»\n  div.style.position = 'fixed'; // ä½¿ç”¨ fixed å®šä½ï¼Œå‡å°‘å¯¹é¡µé¢å¸ƒå±€çš„å½±å“\n  div.style.top = '10px';\n  div.style.right = '10px'; // ç§»åˆ°å³ä¸Šè§’ï¼Œé¿å…å½±å“ä¸»è¦å†…å®¹\n  div.style.width = '100px';\n  div.style.zIndex = '9999';\n  div.style.borderRadius = '4px';\n  div.style.transition = 'height 0.3s ease'; // æ·»åŠ è¿‡æ¸¡åŠ¨ç”»ï¼Œå‡å°‘çªå…€æ„Ÿ\n  document.body.appendChild(div);\n\n  setTimeout(() => {\n    div.style.height = '80px'; // å‡å°‘é«˜åº¦å˜åŒ–å¹…åº¦\n    setTimeout(() => {\n      div.style.opacity = '0'; // æ·¡å‡ºæ•ˆæœ\n      setTimeout(() => {\n        if (document.body.contains(div)) {\n          document.body.removeChild(div);\n        }\n      }, DEV_TOOLS_CONSTANTS.DIAGNOSTICS.DIAGNOSTIC_DELAY); // ç­‰å¾…æ·¡å‡ºåŠ¨ç”»å®Œæˆ\n    }, PERFORMANCE_CONSTANTS.SIMULATION_DELAY);\n  }, PERFORMANCE_CONSTANTS.BLOCKING_DURATION);\n\n  // æ¨¡æ‹Ÿä¸»çº¿ç¨‹é˜»å¡ - å‡å°‘é˜»å¡æ—¶é—´\n  const start = performance.now();\n  const reducedBlockingTime = Math.min(\n    PERFORMANCE_CONSTANTS.BLOCKING_DURATION,\n    DEV_TOOLS_CONSTANTS.LAYOUT.DEFAULT_OFFSET,\n  ); // æœ€å¤šé˜»å¡50ms\n  while (performance.now() - start < reducedBlockingTime) {\n    // é˜»å¡ä¸»çº¿ç¨‹\n  }\n}\n\n// å·¥å…·å‡½æ•°ï¼šå¯¼å‡ºæµ‹è¯•ç»“æœ\nexport function exportTestResults(testResults: TestResults): void {\n  const data = {\n    ...testResults,\n    exportedAt: new Date().toISOString(),\n    userAgent: navigator.userAgent,\n    viewport: {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    },\n  };\n\n  const blob = new Blob(\n    [JSON.stringify(data, null, PERFORMANCE_CONSTANTS.SPACING_INDENT)],\n    {\n      type: 'application/json',\n    },\n  );\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `web-vitals-demo-${new Date().toISOString().split('T')[0]}.json`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n}\n\n// å·¥å…·å‡½æ•°ï¼šè·å–æ€§èƒ½æŒ‡æ ‡çŠ¶æ€\nexport function getMetricStatus(\n  value: number,\n  goodThreshold: number,\n  needsImprovementThreshold: number,\n): 'default' | 'secondary' | 'destructive' {\n  if (value <= goodThreshold) return 'default';\n  if (value <= needsImprovementThreshold) return 'secondary';\n  return 'destructive';\n}\n\n// å·¥å…·å‡½æ•°ï¼šè·å–æ€§èƒ½æŒ‡æ ‡æ ‡ç­¾\nexport function getMetricLabel(\n  value: number,\n  goodThreshold: number,\n  needsImprovementThreshold: number,\n): string {\n  if (value <= goodThreshold) return 'è‰¯å¥½';\n  if (value <= needsImprovementThreshold) return 'éœ€è¦æ”¹è¿›';\n  return 'è¾ƒå·®';\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/diagnostics-constants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/diagnostics-control-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/diagnostics-current-metrics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/diagnostics-historical-data.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/diagnostics-threshold-reference.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/page-components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/page-hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/page-new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/page-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/diagnostics/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/layout-fonts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/layout-metadata.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/layout-structured-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/layout-test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/products/__tests__/page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/products/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/react-scan-components.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'count'. Either exclude it or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[1716,1723],"text":"[]"}}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":168,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":168,"endColumn":53,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3946,3952],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useMemo, useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\n\n/**\n * æ•…æ„è®¾è®¡çš„ä½æ•ˆç»„ä»¶ - ç”¨äºæ¼”ç¤º React Scan æ£€æµ‹ä¸å¿…è¦æ¸²æŸ“\n */\nexport function IneffientComponent({ count }: { count: number }) {\n  // æ•…æ„åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶åˆ›å»ºæ–°å¯¹è±¡ - è¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“\n  const expensiveObject = {\n    timestamp: Date.now(),\n    random: Math.random(),\n    count,\n  };\n\n  // æ•…æ„çš„æ˜‚è´µè®¡ç®— - æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ\n  let expensiveCalculation = 0;\n  for (let i = 0; i < 100000; i++) {\n    expensiveCalculation += Math.random();\n  }\n\n  return (\n    <Card className='border-red-200 bg-red-50'>\n      <CardHeader>\n        <CardTitle className='text-red-700'>\n          ä½æ•ˆç»„ä»¶ <Badge variant='destructive'>æœªä¼˜åŒ–</Badge>\n        </CardTitle>\n        <CardDescription>\n          è¿™ä¸ªç»„ä»¶æ•…æ„è®¾è®¡å¾—ä½æ•ˆï¼Œä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œæ˜‚è´µè®¡ç®—\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-2'>\n          <p>è®¡æ•°: {count}</p>\n          <p>æ—¶é—´æˆ³: {expensiveObject.timestamp}</p>\n          <p>éšæœºæ•°: {expensiveObject.random.toFixed(4)}</p>\n          <p>æ˜‚è´µè®¡ç®—ç»“æœ: {expensiveCalculation.toFixed(2)}</p>\n          <div className='text-sm text-red-600'>\n            âš ï¸ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—æ‰€æœ‰å€¼\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n/**\n * ä¼˜åŒ–çš„ç»„ä»¶ - ç”¨äºæ¼”ç¤º React Scan æ£€æµ‹ä¼˜åŒ–æ¸²æŸ“\n */\nexport function OptimizedComponent({ count }: { count: number }) {\n  // ä½¿ç”¨ useMemo ç¼“å­˜æ˜‚è´µè®¡ç®—\n  const expensiveCalculation = useMemo(() => {\n    let result = 0;\n    for (let i = 0; i < 100000; i++) {\n      result += Math.random();\n    }\n    return result;\n  }, [count]); // åªæœ‰å½“ count æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—\n\n  // ä½¿ç”¨ useMemo ç¼“å­˜å¯¹è±¡åˆ›å»º\n  const cachedObject = useMemo(\n    () => ({\n      timestamp: Date.now(),\n      random: Math.random(),\n      count,\n    }),\n    [count],\n  );\n\n  return (\n    <Card className='border-green-200 bg-green-50'>\n      <CardHeader>\n        <CardTitle className='text-green-700'>\n          ä¼˜åŒ–ç»„ä»¶{' '}\n          <Badge\n            variant='default'\n            className='bg-green-600'\n          >\n            å·²ä¼˜åŒ–\n          </Badge>\n        </CardTitle>\n        <CardDescription>\n          è¿™ä¸ªç»„ä»¶ä½¿ç”¨äº† useMemo æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-2'>\n          <p>è®¡æ•°: {count}</p>\n          <p>æ—¶é—´æˆ³: {cachedObject.timestamp}</p>\n          <p>éšæœºæ•°: {cachedObject.random.toFixed(4)}</p>\n          <p>æ˜‚è´µè®¡ç®—ç»“æœ: {expensiveCalculation.toFixed(2)}</p>\n          <div className='text-sm text-green-600'>\n            âœ… ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n/**\n * æ¼”ç¤ºç»„ä»¶å®¹å™¨\n */\nexport function DemoComponentsContainer({\n  count,\n  onTriggerRender,\n}: {\n  count: number;\n  onTriggerRender: () => void;\n}) {\n  const [showComponents, setShowComponents] = useState(true);\n\n  const toggleComponents = useCallback(() => {\n    setShowComponents((prev) => !prev);\n  }, []);\n\n  return (\n    <div className='space-y-6'>\n      <div className='flex gap-4'>\n        <Button\n          onClick={onTriggerRender}\n          variant='outline'\n        >\n          è§¦å‘é‡æ–°æ¸²æŸ“\n        </Button>\n        <Button\n          onClick={toggleComponents}\n          variant='outline'\n        >\n          {showComponents ? 'éšè—' : 'æ˜¾ç¤º'}ç»„ä»¶\n        </Button>\n      </div>\n\n      {showComponents && (\n        <div className='grid gap-6 md:grid-cols-2'>\n          <IneffientComponent count={count} />\n          <OptimizedComponent count={count} />\n        </div>\n      )}\n    </div>\n  );\n}\n\n/**\n * æ€§èƒ½æµ‹è¯•ç»„ä»¶\n */\nexport function PerformanceTestComponent({\n  iterations = 1000,\n}: {\n  iterations?: number;\n}) {\n  const [isRunning, setIsRunning] = useState(false);\n  const [results, setResults] = useState<{\n    inefficient: number;\n    optimized: number;\n  } | null>(null);\n\n  const runPerformanceTest = useCallback(async () => {\n    setIsRunning(true);\n    setResults(null);\n\n    // æµ‹è¯•ä½æ•ˆç»„ä»¶\n    const inefficientStart = performance.now();\n    for (let i = 0; i < iterations; i++) {\n      // æ¨¡æ‹Ÿä½æ•ˆç»„ä»¶çš„è®¡ç®—ï¼ˆä¸¢å¼ƒä¸­é—´ç»“æœä»¥é¿å…æœªä½¿ç”¨å˜é‡ï¼‰\n      for (let j = 0; j < 1000; j++) {\n        Math.random();\n      }\n    }\n    const inefficientTime = performance.now() - inefficientStart;\n\n    // æµ‹è¯•ä¼˜åŒ–ç»„ä»¶ï¼ˆæ¨¡æ‹Ÿç¼“å­˜ï¼‰\n    const optimizedStart = performance.now();\n    let cachedResult = 0;\n    for (let j = 0; j < 1000; j++) {\n      cachedResult += Math.random();\n    }\n    for (let i = 0; i < iterations; i++) {\n      // æ¨¡æ‹Ÿä½¿ç”¨ç¼“å­˜çš„ç»“æœï¼ˆæ˜¾å¼ä¸¢å¼ƒï¼‰\n      void cachedResult;\n    }\n    const optimizedTime = performance.now() - optimizedStart;\n\n    setResults({\n      inefficient: inefficientTime,\n      optimized: optimizedTime,\n    });\n    setIsRunning(false);\n  }, [iterations]);\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>æ€§èƒ½æµ‹è¯•</CardTitle>\n        <CardDescription>æ¯”è¾ƒä¼˜åŒ–å’Œæœªä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½å·®å¼‚</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-4'>\n          <Button\n            onClick={runPerformanceTest}\n            disabled={isRunning}\n            className='w-full'\n          >\n            {isRunning ? 'æµ‹è¯•ä¸­...' : `è¿è¡Œæ€§èƒ½æµ‹è¯• (${iterations} æ¬¡è¿­ä»£)`}\n          </Button>\n\n          {results && (\n            <div className='grid gap-4 md:grid-cols-2'>\n              <div className='rounded-lg border border-red-200 bg-red-50 p-4'>\n                <h4 className='font-semibold text-red-700'>æœªä¼˜åŒ–ç»„ä»¶</h4>\n                <p className='text-2xl font-bold text-red-600'>\n                  {results.inefficient.toFixed(2)}ms\n                </p>\n              </div>\n              <div className='rounded-lg border border-green-200 bg-green-50 p-4'>\n                <h4 className='font-semibold text-green-700'>ä¼˜åŒ–ç»„ä»¶</h4>\n                <p className='text-2xl font-bold text-green-600'>\n                  {results.optimized.toFixed(2)}ms\n                </p>\n              </div>\n            </div>\n          )}\n\n          {results && (\n            <div className='text-center'>\n              <p className='text-muted-foreground text-sm'>\n                æ€§èƒ½æå‡:{' '}\n                {(\n                  ((results.inefficient - results.optimized) /\n                    results.inefficient) *\n                  100\n                ).toFixed(1)}\n                %\n              </p>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/react-scan-demo-client.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useState } from 'react';\nimport { ReactScanAnalyzer } from '@/components/dev-tools/react-scan-analyzer';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  DemoComponentsContainer,\n  PerformanceTestComponent,\n} from '@/app/[locale]/react-scan-demo/react-scan-components';\nimport {\n  ReactScanControlPanel,\n  ReactScanInstructions,\n} from '@/app/[locale]/react-scan-demo/react-scan-stats';\n\n/**\n * React Scan æ¼”ç¤ºå®¢æˆ·ç«¯ç»„ä»¶\n *\n * è¿™ä¸ªç»„ä»¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ React Scan æ¥æ£€æµ‹å’Œä¼˜åŒ– React åº”ç”¨çš„æ€§èƒ½ã€‚\n * åŒ…å«äº†ä½æ•ˆç»„ä»¶å’Œä¼˜åŒ–ç»„ä»¶çš„å¯¹æ¯”æ¼”ç¤ºï¼Œä»¥åŠå®æ—¶çš„æ€§èƒ½ç»Ÿè®¡æ•°æ®ã€‚\n */\nexport function ReactScanDemoClient() {\n  const [count, setCount] = useState(0);\n  const [triggerRender, setTriggerRender] = useState(0);\n\n  // æ•…æ„è§¦å‘ä¸å¿…è¦æ¸²æŸ“çš„å‡½æ•°\n  const triggerUnnecessaryRender = useCallback(() => {\n    setTriggerRender((prev) => prev + 1);\n  }, []);\n\n  // å¢åŠ è®¡æ•°å™¨\n  const incrementCount = useCallback(() => {\n    setCount((prev) => prev + 1);\n  }, []);\n\n  // é‡ç½®æ‰€æœ‰çŠ¶æ€\n  const resetAll = useCallback(() => {\n    setCount(0);\n    setTriggerRender(0);\n  }, []);\n\n  return (\n    <div className='container mx-auto space-y-8 p-6'>\n      {/* é¡µé¢æ ‡é¢˜ */}\n      <div className='text-center'>\n        <h1 className='text-3xl font-bold'>React Scan æ€§èƒ½æ¼”ç¤º</h1>\n        <p className='text-muted-foreground mt-2'>\n          ä½¿ç”¨ React Scan æ£€æµ‹å’Œä¼˜åŒ– React ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½\n        </p>\n      </div>\n\n      {/* React Scan åˆ†æå™¨ */}\n      <ReactScanAnalyzer />\n\n      {/* æ§åˆ¶é¢æ¿ */}\n      <ReactScanControlPanel />\n\n      {/* ä¸»è¦æ§åˆ¶æŒ‰é’® */}\n      <Card>\n        <CardHeader>\n          <CardTitle>æ¼”ç¤ºæ§åˆ¶</CardTitle>\n          <CardDescription>\n            ä½¿ç”¨è¿™äº›æŒ‰é’®æ¥è§¦å‘ä¸åŒç±»å‹çš„æ¸²æŸ“ï¼Œè§‚å¯Ÿ React Scan çš„æ£€æµ‹ç»“æœ\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className='flex flex-wrap gap-4'>\n            <Button\n              onClick={incrementCount}\n              variant='default'\n            >\n              å¢åŠ è®¡æ•° ({count})\n            </Button>\n            <Button\n              onClick={triggerUnnecessaryRender}\n              variant='outline'\n            >\n              è§¦å‘ä¸å¿…è¦æ¸²æŸ“ ({triggerRender})\n            </Button>\n            <Button\n              onClick={resetAll}\n              variant='secondary'\n            >\n              é‡ç½®æ‰€æœ‰\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* æ¼”ç¤ºç»„ä»¶å®¹å™¨ */}\n      <DemoComponentsContainer\n        count={count}\n        onTriggerRender={triggerUnnecessaryRender}\n      />\n\n      {/* æ€§èƒ½æµ‹è¯•ç»„ä»¶ */}\n      <PerformanceTestComponent iterations={1000} />\n\n      {/* ä½¿ç”¨è¯´æ˜ */}\n      <ReactScanInstructions />\n\n      {/* å¼€å‘è€…ä¿¡æ¯ */}\n      <Card className='border-dashed'>\n        <CardHeader>\n          <CardTitle className='text-sm'>å¼€å‘è€…ä¿¡æ¯</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className='text-muted-foreground space-y-2 text-xs'>\n            <p>ğŸ”§ è¿™æ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·æ¼”ç¤ºé¡µé¢ï¼Œä»…åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p>\n            <p>ğŸ“Š React Scan ä¼šå®æ—¶ç›‘æ§ç»„ä»¶æ¸²æŸ“ï¼Œå¸®åŠ©è¯†åˆ«æ€§èƒ½ç“¶é¢ˆã€‚</p>\n            <p>ğŸ¯ çº¢è‰²é«˜äº®è¡¨ç¤ºå¯èƒ½çš„æ€§èƒ½é—®é¢˜ï¼Œç»¿è‰²è¡¨ç¤ºæ­£å¸¸æ¸²æŸ“ã€‚</p>\n            <p>ğŸ’¡ ä½¿ç”¨ React.memoã€useMemo å’Œ useCallback æ¥ä¼˜åŒ–ç»„ä»¶æ€§èƒ½ã€‚</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n/**\n * å¯¼å‡ºé»˜è®¤ç»„ä»¶\n */\nexport default ReactScanDemoClient;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/react-scan-demo-components.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'count'. Either exclude it or remove the dependency array.","line":97,"column":6,"nodeType":"ArrayExpression","endLine":97,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[2373,2380],"text":"[]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { REACT_SCAN_CONFIG } from '@/constants/react-scan';\n\n// React Scan ç±»å‹å®šä¹‰\ninterface _ReactScanStats {\n  enabled: boolean;\n  totalRenders: number;\n  componentsTracked: number;\n  lastUpdate: string;\n}\n\ninterface ReactScanWindow extends Window {\n  __REACT_SCAN__?: {\n    ReactScanInternals?: {\n      enabled?: boolean;\n      totalRenders?: number;\n      componentsScanned?: number;\n      lastScanTime?: number;\n    };\n  };\n}\n\n/**\n * æ•…æ„è®¾è®¡çš„ä½æ•ˆç»„ä»¶ - ç”¨äºæ¼”ç¤º React Scan æ£€æµ‹ä¸å¿…è¦æ¸²æŸ“\n */\nexport function IneffientComponent({ count }: { count: number }) {\n  // æ•…æ„åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶åˆ›å»ºæ–°å¯¹è±¡ - è¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“\n  const expensiveObject = {\n    timestamp: Date.now(),\n    random: Math.random(),\n    count,\n  };\n\n  // æ•…æ„çš„æ˜‚è´µè®¡ç®— - æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ\n  const expensiveCalculation = () => {\n    let result = 0;\n    for (let i = 0; i < DEV_TOOLS_CONSTANTS.REACT_SCAN.MAX_RENDERS; i++) {\n      result += Math.random();\n    }\n    return result;\n  };\n\n  const result = expensiveCalculation();\n\n  return (\n    <Card className='border-red-200 bg-red-50'>\n      <CardHeader>\n        <CardTitle className='text-red-700'>ä½æ•ˆç»„ä»¶ (æ•…æ„è®¾è®¡)</CardTitle>\n        <CardDescription>\n          è¿™ä¸ªç»„ä»¶æ•…æ„è®¾è®¡å¾—ä½æ•ˆï¼Œç”¨äºæ¼”ç¤º React Scan å¦‚ä½•æ£€æµ‹æ€§èƒ½é—®é¢˜\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-2'>\n          <p>\n            <strong>è®¡æ•°:</strong> {count}\n          </p>\n          <p>\n            <strong>æ˜‚è´µè®¡ç®—ç»“æœ:</strong> {result.toFixed(4)}\n          </p>\n          <p>\n            <strong>æ—¶é—´æˆ³:</strong> {expensiveObject.timestamp}\n          </p>\n          <p>\n            <strong>éšæœºæ•°:</strong> {expensiveObject.random.toFixed(4)}\n          </p>\n          <Badge variant='destructive'>æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—</Badge>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n/**\n * ä¼˜åŒ–åçš„ç»„ä»¶ - ä½¿ç”¨ React ä¼˜åŒ–æŠ€æœ¯\n */\nexport function OptimizedComponent({ count }: { count: number }) {\n  // ä½¿ç”¨ useMemo ç¼“å­˜æ˜‚è´µè®¡ç®—\n  const expensiveCalculation = useMemo(() => {\n    let result = 0;\n    for (let i = 0; i < DEV_TOOLS_CONSTANTS.REACT_SCAN.MAX_RENDERS; i++) {\n      result += Math.random();\n    }\n    return result;\n  }, [count]); // åªåœ¨ count å˜åŒ–æ—¶é‡æ–°è®¡ç®—\n\n  // ä½¿ç”¨ useMemo ç¼“å­˜å¯¹è±¡\n  const optimizedObject = useMemo(\n    () => ({\n      timestamp: Date.now(),\n      random: Math.random(),\n      count,\n    }),\n    [count],\n  );\n\n  return (\n    <Card className='border-green-200 bg-green-50'>\n      <CardHeader>\n        <CardTitle className='text-green-700'>ä¼˜åŒ–ç»„ä»¶</CardTitle>\n        <CardDescription>\n          è¿™ä¸ªç»„ä»¶ä½¿ç”¨äº† React ä¼˜åŒ–æŠ€æœ¯ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-2'>\n          <p>\n            <strong>è®¡æ•°:</strong> {count}\n          </p>\n          <p>\n            <strong>ç¼“å­˜è®¡ç®—ç»“æœ:</strong> {expensiveCalculation.toFixed(4)}\n          </p>\n          <p>\n            <strong>ç¼“å­˜æ—¶é—´æˆ³:</strong> {optimizedObject.timestamp}\n          </p>\n          <p>\n            <strong>ç¼“å­˜éšæœºæ•°:</strong> {optimizedObject.random.toFixed(4)}\n          </p>\n          <Badge variant='secondary'>ä½¿ç”¨ useMemo ä¼˜åŒ–</Badge>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n/**\n * React Scan çŠ¶æ€æ˜¾ç¤ºç»„ä»¶\n */\nexport function ReactScanStats() {\n  const [stats, setStats] = useState<ReactScanStats | null>(null);\n\n  const updateStats = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        // æ£€æŸ¥å¤šç§å¯èƒ½çš„ React Scan çŠ¶æ€\n        const reactScan = (window as ReactScanWindow).__REACT_SCAN__;\n        const reactScanInternals = reactScan?.ReactScanInternals;\n\n        // å°è¯•ä»å¤šä¸ªä½ç½®è·å–çŠ¶æ€\n        let isEnabled = false;\n        let totalRenders = 0;\n        let componentsTracked = 0;\n\n        if (reactScanInternals) {\n          isEnabled = reactScanInternals.enabled ?? false;\n          totalRenders = reactScanInternals.totalRenders ?? 0;\n\n          // è·å–è·Ÿè¸ªç»„ä»¶æ•°\n          const fiberRoots = reactScanInternals?.fiberRoots || {};\n          componentsTracked = Object.keys(fiberRoots).length;\n        }\n\n        setStats({\n          enabled: isEnabled,\n          totalRenders,\n          componentsTracked,\n          lastUpdate: new Date().toLocaleTimeString(),\n        });\n      } catch (error) {\n        console.warn('æ— æ³•è·å– React Scan çŠ¶æ€:', error);\n        setStats({\n          enabled: false,\n          totalRenders: 0,\n          componentsTracked: 0,\n          lastUpdate: new Date().toLocaleTimeString(),\n        });\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    updateStats();\n\n    // æ›´é¢‘ç¹çš„è½®è¯¢ä»¥å¿«é€Ÿå“åº”çŠ¶æ€å˜åŒ–\n    const interval = setInterval(\n      updateStats,\n      REACT_SCAN_CONFIG.STATS_UPDATE_INTERVAL,\n    );\n\n    // ç›‘å¬é”®ç›˜äº‹ä»¶ä»¥ç«‹å³æ›´æ–°çŠ¶æ€\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.ctrlKey && event.shiftKey && event.key.toLowerCase() === 'x') {\n        // å»¶è¿Ÿä¸€ç‚¹æ›´æ–°ä»¥ç¡®ä¿ React Scan çŠ¶æ€å·²ç»æ”¹å˜\n        setTimeout(updateStats, 100);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [updateStats]);\n\n  if (!stats) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>React Scan çŠ¶æ€</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p>æ­£åœ¨åŠ è½½çŠ¶æ€...</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className='flex items-center gap-2'>\n          React Scan çŠ¶æ€\n          <Badge variant={stats.enabled ? 'default' : 'secondary'}>\n            {stats.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}\n          </Badge>\n        </CardTitle>\n        <CardDescription>\n          å®æ—¶æ˜¾ç¤º React Scan çš„è¿è¡ŒçŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='grid grid-cols-2 gap-4'>\n          <div>\n            <p className='text-sm font-medium'>æ€»æ¸²æŸ“æ¬¡æ•°</p>\n            <p className='text-2xl font-bold'>{stats.totalRenders}</p>\n          </div>\n          <div>\n            <p className='text-sm font-medium'>è·Ÿè¸ªç»„ä»¶æ•°</p>\n            <p className='text-2xl font-bold'>{stats.componentsTracked}</p>\n          </div>\n        </div>\n        <div className='border-_t mt-4 pt-4'>\n          <p className='text-muted-foreground text-xs'>\n            æœ€åæ›´æ–°: {stats.lastUpdate}\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface ControlPanelProps {\n  count: number;\n  onIncrement: () => void;\n  onTriggerRender: () => void;\n}\n\nexport function ControlPanel({\n  count,\n  onIncrement,\n  onTriggerRender,\n}: ControlPanelProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>æ§åˆ¶é¢æ¿</CardTitle>\n        <CardDescription>\n          ä½¿ç”¨è¿™äº›æŒ‰é’®æ¥è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè§‚å¯Ÿ React Scan çš„æ£€æµ‹æ•ˆæœ\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='flex flex-col gap-4 sm:flex-row'>\n          <Button\n            _onClick={onIncrement}\n            className='flex-1'\n          >\n            å¢åŠ è®¡æ•° ({count})\n          </Button>\n          <Button\n            _onClick={onTriggerRender}\n            variant='outline'\n            className='flex-1'\n          >\n            è§¦å‘ä¸å¿…è¦æ¸²æŸ“\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/react-scan-stats.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { REACT_SCAN_CONFIG } from '@/constants/react-scan';\nimport type { ReactScanStats, ReactScanWindow } from '@/app/[locale]/react-scan-demo/react-scan-types';\n\n/**\n * React Scan æ€§èƒ½æ•°æ®æ˜¾ç¤ºç»„ä»¶\n */\nexport function ReactScanStatsComponent() {\n  const [stats, setStats] = useState<ReactScanStats | null>(null);\n\n  const updateStats = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const reactScanWindow = window as ReactScanWindow;\n        const reactScanData =\n          reactScanWindow.__REACT_SCAN__?.ReactScanInternals;\n\n        if (reactScanData) {\n          setStats({\n            enabled: reactScanData.enabled || false,\n            totalRenders: reactScanData.totalRenders || 0,\n            componentsTracked: reactScanData.componentsScanned || 0,\n            lastUpdate: new Date().toLocaleTimeString(),\n          });\n        } else {\n          setStats({\n            enabled: false,\n            totalRenders: 0,\n            componentsTracked: 0,\n            lastUpdate: new Date().toLocaleTimeString(),\n          });\n        }\n      } catch (error) {\n        console.warn('Failed to get React Scan stats:', error);\n        setStats({\n          enabled: false,\n          totalRenders: 0,\n          componentsTracked: 0,\n          lastUpdate: new Date().toLocaleTimeString(),\n        });\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    updateStats();\n    const interval = setInterval(updateStats, 1000);\n    return () => clearInterval(interval);\n  }, [updateStats]);\n\n  const toggleReactScan = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const reactScanWindow = window as ReactScanWindow;\n        if (reactScanWindow.__REACT_SCAN__?.ReactScanInternals) {\n          const currentState =\n            reactScanWindow.__REACT_SCAN__.ReactScanInternals.enabled;\n          reactScanWindow.__REACT_SCAN__.ReactScanInternals.enabled =\n            !currentState;\n          updateStats();\n        }\n      } catch (error) {\n        console.warn('Failed to toggle React Scan:', error);\n      }\n    }\n  }, [updateStats]);\n\n  const resetStats = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const reactScanWindow = window as ReactScanWindow;\n        if (reactScanWindow.__REACT_SCAN__?.ReactScanInternals) {\n          reactScanWindow.__REACT_SCAN__.ReactScanInternals.totalRenders = 0;\n          reactScanWindow.__REACT_SCAN__.ReactScanInternals.componentsScanned = 0;\n          updateStats();\n        }\n      } catch (error) {\n        console.warn('Failed to reset React Scan stats:', error);\n      }\n    }\n  }, [updateStats]);\n\n  if (!stats) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>React Scan ç»Ÿè®¡</CardTitle>\n          <CardDescription>åŠ è½½ä¸­...</CardDescription>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className='flex items-center justify-between'>\n          React Scan ç»Ÿè®¡\n          <Badge variant={stats.enabled ? 'default' : 'secondary'}>\n            {stats.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}\n          </Badge>\n        </CardTitle>\n        <CardDescription>å®æ—¶ç›‘æ§ React ç»„ä»¶æ¸²æŸ“æ€§èƒ½</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-4'>\n          <div className='grid gap-4 md:grid-cols-3'>\n            <div className='rounded-lg border p-4 text-center'>\n              <div className='text-2xl font-bold text-blue-600'>\n                {stats.totalRenders}\n              </div>\n              <div className='text-muted-foreground text-sm'>æ€»æ¸²æŸ“æ¬¡æ•°</div>\n            </div>\n            <div className='rounded-lg border p-4 text-center'>\n              <div className='text-2xl font-bold text-green-600'>\n                {stats.componentsTracked}\n              </div>\n              <div className='text-muted-foreground text-sm'>è·Ÿè¸ªç»„ä»¶æ•°</div>\n            </div>\n            <div className='rounded-lg border p-4 text-center'>\n              <div className='text-sm font-medium text-purple-600'>\n                {stats.lastUpdate}\n              </div>\n              <div className='text-muted-foreground text-sm'>æœ€åæ›´æ–°</div>\n            </div>\n          </div>\n\n          <div className='flex gap-2'>\n            <Button\n              onClick={toggleReactScan}\n              variant='outline'\n              size='sm'\n            >\n              {stats.enabled ? 'ç¦ç”¨' : 'å¯ç”¨'} React Scan\n            </Button>\n            <Button\n              onClick={resetStats}\n              variant='outline'\n              size='sm'\n            >\n              é‡ç½®ç»Ÿè®¡\n            </Button>\n            <Button\n              onClick={updateStats}\n              variant='outline'\n              size='sm'\n            >\n              åˆ·æ–°æ•°æ®\n            </Button>\n          </div>\n\n          <div className='bg-muted rounded-lg p-4'>\n            <h4 className='mb-2 font-semibold'>é…ç½®ä¿¡æ¯</h4>\n            <div className='space-y-1 text-sm'>\n              <div>å¯ç”¨çŠ¶æ€: {REACT_SCAN_CONFIG.enabled ? 'æ˜¯' : 'å¦'}</div>\n              <div>\n                æ˜¾ç¤ºè¦†ç›–å±‚: {REACT_SCAN_CONFIG.showOverlay ? 'æ˜¯' : 'å¦'}\n              </div>\n              <div>\n                è·Ÿè¸ªæ¸²æŸ“: {REACT_SCAN_CONFIG.trackRenders ? 'æ˜¯' : 'å¦'}\n              </div>\n              <div>\n                æ§åˆ¶å°æ—¥å¿—: {REACT_SCAN_CONFIG.logToConsole ? 'æ˜¯' : 'å¦'}\n              </div>\n            </div>\n          </div>\n\n          <div className='text-muted-foreground text-xs'>\n            <p>\n              ğŸ’¡ æç¤º: React Scan ä¼šé«˜äº®æ˜¾ç¤ºä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚\n              çº¢è‰²è¡¨ç¤ºå¯èƒ½çš„æ€§èƒ½é—®é¢˜ï¼Œç»¿è‰²è¡¨ç¤ºæ­£å¸¸æ¸²æŸ“ã€‚\n            </p>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n/**\n * React Scan æ§åˆ¶é¢æ¿\n */\nexport function ReactScanControlPanel() {\n  const [isVisible, setIsVisible] = useState(true);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  const toggleVisibility = useCallback(() => {\n    setIsVisible((prev) => !prev);\n  }, []);\n\n  const toggleAutoRefresh = useCallback(() => {\n    setAutoRefresh((prev) => !prev);\n  }, []);\n\n  return (\n    <div className='space-y-4'>\n      <div className='flex items-center justify-between'>\n        <h3 className='text-lg font-semibold'>React Scan æ§åˆ¶é¢æ¿</h3>\n        <div className='flex gap-2'>\n          <Button\n            onClick={toggleAutoRefresh}\n            variant='outline'\n            size='sm'\n          >\n            è‡ªåŠ¨åˆ·æ–°: {autoRefresh ? 'å¼€' : 'å…³'}\n          </Button>\n          <Button\n            onClick={toggleVisibility}\n            variant='outline'\n            size='sm'\n          >\n            {isVisible ? 'éšè—' : 'æ˜¾ç¤º'}ç»Ÿè®¡\n          </Button>\n        </div>\n      </div>\n\n      {isVisible && <ReactScanStatsComponent />}\n    </div>\n  );\n}\n\n/**\n * React Scan ä½¿ç”¨è¯´æ˜ç»„ä»¶\n */\nexport function ReactScanInstructions() {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>React Scan ä½¿ç”¨è¯´æ˜</CardTitle>\n        <CardDescription>\n          äº†è§£å¦‚ä½•ä½¿ç”¨ React Scan æ¥ä¼˜åŒ– React åº”ç”¨æ€§èƒ½\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className='space-y-4'>\n          <div>\n            <h4 className='mb-2 font-semibold'>ä»€ä¹ˆæ˜¯ React Scanï¼Ÿ</h4>\n            <p className='text-muted-foreground text-sm'>\n              React Scan æ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œç”¨äºæ£€æµ‹å’Œå¯è§†åŒ– React\n              ç»„ä»¶çš„ä¸å¿…è¦é‡æ–°æ¸²æŸ“ã€‚\n              å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå¹¶ä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚\n            </p>\n          </div>\n\n          <div>\n            <h4 className='mb-2 font-semibold'>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h4>\n            <ul className='text-muted-foreground space-y-1 text-sm'>\n              <li>â€¢ å¯ç”¨ React Scan åï¼Œå®ƒä¼šè‡ªåŠ¨æ£€æµ‹ç»„ä»¶æ¸²æŸ“</li>\n              <li>â€¢ çº¢è‰²é«˜äº®è¡¨ç¤ºå¯èƒ½çš„ä¸å¿…è¦æ¸²æŸ“</li>\n              <li>â€¢ ç»¿è‰²é«˜äº®è¡¨ç¤ºæ­£å¸¸çš„æ¸²æŸ“</li>\n              <li>â€¢ æŸ¥çœ‹ç»Ÿè®¡æ•°æ®äº†è§£åº”ç”¨çš„æ¸²æŸ“æ€§èƒ½</li>\n            </ul>\n          </div>\n\n          <div>\n            <h4 className='mb-2 font-semibold'>ä¼˜åŒ–å»ºè®®</h4>\n            <ul className='text-muted-foreground space-y-1 text-sm'>\n              <li>â€¢ ä½¿ç”¨ React.memo åŒ…è£…çº¯ç»„ä»¶</li>\n              <li>â€¢ ä½¿ç”¨ useMemo ç¼“å­˜æ˜‚è´µçš„è®¡ç®—</li>\n              <li>â€¢ ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°å¼•ç”¨</li>\n              <li>â€¢ é¿å…åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºæ–°å¯¹è±¡</li>\n            </ul>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/react-scan-demo/react-scan-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/test-footer/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/ui-showcase/__tests__/page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/[locale]/ui-showcase/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/analytics/i18n/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/analytics/i18n/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/analytics/web-vitals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/__tests__/route-get.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/__tests__/route-post.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/contact-api-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/contact-api-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/contact/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route-get-options.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route-post-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route-post-core.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route-post-security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route-post.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/csp-report/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/__tests__/route-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/__tests__/route-core.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/handlers/delete-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/handlers/get-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/handlers/post-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/handlers/put-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/monitoring/dashboard/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/subscribe/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/test-content/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/test-content/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/verify-turnstile/__tests__/route-core.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/verify-turnstile/__tests__/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/verify-turnstile/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/whatsapp/send/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/api/whatsapp/webhook/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/error-test/page.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":163,"column":12,"nodeType":"MemberExpression","endLine":163,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":175,"column":12,"nodeType":"MemberExpression","endLine":175,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/language-toggle.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/responsive-layout.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/responsive-navigation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/theme-toggle/basic-rendering.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/theme-toggle/setup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/__tests__/theme-toggle/theme-switching.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/contact/contact-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/collapsible-dev-tool.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport React, { useEffect, useState, type ReactNode } from 'react';\n\ninterface CollapsibleDevToolProps {\n  toolId: string;\n  title: string;\n  children: ReactNode;\n  defaultCollapsed?: boolean;\n  showToggleButton?: boolean;\n  className?: string;\n}\n\n/**\n * å¯æŠ˜å å¼€å‘å·¥å…·åŒ…è£…å™¨\n *\n * ä¸ºå¼€å‘å·¥å…·æä¾›ç»Ÿä¸€çš„æŠ˜å /å±•å¼€åŠŸèƒ½\n * æ”¯æŒé”®ç›˜å¿«æ·é”®å’Œè‡ªåŠ¨å¸ƒå±€ç®¡ç†\n */\nexport function CollapsibleDevTool({\n  toolId,\n  title,\n  children,\n  defaultCollapsed = false,\n  showToggleButton = true,\n  className = '',\n}: CollapsibleDevToolProps) {\n  const { registerTool, unregisterTool, getClasses, shouldCollapse } =\n    useDevToolsLayout();\n  const [isCollapsed, setIsCollapsed] = useState(\n    defaultCollapsed || shouldCollapse(toolId),\n  );\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨ - å§‹ç»ˆè°ƒç”¨ Hook\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      registerTool(toolId);\n      return () => unregisterTool(toolId);\n    }\n    return undefined;\n  }, [toolId, registerTool, unregisterTool]);\n\n  // åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  const baseClasses = getClasses(toolId);\n\n  if (isCollapsed) {\n    return (\n      <button\n        onClick={() => setIsCollapsed(false)}\n        className={`${baseClasses} rounded-full bg-gray-900 px-3 py-2 text-xs text-white shadow-lg transition-colors hover:bg-gray-800 ${className}`}\n        title={`å±•å¼€ ${title}`}\n      >\n        {title.split(' ')[0]} â–²\n      </button>\n    );\n  }\n\n  return (\n    <div\n      className={`${baseClasses} rounded-lg border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-800 ${className}`}\n    >\n      {/* æ ‡é¢˜æ  */}\n      {showToggleButton && (\n        <div className='flex items-center justify-between border-b border-gray-200 p-3 dark:border-gray-700'>\n          <h3 className='text-sm font-semibold text-gray-900 dark:text-gray-100'>\n            {title}\n          </h3>\n          <button\n            onClick={() => setIsCollapsed(true)}\n            className='text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300'\n            title={`æŠ˜å  ${title}`}\n          >\n            â–¼\n          </button>\n        </div>\n      )}\n\n      {/* å†…å®¹åŒºåŸŸ */}\n      <div className={showToggleButton ? 'p-3' : 'p-4'}>{children}</div>\n    </div>\n  );\n}\n\n/**\n * ç®€åŒ–çš„å¼€å‘å·¥å…·æŒ‡ç¤ºå™¨\n *\n * ç”¨äºæ˜¾ç¤ºå·¥å…·çŠ¶æ€ä½†ä¸å ç”¨å¤ªå¤šç©ºé—´\n */\ninterface DevToolIndicatorProps {\n  toolId: string;\n  label: string;\n  status: 'active' | 'warning' | 'error' | 'inactive';\n  value?: string | number;\n  onClick?: () => void;\n  className?: string;\n}\n\nexport function DevToolIndicator({\n  toolId,\n  label,\n  status,\n  value,\n  onClick,\n  className = '',\n}: DevToolIndicatorProps) {\n  const { registerTool, unregisterTool, getClasses } = useDevToolsLayout();\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨ - å§‹ç»ˆè°ƒç”¨ Hook\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      registerTool(toolId);\n      return () => unregisterTool(toolId);\n    }\n    return undefined;\n  }, [toolId, registerTool, unregisterTool]);\n\n  // åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  const statusColors = {\n    active: 'bg-green-500 text-white',\n    warning: 'bg-yellow-500 text-white',\n    error: 'bg-red-500 text-white',\n    inactive: 'bg-gray-500 text-white',\n  };\n\n  const baseClasses = getClasses(toolId);\n\n  return (\n    <div\n      className={`${baseClasses} ${statusColors[status as keyof typeof statusColors] || statusColors.default} rounded-md px-3 py-2 text-xs shadow-lg ${\n        onClick ? 'cursor-pointer transition-opacity hover:opacity-80' : ''\n      } ${className}`}\n      onClick={onClick}\n      title={`${label}${value ? `: ${value}` : ''}`}\n    >\n      <div className='flex items-center gap-2'>\n        <div\n          className={`h-2 w-2 rounded-full ${\n            status === 'active' ? 'animate-pulse bg-white' : 'bg-white/70'\n          }`}\n        />\n        <span className='font-medium'>{label}</span>\n        {value && (\n          <span className='rounded bg-white/20 px-1 py-0.5 text-xs'>\n            {value}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * å¼€å‘å·¥å…·ç»„åˆå™¨\n *\n * å°†å¤šä¸ªç›¸å…³çš„å¼€å‘å·¥å…·ç»„åˆåœ¨ä¸€èµ·ï¼Œé¿å…é‡å \n */\ninterface DevToolGroupProps {\n  groupId: string;\n  title: string;\n  tools: ReactNode[];\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  className?: string;\n}\n\nexport function DevToolGroup({\n  groupId: _groupId,\n  title,\n  tools,\n  position = 'bottom-right',\n  className = '',\n}: DevToolGroupProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  // åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  const positionClasses = {\n    'top-left': 'fixed top-4 left-4',\n    'top-right': 'fixed top-4 right-4',\n    'bottom-left': 'fixed bottom-4 left-4',\n    'bottom-right': 'fixed bottom-4 right-4',\n  };\n\n  if (!isExpanded) {\n    return (\n      <button\n        onClick={() => setIsExpanded(true)}\n        className={`${positionClasses[position as keyof typeof positionClasses] || positionClasses['bottom-right']} z-[1001] rounded-full bg-gray-900 px-3 py-2 text-xs text-white shadow-lg transition-colors hover:bg-gray-800 ${className}`}\n        title={`å±•å¼€ ${title} (${tools.length} å·¥å…·)`}\n      >\n        ğŸ› ï¸ {tools.length}\n      </button>\n    );\n  }\n\n  return (\n    <div\n      className={`${positionClasses[position as keyof typeof positionClasses] || positionClasses['bottom-right']} z-[1001] max-w-sm ${className}`}\n    >\n      {/* ç»„æ ‡é¢˜ */}\n      <div className='mb-2 flex items-center justify-between rounded-lg bg-gray-900 px-3 py-2 text-xs text-white shadow-lg'>\n        <span className='font-medium'>{title}</span>\n        <button\n          onClick={() => setIsExpanded(false)}\n          className='text-gray-400 transition-colors hover:text-white'\n          title={`æŠ˜å  ${title}`}\n        >\n          Ã—\n        </button>\n      </div>\n\n      {/* å·¥å…·åˆ—è¡¨ */}\n      <div className='space-y-2'>\n        {tools.map((tool, index) => (\n          <div\n            key={index}\n            className='relative'\n          >\n            {tool}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/dev-tools-controller-components.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\ninterface DevToolConfig {\n  id: string;\n  name: string;\n  priority: number;\n  position: { x: number; y: number };\n  size: { width: number; height: number };\n  isVisible: boolean;\n  zIndex: number;\n}\n\ninterface ControlPanelProps {\n  layoutInfo: Array<{ _toolId: string; config: DevToolConfig }>;\n  onToggleAll: () => void;\n  onToggleTool: (_toolId: string) => void;\n}\n\nexport function ControlPanel({\n  layoutInfo,\n  onToggleAll,\n  onToggleTool,\n}: ControlPanelProps) {\n  return (\n    <div className='space-y-4'>\n      {/* å…¨å±€æ§åˆ¶ */}\n      <div className='flex items-center justify-between'>\n        <h3 className='text-sm font-semibold'>å¼€å‘å·¥å…·æ§åˆ¶å™¨</h3>\n        <button\n          _onClick={onToggleAll}\n          className='rounded bg-blue-500 px-3 py-1 text-xs text-white hover:bg-blue-600'\n        >\n          åˆ‡æ¢å…¨éƒ¨\n        </button>\n      </div>\n\n      {/* å·¥å…·åˆ—è¡¨ */}\n      <div className='space-y-2'>\n        {layoutInfo.map(({ _toolId, config }) => (\n          <div\n            key={_toolId}\n            className='flex items-center justify-between rounded bg-gray-50 p-2'\n          >\n            <div className='flex-1'>\n              <div className='text-xs font-medium'>{config.name}</div>\n              <div className='text-xs text-gray-500'>\n                ä½ç½®: ({config.position.x}, {config.position.y}) | å¤§å°:{' '}\n                {config.size.width}Ã—{config.size.height} | å±‚çº§: {config.zIndex}\n              </div>\n            </div>\n            <button\n              _onClick={() => onToggleTool(_toolId)}\n              className={`rounded px-2 py-1 text-xs ${\n                config.isVisible\n                  ? 'bg-green-500 text-white hover:bg-green-600'\n                  : 'bg-gray-300 text-gray-700 hover:bg-gray-400'\n              }`}\n            >\n              {config.isVisible ? 'éšè—' : 'æ˜¾ç¤º'}\n            </button>\n          </div>\n        ))}\n      </div>\n\n      {/* ç»Ÿè®¡ä¿¡æ¯ */}\n      <div className='rounded bg-blue-50 p-2 text-xs'>\n        <div>æ€»å·¥å…·æ•°: {layoutInfo.length}</div>\n        <div>\n          å¯è§å·¥å…·: {layoutInfo.filter(({ config }) => config.isVisible).length}\n        </div>\n        <div>\n          éšè—å·¥å…·:{' '}\n          {layoutInfo.filter(({ config }) => !config.isVisible).length}\n        </div>\n      </div>\n\n      {/* å¿«æ·é”®è¯´æ˜ */}\n      <div className='rounded bg-yellow-50 p-2 text-xs'>\n        <div className='font-medium'>å¿«æ·é”®:</div>\n        <div>Ctrl+Shift+D: åˆ‡æ¢æ§åˆ¶å™¨</div>\n        <div>Ctrl+Shift+H: éšè—æ‰€æœ‰å·¥å…·</div>\n      </div>\n    </div>\n  );\n}\n\ninterface StatusIndicatorProps {\n  toolCount: number;\n  isVisible: boolean;\n  _onClick: () => void;\n}\n\nexport function StatusIndicator({\n  toolCount,\n  isVisible,\n  _onClick,\n}: StatusIndicatorProps) {\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  return (\n    <div\n      _onClick={_onClick}\n      className={`fixed right-4 bottom-4 z-[9999] cursor-pointer rounded-full p-2 shadow-lg transition-all duration-200 ${\n        isVisible\n          ? 'bg-blue-500 text-white hover:bg-blue-600'\n          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n      }`}\n      title={`å¼€å‘å·¥å…· (${toolCount} ä¸ªå·¥å…·)`}\n    >\n      <div className='flex h-6 w-6 items-center justify-center text-xs font-bold'>\n        {toolCount}\n      </div>\n    </div>\n  );\n}\n\ninterface OverlayProps {\n  isVisible: boolean;\n  children: React.ReactNode;\n}\n\nexport function Overlay({ isVisible, children }: OverlayProps) {\n  if (process.env.NODE_ENV !== 'development' || !isVisible) {\n    return null;\n  }\n\n  return (\n    <div className='bg-opacity-50 fixed inset-0 z-[9998] flex items-center justify-center bg-black'>\n      <div className='max-h-[80vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-4 shadow-xl'>\n        {children}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/dev-tools-controller.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":244,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":244,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useEffect, useState } from 'react';\n\ninterface DevToolConfig {\n  id: string;\n  name: string;\n  priority: number;\n  position: { x: number; y: number };\n  size: { width: number; height: number };\n  isVisible: boolean;\n  zIndex: number;\n}\n\n/**\n * å¼€å‘å·¥å…·æ§åˆ¶å™¨\n *\n * æä¾›ç»Ÿä¸€çš„å¼€å‘å·¥å…·ç®¡ç†ç•Œé¢ï¼ŒåŒ…æ‹¬ï¼š\n * - æ˜¾ç¤º/éšè—æ‰€æœ‰å¼€å‘å·¥å…·\n * - å·¥å…·å¸ƒå±€ä¿¡æ¯\n * - å¿«é€Ÿåˆ‡æ¢åŠŸèƒ½\n */\nexport function DevToolsController() {\n  const { getLayoutInfo } = useDevToolsLayout();\n  const [isVisible, setIsVisible] = useState(false);\n  const [layoutInfo, setLayoutInfo] = useState<\n    Array<{ toolId: string; config: DevToolConfig }>\n  >([]);\n\n  // å§‹ç»ˆè°ƒç”¨ Hooksï¼Œä½†åœ¨éå¼€å‘ç¯å¢ƒä¸­ä¸æ‰§è¡Œé€»è¾‘\n  useEffect(() => {\n    if (process.env.NODE_ENV !== 'development') {\n      return undefined;\n    }\n\n    const updateLayoutInfo = () => {\n      setLayoutInfo(getLayoutInfo());\n    };\n\n    updateLayoutInfo();\n\n    // å®šæœŸæ›´æ–°å¸ƒå±€ä¿¡æ¯\n    const interval = setInterval(\n      updateLayoutInfo,\n      DEV_TOOLS_CONSTANTS.PERFORMANCE.DELAY,\n    );\n\n    return () => clearInterval(interval);\n  }, [getLayoutInfo]);\n\n  // é”®ç›˜å¿«æ·é”®æ”¯æŒ\n  useEffect(() => {\n    if (process.env.NODE_ENV !== 'development') {\n      return undefined;\n    }\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // Ctrl+Shift+D åˆ‡æ¢å¼€å‘å·¥å…·æ§åˆ¶å™¨\n      if (event.ctrlKey && event.shiftKey && event.key === 'D') {\n        event.preventDefault();\n        setIsVisible((prev) => !prev);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  if (!isVisible) {\n    return (\n      <button\n        onClick={() => setIsVisible(true)}\n        className='fixed top-4 left-1/2 z-[1002] -translate-x-1/2 rounded-full bg-gray-900 px-3 py-1 text-xs text-white shadow-lg transition-colors hover:bg-gray-800'\n        title='å¼€å‘å·¥å…·æ§åˆ¶å™¨ (Ctrl+Shift+D)'\n      >\n        ğŸ› ï¸ Dev Tools\n      </button>\n    );\n  }\n\n  return (\n    <div className='fixed top-4 left-1/2 z-[1002] max-w-md -translate-x-1/2 rounded-lg border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-800'>\n      {/* æ ‡é¢˜æ  */}\n      <div className='flex items-center justify-between border-b border-gray-200 p-3 dark:border-gray-700'>\n        <h3 className='text-sm font-semibold text-gray-900 dark:text-gray-100'>\n          ğŸ› ï¸ å¼€å‘å·¥å…·æ§åˆ¶å™¨\n        </h3>\n        <button\n          onClick={() => setIsVisible(false)}\n          className='text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300'\n          title='å…³é—­ (Ctrl+Shift+D)'\n        >\n          Ã—\n        </button>\n      </div>\n\n      {/* å·¥å…·åˆ—è¡¨ */}\n      <div className='p-3'>\n        <div className='space-y-2'>\n          <div className='mb-2 text-xs text-gray-500 dark:text-gray-400'>\n            æ´»è·ƒå·¥å…· ({layoutInfo.length})\n          </div>\n\n          {layoutInfo.length === 0 ? (\n            <div className='text-xs text-gray-400 italic'>\n              æ²¡æœ‰æ´»è·ƒçš„å¼€å‘å·¥å…·\n            </div>\n          ) : (\n            layoutInfo.map(({ toolId, config }) => (\n              <div\n                key={toolId}\n                className='flex items-center justify-between rounded bg-gray-50 p-2 dark:bg-gray-700'\n              >\n                <div className='flex-1'>\n                  <div className='text-xs font-medium text-gray-900 dark:text-gray-100'>\n                    {config.name}\n                  </div>\n                  <div className='text-xs text-gray-500 dark:text-gray-400'>\n                    {config.position} â€¢ z-{config.zIndex} â€¢ ä¼˜å…ˆçº§{' '}\n                    {config.priority}\n                  </div>\n                </div>\n\n                <div className='flex items-center gap-1'>\n                  {config.collapsible && (\n                    <span\n                      className='text-xs text-blue-500'\n                      title='å¯æŠ˜å '\n                    >\n                      ğŸ“\n                    </span>\n                  )}\n                  <div\n                    className={`h-2 w-2 rounded-full ${\n                      config.priority >= DEV_TOOLS_CONSTANTS.LAYOUT.GRID_GAP\n                        ? 'bg-red-500'\n                        : config.priority >=\n                            DEV_TOOLS_CONSTANTS.LAYOUT.BORDER_RADIUS\n                          ? 'bg-yellow-500'\n                          : 'bg-green-500'\n                    }`}\n                    title={`ä¼˜å…ˆçº§: ${config.priority}`}\n                  />\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* å¿«æ·é”®æç¤º */}\n        <div className='mt-3 border-t border-gray-200 pt-3 dark:border-gray-700'>\n          <div className='text-xs text-gray-500 dark:text-gray-400'>\n            <div className='mb-1'>å¿«æ·é”®:</div>\n            <div>\n              â€¢{' '}\n              <kbd className='rounded bg-gray-200 px-1 text-xs dark:bg-gray-600'>\n                Ctrl+Shift+D\n              </kbd>{' '}\n              åˆ‡æ¢æ§åˆ¶å™¨\n            </div>\n            <div>\n              â€¢{' '}\n              <kbd className='rounded bg-gray-200 px-1 text-xs dark:bg-gray-600'>\n                Ctrl+Shift+X\n              </kbd>{' '}\n              React Scan\n            </div>\n          </div>\n        </div>\n\n        {/* å¸ƒå±€ä¿¡æ¯ */}\n        <div className='mt-3 border-t border-gray-200 pt-3 dark:border-gray-700'>\n          <div className='text-xs text-gray-500 dark:text-gray-400'>\n            <div className='mb-1'>å¸ƒå±€çŠ¶æ€:</div>\n            <div className='grid grid-cols-2 gap-1 text-xs'>\n              <div>\n                å·¦ä¸Š:{' '}\n                {\n                  layoutInfo.filter((i) => i.config.position === 'top-left')\n                    .length\n                }\n              </div>\n              <div>\n                å³ä¸Š:{' '}\n                {\n                  layoutInfo.filter((i) => i.config.position === 'top-right')\n                    .length\n                }\n              </div>\n              <div>\n                å·¦ä¸‹:{' '}\n                {\n                  layoutInfo.filter((i) => i.config.position === 'bottom-left')\n                    .length\n                }\n              </div>\n              <div>\n                å³ä¸‹:{' '}\n                {\n                  layoutInfo.filter((i) => i.config.position === 'bottom-right')\n                    .length\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * å¼€å‘å·¥å…·çŠ¶æ€æŒ‡ç¤ºå™¨\n *\n * ç®€åŒ–ç‰ˆæœ¬ï¼Œåªæ˜¾ç¤ºå·¥å…·æ•°é‡å’Œå¿«é€Ÿè®¿é—®æŒ‰é’®\n */\nexport function DevToolsStatusIndicator() {\n  const { getLayoutInfo } = useDevToolsLayout();\n  const [toolCount, setToolCount] = useState(0);\n\n  // å§‹ç»ˆè°ƒç”¨ Hookï¼Œä½†åœ¨éå¼€å‘ç¯å¢ƒä¸­ä¸æ‰§è¡Œé€»è¾‘\n  useEffect(() => {\n    if (process.env.NODE_ENV !== 'development') {\n      return;\n    }\n\n    const updateCount = () => {\n      setToolCount(getLayoutInfo().length);\n    };\n\n    updateCount();\n    const interval = setInterval(\n      updateCount,\n      DEV_TOOLS_CONSTANTS.PERFORMANCE.DELAY,\n    );\n\n    // eslint-disable-next-line consistent-return\n    return () => clearInterval(interval); // useEffect æ¸…ç†å‡½æ•°\n  }, [getLayoutInfo]);\n\n  // åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  if (toolCount === 0) {\n    return null;\n  }\n\n  return (\n    <div className='fixed top-4 right-1/2 z-[999] translate-x-1/2 rounded-full bg-blue-500 px-2 py-1 text-xs text-white shadow-lg'>\n      ğŸ› ï¸ {toolCount}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer-advanced.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'componentStats.length'. Either include it or remove the dependency array.","line":119,"column":6,"nodeType":"ArrayExpression","endLine":119,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [componentStats.length, performanceInsights]","fix":{"range":[3394,3415],"text":"[componentStats.length, performanceInsights]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useMemo, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\n\n/**\n * React Scan åˆ†æå™¨é«˜çº§åŠŸèƒ½ç»„ä»¶\n * åŒ…å«è¯¦ç»†åˆ†æã€æ€§èƒ½å»ºè®®å’Œä¼˜åŒ–æç¤º\n */\n\ninterface ComponentStats {\n  name: string;\n  renderCount: number;\n  lastRenderTime: number;\n  averageRenderTime: number;\n  totalRenderTime: number;\n  isOptimized: boolean;\n  warnings: string[];\n  props?: Record<string, unknown>;\n  children?: ComponentStats[];\n}\n\ninterface PerformanceInsight {\n  type: 'warning' | 'error' | 'info';\n  component: string;\n  message: string;\n  suggestion: string;\n  impact: 'low' | 'medium' | 'high';\n}\n\nexport function ReactScanAnalyzerAdvanced() {\n  const [componentStats, _setComponentStats] = useState<ComponentStats[]>([]);\n  const [_selectedComponent, _setSelectedComponent] =\n    useState<ComponentStats | null>(null);\n  const [_showDetails, _setShowDetails] = useState(false);\n\n  // ç”Ÿæˆæ€§èƒ½æ´å¯Ÿ\n  const performanceInsights = useMemo((): PerformanceInsight[] => {\n    const insights: PerformanceInsight[] = [];\n\n    componentStats.forEach((component) => {\n      // æ£€æŸ¥æ¸²æŸ“é¢‘ç‡\n      if (component.renderCount > 50) {\n        insights.push({\n          type: 'warning',\n          component: component.name,\n          message: `Component renders ${component.renderCount} times`,\n          suggestion: 'Consider using React.memo() or useMemo() to optimize',\n          impact: 'high',\n        });\n      }\n\n      // æ£€æŸ¥æ¸²æŸ“æ—¶é—´\n      if (component.averageRenderTime > 16) {\n        insights.push({\n          type: 'error',\n          component: component.name,\n          message: `Slow render time: ${component.averageRenderTime.toFixed(2)}ms`,\n          suggestion:\n            'Optimize component logic or break into smaller components',\n          impact: 'high',\n        });\n      }\n\n      // æ£€æŸ¥ä¼˜åŒ–çŠ¶æ€\n      if (!component.isOptimized && component.renderCount > 10) {\n        insights.push({\n          type: 'info',\n          component: component.name,\n          message: 'Component could benefit from optimization',\n          suggestion: 'Add React.memo() or optimize props/state usage',\n          impact: 'medium',\n        });\n      }\n    });\n\n    return insights.sort((a, b) => {\n      const impactOrder = { high: 3, medium: 2, low: 1 };\n      return impactOrder[b.impact] - impactOrder[a.impact];\n    });\n  }, [componentStats]);\n\n  // è·å–æœ€æ…¢çš„ç»„ä»¶\n  const slowestComponents = useMemo(() => {\n    return [...componentStats]\n      .sort((a, b) => b.averageRenderTime - a.averageRenderTime)\n      .slice(0, 5);\n  }, [componentStats]);\n\n  // è·å–æ¸²æŸ“æœ€é¢‘ç¹çš„ç»„ä»¶\n  const mostRenderedComponents = useMemo(() => {\n    return [...componentStats]\n      .sort((a, b) => b.renderCount - a.renderCount)\n      .slice(0, 5);\n  }, [componentStats]);\n\n  // è®¡ç®—æ€»ä½“æ€§èƒ½åˆ†æ•°\n  const performanceScore = useMemo(() => {\n    if (componentStats.length === 0) return 100;\n\n    let score = 100;\n    const highImpactIssues = performanceInsights.filter(\n      (i) => i.impact === 'high',\n    ).length;\n    const mediumImpactIssues = performanceInsights.filter(\n      (i) => i.impact === 'medium',\n    ).length;\n    const lowImpactIssues = performanceInsights.filter(\n      (i) => i.impact === 'low',\n    ).length;\n\n    score -= highImpactIssues * 20;\n    score -= mediumImpactIssues * 10;\n    score -= lowImpactIssues * 5;\n\n    return Math.max(0, score);\n  }, [performanceInsights]);\n\n  // è·å–æ€§èƒ½åˆ†æ•°é¢œè‰²\n  const getScoreColor = (score: number) => {\n    if (score >= 80) return 'text-green-600';\n    if (score >= 60) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  // è·å–æ´å¯Ÿç±»å‹é¢œè‰²\n  const getInsightColor = (type: string) => {\n    switch (type) {\n      case 'error':\n        return 'bg-red-50 text-red-800 border-red-200';\n      case 'warning':\n        return 'bg-yellow-50 text-yellow-800 border-yellow-200';\n      case 'info':\n        return 'bg-blue-50 text-blue-800 border-blue-200';\n      default:\n        return 'bg-gray-50 text-gray-800 border-gray-200';\n    }\n  };\n\n  // å¯¼å‡ºåˆ†ææŠ¥å‘Š\n  const exportReport = useCallback(() => {\n    const report = {\n      timestamp: new Date().toISOString(),\n      performanceScore,\n      totalComponents: componentStats.length,\n      insights: performanceInsights,\n      slowestComponents,\n      mostRenderedComponents,\n      componentDetails: componentStats,\n    };\n\n    const blob = new Blob([JSON.stringify(report, null, 2)], {\n      type: 'application/json',\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `react-scan-report-${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }, [\n    performanceScore,\n    componentStats,\n    performanceInsights,\n    slowestComponents,\n    mostRenderedComponents,\n  ]);\n\n  return (\n    <div className='space-y-6'>\n      {/* æ€§èƒ½æ€»è§ˆ */}\n      <Card className='p-6'>\n        <div className='mb-4 flex items-center justify-between'>\n          <h3 className='text-lg font-semibold'>Performance Overview</h3>\n          <Button\n            _onClick={exportReport}\n            size='sm'\n            variant='outline'\n          >\n            Export Report\n          </Button>\n        </div>\n\n        <div className='grid grid-cols-2 gap-4 md:grid-cols-4'>\n          <div className='text-center'>\n            <div\n              className={`text-3xl font-bold ${getScoreColor(performanceScore)}`}\n            >\n              {performanceScore}\n            </div>\n            <div className='text-muted-foreground text-sm'>\n              Performance Score\n            </div>\n          </div>\n          <div className='text-center'>\n            <div className='text-3xl font-bold'>{componentStats.length}</div>\n            <div className='text-muted-foreground text-sm'>Components</div>\n          </div>\n          <div className='text-center'>\n            <div className='text-3xl font-bold text-red-600'>\n              {performanceInsights.filter((i) => i.impact === 'high').length}\n            </div>\n            <div className='text-muted-foreground text-sm'>\n              High Impact Issues\n            </div>\n          </div>\n          <div className='text-center'>\n            <div className='text-3xl font-bold text-yellow-600'>\n              {performanceInsights.filter((i) => i.impact === 'medium').length}\n            </div>\n            <div className='text-muted-foreground text-sm'>\n              Medium Impact Issues\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* æ€§èƒ½æ´å¯Ÿ */}\n      {performanceInsights.length > 0 && (\n        <Card className='p-6'>\n          <h3 className='mb-4 text-lg font-semibold'>Performance Insights</h3>\n          <div className='space-y-3'>\n            {performanceInsights.slice(0, 10).map((insight, index) => (\n              <div\n                key={index}\n                className={`rounded-lg border p-4 ${getInsightColor(insight.type)}`}\n              >\n                <div className='flex items-start justify-between'>\n                  <div className='flex-1'>\n                    <div className='font-medium'>{insight.component}</div>\n                    <div className='mt-1 text-sm'>{insight.message}</div>\n                    <div className='mt-2 text-sm font-medium'>\n                      ğŸ’¡ {insight.suggestion}\n                    </div>\n                  </div>\n                  <span className='ml-2 rounded px-2 py-1 text-xs font-medium'>\n                    {insight.impact.toUpperCase()}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* æœ€æ…¢ç»„ä»¶ */}\n      {slowestComponents.length > 0 && (\n        <Card className='p-6'>\n          <h3 className='mb-4 text-lg font-semibold'>Slowest Components</h3>\n          <div className='space-y-2'>\n            {slowestComponents.map((component, index) => (\n              <div\n                key={`slow-${component.name}-${index}`}\n                className='flex items-center justify-between rounded-lg border p-3'\n              >\n                <div>\n                  <div className='font-medium'>{component.name}</div>\n                  <div className='text-muted-foreground text-sm'>\n                    Average: {component.averageRenderTime.toFixed(2)}ms\n                  </div>\n                </div>\n                <div className='text-right'>\n                  <div className='text-sm font-medium'>\n                    {component.renderCount} renders\n                  </div>\n                  <div className='text-muted-foreground text-sm'>\n                    Total: {component.totalRenderTime.toFixed(2)}ms\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* æ¸²æŸ“æœ€é¢‘ç¹ç»„ä»¶ */}\n      {mostRenderedComponents.length > 0 && (\n        <Card className='p-6'>\n          <h3 className='mb-4 text-lg font-semibold'>\n            Most Rendered Components\n          </h3>\n          <div className='space-y-2'>\n            {mostRenderedComponents.map((component, index) => (\n              <div\n                key={`frequent-${component.name}-${index}`}\n                className='flex items-center justify-between rounded-lg border p-3'\n              >\n                <div>\n                  <div className='font-medium'>{component.name}</div>\n                  <div className='text-muted-foreground text-sm'>\n                    {component.renderCount} renders\n                  </div>\n                </div>\n                <div className='text-right'>\n                  <div className='text-sm font-medium'>\n                    {component.averageRenderTime.toFixed(2)}ms avg\n                  </div>\n                  <div className='text-muted-foreground text-sm'>\n                    {component.isOptimized ? 'Optimized' : 'Not Optimized'}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer-core.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport React, { useCallback, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\n\n/**\n * React Scan åˆ†æå™¨æ ¸å¿ƒç»„ä»¶\n * åŒ…å«åŸºç¡€æ•°æ®è¯»å–å’ŒçŠ¶æ€ç®¡ç†åŠŸèƒ½\n */\n\ninterface ComponentStats {\n  name: string;\n  renderCount: number;\n  lastRenderTime: number;\n  averageRenderTime: number;\n  totalRenderTime: number;\n  isOptimized: boolean;\n  warnings: string[];\n}\n\ninterface ReactScanData {\n  components: ComponentStats[];\n  totalRenders: number;\n  totalTime: number;\n  averageTime: number;\n  warnings: string[];\n}\n\nexport function ReactScanAnalyzerCore() {\n  const [scanData, setScanData] = useState<ReactScanData | null>(null);\n  const [componentStats, _setComponentStats] = useState<ComponentStats[]>([]);\n  const [isRecording, setIsRecording] = useState(false);\n\n  // è¯»å– React Scan å†…éƒ¨æ•°æ®\n  const readReactScanData = useCallback((): ReactScanData | null => {\n    if (typeof window === 'undefined') return null;\n\n    try {\n      const reactScan = window.__REACT_SCAN__;\n      if (!reactScan) return null;\n\n      const internals = reactScan.ReactScanInternals;\n      if (!internals) return null;\n\n      // åˆ†æç»„ä»¶æ¸²æŸ“å†å²\n      const renderHistory: ComponentStats[] = [];\n\n      // åŸºç¡€æ•°æ®æ”¶é›†\n      const totalRenders = internals.totalRenders || 0;\n      const totalTime = internals.totalTime || 0;\n      const averageTime = totalRenders > 0 ? totalTime / totalRenders : 0;\n\n      return {\n        components: renderHistory,\n        totalRenders,\n        totalTime,\n        averageTime,\n        warnings: [],\n      };\n    } catch (error) {\n      console.warn('Failed to read React Scan data:', error);\n      return null;\n    }\n  }, []);\n\n  // å¼€å§‹è®°å½•\n  const startRecording = useCallback(() => {\n    setIsRecording(true);\n    const data = readReactScanData();\n    if (data) {\n      setScanData(data);\n      _setComponentStats(data.components);\n    }\n  }, [readReactScanData]);\n\n  // åœæ­¢è®°å½•\n  const stopRecording = useCallback(() => {\n    setIsRecording(false);\n    const data = readReactScanData();\n    if (data) {\n      setScanData(data);\n      _setComponentStats(data.components);\n    }\n  }, [readReactScanData]);\n\n  // æ¸…é™¤æ•°æ®\n  const clearData = useCallback(() => {\n    setScanData(null);\n    _setComponentStats([]);\n    setIsRecording(false);\n  }, []);\n\n  // æ£€æŸ¥ React Scan æ˜¯å¦å¯ç”¨\n  const isReactScanAvailable = useCallback(() => {\n    return typeof window !== 'undefined' && window.__REACT_SCAN__;\n  }, []);\n\n  if (!isReactScanAvailable()) {\n    return (\n      <Card className='p-6'>\n        <h3 className='mb-4 text-lg font-semibold'>React Scan Analyzer</h3>\n        <p className='text-muted-foreground'>\n          React Scan is not available. Please ensure it is properly configured.\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className='p-6'>\n      <div className='mb-4 flex items-center justify-between'>\n        <h3 className='text-lg font-semibold'>React Scan Analyzer</h3>\n        <div className='flex gap-2'>\n          {!isRecording ? (\n            <Button\n              _onClick={startRecording}\n              size='sm'\n            >\n              Start Recording\n            </Button>\n          ) : (\n            <Button\n              _onClick={stopRecording}\n              size='sm'\n              variant='destructive'\n            >\n              Stop Recording\n            </Button>\n          )}\n          <Button\n            _onClick={clearData}\n            size='sm'\n            variant='outline'\n          >\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      {scanData && (\n        <div className='space-y-4'>\n          {/* åŸºç¡€ç»Ÿè®¡ä¿¡æ¯ */}\n          <div className='grid grid-cols-3 gap-4'>\n            <div className='bg-muted rounded-lg p-3'>\n              <div className='text-muted-foreground text-sm'>Total Renders</div>\n              <div className='text-2xl font-bold'>{scanData.totalRenders}</div>\n            </div>\n            <div className='bg-muted rounded-lg p-3'>\n              <div className='text-muted-foreground text-sm'>Total Time</div>\n              <div className='text-2xl font-bold'>\n                {scanData.totalTime.toFixed(2)}ms\n              </div>\n            </div>\n            <div className='bg-muted rounded-lg p-3'>\n              <div className='text-muted-foreground text-sm'>Average Time</div>\n              <div className='text-2xl font-bold'>\n                {scanData.averageTime.toFixed(2)}ms\n              </div>\n            </div>\n          </div>\n\n          {/* ç»„ä»¶åˆ—è¡¨ */}\n          {componentStats.length > 0 && (\n            <div>\n              <h4 className='mb-2 font-semibold'>Component Statistics</h4>\n              <div className='space-y-2'>\n                {componentStats.slice(0, 10).map((component, index) => (\n                  <div\n                    key={`${component.name}-${index}`}\n                    className='flex items-center justify-between rounded-lg border p-3'\n                  >\n                    <div>\n                      <div className='font-medium'>{component.name}</div>\n                      <div className='text-muted-foreground text-sm'>\n                        Renders: {component.renderCount} | Avg:{' '}\n                        {component.averageRenderTime.toFixed(2)}ms\n                      </div>\n                    </div>\n                    <div className='flex items-center gap-2'>\n                      {component.isOptimized ? (\n                        <span className='rounded bg-green-100 px-2 py-1 text-xs text-green-800'>\n                          Optimized\n                        </span>\n                      ) : (\n                        <span className='rounded bg-yellow-100 px-2 py-1 text-xs text-yellow-800'>\n                          Needs Optimization\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* è­¦å‘Šä¿¡æ¯ */}\n          {scanData.warnings.length > 0 && (\n            <div>\n              <h4 className='mb-2 font-semibold text-yellow-600'>Warnings</h4>\n              <div className='space-y-1'>\n                {scanData.warnings.map((warning, index) => (\n                  <div\n                    key={index}\n                    className='rounded bg-yellow-50 p-2 text-sm text-yellow-800'\n                  >\n                    {warning}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {!scanData && !isRecording && (\n        <div className='text-muted-foreground text-center'>\n          Click \"Start Recording\" to begin analyzing React component renders.\n        </div>\n      )}\n\n      {isRecording && (\n        <div className='text-muted-foreground text-center'>\n          Recording in progress... Interact with the application to collect\n          data.\n        </div>\n      )}\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer-simple.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ReactScanGlobal' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":30},{"ruleId":"react-you-might-not-need-an-effect/no-event-handler","severity":1,"message":"Avoid using state and effects as an event handler. Instead, call the event handling code directly when the event occurs.","line":69,"column":9,"nodeType":"UnaryExpression","messageId":"avoidEventHandler","endLine":69,"endColumn":21},{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":72,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":72,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport type { ReactScanGlobal } from '@/app/[locale]/react-scan-demo/react-scan-types';\n\ninterface ComponentStats {\n  name: string;\n  renderCount: number;\n  renderTime: number;\n  avgRenderTime: number;\n  efficiency: number;\n}\n\n/**\n * React Scan æ•°æ®åˆ†æå™¨ - ç®€åŒ–ç‰ˆ\n */\nexport function ReactScanAnalyzer() {\n  const [componentStats, _setComponentStats] = useState<ComponentStats[]>([]);\n  const [isRecording, setIsRecording] = useState(false);\n\n  // è¯»å– React Scan æ•°æ®\n  const readReactScanData = useCallback(() => {\n    if (typeof window === 'undefined') return [];\n\n    try {\n      const globalScan = window.__REACT_SCAN__;\n      if (!globalScan) return [];\n\n      const components = Object.entries(globalScan.components || {}).map(\n        ([name, data]) => ({\n          name,\n          renderCount: data.renderCount || 0,\n          renderTime: data.renderTime || 0,\n          avgRenderTime:\n            data.renderCount > 0 ? data.renderTime / data.renderCount : 0,\n          efficiency: Math.max(\n            0,\n            100 - (data.renderTime / data.renderCount || 0) * 10,\n          ),\n        }),\n      );\n\n      return components.sort((a, b) => b.renderTime - a.renderTime);\n    } catch (error) {\n      console.warn('Failed to read React Scan data:', error);\n      return [];\n    }\n  }, []);\n\n  // æ›´æ–°æ•°æ®\n  const updateData = useCallback(() => {\n    const newStats = readReactScanData();\n    _setComponentStats(newStats);\n  }, [readReactScanData]);\n\n  // å®šæœŸæ›´æ–°æ•°æ®\n  useEffect(() => {\n    if (!isRecording) return;\n\n    const interval = setInterval(updateData, 1000);\n    return () => clearInterval(interval);\n  }, [isRecording, updateData]);\n\n  // æ§åˆ¶å‡½æ•°\n  const startRecording = () => {\n    setIsRecording(true);\n    updateData();\n  };\n\n  const stopRecording = () => {\n    setIsRecording(false);\n  };\n\n  const clearData = () => {\n    _setComponentStats([]);\n    setIsRecording(false);\n  };\n\n  const exportData = () => {\n    const dataStr = JSON.stringify(componentStats, null, 2);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `react-scan-data-${new Date().toISOString()}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <Card className='w-full'>\n      <CardHeader>\n        <CardTitle className='flex items-center gap-2'>\n          React Scan åˆ†æå™¨\n          <Badge variant={isRecording ? 'destructive' : 'secondary'}>\n            {isRecording ? 'è®°å½•ä¸­' : 'å·²åœæ­¢'}\n          </Badge>\n        </CardTitle>\n        <CardDescription>åˆ†æ React ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½å’Œæ•ˆç‡</CardDescription>\n      </CardHeader>\n\n      <CardContent className='space-y-4'>\n        {/* æ§åˆ¶é¢æ¿ */}\n        <div className='flex flex-wrap gap-2'>\n          <Button\n            onClick={isRecording ? stopRecording : startRecording}\n            variant={isRecording ? 'destructive' : 'default'}\n          >\n            {isRecording ? 'åœæ­¢è®°å½•' : 'å¼€å§‹è®°å½•'}\n          </Button>\n          <Button\n            onClick={clearData}\n            variant='outline'\n          >\n            æ¸…é™¤æ•°æ®\n          </Button>\n          <Button\n            onClick={exportData}\n            variant='outline'\n            disabled={!componentStats.length}\n          >\n            å¯¼å‡ºæ•°æ®\n          </Button>\n        </div>\n\n        {/* æ•°æ®è¡¨æ ¼ */}\n        <Tabs\n          defaultValue='stats'\n          className='w-full'\n        >\n          <TabsList>\n            <TabsTrigger value='stats'>ç»„ä»¶ç»Ÿè®¡</TabsTrigger>\n            <TabsTrigger value='summary'>æ€§èƒ½æ‘˜è¦</TabsTrigger>\n          </TabsList>\n\n          <TabsContent\n            value='stats'\n            className='space-y-4'\n          >\n            {componentStats.length > 0 ? (\n              <div className='overflow-x-auto'>\n                <table className='w-full border-collapse'>\n                  <thead>\n                    <tr className='border-b'>\n                      <th className='p-2 text-left font-medium'>ç»„ä»¶åç§°</th>\n                      <th className='p-2 text-right font-medium'>æ¸²æŸ“æ¬¡æ•°</th>\n                      <th className='p-2 text-right font-medium'>æ€»æ—¶é—´(ms)</th>\n                      <th className='p-2 text-right font-medium'>\n                        å¹³å‡æ—¶é—´(ms)\n                      </th>\n                      <th className='p-2 text-right font-medium'>æ•ˆç‡åˆ†æ•°</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {componentStats.map((stat, index) => (\n                      <tr\n                        key={`${stat.name}-${index}`}\n                        className='hover:bg-muted/50 border-b'\n                      >\n                        <td className='p-2 font-mono text-sm'>{stat.name}</td>\n                        <td className='p-2 text-right'>{stat.renderCount}</td>\n                        <td className='p-2 text-right'>\n                          {stat.renderTime.toFixed(2)}\n                        </td>\n                        <td className='p-2 text-right'>\n                          {stat.avgRenderTime.toFixed(2)}\n                        </td>\n                        <td className='p-2 text-right'>\n                          <Badge\n                            variant={\n                              stat.efficiency >= 80\n                                ? 'default'\n                                : stat.efficiency >= 60\n                                  ? 'secondary'\n                                  : 'destructive'\n                            }\n                          >\n                            {stat.efficiency.toFixed(0)}\n                          </Badge>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            ) : (\n              <div className='text-muted-foreground py-8 text-center'>\n                æš‚æ— ç»„ä»¶æ•°æ®ï¼Œè¯·ç‚¹å‡»&ldquo;å¼€å§‹è®°å½•&rdquo;å¼€å§‹åˆ†æ\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent\n            value='summary'\n            className='space-y-4'\n          >\n            {componentStats.length > 0 ? (\n              <div className='grid grid-cols-1 gap-4 md:grid-cols-3'>\n                <Card>\n                  <CardHeader className='pb-2'>\n                    <CardTitle className='text-sm'>æ€»ç»„ä»¶æ•°</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className='text-2xl font-bold'>\n                      {componentStats.length}\n                    </div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className='pb-2'>\n                    <CardTitle className='text-sm'>æ€»æ¸²æŸ“æ¬¡æ•°</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className='text-2xl font-bold'>\n                      {componentStats.reduce(\n                        (sum, c) => sum + c.renderCount,\n                        0,\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className='pb-2'>\n                    <CardTitle className='text-sm'>æ€»æ¸²æŸ“æ—¶é—´</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className='text-2xl font-bold'>\n                      {componentStats\n                        .reduce((sum, c) => sum + c.renderTime, 0)\n                        .toFixed(2)}\n                      ms\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            ) : (\n              <div className='text-muted-foreground py-8 text-center'>\n                æš‚æ— æ•°æ®\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer/control-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer/data-reader.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[901,904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[901,904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1065,1068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1065,1068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback } from 'react';\n\nexport interface ReactScanData {\n  components: Array<{\n    name: string;\n    renderCount: number;\n    renderTime: number;\n    lastRenderTime: number;\n  }>;\n  totalRenderTime: number;\n  totalRenderCount: number;\n}\n\nexport interface ComponentStats {\n  name: string;\n  renderCount: number;\n  renderTime: number;\n  lastRenderTime: number;\n  avgRenderTime: number;\n  efficiency: number;\n  timestamp: number;\n}\n\n/**\n * React Scan åŸå§‹ç»„ä»¶æ•°æ®æ¥å£\n */\n// interface _ReactScanRawComponentData {\n// renderCount?: number;\n// renderTime?: number;\n// lastRenderTime?: number;\n// }\n\n/**\n * React Scan æ•°æ®è¯»å–é’©å­\n */\nexport const useReactScanDataReader = () => {\n  // è¯»å– React Scan å†…éƒ¨æ•°æ®\n  const readReactScanData = useCallback((): ReactScanData | null => {\n    if (typeof window === 'undefined') return null;\n\n    try {\n      // å°è¯•ä»å…¨å±€å¯¹è±¡è¯»å– React Scan æ•°æ®\n      const globalScan = (window as any).__REACT_SCAN__;\n      if (!globalScan) return null;\n\n      const components = Object.entries(globalScan.components || {}).map(\n        ([name, data]: [string, any]) => ({\n          name,\n          renderCount: data.renderCount || 0,\n          renderTime: data.renderTime || 0,\n          lastRenderTime: data.lastRenderTime || 0,\n        }),\n      );\n\n      return {\n        components,\n        totalRenderTime: components.reduce((sum, c) => sum + c.renderTime, 0),\n        totalRenderCount: components.reduce((sum, c) => sum + c.renderCount, 0),\n      };\n    } catch (error) {\n      console.warn('Failed to read React Scan data:', error);\n      return null;\n    }\n  }, []);\n\n  // å¤„ç†æ‰«ææ•°æ®\n  const processScanData = useCallback(\n    (data: ReactScanData | null): ComponentStats[] => {\n      if (!data || !data.components.length) return [];\n\n      return data.components\n        .map((component) => {\n          const avgRenderTime =\n            component.renderCount > 0\n              ? component.renderTime / component.renderCount\n              : 0;\n\n          const efficiency =\n            avgRenderTime > 0 ? Math.max(0, 100 - avgRenderTime * 10) : 100;\n\n          return {\n            ...component,\n            avgRenderTime,\n            efficiency,\n            timestamp: Date.now(),\n          };\n        })\n        .sort((a, b) => b.renderTime - a.renderTime);\n    },\n    [],\n  );\n\n  return {\n    readReactScanData,\n    processScanData,\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-analyzer/stats-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-demo.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { REACT_SCAN_CONFIG } from '@/constants/react-scan';\n\n/**\n * React Scan æ¼”ç¤ºç»„ä»¶\n *\n * ç”¨äºæ¼”ç¤º React Scan å¦‚ä½•æ£€æµ‹ä¸å¿…è¦çš„æ¸²æŸ“\n * åŒ…å«ä¼˜åŒ–å’Œæœªä¼˜åŒ–çš„ç»„ä»¶ç¤ºä¾‹\n */\n\n// æœªä¼˜åŒ–çš„ç»„ä»¶ - ä¼šå¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“\nfunction UnoptimizedComponent({ count }: { count: number }) {\n  console.log('ğŸ”´ UnoptimizedComponent rendered');\n\n  // æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡å’Œå‡½æ•°\n  const style = { color: 'red', fontWeight: 'bold' };\n  const handleClick = () => console.log('Clicked');\n\n  return (\n    <div style={style}>\n      <p>Unoptimized Count: {count}</p>\n      <button onClick={handleClick}>Click me</button>\n    </div>\n  );\n}\n\n// ä¼˜åŒ–çš„ç»„ä»¶ - ä½¿ç”¨ React.memo å’Œ hooks\nconst OptimizedComponent = React.memo(({ count }: { count: number }) => {\n  console.log('ğŸŸ¢ OptimizedComponent rendered');\n\n  // ä½¿ç”¨ useMemo ç¼“å­˜æ ·å¼å¯¹è±¡\n  const style = useMemo(\n    () => ({\n      color: 'green',\n      fontWeight: 'bold' as const,\n    }),\n    [],\n  );\n\n  // ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\n  const handleClick = useCallback(() => {\n    console.log('Optimized clicked');\n  }, []);\n\n  return (\n    <div style={style}>\n      <p>Optimized Count: {count}</p>\n      <button onClick={handleClick}>Click me</button>\n    </div>\n  );\n});\n\nOptimizedComponent.displayName = 'OptimizedComponent';\n\n// é¢‘ç¹æ¸²æŸ“çš„ç»„ä»¶ - ç”¨äºæµ‹è¯•æ€§èƒ½è­¦å‘Š\nfunction FrequentRenderComponent({ trigger }: { trigger: number }) {\n  console.log('âš¡ FrequentRenderComponent rendered');\n\n  // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—\n  const expensiveValue = useMemo(() => {\n    let result = 0;\n    for (let i = 0; i < 1000; i++) {\n      result += Math.random();\n    }\n    return result;\n  }, []); // åªè®¡ç®—ä¸€æ¬¡ï¼Œä¸ä¾èµ–ä»»ä½•å˜é‡\n\n  return (\n    <div className='rounded border p-2'>\n      <p>Frequent Render: {trigger}</p>\n      <p>\n        Expensive Value:{' '}\n        {expensiveValue.toFixed(\n          DEV_TOOLS_CONSTANTS.REACT_SCAN.EXPORT_SPLIT_COUNT,\n        )}\n      </p>\n    </div>\n  );\n}\n\n// ä¸»æ¼”ç¤ºç»„ä»¶\nexport function ReactScanDemo() {\n  const [count, setCount] = useState(0);\n  const [trigger, setTrigger] = useState(0);\n  const [independentState, setIndependentState] = useState(0);\n\n  // æ£€æŸ¥ React Scan æ˜¯å¦å¯ç”¨\n  const isReactScanEnabled =\n    process.env.NODE_ENV === 'development' &&\n    process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN !== 'true';\n\n  if (!isReactScanEnabled) {\n    const reason =\n      process.env.NODE_ENV !== 'development'\n        ? 'React Scan is only available in development mode.'\n        : 'React Scan is disabled. Set NEXT_PUBLIC_DISABLE_REACT_SCAN=false to enable.';\n\n    return (\n      <Card className='p-6'>\n        <h3 className='mb-4 text-lg font-semibold'>React Scan Demo</h3>\n        <p className='text-muted-foreground'>{reason}</p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className='p-6'>\n      <h3 className='mb-4 text-lg font-semibold'>\n        React Scan Performance Demo\n      </h3>\n\n      <div className='space-y-4'>\n        {/* æ§åˆ¶æŒ‰é’® */}\n        <div className='flex gap-2'>\n          <Button\n            onClick={() => setCount((c) => c + 1)}\n            variant='outline'\n          >\n            Increment Count ({count})\n          </Button>\n\n          <Button\n            onClick={() => setTrigger((t) => t + 1)}\n            variant='outline'\n          >\n            Trigger Frequent Render ({trigger})\n          </Button>\n\n          <Button\n            onClick={() => setIndependentState((s) => s + 1)}\n            variant='outline'\n          >\n            Independent State ({independentState})\n          </Button>\n        </div>\n\n        {/* ç»„ä»¶å¯¹æ¯” */}\n        <div className='grid grid-cols-1 gap-4 md:grid-cols-2'>\n          <Card className='p-4'>\n            <h4 className='mb-2 text-sm font-medium text-red-600'>\n              âŒ Unoptimized Component\n            </h4>\n            <p className='text-muted-foreground mb-2 text-xs'>\n              Will re-render on every parent update\n            </p>\n            <UnoptimizedComponent count={count} />\n          </Card>\n\n          <Card className='p-4'>\n            <h4 className='mb-2 text-sm font-medium text-green-600'>\n              âœ… Optimized Component\n            </h4>\n            <p className='text-muted-foreground mb-2 text-xs'>\n              Only re-renders when count changes\n            </p>\n            <OptimizedComponent count={count} />\n          </Card>\n        </div>\n\n        {/* é¢‘ç¹æ¸²æŸ“ç»„ä»¶ */}\n        <Card className='p-4'>\n          <h4 className='mb-2 text-sm font-medium text-yellow-600'>\n            âš¡ Frequent Render Component\n          </h4>\n          <p className='text-muted-foreground mb-2 text-xs'>\n            Triggers performance warnings when rendered frequently\n          </p>\n          <FrequentRenderComponent trigger={trigger} />\n        </Card>\n\n        {/* ä½¿ç”¨è¯´æ˜ */}\n        <Card className='bg-blue-50 p-4'>\n          <h4 className='mb-2 text-sm font-medium'>\n            ğŸ” React Scan Instructions\n          </h4>\n          <ul className='text-muted-foreground space-y-1 text-xs'>\n            <li>â€¢ Red highlights indicate unnecessary re-renders</li>\n            <li>â€¢ Green highlights indicate optimized renders</li>\n            <li>â€¢ Check browser console for performance warnings</li>\n            <li>â€¢ Press Ctrl+Shift+X to toggle React Scan display</li>\n            <li>â€¢ Click buttons above to trigger different render patterns</li>\n          </ul>\n        </Card>\n      </div>\n    </Card>\n  );\n}\n\n/**\n * React Scan æ€§èƒ½æµ‹è¯•ç»„ä»¶\n *\n * ç”¨äºç”Ÿæˆå¤§é‡æ¸²æŸ“ä»¥æµ‹è¯•æ€§èƒ½ç›‘æ§\n */\nexport function ReactScanStressTest() {\n  const [items, setItems] = useState<number[]>([]);\n\n  const addItems = useCallback(() => {\n    setItems((prev) => [\n      ...prev,\n      ...Array.from({ length: 10 }, (_, i) => prev.length + i),\n    ]);\n  }, []);\n\n  const clearItems = useCallback(() => {\n    setItems([]);\n  }, []);\n\n  return (\n    <Card className='p-6'>\n      <h3 className='mb-4 text-lg font-semibold'>React Scan Stress Test</h3>\n\n      <div className='space-y-4'>\n        <div className='flex gap-2'>\n          <Button\n            onClick={addItems}\n            variant='outline'\n          >\n            Add 10 Items ({items.length})\n          </Button>\n          <Button\n            onClick={clearItems}\n            variant='outline'\n          >\n            Clear All\n          </Button>\n        </div>\n\n        <div className='grid grid-cols-5 gap-2'>\n          {items.map((item) => (\n            <div\n              key={item}\n              className='rounded border p-2 text-center text-xs'\n            >\n              Item {item}\n            </div>\n          ))}\n        </div>\n\n        {items.length > REACT_SCAN_CONFIG.LARGE_ITEMS_WARNING_THRESHOLD && (\n          <p className='text-sm text-yellow-600'>\n            âš ï¸ Large number of items may trigger performance warnings\n          </p>\n        )}\n      </div>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide-simple.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":30,"column":66,"nodeType":"MemberExpression","endLine":30,"endColumn":79},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":60,"column":9,"nodeType":"MemberExpression","endLine":60,"endColumn":25}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":50,"column":12,"nodeType":"MemberExpression","endLine":50,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronDown, ChevronRight, ExternalLink } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\n/**\n * React Scan ä½¿ç”¨æŒ‡å—ç»„ä»¶ - ç®€åŒ–ç‰ˆ\n */\nexport function ReactScanGuide() {\n  const [openSections, setOpenSections] = useState<Record<string, boolean>>({\n    quickStart: true,\n  });\n\n  const toggleSection = (section: string) => {\n    setOpenSections((prev) => ({\n      ...prev,\n       \n      [section]:\n        !Object.prototype.hasOwnProperty.call(prev, section) || !prev[section], // section æ¥è‡ªå†…éƒ¨æ§åˆ¶ï¼Œå®‰å…¨\n    }));\n  };\n\n  const Section = ({\n    id,\n    title,\n    children,\n  }: {\n    id: string;\n    title: string;\n    children: React.ReactNode;\n  }) => (\n    <Card className='mb-4'>\n      <CardHeader\n        className='cursor-pointer'\n        onClick={() => toggleSection(id)}\n      >\n        <CardTitle className='flex items-center gap-2 text-lg'>\n          {/* eslint-disable-next-line security/detect-object-injection */}\n          {openSections[id] ? (\n            <ChevronDown className='h-4 w-4' />\n          ) : (\n            <ChevronRight className='h-4 w-4' />\n          )}\n          {title}\n        </CardTitle>\n      </CardHeader>\n      { }\n      {Object.prototype.hasOwnProperty.call(openSections, id) &&\n        openSections[id] && <CardContent>{children}</CardContent>}\n    </Card>\n  );\n\n  return (\n    <div className='mx-auto w-full max-w-4xl space-y-6'>\n      <Card>\n        <CardHeader>\n          <CardTitle className='flex items-center gap-2'>\n            React Scan ä½¿ç”¨æŒ‡å—\n            <Badge variant='secondary'>å¼€å‘å·¥å…·</Badge>\n          </CardTitle>\n          <CardDescription>\n            å­¦ä¹ å¦‚ä½•ä½¿ç”¨ React Scan æ¥åˆ†æå’Œä¼˜åŒ– React åº”ç”¨çš„æ€§èƒ½\n          </CardDescription>\n        </CardHeader>\n      </Card>\n\n      <Tabs\n        defaultValue='guide'\n        className='w-full'\n      >\n        <TabsList className='grid w-full grid-cols-3'>\n          <TabsTrigger value='guide'>ä½¿ç”¨æŒ‡å—</TabsTrigger>\n          <TabsTrigger value='examples'>ç¤ºä¾‹ä»£ç </TabsTrigger>\n          <TabsTrigger value='tips'>ä¼˜åŒ–æŠ€å·§</TabsTrigger>\n        </TabsList>\n\n        <TabsContent\n          value='guide'\n          className='space-y-4'\n        >\n          <Section\n            id='quickStart'\n            title='å¿«é€Ÿå¼€å§‹'\n          >\n            <div className='space-y-4'>\n              <p className='text-muted-foreground text-sm'>\n                React Scan æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ è¯†åˆ« React\n                åº”ç”¨ä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚\n              </p>\n\n              <div className='space-y-2'>\n                <h4 className='font-medium'>å®‰è£…æ­¥éª¤ï¼š</h4>\n                <ol className='list-inside list-decimal space-y-1 text-sm'>\n                  <li>å®‰è£… React Scan åŒ…</li>\n                  <li>åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ React Scan</li>\n                  <li>ä½¿ç”¨åˆ†æå™¨æŸ¥çœ‹æ€§èƒ½æ•°æ®</li>\n                </ol>\n              </div>\n\n              <div className='bg-muted rounded-lg p-4'>\n                <code className='text-sm'>\n                  npm install react-scan --save-dev\n                </code>\n              </div>\n            </div>\n          </Section>\n\n          <Section\n            id='configuration'\n            title='é…ç½®é€‰é¡¹'\n          >\n            <div className='space-y-4'>\n              <p className='text-muted-foreground text-sm'>\n                React Scan æä¾›å¤šç§é…ç½®é€‰é¡¹æ¥è‡ªå®šä¹‰åˆ†æè¡Œä¸ºã€‚\n              </p>\n\n              <div className='space-y-2'>\n                <h4 className='font-medium'>ä¸»è¦é…ç½®ï¼š</h4>\n                <ul className='list-inside list-disc space-y-1 text-sm'>\n                  <li>enabled: å¯ç”¨/ç¦ç”¨æ‰«æ</li>\n                  <li>showToolbar: æ˜¾ç¤ºå·¥å…·æ </li>\n                  <li>alwaysShowLabels: å§‹ç»ˆæ˜¾ç¤ºæ ‡ç­¾</li>\n                  <li>animationSpeed: åŠ¨ç”»é€Ÿåº¦</li>\n                </ul>\n              </div>\n            </div>\n          </Section>\n\n          <Section\n            id='analysis'\n            title='æ€§èƒ½åˆ†æ'\n          >\n            <div className='space-y-4'>\n              <p className='text-muted-foreground text-sm'>\n                ä½¿ç”¨ React Scan åˆ†æå™¨æ¥æ·±å…¥äº†è§£ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½ã€‚\n              </p>\n\n              <div className='space-y-2'>\n                <h4 className='font-medium'>åˆ†ææŒ‡æ ‡ï¼š</h4>\n                <ul className='list-inside list-disc space-y-1 text-sm'>\n                  <li>æ¸²æŸ“æ¬¡æ•°ï¼šç»„ä»¶è¢«æ¸²æŸ“çš„æ€»æ¬¡æ•°</li>\n                  <li>æ¸²æŸ“æ—¶é—´ï¼šç»„ä»¶æ¸²æŸ“æ‰€èŠ±è´¹çš„æ—¶é—´</li>\n                  <li>å¹³å‡æ—¶é—´ï¼šæ¯æ¬¡æ¸²æŸ“çš„å¹³å‡æ—¶é—´</li>\n                  <li>æ•ˆç‡åˆ†æ•°ï¼šåŸºäºæ€§èƒ½çš„è¯„åˆ†</li>\n                </ul>\n              </div>\n            </div>\n          </Section>\n        </TabsContent>\n\n        <TabsContent\n          value='examples'\n          className='space-y-4'\n        >\n          <Card>\n            <CardHeader>\n              <CardTitle className='text-lg'>ä»£ç ç¤ºä¾‹</CardTitle>\n            </CardHeader>\n            <CardContent className='space-y-4'>\n              <div>\n                <h4 className='mb-2 font-medium'>åŸºç¡€é…ç½®</h4>\n                <div className='bg-muted rounded-lg p-4'>\n                  <pre className='overflow-x-auto text-sm'>\n                    {`import { scan } from 'react-scan';\n\n// åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨\nif (process.env.NODE_ENV === 'development') {\n  scan({\n    enabled: true,\n    showToolbar: true,\n  });\n}`}\n                  </pre>\n                </div>\n              </div>\n\n              <div>\n                <h4 className='mb-2 font-medium'>ç»„ä»¶ä¼˜åŒ–ç¤ºä¾‹</h4>\n                <div className='bg-muted rounded-lg p-4'>\n                  <pre className='overflow-x-auto text-sm'>\n                    {`// ä½¿ç”¨ React.memo ä¼˜åŒ–ç»„ä»¶\nconst OptimizedComponent = React.memo(({ data }) => {\n  return <div>{data.name}</div>;\n});\n\n// ä½¿ç”¨ useMemo ä¼˜åŒ–è®¡ç®—\nconst ExpensiveComponent = ({ items }) => {\n  const expensiveValue = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.value, 0);\n  }, [items]);\n\n  return <div>{expensiveValue}</div>;\n};`}\n                  </pre>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent\n          value='tips'\n          className='space-y-4'\n        >\n          <Card>\n            <CardHeader>\n              <CardTitle className='text-lg'>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</CardTitle>\n            </CardHeader>\n            <CardContent className='space-y-4'>\n              <div className='space-y-3'>\n                <div className='border-l-4 border-blue-500 pl-4'>\n                  <h4 className='font-medium'>ä½¿ç”¨ React.memo</h4>\n                  <p className='text-muted-foreground text-sm'>\n                    å¯¹äºçº¯ç»„ä»¶ï¼Œä½¿ç”¨ React.memo å¯ä»¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚\n                  </p>\n                </div>\n\n                <div className='border-l-4 border-green-500 pl-4'>\n                  <h4 className='font-medium'>ä¼˜åŒ–çŠ¶æ€ç®¡ç†</h4>\n                  <p className='text-muted-foreground text-sm'>\n                    å°†çŠ¶æ€å°½å¯èƒ½é è¿‘ä½¿ç”¨å®ƒçš„ç»„ä»¶ï¼Œé¿å…ä¸å¿…è¦çš„çŠ¶æ€ä¼ é€’ã€‚\n                  </p>\n                </div>\n\n                <div className='border-l-4 border-yellow-500 pl-4'>\n                  <h4 className='font-medium'>ä½¿ç”¨ useMemo å’Œ useCallback</h4>\n                  <p className='text-muted-foreground text-sm'>\n                    å¯¹äºæ˜‚è´µçš„è®¡ç®—å’Œå‡½æ•°ï¼Œä½¿ç”¨è¿™äº›é’©å­æ¥é¿å…é‡å¤è®¡ç®—ã€‚\n                  </p>\n                </div>\n\n                <div className='border-l-4 border-red-500 pl-4'>\n                  <h4 className='font-medium'>é¿å…å†…è”å¯¹è±¡å’Œå‡½æ•°</h4>\n                  <p className='text-muted-foreground text-sm'>\n                    åœ¨ JSX\n                    ä¸­é¿å…åˆ›å»ºå†…è”å¯¹è±¡å’Œå‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚\n                  </p>\n                </div>\n              </div>\n\n              <div className='pt-4'>\n                <Button\n                  variant='outline'\n                  className='w-full'\n                >\n                  <ExternalLink className='mr-2 h-4 w-4' />\n                  æŸ¥çœ‹æ›´å¤šä¼˜åŒ–æŠ€å·§\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide/basics-tab.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":223,"column":19,"nodeType":"MemberExpression","endLine":223,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide/colors-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide/debugging-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide/optimization-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-guide/workflow-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/dev-tools/react-scan-provider.tsx","messages":[{"ruleId":"no-empty-function","severity":1,"message":"Unexpected empty method 'registerTool'.","line":178,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":178,"endColumn":42},{"ruleId":"no-empty-function","severity":1,"message":"Unexpected empty method 'unregisterTool'.","line":179,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":179,"endColumn":44},{"ruleId":"no-empty-function","severity":1,"message":"Unexpected empty method 'registerTool'.","line":228,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":228,"endColumn":42},{"ruleId":"no-empty-function","severity":1,"message":"Unexpected empty method 'unregisterTool'.","line":229,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":229,"endColumn":44}],"suppressedMessages":[{"ruleId":"no-empty-function","severity":1,"message":"Unexpected empty arrow function.","line":147,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":147,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":159,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":164,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect } from 'react';\nimport { REACT_SCAN_CONFIG } from '@/constants/react-scan';\n\n/**\n * React Scan Provider\n *\n * è´Ÿè´£åœ¨å¼€å‘ç¯å¢ƒä¸­è‡ªåŠ¨åˆå§‹åŒ– React Scan æ€§èƒ½ç›‘æ§å·¥å…·\n * ç‰¹ç‚¹ï¼š\n * - å¼€å‘ç¯å¢ƒè‡ªåŠ¨å¯ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ç¦ç”¨\n * - è·Ÿéšå¼€å‘æœåŠ¡å™¨å¯ç”¨/å…³é—­\n * - å¯é€šè¿‡ç¯å¢ƒå˜é‡ç¦ç”¨ï¼ˆNEXT_PUBLIC_DISABLE_REACT_SCAN=trueï¼‰\n * - ä¸å½±å“ç”Ÿäº§æ„å»º\n * - æä¾›å®æ—¶çš„ React ç»„ä»¶æ€§èƒ½åˆ†æ\n * - è‡ªå®šä¹‰ Ctrl+Shift+X å¿«æ·é”®åˆ‡æ¢åŠŸèƒ½\n */\nexport function ReactScanProvider({ children }: { children: React.ReactNode }) {\n  useEffect(() => {\n    // ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ç¦ç”¨\n    if (process.env.NODE_ENV === 'production') {\n      return;\n    }\n\n    // éå¼€å‘ç¯å¢ƒç¦ç”¨\n    if (process.env.NODE_ENV !== 'development') {\n      return;\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æ˜ç¡®ç¦ç”¨\n    const explicitlyDisabled =\n      process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN === 'true';\n\n    if (explicitlyDisabled) {\n      console.log(\n        'ğŸ” React Scan disabled by NEXT_PUBLIC_DISABLE_REACT_SCAN=true',\n      );\n      return;\n    }\n\n    // let reactScanInstance: unknown = null; // TODO: Use when needed\n    let isReactScanEnabled = true;\n\n    // åŠ¨æ€å¯¼å…¥å¹¶åˆå§‹åŒ– React Scan\n    const initReactScan = async () => {\n      try {\n        const { scan, setOptions } = await import('react-scan');\n\n        // åˆå§‹åŒ– React Scan\n        scan({\n          enabled: true,\n          showToolbar: true,\n          log: false, // é¿å…æ§åˆ¶å°å™ªéŸ³ï¼Œä¿æŒæ—¥å¿—æ¸…æ´\n          // trackUnnecessaryRenders: true, // æ£€æµ‹ä¸å¿…è¦çš„æ¸²æŸ“ - è¯¥é€‰é¡¹ä¸å­˜åœ¨\n          animationSpeed: 'fast',\n\n          // è‡ªå®šä¹‰å›è°ƒ - ä¸ç°æœ‰æ€§èƒ½ç›‘æ§ç³»ç»Ÿé›†æˆ\n          onRender: (fiber, renders) => {\n            // å¯ä»¥åœ¨è¿™é‡Œé›†æˆåˆ°ç°æœ‰çš„æ€§èƒ½ç›‘æ§ç³»ç»Ÿ\n            if (renders.length > REACT_SCAN_CONFIG.RENDER_WARNING_THRESHOLD) {\n              console.warn(\n                `ğŸŒ Component ${fiber.type?.name || 'Unknown'} rendered ${renders.length} times`,\n              );\n            }\n          },\n        });\n\n        // è‡ªå®šä¹‰å¿«æ·é”®å¤„ç†å™¨\n        const handleKeyDown = (event: KeyboardEvent) => {\n          // æ£€æŸ¥ Ctrl+Shift+X ç»„åˆé”®\n          if (\n            event.ctrlKey &&\n            event.shiftKey &&\n            event.key.toLowerCase() === 'x'\n          ) {\n            event.preventDefault();\n\n            try {\n              // åˆ‡æ¢ React Scan å¯ç”¨çŠ¶æ€\n              isReactScanEnabled = !isReactScanEnabled;\n\n              // æ›´æ–° React Scan é€‰é¡¹\n              setOptions({\n                enabled: isReactScanEnabled,\n                showToolbar: isReactScanEnabled,\n              });\n\n              // æä¾›ç”¨æˆ·åé¦ˆ\n              const status = isReactScanEnabled ? 'enabled' : 'disabled';\n              console.log(`ğŸ” React Scan ${status} via Ctrl+Shift+X`);\n\n              // å¯é€‰ï¼šæ˜¾ç¤ºä¸´æ—¶é€šçŸ¥\n              if (typeof window !== 'undefined') {\n                const notification = document.createElement('div');\n                notification.textContent = `React Scan ${status}`;\n                notification.style.cssText = `\n                  position: fixed;\n                  top: 20px;\n                  right: 20px;\n                  background: ${isReactScanEnabled ? '#10b981' : '#ef4444'};\n                  color: white;\n                  padding: 12px 16px;\n                  border-radius: 8px;\n                  font-family: system-ui, sans-serif;\n                  font-size: 14px;\n                  font-weight: 500;\n                  z-index: 10000;\n                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n                  transition: opacity 0.3s ease;\n                `;\n\n                document.body.appendChild(notification);\n\n                // 3ç§’åç§»é™¤é€šçŸ¥\n                setTimeout(() => {\n                  notification.style.opacity = '0';\n                  setTimeout(() => {\n                    if (notification.parentNode) {\n                      notification.parentNode.removeChild(notification);\n                    }\n                  }, REACT_SCAN_CONFIG.NOTIFICATION_FADE_DURATION);\n                }, REACT_SCAN_CONFIG.NOTIFICATION_DISPLAY_DURATION);\n              }\n            } catch (error) {\n              console.warn('Failed to toggle React Scan:', error);\n            }\n          }\n        };\n\n        // æ³¨å†Œå…¨å±€é”®ç›˜äº‹ä»¶ç›‘å¬å™¨\n        document.addEventListener('keydown', handleKeyDown, { capture: true });\n\n        console.log(\n          'ğŸ” React Scan initialized - Performance monitoring active',\n        );\n        console.log('ğŸ’¡ Press Ctrl+Shift+X to toggle React Scan');\n\n        // è¿”å›æ¸…ç†å‡½æ•°\n        return () => {\n          document.removeEventListener('keydown', handleKeyDown, {\n            capture: true,\n          });\n        };\n      } catch (error) {\n        console.warn('Failed to initialize React Scan:', error);\n        // eslint-disable-next-line no-empty-function\n        return () => {}; // è¿”å›ç©ºæ¸…ç†å‡½æ•°ï¼Œé”™è¯¯æƒ…å†µä¸‹æ— éœ€æ¸…ç†\n      }\n    };\n\n    // æ‰§è¡Œåˆå§‹åŒ–å¹¶ä¿å­˜æ¸…ç†å‡½æ•°\n    let cleanup: (() => void) | undefined;\n    initReactScan().then((cleanupFn) => {\n      cleanup = cleanupFn;\n    });\n\n    // ç»„ä»¶å¸è½½æ—¶æ¸…ç†\n    // eslint-disable-next-line consistent-return\n    return () => {\n      // useEffect æ¸…ç†å‡½æ•°\n      if (cleanup) {\n        cleanup();\n      }\n    };\n  }, []);\n\n  return <>{children}</>;\n}\n\n/**\n * React Scan çŠ¶æ€æŒ‡ç¤ºå™¨\n *\n * åœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º React Scan çš„å¯ç”¨çŠ¶æ€\n * è‡ªåŠ¨è·Ÿéšå¼€å‘ç¯å¢ƒå¯ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸æ˜¾ç¤º\n */\nexport function ReactScanIndicator() {\n  const { registerTool, unregisterTool, getClasses } = {\n    registerTool: (_toolId: string) => {},\n    unregisterTool: (_toolId: string) => {},\n    getClasses: () => '',\n  };\n\n  // æ£€æŸ¥æ˜¯å¦æ˜ç¡®ç¦ç”¨\n  const explicitlyDisabled =\n    process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN === 'true';\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨ - å§‹ç»ˆè°ƒç”¨ Hook\n  useEffect(() => {\n    if (!explicitlyDisabled && process.env.NODE_ENV === 'development') {\n      registerTool('reactScanIndicator');\n      return () => unregisterTool('reactScanIndicator');\n    }\n    return undefined;\n  }, [explicitlyDisabled, registerTool, unregisterTool]);\n\n  // ç”Ÿäº§ç¯å¢ƒä¸æ˜¾ç¤º\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n\n  // éå¼€å‘ç¯å¢ƒä¸æ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  if (explicitlyDisabled) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`${getClasses()} flex items-center gap-2 rounded-md bg-blue-500 px-3 py-2 text-xs text-white shadow-lg`}\n    >\n      <div className='h-2 w-2 animate-pulse rounded-full bg-white'></div>\n      <span>ğŸ” React Scan Active</span>\n    </div>\n  );\n}\n\n/**\n * React Scan æ§åˆ¶é¢æ¿\n *\n * æä¾›å¼€å‘ç¯å¢ƒä¸­çš„ React Scan æ§åˆ¶é€‰é¡¹\n * è‡ªåŠ¨è·Ÿéšå¼€å‘ç¯å¢ƒå¯ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸æ˜¾ç¤º\n */\nexport function ReactScanControlPanel() {\n  const { registerTool, unregisterTool, getClasses } = {\n    registerTool: (_toolId: string) => {},\n    unregisterTool: (_toolId: string) => {},\n    getClasses: () => '',\n  };\n\n  // æ£€æŸ¥æ˜¯å¦æ˜ç¡®ç¦ç”¨\n  const explicitlyDisabled =\n    process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN === 'true';\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨ - å§‹ç»ˆè°ƒç”¨ Hook\n  useEffect(() => {\n    if (!explicitlyDisabled && process.env.NODE_ENV === 'development') {\n      registerTool('reactScanControlPanel');\n      return () => unregisterTool('reactScanControlPanel');\n    }\n    return undefined;\n  }, [explicitlyDisabled, registerTool, unregisterTool]);\n\n  // ç”Ÿäº§ç¯å¢ƒä¸æ˜¾ç¤º\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n\n  // éå¼€å‘ç¯å¢ƒä¸æ˜¾ç¤º\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  if (explicitlyDisabled) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`${getClasses()} rounded-lg bg-gray-900 p-4 text-white shadow-xl`}\n    >\n      <h3 className='mb-2 text-sm font-semibold'>React Scan Controls</h3>\n      <div className='space-y-2 text-xs'>\n        <div>\n          â€¢ Press <kbd className='rounded bg-gray-700 px-1'>Ctrl+Shift+X</kbd>{' '}\n          to toggle scanning\n        </div>\n        <div>â€¢ Red highlights = unnecessary renders</div>\n        <div>â€¢ Green highlights = optimized renders</div>\n        <div>â€¢ Use toolbar to inspect components</div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase-sections.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/implementation-summary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/theme-toggle-demo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/theme-toggle-demo/animation-variants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/theme-toggle-demo/feature-variants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/theme-toggle-demo/size-variants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/examples/ui-showcase/theme-toggle-demo/technical-comparison.tsx","messages":[{"ruleId":"react-you-might-not-need-an-effect/no-chain-state-updates","severity":1,"message":"Avoid chaining state changes. When possible, update all relevant state simultaneously.","line":14,"column":5,"nodeType":"CallExpression","messageId":"avoidChainingStateUpdates","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\n\n/**\n * æŠ€æœ¯å¯¹æ¯”ç»„ä»¶\n */\nexport function TechnicalComparison() {\n  const [supportsViewTransitions, setSupportsViewTransitions] = useState(false);\n  const [mounted, setMounted] = useState(false);\n\n  // æ£€æµ‹æµè§ˆå™¨æ”¯æŒ\n  useEffect(() => {\n    setMounted(true);\n    setSupportsViewTransitions('startViewTransition' in document);\n  }, [setMounted, setSupportsViewTransitions]);\n\n  return (\n    <div className='bg-muted/50 space-y-4 rounded-lg p-6'>\n      <h4 className='mb-3 font-semibold'>âœ¨ åŠ¨ç”»æŠ€æœ¯å¯¹æ¯”</h4>\n\n      <div className='grid grid-cols-1 gap-6 lg:grid-cols-2'>\n        {/* Circle Blur åŠ¨ç”»ç‰¹æ€§ */}\n        <div className='space-y-3'>\n          <h5 className='flex items-center gap-2 font-medium text-blue-600 dark:text-blue-400'>\n            ğŸŒ€ Circle Blur åŠ¨ç”»\n            <span className='rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-700 dark:bg-blue-900/30 dark:text-blue-300'>\n              ç°ä»£æµè§ˆå™¨\n            </span>\n          </h5>\n          <ul className='text-muted-foreground space-y-1 text-sm'>\n            <li>â€¢ åŸºäº View Transition API å®ç°</li>\n            <li>â€¢ åœ†å½¢å±•å¼€åŠ¨ç”»ï¼šclip-path: circle()</li>\n            <li>â€¢ æ¨¡ç³Šè¿‡æ¸¡æ•ˆæœï¼šfilter: blur(8px â†’ 0px)</li>\n            <li>â€¢ åŠ¨æ€å®šä½ï¼šåŸºäºç‚¹å‡»ä½ç½®è®¡ç®—ä¸­å¿ƒç‚¹</li>\n            <li>â€¢ åŠ¨ç”»æ—¶é•¿ï¼š0.6s cubic-bezier(0.4, 0, 0.2, 1)</li>\n            <li>â€¢ è‡ªåŠ¨é™çº§ï¼šä¸æ”¯æŒæ—¶å›é€€åˆ°æ™®é€šåˆ‡æ¢</li>\n          </ul>\n        </div>\n\n        {/* Framer Motion åŠ¨ç”»ç‰¹æ€§ */}\n        <div className='space-y-3'>\n          <h5 className='flex items-center gap-2 font-medium text-purple-600 dark:text-purple-400'>\n            ğŸ¯ Framer Motion åŠ¨ç”»\n            <span className='rounded-full bg-purple-100 px-2 py-1 text-xs text-purple-700 dark:bg-purple-900/30 dark:text-purple-300'>\n              å…¼å®¹æ€§å¥½\n            </span>\n          </h5>\n          <ul className='text-muted-foreground space-y-1 text-sm'>\n            <li>â€¢ åŸºäº Framer Motion åº“å®ç°</li>\n            <li>â€¢ èƒŒæ™¯æ»‘åŠ¨åŠ¨ç”»ï¼šlayoutId å…±äº«å…ƒç´ </li>\n            <li>â€¢ Spring åŠ¨ç”»å‚æ•°ï¼šduration: 0.5s, bounce: 0.2</li>\n            <li>â€¢ å¹¿æ³›çš„æµè§ˆå™¨æ”¯æŒ</li>\n            <li>â€¢ æ€§èƒ½ä¼˜åŒ–ï¼šGPU åŠ é€Ÿ</li>\n            <li>â€¢ å®Œæ•´çš„æ‰‹åŠ¿æ”¯æŒ</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* é€šç”¨ç‰¹æ€§ */}\n      <div className='border-_t pt-4'>\n        <h5 className='mb-2 font-medium'>ğŸ›¡ï¸ é€šç”¨ç‰¹æ€§</h5>\n        <ul className='text-muted-foreground grid grid-cols-1 space-y-1 gap-x-6 text-sm md:grid-cols-2'>\n          <li>â€¢ æ”¯æŒ prefers-reduced-motion æ£€æµ‹</li>\n          <li>â€¢ å®Œæ•´çš„æ— éšœç¢æ€§æ”¯æŒå’Œé”®ç›˜å¯¼èˆª</li>\n          <li>â€¢ TypeScript ç±»å‹å®‰å…¨</li>\n          <li>â€¢ å“åº”å¼è®¾è®¡é€‚é…</li>\n          <li>â€¢ ä¸»é¢˜ç³»ç»Ÿé›†æˆ</li>\n          <li>â€¢ å›½é™…åŒ–æ”¯æŒ</li>\n        </ul>\n      </div>\n\n      {/* æµè§ˆå™¨æ”¯æŒè¯´æ˜ */}\n      <div className='rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-950/20'>\n        <div className='mb-3 flex items-center justify-between'>\n          <h5 className='font-medium text-amber-800 dark:text-amber-200'>\n            ğŸŒ æµè§ˆå™¨æ”¯æŒè¯´æ˜\n          </h5>\n          {mounted && (\n            <div className='flex items-center gap-2'>\n              <span className='text-xs text-amber-700 dark:text-amber-300'>\n                å½“å‰æµè§ˆå™¨ï¼š\n              </span>\n              <span\n                className={`rounded-full px-2 py-1 text-xs font-medium ${\n                  supportsViewTransitions\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300'\n                    : 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300'\n                }`}\n              >\n                {supportsViewTransitions\n                  ? 'âœ… æ”¯æŒ Circle Blur'\n                  : 'âš ï¸ ä»…æ”¯æŒ Framer Motion'}\n              </span>\n            </div>\n          )}\n        </div>\n        <div className='space-y-1 text-sm text-amber-700 dark:text-amber-300'>\n          <p>\n            <strong>Circle Blur åŠ¨ç”»ï¼š</strong>éœ€è¦æ”¯æŒ View Transition\n            APIï¼ˆChrome 111+, Edge 111+ï¼‰\n          </p>\n          <p>\n            <strong>Framer Motion åŠ¨ç”»ï¼š</strong>æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆChrome,\n            Firefox, Safari, Edgeï¼‰\n          </p>\n          <p>\n            <strong>è‡ªåŠ¨é™çº§ï¼š</strong>ä¸æ”¯æŒçš„æµè§ˆå™¨ä¼šè‡ªåŠ¨ä½¿ç”¨æ™®é€šä¸»é¢˜åˆ‡æ¢\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-container-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-container.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":42,"column":7,"nodeType":"MemberExpression","endLine":42,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { act } from '@testing-library/react';\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { fireEvent, render, screen } from '@/test/utils';\nimport { ContactFormContainer } from '@/components/forms/contact-form-container';\n\n// Mock next-intl with comprehensive translations\nconst mockT = vi.fn((key: string) => {\n  const translations: Record<string, string> = {\n    // Form fields\n    firstName: 'First Name',\n    lastName: 'Last Name',\n    email: 'Email',\n    company: 'Company',\n    phone: 'Phone',\n    subject: 'Subject',\n    message: 'Message',\n\n    // Placeholders\n    firstNamePlaceholder: 'Enter your first name',\n    lastNamePlaceholder: 'Enter your last name',\n    emailPlaceholder: 'Enter your email',\n    companyPlaceholder: 'Enter your company',\n    phonePlaceholder: 'Enter your phone (optional)',\n    subjectPlaceholder: 'Enter subject (optional)',\n    messagePlaceholder: 'Enter your message',\n\n    // Actions\n    submit: 'Submit',\n    submitting: 'Submitting...',\n\n    // Status messages\n    submitSuccess: 'Form submitted successfully!',\n    submitError: 'Failed to submit form. Please try again.',\n    rateLimitMessage: 'Please wait before submitting again.',\n\n    // Checkboxes\n    acceptPrivacy: 'I accept the privacy policy',\n    marketingConsent: 'I agree to receive marketing communications',\n  };\n   \n  return Object.prototype.hasOwnProperty.call(translations, key)\n    ? translations[key]\n    : key; // key æ¥è‡ªæµ‹è¯•æ•°æ®ï¼Œå®‰å…¨\n});\n\nvi.mock('next-intl', () => ({\n  useTranslations: () => mockT,\n}));\n\n// Mock Turnstile component\nvi.mock('@marsidev/react-turnstile', () => ({\n  Turnstile: ({\n    onSuccess,\n    onError,\n    onExpire,\n  }: {\n    onSuccess?: (_token: string) => void;\n    onError?: (_error: string) => void;\n    onExpire?: () => void;\n  }) => (\n    <div data-testid='turnstile-mock'>\n      <button\n        type='button'\n        data-testid='turnstile-success'\n        onClick={() => onSuccess?.('mock-token')}\n      >\n        Success\n      </button>\n      <button\n        type='button'\n        data-testid='turnstile-error'\n        onClick={() => onError?.('test error')}\n      >\n        Error\n      </button>\n      <button\n        type='button'\n        data-testid='turnstile-expire'\n        onClick={() => onExpire?.()}\n      >\n        Expire\n      </button>\n    </div>\n  ),\n}));\n\n// Mock fetch\nglobal.fetch = vi.fn();\n\n// Mock logger\nvi.mock('@/lib/logger', () => ({\n  logger: {\n    info: vi.fn(),\n    error: vi.fn(),\n  },\n}));\n\n// Mock navigator.userAgent\nObject.defineProperty(navigator, 'userAgent', {\n  value: 'test-user-agent',\n  writable: true,\n});\n\n// é€šç”¨è¡¨å•å¡«å†™å‡½æ•°\nconst validFormData = {\n  firstName: 'John',\n  lastName: 'Doe',\n  email: 'john.doe@example.com',\n  company: 'Test Company',\n  phone: '+1234567890',\n  subject: 'Test Subject',\n  message: 'Test message content that is long enough to pass validation',\n};\n\nconst fillValidForm = async () => {\n  await act(async () => {\n    fireEvent.change(screen.getByLabelText(/first name/i), {\n      target: { value: validFormData.firstName },\n    });\n    fireEvent.change(screen.getByLabelText(/last name/i), {\n      target: { value: validFormData.lastName },\n    });\n    fireEvent.change(screen.getByLabelText(/email/i), {\n      target: { value: validFormData.email },\n    });\n    fireEvent.change(screen.getByLabelText(/company/i), {\n      target: { value: validFormData.company },\n    });\n    fireEvent.change(screen.getByLabelText(/phone/i), {\n      target: { value: validFormData.phone },\n    });\n    fireEvent.change(screen.getByLabelText(/subject/i), {\n      target: { value: validFormData.subject },\n    });\n    fireEvent.change(screen.getByLabelText(/message/i), {\n      target: { value: validFormData.message },\n    });\n\n    // å‹¾é€‰éšç§æ”¿ç­–\n    const privacyCheckbox = screen.getByLabelText(/accept.*privacy/i);\n    fireEvent.click(privacyCheckbox);\n\n    // å¯ç”¨ Turnstile\n    fireEvent.click(screen.getByTestId('turnstile-success'));\n  });\n};\n\ndescribe('ContactFormContainer - å‰©ä½™é«˜çº§æµ‹è¯•', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    vi.useFakeTimers();\n  });\n\n  afterEach(() => {\n    vi.useRealTimers();\n  });\n\n  // æ³¨æ„ï¼š\n  // - åŸºç¡€æ¸²æŸ“æµ‹è¯•å·²ç§»è‡³ contact-form-container-core.test.tsx\n  // - éªŒè¯é€»è¾‘æµ‹è¯•å·²ç§»è‡³ contact-form-validation.test.tsx\n  // - æäº¤å’Œé”™è¯¯å¤„ç†æµ‹è¯•å·²ç§»è‡³ contact-form-submission.test.tsx\n\n  describe('çŠ¶æ€æ¶ˆæ¯ç»„ä»¶', () => {\n    it('idle çŠ¶æ€ä¸åº”è¯¥æ˜¾ç¤ºæ¶ˆæ¯', () => {\n      render(<ContactFormContainer />);\n\n      // ä¸åº”è¯¥æœ‰çŠ¶æ€æ¶ˆæ¯\n      expect(screen.queryByRole('alert')).not.toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æ˜¾ç¤ºæ­£ç¡®çš„çŠ¶æ€æ¶ˆæ¯æ ·å¼', async () => {\n      // Mock æˆåŠŸå“åº”\n      vi.mocked(fetch).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({\n          success: true,\n          message: 'Message sent successfully',\n        }),\n      } as Response);\n\n      render(<ContactFormContainer />);\n      await fillValidForm();\n\n      const submitButton = screen.getByRole('button', { name: /submit/i });\n\n      await act(async () => {\n        fireEvent.click(submitButton);\n      });\n\n      // æ¨è¿›æ—¶é—´è®©æäº¤å®Œæˆ\n      await act(async () => {\n        vi.advanceTimersByTime(1000);\n      });\n\n      // æ£€æŸ¥æˆåŠŸæ¶ˆæ¯\n      expect(\n        screen.getByText(/message sent successfully/i),\n      ).toBeInTheDocument();\n\n      // æ£€æŸ¥æ¶ˆæ¯æ ·å¼\n      const alertElement = screen.getByRole('alert');\n      expect(alertElement).toHaveClass('text-green-600');\n    });\n\n    it('åº”è¯¥æ˜¾ç¤ºé”™è¯¯çŠ¶æ€æ¶ˆæ¯æ ·å¼', async () => {\n      // Mock é”™è¯¯å“åº”\n      vi.mocked(fetch).mockResolvedValueOnce({\n        ok: false,\n        status: 500,\n        json: async () => ({ success: false, error: 'Server error' }),\n      } as Response);\n\n      render(<ContactFormContainer />);\n      await fillValidForm();\n\n      const submitButton = screen.getByRole('button', { name: /submit/i });\n\n      await act(async () => {\n        fireEvent.click(submitButton);\n      });\n\n      // æ¨è¿›æ—¶é—´è®©æäº¤å®Œæˆ\n      await act(async () => {\n        vi.advanceTimersByTime(1000);\n      });\n\n      // æ£€æŸ¥é”™è¯¯æ¶ˆæ¯\n      expect(screen.getByText(/server error/i)).toBeInTheDocument();\n\n      // æ£€æŸ¥é”™è¯¯æ¶ˆæ¯æ ·å¼\n      const alertElement = screen.getByRole('alert');\n      expect(alertElement).toHaveClass('text-red-600');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-fields-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-fields.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-submission.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":67,"column":10,"nodeType":"MemberExpression","endLine":67,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/__tests__/contact-form-validation.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":64,"column":10,"nodeType":"MemberExpression","endLine":64,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/contact-form-container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/contact-form-fields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/contact-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/fields/additional-fields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/fields/checkbox-fields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/fields/contact-fields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/forms/fields/name-fields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/call-to-action-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/call-to-action-interaction.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/call-to-action.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/hero-section.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":95,"column":12,"nodeType":"MemberExpression","endLine":95,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/project-overview.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":182,"column":12,"nodeType":"MemberExpression","endLine":182,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/__tests__/tech-stack-section.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'variant' is defined but never used. Allowed unused args must match /^_/u.","line":90,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'size' is defined but never used. Allowed unused args must match /^_/u.","line":91,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'disabled' is defined but never used. Allowed unused args must match /^_/u.","line":94,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { fireEvent, render, screen } from '@testing-library/react';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\n// å¯¼å…¥è¦æµ‹è¯•çš„ç»„ä»¶\nimport { TechStackSection } from '@/components/home/tech-stack-section';\n\n// Mocké…ç½® - ä½¿ç”¨vi.hoistedç¡®ä¿Mockåœ¨æ¨¡å—å¯¼å…¥å‰è®¾ç½®\nconst {\n  mockUseTranslations,\n  mockUseIntersectionObserver,\n  mockUseState,\n  mockUseMemo,\n} = vi.hoisted(() => ({\n  mockUseTranslations: vi.fn(),\n  mockUseIntersectionObserver: vi.fn(),\n  mockUseState: vi.fn(),\n  mockUseMemo: vi.fn(),\n}));\n\n// Mock next-intl\nvi.mock('next-intl', () => ({\n  useTranslations: mockUseTranslations,\n}));\n\n// Mock intersection observer hook\nvi.mock('@/hooks/use-intersection-observer', () => ({\n  useIntersectionObserver: mockUseIntersectionObserver,\n}));\n\n// Mock React hooks\nvi.mock('react', async () => {\n  const actual = await vi.importActual('react');\n  return {\n    ...actual,\n    useState: mockUseState,\n    useMemo: mockUseMemo,\n  };\n});\n\n// Mock Lucide React icons\nvi.mock('lucide-react', () => ({\n  ExternalLink: () => <div data-testid='external-link-icon'>ExternalLink</div>,\n}));\n\n// Mock tech stack data\nvi.mock('@/lib/tech-stack-data', () => ({\n  techStackCategories: {\n    core: 'Core Technologies',\n    frontend: 'Frontend',\n    backend: 'Backend',\n    tools: 'Development Tools',\n  },\n  techStackData: [\n    {\n      id: 'nextjs',\n      name: 'Next.js',\n      category: 'core',\n      description: 'React framework',\n      url: 'https://nextjs.org',\n      icon: 'nextjs',\n    },\n    {\n      id: 'react',\n      name: 'React',\n      category: 'frontend',\n      description: 'UI library',\n      url: 'https://react.dev',\n      icon: 'react',\n    },\n  ],\n}));\n\n// Mock UI components\nvi.mock('@/components/ui/badge', () => ({\n  Badge: ({ children, className, ...props }: React.ComponentProps<'div'>) => (\n    <span\n      data-testid='badge'\n      className={className}\n      {...props}\n    >\n      {children}\n    </span>\n  ),\n}));\n\nvi.mock('@/components/ui/button', () => ({\n  Button: ({\n    children,\n    asChild,\n    variant,\n    size,\n    className,\n    onClick,\n    disabled,\n    ...props\n  }: {\n    children?: React.ReactNode;\n    asChild?: boolean;\n    variant?: string;\n    size?: string;\n    className?: string;\n    onClick?: () => void;\n    disabled?: boolean;\n    [key: string]: unknown;\n  }) => {\n    if (asChild) {\n      return (\n        <div\n          data-testid='button-as-child'\n          className={className}\n          {...props}\n        >\n          {children}\n        </div>\n      );\n    }\n    return (\n      <button\n        data-testid='button'\n        className={className}\n        onClick={onClick}\n        {...props}\n      >\n        {children}\n      </button>\n    );\n  },\n}));\n\nvi.mock('@/components/ui/card', () => ({\n  Card: ({ children, className, ...props }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='card'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardContent: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='card-content'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardDescription: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='card-description'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardHeader: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='card-header'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardTitle: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='card-title'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n}));\n\nvi.mock('@/components/ui/tabs', () => ({\n  Tabs: ({\n    children,\n    value,\n    onValueChange,\n    className,\n    ...props\n  }: {\n    children?: React.ReactNode;\n    value?: string;\n    onValueChange?: (value: string) => void;\n    className?: string;\n    [key: string]: any;\n  }) => (\n    <div\n      data-testid='tabs'\n      data-value={value}\n      className={className}\n      {...props}\n      onClick={() => onValueChange && onValueChange('frontend')}\n    >\n      {children}\n    </div>\n  ),\n  TabsContent: ({\n    children,\n    value,\n    className,\n    ...props\n  }: {\n    children?: React.ReactNode;\n    value?: string;\n    className?: string;\n    [key: string]: any;\n  }) => (\n    <div\n      data-testid='tabs-content'\n      data-value={value}\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  TabsList: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='tabs-list'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  TabsTrigger: ({\n    children,\n    value,\n    className,\n    ...props\n  }: {\n    children?: React.ReactNode;\n    value?: string;\n    className?: string;\n    [key: string]: any;\n  }) => (\n    <button\n      data-testid='tabs-trigger'\n      data-value={value}\n      className={className}\n      {...props}\n    >\n      {children}\n    </button>\n  ),\n}));\n\ndescribe('TechStackSection', () => {\n  // é»˜è®¤Mockè¿”å›å€¼\n  const defaultTranslations = {\n    'title': 'Tech Stack',\n    'subtitle': 'Modern technologies we use',\n    'stats.totalTech': 'Total Technologies',\n    'stats.categories': 'Categories',\n    'stats.modern': 'Modern',\n    'stats.quality': 'Quality',\n    'learnMore': 'Learn More',\n    'categories.core': 'Core',\n    'categories.frontend': 'Frontend',\n    'categories.backend': 'Backend',\n    'categories.tools': 'Tools',\n  };\n\n  const defaultIntersectionObserver = {\n    ref: vi.fn(),\n    isVisible: true,\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // è®¾ç½®é»˜è®¤Mockè¿”å›å€¼ - ä¿®å¤ï¼šuseTranslationsåº”è¯¥è¿”å›ä¸€ä¸ªå‡½æ•°\n    const mockTranslationFunction = vi.fn((key: string) => {\n      return (\n        defaultTranslations[key as keyof typeof defaultTranslations] || key\n      );\n    });\n    mockUseTranslations.mockReturnValue(mockTranslationFunction);\n    mockUseIntersectionObserver.mockReturnValue(defaultIntersectionObserver);\n    mockUseState.mockImplementation((initial) => [initial, vi.fn()]);\n    mockUseMemo.mockImplementation((fn) => fn());\n  });\n\n  describe('åŸºç¡€æ¸²æŸ“æµ‹è¯•', () => {\n    it('åº”è¯¥æ­£ç¡®æ¸²æŸ“ç»„ä»¶çš„åŸºæœ¬ç»“æ„', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯ä¸»è¦ç»“æ„å…ƒç´  - ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„é€‰æ‹©å™¨\n      expect(\n        screen.getByRole('heading', { name: 'Tech Stack' }),\n      ).toBeInTheDocument();\n      expect(screen.getByText('Tech Stack')).toBeInTheDocument();\n      expect(\n        screen.getByText('Modern technologies we use'),\n      ).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æ¸²æŸ“ç»Ÿè®¡ä¿¡æ¯', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯ç»Ÿè®¡æ•°æ®\n      expect(screen.getByText('2')).toBeInTheDocument(); // techStackData.length\n      expect(screen.getByText('4')).toBeInTheDocument(); // categories count\n      expect(screen.getByText('100%')).toBeInTheDocument();\n      expect(screen.getByText('A+')).toBeInTheDocument();\n\n      // éªŒè¯ç»Ÿè®¡æ ‡ç­¾\n      expect(screen.getByText('Total Technologies')).toBeInTheDocument();\n      expect(screen.getByText('Categories')).toBeInTheDocument();\n      expect(screen.getByText('Modern')).toBeInTheDocument();\n      expect(screen.getByText('Quality')).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æ¸²æŸ“æŠ€æœ¯æ ˆæ ‡ç­¾é¡µ', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯æ ‡ç­¾é¡µç»„ä»¶å­˜åœ¨\n      expect(screen.getByTestId('tabs')).toBeInTheDocument();\n      expect(screen.getByTestId('tabs-list')).toBeInTheDocument();\n    });\n  });\n\n  describe('äº¤äº’åŠŸèƒ½æµ‹è¯•', () => {\n    it('åº”è¯¥å¤„ç†æ ‡ç­¾é¡µåˆ‡æ¢', () => {\n      const mockSetState = vi.fn();\n      mockUseState.mockReturnValue(['core', mockSetState]);\n\n      render(<TechStackSection />);\n\n      const tabs = screen.getByTestId('tabs');\n      fireEvent.click(tabs);\n\n      // éªŒè¯çŠ¶æ€æ›´æ–°è¢«è°ƒç”¨\n      expect(mockSetState).toHaveBeenCalled();\n    });\n  });\n\n  describe('åŠ¨ç”»å’Œå¯è§æ€§æµ‹è¯•', () => {\n    it('åº”è¯¥å¤„ç†å…ƒç´ å¯è§æ—¶çš„åŠ¨ç”»', () => {\n      mockUseIntersectionObserver.mockReturnValue({\n        ref: vi.fn(),\n        isVisible: true,\n      });\n\n      render(<TechStackSection />);\n\n      // éªŒè¯å¯è§çŠ¶æ€ä¸‹çš„CSSç±»\n      const titleElement = screen.getByText('Tech Stack').closest('div');\n      expect(titleElement).toHaveClass('translate-y-0', 'opacity-100');\n    });\n\n    it('åº”è¯¥å¤„ç†å…ƒç´ ä¸å¯è§æ—¶çš„åŠ¨ç”»', () => {\n      mockUseIntersectionObserver.mockReturnValue({\n        ref: vi.fn(),\n        isVisible: false,\n      });\n\n      render(<TechStackSection />);\n\n      // éªŒè¯ä¸å¯è§çŠ¶æ€ä¸‹çš„CSSç±»\n      const titleElement = screen.getByText('Tech Stack').closest('div');\n      expect(titleElement).toHaveClass('translate-y-8', 'opacity-0');\n    });\n  });\n\n  describe('æ•°æ®å¤„ç†æµ‹è¯•', () => {\n    it('åº”è¯¥æ­£ç¡®å¤„ç†æŠ€æœ¯æ ˆæ•°æ®åˆ†ç±»', () => {\n      const mockCategorizedData = {\n        core: [{ id: 'nextjs', name: 'Next.js', category: 'core' }],\n        frontend: [{ id: 'react', name: 'React', category: 'frontend' }],\n        backend: [],\n        tools: [],\n      };\n\n      mockUseMemo.mockReturnValue(mockCategorizedData);\n\n      render(<TechStackSection />);\n\n      // éªŒè¯useMemoè¢«è°ƒç”¨\n      expect(mockUseMemo).toHaveBeenCalled();\n    });\n  });\n\n  describe('å›½é™…åŒ–æµ‹è¯•', () => {\n    it('åº”è¯¥æ­£ç¡®ä½¿ç”¨ç¿»è¯‘é”®', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯useTranslationsè¢«æ­£ç¡®è°ƒç”¨\n      expect(mockUseTranslations).toHaveBeenCalledWith('home.techStack');\n    });\n\n    it('åº”è¯¥å¤„ç†ç¼ºå¤±çš„ç¿»è¯‘é”®', () => {\n      // Mock useTranslationsè¿”å›ç¼ºå¤±é”®çš„æƒ…å†µ\n      const mockTranslationFunction = vi.fn((key: string) => `missing.${key}`);\n      mockUseTranslations.mockReturnValue(mockTranslationFunction);\n\n      render(<TechStackSection />);\n\n      // éªŒè¯ç¼ºå¤±ç¿»è¯‘çš„å¤„ç†\n      expect(screen.getByText('missing.title')).toBeInTheDocument();\n    });\n  });\n\n  describe('å­ç»„ä»¶æµ‹è¯•', () => {\n    it('åº”è¯¥æ¸²æŸ“TechStackStatsç»„ä»¶', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯ç»Ÿè®¡ç»„ä»¶çš„å­˜åœ¨\n      expect(screen.getByText('Total Technologies')).toBeInTheDocument();\n      expect(screen.getByText('Categories')).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æ¸²æŸ“TechStackTitleç»„ä»¶', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯æ ‡é¢˜ç»„ä»¶\n      expect(screen.getByRole('heading', { level: 2 })).toBeInTheDocument();\n      expect(screen.getByText('Tech Stack')).toBeInTheDocument();\n      expect(\n        screen.getByText('Modern technologies we use'),\n      ).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æ¸²æŸ“TechStackTabsç»„ä»¶', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯æ ‡ç­¾é¡µç»„ä»¶\n      expect(screen.getByTestId('tabs')).toBeInTheDocument();\n      expect(screen.getByTestId('tabs-list')).toBeInTheDocument();\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†æµ‹è¯•', () => {\n    it('åº”è¯¥å¤„ç†useIntersectionObserveré”™è¯¯', () => {\n      mockUseIntersectionObserver.mockImplementation(() => {\n        throw new Error('IntersectionObserver error');\n      });\n\n      expect(() => render(<TechStackSection />)).toThrow(\n        'IntersectionObserver error',\n      );\n    });\n\n    it('åº”è¯¥å¤„ç†useStateé”™è¯¯', () => {\n      mockUseState.mockImplementation(() => {\n        throw new Error('useState error');\n      });\n\n      expect(() => render(<TechStackSection />)).toThrow('useState error');\n    });\n\n    it('åº”è¯¥å¤„ç†useMemoé”™è¯¯', () => {\n      mockUseMemo.mockImplementation(() => {\n        throw new Error('useMemo error');\n      });\n\n      expect(() => render(<TechStackSection />)).toThrow('useMemo error');\n    });\n  });\n\n  describe('è¾¹ç¼˜æƒ…å†µæµ‹è¯•', () => {\n    it('åº”è¯¥å¤„ç†ç©ºçš„æŠ€æœ¯æ ˆæ•°æ®', () => {\n      // ä¿®å¤ï¼šç›´æ¥Mock useMemoè¿”å›ç©ºçš„åˆ†ç±»æ•°æ®\n      mockUseMemo.mockReturnValueOnce({});\n\n      render(<TechStackSection />);\n\n      // éªŒè¯ç©ºæ•°æ®çš„å¤„ç† - ç»„ä»¶åº”è¯¥ä»ç„¶æ¸²æŸ“åŸºæœ¬ç»“æ„\n      expect(screen.getByText('Tech Stack')).toBeInTheDocument();\n      expect(\n        screen.getByText('Modern technologies we use'),\n      ).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥å¤„ç†ä¸åŒçš„é€‰ä¸­åˆ†ç±»', () => {\n      mockUseState.mockReturnValue(['frontend', vi.fn()]);\n\n      render(<TechStackSection />);\n\n      // éªŒè¯ä¸åŒåˆ†ç±»çš„å¤„ç†\n      const tabs = screen.getByTestId('tabs');\n      expect(tabs).toHaveAttribute('data-value', 'frontend');\n    });\n\n    it('åº”è¯¥å¤„ç†å¤šä¸ªintersection observerå®ä¾‹', () => {\n      let callCount = 0;\n      mockUseIntersectionObserver.mockImplementation(() => {\n        callCount++;\n        return {\n          ref: vi.fn(),\n          isVisible: callCount % 2 === 0, // äº¤æ›¿è¿”å›true/false\n        };\n      });\n\n      render(<TechStackSection />);\n\n      // éªŒè¯å¤šæ¬¡è°ƒç”¨intersection observer\n      expect(mockUseIntersectionObserver).toHaveBeenCalledTimes(3); // title, tabs, stats\n    });\n  });\n\n  describe('æ€§èƒ½æµ‹è¯•', () => {\n    it('åº”è¯¥æ­£ç¡®ä½¿ç”¨useMemoä¼˜åŒ–æ€§èƒ½', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯useMemoè¢«è°ƒç”¨ç”¨äºæ•°æ®åˆ†ç±»\n      expect(mockUseMemo).toHaveBeenCalledWith(expect.any(Function), []);\n    });\n\n    it('åº”è¯¥æ­£ç¡®è®¾ç½®intersection observeré…ç½®', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯intersection observeré…ç½®\n      expect(mockUseIntersectionObserver).toHaveBeenCalledWith({\n        threshold: 0.3,\n        triggerOnce: true,\n      });\n    });\n  });\n\n  describe('å¯è®¿é—®æ€§æµ‹è¯•', () => {\n    it('åº”è¯¥æœ‰æ­£ç¡®çš„è¯­ä¹‰ç»“æ„', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯è¯­ä¹‰å…ƒç´  - ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„é€‰æ‹©å™¨\n      const section = document.querySelector('#tech-stack');\n      expect(section).toBeInTheDocument();\n      expect(screen.getByRole('heading', { level: 2 })).toBeInTheDocument();\n    });\n\n    it('åº”è¯¥æœ‰æ­£ç¡®çš„section id', () => {\n      render(<TechStackSection />);\n\n      // éªŒè¯section idç”¨äºé”šç‚¹å¯¼èˆª\n      const section = document.querySelector('#tech-stack');\n      expect(section).toBeInTheDocument();\n      expect(section).toHaveAttribute('id', 'tech-stack');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/call-to-action.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/component-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/cta/action-cards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/cta/community-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/cta/data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/cta/stats-display.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/hero-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/project-overview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/__tests__/badge-showcase.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":19,"column":10,"nodeType":"MemberExpression","endLine":19,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/__tests__/button-showcase.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":19,"column":10,"nodeType":"MemberExpression","endLine":19,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/__tests__/form-showcase.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":17,"column":10,"nodeType":"MemberExpression","endLine":17,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/__tests__/interactive-showcase.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":17,"column":10,"nodeType":"MemberExpression","endLine":17,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/__tests__/responsive-showcase.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":20,"column":10,"nodeType":"MemberExpression","endLine":20,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/badge-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/button-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/form-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/interactive-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/responsive-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/showcase/theme-showcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/home/tech-stack-section.tsx","messages":[{"ruleId":"max-nested-callbacks","severity":2,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":219,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":219,"endColumn":47}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { MAGIC_0_3 } from \"@/constants/decimal\";\nimport { useIntersectionObserver } from '@/hooks/use-intersection-observer';\nimport {\n  techStackCategories,\n  techStackData,\n  type TechStackCategory,\n} from '@/lib/tech-stack-data';\nimport { ExternalLink } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\nimport { useMemo, useState } from 'react';\n\nfunction TechStackStats({ t }: { t: (_key: string) => string }) {\n  const { ref, isVisible } = useIntersectionObserver<HTMLDivElement>({\n    threshold: MAGIC_0_3,\n    triggerOnce: true,\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={`bg-card mt-12 rounded-lg border p-6 transition-all duration-700 ease-out ${\n        isVisible ? 'translate-y-0 opacity-100' : 'translate-y-8 opacity-0'\n      }`}\n    >\n      <div className='grid grid-cols-2 gap-6 sm:grid-cols-4'>\n        <div className='text-center'>\n          <div className='text-primary text-2xl font-bold'>\n            {techStackData.length}\n          </div>\n          <div className='text-muted-foreground text-sm'>\n            {t('stats.totalTech')}\n          </div>\n        </div>\n        <div className='text-center'>\n          <div className='text-primary text-2xl font-bold'>\n            {Object.keys(techStackCategories).length}\n          </div>\n          <div className='text-muted-foreground text-sm'>\n            {t('stats.categories')}\n          </div>\n        </div>\n        <div className='text-center'>\n          <div className='text-primary text-2xl font-bold'>100%</div>\n          <div className='text-muted-foreground text-sm'>\n            {t('stats.modern')}\n          </div>\n        </div>\n        <div className='text-center'>\n          <div className='text-primary text-2xl font-bold'>A+</div>\n          <div className='text-muted-foreground text-sm'>\n            {t('stats.quality')}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Tech Stack Title Component\nfunction TechStackTitle({\n  titleRef,\n  titleVisible,\n  title,\n  subtitle,\n}: {\n  titleRef: (_node: HTMLDivElement | null) => void;\n  titleVisible: boolean;\n  title: string;\n  subtitle: string;\n}) {\n  return (\n    <div\n      ref={titleRef}\n      className={`mb-12 text-center transition-all duration-700 ease-out ${\n        titleVisible ? 'translate-y-0 opacity-100' : 'translate-y-8 opacity-0'\n      }`}\n    >\n      <h2 className='mb-4 text-3xl font-bold tracking-tight sm:text-4xl'>\n        {title}\n      </h2>\n      <p className='text-muted-foreground mx-auto max-w-2xl text-lg'>\n        {subtitle}\n      </p>\n    </div>\n  );\n}\n\n// Tech Stack Tabs Component\nfunction TechStackTabs({\n  selectedCategory,\n  setSelectedCategory,\n  tabsRef,\n  tabsVisible,\n  categorizedTech,\n  t,\n}: {\n  selectedCategory: TechStackCategory;\n  setSelectedCategory: (_category: TechStackCategory) => void;\n  tabsRef: (_node: HTMLDivElement | null) => void;\n  tabsVisible: boolean;\n  categorizedTech: Record<TechStackCategory, typeof techStackData>;\n  t: (_key: string) => string;\n}) {\n  return (\n    <Tabs\n      value={selectedCategory}\n      onValueChange={(value) => setSelectedCategory(value as TechStackCategory)}\n      className='w-full'\n    >\n      <div\n        ref={tabsRef}\n        className={`transition-all delay-200 duration-700 ease-out ${\n          tabsVisible ? 'translate-y-0 opacity-100' : 'translate-y-8 opacity-0'\n        }`}\n      >\n        <TabsList className='mb-8 grid w-full grid-cols-3 gap-1 sm:grid-cols-5 lg:grid-cols-7'>\n          {Object.entries(techStackCategories).map(([key, label]) => (\n            <TabsTrigger\n              key={key}\n              value={key}\n              className='text-xs sm:text-sm'\n            >\n              {label}\n            </TabsTrigger>\n          ))}\n        </TabsList>\n\n        {/* æŠ€æœ¯æ ˆå†…å®¹ */}\n        {Object.entries(categorizedTech).map(([_category, items], index) => (\n          <TabsContent\n            key={`category-${index}`}\n            value={_category}\n            className='mt-0'\n          >\n            <div className='grid gap-4 sm:grid-cols-2 lg:grid-cols-3'>\n              {items.map((tech, techIndex) => (\n                <Card\n                  key={`tech-${techIndex}`}\n                  className='group hover:shadow-primary/5 transition-all duration-200 hover:shadow-lg'\n                >\n                  <CardHeader className='pb-3'>\n                    <div className='flex items-center justify-between'>\n                      <CardTitle className='text-lg'>{tech.name}</CardTitle>\n                      <Badge\n                        variant='secondary'\n                        className='text-xs'\n                      >\n                        v{tech.version}\n                      </Badge>\n                    </div>\n                    <CardDescription className='text-sm'>\n                      {tech.description}\n                    </CardDescription>\n                  </CardHeader>\n                  {tech.url && (\n                    <CardContent className='pt-0'>\n                      <Button\n                        variant='ghost'\n                        size='sm'\n                        className='h-8 px-2 text-xs opacity-0 transition-opacity group-hover:opacity-100'\n                        asChild\n                      >\n                        <a\n                          href={tech.url}\n                          target='_blank'\n                          rel='noopener noreferrer'\n                          className='flex items-center gap-1'\n                        >\n                          {t('learnMore')}\n                          <ExternalLink className='h-3 w-3' />\n                        </a>\n                      </Button>\n                    </CardContent>\n                  )}\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n        ))}\n      </div>\n    </Tabs>\n  );\n}\n\nexport function TechStackSection() {\n  const t = useTranslations('home.techStack');\n  const [selectedCategory, setSelectedCategory] =\n    useState<TechStackCategory>('core');\n\n  // åŠ¨ç”»Hook\n  const { ref: titleRef, isVisible: titleVisible } =\n    useIntersectionObserver<HTMLDivElement>({\n      threshold: MAGIC_0_3,\n      triggerOnce: true,\n    });\n\n  const { ref: tabsRef, isVisible: tabsVisible } =\n    useIntersectionObserver<HTMLDivElement>({\n      threshold: MAGIC_0_3,\n      triggerOnce: true,\n    });\n\n  const categorizedTech = useMemo(() => {\n    return Object.keys(techStackCategories).reduce(\n      (acc, category) => {\n        acc[category as TechStackCategory] = techStackData.filter(\n          (item) => item.category === category,\n        );\n        return acc;\n      },\n      {} as Record<TechStackCategory, typeof techStackData>,\n    );\n  }, []);\n\n  return (\n    <section\n      id='tech-stack'\n      className='py-20'\n    >\n      <div className='container mx-auto px-4'>\n        <div className='mx-auto max-w-6xl'>\n          <TechStackTitle\n            titleRef={titleRef}\n            titleVisible={titleVisible}\n            title={t('title')}\n            subtitle={t('subtitle')}\n          />\n\n          <TechStackTabs\n            selectedCategory={selectedCategory}\n            setSelectedCategory={setSelectedCategory}\n            tabsRef={tabsRef}\n            tabsVisible={tabsVisible}\n            categorizedTech={categorizedTech}\n            t={t}\n          />\n\n          <TechStackStats t={t} />\n        </div>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-accessibility-responsive-core.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":20,"column":12,"nodeType":"MemberExpression","endLine":20,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-accessibility-responsive.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-basic.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":119,"column":25,"nodeType":"MemberExpression","endLine":119,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Enhanced Locale Switcher - Main Integration Tests\n *\n * ä¸»è¦é›†æˆæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š\n * - æ ¸å¿ƒç»„ä»¶å¯¼å‡ºéªŒè¯\n * - åŸºæœ¬åŠŸèƒ½é›†æˆæµ‹è¯•\n * - é”™è¯¯å¤„ç†éªŒè¯\n *\n * è¯¦ç»†æµ‹è¯•è¯·å‚è€ƒï¼š\n * - enhanced-locale-switcher-rendering.test.tsx - æ¸²æŸ“åŠŸèƒ½æµ‹è¯•\n * - enhanced-locale-switcher-modes.test.tsx - æ¨¡å¼å’Œç”Ÿå‘½å‘¨æœŸæµ‹è¯•\n */\n\nimport React from 'react';\nimport { usePathname } from 'next/navigation';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  EnhancedLocaleSwitcher,\n  SimpleLocaleSwitcher,\n} from '../enhanced-locale-switcher';\n\n// Mock next-intl hooks\nvi.mock('next-intl', () => ({\n  useLocale: vi.fn(),\n  usePathname: vi.fn(),\n  useTranslations: vi.fn(),\n}));\n\n// Mock next/navigation\nvi.mock('next/navigation', () => ({\n  useRouter: vi.fn(() => ({\n    push: vi.fn(),\n    replace: vi.fn(),\n  })),\n  useSearchParams: vi.fn(() => new URLSearchParams()),\n}));\n\n// Mock Lucide React icons\nvi.mock('lucide-react', () => ({\n  Check: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='check-icon'\n      {...props}\n    >\n      <path d='M20 6L9 17l-5-5' />\n    </svg>\n  ),\n  ChevronDown: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='chevron-down-icon'\n      {...props}\n    >\n      <path d='M6 9l6 6 6-6' />\n    </svg>\n  ),\n  Globe: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='globe-icon'\n      {...props}\n    >\n      <circle\n        cx='12'\n        cy='12'\n        r='10'\n      />\n    </svg>\n  ),\n}));\n\ndescribe('Enhanced Locale Switcher - Main Integration Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  const defaultMocks = {\n    locale: 'en',\n    pathname: '/',\n    translations: {\n      toggle: 'Toggle language',\n      selectLanguage: 'Select Language',\n      currentLanguage: 'Current language: {language}',\n      detectedLanguage: 'Detected language: {language}',\n      switchTo: 'Switch to {language}',\n      languages: {\n        en: 'English',\n        zh: 'ä¸­æ–‡',\n      },\n    },\n  };\n\n  beforeEach(() => {\n    user = userEvent.setup();\n    vi.clearAllMocks();\n\n    // Setup default mocks\n    (useLocale as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.locale,\n    );\n    (usePathname as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.pathname,\n    );\n    (useTranslations as ReturnType<typeof vi.fn>).mockImplementation(\n      (namespace?: string) => {\n        if (namespace === 'LocaleSwitcher') {\n          return (key: string) => {\n            const keys = key.split('.');\n            let value: unknown = defaultMocks.translations;\n            for (const k of keys) {\n              // å®‰å…¨çš„å¯¹è±¡å±æ€§è®¿é—®ï¼Œé¿å…å¯¹è±¡æ³¨å…¥\n              if (value && typeof value === 'object' && k in value) {\n                value = (value as Record<string, unknown>)[k];\n              } else {\n                return key; // å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œè¿”å›åŸå§‹key\n              }\n            }\n            return (value as string) || key;\n          };\n        }\n        return (key: string) => key;\n      },\n    );\n  });\n\n  describe('æ ¸å¿ƒç»„ä»¶å¯¼å‡ºéªŒè¯', () => {\n    it('should export EnhancedLocaleSwitcher component', () => {\n      expect(EnhancedLocaleSwitcher).toBeDefined();\n      expect(typeof EnhancedLocaleSwitcher).toBe('function');\n    });\n\n    it('should export SimpleLocaleSwitcher component', () => {\n      expect(SimpleLocaleSwitcher).toBeDefined();\n      expect(typeof SimpleLocaleSwitcher).toBe('function');\n    });\n  });\n\n  describe('åŸºæœ¬åŠŸèƒ½é›†æˆæµ‹è¯•', () => {\n    it('renders EnhancedLocaleSwitcher with basic functionality', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n\n      // Should show globe icon\n      const globeIcon = screen.getByTestId('globe-icon');\n      expect(globeIcon).toBeInTheDocument();\n\n      // Should show current language\n      expect(screen.getByText('English')).toBeInTheDocument();\n    });\n\n    it('renders SimpleLocaleSwitcher with basic functionality', () => {\n      render(<SimpleLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n\n      // Should show current language\n      expect(screen.getByText('English')).toBeInTheDocument();\n    });\n\n    it('handles dropdown interaction correctly', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      // Should start closed\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n\n      // Should open when clicked\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      // Should show language options\n      expect(screen.getByText('English')).toBeInTheDocument();\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('supports compact mode', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n\n      // Should still show globe icon in compact mode\n      const globeIcon = screen.getByTestId('globe-icon');\n      expect(globeIcon).toBeInTheDocument();\n    });\n\n    it('handles keyboard navigation', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      // Focus the button\n      await user.tab();\n      expect(button).toHaveFocus();\n\n      // Open with Enter\n      await user.keyboard('{Enter}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      // Close with Escape\n      await user.keyboard('{Escape}');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('supports custom className', () => {\n      render(<EnhancedLocaleSwitcher className='custom-switcher' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('custom-switcher');\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†éªŒè¯', () => {\n    it('handles missing translations gracefully', () => {\n      (useTranslations as ReturnType<typeof vi.fn>).mockReturnValue(\n        () => undefined,\n      );\n\n      expect(() => {\n        render(<EnhancedLocaleSwitcher />);\n      }).not.toThrow();\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n    });\n\n    it('handles invalid locale gracefully', () => {\n      (useLocale as ReturnType<typeof vi.fn>).mockReturnValue('invalid');\n\n      expect(() => {\n        render(<EnhancedLocaleSwitcher />);\n      }).not.toThrow();\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n    });\n\n    it('handles missing pathname gracefully', () => {\n      (usePathname as ReturnType<typeof vi.fn>).mockReturnValue(null);\n\n      expect(() => {\n        render(<EnhancedLocaleSwitcher />);\n      }).not.toThrow();\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n    });\n\n    it('handles component unmounting without errors', () => {\n      const { unmount } = render(<EnhancedLocaleSwitcher />);\n\n      expect(() => unmount()).not.toThrow();\n    });\n\n    it('handles re-renders correctly', () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByRole('button')).toBeInTheDocument();\n\n      rerender(<EnhancedLocaleSwitcher compact />);\n      expect(screen.getByRole('button')).toBeInTheDocument();\n    });\n  });\n\n  describe('å¯è®¿é—®æ€§éªŒè¯', () => {\n    it('maintains proper accessibility attributes', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-haspopup', 'true');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n    });\n\n    it('updates aria-expanded correctly', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      await user.keyboard('{Escape}');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('maintains focus management', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      await user.click(button);\n      await user.keyboard('{Escape}');\n\n      expect(button).toHaveFocus();\n    });\n  });\n\n  describe('å¤šè¯­è¨€æ”¯æŒéªŒè¯', () => {\n    it('displays correct language for different locales', () => {\n      (useLocale as ReturnType<typeof vi.fn>).mockReturnValue('zh');\n\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('handles language switching', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      // Should show both language options\n      expect(screen.getByText('English')).toBeInTheDocument();\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-language-switching-advanced.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-language-switching-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-modes.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":116,"column":25,"nodeType":"MemberExpression","endLine":116,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Enhanced Locale Switcher - Modes Tests\n *\n * ä¸“é—¨æµ‹è¯•ä¸åŒæ¨¡å¼åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - Compactæ¨¡å¼æµ‹è¯•\n * - SimpleLocaleSwitcheræµ‹è¯•\n * - æ¨¡å¼åˆ‡æ¢è¡Œä¸º\n * - ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ\n */\n\nimport React from 'react';\nimport { usePathname } from 'next/navigation';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  EnhancedLocaleSwitcher,\n  SimpleLocaleSwitcher,\n} from '../enhanced-locale-switcher';\n\n// Mock next-intl hooks\nvi.mock('next-intl', () => ({\n  useLocale: vi.fn(),\n  usePathname: vi.fn(),\n  useTranslations: vi.fn(),\n}));\n\n// Mock next/navigation\nvi.mock('next/navigation', () => ({\n  useRouter: vi.fn(() => ({\n    push: vi.fn(),\n    replace: vi.fn(),\n  })),\n  useSearchParams: vi.fn(() => new URLSearchParams()),\n}));\n\n// Mock Lucide React icons\nvi.mock('lucide-react', () => ({\n  Check: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='check-icon'\n      {...props}\n    >\n      <path d='M20 6L9 17l-5-5' />\n    </svg>\n  ),\n  ChevronDown: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='chevron-down-icon'\n      {...props}\n    >\n      <path d='M6 9l6 6 6-6' />\n    </svg>\n  ),\n  Globe: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='globe-icon'\n      {...props}\n    >\n      <circle\n        cx='12'\n        cy='12'\n        r='10'\n      />\n    </svg>\n  ),\n}));\n\ndescribe('Enhanced Locale Switcher - Modes Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  const defaultMocks = {\n    locale: 'en',\n    pathname: '/',\n    translations: {\n      toggle: 'Toggle language',\n      selectLanguage: 'Select Language',\n      currentLanguage: 'Current language: {language}',\n      detectedLanguage: 'Detected language: {language}',\n      switchTo: 'Switch to {language}',\n      languages: {\n        en: 'English',\n        zh: 'ä¸­æ–‡',\n      },\n    },\n  };\n\n  beforeEach(() => {\n    user = userEvent.setup();\n    vi.clearAllMocks();\n\n    // Setup default mocks\n    (useLocale as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.locale,\n    );\n    (usePathname as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.pathname,\n    );\n    (useTranslations as ReturnType<typeof vi.fn>).mockImplementation(\n      (namespace?: string) => {\n        if (namespace === 'LocaleSwitcher') {\n          return (key: string) => {\n            const keys = key.split('.');\n            let value: unknown = defaultMocks.translations;\n            for (const k of keys) {\n              // å®‰å…¨çš„å¯¹è±¡å±æ€§è®¿é—®ï¼Œé¿å…å¯¹è±¡æ³¨å…¥\n              if (value && typeof value === 'object' && k in value) {\n                value = (value as Record<string, unknown>)[k];\n              } else {\n                return key; // å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œè¿”å›åŸå§‹key\n              }\n            }\n            return (value as string) || key;\n          };\n        }\n        return (key: string) => key;\n      },\n    );\n  });\n\n  describe('Compactæ¨¡å¼æµ‹è¯•', () => {\n    it('renders in compact mode correctly', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n\n      // Should still show globe icon\n      const globeIcon = screen.getByTestId('globe-icon');\n      expect(globeIcon).toBeInTheDocument();\n    });\n\n    it('hides language text in compact mode', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      // Language text should not be visible in compact mode\n      const button = screen.getByRole('button');\n      const buttonText = button.textContent;\n      expect(buttonText).not.toContain('English');\n    });\n\n    it('maintains accessibility in compact mode', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n      expect(button).toHaveAttribute('aria-haspopup', 'true');\n    });\n\n    it('shows full dropdown content in compact mode', async () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      // Should show all language options\n      expect(screen.getByText('English')).toBeInTheDocument();\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('applies compact-specific styling', () => {\n      render(\n        <EnhancedLocaleSwitcher\n          compact\n          className='compact-custom'\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('compact-custom');\n    });\n\n    it('handles interactions in compact mode', async () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n\n      // Should open dropdown\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      // Should close with Escape\n      await user.keyboard('{Escape}');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('supports responsive behavior in compact mode', () => {\n      render(\n        <EnhancedLocaleSwitcher\n          compact\n          className='md:px-4 lg:px-6'\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('md:px-4', 'lg:px-6');\n    });\n\n    it('maintains focus management in compact mode', async () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n\n      await user.tab();\n      expect(button).toHaveFocus();\n\n      await user.keyboard('{Enter}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      await user.keyboard('{Escape}');\n      expect(button).toHaveFocus();\n    });\n\n    it('handles keyboard navigation in compact mode', async () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const button = screen.getByRole('button');\n      button.focus();\n\n      await user.keyboard('{Space}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      await user.keyboard('{Escape}');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n  });\n\n  describe('SimpleLocaleSwitcheræµ‹è¯•', () => {\n    it('renders SimpleLocaleSwitcher correctly', () => {\n      render(<SimpleLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n    });\n\n    it('shows current language in SimpleLocaleSwitcher', () => {\n      render(<SimpleLocaleSwitcher />);\n\n      expect(screen.getByText('English')).toBeInTheDocument();\n    });\n\n    it('opens dropdown in SimpleLocaleSwitcher', async () => {\n      render(<SimpleLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('supports custom props in SimpleLocaleSwitcher', () => {\n      render(<SimpleLocaleSwitcher className='simple-custom' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('simple-custom');\n    });\n\n    it('handles keyboard navigation in SimpleLocaleSwitcher', async () => {\n      render(<SimpleLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      await user.tab();\n      expect(button).toHaveFocus();\n\n      await user.keyboard('{Space}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n    });\n\n    it('maintains accessibility in SimpleLocaleSwitcher', () => {\n      render(<SimpleLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-haspopup', 'true');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('handles different locales in SimpleLocaleSwitcher', () => {\n      (useLocale as ReturnType<typeof vi.fn>).mockReturnValue('zh');\n\n      render(<SimpleLocaleSwitcher />);\n\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('supports responsive design in SimpleLocaleSwitcher', () => {\n      render(<SimpleLocaleSwitcher className='sm:text-sm md:text-base' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('sm:text-sm', 'md:text-base');\n    });\n  });\n\n  describe('æ¨¡å¼åˆ‡æ¢è¡Œä¸º', () => {\n    it('switches between normal and compact modes', () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      // Normal mode should show language text\n      expect(screen.getByText('English')).toBeInTheDocument();\n\n      // Switch to compact mode\n      rerender(<EnhancedLocaleSwitcher compact />);\n\n      // Compact mode should hide language text\n      const button = screen.getByRole('button');\n      const buttonText = button.textContent;\n      expect(buttonText).not.toContain('English');\n    });\n\n    it('maintains state consistency across mode changes', async () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      // Mode change should reset state\n      rerender(<EnhancedLocaleSwitcher compact />);\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('preserves accessibility across mode changes', () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      let button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n\n      rerender(<EnhancedLocaleSwitcher compact />);\n\n      button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n    });\n  });\n\n  describe('ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ', () => {\n    it('handles component mounting and unmounting', () => {\n      const { unmount } = render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByRole('button')).toBeInTheDocument();\n\n      expect(() => unmount()).not.toThrow();\n    });\n\n    it('handles re-renders correctly', () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByRole('button')).toBeInTheDocument();\n\n      rerender(<EnhancedLocaleSwitcher compact />);\n      expect(screen.getByRole('button')).toBeInTheDocument();\n    });\n\n    it('maintains state across re-renders', async () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      rerender(<EnhancedLocaleSwitcher className='updated' />);\n      // State should be reset after re-render\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('handles prop changes gracefully', () => {\n      const { rerender } = render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByRole('button')).toBeInTheDocument();\n\n      rerender(\n        <EnhancedLocaleSwitcher\n          compact\n          className='new-class'\n        />,\n      );\n      expect(screen.getByRole('button')).toHaveClass('new-class');\n    });\n\n    it('cleans up event listeners on unmount', () => {\n      const { unmount } = render(<EnhancedLocaleSwitcher />);\n\n      // Component should clean up without errors\n      expect(() => unmount()).not.toThrow();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher-rendering.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":113,"column":25,"nodeType":"MemberExpression","endLine":113,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Enhanced Locale Switcher - Rendering Tests\n *\n * ä¸“é—¨æµ‹è¯•åŸºæœ¬æ¸²æŸ“åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - åŸºæœ¬ç»„ä»¶æ¸²æŸ“\n * - æ ·å¼å’Œç±»ååº”ç”¨\n * - å¯è®¿é—®æ€§å±æ€§\n * - å›¾æ ‡å’Œæ–‡æœ¬æ˜¾ç¤º\n */\n\nimport React from 'react';\nimport { usePathname } from 'next/navigation';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport { EnhancedLocaleSwitcher } from '@/components/i18n/enhanced-locale-switcher';\n\n// Mock next-intl hooks\nvi.mock('next-intl', () => ({\n  useLocale: vi.fn(),\n  usePathname: vi.fn(),\n  useTranslations: vi.fn(),\n}));\n\n// Mock next/navigation\nvi.mock('next/navigation', () => ({\n  useRouter: vi.fn(() => ({\n    push: vi.fn(),\n    replace: vi.fn(),\n  })),\n  useSearchParams: vi.fn(() => new URLSearchParams()),\n}));\n\n// Mock Lucide React icons\nvi.mock('lucide-react', () => ({\n  Check: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='check-icon'\n      {...props}\n    >\n      <path d='M20 6L9 17l-5-5' />\n    </svg>\n  ),\n  ChevronDown: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='chevron-down-icon'\n      {...props}\n    >\n      <path d='M6 9l6 6 6-6' />\n    </svg>\n  ),\n  Globe: ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      className={className}\n      data-testid='globe-icon'\n      {...props}\n    >\n      <circle\n        cx='12'\n        cy='12'\n        r='10'\n      />\n    </svg>\n  ),\n}));\n\ndescribe('Enhanced Locale Switcher - Rendering Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  const defaultMocks = {\n    locale: 'en',\n    pathname: '/',\n    translations: {\n      toggle: 'Toggle language',\n      selectLanguage: 'Select Language',\n      currentLanguage: 'Current language: {language}',\n      detectedLanguage: 'Detected language: {language}',\n      switchTo: 'Switch to {language}',\n      languages: {\n        en: 'English',\n        zh: 'ä¸­æ–‡',\n      },\n    },\n  };\n\n  beforeEach(() => {\n    user = userEvent.setup();\n    vi.clearAllMocks();\n\n    // Setup default mocks\n    (useLocale as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.locale,\n    );\n    (usePathname as ReturnType<typeof vi.fn>).mockReturnValue(\n      defaultMocks.pathname,\n    );\n    (useTranslations as ReturnType<typeof vi.fn>).mockImplementation(\n      (namespace?: string) => {\n        if (namespace === 'LocaleSwitcher') {\n          return (key: string) => {\n            const keys = key.split('.');\n            let value: unknown = defaultMocks.translations;\n            for (const k of keys) {\n              // å®‰å…¨çš„å¯¹è±¡å±æ€§è®¿é—®ï¼Œé¿å…å¯¹è±¡æ³¨å…¥\n              if (value && typeof value === 'object' && k in value) {\n                value = (value as Record<string, unknown>)[k];\n              } else {\n                return key; // å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œè¿”å›åŸå§‹key\n              }\n            }\n            return (value as string) || key;\n          };\n        }\n        return (key: string) => key;\n      },\n    );\n  });\n\n  describe('åŸºæœ¬ç»„ä»¶æ¸²æŸ“', () => {\n    it('renders enhanced locale switcher with default props', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n    });\n\n    it('renders globe icon in button', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const globeIcon = screen.getByTestId('globe-icon');\n      expect(globeIcon).toBeInTheDocument();\n    });\n\n    it('renders current language text', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('English')).toBeInTheDocument();\n    });\n\n    it('renders chevron down icon', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const chevronIcon = screen.getByTestId('chevron-down-icon');\n      expect(chevronIcon).toBeInTheDocument();\n    });\n\n    it('renders with different locales', () => {\n      (useLocale as ReturnType<typeof vi.fn>).mockReturnValue('zh');\n\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('handles missing translation gracefully', () => {\n      (useTranslations as ReturnType<typeof vi.fn>).mockReturnValue(\n        () => undefined,\n      );\n\n      expect(() => {\n        render(<EnhancedLocaleSwitcher />);\n      }).not.toThrow();\n    });\n  });\n\n  describe('æ ·å¼å’Œç±»ååº”ç”¨', () => {\n    it('applies default styling classes', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass(\n        'inline-flex',\n        'items-center',\n        'gap-2',\n        'text-sm',\n        'font-medium',\n      );\n    });\n\n    it('supports custom className', () => {\n      render(<EnhancedLocaleSwitcher className='custom-switcher' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('custom-switcher');\n    });\n\n    it('combines custom className with default classes', () => {\n      render(<EnhancedLocaleSwitcher className='custom-class' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('custom-class');\n      expect(button).toHaveClass('inline-flex');\n    });\n\n    it('applies responsive classes correctly', () => {\n      render(<EnhancedLocaleSwitcher className='md:px-4 lg:px-6' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('md:px-4', 'lg:px-6');\n    });\n\n    it('handles empty className gracefully', () => {\n      render(<EnhancedLocaleSwitcher className='' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n    });\n  });\n\n  describe('å¯è®¿é—®æ€§å±æ€§', () => {\n    it('renders with correct accessibility attributes', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-haspopup', 'true');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('updates aria-expanded when opened', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n    });\n\n    it('maintains aria-label attribute', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Toggle language');\n    });\n\n    it('provides proper button role', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('type', 'button');\n    });\n\n    it('supports keyboard navigation', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n\n      // Focus the button\n      await user.tab();\n      expect(button).toHaveFocus();\n\n      // Open with Enter\n      await user.keyboard('{Enter}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n    });\n\n    it('supports space key activation', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      button.focus();\n\n      await user.keyboard('{Space}');\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n    });\n  });\n\n  describe('å›¾æ ‡å’Œæ–‡æœ¬æ˜¾ç¤º', () => {\n    it('shows language options in dropdown', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      expect(screen.getByText('English')).toBeInTheDocument();\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('displays correct icons for each state', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      // Globe icon should be present\n      const globeIcon = screen.getByTestId('globe-icon');\n      expect(globeIcon).toBeInTheDocument();\n\n      // Chevron icon should be present\n      const chevronIcon = screen.getByTestId('chevron-down-icon');\n      expect(chevronIcon).toBeInTheDocument();\n    });\n\n    it('handles icon rendering errors gracefully', () => {\n      // Mock icon component to throw error\n      vi.mocked(require('lucide-react')).Globe.mockImplementation(() => {\n        throw new Error('Icon error');\n      });\n\n      expect(() => {\n        render(<EnhancedLocaleSwitcher />);\n      }).not.toThrow();\n    });\n\n    it('maintains text content consistency', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      const buttonText = button.textContent;\n\n      expect(buttonText).toContain('English');\n    });\n  });\n\n  describe('äº¤äº’è¡Œä¸º', () => {\n    it('opens dropdown when clicked', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n    });\n\n    it('closes dropdown when clicking outside', async () => {\n      render(\n        <div>\n          <EnhancedLocaleSwitcher />\n          <div data-testid='outside'>Outside</div>\n        </div>,\n      );\n\n      const button = screen.getByRole('button');\n      const outside = screen.getByTestId('outside');\n\n      // Open dropdown\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      // Click outside\n      await user.click(outside);\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('closes dropdown with Escape key', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n      expect(button).toHaveAttribute('aria-expanded', 'true');\n\n      await user.keyboard('{Escape}');\n      expect(button).toHaveAttribute('aria-expanded', 'false');\n    });\n\n    it('maintains focus after closing dropdown', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const button = screen.getByRole('button');\n      await user.click(button);\n\n      await user.keyboard('{Escape}');\n      expect(button).toHaveFocus();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/__tests__/enhanced-locale-switcher.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'asChild' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { fireEvent, render, screen, waitFor } from '@testing-library/react';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  EnhancedLocaleSwitcher,\n  LocaleSwitcherWithInfo,\n  SimpleLocaleSwitcher,\n} from '../enhanced-locale-switcher';\n\n// Mock next-intl\nconst mockUseLocale = vi.fn();\nconst mockUseTranslations = vi.fn();\nconst mockUsePathname = vi.fn();\n\nvi.mock('next-intl', () => ({\n  useLocale: () => mockUseLocale(),\n  useTranslations: () => mockUseTranslations,\n}));\n\n// Mock i18n routing\nvi.mock('@/i18n/routing', () => ({\n  Link: vi.fn(({ children, ...props }) => <a {...props}>{children}</a>),\n  usePathname: () => mockUsePathname(),\n}));\n\n// Mock locale detection and storage\nconst mockUseClientLocaleDetection = vi.fn();\nconst mockUseLocaleStorage = vi.fn();\n\nvi.mock('@/lib/locale-detection', () => ({\n  useClientLocaleDetection: () => mockUseClientLocaleDetection(),\n}));\n\nvi.mock('@/lib/locale-storage', () => ({\n  useLocaleStorage: () => mockUseLocaleStorage(),\n}));\n\n// Mock UI components\nvi.mock('@/components/ui/badge', () => ({\n  Badge: ({\n    children,\n    className,\n    variant,\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n    variant?: string;\n  }) => <span className={`badge ${variant} ${className}`}>{children}</span>,\n}));\n\nvi.mock('@/components/ui/button', () => ({\n  Button: ({\n    children,\n    className,\n    variant,\n    size,\n    disabled,\n    asChild,\n    ...props\n  }: {\n    children?: React.ReactNode;\n    className?: string;\n    variant?: string;\n    size?: string;\n    disabled?: boolean;\n    asChild?: boolean;\n    [key: string]: any;\n  }) => (\n    <button\n      className={`button ${variant} ${size} ${className}`}\n      disabled={disabled}\n      {...props}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@/components/ui/dropdown-menu', () => ({\n  DropdownMenu: ({ children }: React.ComponentProps<'div'>) => (\n    <div data-testid='dropdown-menu'>{children}</div>\n  ),\n  DropdownMenuTrigger: ({ children }: React.ComponentProps<'div'>) => (\n    <div data-testid='dropdown-trigger'>{children}</div>\n  ),\n  DropdownMenuContent: ({\n    children,\n    className,\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='dropdown-content'\n      className={className}\n    >\n      {children}\n    </div>\n  ),\n  DropdownMenuItem: ({\n    children,\n    asChild,\n  }: {\n    children?: React.ReactNode;\n    asChild?: boolean;\n  }) => (\n    <div data-testid='dropdown-item'>\n      {asChild ? children : <span>{children}</span>}\n    </div>\n  ),\n  DropdownMenuLabel: ({ children, className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='dropdown-label'\n      className={className}\n    >\n      {children}\n    </div>\n  ),\n  DropdownMenuSeparator: () => <hr data-testid='dropdown-separator' />,\n}));\n\n// Mock lucide-react icons\nvi.mock('lucide-react', () => ({\n  Check: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='check-icon'\n      className={className}\n    />\n  ),\n  Globe: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='globe-icon'\n      className={className}\n    />\n  ),\n  Languages: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='languages-icon'\n      className={className}\n    />\n  ),\n  Loader2: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='loader-icon'\n      className={className}\n    />\n  ),\n  MapPin: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='mappin-icon'\n      className={className}\n    />\n  ),\n  Monitor: ({ className }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='monitor-icon'\n      className={className}\n    />\n  ),\n}));\n\ndescribe('EnhancedLocaleSwitcher', () => {\n  const defaultMocks = {\n    locale: 'en',\n    pathname: '/',\n    translations: {\n      toggle: 'Toggle language',\n      selectLanguage: 'Select Language',\n    },\n    localeStorage: {\n      setUserOverride: vi.fn(),\n      getStats: vi.fn(() => ({ hasOverride: false })),\n    },\n    clientDetection: {\n      detectClientLocale: vi.fn(() => ({\n        source: 'browser',\n        confidence: 0.9,\n      })),\n    },\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    mockUseLocale.mockReturnValue(defaultMocks.locale);\n    mockUsePathname.mockReturnValue(defaultMocks.pathname);\n    mockUseTranslations.mockImplementation(\n      (key: string) =>\n        defaultMocks.translations[\n          key as keyof typeof defaultMocks.translations\n        ] || key,\n    );\n    mockUseLocaleStorage.mockReturnValue(defaultMocks.localeStorage);\n    mockUseClientLocaleDetection.mockReturnValue(defaultMocks.clientDetection);\n  });\n\n  describe('Basic Rendering', () => {\n    it('renders enhanced locale switcher with default props', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByTestId('dropdown-menu')).toBeInTheDocument();\n      expect(screen.getByTestId('dropdown-trigger')).toBeInTheDocument();\n      const languageIcons = screen.getAllByTestId('languages-icon');\n      expect(languageIcons.length).toBeGreaterThan(0);\n    });\n\n    it('renders with custom className', () => {\n      render(<EnhancedLocaleSwitcher className='custom-class' />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('custom-class');\n    });\n\n    it('shows current language in non-compact mode', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const englishElements = screen.getAllByText('English');\n      expect(englishElements.length).toBeGreaterThan(0);\n      const enElements = screen.getAllByText('EN');\n      expect(enElements.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Compact Mode', () => {\n    it('renders in compact mode correctly', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const flagElements = screen.getAllByText('ğŸ‡ºğŸ‡¸');\n      expect(flagElements.length).toBeGreaterThan(0);\n      const enElements = screen.getAllByText('EN');\n      expect(enElements.length).toBeGreaterThan(0);\n      // In compact mode, English should not appear in the trigger button\n      const triggerButton = screen.getByRole('button');\n      expect(triggerButton).not.toHaveTextContent('English');\n    });\n\n    it('shows flag and code in compact mode', () => {\n      mockUseLocale.mockReturnValue('zh');\n      render(<EnhancedLocaleSwitcher compact />);\n\n      const cnFlags = screen.getAllByText('ğŸ‡¨ğŸ‡³');\n      expect(cnFlags.length).toBeGreaterThan(0);\n      const zhElements = screen.getAllByText('ZH');\n      expect(zhElements.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Language Options', () => {\n    it('renders all available language options', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      // Check for English option\n      const usFlags = screen.getAllByText('ğŸ‡ºğŸ‡¸');\n      expect(usFlags.length).toBeGreaterThan(0);\n      const englishTexts = screen.getAllByText('English');\n      expect(englishTexts.length).toBeGreaterThan(0);\n\n      // Check for Chinese option\n      expect(screen.getByText('ğŸ‡¨ğŸ‡³')).toBeInTheDocument();\n      expect(screen.getByText('ä¸­æ–‡')).toBeInTheDocument();\n    });\n\n    it('shows language codes for all options', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const languageCodes = screen.getAllByText(/^(EN|ZH)$/);\n      expect(languageCodes.length).toBeGreaterThanOrEqual(2);\n    });\n\n    it('shows region information in non-compact mode', () => {\n      render(<EnhancedLocaleSwitcher compact={false} />);\n\n      expect(screen.getByText('English â€¢ Global')).toBeInTheDocument();\n      expect(screen.getByText('Chinese â€¢ China')).toBeInTheDocument();\n    });\n\n    it('hides region information in compact mode', () => {\n      render(<EnhancedLocaleSwitcher compact />);\n\n      expect(screen.queryByText('English â€¢ Global')).not.toBeInTheDocument();\n      expect(screen.queryByText('Chinese â€¢ China')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Active Language Indication', () => {\n    it('shows check icon for current language', () => {\n      mockUseLocale.mockReturnValue('en');\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByTestId('check-icon')).toBeInTheDocument();\n    });\n\n    it('shows check icon for correct language when locale changes', () => {\n      mockUseLocale.mockReturnValue('zh');\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByTestId('check-icon')).toBeInTheDocument();\n    });\n  });\n\n  describe('Detection Info', () => {\n    it('does not show detection info by default', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.queryByText('Detection Info')).not.toBeInTheDocument();\n    });\n\n    it('shows detection info when enabled', () => {\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      expect(screen.getByText('Detection Info')).toBeInTheDocument();\n      expect(screen.getByText('Source: browser')).toBeInTheDocument();\n      expect(screen.getByText('90%')).toBeInTheDocument();\n    });\n\n    it('shows correct confidence color for high confidence', () => {\n      mockUseClientLocaleDetection.mockReturnValue({\n        detectClientLocale: vi.fn(() => ({\n          source: 'browser',\n          confidence: 0.9,\n        })),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      const badge = screen.getByText('90%');\n      expect(badge).toHaveClass('border-green-500', 'text-green-700');\n    });\n\n    it('shows correct confidence color for medium confidence', () => {\n      mockUseClientLocaleDetection.mockReturnValue({\n        detectClientLocale: vi.fn(() => ({\n          source: 'browser',\n          confidence: 0.6,\n        })),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      const badge = screen.getByText('60%');\n      expect(badge).toHaveClass('border-yellow-500', 'text-yellow-700');\n    });\n\n    it('shows correct confidence color for low confidence', () => {\n      mockUseClientLocaleDetection.mockReturnValue({\n        detectClientLocale: vi.fn(() => ({\n          source: 'browser',\n          confidence: 0.3,\n        })),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      const badge = screen.getByText('30%');\n      expect(badge).toHaveClass('border-red-500', 'text-red-700');\n    });\n\n    it('shows user preference indicator when override exists', () => {\n      mockUseLocaleStorage.mockReturnValue({\n        ...defaultMocks.localeStorage,\n        getStats: vi.fn(() => ({ hasOverride: true })),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      expect(screen.getByText('âœ“ User preference saved')).toBeInTheDocument();\n    });\n\n    it('uses fallback icon for unknown detection source', () => {\n      mockUseClientLocaleDetection.mockReturnValue({\n        detectClientLocale: vi.fn(() => ({\n          locale: 'en',\n          source: 'unknown-source', // This should trigger the fallback to Languages icon\n          confidence: 0.8,\n        })),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      expect(screen.getByText('Detection Info')).toBeInTheDocument();\n      expect(screen.getByText('Source: unknown-source')).toBeInTheDocument();\n    });\n  });\n\n  describe('Language Switching', () => {\n    it('calls setUserOverride when language is switched', () => {\n      const setUserOverride = vi.fn();\n      mockUseLocaleStorage.mockReturnValue({\n        ...defaultMocks.localeStorage,\n        setUserOverride,\n      });\n\n      render(<EnhancedLocaleSwitcher />);\n\n      const chineseLink = screen.getByText('ä¸­æ–‡').closest('a');\n      fireEvent.click(chineseLink!);\n\n      expect(setUserOverride).toHaveBeenCalledWith('zh');\n    });\n\n    it('shows loading state during language switch', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const chineseLink = screen.getByText('ä¸­æ–‡').closest('a');\n      fireEvent.click(chineseLink!);\n\n      expect(screen.getByTestId('loader-icon')).toBeInTheDocument();\n    });\n\n    it('shows success indicator after successful switch', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const chineseLink = screen.getByText('ä¸­æ–‡').closest('a');\n      fireEvent.click(chineseLink!);\n\n      // Wait for transition to complete\n      await waitFor(\n        () => {\n          expect(screen.getByRole('button')).toContainElement(\n            document.querySelector('.bg-green-500'),\n          );\n        },\n        { timeout: 2000 },\n      );\n    });\n\n    it('disables button during pending transition', async () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const chineseLink = screen.getByText('ä¸­æ–‡').closest('a');\n      fireEvent.click(chineseLink!);\n\n      // Check if button shows loading state (success indicator appears)\n      await waitFor(() => {\n        const button = screen.getByRole('button');\n        // The button might not be disabled in test environment, but should show loading state\n        expect(button).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('provides screen reader text for toggle button', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('Toggle language')).toHaveClass('sr-only');\n    });\n\n    it('has proper dropdown structure', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByTestId('dropdown-menu')).toBeInTheDocument();\n      expect(screen.getByTestId('dropdown-trigger')).toBeInTheDocument();\n      expect(screen.getByTestId('dropdown-content')).toBeInTheDocument();\n    });\n\n    it('has proper menu labels', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('Select Language')).toBeInTheDocument();\n    });\n  });\n\n  describe('Responsive Behavior', () => {\n    it('shows full language name on larger screens', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const fullNameElements = screen.getAllByText('English');\n      const triggerElement = fullNameElements.find(\n        (el) =>\n          el.classList.contains('hidden') && el.classList.contains('sm:inline'),\n      );\n      expect(triggerElement).toBeInTheDocument();\n    });\n\n    it('shows language code on smaller screens', () => {\n      render(<EnhancedLocaleSwitcher />);\n\n      const codeElements = screen.getAllByText('EN');\n      const mobileCode = codeElements.find((el) =>\n        el.classList.contains('sm:hidden'),\n      );\n      expect(mobileCode).toBeInTheDocument();\n    });\n  });\n\n  describe('Component Variants', () => {\n    it('renders SimpleLocaleSwitcher correctly', () => {\n      render(<SimpleLocaleSwitcher />);\n\n      expect(screen.getByTestId('dropdown-menu')).toBeInTheDocument();\n      const flagElements = screen.getAllByText('ğŸ‡ºğŸ‡¸');\n      expect(flagElements.length).toBeGreaterThan(0);\n      expect(screen.queryByText('Detection Info')).not.toBeInTheDocument();\n    });\n\n    it('renders LocaleSwitcherWithInfo correctly', () => {\n      render(<LocaleSwitcherWithInfo />);\n\n      expect(screen.getByTestId('dropdown-menu')).toBeInTheDocument();\n      expect(screen.getByText('Detection Info')).toBeInTheDocument();\n    });\n  });\n\n  describe('Memoization', () => {\n    it('has correct display names for all components', () => {\n      expect(EnhancedLocaleSwitcher.displayName).toBe('EnhancedLocaleSwitcher');\n      expect(SimpleLocaleSwitcher.displayName).toBe('SimpleLocaleSwitcher');\n      expect(LocaleSwitcherWithInfo.displayName).toBe('LocaleSwitcherWithInfo');\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('handles missing translations gracefully', () => {\n      mockUseTranslations.mockImplementation((key: string) => key);\n\n      render(<EnhancedLocaleSwitcher />);\n\n      expect(screen.getByText('selectLanguage')).toBeInTheDocument();\n    });\n\n    it('handles undefined locale gracefully', () => {\n      mockUseLocale.mockReturnValue('en'); // Use fallback instead of undefined\n\n      expect(() => render(<EnhancedLocaleSwitcher />)).not.toThrow();\n    });\n\n    it('handles missing detection info gracefully', () => {\n      mockUseClientLocaleDetection.mockReturnValue({\n        detectClientLocale: vi.fn(() => null),\n      });\n\n      render(<EnhancedLocaleSwitcher showDetectionInfo />);\n\n      expect(screen.queryByText('Detection Info')).not.toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/enhanced-locale-switcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/format-helpers.tsx","messages":[{"ruleId":"max-statements","severity":2,"message":"Arrow function has too many statements (25). Maximum allowed is 20.","line":81,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":142,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2853,2856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2853,2856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3333,3336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3333,3336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3748,3751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3748,3751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-shadow","severity":2,"message":"'count' is already declared in the upper scope on line 153 column 28.","line":156,"column":25,"nodeType":"Identifier","messageId":"noShadow","endLine":156,"endColumn":38},{"ruleId":"no-shadow","severity":2,"message":"'text' is already declared in the upper scope on line 177 column 30.","line":179,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":179,"endColumn":36},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":186,"column":11,"nodeType":"NewExpression","endLine":186,"endColumn":39}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport type { DateFormatOptions } from '@/types/i18n-enhanced';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { useFormatter, useLocale, useTranslations } from 'next-intl';\nimport { memo } from 'react';\n\ninterface FormatDateProps {\n  date: Date | string | number;\n  format?: 'short' | 'long' | 'relative';\n  className?: string;\n}\n\nconst MILLISECONDS_PER_DAY = ANIMATION_DURATION_VERY_SLOW * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * HOURS_PER_DAY;\n\nconst FormatDateComponent = ({\n  date,\n  format = 'short',\n  className,\n}: FormatDateProps) => {\n  const formatter = useFormatter();\n  const locale = useLocale();\n  const t = useTranslations('formatting.date');\n\n  const dateObj = new Date(date);\n  const now = new Date();\n  const diffInDays = Math.floor(\n    (now.getTime() - dateObj.getTime()) / MILLISECONDS_PER_DAY,\n  );\n\n  let formattedDate: string;\n\n  if (format === 'relative') {\n    if (diffInDays === ZERO) {\n      formattedDate = t('today');\n    } else if (diffInDays === ONE) {\n      formattedDate = t('yesterday');\n    } else if (diffInDays === -ONE) {\n      formattedDate = t('tomorrow');\n    } else {\n      formattedDate = formatter.dateTime(dateObj, {\n        dateStyle: 'medium',\n      });\n    }\n  } else {\n    const options: Intl.DateTimeFormatOptions = {\n      dateStyle: format === 'long' ? 'full' : 'medium',\n    };\n\n    if (format === 'long') {\n      options.timeStyle = 'short';\n    }\n\n    formattedDate = formatter.dateTime(dateObj, options as DateFormatOptions);\n  }\n\n  return (\n    <time\n      dateTime={dateObj.toISOString()}\n      className={className}\n      lang={locale}\n    >\n      {formattedDate}\n    </time>\n  );\n};\n\nFormatDateComponent.displayName = 'FormatDate';\nexport const FormatDate = memo(FormatDateComponent);\n\ninterface FormatNumberProps {\n  value: number;\n  type?: 'currency' | 'percentage' | 'decimal';\n  currency?: string;\n  minimumFractionDigits?: number;\n  maximumFractionDigits?: number;\n  className?: string;\n}\n\nconst FormatNumberComponent = ({\n  value,\n  type = 'decimal',\n  currency = 'USD',\n  minimumFractionDigits,\n  maximumFractionDigits,\n  className,\n}: FormatNumberProps) => {\n  const formatter = useFormatter();\n  const locale = useLocale();\n\n  let formattedNumber: string;\n\n  switch (type) {\n    case 'currency': {\n      const currencyOptions: Intl.NumberFormatOptions = {\n        style: 'currency',\n        currency: locale === 'zh' ? 'CNY' : currency,\n      };\n      if (minimumFractionDigits !== undefined) {\n        currencyOptions.minimumFractionDigits = minimumFractionDigits;\n      }\n      if (maximumFractionDigits !== undefined) {\n        currencyOptions.maximumFractionDigits = maximumFractionDigits;\n      }\n      formattedNumber = formatter.number(value, currencyOptions as any);\n      break;\n    }\n    case 'percentage': {\n      const percentOptions: Intl.NumberFormatOptions = {\n        style: 'percent',\n      };\n      if (minimumFractionDigits !== undefined) {\n        percentOptions.minimumFractionDigits = minimumFractionDigits;\n      }\n      if (maximumFractionDigits !== undefined) {\n        percentOptions.maximumFractionDigits = maximumFractionDigits;\n      }\n      formattedNumber = formatter.number(value / PERCENTAGE_FULL, percentOptions as any);\n      break;\n    }\n    default: {\n      const numberOptions: Intl.NumberFormatOptions = {};\n      if (minimumFractionDigits !== undefined) {\n        numberOptions.minimumFractionDigits = minimumFractionDigits;\n      }\n      if (maximumFractionDigits !== undefined) {\n        numberOptions.maximumFractionDigits = maximumFractionDigits;\n      }\n      formattedNumber = formatter.number(value, numberOptions as any);\n    }\n  }\n\n  return (\n    <span\n      className={className}\n      lang={locale}\n    >\n      {formattedNumber}\n    </span>\n  );\n};\n\nFormatNumberComponent.displayName = 'FormatNumber';\nexport const FormatNumber = memo(FormatNumberComponent);\n\ninterface PluralProps {\n  count: number;\n  category: 'items' | 'users' | 'notifications';\n  className?: string;\n}\n\nconst PluralComponent = ({ count, category, className }: PluralProps) => {\n  const t = useTranslations(`formatting.plurals.${category}`);\n\n  const getPluralKey = (count: number): 'zero' | 'one' | 'other' => {\n    if (count === ZERO) return 'zero';\n    if (count === ONE) return 'one';\n    return 'other';\n  };\n\n  const pluralKey = getPluralKey(count);\n  const message = t(pluralKey, { count });\n\n  return <span className={className}>{message}</span>;\n};\n\nPluralComponent.displayName = 'Plural';\nexport const Plural = memo(PluralComponent);\n\ninterface RichTextProps {\n  text: string;\n  values?: Record<string, React.ReactNode>;\n  className?: string;\n}\n\nconst RichTextComponent = ({ text, values = {}, className }: RichTextProps) => {\n  // Simple rich text processor for basic formatting\n  const processText = (text: string): React.ReactNode => {\n    // Replace {key} with values\n    let processed = text;\n    Object.entries(values).forEach(([key, value]) => {\n      const placeholder = `{${key}}`;\n      if (typeof value === 'string' || typeof value === 'number') {\n        processed = processed.replace(\n          new RegExp(placeholder, 'g'),\n          String(value),\n        );\n      }\n    });\n\n    // Process basic markdown-like formatting\n    return processed.split(/(\\*\\*.*?\\*\\*|\\*.*?\\*|`.*?`)/).map((part, index) => {\n      if (part.startsWith('**') && part.endsWith('**')) {\n        return <strong key={index}>{part.slice(COUNT_PAIR, -COUNT_PAIR)}</strong>;\n      }\n      if (part.startsWith('*') && part.endsWith('*')) {\n        return <em key={index}>{part.slice(ONE, -ONE)}</em>;\n      }\n      if (part.startsWith('`') && part.endsWith('`')) {\n        return (\n          <code\n            key={index}\n            className='bg-muted rounded px-1'\n          >\n            {part.slice(ONE, -ONE)}\n          </code>\n        );\n      }\n      return part;\n    });\n  };\n\n  return <span className={className}>{processText(text)}</span>;\n};\n\nRichTextComponent.displayName = 'RichText';\nexport const RichText = memo(RichTextComponent);\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/locale-detection-demo.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-detection' import is duplicated.","line":18,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":18,"endColumn":67},{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage' import is duplicated.","line":20,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":20,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2890,2893],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2890,2893],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2971,2974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2971,2974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3157,3160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3157,3160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3225,3228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3225,3228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3478,3481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3478,3481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3672,3675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3672,3675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":121,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3756,3759],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3756,3759],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5261,5264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5261,5264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { EnhancedLocaleSwitcher } from '@/components/i18n/enhanced-locale-switcher';\nimport { PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Separator } from '@/components/ui/separator';\nimport { MAGIC_0_5, MAGIC_0_8 } from \"@/constants/decimal\";\nimport type { LocaleDetectionResult } from '@/lib/locale-detection';\nimport { useClientLocaleDetection } from '@/lib/locale-detection';\nimport type { UserLocalePreference } from '@/lib/locale-storage';\nimport { useLocaleStorage } from '@/lib/locale-storage';\nimport { useCallback, useEffect, useState } from 'react';\n\n// å·¥å…·å‡½æ•°\nconst getConfidenceColor = (confidence: number) => {\n  if (confidence > MAGIC_0_8) return 'bg-green-100 text-green-800';\n  if (confidence > MAGIC_0_5) return 'bg-yellow-100 text-yellow-800';\n  return 'bg-red-100 text-red-800';\n};\n\nconst getSourceIcon = (source: string) => {\n  switch (source) {\n    case 'user':\n      return 'ğŸ‘¤';\n    case 'geo':\n      return 'ğŸŒ';\n    case 'browser':\n      return 'ğŸŒ';\n    default:\n      return 'âš™ï¸';\n  }\n};\n\n// æ£€æµ‹ç»“æœæ˜¾ç¤ºç»„ä»¶\ninterface DetectionResultProps {\n  detection: LocaleDetectionResult;\n}\n\nconst DetectionResult = ({ detection }: DetectionResultProps) => (\n  <div>\n    <h4 className='mb-2 font-semibold'>å½“å‰æ£€æµ‹ç»“æœ</h4>\n    <div className='grid grid-cols-2 gap-4'>\n      <div className='space-y-2'>\n        <div className='flex items-center space-x-2'>\n          <span>æ£€æµ‹è¯­è¨€:</span>\n          <Badge variant='outline'>{detection.locale}</Badge>\n        </div>\n        <div className='flex items-center space-x-2'>\n          <span>æ£€æµ‹æ¥æº:</span>\n          <Badge variant='secondary'>\n            {getSourceIcon(detection.source)} {detection.source}\n          </Badge>\n        </div>\n      </div>\n      <div className='space-y-2'>\n        <div className='flex items-center space-x-2'>\n          <span>ç½®ä¿¡åº¦:</span>\n          <Badge className={getConfidenceColor(detection.confidence)}>\n            {Math.round(detection.confidence * PERCENTAGE_FULL)}%\n          </Badge>\n        </div>\n        {detection.details?.browserLanguages && (\n          <div className='text-muted-foreground text-sm'>\n            æµè§ˆå™¨è¯­è¨€: {detection.details.browserLanguages.join(', ')}\n          </div>\n        )}\n      </div>\n    </div>\n  </div>\n);\n\n// å­˜å‚¨çŠ¶æ€æ˜¾ç¤ºç»„ä»¶\ninterface StorageStatsProps {\n  stats: unknown;\n  onClearOverride: () => void;\n}\n\nconst StorageStats = ({ stats, onClearOverride }: StorageStatsProps) => (\n  <div>\n    <h4 className='mb-2 font-semibold'>å­˜å‚¨çŠ¶æ€</h4>\n    <div className='grid grid-cols-2 gap-4'>\n      <div className='space-y-2'>\n        <div className='flex items-center space-x-2'>\n          <span>æœ‰åå¥½è®¾ç½®:</span>\n          <Badge\n            variant={(stats as any).hasPreference ? 'default' : 'secondary'}\n          >\n            {(stats as any).hasPreference ? 'æ˜¯' : 'å¦'}\n          </Badge>\n        </div>\n        <div className='flex items-center space-x-2'>\n          <span>æœ‰ç”¨æˆ·è¦†ç›–:</span>\n          <Badge variant={(stats as any).hasOverride ? 'default' : 'secondary'}>\n            {(stats as any).hasOverride ? 'æ˜¯' : 'å¦'}\n          </Badge>\n        </div>\n      </div>\n      <div className='space-y-2'>\n        <div className='flex items-center space-x-2'>\n          <span>å½“å‰è¯­è¨€:</span>\n          <Badge variant='outline'>\n            {(stats as any).currentLocale || 'æœªè®¾ç½®'}\n          </Badge>\n        </div>\n        <div className='flex items-center space-x-2'>\n          <span>æ£€æµ‹æ¬¡æ•°:</span>\n          <Badge variant='secondary'>{(stats as any).detectionCount}</Badge>\n        </div>\n      </div>\n    </div>\n\n    {(stats as any).hasOverride && (\n      <div className='mt-4'>\n        <Button\n          onClick={onClearOverride}\n          variant='destructive'\n          size='sm'\n        >\n          æ¸…é™¤ç”¨æˆ·è¦†ç›–\n        </Button>\n      </div>\n    )}\n  </div>\n);\n\n// åå¥½è¯¦æƒ…æ˜¾ç¤ºç»„ä»¶\ninterface PreferenceDetailsProps {\n  preference: UserLocalePreference;\n}\n\nconst PreferenceDetails = ({ preference }: PreferenceDetailsProps) => (\n  <div>\n    <h4 className='mb-2 font-semibold'>åå¥½è¯¦æƒ…</h4>\n    <div className='bg-muted rounded-md p-3'>\n      <div className='grid grid-cols-2 gap-2 text-sm'>\n        <div>è¯­è¨€: {preference.locale}</div>\n        <div>æ¥æº: {preference.source}</div>\n        <div>ç½®ä¿¡åº¦: {Math.round(preference.confidence * PERCENTAGE_FULL)}%</div>\n        <div>æ—¶é—´: {new Date(preference.timestamp).toLocaleString()}</div>\n      </div>\n    </div>\n  </div>\n);\n\n// æµè§ˆå™¨ä¿¡æ¯æ˜¾ç¤ºç»„ä»¶\nconst BrowserInfo = () => (\n  <div>\n    <h4 className='mb-2 font-semibold'>æµè§ˆå™¨ä¿¡æ¯</h4>\n    <div className='bg-muted space-y-1 rounded-md p-3 text-sm'>\n      {typeof navigator !== 'undefined' && (\n        <>\n          <div>è¯­è¨€: {navigator.language}</div>\n          <div>è¯­è¨€åˆ—è¡¨: {navigator.languages?.join(', ')}</div>\n          <div>ç”¨æˆ·ä»£ç†: {navigator.userAgent.substring(ZERO, PERCENTAGE_FULL)}...</div>\n        </>\n      )}\n    </div>\n  </div>\n);\n\nconst LocaleDetectionDemoComponent = () => {\n  const { getStats, getUserPreference, clearUserOverride } = useLocaleStorage();\n  const { detectClientLocale } = useClientLocaleDetection();\n\n  const [stats, setStats] = useState<any>(null);\n  const [detection, setDetection] = useState<LocaleDetectionResult | null>(\n    null,\n  );\n  const [preference, setPreference] = useState<UserLocalePreference | null>(\n    null,\n  );\n\n  const refreshData = useCallback(() => {\n    setStats(getStats());\n    setDetection(detectClientLocale());\n    setPreference(getUserPreference());\n  }, [getStats, detectClientLocale, getUserPreference]);\n\n  useEffect(() => {\n    refreshData();\n  }, [refreshData]);\n\n  const handleClearOverride = () => {\n    clearUserOverride();\n    refreshData();\n  };\n\n  return (\n    <div className='space-y-6'>\n      <Card>\n        <CardHeader>\n          <CardTitle className='flex items-center justify-between'>\n            æ™ºèƒ½è¯­è¨€æ£€æµ‹æ¼”ç¤º\n            <EnhancedLocaleSwitcher showDetectionInfo />\n          </CardTitle>\n          <CardDescription>\n            å±•ç¤ºæ™ºèƒ½è¯­è¨€æ£€æµ‹ç³»ç»Ÿçš„å·¥ä½œçŠ¶æ€å’Œæ£€æµ‹ç»“æœ\n          </CardDescription>\n        </CardHeader>\n        <CardContent className='space-y-4'>\n          <Button\n            onClick={refreshData}\n            variant='outline'\n            size='sm'\n          >\n            åˆ·æ–°æ•°æ®\n          </Button>\n\n          {detection && <DetectionResult detection={detection} />}\n\n          <Separator />\n\n          {stats && (\n            <StorageStats\n              stats={stats}\n              onClearOverride={handleClearOverride}\n            />\n          )}\n\n          <Separator />\n\n          {preference && <PreferenceDetails preference={preference} />}\n\n          <BrowserInfo />\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport const LocaleDetectionDemo = LocaleDetectionDemoComponent;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/locale-switcher/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/locale-switcher/enhanced-locale-switcher-component.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/components/i18n/locale-switcher/config' import is duplicated.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":2,"endColumn":90},{"ruleId":"max-lines-per-function","severity":2,"message":"Arrow function has too many lines (127). Maximum allowed is 120.","line":23,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":164,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":111,"column":42,"nodeType":"MemberExpression","endLine":111,"endColumn":65},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":113,"column":18,"nodeType":"MemberExpression","endLine":113,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":120,"column":18,"nodeType":"MemberExpression","endLine":120,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":123,"column":18,"nodeType":"MemberExpression","endLine":123,"endColumn":41}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { EnhancedLocaleSwitcherProps } from '@/components/i18n/locale-switcher/config';\nimport { LANGUAGE_CONFIG, SOURCE_ICONS } from '@/components/i18n/locale-switcher/config';\nimport { LanguageItem } from '@/components/i18n/locale-switcher/language-item';\nimport { useLanguageSwitch } from '@/components/i18n/locale-switcher/use-language-switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { MAGIC_0_5, MAGIC_0_8, PERCENTAGE_FULL } from \"@/constants\";\nimport { usePathname } from '@/i18n/routing';\nimport { useClientLocaleDetection } from '@/lib/locale-detection';\nimport { useLocaleStorage } from '@/lib/locale-storage';\nimport type { Locale } from '@/types/i18n';\nimport { Languages } from 'lucide-react';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { useMemo } from 'react';\n\nexport const EnhancedLocaleSwitcherComponent = ({\n  showDetectionInfo = false,\n  compact = false,\n  className = '',\n}: EnhancedLocaleSwitcherProps) => {\n  const t = useTranslations('language');\n  const locale = useLocale() as Locale;\n  const pathname = usePathname();\n\n  const { switchingTo, switchSuccess, isPending, handleLanguageSwitch } =\n    useLanguageSwitch();\n  const { getStats } = useLocaleStorage();\n  const { detectClientLocale: _detectClientLocale } =\n    useClientLocaleDetection();\n\n  // è®¡ç®—æ£€æµ‹ä¿¡æ¯ - ä½¿ç”¨useMemoé¿å…æ´¾ç”ŸçŠ¶æ€\n  const detectionInfo = useMemo(() => {\n    if (!showDetectionInfo) return null;\n\n    const stats = getStats();\n    const detection = _detectClientLocale();\n\n    if (!detection) return null;\n\n    return {\n      source: stats.data?.hasOverride ? 'user' : detection.source,\n      confidence: detection.confidence,\n      isUserOverride: stats.data?.hasOverride || false,\n    };\n  }, [showDetectionInfo, getStats, _detectClientLocale]);\n\n  const renderDetectionInfo = () => {\n    if (!showDetectionInfo || !detectionInfo) return null;\n\n    const SourceIcon =\n      SOURCE_ICONS[detectionInfo.source as keyof typeof SOURCE_ICONS] ||\n      Languages;\n    const confidenceColor =\n      detectionInfo.confidence > MAGIC_0_8\n        ? 'green'\n        : detectionInfo.confidence > MAGIC_0_5\n          ? 'yellow'\n          : 'red';\n\n    return (\n      <>\n        <DropdownMenuSeparator />\n        <DropdownMenuLabel className='text-muted-foreground text-xs'>\n          Detection Info\n        </DropdownMenuLabel>\n        <div className='px-2 py-1 text-xs'>\n          <div className='mb-1 flex items-center justify-between'>\n            <div className='flex items-center space-x-1'>\n              <SourceIcon className='h-3 w-3' />\n              <span>Source: {detectionInfo.source}</span>\n            </div>\n            <Badge\n              variant='outline'\n              className={`text-xs ${\n                confidenceColor === 'green'\n                  ? 'border-green-500 text-green-700'\n                  : confidenceColor === 'yellow'\n                    ? 'border-yellow-500 text-yellow-700'\n                    : 'border-red-500 text-red-700'\n              }`}\n            >\n              {Math.round(detectionInfo.confidence * PERCENTAGE_FULL)}%\n            </Badge>\n          </div>\n          {detectionInfo.isUserOverride && (\n            <div className='text-xs text-blue-600'>âœ“ User preference saved</div>\n          )}\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant='ghost'\n          size='sm'\n          className={`relative ${className}`}\n          disabled={isPending}\n        >\n          {compact ? (\n            <div className='flex items-center space-x-1'>\n              <span className='text-sm'>{LANGUAGE_CONFIG[locale].flag}</span>\n              <span className='font-mono text-xs'>\n                {LANGUAGE_CONFIG[locale].code}\n              </span>\n            </div>\n          ) : (\n            <div className='flex items-center space-x-2'>\n              <Languages className='h-4 w-4' />\n              <span className='hidden sm:inline'>\n                {LANGUAGE_CONFIG[locale].nativeName}\n              </span>\n              <span className='font-mono text-xs sm:hidden'>\n                {LANGUAGE_CONFIG[locale].code}\n              </span>\n            </div>\n          )}\n\n          {switchSuccess && (\n            <div className='absolute -top-1 -right-1'>\n              <div className='h-2 w-2 animate-pulse rounded-full bg-green-500' />\n            </div>\n          )}\n\n          <span className='sr-only'>{t('toggle')}</span>\n        </Button>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent\n        align='end'\n        className='w-56'\n      >\n        <DropdownMenuLabel className='flex items-center space-x-2'>\n          <Languages className='h-4 w-4' />\n          <span>{t('selectLanguage')}</span>\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n\n        {Object.keys(LANGUAGE_CONFIG).map((lang) => (\n          <LanguageItem\n            key={lang}\n            targetLocale={lang as Locale}\n            currentLocale={locale}\n            switchingTo={switchingTo}\n            pathname={pathname}\n            compact={compact}\n            onLanguageSwitch={handleLanguageSwitch}\n          />\n        ))}\n\n        {renderDetectionInfo()}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/locale-switcher/language-item.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":26,"column":20,"nodeType":"MemberExpression","endLine":26,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { memo } from 'react';\nimport { Check, Loader2 } from 'lucide-react';\nimport type { Locale } from '@/types/i18n';\nimport { DropdownMenuItem } from '@/components/ui/dropdown-menu';\nimport { Link } from '@/i18n/routing';\nimport { LANGUAGE_CONFIG } from '@/components/i18n/locale-switcher/config';\n\ninterface LanguageItemProps {\n  targetLocale: Locale;\n  currentLocale: Locale;\n  switchingTo: Locale | null;\n  pathname: string;\n  compact: boolean;\n  onLanguageSwitch: (_locale: Locale) => void;\n}\n\nexport const LanguageItem = memo(\n  ({\n    targetLocale,\n    currentLocale,\n    switchingTo,\n    pathname,\n    compact,\n    onLanguageSwitch,\n  }: LanguageItemProps) => {\n    const config = LANGUAGE_CONFIG[targetLocale];\n    const isActive = currentLocale === targetLocale;\n    const isSwitching = switchingTo === targetLocale;\n\n    return (\n      <DropdownMenuItem\n        key={targetLocale}\n        asChild\n      >\n        <Link\n          href={pathname as '/' | '/about' | '/contact' | '/blog' | '/products'}\n          locale={targetLocale}\n          className='flex w-full items-center justify-between'\n          onClick={() => onLanguageSwitch(targetLocale)}\n        >\n          <div className='flex items-center space-x-3'>\n            <span className='text-lg'>{config.flag}</span>\n            <div className='flex flex-col'>\n              <div className='flex items-center space-x-2'>\n                <span className='bg-muted rounded px-1.5 py-0.5 font-mono text-xs'>\n                  {config.code}\n                </span>\n                <span className='font-medium'>{config.nativeName}</span>\n              </div>\n              {!compact && (\n                <span className='text-muted-foreground text-xs'>\n                  {config.name} â€¢ {config.region}\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div className='flex items-center space-x-2'>\n            {isSwitching && (\n              <Loader2 className='h-4 w-4 animate-spin text-blue-500' />\n            )}\n            {isActive && !isSwitching && (\n              <Check className='h-4 w-4 text-green-500' />\n            )}\n          </div>\n        </Link>\n      </DropdownMenuItem>\n    );\n  },\n);\n\nLanguageItem.displayName = 'LanguageItem';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/locale-switcher/use-language-switch.ts","messages":[{"ruleId":"max-nested-callbacks","severity":2,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":25,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":25,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useTransition } from 'react';\nimport { MAGIC_2000  } from '@/constants';\n\nimport type { Locale } from '@/types/i18n';\nimport { useLocaleStorage } from '@/lib/locale-storage';\nimport { TRANSITION_TIMEOUT } from '@/components/i18n/locale-switcher/config';\n\nexport const useLanguageSwitch = () => {\n  const [switchingTo, setSwitchingTo] = useState<Locale | null>(null);\n  const [switchSuccess, setSwitchSuccess] = useState(false);\n  const [isPending, startTransition] = useTransition();\n  const { setUserOverride } = useLocaleStorage();\n\n  const handleLanguageSwitch = (newLocale: Locale) => {\n    setSwitchingTo(newLocale);\n    setSwitchSuccess(false);\n\n    // ä¿å­˜ç”¨æˆ·é€‰æ‹©\n    setUserOverride(newLocale);\n\n    startTransition(() => {\n      setTimeout(() => {\n        setSwitchingTo(null);\n        setSwitchSuccess(true);\n        setTimeout(() => setSwitchSuccess(false), MAGIC_2000);\n      }, TRANSITION_TIMEOUT);\n    });\n  };\n\n  return {\n    switchingTo,\n    switchSuccess,\n    isPending,\n    handleLanguageSwitch,\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/performance-dashboard.tsx","messages":[{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'registerTool'.","line":22,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":22,"endColumn":42},{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'unregisterTool'.","line":23,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":23,"endColumn":44},{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'registerTool'.","line":188,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":188,"endColumn":42},{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'unregisterTool'.","line":189,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":189,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { MAGIC_80 } from \"@/constants/count\";\nimport { FIVE_SECONDS_MS, ONE, TEN_SECONDS_MS, ZERO } from '@/constants';\n\nimport { useI18nPerformance } from '@/hooks/use-enhanced-translations';\nimport {\n  evaluatePerformance,\n  PERFORMANCE_TARGETS,\n} from '@/lib/i18n-performance';\nimport { useEffect, useState } from 'react';\n\ninterface PerformanceMetrics {\n  averageLoadTime: number;\n  cacheHitRate: number;\n  totalErrors: number;\n  totalRequests: number;\n}\n\nexport function I18nPerformanceDashboard() {\n  const { registerTool, unregisterTool, getClasses } = {\n    registerTool: (_toolId: string) => {},\n    unregisterTool: (_toolId: string) => {},\n    getClasses: () => '',\n  };\n  const [metrics, setMetrics] = useState<PerformanceMetrics | null>(null);\n  const [isVisible, setIsVisible] = useState(\n    process.env.NODE_ENV === 'development',\n  );\n  const { getMetrics, resetMetrics } = useI18nPerformance();\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨\n  useEffect(() => {\n    registerTool('i18nPerformanceDashboard');\n    return () => unregisterTool('i18nPerformanceDashboard');\n  }, [registerTool, unregisterTool]);\n\n  useEffect(() => {\n    const updateMetrics = () => {\n      const currentMetrics = getMetrics();\n      setMetrics(currentMetrics);\n    };\n\n    // åˆå§‹åŠ è½½\n    updateMetrics();\n\n    // å®šæœŸæ›´æ–°æŒ‡æ ‡\n    const interval = setInterval(updateMetrics, FIVE_SECONDS_MS); // æ¯5ç§’æ›´æ–°\n\n    return () => clearInterval(interval);\n  }, [getMetrics]);\n\n  if (!isVisible || !metrics) {\n    return null;\n  }\n\n  const evaluation = evaluatePerformance(metrics);\n\n  return (\n    <div\n      className={`${getClasses()} rounded-lg border border-gray-200 bg-white p-4 shadow-lg dark:border-gray-700 dark:bg-gray-800`}\n    >\n      <div className='mb-3 flex items-center justify-between'>\n        <h3 className='text-sm font-semibold text-gray-900 dark:text-gray-100'>\n          I18n Performance\n        </h3>\n        <div className='flex items-center gap-2'>\n          <span\n            className={`rounded px-2 py-1 text-xs ${getGradeColor(evaluation.grade)}`}\n          >\n            {evaluation.grade}\n          </span>\n          <button\n            onClick={() => setIsVisible(false)}\n            className='text-gray-400 hover:text-gray-600 dark:hover:text-gray-300'\n          >\n            Ã—\n          </button>\n        </div>\n      </div>\n\n      <div className='space-y-2 text-xs'>\n        <MetricRow\n          label='Load Time'\n          value={`${metrics.averageLoadTime.toFixed(ONE)}ms`}\n          target={PERFORMANCE_TARGETS.TRANSLATION_LOAD_TIME.excellent}\n          current={metrics.averageLoadTime}\n          isLowerBetter={true}\n        />\n\n        <MetricRow\n          label='Cache Hit Rate'\n          value={`${metrics.cacheHitRate.toFixed(ONE)}%`}\n          target={PERFORMANCE_TARGETS.CACHE_HIT_RATE.excellent}\n          current={metrics.cacheHitRate}\n          isLowerBetter={false}\n        />\n\n        <MetricRow\n          label='Total Requests'\n          value={metrics.totalRequests.toString()}\n          target={null}\n          current={metrics.totalRequests}\n        />\n\n        <MetricRow\n          label='Errors'\n          value={metrics.totalErrors.toString()}\n          target={ZERO}\n          current={metrics.totalErrors}\n          isLowerBetter={true}\n        />\n      </div>\n\n      <div className='mt-3 border-t border-gray-200 pt-3 dark:border-gray-600'>\n        <div className='flex items-center justify-between'>\n          <span className='text-xs text-gray-600 dark:text-gray-400'>\n            Overall Score: {evaluation.overallScore}/100\n          </span>\n          <button\n            onClick={resetMetrics}\n            className='text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300'\n          >\n            Reset\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface MetricRowProps {\n  label: string;\n  value: string;\n  target: number | null;\n  current: number;\n  isLowerBetter?: boolean;\n}\n\nfunction MetricRow({\n  label,\n  value,\n  target,\n  current,\n  isLowerBetter = false,\n}: MetricRowProps) {\n  const getStatusColor = () => {\n    if (target === null) return 'text-gray-600 dark:text-gray-400';\n\n    const isGood = isLowerBetter ? current <= target : current >= target;\n\n    return isGood\n      ? 'text-green-600 dark:text-green-400'\n      : 'text-red-600 dark:text-red-400';\n  };\n\n  return (\n    <div className='flex items-center justify-between'>\n      <span className='text-gray-700 dark:text-gray-300'>{label}:</span>\n      <span className={getStatusColor()}>{value}</span>\n    </div>\n  );\n}\n\nfunction getGradeColor(grade: string): string {\n  switch (grade) {\n    case 'A':\n      return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\n    case 'B':\n      return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';\n    case 'C':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\n    case 'D':\n      return 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200';\n    case 'F':\n      return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';\n  }\n}\n\n/**\n * ç®€åŒ–ç‰ˆæ€§èƒ½æŒ‡ç¤ºå™¨\n * åªæ˜¾ç¤ºå…³é”®æŒ‡æ ‡ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ\n */\nexport function I18nPerformanceIndicator() {\n  const { registerTool, unregisterTool, getClasses } = {\n    registerTool: (_toolId: string) => {},\n    unregisterTool: (_toolId: string) => {},\n    getClasses: () => '',\n  };\n  const [metrics, setMetrics] = useState<PerformanceMetrics | null>(null);\n  const [showDetails, _setShowDetails] = useState(false);\n  const { getMetrics } = useI18nPerformance();\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨\n  useEffect(() => {\n    registerTool('i18nPerformanceIndicator');\n    return () => unregisterTool('i18nPerformanceIndicator');\n  }, [registerTool, unregisterTool]);\n\n  useEffect(() => {\n    const updateMetrics = () => {\n      const currentMetrics = getMetrics();\n      setMetrics(currentMetrics);\n    };\n\n    updateMetrics();\n    const interval = setInterval(updateMetrics, TEN_SECONDS_MS); // æ¯10ç§’æ›´æ–°\n\n    return () => clearInterval(interval);\n  }, [getMetrics]);\n\n  if (!metrics) return null;\n\n  const evaluation = evaluatePerformance(metrics);\n  const hasIssues = evaluation.overallScore < MAGIC_80;\n\n  // åªåœ¨æœ‰æ€§èƒ½é—®é¢˜æ—¶æ˜¾ç¤º\n  if (!hasIssues && !showDetails) return null;\n\n  return (\n    <div className={getClasses()}>\n      <button\n        onClick={() => _setShowDetails(!showDetails)}\n        className={`rounded-full px-3 py-2 text-xs font-medium transition-colors ${\n          hasIssues\n            ? 'bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900 dark:text-red-200'\n            : 'bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900 dark:text-green-200'\n        }`}\n      >\n        I18n: {evaluation.grade}\n      </button>\n\n      {showDetails && (\n        <div className='absolute bottom-full left-0 mb-2 min-w-48 rounded-lg border border-gray-200 bg-white p-3 shadow-lg dark:border-gray-700 dark:bg-gray-800'>\n          <div className='space-y-1 text-xs'>\n            <div>Load: {metrics.averageLoadTime.toFixed(ONE)}ms</div>\n            <div>Cache: {metrics.cacheHitRate.toFixed(ONE)}%</div>\n            <div>Errors: {metrics.totalErrors}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/translation-fallback.tsx","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":19,"column":36,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":68,"endColumn":2},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":77,"column":32,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":123,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2363,2366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2363,2366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":129,"column":34,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":162,"endColumn":2},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":186,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":186,"endColumn":22}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { MAGIC_0_1 } from \"@/constants/decimal\";\nimport { PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { AlertTriangle } from 'lucide-react';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { memo, useEffect, useState } from 'react';\n\n// import { Alert, AlertDescription } from '@/components/ui/alert';\n\ninterface TranslationFallbackProps {\n  translationKey: string;\n  fallbackText?: string | undefined;\n  showWarning?: boolean;\n  className?: string | undefined;\n}\n\nexport const TranslationFallback = memo(\n  ({\n    translationKey,\n    fallbackText,\n    showWarning = process.env.NODE_ENV === 'development',\n    className,\n  }: TranslationFallbackProps) => {\n    const t = useTranslations();\n    const locale = useLocale();\n    const [hasMissingTranslation, setHasMissingTranslation] = useState(false);\n\n    useEffect(() => {\n      // Check if translation exists\n      try {\n        const translation = t(translationKey as never);\n        if (translation === translationKey) {\n          setHasMissingTranslation(true);\n          // Log missing translation in development\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(\n              `Missing translation for key: ${translationKey} in locale: ${locale}`,\n            );\n          }\n        }\n      } catch {\n        setHasMissingTranslation(true);\n      }\n    }, [translationKey, locale, t]);\n\n    if (hasMissingTranslation) {\n      const displayText = fallbackText || translationKey;\n\n      return (\n        <span className={className}>\n          {displayText}\n          {showWarning && (\n            <span\n              className='ml-1 text-yellow-500'\n              title='Translation missing'\n            >\n              âš ï¸\n            </span>\n          )}\n        </span>\n      );\n    }\n\n    return <span className={className}>{t(translationKey as never)}</span>;\n  },\n);\n\ninterface SafeTranslationProps {\n  translationKey: string;\n  values?: Record<string, string | number | boolean>;\n  fallbackText?: string | undefined;\n  className?: string | undefined;\n}\n\nexport const SafeTranslation = memo(\n  ({\n    translationKey,\n    values,\n    fallbackText,\n    className,\n  }: SafeTranslationProps) => {\n    const t = useTranslations();\n    const locale = useLocale();\n\n    try {\n      const translation = t(translationKey as never, values as any);\n\n      // Check if translation actually exists (not just returning the key)\n      if (translation === translationKey && !fallbackText) {\n        return (\n          <TranslationFallback\n            translationKey={translationKey}\n            fallbackText={fallbackText}\n            className={className}\n          />\n        );\n      }\n\n      return (\n        <span\n          className={className}\n          lang={locale}\n        >\n          {translation}\n        </span>\n      );\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error(`Translation error for key: ${translationKey}`, error);\n      }\n\n      return (\n        <TranslationFallback\n          translationKey={translationKey}\n          fallbackText={fallbackText || 'Translation error'}\n          className={className}\n        />\n      );\n    }\n  },\n);\n\ninterface TranslationStatusProps {\n  className?: string;\n}\n\nexport const TranslationStatus = memo(\n  ({ className }: TranslationStatusProps) => {\n    const locale = useLocale();\n    const t = useTranslations('language');\n    const [missingCount, setMissingCount] = useState(ZERO);\n\n    useEffect(() => {\n      // In a real application, you would check translation coverage\n      // This is a simplified example\n      const checkTranslationCoverage = () => {\n        // Simulate checking translation coverage\n        const coverage = Math.random() * 100;\n        if (coverage < 95) {\n          setMissingCount(Math.floor((PERCENTAGE_FULL - coverage) * MAGIC_0_1));\n        }\n      };\n\n      checkTranslationCoverage();\n    }, [locale]);\n\n    if (missingCount === 0) {\n      return null;\n    }\n\n    return (\n      <div\n        className={`flex items-center gap-2 rounded-md border border-yellow-200 bg-yellow-50 p-3 ${className || ''}`}\n      >\n        <AlertTriangle className='h-4 w-4 text-yellow-600' />\n        <span className='text-sm text-yellow-800'>{t('fallbackWarning')}</span>\n      </div>\n    );\n  },\n);\n\n// Hook for checking translation completeness\nexport function useTranslationStatus() {\n  const locale = useLocale();\n  const [status, setStatus] = useState({\n    isComplete: true,\n    missingKeys: [] as string[],\n    coverage: PERCENTAGE_FULL,\n  });\n\n  useEffect(() => {\n    // In a real application, you would implement actual translation checking\n    // This is a placeholder implementation\n    const checkStatus = async () => {\n      try {\n        // Simulate API call to check translation status\n        const response = await fetch(\n          `/api/translations/status?locale=${locale}`,\n        );\n        if (response.ok) {\n          const data = await response.json();\n          setStatus(data);\n        }\n      } catch (_error) {\n        // Fallback to optimistic status\n        setStatus({\n          isComplete: true,\n          missingKeys: [],\n          coverage: PERCENTAGE_FULL,\n        });\n      }\n    };\n\n    checkStatus();\n  }, [locale]);\n\n  return status;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/i18n/translation-preloader.tsx","messages":[{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":56,"column":9,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":93,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3863,3866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3863,3866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3898,3901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3898,3901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":224,"column":10,"nodeType":"MemberExpression","endLine":224,"endColumn":32}],"suppressedMessages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":75,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":81,"endColumn":15,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1790,2532],"text":"{ const handleFirstInteraction = async () => {\n              await preloadTranslations(targetLocales);\n              // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n              document.removeEventListener('click', handleFirstInteraction);\n              document.removeEventListener('keydown', handleFirstInteraction);\n              document.removeEventListener('scroll', handleFirstInteraction);\n            };\n\n            document.addEventListener('click', handleFirstInteraction, {\n              once: true,\n            });\n            document.addEventListener('keydown', handleFirstInteraction, {\n              once: true,\n            });\n            document.addEventListener('scroll', handleFirstInteraction, {\n              once: true,\n            });\n            break; }"},"desc":"Add {} brackets around the case block."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/* eslint-disable no-case-declarations */\nimport { ANGLE_90_DEG, COUNT_FIVE, HTTP_OK, MINUTE_MS, PERCENTAGE_FULL } from '@/constants';\nimport { MAGIC_2000 } from \"@/constants/count\";\nimport {\n    I18nPerformanceMonitor,\n    preloadTranslations,\n} from '@/lib/i18n-performance';\nimport { logger } from '@/lib/logger';\nimport { useLocale } from 'next-intl';\nimport { useEffect } from 'react';\n\ninterface TranslationPreloaderProps {\n  /**\n   * è¦é¢„åŠ è½½çš„è¯­è¨€åˆ—è¡¨\n   * é»˜è®¤é¢„åŠ è½½å½“å‰è¯­è¨€å’Œè‹±æ–‡ä½œä¸ºå›é€€\n   */\n  locales?: string[];\n\n  /**\n   * æ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘æ§\n   */\n  enableMonitoring?: boolean;\n\n  /**\n   * é¢„åŠ è½½ç­–ç•¥\n   * - 'immediate': ç«‹å³é¢„åŠ è½½\n   * - 'idle': åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é¢„åŠ è½½\n   * - 'interaction': åœ¨ç”¨æˆ·äº¤äº’æ—¶é¢„åŠ è½½\n   */\n  strategy?: 'immediate' | 'idle' | 'interaction';\n\n  /**\n   * é¢„åŠ è½½ä¼˜å…ˆçº§\n   */\n  priority?: 'high' | 'normal' | 'low';\n}\n\nexport function TranslationPreloader({\n  locales,\n  enableMonitoring = true,\n  strategy = 'idle',\n  priority: _priority = 'normal',\n}: TranslationPreloaderProps) {\n  const currentLocale = useLocale();\n\n  useEffect(() => {\n    // ç¡®å®šè¦é¢„åŠ è½½çš„è¯­è¨€\n    const targetLocales = locales || [currentLocale, 'en'];\n\n    const preloadWithStrategy = async () => {\n      const startTime = performance.now();\n\n      try {\n        switch (strategy) {\n          case 'immediate':\n            await preloadTranslations(targetLocales);\n            break;\n\n          case 'idle':\n            if ('requestIdleCallback' in window) {\n              requestIdleCallback(async () => {\n                await preloadTranslations(targetLocales);\n              });\n            } else {\n              // å›é€€åˆ°setTimeout\n              setTimeout(async () => {\n                await preloadTranslations(targetLocales);\n              }, PERCENTAGE_FULL);\n            }\n            break;\n\n          case 'interaction':\n            const handleFirstInteraction = async () => {\n              await preloadTranslations(targetLocales);\n              // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n              document.removeEventListener('click', handleFirstInteraction);\n              document.removeEventListener('keydown', handleFirstInteraction);\n              document.removeEventListener('scroll', handleFirstInteraction);\n            };\n\n            document.addEventListener('click', handleFirstInteraction, {\n              once: true,\n            });\n            document.addEventListener('keydown', handleFirstInteraction, {\n              once: true,\n            });\n            document.addEventListener('scroll', handleFirstInteraction, {\n              once: true,\n            });\n            break;\n        }\n\n        // è®°å½•æ€§èƒ½æŒ‡æ ‡\n        if (enableMonitoring) {\n          const loadTime = performance.now() - startTime;\n          I18nPerformanceMonitor.recordLoadTime(loadTime);\n        }\n      } catch (error) {\n        logger.error('Translation preload failed', { error: error as Error });\n        if (enableMonitoring) {\n          I18nPerformanceMonitor.recordError();\n        }\n      }\n    };\n\n    preloadWithStrategy();\n  }, [currentLocale, locales, strategy, enableMonitoring]);\n\n  // è¿™ä¸ªç»„ä»¶ä¸æ¸²æŸ“ä»»ä½•å†…å®¹\n  return null;\n}\n\n/**\n * å…³é”®è·¯å¾„ç¿»è¯‘é¢„åŠ è½½å™¨\n * ä¸“é—¨ç”¨äºé¢„åŠ è½½å…³é”®é¡µé¢çš„ç¿»è¯‘å†…å®¹\n */\nexport function CriticalTranslationPreloader() {\n  const currentLocale = useLocale();\n\n  useEffect(() => {\n    // é¢„åŠ è½½å…³é”®ç¿»è¯‘å‘½åç©ºé—´\n    const preloadCriticalTranslations = async () => {\n      const startTime = performance.now();\n\n      try {\n        // é¢„åŠ è½½å½“å‰è¯­è¨€å’Œè‹±æ–‡å›é€€\n        await preloadTranslations([currentLocale, 'en']);\n\n        const loadTime = performance.now() - startTime;\n        I18nPerformanceMonitor.recordLoadTime(loadTime);\n\n        // è®°å½•ç¼“å­˜å‘½ä¸­\n        I18nPerformanceMonitor.recordCacheHit();\n      } catch (error) {\n        logger.error('Critical translation preload failed', {\n          error: error as Error,\n        });\n        I18nPerformanceMonitor.recordError();\n      }\n    };\n\n    // ä½¿ç”¨é«˜ä¼˜å…ˆçº§é¢„åŠ è½½\n    if ('scheduler' in window && 'postTask' in (window as any).scheduler) {\n      (window as any).scheduler.postTask(preloadCriticalTranslations, {\n        priority: 'user-blocking',\n      });\n    } else {\n      // å›é€€åˆ°ç«‹å³æ‰§è¡Œ\n      preloadCriticalTranslations();\n    }\n  }, [currentLocale]);\n\n  return null;\n}\n\n/**\n * æ™ºèƒ½é¢„åŠ è½½é€»è¾‘\n */\nasync function performSmartPreload(currentLocale: string) {\n  // è·å–å½“å‰é¡µé¢è·¯å¾„\n  const currentPath = window.location.pathname;\n\n  // åŸºäºè·¯å¾„é¢„æµ‹éœ€è¦çš„ç¿»è¯‘\n  const predictedNamespaces = getPredictedNamespaces(currentPath);\n\n  // é¢„åŠ è½½é¢„æµ‹çš„ç¿»è¯‘å†…å®¹\n  for (const namespace of predictedNamespaces) {\n    try {\n      await preloadTranslations([currentLocale]);\n    } catch (error) {\n      logger.warn(`Failed to preload namespace ${namespace}`, {\n        error: error as Error,\n      });\n    }\n  }\n}\n\n/**\n * è°ƒåº¦æ™ºèƒ½é¢„åŠ è½½\n */\nfunction scheduleSmartPreload(preloadFn: () => Promise<void>) {\n  // åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œæ™ºèƒ½é¢„åŠ è½½\n  if ('requestIdleCallback' in window) {\n    requestIdleCallback(preloadFn, { timeout: MAGIC_2000 });\n  } else {\n    setTimeout(preloadFn, 500);\n  }\n}\n\n/**\n * æ™ºèƒ½ç¿»è¯‘é¢„åŠ è½½å™¨\n * åŸºäºç”¨æˆ·è¡Œä¸ºå’Œé¡µé¢è·¯ç”±æ™ºèƒ½é¢„åŠ è½½ç¿»è¯‘\n */\nexport function SmartTranslationPreloader() {\n  const currentLocale = useLocale();\n\n  useEffect(() => {\n    const smartPreload = () => performSmartPreload(currentLocale);\n    scheduleSmartPreload(smartPreload);\n  }, [currentLocale]);\n\n  return null;\n}\n\n/**\n * æ ¹æ®é¡µé¢è·¯å¾„é¢„æµ‹éœ€è¦çš„ç¿»è¯‘å‘½åç©ºé—´\n */\nfunction getPredictedNamespaces(path: string): string[] {\n  const namespaceMap: Record<string, string[]> = {\n    '/': ['home', 'hero', 'features'],\n    '/about': ['about', 'team', 'company'],\n    '/guanyu': ['about', 'team', 'company'],\n    '/contact': ['contact', 'form', 'support'],\n    '/lianxi': ['contact', 'form', 'support'],\n    '/blog': ['blog', 'articles', 'content'],\n    '/products': ['products', 'catalog', 'pricing'],\n  };\n\n  // è·å–åŸºç¡€è·¯å¾„ï¼ˆç§»é™¤è¯­è¨€å‰ç¼€ï¼‰\n  const basePath = path.replace(/^\\/[a-z]{2}(?=\\/|$)/, '') || '/';\n\n  return namespaceMap[basePath] || ['common'];\n}\n\n/**\n * æ€§èƒ½ç›‘æ§é¢„åŠ è½½å™¨\n * ä¸“é—¨ç”¨äºç›‘æ§ç¿»è¯‘æ€§èƒ½å¹¶ä¼˜åŒ–é¢„åŠ è½½ç­–ç•¥\n */\nexport function PerformanceMonitoringPreloader() {\n  useEffect(() => {\n    // å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜\n    const cleanupInterval = setInterval(() => {\n      // è¿™é‡Œå¯ä»¥æ·»åŠ ç¼“å­˜æ¸…ç†é€»è¾‘\n\n      logger.debug('Translation cache cleanup performed');\n    }, COUNT_FIVE * MINUTE_MS); // æ¯5åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡\n\n    // å®šæœŸæŠ¥å‘Šæ€§èƒ½æŒ‡æ ‡\n    const reportingInterval = setInterval(() => {\n      const metrics = I18nPerformanceMonitor.getMetrics();\n\n      // å¦‚æœæ€§èƒ½æŒ‡æ ‡å¼‚å¸¸ï¼Œè®°å½•è­¦å‘Š\n      if (metrics.averageLoadTime > HTTP_OK) {\n        logger.warn('Translation load time exceeds target', { metrics });\n      }\n\n      if (metrics.cacheHitRate < ANGLE_90_DEG) {\n        logger.warn('Translation cache hit rate below target', { metrics });\n      }\n    }, MINUTE_MS); // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡\n\n    return () => {\n      clearInterval(cleanupInterval);\n      clearInterval(reportingInterval);\n    };\n  }, []);\n\n  return null;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/language-toggle.tsx","messages":[{"ruleId":"max-nested-callbacks","severity":2,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":36,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":36,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Button } from '@/components/ui/button';\nimport { ANIMATION_DURATION_VERY_SLOW  } from '@/constants';\n\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { MAGIC_2000 } from \"@/constants/count\";\nimport { Link, usePathname } from '@/i18n/routing';\nimport { Check, Languages, Loader2 } from 'lucide-react';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { memo, useState, useTransition } from 'react';\n\nconst TRANSITION_TIMEOUT = ANIMATION_DURATION_VERY_SLOW; // 1 second timeout for language switch\n\n// Custom hook for language switching logic\nconst useLanguageSwitch = () => {\n  const [switchingTo, setSwitchingTo] = useState<string | null>(null);\n  const [switchSuccess, setSwitchSuccess] = useState(false);\n  const [isPending, startTransition] = useTransition();\n\n  const handleLanguageSwitch = (newLocale: string) => {\n    setSwitchingTo(newLocale);\n    setSwitchSuccess(false);\n\n    startTransition(() => {\n      // The transition will be handled by the Link component\n      setTimeout(() => {\n        setSwitchingTo(null);\n        setSwitchSuccess(true);\n        // Hide success indicator after 2 seconds\n        setTimeout(() => setSwitchSuccess(false), MAGIC_2000);\n      }, TRANSITION_TIMEOUT);\n    });\n  };\n\n  return {\n    switchingTo,\n    switchSuccess,\n    isPending,\n    handleLanguageSwitch,\n  };\n};\n\nexport const LanguageToggle = memo(() => {\n  const t = useTranslations('language');\n  const locale = useLocale();\n  const pathname = usePathname();\n  const { switchingTo, isPending, handleLanguageSwitch } = useLanguageSwitch();\n\n  return (\n    <DropdownMenu data-testid='language-dropdown-menu'>\n      <DropdownMenuTrigger\n        asChild\n        data-testid='language-dropdown-trigger'\n      >\n        <Button\n          variant='outline'\n          size='icon'\n          disabled={isPending}\n          data-testid='language-toggle-button'\n        >\n          {isPending ? (\n            <Loader2 className='h-[1.2rem] w-[1.2rem] animate-spin' />\n          ) : (\n            <Languages\n              className='h-[1.2rem] w-[1.2rem]'\n              data-testid='languages-icon'\n            />\n          )}\n          <span className='sr-only'>{t('toggle')}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        align='end'\n        data-testid='language-dropdown-content'\n      >\n        <DropdownMenuItem\n          asChild\n          data-testid='language-dropdown-item'\n        >\n          <Link\n            href={pathname}\n            locale='en'\n            className='flex items-center'\n            onClick={() => handleLanguageSwitch('en')}\n            data-testid='language-link-en'\n            data-locale='en'\n            role='menuitem'\n          >\n            <span className='bg-muted mr-2 rounded px-1.5 py-0.5 font-mono text-xs'>\n              EN\n            </span>\n            <span>{t('english')}</span>\n            {switchingTo === 'en' && (\n              <Loader2 className='ml-auto h-4 w-4 animate-spin' />\n            )}\n            {locale === 'en' && switchingTo !== 'en' && (\n              <Check\n                className='ml-auto h-4 w-4 text-green-500'\n                data-testid='check-icon'\n              />\n            )}\n          </Link>\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          asChild\n          data-testid='language-dropdown-item'\n        >\n          <Link\n            href={pathname}\n            locale='zh'\n            className='flex items-center'\n            onClick={() => handleLanguageSwitch('zh')}\n            data-testid='language-link-zh'\n            data-locale='zh'\n            role='menuitem'\n          >\n            <span className='bg-muted mr-2 rounded px-1.5 py-0.5 font-mono text-xs'>\n              ZH\n            </span>\n            <span>{t('chinese')}</span>\n            {switchingTo === 'zh' && (\n              <Loader2 className='ml-auto h-4 w-4 animate-spin' />\n            )}\n            {locale === 'zh' && switchingTo !== 'zh' && (\n              <Check\n                className='ml-auto h-4 w-4 text-green-500'\n                data-testid='check-icon'\n              />\n            )}\n          </Link>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n});\n\nLanguageToggle.displayName = 'LanguageToggle';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/header.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/language-switcher/setup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/main-navigation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-basic-core.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":53,"column":16,"nodeType":"MemberExpression","endLine":53,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-basic.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":57,"column":16,"nodeType":"MemberExpression","endLine":57,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-edge-cases-advanced.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-edge-cases-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-items-accessibility-core.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":48,"column":16,"nodeType":"MemberExpression","endLine":48,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-items-accessibility.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":47,"column":16,"nodeType":"MemberExpression","endLine":47,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":199,"column":18,"nodeType":"MemberExpression","endLine":199,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":364,"column":18,"nodeType":"MemberExpression","endLine":364,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-responsive-basic.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":57,"column":16,"nodeType":"MemberExpression","endLine":57,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-responsive-edge-cases.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":59,"column":16,"nodeType":"MemberExpression","endLine":59,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation-responsive.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":59,"column":16,"nodeType":"MemberExpression","endLine":59,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/mobile-navigation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/__tests__/test-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/language-switcher.tsx","messages":[{"ruleId":"max-nested-callbacks","severity":2,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":97,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":99,"endColumn":10}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Language Switcher Component\n *\n * Enhanced language switching component for the navigation bar.\n * Features smooth transitions, loading states, and accessibility.\n */\n'use client';\n\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { LOCALES_CONFIG } from '@/config/paths';\nimport { UI_TIMINGS } from '@/constants/i18n-constants';\nimport { COUNT_PAIR } from \"@/constants\";\nimport { Link, usePathname } from '@/i18n/routing';\nimport { NAVIGATION_ARIA } from '@/lib/navigation';\nimport { cn } from '@/lib/utils';\nimport { Check, Globe, Languages, Loader2 } from 'lucide-react';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { memo, useEffect, useRef, useState, useTransition } from 'react';\n\n/**\n * Language Switcher Component\n *\n * Enhanced language switching component for the navigation bar.\n * Features smooth transitions, loading states, and accessibility.\n */\n\n// Use centralized timing constants to avoid magic numbers\nconst TRANSITION_DIVISOR = COUNT_PAIR;\nconst TRANSITION_TIMEOUT =\n  UI_TIMINGS.LANGUAGE_SWITCH_ANIMATION / TRANSITION_DIVISOR; // 1 second for transition\nconst SUCCESS_INDICATOR_TIMEOUT = UI_TIMINGS.SUCCESS_DISPLAY_DURATION; // 2 seconds for success indicator\n\n// Language configuration - using centralized config to avoid hardcoding\nconst LANGUAGES = [\n  {\n    code: 'en' as const,\n    name: 'English',\n    nativeName: LOCALES_CONFIG.displayNames.en,\n    flag: 'ğŸ‡ºğŸ‡¸',\n  },\n  {\n    code: 'zh' as const,\n    name: 'Chinese',\n    nativeName: LOCALES_CONFIG.displayNames.zh,\n    flag: 'ğŸ‡¨ğŸ‡³',\n  },\n] as const;\n\n// Custom hook for language switching logic\nconst useLanguageSwitch = () => {\n  const [switchingTo, setSwitchingTo] = useState<string | null>(null);\n  const [switchSuccess, setSwitchSuccess] = useState(false);\n  const [isPending, startTransition] = useTransition();\n  const timersRef = useRef<{\n    transition?: ReturnType<typeof setTimeout>;\n    success?: ReturnType<typeof setTimeout>;\n  }>({});\n\n  // Cleanup timers on unmount\n  useEffect(() => {\n    const timers = timersRef.current;\n    return () => {\n      if (timers.transition) {\n        clearTimeout(timers.transition);\n      }\n      if (timers.success) {\n        clearTimeout(timers.success);\n      }\n    };\n  }, []);\n\n  const handleLanguageSwitch = (newLocale: string) => {\n    // Clear any existing timers\n    if (timersRef.current.transition) {\n      clearTimeout(timersRef.current.transition);\n    }\n    if (timersRef.current.success) {\n      clearTimeout(timersRef.current.success);\n    }\n\n    setSwitchingTo(newLocale);\n    setSwitchSuccess(false);\n\n    startTransition(() => {\n      // The transition will be handled by the Link component\n      timersRef.current.transition = setTimeout(() => {\n        setSwitchingTo(null);\n        setSwitchSuccess(true);\n\n        // Hide success indicator after timeout\n        timersRef.current.success = setTimeout(() => {\n          setSwitchSuccess(false);\n        }, SUCCESS_INDICATOR_TIMEOUT);\n      }, TRANSITION_TIMEOUT);\n    });\n  };\n\n  return {\n    switchingTo,\n    switchSuccess,\n    isPending,\n    handleLanguageSwitch,\n  };\n};\n\ninterface LanguageSwitcherProps {\n  className?: string;\n  variant?: 'default' | 'compact';\n  showLabel?: boolean;\n}\n\nexport const LanguageSwitcher = memo(\n  ({\n    className,\n    variant = 'default',\n    showLabel = false,\n  }: LanguageSwitcherProps) => {\n    const t = useTranslations('language');\n    const locale = useLocale();\n    const pathname = usePathname();\n    const { switchingTo, isPending, handleLanguageSwitch } =\n      useLanguageSwitch();\n\n    const currentLanguage = LANGUAGES.find((lang) => lang.code === locale);\n    const isCompact = variant === 'compact';\n\n    return (\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant='ghost'\n            size={isCompact ? 'sm' : 'icon'}\n            disabled={isPending}\n            className={cn(\n              'transition-colors duration-200',\n              isCompact && 'gap-1 px-2',\n              className,\n            )}\n            aria-label={NAVIGATION_ARIA.languageSelector}\n          >\n            {isPending ? (\n              <Loader2 className='h-4 w-4 animate-spin' />\n            ) : isCompact ? (\n              <Globe className='h-4 w-4' />\n            ) : (\n              <Languages className='h-4 w-4' />\n            )}\n\n            {isCompact && currentLanguage && (\n              <span className='text-xs font-medium'>\n                {currentLanguage.code.toUpperCase()}\n              </span>\n            )}\n\n            {showLabel && <span className='ml-1 text-sm'>{t('toggle')}</span>}\n\n            <span className='sr-only'>{t('toggle')}</span>\n          </Button>\n        </DropdownMenuTrigger>\n\n        <DropdownMenuContent\n          align='end'\n          className='w-48'\n          aria-label={t('selectLanguage')}\n        >\n          {LANGUAGES.map((language) => {\n            const isActive = locale === language.code;\n            const isSwitching = switchingTo === language.code;\n\n            return (\n              <DropdownMenuItem\n                key={language.code}\n                asChild\n              >\n                <Link\n                  href={pathname}\n                  locale={language.code as 'en' | 'zh'}\n                  className={cn(\n                    'flex w-full cursor-pointer items-center',\n                    isActive && 'bg-accent',\n                  )}\n                  onClick={() => handleLanguageSwitch(language.code)}\n                >\n                  <span\n                    className='mr-2 text-base'\n                    role='img'\n                    aria-hidden='true'\n                  >\n                    {language.flag}\n                  </span>\n\n                  <div className='flex flex-1 flex-col'>\n                    <span className='font-medium'>{language.nativeName}</span>\n                    <span className='text-muted-foreground text-xs'>\n                      {language.name}\n                    </span>\n                  </div>\n\n                  {isSwitching && (\n                    <Loader2 className='ml-auto h-4 w-4 animate-spin' />\n                  )}\n\n                  {isActive && !isSwitching && (\n                    <Check className='ml-auto h-4 w-4 text-green-500' />\n                  )}\n                </Link>\n              </DropdownMenuItem>\n            );\n          })}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    );\n  },\n);\n\nLanguageSwitcher.displayName = 'LanguageSwitcher';\n\n// Compact version for mobile or space-constrained areas\nexport const LanguageSwitcherCompact = memo(\n  ({ className }: { className?: string }) => {\n    const props = {\n      variant: 'compact' as const,\n      ...(className && { className }),\n    };\n\n    return <LanguageSwitcher {...props} />;\n  },\n);\n\nLanguageSwitcherCompact.displayName = 'LanguageSwitcherCompact';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/logo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/main-navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/layout/mobile-navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/loading-spinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/monitoring/enterprise-analytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1684,1687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1684,1687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"func-names","severity":1,"message":"Unexpected unnamed function.","line":107,"column":23,"nodeType":"FunctionExpression","messageId":"unnamed","endLine":107,"endColumn":32},{"ruleId":"func-names","severity":1,"message":"Unexpected unnamed function.","line":112,"column":26,"nodeType":"FunctionExpression","messageId":"unnamed","endLine":112,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2953,2956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2953,2956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":144,"column":26,"nodeType":"MemberExpression","endLine":146,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4114,4117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4114,4117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5380,5383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5380,5383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5587,5590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5587,5590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ZERO } from \"@/constants\";\nimport { logger } from '@/lib/logger';\nimport { Analytics } from '@vercel/analytics/react';\nimport { useLocale } from 'next-intl';\nimport React, { useEffect } from 'react';\n\n/**\n * ä½¿ç”¨å…¨å±€ loggerï¼ˆå¼€å‘ç¯å¢ƒè¾“å‡ºï¼Œç”Ÿäº§ç¯å¢ƒé™é»˜ï¼‰\n */\n\ninterface AnalyticsConfig {\n  enableWebVitals: boolean;\n  enableI18nTracking: boolean;\n  enablePerformanceMonitoring: boolean;\n}\n\nconst defaultConfig: AnalyticsConfig = {\n  enableWebVitals: true,\n  enableI18nTracking: true,\n  enablePerformanceMonitoring: true,\n};\n\nexport function EnterpriseAnalytics({\n  children,\n  config = defaultConfig,\n}: {\n  children: React.ReactNode;\n  config?: AnalyticsConfig;\n}) {\n  const locale = useLocale();\n\n  useEffect(() => {\n    // åˆå§‹åŒ–ä¼ä¸šçº§ç›‘æ§\n    if (typeof window === 'undefined') return;\n\n    // Web Vitalsç›‘æ§\n    if (config.enableWebVitals) {\n      initWebVitals(locale);\n    }\n\n    // i18næ€§èƒ½ç›‘æ§\n    if (config.enableI18nTracking) {\n      initI18nTracking(locale);\n    }\n\n    // æ€§èƒ½ç›‘æ§\n    if (config.enablePerformanceMonitoring) {\n      initPerformanceMonitoring(locale);\n    }\n  }, [locale, config]);\n\n  return (\n    <>\n      {children}\n      <Analytics />\n    </>\n  );\n}\n\nfunction initWebVitals(locale: string): void {\n  // åŠ¨æ€å¯¼å…¥web-vitals\n  import('web-vitals')\n    .then(({ onCLS, onFCP, onLCP, onTTFB, onINP }) => {\n      const reportVital = (metric: {\n        name: string;\n        value: number;\n        rating: string;\n      }) => {\n        // å¼€å‘ç¯å¢ƒæ—¥å¿—\n        logger.warn(\n          `[Web Vitals] ${metric.name}: ${metric.value} (${metric.rating}) - Locale: ${locale}`,\n        );\n\n        // å‘é€åˆ°Vercel Analytics\n        if ('va' in window) {\n          try {\n            (window as any).va('track', 'Web Vital', {\n              metric_name: metric.name,\n              metric_value: metric.value,\n              metric_rating: metric.rating,\n              locale,\n            });\n          } catch (error) {\n            logger.error('Failed to send to Vercel Analytics:', error);\n          }\n        }\n      };\n\n      onCLS(reportVital);\n      onFCP(reportVital);\n      onLCP(reportVital);\n      onTTFB(reportVital);\n      onINP(reportVital);\n    })\n    .catch((error) => {\n      logger.error('Failed to load web-vitals:', error);\n    });\n}\n\nfunction initI18nTracking(locale: string): void {\n  // ç›‘æ§è¯­è¨€åˆ‡æ¢\n  const originalPushState = history.pushState;\n  const originalReplaceState = history.replaceState;\n\n  history.pushState = function (...args) {\n    trackNavigation(locale);\n    return originalPushState.apply(this, args);\n  };\n\n  history.replaceState = function (...args) {\n    trackNavigation(locale);\n    return originalReplaceState.apply(this, args);\n  };\n\n  window.addEventListener('popstate', () => {\n    trackNavigation(locale);\n  });\n}\n\nfunction trackNavigation(locale: string): void {\n  logger.warn(\n    `[I18n Navigation] Locale: ${locale}, URL: ${window.location.href}`,\n  );\n\n  // å‘é€å¯¼èˆªäº‹ä»¶\n  if ('va' in window) {\n    try {\n      (window as any).va('track', 'Navigation', {\n        locale,\n        url: window.location.href,\n      });\n    } catch (error) {\n      logger.error('Failed to send navigation event:', error);\n    }\n  }\n}\n\nfunction initPerformanceMonitoring(locale: string): void {\n  // ç›‘æ§é¡µé¢åŠ è½½æ€§èƒ½\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      const navigation = performance.getEntriesByType(\n        'navigation',\n      )[ZERO] as PerformanceNavigationTiming;\n\n      if (navigation) {\n        const metrics = {\n          dns: navigation.domainLookupEnd - navigation.domainLookupStart,\n          tcp: navigation.connectEnd - navigation.connectStart,\n          request: navigation.responseStart - navigation.requestStart,\n          response: navigation.responseEnd - navigation.responseStart,\n          dom: navigation.domContentLoadedEventEnd - navigation.responseEnd,\n          load: navigation.loadEventEnd - navigation.loadEventStart,\n          total: navigation.loadEventEnd - navigation.fetchStart,\n        };\n\n        logger.warn(`[Performance] Locale: ${locale}`, metrics);\n\n        // å‘é€æ€§èƒ½æŒ‡æ ‡\n        if ('va' in window) {\n          try {\n            (window as any).va('track', 'Performance', {\n              ...metrics,\n              locale,\n            });\n          } catch (error) {\n            logger.error('Failed to send performance metrics:', error);\n          }\n        }\n      }\n    }, ZERO);\n  });\n\n  // ç›‘æ§èµ„æºåŠ è½½\n  const observer = new PerformanceObserver((list) => {\n    const entries = list.getEntries();\n\n    for (const entry of entries) {\n      if (entry.entryType === 'resource') {\n        const resourceEntry = entry as PerformanceResourceTiming;\n\n        // ç‰¹åˆ«å…³æ³¨i18nç›¸å…³èµ„æº\n        if (\n          resourceEntry.name.includes('/messages/') ||\n          resourceEntry.name.includes('locale') ||\n          resourceEntry.name.includes('i18n')\n        ) {\n          logger.warn(\n            `[I18n Resource] ${resourceEntry.name}: ${resourceEntry.duration}ms (${resourceEntry.transferSize} bytes) - Locale: ${locale}`,\n          );\n        }\n      }\n    }\n  });\n\n  observer.observe({ entryTypes: ['resource'] });\n}\n\n// å¯¼å‡ºç”¨äºæ‰‹åŠ¨è¿½è¸ªçš„å‡½æ•°\nexport const enterpriseAnalytics = {\n  trackEvent: (eventName: string, properties: Record<string, unknown> = {}) => {\n    if (typeof window === 'undefined') return;\n\n    logger.warn(`[Analytics Event] ${eventName}:`, properties);\n\n    if ('va' in window) {\n      try {\n        (window as any).va('track', eventName, properties);\n      } catch (error) {\n        logger.error('Failed to send to Vercel Analytics:', error);\n      }\n    }\n\n    if ('gtag' in window) {\n      try {\n        (window as any).gtag('event', eventName, properties);\n      } catch (error) {\n        logger.error('Failed to send to Google Analytics:', error);\n      }\n    }\n  },\n\n  trackError: (error: Error, context: Record<string, unknown> = {}) => {\n    if (typeof window === 'undefined') return;\n\n    logger.error('[Tracked Error]', error, context);\n\n    enterpriseAnalytics.trackEvent('Error', {\n      error_message: error.message,\n      error_name: error.name,\n      error_stack: error.stack,\n      ...context,\n    });\n  },\n\n  trackI18nEvent: (eventType: string, data: Record<string, unknown> = {}) => {\n    if (typeof window === 'undefined') return;\n\n    logger.warn(`[I18n Event] ${eventType}:`, data);\n\n    enterpriseAnalytics.trackEvent(`I18n ${eventType}`, data);\n  },\n\n  trackLocaleChange: (fromLocale: string, toLocale: string) => {\n    enterpriseAnalytics.trackI18nEvent('Locale Change', {\n      from_locale: fromLocale,\n      to_locale: toLocale,\n      source: 'user_action',\n    });\n  },\n\n  trackPerformance: (metric: string, value: number, locale: string) => {\n    enterpriseAnalytics.trackEvent('Performance Metric', {\n      metric,\n      value,\n      locale,\n    });\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/performance/web-vitals-indicator.tsx","messages":[{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'registerTool'.","line":105,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":105,"endColumn":42},{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'unregisterTool'.","line":106,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":106,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport {\n  webVitalsMonitor,\n  type WebVitalsMetrics,\n} from '@/lib/web-vitals-monitor';\nimport {\n  MONITORING_INTERVALS,\n  WEB_VITALS_THRESHOLDS,\n} from '@/constants/performance-constants';\n\n// å·¥å…·å‡½æ•°ï¼šè·å–æŒ‡æ ‡é¢œè‰²\nconst getMetricColor = (value: number, good: number, poor: number): string => {\n  if (value <= good) return 'text-green-600';\n  if (value <= poor) return 'text-yellow-600';\n  return 'text-red-600';\n};\n\n// å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æŒ‡æ ‡å€¼\nconst formatMetric = (value: number | undefined, unit: string): string => {\n  if (value === undefined) return 'N/A';\n  return `${Math.round(value)}${unit}`;\n};\n\n// æŒ‡æ ‡è¡Œç»„ä»¶\ninterface MetricRowProps {\n  label: string;\n  value: number | undefined;\n  unit: string;\n  good: number;\n  poor: number;\n}\n\nfunction MetricRow({ label, value, unit, good, poor }: MetricRowProps) {\n  if (value === undefined) return null;\n\n  return (\n    <div className='flex justify-between gap-4'>\n      <span>{label}:</span>\n      <span className={getMetricColor(value, good, poor)}>\n        {formatMetric(value, unit)}\n      </span>\n    </div>\n  );\n}\n\n// æ€§èƒ½ç›‘æ§é’©å­\nfunction useWebVitalsMonitoring() {\n  const [metrics, setMetrics] = useState<WebVitalsMetrics | null>(null);\n  const [isVisible] = useState(() => process.env.NODE_ENV === 'development');\n\n  useEffect(() => {\n    // å®šæœŸæ›´æ–°æŒ‡æ ‡ï¼ˆæ¯3ç§’ï¼‰\n    const updateInterval = setInterval(() => {\n      const summary = webVitalsMonitor.getPerformanceSummary();\n      setMetrics(summary.metrics);\n    }, MONITORING_INTERVALS.METRICS_UPDATE);\n\n    // å®šæœŸå‘é€æ€§èƒ½æŠ¥å‘Šï¼ˆæ¯5åˆ†é’Ÿï¼‰\n    const reportInterval = setInterval(() => {\n      webVitalsMonitor.sendReport();\n    }, MONITORING_INTERVALS.REPORT_SEND);\n\n    // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶å‘é€æŠ¥å‘Š\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') {\n        webVitalsMonitor.sendReport();\n      }\n    };\n\n    // é¡µé¢å¸è½½å‰å‘é€æœ€ç»ˆæŠ¥å‘Š\n    const handleBeforeUnload = () => {\n      webVitalsMonitor.sendReport();\n    };\n\n    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    // ç»„ä»¶æŒ‚è½½æ—¶å‘é€åˆå§‹æŠ¥å‘Š\n    webVitalsMonitor.sendReport();\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      clearInterval(updateInterval);\n      clearInterval(reportInterval);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      webVitalsMonitor.sendReport();\n    };\n  }, []);\n\n  return { metrics, isVisible };\n}\n\n/**\n * Web Vitals æ€§èƒ½æŒ‡ç¤ºå™¨ç»„ä»¶\n *\n * åŸºäºç°æœ‰æ€§èƒ½ç›‘æ§ç»„ä»¶æ¨¡å¼ï¼Œåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤ºæ€§èƒ½æŒ‡æ ‡ï¼Œ\n * ç”Ÿäº§ç¯å¢ƒé™é»˜æ”¶é›†æ•°æ®å¹¶å®šæœŸå‘é€æŠ¥å‘Šã€‚\n */\nexport function WebVitalsIndicator() {\n  const { registerTool, unregisterTool, getClasses } = {\n    registerTool: (_toolId: string) => {},\n    unregisterTool: (_toolId: string) => {},\n    getClasses: () => '',\n  };\n  const { metrics, isVisible } = useWebVitalsMonitoring();\n\n  // æ³¨å†Œå·¥å…·åˆ°å¸ƒå±€ç®¡ç†å™¨\n  useEffect(() => {\n    if (isVisible) {\n      registerTool('webVitalsIndicator');\n      return () => unregisterTool('webVitalsIndicator');\n    }\n    return undefined; // æ˜ç¡®è¿”å› undefined å½“ä¸éœ€è¦æ¸…ç†æ—¶\n  }, [isVisible, registerTool, unregisterTool]);\n\n  // ç”Ÿäº§ç¯å¢ƒä¸æ¸²æŸ“ä»»ä½•UI\n  if (!isVisible || !metrics) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`${getClasses()} rounded-lg bg-black/80 p-3 text-xs text-white shadow-lg backdrop-blur-sm`}\n    >\n      <div className='mb-2 font-semibold'>ğŸš€ Web Vitals</div>\n      <div className='space-y-1'>\n        <MetricRow\n          label='CLS'\n          value={metrics.cls}\n          unit=''\n          good={WEB_VITALS_THRESHOLDS.CLS.GOOD}\n          poor={WEB_VITALS_THRESHOLDS.CLS.POOR}\n        />\n        <MetricRow\n          label='FID'\n          value={metrics.fid}\n          unit='ms'\n          good={WEB_VITALS_THRESHOLDS.FID.GOOD}\n          poor={WEB_VITALS_THRESHOLDS.FID.POOR}\n        />\n        <MetricRow\n          label='LCP'\n          value={metrics.lcp}\n          unit='ms'\n          good={WEB_VITALS_THRESHOLDS.LCP.GOOD}\n          poor={WEB_VITALS_THRESHOLDS.LCP.POOR}\n        />\n        <MetricRow\n          label='FCP'\n          value={metrics.fcp}\n          unit='ms'\n          good={WEB_VITALS_THRESHOLDS.FCP.GOOD}\n          poor={WEB_VITALS_THRESHOLDS.FCP.POOR}\n        />\n        <MetricRow\n          label='TTFB'\n          value={metrics.ttfb}\n          unit='ms'\n          good={WEB_VITALS_THRESHOLDS.TTFB.GOOD}\n          poor={WEB_VITALS_THRESHOLDS.TTFB.POOR}\n        />\n      </div>\n\n      {/* æ€§èƒ½è¯„åˆ† */}\n      <div className='mt-2 border-t border-white/20 pt-2'>\n        <div className='flex justify-between gap-4'>\n          <span>Score:</span>\n          <span className='font-semibold'>\n            {Math.round(webVitalsMonitor.getPerformanceSummary().score)}/100\n          </span>\n        </div>\n      </div>\n\n      {/* è¯´æ˜æ–‡å­— */}\n      <div className='mt-2 text-[10px] text-white/60'>\n        Dev only â€¢ Updates every 3s\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/performance/web-vitals-monitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/responsive-layout.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'react' import is duplicated.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":4,"endColumn":45},{"ruleId":"max-params","severity":2,"message":"Function 'generateResponsiveClasses' has too many parameters (4). Maximum allowed is 3.","line":78,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":78,"endColumn":35}],"suppressedMessages":[{"ruleId":"react-you-might-not-need-an-effect/no-initialize-state","severity":2,"message":"Avoid initializing state in an effect. Instead, pass \"mounted\"'s initial value to its `useState`.","line":13,"column":5,"nodeType":"CallExpression","messageId":"avoidInitializingState","endLine":13,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport type { ReactNode } from 'react';\nimport { useEffect, useState } from 'react';\nimport { useBreakpoint } from '@/hooks/use-breakpoint';\n\n// è‡ªå®šä¹‰hookå¤„ç†hydration\nfunction useMounted() {\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    // eslint-disable-next-line react-you-might-not-need-an-effect/no-initialize-state\n    setMounted(true);\n  }, []);\n\n  return mounted;\n}\n\ninterface ResponsiveLayoutProps {\n  'children': ReactNode;\n  'className'?: string;\n  'mobileLayout'?: ReactNode;\n  'tabletLayout'?: ReactNode;\n  'desktopLayout'?: ReactNode;\n  // Additional props for testing and flexibility\n  'mobileNavigation'?: ReactNode;\n  'tabletSidebar'?: ReactNode;\n  'desktopSidebar'?: ReactNode;\n  'onTouchStart'?: () => void;\n  'onTouchEnd'?: () => void;\n  'onMouseEnter'?: () => void;\n  'onMouseLeave'?: () => void;\n  'onLayoutChange'?: (_layout: string) => void;\n  'role'?: string;\n  'aria-label'?: string;\n  'data-testid'?: string;\n  'tabIndex'?: number;\n}\n\n// è·å–å½“å‰å¸ƒå±€ç±»å‹çš„è¾…åŠ©å‡½æ•°\nfunction getCurrentLayoutType(\n  isMobile: boolean,\n  isTablet: boolean,\n): 'mobile' | 'tablet' | 'desktop' {\n  if (isMobile) return 'mobile';\n  if (isTablet) return 'tablet';\n  return 'desktop';\n}\n\n// å¸ƒå±€å†…å®¹é…ç½®æ¥å£\ninterface LayoutContentConfig {\n  mobileLayout?: ReactNode;\n  mobileNavigation?: ReactNode;\n  tabletLayout?: ReactNode;\n  tabletSidebar?: ReactNode;\n  desktopLayout?: ReactNode;\n  desktopSidebar?: ReactNode;\n}\n\n// è·å–ç‰¹å®šå¸ƒå±€å†…å®¹çš„è¾…åŠ©å‡½æ•°\nfunction getSpecificLayoutContent(\n  layoutType: 'mobile' | 'tablet' | 'desktop',\n  config: LayoutContentConfig,\n): ReactNode | null {\n  switch (layoutType) {\n    case 'mobile':\n      return config.mobileLayout || config.mobileNavigation || null;\n    case 'tablet':\n      return config.tabletLayout || config.tabletSidebar || null;\n    case 'desktop':\n      return config.desktopLayout || config.desktopSidebar || null;\n    default:\n      return null;\n  }\n}\n\n// ç”Ÿæˆå“åº”å¼CSSç±»åçš„è¾…åŠ©å‡½æ•°\nfunction generateResponsiveClasses(\n  className: string,\n  isMobile: boolean,\n  isTablet: boolean,\n  isDesktop: boolean,\n): string {\n  const classes = [className];\n\n  if (isMobile) classes.push('responsive-mobile');\n  if (isTablet) classes.push('responsive-tablet');\n  if (isDesktop) classes.push('responsive-desktop');\n\n  return classes.filter(Boolean).join(' ').trim();\n}\n\nexport function ResponsiveLayout({\n  children,\n  className = '',\n  mobileLayout,\n  tabletLayout,\n  desktopLayout,\n  mobileNavigation,\n  tabletSidebar,\n  desktopSidebar,\n  onTouchStart,\n  onTouchEnd,\n  onMouseEnter,\n  onMouseLeave,\n  onLayoutChange,\n  role,\n  'aria-label': ariaLabel,\n  'data-testid': dataTestId,\n  tabIndex,\n}: ResponsiveLayoutProps) {\n  const { currentBreakpoint, isBelow, isAbove } = useBreakpoint();\n\n  // ä½¿ç”¨è‡ªå®šä¹‰hookå¤„ç†hydration\n  const mounted = useMounted();\n\n  // Prevent hydration mismatch\n  if (!mounted) {\n    return <div className={className}>{children}</div>;\n  }\n\n  const isMobile = isBelow('md');\n  const isTablet = currentBreakpoint === 'md' || currentBreakpoint === 'lg';\n  const isDesktop = isAbove('lg');\n\n  const layoutType = getCurrentLayoutType(isMobile, isTablet);\n  const specificContent = getSpecificLayoutContent(layoutType, {\n    mobileLayout,\n    mobileNavigation,\n    tabletLayout,\n    tabletSidebar,\n    desktopLayout,\n    desktopSidebar,\n  });\n\n  // Use specific layouts if provided\n  if (specificContent) {\n    return <div className={className}>{specificContent}</div>;\n  }\n\n  // Notify layout change\n  if (onLayoutChange) {\n    onLayoutChange(layoutType);\n  }\n\n  // Default responsive behavior\n  const responsiveClasses = generateResponsiveClasses(\n    className,\n    isMobile,\n    isTablet,\n    isDesktop,\n  );\n\n  return (\n    <div\n      className={responsiveClasses}\n      onTouchStart={onTouchStart}\n      onTouchEnd={onTouchEnd}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      role={role}\n      aria-label={ariaLabel}\n      data-testid={dataTestId}\n      tabIndex={tabIndex}\n    >\n      {children}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/security/__tests__/turnstile.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/security/turnstile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/__tests__/animated-icon.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/__tests__/progress-indicator-advanced.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/__tests__/progress-indicator-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/__tests__/progress-indicator-performance.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/__tests__/progress-indicator.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":218,"column":51,"nodeType":"MemberExpression","endLine":218,"endColumn":72}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":46,"column":14,"nodeType":"MemberExpression","endLine":46,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { ProgressIndicator } from '@/components/shared/progress-indicator';\n\n// Mock next-intl\nconst mockUseTranslations = vi.fn();\nvi.mock('next-intl', () => ({\n  useTranslations: () => mockUseTranslations,\n}));\n\n// Mock cn utility\nvi.mock('@/lib/utils', () => ({\n  cn: (..._args: unknown[]) => {\n    const result: string[] = [];\n\n    ['class1', 'class2'].forEach((cls: any) => {\n      if (typeof cls === 'string') {\n        result.push(cls);\n      } else if (typeof cls === 'object' && cls !== null) {\n        // Handle conditional classes object\n        Object.entries(cls).forEach(([key, value]) => {\n          if (value) {\n            result.push(key);\n          }\n        });\n      }\n    });\n\n    return result.filter(Boolean).join(' ');\n  },\n}));\n\ndescribe('ProgressIndicator', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    mockUseTranslations.mockImplementation((key: string) => {\n      const translations: Record<string, string> = {\n        planning: 'è§„åˆ’é˜¶æ®µ',\n        development: 'å¼€å‘é˜¶æ®µ',\n        testing: 'æµ‹è¯•é˜¶æ®µ',\n        launch: 'å‘å¸ƒé˜¶æ®µ',\n        status: 'è¿›è¡Œä¸­',\n        nearCompletion: 'å³å°†å®Œæˆ',\n      };\n      // eslint-disable-next-line security/detect-object-injection\n      return translations[key] || key; // key æ¥è‡ªæµ‹è¯•æ•°æ®ï¼Œå®‰å…¨\n    });\n  });\n\n  describe('Basic Rendering', () => {\n    it('renders progress indicator with default step', () => {\n      render(<ProgressIndicator />);\n\n      expect(screen.getByText('è§„åˆ’é˜¶æ®µ')).toBeInTheDocument();\n      expect(screen.getByText('å¼€å‘é˜¶æ®µ')).toBeInTheDocument();\n      expect(screen.getByText('æµ‹è¯•é˜¶æ®µ')).toBeInTheDocument();\n      expect(screen.getByText('å‘å¸ƒé˜¶æ®µ')).toBeInTheDocument();\n    });\n\n    it('renders with custom className', () => {\n      const { container } = render(\n        <ProgressIndicator className='custom-class' />,\n      );\n\n      expect(container.firstChild).toHaveClass('custom-class');\n    });\n\n    it('renders all four steps', () => {\n      render(<ProgressIndicator />);\n\n      const stepNumbers = screen.getAllByText(/[1-4]/);\n      expect(stepNumbers).toHaveLength(4);\n    });\n  });\n\n  describe('Step States - Planning (Step 0)', () => {\n    it('shows planning as current step when currentStep is 0', () => {\n      render(<ProgressIndicator currentStep={0} />);\n\n      // Find the current step circle (should have animate-pulse)\n      const currentStepCircle = document.querySelector('.animate-pulse');\n      expect(currentStepCircle).toBeTruthy();\n\n      // Check that planning step label has correct styling\n      const planningLabel = screen.getByText('è§„åˆ’é˜¶æ®µ');\n      expect(planningLabel.className).toContain('text-primary');\n    });\n\n    it('shows correct progress percentage for step 0', () => {\n      render(<ProgressIndicator currentStep={0} />);\n\n      expect(screen.getByText('0%')).toBeInTheDocument();\n      expect(screen.getByText('è¿›è¡Œä¸­')).toBeInTheDocument();\n    });\n  });\n\n  describe('Step States - Development (Step 1)', () => {\n    it('shows development as current step when currentStep is 1', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      // Should have one completed step (SVG checkmark)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs.length).toBe(1);\n\n      // Development should be current (has animate-pulse)\n      const currentStepCircle = document.querySelector('.animate-pulse');\n      expect(currentStepCircle).toBeTruthy();\n\n      // Development label should be highlighted\n      const developmentLabel = screen.getByText('å¼€å‘é˜¶æ®µ');\n      expect(developmentLabel.className).toContain('text-primary');\n    });\n\n    it('shows checkmark for completed planning step', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      const svg = document.querySelector('svg');\n      expect(svg).toBeInTheDocument();\n      expect(svg?.querySelector('path')).toHaveAttribute('d', 'M5 13l4 4L19 7');\n    });\n\n    it('shows correct progress percentage for step 1', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      expect(screen.getByText('33%')).toBeInTheDocument();\n      expect(screen.getByText('è¿›è¡Œä¸­')).toBeInTheDocument();\n    });\n  });\n\n  describe('Step States - Testing (Step 2)', () => {\n    it('shows testing as current step when currentStep is 2', () => {\n      render(<ProgressIndicator currentStep={2} />);\n\n      // First two steps should be completed (2 SVG checkmarks)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs).toHaveLength(2);\n\n      // Testing should be current (has animate-pulse)\n      const currentStepCircle = document.querySelector('.animate-pulse');\n      expect(currentStepCircle).toBeTruthy();\n\n      // Testing label should be highlighted\n      const testingLabel = screen.getByText('æµ‹è¯•é˜¶æ®µ');\n      expect(testingLabel.className).toContain('text-primary');\n    });\n\n    it('shows correct progress percentage for step 2', () => {\n      render(<ProgressIndicator currentStep={2} />);\n\n      expect(screen.getByText('67%')).toBeInTheDocument();\n      expect(screen.getByText('è¿›è¡Œä¸­')).toBeInTheDocument();\n    });\n  });\n\n  describe('Step States - Launch (Step 3)', () => {\n    it('shows launch as current step when currentStep is 3', () => {\n      render(<ProgressIndicator currentStep={3} />);\n\n      // First three steps should be completed (3 SVG checkmarks)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs).toHaveLength(3);\n\n      // Launch should be current (has animate-pulse)\n      const currentStepCircle = document.querySelector('.animate-pulse');\n      expect(currentStepCircle).toBeTruthy();\n\n      // Launch label should be highlighted\n      const launchLabel = screen.getByText('å‘å¸ƒé˜¶æ®µ');\n      expect(launchLabel.className).toContain('text-primary');\n    });\n\n    it('shows correct progress percentage for step 3', () => {\n      render(<ProgressIndicator currentStep={3} />);\n\n      expect(screen.getByText('100%')).toBeInTheDocument();\n      expect(screen.getByText('å³å°†å®Œæˆ')).toBeInTheDocument();\n    });\n  });\n\n  describe('Step States - Completed (Step 4)', () => {\n    it('shows all steps as completed when currentStep is 4', () => {\n      render(<ProgressIndicator currentStep={4} />);\n\n      // All steps should show checkmarks (4 SVGs)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs).toHaveLength(4);\n\n      // All step labels should be highlighted\n      expect(screen.getByText('è§„åˆ’é˜¶æ®µ').className).toContain('text-primary');\n      expect(screen.getByText('å¼€å‘é˜¶æ®µ').className).toContain('text-primary');\n      expect(screen.getByText('æµ‹è¯•é˜¶æ®µ').className).toContain('text-primary');\n      expect(screen.getByText('å‘å¸ƒé˜¶æ®µ').className).toContain('text-primary');\n    });\n\n    it('shows 100% completion for step 4', () => {\n      render(<ProgressIndicator currentStep={4} />);\n\n      // Should show percentage over 100% since step 4 is beyond the max (3)\n      expect(screen.getByText(/\\d+%/)).toBeInTheDocument();\n      expect(screen.getByText('å³å°†å®Œæˆ')).toBeInTheDocument();\n    });\n  });\n\n  describe('Progress Bar', () => {\n    it('shows correct progress bar width for different steps', () => {\n      const steps = [0, 1, 2, 3];\n      const expectedWidths = [\n        '0%',\n        '33.33333333333333%',\n        '66.66666666666666%',\n        '100%',\n      ];\n\n      steps.forEach((step, index) => {\n        const { unmount } = render(<ProgressIndicator currentStep={step} />);\n\n        const progressBar = document.querySelector('.bg-primary.h-full');\n        expect(progressBar).toHaveStyle(`width: ${expectedWidths[index]}`);\n\n        unmount();\n      });\n    });\n\n    it('has correct progress bar structure', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      const progressContainer = document.querySelector('.bg-muted.absolute');\n      expect(progressContainer).toHaveClass(\n        'top-4',\n        'right-4',\n        'left-4',\n        'h-0.5',\n      );\n\n      const progressBar = document.querySelector('.bg-primary.h-full');\n      expect(progressBar).toHaveClass(\n        'transition-all',\n        'duration-500',\n        'ease-out',\n      );\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('provides proper SVG accessibility attributes', () => {\n      render(<ProgressIndicator currentStep={2} />);\n\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs.length).toBeGreaterThan(0);\n\n      svgs.forEach((svg) => {\n        expect(svg).toHaveAttribute('fill', 'none');\n        expect(svg).toHaveAttribute('stroke', 'currentColor');\n        expect(svg).toHaveAttribute('viewBox', '0 0 24 24');\n      });\n    });\n\n    it('has proper step circle structure', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      const stepCircles = document.querySelectorAll('.rounded-full');\n      stepCircles.forEach((circle) => {\n        expect(circle).toHaveClass(\n          'flex',\n          'h-8',\n          'w-8',\n          'items-center',\n          'justify-center',\n          'text-sm',\n          'font-medium',\n        );\n      });\n    });\n  });\n\n  describe('Animations and Transitions', () => {\n    it('applies transition classes to step circles', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      const stepCircles = document.querySelectorAll('.rounded-full');\n      stepCircles.forEach((circle) => {\n        expect(circle).toHaveClass('transition-all', 'duration-300');\n      });\n    });\n\n    it('applies pulse animation to current step', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      // Find the step circle that should have pulse animation\n      const stepCircles = document.querySelectorAll('.rounded-full');\n      const currentStepCircle = Array.from(stepCircles).find((circle) =>\n        circle.classList.contains('animate-pulse'),\n      );\n      expect(currentStepCircle).toBeTruthy();\n    });\n\n    it('applies transition to step labels', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      const stepLabels = document.querySelectorAll('.text-xs');\n      stepLabels.forEach((label) => {\n        expect(label).toHaveClass('transition-colors', 'duration-300');\n      });\n    });\n  });\n\n  describe('Internationalization', () => {\n    it('calls useTranslations hook', () => {\n      render(<ProgressIndicator />);\n\n      // The hook is called, but we're mocking the return function\n      expect(mockUseTranslations).toHaveBeenCalled();\n    });\n\n    it('translates all step labels', () => {\n      render(<ProgressIndicator />);\n\n      expect(mockUseTranslations).toHaveBeenCalledWith('planning');\n      expect(mockUseTranslations).toHaveBeenCalledWith('development');\n      expect(mockUseTranslations).toHaveBeenCalledWith('testing');\n      expect(mockUseTranslations).toHaveBeenCalledWith('launch');\n    });\n\n    it('translates status messages', () => {\n      render(<ProgressIndicator currentStep={1} />);\n\n      expect(mockUseTranslations).toHaveBeenCalledWith('status');\n\n      const { rerender } = render(<ProgressIndicator currentStep={3} />);\n      rerender(<ProgressIndicator currentStep={3} />);\n\n      expect(mockUseTranslations).toHaveBeenCalledWith('nearCompletion');\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('handles negative currentStep gracefully', () => {\n      render(<ProgressIndicator currentStep={-1} />);\n\n      // Should show no completed steps (no SVG checkmarks)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs).toHaveLength(0);\n\n      // Should show negative percentage (component doesn't clamp to 0)\n      expect(screen.getByText(/-\\d+%/)).toBeInTheDocument();\n    });\n\n    it('handles currentStep beyond maximum gracefully', () => {\n      render(<ProgressIndicator currentStep={10} />);\n\n      // All steps should be completed (4 SVG checkmarks)\n      const svgs = document.querySelectorAll('svg');\n      expect(svgs).toHaveLength(4);\n\n      // Should show percentage beyond 100%\n      expect(screen.getByText(/\\d+%/)).toBeInTheDocument();\n    });\n\n    it('handles missing translations gracefully', () => {\n      mockUseTranslations.mockImplementation((key: string) => key);\n\n      render(<ProgressIndicator />);\n\n      expect(screen.getByText('planning')).toBeInTheDocument();\n      expect(screen.getByText('development')).toBeInTheDocument();\n      expect(screen.getByText('testing')).toBeInTheDocument();\n      expect(screen.getByText('launch')).toBeInTheDocument();\n    });\n  });\n\n  describe('Memoization', () => {\n    it('is memoized component', () => {\n      // Check that the component is memoized by verifying it's a React.memo component\n      expect(ProgressIndicator).toBeDefined();\n      // React.memo components are objects with a $$typeof property\n      expect(ProgressIndicator).toHaveProperty('$$typeof');\n    });\n\n    it('renders consistently with same props', () => {\n      const props = { currentStep: 2 };\n\n      const { rerender } = render(<ProgressIndicator {...props} />);\n      const firstRender = screen.getByText('67%');\n\n      rerender(<ProgressIndicator {...props} />);\n      const secondRender = screen.getByText('67%');\n\n      expect(firstRender).toBeInTheDocument();\n      expect(secondRender).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animated-icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animation-examples.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animations/card-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animations/form-status.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animations/icon-title.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animations/showcase-config.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/animations/social-interactive.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports-base.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports-core.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports/exports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports/high-priority.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/dynamic-imports/ui-components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/progress-indicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v2-components.tsx","messages":[{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_t'.","line":41,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":41,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3732,3735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3732,3735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_t'.","line":154,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":154,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_t'.","line":207,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":207,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_t'.","line":256,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":256,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_t'.","line":275,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":275,"endColumn":50}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport {\n  ArrowRight,\n  Bell,\n  CheckCircle,\n  Clock,\n  Github,\n  Linkedin,\n  Mail,\n  Twitter,\n  Users,\n  Zap,\n} from 'lucide-react';\nimport { useTranslations } from 'next-intl';\n// cn utility is imported but not used in this file\n// import { cn } from '@/lib/utils';\nimport { logger } from '@/lib/logger';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Link } from '@/i18n/routing';\nimport { AnimatedIcon } from '@/components/shared/animated-icon';\nimport { ProgressIndicator } from '@/components/shared/progress-indicator';\n\ninterface EmailSubscriptionProps {\n  showEmailSubscription: boolean;\n}\n\nexport function EmailSubscription({\n  showEmailSubscription,\n}: EmailSubscriptionProps) {\n  const _t = useTranslations('underConstruction');\n  const [email, setEmail] = useState('');\n  const [isSubscribed, setIsSubscribed] = useState(false);\n\n  const handleEmailSubscription = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) return;\n\n    try {\n      const response = await fetch('/api/subscribe', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        setIsSubscribed(true);\n        setEmail('');\n      }\n    } catch (error) {\n      logger.error('Subscription error', { error: error as Error });\n    }\n  };\n\n  if (!showEmailSubscription) return null;\n\n  return (\n    <Card className='mx-auto w-full max-w-md'>\n      <CardHeader className='text-center'>\n        <CardTitle className='flex items-center justify-center gap-2'>\n          <Bell className='h-5 w-5' />\n          {_t('emailSubscription.title')}\n        </CardTitle>\n        <CardDescription>{_t('emailSubscription.description')}</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isSubscribed ? (\n          <div className='space-y-2 text-center'>\n            <CheckCircle className='mx-auto h-8 w-8 text-green-500' />\n            <p className='text-muted-foreground text-sm'>\n              {_t('emailSubscription.success')}\n            </p>\n          </div>\n        ) : (\n          <form\n            onSubmit={handleEmailSubscription}\n            className='space-y-4'\n          >\n            <Input\n              type='email'\n              placeholder={_t('emailSubscription.placeholder')}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n            <Button\n              type='submit'\n              className='w-full'\n            >\n              {_t('emailSubscription.button')}\n              <ArrowRight className='ml-2 h-4 w-4' />\n            </Button>\n          </form>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface SocialLinksProps {\n  showSocialLinks: boolean;\n}\n\nexport function SocialLinks({ showSocialLinks }: SocialLinksProps) {\n  const socialLinks = [\n    { icon: Twitter, href: '#', label: 'Twitter' },\n    { icon: Github, href: '#', label: 'GitHub' },\n    { icon: Linkedin, href: '#', label: 'LinkedIn' },\n  ];\n\n  if (!showSocialLinks) return null;\n\n  return (\n    <div className='flex justify-center space-x-4'>\n      {socialLinks.map((social) => (\n        <Button\n          key={social.label}\n          variant='outline'\n          size='icon'\n          asChild\n          className='transition-transform hover:scale-110'\n        >\n          <Link\n            href={social.href as any}\n            aria-label={social.label}\n          >\n            <social.icon className='h-4 w-4' />\n          </Link>\n        </Button>\n      ))}\n    </div>\n  );\n}\n\ninterface FeaturePreviewProps {\n  showFeaturePreview: boolean;\n}\n\nexport function FeaturePreview({ showFeaturePreview }: FeaturePreviewProps) {\n  const _t = useTranslations('underConstruction');\n\n  const features = [\n    {\n      icon: Zap,\n      title: _t('features.performance'),\n      description: _t('features.performanceDesc'),\n    },\n    {\n      icon: Users,\n      title: _t('features.collaboration'),\n      description: _t('features.collaborationDesc'),\n    },\n    {\n      icon: CheckCircle,\n      title: _t('features.quality'),\n      description: _t('features.qualityDesc'),\n    },\n  ];\n\n  if (!showFeaturePreview) return null;\n\n  return (\n    <div className='mx-auto w-full max-w-4xl'>\n      <h3 className='mb-8 text-center text-xl font-semibold'>\n        {_t('features.title')}\n      </h3>\n      <div className='grid grid-cols-1 gap-6 md:grid-cols-3'>\n        {features.map((feature, index) => (\n          <Card\n            key={index}\n            className='text-center transition-shadow hover:shadow-lg'\n          >\n            <CardHeader>\n              <feature.icon className='text-primary mx-auto h-8 w-8' />\n              <CardTitle className='text-lg'>{feature.title}</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>{feature.description}</CardDescription>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface HeaderSectionProps {\n  pageType: 'products' | 'blog' | 'about' | 'contact';\n  expectedDate: string;\n}\n\nexport function HeaderSection({ pageType, expectedDate }: HeaderSectionProps) {\n  const _t = useTranslations('underConstruction');\n  const tPage = useTranslations(`underConstruction.pages.${pageType}`);\n\n  return (\n    <div className='space-y-6 text-center'>\n      <div className='space-y-4'>\n        <AnimatedIcon\n          variant='construction'\n          size='xl'\n          className='text-primary drop-shadow-lg'\n        />\n        <div className='space-y-2'>\n          <h1 className='from-primary to-primary/60 bg-gradient-to-r bg-clip-text text-4xl font-bold text-transparent md:text-6xl'>\n            {tPage('title')}\n          </h1>\n          <p className='text-muted-foreground mx-auto max-w-2xl text-xl md:text-2xl'>\n            {tPage('subtitle')}\n          </p>\n        </div>\n      </div>\n\n      <div className='flex flex-col items-center justify-center gap-4 sm:flex-row'>\n        <Badge\n          variant='secondary'\n          className='px-4 py-2 text-sm'\n        >\n          <Clock className='mr-2 h-4 w-4' />\n          {_t('expectedLaunch')}: {expectedDate}\n        </Badge>\n        <Button\n          asChild\n          variant='outline'\n        >\n          <Link href='/'>{_t('backToHome')}</Link>\n        </Button>\n      </div>\n    </div>\n  );\n}\n\ninterface ProgressSectionProps {\n  showProgress: boolean;\n  currentStep: number;\n}\n\nexport function ProgressSection({\n  showProgress,\n  currentStep,\n}: ProgressSectionProps) {\n  const _t = useTranslations('underConstruction');\n\n  if (!showProgress) return null;\n\n  return (\n    <div className='mx-auto w-full max-w-2xl'>\n      <h3 className='mb-6 text-center text-lg font-semibold'>\n        {_t('progress.title')}\n      </h3>\n      <ProgressIndicator currentStep={currentStep} />\n    </div>\n  );\n}\n\ninterface ContactSectionProps {\n  pageType: 'products' | 'blog' | 'about' | 'contact';\n}\n\nexport function ContactSection({ pageType: _pageType }: ContactSectionProps) {\n  const _t = useTranslations('underConstruction');\n\n  return (\n    <Card className='mx-auto w-full max-w-md'>\n      <CardHeader className='text-center'>\n        <CardTitle className='flex items-center justify-center gap-2'>\n          <Mail className='h-5 w-5' />\n          {_t('contact.title')}\n        </CardTitle>\n        <CardDescription>{_t('contact.description')}</CardDescription>\n      </CardHeader>\n      <CardContent className='text-center'>\n        <Button\n          asChild\n          className='w-full'\n        >\n          <Link href='/contact'>\n            {_t('contact.button')}\n            <ArrowRight className='ml-2 h-4 w-4' />\n          </Link>\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v3/page-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v3/social-links.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction-v3/subscription-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/shared/under-construction.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-menu-item-interactions-basic-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-menu-item-interactions-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-menu-item-interactions.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-menu-item-rendering.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentTheme' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":304,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":304,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Theme Menu Item - Rendering Tests\n *\n * ä¸“é—¨æµ‹è¯•æ¸²æŸ“åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - åŸºæœ¬æ¸²æŸ“\n * - å›¾æ ‡æ˜¾ç¤º\n * - é€‰æ‹©çŠ¶æ€\n * - æ ·å¼åº”ç”¨\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { Moon, Sun } from 'lucide-react';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport { ThemeMenuItem } from '@/components/theme/theme-menu-item';\n\n// Mock the DropdownMenuItem component\nvi.mock('@/components/ui/dropdown-menu', () => ({\n  DropdownMenuItem: ({ children, ...props }: React.ComponentProps<'div'>) => (\n    <div\n      role='menuitem'\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n}));\n\ndescribe('Theme Menu Item - Rendering Tests', () => {\n  const defaultProps = {\n    theme: 'light',\n    currentTheme: 'dark',\n    label: 'Light Mode',\n    ariaLabel: 'Switch to light mode',\n    icon: Sun,\n    onClick: vi.fn(),\n    onKeyDown: vi.fn(),\n    supportsViewTransitions: false,\n    prefersReducedMotion: false,\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('åŸºæœ¬æ¸²æŸ“', () => {\n    it('renders theme menu item with correct label', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      expect(screen.getByText('Light Mode')).toBeInTheDocument();\n    });\n\n    it('renders with correct icon', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      // Sun icon should be rendered\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toBeInTheDocument();\n      expect(icon).toHaveClass('mr-2', 'h-4', 'w-4');\n      expect(icon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('applies correct role and aria-label', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveAttribute('aria-label', 'Switch to light mode');\n    });\n\n    it('renders with different icons correctly', () => {\n      const { rerender } = render(\n        <ThemeMenuItem\n          {...defaultProps}\n          icon={Moon}\n        />,\n      );\n      expect(screen.getByRole('menuitem')).toBeInTheDocument();\n\n      rerender(\n        <ThemeMenuItem\n          {...defaultProps}\n          icon={Sun}\n        />,\n      );\n      expect(screen.getByRole('menuitem')).toBeInTheDocument();\n    });\n\n    it('renders with custom label', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          label='Custom Theme'\n        />,\n      );\n\n      expect(screen.getByText('Custom Theme')).toBeInTheDocument();\n    });\n\n    it('renders with custom aria-label', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          ariaLabel='Custom aria label'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveAttribute('aria-label', 'Custom aria label');\n    });\n  });\n\n  describe('é€‰æ‹©çŠ¶æ€', () => {\n    it('shows selected indicator when theme matches currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n        />,\n      );\n\n      const selectedIndicator = screen.getByLabelText('å½“å‰é€‰ä¸­');\n      expect(selectedIndicator).toBeInTheDocument();\n      expect(selectedIndicator).toHaveTextContent('â—');\n      expect(selectedIndicator).toHaveClass('ml-auto', 'text-xs');\n    });\n\n    it('does not show selected indicator when theme does not match currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='dark'\n        />,\n      );\n\n      expect(screen.queryByLabelText('å½“å‰é€‰ä¸­')).not.toBeInTheDocument();\n      expect(screen.queryByText('â—')).not.toBeInTheDocument();\n    });\n\n    it('applies selected styling when theme matches currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='dark'\n          currentTheme='dark'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n    });\n\n    it('does not apply selected styling when theme does not match', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='dark'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('bg-accent');\n      expect(menuItem).not.toHaveClass('text-accent-foreground');\n    });\n\n    it('handles system theme selection correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='system'\n          currentTheme='system'\n        />,\n      );\n\n      const selectedIndicator = screen.getByLabelText('å½“å‰é€‰ä¸­');\n      expect(selectedIndicator).toBeInTheDocument();\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n    });\n  });\n\n  describe('æ ·å¼åº”ç”¨', () => {\n    it('applies focus styles', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass(\n        'focus:bg-accent',\n        'focus:text-accent-foreground',\n      );\n    });\n\n    it('has proper icon accessibility attributes', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('provides accessible selected state information', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n        />,\n      );\n\n      const selectedIndicator = screen.getByLabelText('å½“å‰é€‰ä¸­');\n      expect(selectedIndicator).toBeInTheDocument();\n    });\n\n    it('applies base menu item classes', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('cursor-pointer');\n    });\n\n    it('handles different theme styling correctly', () => {\n      const { rerender } = render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n        />,\n      );\n\n      let menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n\n      rerender(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='dark'\n          currentTheme='dark'\n        />,\n      );\n\n      menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n    });\n  });\n\n  describe('å›¾æ ‡æ˜¾ç¤º', () => {\n    it('renders Sun icon for light theme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          icon={Sun}\n        />,\n      );\n\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toBeInTheDocument();\n      expect(icon).toHaveClass('mr-2', 'h-4', 'w-4');\n    });\n\n    it('renders Moon icon for dark theme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='dark'\n          icon={Moon}\n        />,\n      );\n\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toBeInTheDocument();\n      expect(icon).toHaveClass('mr-2', 'h-4', 'w-4');\n    });\n\n    it('handles missing icon gracefully', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          icon={Sun}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toBeInTheDocument();\n      expect(screen.getByText('Light Mode')).toBeInTheDocument();\n    });\n\n    it('applies correct icon styling', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toHaveClass('mr-2', 'h-4', 'w-4');\n      expect(icon).toHaveAttribute('aria-hidden', 'true');\n    });\n  });\n\n  describe('è¾¹ç•Œæƒ…å†µ', () => {\n    it('handles undefined currentTheme gracefully', () => {\n      const { currentTheme: currentTheme, ...propsWithoutCurrentTheme } =\n        defaultProps;\n      render(<ThemeMenuItem {...propsWithoutCurrentTheme} />);\n\n      expect(screen.queryByLabelText('å½“å‰é€‰ä¸­')).not.toBeInTheDocument();\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('bg-accent');\n    });\n\n    it('handles empty label gracefully', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          label=''\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toBeInTheDocument();\n    });\n\n    it('handles missing aria-label gracefully', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          ariaLabel='Default aria label'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-menu-item.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentTheme' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":412,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":412,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { fireEvent, render, screen } from '@testing-library/react';\nimport { Monitor, Moon, Sun } from 'lucide-react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { ThemeMenuItem } from '@/components/theme/theme-menu-item';\n\n// Mock DropdownMenuItem\nvi.mock('@/components/ui/dropdown-menu', () => ({\n  DropdownMenuItem: ({\n    children,\n    className,\n    onClick,\n    onKeyDown,\n    role,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      role={role}\n      className={className}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n}));\n\ndescribe('ThemeMenuItem', () => {\n  const defaultProps = {\n    theme: 'light',\n    currentTheme: 'dark',\n    label: 'Light Mode',\n    ariaLabel: 'Switch to light mode',\n    icon: Sun,\n    supportsViewTransitions: false,\n    prefersReducedMotion: false,\n    onClick: vi.fn(),\n    onKeyDown: vi.fn(),\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('Basic Rendering', () => {\n    it('renders theme menu item with correct label', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      expect(screen.getByText('Light Mode')).toBeInTheDocument();\n    });\n\n    it('renders with correct icon', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      // Sun icon should be rendered\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toBeInTheDocument();\n      expect(icon).toHaveClass('mr-2', 'h-4', 'w-4');\n      expect(icon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('applies correct role and aria-label', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveAttribute('aria-label', 'Switch to light mode');\n    });\n\n    it('renders with different icons correctly', () => {\n      const { rerender } = render(\n        <ThemeMenuItem\n          {...defaultProps}\n          icon={Moon}\n        />,\n      );\n      expect(screen.getByRole('menuitem')).toBeInTheDocument();\n\n      rerender(\n        <ThemeMenuItem\n          {...defaultProps}\n          icon={Monitor}\n        />,\n      );\n      expect(screen.getByRole('menuitem')).toBeInTheDocument();\n    });\n  });\n\n  describe('Selection State', () => {\n    it('shows selected indicator when theme matches currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n        />,\n      );\n\n      const selectedIndicator = screen.getByLabelText('å½“å‰é€‰ä¸­');\n      expect(selectedIndicator).toBeInTheDocument();\n      expect(selectedIndicator).toHaveTextContent('â—');\n      expect(selectedIndicator).toHaveClass('ml-auto', 'text-xs');\n    });\n\n    it('does not show selected indicator when theme does not match currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='dark'\n        />,\n      );\n\n      expect(screen.queryByLabelText('å½“å‰é€‰ä¸­')).not.toBeInTheDocument();\n      expect(screen.queryByText('â—')).not.toBeInTheDocument();\n    });\n\n    it('applies selected styling when theme matches currentTheme', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='dark'\n          currentTheme='dark'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n    });\n\n    it('does not apply selected styling when theme does not match', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='dark'\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('bg-accent');\n      expect(menuItem).not.toHaveClass('text-accent-foreground');\n    });\n  });\n\n  describe('View Transitions Support', () => {\n    it('shows view transitions indicator when supportsViewTransitions is true', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          supportsViewTransitions={true}\n        />,\n      );\n\n      const transitionsIndicator = screen.getByText('âœ¨');\n      expect(transitionsIndicator).toBeInTheDocument();\n      expect(transitionsIndicator).toHaveClass(\n        'text-muted-foreground',\n        'ml-auto',\n        'text-xs',\n      );\n      expect(transitionsIndicator).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('does not show view transitions indicator when supportsViewTransitions is false', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          supportsViewTransitions={false}\n        />,\n      );\n\n      expect(screen.queryByText('âœ¨')).not.toBeInTheDocument();\n    });\n\n    it('applies transition classes when supportsViewTransitions is true and prefersReducedMotion is false', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          supportsViewTransitions={true}\n          prefersReducedMotion={false}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass(\n        'hover:bg-accent',\n        'transition-all',\n        'duration-200',\n      );\n    });\n\n    it('does not apply transition classes when prefersReducedMotion is true', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          supportsViewTransitions={true}\n          prefersReducedMotion={true}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('hover:bg-accent');\n      expect(menuItem).not.toHaveClass('transition-all');\n      expect(menuItem).not.toHaveClass('duration-200');\n    });\n\n    it('does not apply transition classes when supportsViewTransitions is false', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          supportsViewTransitions={false}\n          prefersReducedMotion={false}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('hover:bg-accent');\n      expect(menuItem).not.toHaveClass('transition-all');\n    });\n  });\n\n  describe('Event Handling', () => {\n    it('calls onClick handler when clicked', () => {\n      const handleClick = vi.fn();\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          onClick={handleClick}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      fireEvent.click(menuItem);\n\n      expect(handleClick).toHaveBeenCalledTimes(1);\n      expect(handleClick).toHaveBeenCalledWith(expect.any(Object));\n    });\n\n    it('calls onKeyDown handler when key is pressed', () => {\n      const handleKeyDown = vi.fn();\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          onKeyDown={handleKeyDown}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      fireEvent.keyDown(menuItem, { key: 'Enter' });\n\n      expect(handleKeyDown).toHaveBeenCalledTimes(1);\n      expect(handleKeyDown).toHaveBeenCalledWith(expect.any(Object));\n    });\n\n    it('handles keyboard navigation with Space key', () => {\n      const handleKeyDown = vi.fn();\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          onKeyDown={handleKeyDown}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      fireEvent.keyDown(menuItem, { key: ' ' });\n\n      expect(handleKeyDown).toHaveBeenCalledWith(\n        expect.objectContaining({ key: ' ' }),\n      );\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('applies focus styles', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass(\n        'focus:bg-accent',\n        'focus:text-accent-foreground',\n      );\n    });\n\n    it('has proper icon accessibility attributes', () => {\n      render(<ThemeMenuItem {...defaultProps} />);\n\n      const icon = screen.getByRole('menuitem').querySelector('svg');\n      expect(icon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('provides accessible selected state information', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n        />,\n      );\n\n      const selectedIndicator = screen.getByLabelText('å½“å‰é€‰ä¸­');\n      expect(selectedIndicator).toBeInTheDocument();\n    });\n  });\n\n  describe('Different Theme Configurations', () => {\n    it('renders light theme configuration correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n          label='æµ…è‰²æ¨¡å¼'\n          ariaLabel='åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼'\n          icon={Sun}\n        />,\n      );\n\n      expect(screen.getByText('æµ…è‰²æ¨¡å¼')).toBeInTheDocument();\n      expect(screen.getByRole('menuitem')).toHaveAttribute(\n        'aria-label',\n        'åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼',\n      );\n      expect(screen.getByLabelText('å½“å‰é€‰ä¸­')).toBeInTheDocument();\n    });\n\n    it('renders dark theme configuration correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='dark'\n          currentTheme='dark'\n          label='æ·±è‰²æ¨¡å¼'\n          ariaLabel='åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼'\n          icon={Moon}\n        />,\n      );\n\n      expect(screen.getByText('æ·±è‰²æ¨¡å¼')).toBeInTheDocument();\n      expect(screen.getByRole('menuitem')).toHaveAttribute(\n        'aria-label',\n        'åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼',\n      );\n      expect(screen.getByLabelText('å½“å‰é€‰ä¸­')).toBeInTheDocument();\n    });\n\n    it('renders system theme configuration correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='system'\n          currentTheme='system'\n          label='è·Ÿéšç³»ç»Ÿ'\n          ariaLabel='è·Ÿéšç³»ç»Ÿä¸»é¢˜'\n          icon={Monitor}\n        />,\n      );\n\n      expect(screen.getByText('è·Ÿéšç³»ç»Ÿ')).toBeInTheDocument();\n      expect(screen.getByRole('menuitem')).toHaveAttribute(\n        'aria-label',\n        'è·Ÿéšç³»ç»Ÿä¸»é¢˜',\n      );\n      expect(screen.getByLabelText('å½“å‰é€‰ä¸­')).toBeInTheDocument();\n    });\n  });\n\n  describe('Complex State Combinations', () => {\n    it('handles selected item with view transitions correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='light'\n          supportsViewTransitions={true}\n          prefersReducedMotion={false}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toHaveClass('bg-accent', 'text-accent-foreground');\n      expect(menuItem).toHaveClass(\n        'hover:bg-accent',\n        'transition-all',\n        'duration-200',\n      );\n      expect(screen.getByText('â—')).toBeInTheDocument();\n      expect(screen.getByText('âœ¨')).toBeInTheDocument();\n    });\n\n    it('handles non-selected item with reduced motion correctly', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          theme='light'\n          currentTheme='dark'\n          supportsViewTransitions={true}\n          prefersReducedMotion={true}\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('bg-accent');\n      expect(menuItem).not.toHaveClass('transition-all');\n      expect(screen.queryByText('â—')).not.toBeInTheDocument();\n      expect(screen.getByText('âœ¨')).toBeInTheDocument();\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('handles undefined currentTheme gracefully', () => {\n      const { currentTheme, ...propsWithoutCurrentTheme } = defaultProps;\n      render(<ThemeMenuItem {...propsWithoutCurrentTheme} />);\n\n      expect(screen.queryByLabelText('å½“å‰é€‰ä¸­')).not.toBeInTheDocument();\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).not.toHaveClass('bg-accent');\n    });\n\n    it('handles empty label gracefully', () => {\n      render(\n        <ThemeMenuItem\n          {...defaultProps}\n          label=''\n        />,\n      );\n\n      const menuItem = screen.getByRole('menuitem');\n      expect(menuItem).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-toggle-button.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onClick' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":291,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":291,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { fireEvent, render, screen } from '@testing-library/react';\nimport { describe, expect, it, vi } from 'vitest';\nimport { ThemeToggleButton } from '@/components/theme/theme-toggle-button';\n\n// Mock lucide-react icons\nvi.mock('lucide-react', () => ({\n  Sun: ({ className, ...props }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='sun-icon'\n      className={className}\n      {...props}\n    />\n  ),\n  Moon: ({ className, ...props }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='moon-icon'\n      className={className}\n      {...props}\n    />\n  ),\n}));\n\ndescribe('ThemeToggleButton', () => {\n  const defaultProps = {\n    ariaAttributes: {\n      'aria-label': 'Toggle theme',\n      'aria-pressed': 'false',\n    },\n    prefersHighContrast: false,\n    prefersReducedMotion: false,\n    onKeyDown: vi.fn(),\n    onClick: vi.fn(),\n  };\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('Basic Rendering', () => {\n    it('renders theme toggle button with default props', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n      expect(button).toHaveAttribute('aria-label', 'Toggle theme');\n      expect(button).toHaveAttribute('aria-pressed', 'false');\n    });\n\n    it('renders both sun and moon icons', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      expect(screen.getByTestId('sun-icon')).toBeInTheDocument();\n      expect(screen.getByTestId('moon-icon')).toBeInTheDocument();\n    });\n\n    it('renders screen reader text', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      expect(screen.getByText('ä¸»é¢˜åˆ‡æ¢æŒ‰é’®')).toBeInTheDocument();\n      expect(screen.getByText('ä¸»é¢˜åˆ‡æ¢æŒ‰é’®')).toHaveClass('sr-only');\n    });\n\n    it('applies correct button variant and size', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      const button = screen.getByRole('button');\n      // Check for classes that indicate outline variant and icon size\n      expect(button).toHaveClass('border'); // outline variant has border\n      expect(button).toHaveClass('size-9'); // icon size\n    });\n  });\n\n  describe('Accessibility Features', () => {\n    it('applies all aria attributes correctly', () => {\n      const ariaAttributes = {\n        'aria-label': 'Switch to dark mode',\n        'aria-pressed': 'true',\n        'aria-describedby': 'theme-description',\n      };\n\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          ariaAttributes={ariaAttributes}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Switch to dark mode');\n      expect(button).toHaveAttribute('aria-pressed', 'true');\n      expect(button).toHaveAttribute('aria-describedby', 'theme-description');\n    });\n\n    it('applies high contrast styles when prefersHighContrast is true', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          prefersHighContrast={true}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass('border-foreground', 'border-2');\n    });\n\n    it('does not apply high contrast styles when prefersHighContrast is false', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          prefersHighContrast={false}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).not.toHaveClass('border-foreground');\n      expect(button).not.toHaveClass('border-2');\n    });\n\n    it('applies focus ring styles', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveClass(\n        'focus:ring-ring',\n        'focus:ring-2',\n        'focus:ring-offset-2',\n      );\n    });\n  });\n\n  describe('Motion Preferences', () => {\n    it('applies transition classes when prefersReducedMotion is false', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          prefersReducedMotion={false}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      const sunIcon = screen.getByTestId('sun-icon');\n      const moonIcon = screen.getByTestId('moon-icon');\n\n      expect(button).toHaveClass('transition-all', 'duration-200');\n      expect(sunIcon).toHaveClass('transition-all');\n      expect(moonIcon).toHaveClass('transition-all');\n    });\n\n    it('does not apply transition classes when prefersReducedMotion is true', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          prefersReducedMotion={true}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      const sunIcon = screen.getByTestId('sun-icon');\n      const moonIcon = screen.getByTestId('moon-icon');\n\n      // Check that our custom duration class is not applied when reduced motion is preferred\n      expect(button).not.toHaveClass('duration-200');\n      // Icons should not have our custom transition-all class\n      expect(sunIcon).not.toHaveClass('transition-all');\n      expect(moonIcon).not.toHaveClass('transition-all');\n    });\n  });\n\n  describe('Icon Styling', () => {\n    it('applies correct classes to sun icon', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      const sunIcon = screen.getByTestId('sun-icon');\n      expect(sunIcon).toHaveClass(\n        'h-[1.2rem]',\n        'w-[1.2rem]',\n        'scale-100',\n        'rotate-0',\n        'dark:scale-0',\n        'dark:-rotate-90',\n      );\n      expect(sunIcon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('applies correct classes to moon icon', () => {\n      render(<ThemeToggleButton {...defaultProps} />);\n\n      const moonIcon = screen.getByTestId('moon-icon');\n      expect(moonIcon).toHaveClass(\n        'absolute',\n        'h-[1.2rem]',\n        'w-[1.2rem]',\n        'scale-0',\n        'rotate-90',\n        'dark:scale-100',\n        'dark:rotate-0',\n      );\n      expect(moonIcon).toHaveAttribute('aria-hidden', 'true');\n    });\n  });\n\n  describe('Event Handling', () => {\n    it('calls onClick handler when button is clicked', () => {\n      const handleClick = vi.fn();\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          onClick={handleClick}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      fireEvent.click(button);\n\n      expect(handleClick).toHaveBeenCalledTimes(1);\n      expect(handleClick).toHaveBeenCalledWith(expect.any(Object));\n    });\n\n    it('calls onKeyDown handler when key is pressed', () => {\n      const handleKeyDown = vi.fn();\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          onKeyDown={handleKeyDown}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      fireEvent.keyDown(button, { key: 'Enter' });\n\n      expect(handleKeyDown).toHaveBeenCalledTimes(1);\n      expect(handleKeyDown).toHaveBeenCalledWith(expect.any(Object));\n    });\n\n    it('handles keyboard navigation with Space key', () => {\n      const handleKeyDown = vi.fn();\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          onKeyDown={handleKeyDown}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      fireEvent.keyDown(button, { key: ' ' });\n\n      expect(handleKeyDown).toHaveBeenCalledWith(\n        expect.objectContaining({ key: ' ' }),\n      );\n    });\n  });\n\n  describe('Forward Ref', () => {\n    it('forwards ref to button element', () => {\n      const ref = React.createRef<HTMLButtonElement>();\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          ref={ref}\n        />,\n      );\n\n      expect(ref.current).toBeInstanceOf(HTMLButtonElement);\n      expect(ref.current).toBe(screen.getByRole('button'));\n    });\n\n    it('has correct display name', () => {\n      expect(ThemeToggleButton.displayName).toBe('ThemeToggleButton');\n    });\n  });\n\n  describe('Props Spreading', () => {\n    it('spreads additional props to button element', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          data-testid='custom-theme-button'\n          title='Custom title'\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('data-testid', 'custom-theme-button');\n      expect(button).toHaveAttribute('title', 'Custom title');\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('handles missing onClick handler gracefully', () => {\n      const { onClick, ...propsWithoutClick } = defaultProps;\n      render(<ThemeToggleButton {...propsWithoutClick} />);\n\n      const button = screen.getByRole('button');\n      expect(() => fireEvent.click(button)).not.toThrow();\n    });\n\n    it('handles empty aria attributes', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          ariaAttributes={{}}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toBeInTheDocument();\n    });\n\n    it('combines all accessibility and motion preferences correctly', () => {\n      render(\n        <ThemeToggleButton\n          {...defaultProps}\n          prefersHighContrast={true}\n          prefersReducedMotion={true}\n          ariaAttributes={{\n            'aria-label': 'Toggle dark mode',\n            'aria-pressed': 'true',\n          }}\n        />,\n      );\n\n      const button = screen.getByRole('button');\n      expect(button).toHaveAttribute('aria-label', 'Toggle dark mode');\n      expect(button).toHaveAttribute('aria-pressed', 'true');\n      expect(button).toHaveClass('border-foreground', 'border-2');\n      // Check that our custom duration class is not applied when reduced motion is preferred\n      expect(button).not.toHaveClass('duration-200');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/__tests__/theme-toggle.browser.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/horizontal-theme-toggle-simple.tsx","messages":[{"ruleId":"react-you-might-not-need-an-effect/no-initialize-state","severity":2,"message":"Avoid initializing state in an effect. Instead, pass \"mounted\"'s initial value to its `useState`.","line":99,"column":5,"nodeType":"CallExpression","messageId":"avoidInitializingState","endLine":99,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { Monitor, Moon, Sun } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\nimport { useTheme } from 'next-themes';\nimport { cn } from '@/lib/utils';\n\n/**\n * ä¸»é¢˜é€‰é¡¹é…ç½®\n */\nconst THEME_OPTIONS = [\n  {\n    value: 'light',\n    icon: Sun,\n    labelKey: 'theme.light',\n    ariaLabelKey: 'theme.switchToLight',\n  },\n  {\n    value: 'dark',\n    icon: Moon,\n    labelKey: 'theme.dark',\n    ariaLabelKey: 'theme.switchToDark',\n  },\n  {\n    value: 'system',\n    icon: Monitor,\n    labelKey: 'theme.system',\n    ariaLabelKey: 'theme.switchToSystem',\n  },\n] as const;\n\n/**\n * åŠ¨ç”»å˜ä½“ç±»å‹\n */\nexport type AnimationVariant = 'circle-blur' | 'framer-motion';\n\n/**\n * ç»„ä»¶å±æ€§æ¥å£\n */\nexport interface HorizontalThemeToggleProps {\n  /** æ˜¯å¦æ˜¾ç¤ºæ–‡å­—æ ‡ç­¾ */\n  'showLabels'?: boolean;\n  /** ç»„ä»¶å°ºå¯¸ */\n  'size'?: 'sm' | 'default' | 'lg';\n  /** è‡ªå®šä¹‰æ ·å¼ç±»å */\n  'className'?: string;\n  /** æ˜¯å¦ç¦ç”¨åŠ¨ç”»æ•ˆæœ */\n  'disableAnimations'?: boolean;\n  /** åŠ¨ç”»å˜ä½“ */\n  'animationVariant'?: AnimationVariant;\n  /** æµ‹è¯•ID */\n  'data-testid'?: string;\n}\n\n/**\n * è·å–å°ºå¯¸ç›¸å…³çš„æ ·å¼ç±»\n */\nconst getSizeClasses = (size: 'sm' | 'default' | 'lg') => {\n  switch (size) {\n    case 'sm':\n      return {\n        container: 'p-0.5',\n        button: 'px-2 py-1 text-xs gap-1.5',\n        icon: 'h-3 w-3',\n      };\n    case 'lg':\n      return {\n        container: 'p-1',\n        button: 'px-4 py-2 text-base gap-2',\n        icon: 'h-5 w-5',\n      };\n    default:\n      return {\n        container: 'p-0.5',\n        button: 'px-3 py-1.5 text-sm gap-2',\n        icon: 'h-4 w-4',\n      };\n  }\n};\n\n/**\n * æ°´å¹³ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ - ç®€åŒ–ç‰ˆ\n */\nexport function HorizontalThemeToggle({\n  showLabels = false,\n  size = 'default',\n  className,\n  'disableAnimations': _disableAnimations, // å¿½ç•¥ï¼Œç®€åŒ–ç‰ˆä¸æ”¯æŒåŠ¨ç”»\n  'animationVariant': _animationVariant, // å¿½ç•¥ï¼Œç®€åŒ–ç‰ˆä¸æ”¯æŒåŠ¨ç”»å˜ä½“\n  'data-testid': testId = 'horizontal-theme-toggle',\n}: HorizontalThemeToggleProps) {\n  const { theme, setTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n  const t = useTranslations();\n\n  // é˜²æ­¢ hydration mismatch\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const sizeClasses = getSizeClasses(size);\n\n  // åŠ è½½çŠ¶æ€çš„éª¨æ¶å±\n  if (!mounted) {\n    return (\n      <div\n        className={cn(\n          'bg-background inline-flex items-center rounded-lg border',\n          sizeClasses.container,\n          className,\n        )}\n        data-testid={testId}\n      >\n        {THEME_OPTIONS.map((option) => (\n          <div\n            key={option.value}\n            className={cn(\n              'flex items-center justify-center rounded-md transition-colors',\n              sizeClasses.button,\n              'bg-muted animate-pulse',\n            )}\n          >\n            <div\n              className={cn(\n                'rounded',\n                sizeClasses.icon,\n                'bg-muted-foreground/20',\n              )}\n            />\n            {showLabels && (\n              <div className='bg-muted-foreground/20 h-4 w-12 rounded' />\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        'bg-background inline-flex items-center rounded-lg border',\n        sizeClasses.container,\n        className,\n      )}\n      role='radiogroup'\n      aria-label={t('theme.toggleLabel')}\n      data-testid={testId}\n    >\n      {THEME_OPTIONS.map((themeOption) => {\n        const Icon = themeOption.icon;\n        const isActive = theme === themeOption.value;\n        const label = t(themeOption.labelKey);\n        const ariaLabel = t(themeOption.ariaLabelKey);\n\n        return (\n          <button\n            key={themeOption.value}\n            className={cn(\n              'flex items-center justify-center rounded-md transition-colors',\n              'hover:bg-muted focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none',\n              sizeClasses.button,\n              isActive &&\n                'bg-primary text-primary-foreground hover:bg-primary/90',\n            )}\n            onClick={() => setTheme(themeOption.value)}\n            aria-label={ariaLabel}\n            role='radio'\n            aria-checked={isActive}\n            type='button'\n          >\n            <Icon className={cn(sizeClasses.icon)} />\n            {showLabels && <span className='font-medium'>{label}</span>}\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/horizontal-theme-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/horizontal-theme-toggle/animation-utils.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Arrow function has too many parameters (5). Maximum allowed is 3.","line":50,"column":3,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":50,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1878,1881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1878,1881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, PERCENTAGE_FULL } from '@/constants';\n\n/**\n * ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»å·¥å…·å‡½æ•°\n */\nexport const createCircleBlurAnimation = (\n  buttonElement: HTMLElement | null,\n) => {\n  if (!buttonElement) return '';\n\n  const rect = buttonElement.getBoundingClientRect();\n  const centerX = ((rect.left + rect.width / COUNT_PAIR) / window.innerWidth) * PERCENTAGE_FULL;\n  const centerY = ((rect.top + rect.height / COUNT_PAIR) / window.innerHeight) * PERCENTAGE_FULL;\n\n  return `\n    @supports (view-transition-name: root) {\n      ::view-transition-old(root) {\n        animation: none;\n      }\n      ::view-transition-new(root) {\n        animation: circle-blur-expand 0.6s cubic-bezier(0.4, 0, 0.COUNT_PAIR, 1);\n        transform-origin: ${centerX}% ${centerY}%;\n      }\n      @keyframes circle-blur-expand {\n        from {\n          clip-path: circle(0% at ${centerX}% ${centerY}%);\n          filter: blur(8px);\n        }\n        50% {\n          filter: blur(4px);\n        }\n        to {\n          clip-path: circle(150% at ${centerX}% ${centerY}%);\n          filter: blur(0);\n        }\n      }\n    }\n  `;\n};\n\n/**\n * åº”ç”¨ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»\n */\nexport const applyThemeAnimation = (\n  newTheme: string,\n  buttonElement: HTMLButtonElement | null,\n  animationVariant: 'circle-blur' | 'framer-motion',\n  shouldDisableAnimations: boolean,\n  setTheme: (theme: string) => void,\n) => {\n  // ç¡®å®šä½¿ç”¨çš„åŠ¨ç”»å˜ä½“\n  const shouldUseCircleBlur =\n    animationVariant === 'circle-blur' &&\n    !shouldDisableAnimations &&\n    'startViewTransition' in document;\n\n  if (shouldUseCircleBlur && buttonElement) {\n    // åˆ›å»ºåŠ¨ç”»æ ·å¼\n    const styleId = `theme-transition-${Date.now()}`;\n    const style = document.createElement('style');\n    style.id = styleId;\n    style.textContent = createCircleBlurAnimation(buttonElement);\n    document.head.appendChild(style);\n\n    // ä½¿ç”¨ View Transition API\n    (document as any).startViewTransition(() => {\n      setTheme(newTheme);\n    });\n\n    // æ¸…ç†åŠ¨ç”»æ ·å¼\n    setTimeout(() => {\n      const styleEl = document.getElementById(styleId);\n      if (styleEl) {\n        styleEl.remove();\n      }\n    }, ANIMATION_DURATION_VERY_SLOW);\n  } else {\n    // ç›´æ¥åˆ‡æ¢ä¸»é¢˜ï¼Œä¸ä½¿ç”¨åŠ¨ç”»\n    setTheme(newTheme);\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/horizontal-theme-toggle/keyboard-handler.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Arrow function has too many statements (26). Maximum allowed is 20.","line":14,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":64,"endColumn":4},{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":24,"column":5,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":63,"endColumn":6},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":30,"column":28,"nodeType":"MemberExpression","endLine":30,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":41,"column":28,"nodeType":"MemberExpression","endLine":41,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":49,"column":29,"nodeType":"MemberExpression","endLine":49,"endColumn":48}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { THEME_OPTIONS } from '@/components/theme/horizontal-theme-toggle/theme-config';\nimport { ONE, ZERO } from \"@/constants\";\n\n/**\n * å¤„ç†é”®ç›˜å¯¼èˆª\n */\nexport const createKeyboardHandler = (\n  theme: string | undefined,\n  handleThemeChange: (\n    newTheme: string,\n    buttonElement?: HTMLButtonElement,\n  ) => void,\n) => {\n  return (\n    event: React.KeyboardEvent<HTMLButtonElement>,\n    _themeValue: string,\n  ) => {\n    const currentIndex = THEME_OPTIONS.findIndex(\n      (option) => option.value === theme,\n    );\n    let nextIndex = currentIndex;\n    const buttonElement = event.currentTarget;\n\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'ArrowUp': {\n        event.preventDefault();\n        nextIndex =\n          currentIndex > ZERO ? currentIndex - ONE : THEME_OPTIONS.length - ONE;\n        const prevOption = THEME_OPTIONS[nextIndex];\n        if (prevOption) {\n          handleThemeChange(prevOption.value, buttonElement);\n        }\n        break;\n      }\n      case 'ArrowRight':\n      case 'ArrowDown': {\n        event.preventDefault();\n        nextIndex =\n          currentIndex < THEME_OPTIONS.length - ONE ? currentIndex + ONE : ZERO;\n        const nextOption = THEME_OPTIONS[nextIndex];\n        if (nextOption) {\n          handleThemeChange(nextOption.value, buttonElement);\n        }\n        break;\n      }\n      case 'Home': {\n        event.preventDefault();\n        const firstOption = THEME_OPTIONS[ZERO];\n        if (firstOption) {\n          handleThemeChange(firstOption.value, buttonElement);\n        }\n        break;\n      }\n      case 'End': {\n        event.preventDefault();\n        const lastOption = THEME_OPTIONS[THEME_OPTIONS.length - ONE];\n        if (lastOption) {\n          handleThemeChange(lastOption.value, buttonElement);\n        }\n        break;\n      }\n    }\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/horizontal-theme-toggle/theme-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/theme-menu-item.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/theme-performance-monitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/theme-toggle-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/vercel-theme-toggle-simple.tsx","messages":[{"ruleId":"react-you-might-not-need-an-effect/no-initialize-state","severity":2,"message":"Avoid initializing state in an effect. Instead, pass \"mounted\"'s initial value to its `useState`.","line":59,"column":5,"nodeType":"CallExpression","messageId":"avoidInitializingState","endLine":59,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { Monitor, Moon, Sun } from 'lucide-react';\nimport { useTranslations } from 'next-intl';\nimport { useTheme } from 'next-themes';\nimport { cn } from '@/lib/utils';\n\n/**\n * ä¸»é¢˜é€‰é¡¹é…ç½®\n */\nconst THEME_OPTIONS = [\n  {\n    value: 'system',\n    icon: Monitor,\n    labelKey: 'theme.system',\n    ariaLabelKey: 'theme.switchToSystem',\n  },\n  {\n    value: 'light',\n    icon: Sun,\n    labelKey: 'theme.light',\n    ariaLabelKey: 'theme.switchToLight',\n  },\n  {\n    value: 'dark',\n    icon: Moon,\n    labelKey: 'theme.dark',\n    ariaLabelKey: 'theme.switchToDark',\n  },\n] as const;\n\n/**\n * ç»„ä»¶å±æ€§æ¥å£\n */\nexport interface VercelThemeToggleProps {\n  /** è‡ªå®šä¹‰æ ·å¼ç±»å */\n  'className'?: string;\n  /** æ˜¯å¦æ˜¾ç¤ºæ ‡é¢˜ */\n  'showTitle'?: boolean;\n  /** è‡ªå®šä¹‰æµ‹è¯•ID */\n  'data-testid'?: string;\n}\n\n/**\n * Vercel é£æ ¼ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ - ç®€åŒ–ç‰ˆ\n */\nexport function VercelThemeToggle({\n  className,\n  showTitle = true,\n  'data-testid': testId = 'vercel-theme-toggle',\n}: VercelThemeToggleProps) {\n  const { theme, setTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n  const t = useTranslations();\n\n  // é˜²æ­¢ hydration mismatch\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // åŠ è½½çŠ¶æ€çš„éª¨æ¶å±\n  if (!mounted) {\n    return (\n      <div\n        className={cn('space-y-3', className)}\n        data-testid={`${testId}-skeleton`}\n      >\n        {showTitle && (\n          <div className='bg-muted h-5 w-16 animate-pulse rounded' />\n        )}\n        <div className='flex gap-2'>\n          {THEME_OPTIONS.map((_, index) => (\n            <div\n              key={index}\n              className='flex animate-pulse items-center gap-2 rounded-md border p-2'\n            >\n              <div className='bg-muted h-4 w-4 rounded' />\n              <div className='bg-muted h-4 w-12 rounded' />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn('space-y-3', className)}\n      data-testid={testId}\n    >\n      {showTitle && (\n        <h3 className='text-foreground text-sm font-medium'>\n          {t('theme.title')}\n        </h3>\n      )}\n\n      <div\n        className='flex gap-2'\n        role='radiogroup'\n        aria-label={t('theme.selectTheme')}\n      >\n        {THEME_OPTIONS.map((themeOption) => {\n          const Icon = themeOption.icon;\n          const isActive = theme === themeOption.value;\n          const label = t(themeOption.labelKey);\n          const ariaLabel = t(themeOption.ariaLabelKey);\n\n          return (\n            <button\n              key={themeOption.value}\n              className={cn(\n                'flex items-center gap-2 rounded-md border px-3 py-2 text-sm transition-colors',\n                'hover:bg-muted focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none',\n                isActive\n                  ? 'bg-primary text-primary-foreground border-primary'\n                  : 'bg-background text-muted-foreground border-border hover:text-foreground',\n              )}\n              onClick={() => setTheme(themeOption.value)}\n              aria-label={ariaLabel}\n              role='radio'\n              aria-checked={isActive}\n              type='button'\n              data-testid={`${testId}-${themeOption.value}`}\n            >\n              <Icon className='h-4 w-4' />\n              <span className='font-medium'>{label}</span>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/theme/vercel-theme-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter-animation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter-formatters.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter-performance.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/animated-counter.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-accessibility-interactions.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-basic-rendering.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-basic-variants.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-content-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-content-special.test.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":66,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1860,1883],"text":"Quotes: &quot;Hello\" 'World'"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1860,1883],"text":"Quotes: &ldquo;Hello\" 'World'"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1860,1883],"text":"Quotes: &#34;Hello\" 'World'"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1860,1883],"text":"Quotes: &rdquo;Hello\" 'World'"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":66,"column":35,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello&quot; 'World'"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello&ldquo; 'World'"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello&#34; 'World'"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello&rdquo; 'World'"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":66,"column":37,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" &apos;World'"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" &lsquo;World'"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" &#39;World'"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" &rsquo;World'"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":66,"column":43,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" 'World&apos;"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" 'World&lsquo;"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" 'World&#39;"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1860,1883],"text":"Quotes: \"Hello\" 'World&rsquo;"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Badge Content - Special Characters Tests\n *\n * ä¸“é—¨æµ‹è¯•ç‰¹æ®Šå­—ç¬¦å†…å®¹æ¸²æŸ“ï¼ŒåŒ…æ‹¬ï¼š\n * - ç‰¹æ®Šå­—ç¬¦\n * - Unicodeå­—ç¬¦\n * - HTMLå®ä½“\n * - æ•°å­¦ç¬¦å·\n * - è´§å¸ç¬¦å·\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { describe, expect, it } from 'vitest';\nimport { Badge } from '@/components/ui/badge';\n\ndescribe('Badge Content - Special Characters Tests', () => {\n  describe('ç‰¹æ®Šå­—ç¬¦æ¸²æŸ“', () => {\n    it('renders special characters', () => {\n      render(<Badge>Special: @#$%^&*()</Badge>);\n\n      const badge = screen.getByText('Special: @#$%^&*()');\n      expect(badge).toHaveTextContent('Special: @#$%^&*()');\n    });\n\n    it('renders unicode characters', () => {\n      render(<Badge>Unicode: ğŸ‰ âœ¨ ğŸš€</Badge>);\n\n      const badge = screen.getByText('Unicode: ğŸ‰ âœ¨ ğŸš€');\n      expect(badge).toHaveTextContent('Unicode: ğŸ‰ âœ¨ ğŸš€');\n    });\n\n    it('renders HTML entities correctly', () => {\n      render(<Badge>&lt;HTML&gt; &amp; Entities</Badge>);\n\n      const badge = screen.getByText('<HTML> & Entities');\n      expect(badge).toHaveTextContent('<HTML> & Entities');\n    });\n\n    it('renders mathematical symbols', () => {\n      render(<Badge>Math: âˆ‘ âˆ« âˆ â‰  â‰¤ â‰¥</Badge>);\n\n      const badge = screen.getByText('Math: âˆ‘ âˆ« âˆ â‰  â‰¤ â‰¥');\n      expect(badge).toHaveTextContent('Math: âˆ‘ âˆ« âˆ â‰  â‰¤ â‰¥');\n    });\n\n    it('renders currency symbols', () => {\n      render(<Badge>Currency: $ â‚¬ Â£ Â¥ â‚¹</Badge>);\n\n      const badge = screen.getByText('Currency: $ â‚¬ Â£ Â¥ â‚¹');\n      expect(badge).toHaveTextContent('Currency: $ â‚¬ Â£ Â¥ â‚¹');\n    });\n\n    it('renders punctuation marks', () => {\n      render(<Badge>Punctuation: .,;:!?</Badge>);\n\n      const badge = screen.getByText('Punctuation: .,;:!?');\n      expect(badge).toHaveTextContent('Punctuation: .,;:!?');\n    });\n\n    it('renders quotation marks', () => {\n      render(<Badge>Quotes: \"Hello\" 'World'</Badge>);\n\n      const badge = screen.getByText('Quotes: \"Hello\" \\'World\\'');\n      expect(badge).toHaveTextContent('Quotes: \"Hello\" \\'World\\'');\n    });\n\n    it('renders brackets and parentheses', () => {\n      render(<Badge>Brackets: [] {} ()</Badge>);\n\n      const badge = screen.getByText('Brackets: [] {} ()');\n      expect(badge).toHaveTextContent('Brackets: [] {} ()');\n    });\n\n    it('renders operators', () => {\n      render(<Badge>Operators: + - * / = %</Badge>);\n\n      const badge = screen.getByText('Operators: + - * / = %');\n      expect(badge).toHaveTextContent('Operators: + - * / = %');\n    });\n\n    it('renders comparison operators', () => {\n      render(<Badge>Compare: &lt; &gt; &lt;= &gt;=</Badge>);\n\n      const badge = screen.getByText('Compare: < > <= >=');\n      expect(badge).toHaveTextContent('Compare: < > <= >=');\n    });\n  });\n\n  describe('å›½é™…åŒ–å­—ç¬¦', () => {\n    it('renders Chinese characters', () => {\n      render(<Badge>ä¸­æ–‡æµ‹è¯•</Badge>);\n\n      const badge = screen.getByText('ä¸­æ–‡æµ‹è¯•');\n      expect(badge).toHaveTextContent('ä¸­æ–‡æµ‹è¯•');\n    });\n\n    it('renders Japanese characters', () => {\n      render(<Badge>æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ</Badge>);\n\n      const badge = screen.getByText('æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ');\n      expect(badge).toHaveTextContent('æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ');\n    });\n\n    it('renders Korean characters', () => {\n      render(<Badge>í•œêµ­ì–´ í…ŒìŠ¤íŠ¸</Badge>);\n\n      const badge = screen.getByText('í•œêµ­ì–´ í…ŒìŠ¤íŠ¸');\n      expect(badge).toHaveTextContent('í•œêµ­ì–´ í…ŒìŠ¤íŠ¸');\n    });\n\n    it('renders Arabic characters', () => {\n      render(<Badge>Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¨ÙŠ</Badge>);\n\n      const badge = screen.getByText('Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¨ÙŠ');\n      expect(badge).toHaveTextContent('Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¨ÙŠ');\n    });\n\n    it('renders Hebrew characters', () => {\n      render(<Badge>×‘×“×™×§×” ×¢×‘×¨×™×ª</Badge>);\n\n      const badge = screen.getByText('×‘×“×™×§×” ×¢×‘×¨×™×ª');\n      expect(badge).toHaveTextContent('×‘×“×™×§×” ×¢×‘×¨×™×ª');\n    });\n\n    it('renders Russian characters', () => {\n      render(<Badge>Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµÑÑ‚</Badge>);\n\n      const badge = screen.getByText('Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµÑÑ‚');\n      expect(badge).toHaveTextContent('Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµÑÑ‚');\n    });\n\n    it('renders Greek characters', () => {\n      render(<Badge>Î•Î»Î»Î·Î½Î¹ÎºÏŒ Ï„ÎµÏƒÏ„</Badge>);\n\n      const badge = screen.getByText('Î•Î»Î»Î·Î½Î¹ÎºÏŒ Ï„ÎµÏƒÏ„');\n      expect(badge).toHaveTextContent('Î•Î»Î»Î·Î½Î¹ÎºÏŒ Ï„ÎµÏƒÏ„');\n    });\n\n    it('renders accented characters', () => {\n      render(<Badge>CafÃ© rÃ©sumÃ© naÃ¯ve</Badge>);\n\n      const badge = screen.getByText('CafÃ© rÃ©sumÃ© naÃ¯ve');\n      expect(badge).toHaveTextContent('CafÃ© rÃ©sumÃ© naÃ¯ve');\n    });\n\n    it('renders mixed languages', () => {\n      render(<Badge>Hello ä¸–ç•Œ Ğ¼Ğ¸Ñ€</Badge>);\n\n      const badge = screen.getByText('Hello ä¸–ç•Œ Ğ¼Ğ¸Ñ€');\n      expect(badge).toHaveTextContent('Hello ä¸–ç•Œ Ğ¼Ğ¸Ñ€');\n    });\n  });\n\n  describe('ç¬¦å·å’Œå›¾æ ‡', () => {\n    it('renders arrow symbols', () => {\n      render(<Badge>Arrows: â† â†’ â†‘ â†“ â†”</Badge>);\n\n      const badge = screen.getByText('Arrows: â† â†’ â†‘ â†“ â†”');\n      expect(badge).toHaveTextContent('Arrows: â† â†’ â†‘ â†“ â†”');\n    });\n\n    it('renders geometric shapes', () => {\n      render(<Badge>Shapes: â–  â— â–² â—† â˜…</Badge>);\n\n      const badge = screen.getByText('Shapes: â–  â— â–² â—† â˜…');\n      expect(badge).toHaveTextContent('Shapes: â–  â— â–² â—† â˜…');\n    });\n\n    it('renders checkmarks and crosses', () => {\n      render(<Badge>Marks: âœ“ âœ— âœ” âœ˜ â˜‘</Badge>);\n\n      const badge = screen.getByText('Marks: âœ“ âœ— âœ” âœ˜ â˜‘');\n      expect(badge).toHaveTextContent('Marks: âœ“ âœ— âœ” âœ˜ â˜‘');\n    });\n\n    it('renders weather symbols', () => {\n      render(<Badge>Weather: â˜€ â˜ â˜‚ â„ âš¡</Badge>);\n\n      const badge = screen.getByText('Weather: â˜€ â˜ â˜‚ â„ âš¡');\n      expect(badge).toHaveTextContent('Weather: â˜€ â˜ â˜‚ â„ âš¡');\n    });\n\n    it('renders music symbols', () => {\n      render(<Badge>Music: â™ª â™« â™¬ â™­ â™¯</Badge>);\n\n      const badge = screen.getByText('Music: â™ª â™« â™¬ â™­ â™¯');\n      expect(badge).toHaveTextContent('Music: â™ª â™« â™¬ â™­ â™¯');\n    });\n\n    it('renders card suits', () => {\n      render(<Badge>Cards: â™  â™¥ â™¦ â™£</Badge>);\n\n      const badge = screen.getByText('Cards: â™  â™¥ â™¦ â™£');\n      expect(badge).toHaveTextContent('Cards: â™  â™¥ â™¦ â™£');\n    });\n\n    it('renders zodiac symbols', () => {\n      render(<Badge>Zodiac: â™ˆ â™‰ â™Š â™‹ â™Œ</Badge>);\n\n      const badge = screen.getByText('Zodiac: â™ˆ â™‰ â™Š â™‹ â™Œ');\n      expect(badge).toHaveTextContent('Zodiac: â™ˆ â™‰ â™Š â™‹ â™Œ');\n    });\n\n    it('renders miscellaneous symbols', () => {\n      render(<Badge>Misc: Â© Â® â„¢ Â§ Â¶</Badge>);\n\n      const badge = screen.getByText('Misc: Â© Â® â„¢ Â§ Â¶');\n      expect(badge).toHaveTextContent('Misc: Â© Â® â„¢ Â§ Â¶');\n    });\n  });\n\n  describe('æŠ€æœ¯ç¬¦å·', () => {\n    it('renders programming symbols', () => {\n      render(<Badge>Code: {} [] () &lt;&gt;</Badge>);\n\n      const badge = screen.getByText('Code: {} [] () <>');\n      expect(badge).toHaveTextContent('Code: {} [] () <>');\n    });\n\n    it('renders network symbols', () => {\n      render(<Badge>Network: @ # $ %</Badge>);\n\n      const badge = screen.getByText('Network: @ # $ %');\n      expect(badge).toHaveTextContent('Network: @ # $ %');\n    });\n\n    it('renders file path separators', () => {\n      render(<Badge>Path: / \\\\ | :</Badge>);\n\n      const badge = screen.getByText('Path: / \\\\ | :');\n      expect(badge).toHaveTextContent('Path: / \\\\ | :');\n    });\n\n    it('renders escape sequences', () => {\n      render(<Badge>Escape: \\\\n \\\\t \\\\r \\\\&quot;</Badge>);\n\n      const badge = screen.getByText('Escape: \\\\n \\\\t \\\\r \\\\\"');\n      expect(badge).toHaveTextContent('Escape: \\\\n \\\\t \\\\r \\\\\"');\n    });\n\n    it('renders regex patterns', () => {\n      render(<Badge>Regex: ^$ .* +? [a-z]</Badge>);\n\n      const badge = screen.getByText('Regex: ^$ .* +? [a-z]');\n      expect(badge).toHaveTextContent('Regex: ^$ .* +? [a-z]');\n    });\n\n    it('renders SQL operators', () => {\n      render(<Badge>SQL: = != &lt;&gt; LIKE IN</Badge>);\n\n      const badge = screen.getByText('SQL: = != <> LIKE IN');\n      expect(badge).toHaveTextContent('SQL: = != <> LIKE IN');\n    });\n\n    it('renders markdown syntax', () => {\n      render(<Badge>Markdown: # ** __ ~~</Badge>);\n\n      const badge = screen.getByText('Markdown: # ** __ ~~');\n      expect(badge).toHaveTextContent('Markdown: # ** __ ~~');\n    });\n\n    it('renders URL components', () => {\n      render(<Badge>URL: :// ? & = #</Badge>);\n\n      const badge = screen.getByText('URL: :// ? & = #');\n      expect(badge).toHaveTextContent('URL: :// ? & = #');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-custom-props-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge-custom-props.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/badge.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/button.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-accessibility-features-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-accessibility-features.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-basic-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-integration-scenarios.test.tsx","messages":[{"ruleId":"@next/next/no-html-link-for-pages","severity":2,"message":"Do not use an `<a>` element to navigate to `/home/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":176,"column":19,"nodeType":"JSXOpeningElement","endLine":176,"endColumn":35},{"ruleId":"@next/next/no-html-link-for-pages","severity":2,"message":"Do not use an `<a>` element to navigate to `/about/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":179,"column":19,"nodeType":"JSXOpeningElement","endLine":179,"endColumn":36},{"ruleId":"@next/next/no-html-link-for-pages","severity":2,"message":"Do not use an `<a>` element to navigate to `/contact/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":182,"column":19,"nodeType":"JSXOpeningElement","endLine":182,"endColumn":38}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Card Integration Scenarios Tests\n *\n * Tests for Card component integration scenarios including:\n * - Form elements integration\n * - Other UI components integration\n * - Responsive design support\n * - Complex interaction patterns\n * - Real-world usage scenarios\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { describe, expect, it } from 'vitest';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '../card';\n\ndescribe('Card Integration Scenarios Tests', () => {\n  describe('Component Integration', () => {\n    it('works with form elements', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Form Card</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form>\n              <label htmlFor='name'>Name:</label>\n              <input\n                id='name'\n                type='text'\n              />\n              <label htmlFor='email'>Email:</label>\n              <input\n                id='email'\n                type='email'\n              />\n            </form>\n          </CardContent>\n          <CardFooter>\n            <button type='submit'>Submit</button>\n          </CardFooter>\n        </Card>,\n      );\n\n      expect(screen.getByLabelText('Name:')).toBeInTheDocument();\n      expect(screen.getByLabelText('Email:')).toBeInTheDocument();\n      expect(\n        screen.getByRole('button', { name: 'Submit' }),\n      ).toBeInTheDocument();\n    });\n\n    it('integrates with other UI components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Component Integration</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className='space-y-4'>\n              <div className='flex items-center space-x-2'>\n                <input\n                  type='checkbox'\n                  id='option1'\n                />\n                <label htmlFor='option1'>Option 1</label>\n              </div>\n              <div className='flex items-center space-x-2'>\n                <input\n                  type='radio'\n                  id='radio1'\n                  name='group'\n                />\n                <label htmlFor='radio1'>Radio 1</label>\n              </div>\n            </div>\n          </CardContent>\n        </Card>,\n      );\n\n      expect(screen.getByLabelText('Option 1')).toBeInTheDocument();\n      expect(screen.getByLabelText('Radio 1')).toBeInTheDocument();\n    });\n\n    it('supports responsive design', () => {\n      render(\n        <Card className='mx-auto w-full max-w-md'>\n          <CardHeader className='text-center sm:text-left'>\n            <CardTitle className='text-lg sm:text-xl'>\n              Responsive Card\n            </CardTitle>\n          </CardHeader>\n          <CardContent className='px-4 sm:px-6'>\n            <p className='text-sm sm:text-base'>Responsive content</p>\n          </CardContent>\n        </Card>,\n      );\n\n      const card = screen.getByText('Responsive Card').closest('.w-full');\n      const title = screen.getByText('Responsive Card');\n      const content = screen.getByText('Responsive content');\n\n      expect(card).toHaveClass('max-w-md', 'mx-auto');\n      expect(title).toHaveClass('text-lg', 'sm:text-xl');\n      expect(content).toHaveClass('text-sm', 'sm:text-base');\n    });\n\n    it('works with data visualization components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Chart Card</CardTitle>\n            <CardDescription>Data visualization example</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className='chart-container'>\n              <svg\n                width='200'\n                height='100'\n                data-testid='chart'\n              >\n                <rect\n                  x='10'\n                  y='10'\n                  width='50'\n                  height='80'\n                  fill='blue'\n                />\n                <rect\n                  x='70'\n                  y='30'\n                  width='50'\n                  height='60'\n                  fill='red'\n                />\n                <rect\n                  x='130'\n                  y='20'\n                  width='50'\n                  height='70'\n                  fill='green'\n                />\n              </svg>\n            </div>\n          </CardContent>\n          <CardFooter>\n            <button>Export Chart</button>\n          </CardFooter>\n        </Card>,\n      );\n\n      expect(screen.getByTestId('chart')).toBeInTheDocument();\n      expect(screen.getByText('Export Chart')).toBeInTheDocument();\n    });\n\n    it('integrates with navigation components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Navigation Card</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <nav>\n              <ul>\n                <li>\n                  <a href='/home'>Home</a>\n                </li>\n                <li>\n                  <a href='/about'>About</a>\n                </li>\n                <li>\n                  <a href='/contact'>Contact</a>\n                </li>\n              </ul>\n            </nav>\n          </CardContent>\n        </Card>,\n      );\n\n      expect(screen.getByRole('navigation')).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: 'Home' })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: 'About' })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: 'Contact' })).toBeInTheDocument();\n    });\n\n    it('supports media content integration', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Media Card</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className='media-container'>\n              <video\n                controls\n                width='300'\n                data-testid='video'\n              >\n                <source\n                  src='/sample-video.mp4'\n                  type='video/mp4'\n                />\n                Your browser does not support the video tag.\n              </video>\n              <audio\n                controls\n                data-testid='audio'\n              >\n                <source\n                  src='/sample-audio.mp3'\n                  type='audio/mpeg'\n                />\n                Your browser does not support the audio element.\n              </audio>\n            </div>\n          </CardContent>\n        </Card>,\n      );\n\n      expect(screen.getByTestId('video')).toBeInTheDocument();\n      expect(screen.getByTestId('audio')).toBeInTheDocument();\n    });\n\n    it('works with table components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Data Table Card</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <table>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Age</th>\n                  <th>City</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td>John Doe</td>\n                  <td>30</td>\n                  <td>New York</td>\n                </tr>\n                <tr>\n                  <td>Jane Smith</td>\n                  <td>25</td>\n                  <td>Los Angeles</td>\n                </tr>\n              </tbody>\n            </table>\n          </CardContent>\n        </Card>,\n      );\n\n      expect(screen.getByRole('table')).toBeInTheDocument();\n      expect(\n        screen.getByRole('columnheader', { name: 'Name' }),\n      ).toBeInTheDocument();\n      expect(\n        screen.getByRole('cell', { name: 'John Doe' }),\n      ).toBeInTheDocument();\n    });\n\n    it('integrates with modal and dialog components', () => {\n      render(\n        <div>\n          <Card>\n            <CardHeader>\n              <CardTitle>Modal Trigger Card</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <button data-modal-target='example-modal'>Open Modal</button>\n            </CardContent>\n          </Card>\n          <div\n            id='example-modal'\n            role='dialog'\n            aria-hidden='true'\n          >\n            <Card>\n              <CardHeader>\n                <CardTitle>Modal Card</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p>This card is inside a modal</p>\n              </CardContent>\n              <CardFooter>\n                <button>Close</button>\n              </CardFooter>\n            </Card>\n          </div>\n        </div>,\n      );\n\n      expect(screen.getByText('Open Modal')).toBeInTheDocument();\n      expect(screen.getByRole('dialog')).toBeInTheDocument();\n      expect(screen.getByText('Modal Card')).toBeInTheDocument();\n    });\n\n    it('supports accordion-style interactions', () => {\n      const AccordionCard = () => {\n        const [isExpanded, setIsExpanded] = React.useState(false);\n\n        return (\n          <Card>\n            <CardHeader>\n              <CardTitle>\n                <button\n                  onClick={() => setIsExpanded(!isExpanded)}\n                  aria-expanded={isExpanded}\n                >\n                  Expandable Card {isExpanded ? 'â–¼' : 'â–¶'}\n                </button>\n              </CardTitle>\n            </CardHeader>\n            {isExpanded && (\n              <CardContent>\n                <p>This content is conditionally rendered</p>\n              </CardContent>\n            )}\n          </Card>\n        );\n      };\n\n      render(<AccordionCard />);\n\n      const toggleButton = screen.getByRole('button');\n      expect(toggleButton).toHaveAttribute('aria-expanded', 'false');\n      expect(\n        screen.queryByText('This content is conditionally rendered'),\n      ).not.toBeInTheDocument();\n    });\n\n    it('works with drag and drop interfaces', () => {\n      render(\n        <Card\n          draggable\n          data-testid='draggable-card'\n        >\n          <CardHeader>\n            <CardTitle>Draggable Card</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p>This card can be dragged and dropped</p>\n            <div\n              className='drag-handle'\n              data-testid='drag-handle'\n            >\n              â‹®â‹®\n            </div>\n          </CardContent>\n        </Card>,\n      );\n\n      const card = screen.getByTestId('draggable-card');\n      const dragHandle = screen.getByTestId('drag-handle');\n\n      expect(card).toHaveAttribute('draggable', 'true');\n      expect(dragHandle).toBeInTheDocument();\n    });\n\n    it('integrates with search and filter components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Search Results</CardTitle>\n            <div className='search-controls'>\n              <input\n                type='search'\n                placeholder='Search...'\n              />\n              <select>\n                <option value='all'>All Categories</option>\n                <option value='tech'>Technology</option>\n                <option value='design'>Design</option>\n              </select>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className='results'>\n              <p>Search result 1</p>\n              <p>Search result 2</p>\n            </div>\n          </CardContent>\n        </Card>,\n      );\n\n      expect(screen.getByPlaceholderText('Search...')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('All Categories')).toBeInTheDocument();\n      expect(screen.getByText('Search result 1')).toBeInTheDocument();\n    });\n\n    it('supports notification and alert patterns', () => {\n      render(\n        <Card\n          className='alert-card'\n          role='alert'\n        >\n          <CardHeader>\n            <CardTitle>âš ï¸ Warning</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p>This is an important notification</p>\n          </CardContent>\n          <CardFooter>\n            <button>Dismiss</button>\n            <button>Learn More</button>\n          </CardFooter>\n        </Card>,\n      );\n\n      const alertCard = screen.getByRole('alert');\n      expect(alertCard).toHaveClass('alert-card');\n      expect(screen.getByText('âš ï¸ Warning')).toBeInTheDocument();\n      expect(screen.getByText('Dismiss')).toBeInTheDocument();\n    });\n\n    it('works with loading and skeleton states', () => {\n      const LoadingCard = ({ isLoading }: { isLoading: boolean }) => (\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {isLoading ? (\n                <div\n                  className='skeleton-title'\n                  data-testid='skeleton'\n                >\n                  Loading...\n                </div>\n              ) : (\n                'Loaded Content'\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div\n                className='skeleton-content'\n                data-testid='skeleton-content'\n              >\n                <div className='skeleton-line'></div>\n                <div className='skeleton-line'></div>\n              </div>\n            ) : (\n              <p>Actual content here</p>\n            )}\n          </CardContent>\n        </Card>\n      );\n\n      const { rerender } = render(<LoadingCard isLoading={true} />);\n\n      expect(screen.getByTestId('skeleton')).toBeInTheDocument();\n      expect(screen.getByTestId('skeleton-content')).toBeInTheDocument();\n\n      rerender(<LoadingCard isLoading={false} />);\n\n      expect(screen.getByText('Loaded Content')).toBeInTheDocument();\n      expect(screen.getByText('Actual content here')).toBeInTheDocument();\n    });\n\n    it('integrates with pagination components', () => {\n      render(\n        <Card>\n          <CardHeader>\n            <CardTitle>Paginated Content</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className='content-list'>\n              <p>Item 1</p>\n              <p>Item 2</p>\n              <p>Item 3</p>\n            </div>\n          </CardContent>\n          <CardFooter>\n            <nav aria-label='Pagination'>\n              <button disabled>Previous</button>\n              <span>Page 1 of 5</span>\n              <button>Next</button>\n            </nav>\n          </CardFooter>\n        </Card>,\n      );\n\n      expect(screen.getByLabelText('Pagination')).toBeInTheDocument();\n      expect(screen.getByText('Previous')).toBeDisabled();\n      expect(screen.getByText('Next')).toBeEnabled();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-structure-accessibility-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-structure-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card-structure-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/card.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-advanced.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-complex.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-layout.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/dropdown-menu-radio.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/input-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/input-file-edge-cases.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/input-props-events.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/input-states-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/input.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-component-composition.test.tsx","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":343,"column":28,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":352,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Label Component Composition Tests\n *\n * Tests for Label component composition with other UI components including:\n * - Integration with other UI components\n * - Modal/dialog contexts\n * - Nested component structures\n * - Conditional rendering scenarios\n * - Dynamic content handling\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it } from 'vitest';\nimport { Label } from '@/components/ui/label';\n\ndescribe('Label Component Composition Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('Component Composition', () => {\n    it('works with other UI components', () => {\n      const Card = ({ children }: { children: React.ReactNode }) => (\n        <div className='card'>{children}</div>\n      );\n\n      const Button = ({\n        children,\n        ...props\n      }: React.ButtonHTMLAttributes<HTMLButtonElement>) => (\n        <button\n          className='btn'\n          {...props}\n        >\n          {children}\n        </button>\n      );\n\n      render(\n        <Card>\n          <form>\n            <div>\n              <Label htmlFor='card-input'>Card Input</Label>\n              <input\n                id='card-input'\n                type='text'\n              />\n            </div>\n            <Button type='submit'>Submit</Button>\n          </form>\n        </Card>,\n      );\n\n      expect(screen.getByText('Card Input')).toBeInTheDocument();\n      expect(screen.getByText('Submit')).toHaveClass('btn');\n    });\n\n    it('works in modal/dialog contexts', () => {\n      const Modal = ({ children }: { children: React.ReactNode }) => (\n        <div\n          role='dialog'\n          aria-modal='true'\n          className='modal'\n        >\n          {children}\n        </div>\n      );\n\n      render(\n        <Modal>\n          <form>\n            <Label htmlFor='modal-input'>Modal Input</Label>\n            <input\n              id='modal-input'\n              type='text'\n            />\n          </form>\n        </Modal>,\n      );\n\n      const dialog = screen.getByRole('dialog');\n      const label = screen.getByText('Modal Input');\n\n      expect(dialog).toContainElement(label);\n    });\n\n    it('handles nested component structures', () => {\n      const FieldGroup = ({ children }: { children: React.ReactNode }) => (\n        <div className='field-group'>{children}</div>\n      );\n\n      const FieldWrapper = ({ children }: { children: React.ReactNode }) => (\n        <div className='field-wrapper'>{children}</div>\n      );\n\n      render(\n        <FieldGroup>\n          <FieldWrapper>\n            <Label htmlFor='nested-input'>Nested Input</Label>\n            <input\n              id='nested-input'\n              type='text'\n            />\n          </FieldWrapper>\n        </FieldGroup>,\n      );\n\n      const label = screen.getByText('Nested Input');\n      expect(label.closest('.field-group')).toBeInTheDocument();\n      expect(label.closest('.field-wrapper')).toBeInTheDocument();\n    });\n\n    it('works with conditional rendering', () => {\n      const ConditionalForm = ({ showEmail }: { showEmail: boolean }) => (\n        <form>\n          <div>\n            <Label htmlFor='always-name'>Name</Label>\n            <input\n              id='always-name'\n              type='text'\n            />\n          </div>\n          {showEmail && (\n            <div>\n              <Label htmlFor='conditional-email'>Email</Label>\n              <input\n                id='conditional-email'\n                type='email'\n              />\n            </div>\n          )}\n        </form>\n      );\n\n      const { rerender } = render(<ConditionalForm showEmail={false} />);\n\n      expect(screen.getByText('Name')).toBeInTheDocument();\n      expect(screen.queryByText('Email')).not.toBeInTheDocument();\n\n      rerender(<ConditionalForm showEmail={true} />);\n\n      expect(screen.getByText('Name')).toBeInTheDocument();\n      expect(screen.getByText('Email')).toBeInTheDocument();\n    });\n\n    it('handles dynamic label content', () => {\n      const DynamicLabel = ({ count }: { count: number }) => (\n        <Label htmlFor='dynamic-input'>Items ({count})</Label>\n      );\n\n      const { rerender } = render(\n        <div>\n          <DynamicLabel count={0} />\n          <input\n            id='dynamic-input'\n            type='number'\n          />\n        </div>,\n      );\n\n      expect(screen.getByText('Items (0)')).toBeInTheDocument();\n\n      rerender(\n        <div>\n          <DynamicLabel count={5} />\n          <input\n            id='dynamic-input'\n            type='number'\n          />\n        </div>,\n      );\n\n      expect(screen.getByText('Items (5)')).toBeInTheDocument();\n    });\n\n    it('works with complex form layouts', () => {\n      const FormSection = ({\n        title,\n        children,\n      }: {\n        title: string;\n        children: React.ReactNode;\n      }) => (\n        <section>\n          <h3>{title}</h3>\n          {children}\n        </section>\n      );\n\n      const FormRow = ({ children }: { children: React.ReactNode }) => (\n        <div className='form-row'>{children}</div>\n      );\n\n      const FormColumn = ({ children }: { children: React.ReactNode }) => (\n        <div className='form-column'>{children}</div>\n      );\n\n      render(\n        <form>\n          <FormSection title='Personal Information'>\n            <FormRow>\n              <FormColumn>\n                <Label htmlFor='first-name'>First Name</Label>\n                <input\n                  id='first-name'\n                  type='text'\n                />\n              </FormColumn>\n              <FormColumn>\n                <Label htmlFor='last-name'>Last Name</Label>\n                <input\n                  id='last-name'\n                  type='text'\n                />\n              </FormColumn>\n            </FormRow>\n          </FormSection>\n          <FormSection title='Contact Information'>\n            <FormRow>\n              <FormColumn>\n                <Label htmlFor='email'>Email</Label>\n                <input\n                  id='email'\n                  type='email'\n                />\n              </FormColumn>\n              <FormColumn>\n                <Label htmlFor='phone'>Phone</Label>\n                <input\n                  id='phone'\n                  type='tel'\n                />\n              </FormColumn>\n            </FormRow>\n          </FormSection>\n        </form>,\n      );\n\n      expect(screen.getByText('Personal Information')).toBeInTheDocument();\n      expect(screen.getByText('Contact Information')).toBeInTheDocument();\n      expect(screen.getByLabelText('First Name')).toBeInTheDocument();\n      expect(screen.getByLabelText('Last Name')).toBeInTheDocument();\n      expect(screen.getByLabelText('Email')).toBeInTheDocument();\n      expect(screen.getByLabelText('Phone')).toBeInTheDocument();\n    });\n\n    it('works with custom form components', async () => {\n      const CustomFormField = ({\n        id,\n        label,\n        type = 'text',\n      }: {\n        id: string;\n        label: string;\n        type?: string;\n      }) => (\n        <div className='form-field'>\n          <Label\n            htmlFor={id}\n            className='form-label'\n          >\n            {label}\n          </Label>\n          <input\n            id={id}\n            type={type}\n            className='form-input'\n          />\n        </div>\n      );\n\n      render(\n        <form>\n          <CustomFormField\n            id='custom1'\n            label='Custom Field 1'\n          />\n          <CustomFormField\n            id='custom2'\n            label='Custom Field 2'\n            type='email'\n          />\n        </form>,\n      );\n\n      const label1 = screen.getByText('Custom Field 1');\n      const label2 = screen.getByText('Custom Field 2');\n\n      expect(label1).toHaveClass('form-label');\n      expect(label2).toHaveClass('form-label');\n\n      await user.click(label1);\n      expect(screen.getByDisplayValue('')).toHaveFocus();\n    });\n\n    it('handles component composition with styling', () => {\n      const StyledFormGroup = ({ children }: { children: React.ReactNode }) => (\n        <div className='styled-form-group'>{children}</div>\n      );\n\n      render(\n        <form>\n          <StyledFormGroup>\n            <Label\n              htmlFor='styled-input'\n              className='styled-label'\n            >\n              Styled Input\n            </Label>\n            <input\n              id='styled-input'\n              type='text'\n              className='styled-input'\n            />\n          </StyledFormGroup>\n        </form>,\n      );\n\n      const label = screen.getByText('Styled Input');\n      expect(label).toHaveClass('styled-label');\n      expect(label.closest('.styled-form-group')).toBeInTheDocument();\n    });\n\n    it('works with component libraries integration', () => {\n      // Simulate integration with component libraries\n      const LibraryCard = ({ children }: { children: React.ReactNode }) => (\n        <div\n          className='lib-card'\n          data-testid='library-card'\n        >\n          {children}\n        </div>\n      );\n\n      const LibraryInput = React.forwardRef<\n        HTMLInputElement,\n        React.InputHTMLAttributes<HTMLInputElement>\n      >(({ className, ...props }, ref) => (\n        <input\n          ref={ref}\n          className={`lib-input ${className || ''}`}\n          {...props}\n        />\n      ));\n\n      render(\n        <LibraryCard>\n          <form>\n            <div>\n              <Label htmlFor='lib-input'>Library Input</Label>\n              <LibraryInput\n                id='lib-input'\n                type='text'\n              />\n            </div>\n          </form>\n        </LibraryCard>,\n      );\n\n      const card = screen.getByTestId('library-card');\n      const label = screen.getByText('Library Input');\n      const input = screen.getByLabelText('Library Input');\n\n      expect(card).toContainElement(label);\n      expect(input).toHaveClass('lib-input');\n    });\n\n    it('handles portal/teleport scenarios', () => {\n      // Simulate portal rendering (like tooltips, dropdowns)\n      const PortalContent = ({ children }: { children: React.ReactNode }) => (\n        <div\n          id='portal-root'\n          data-testid='portal-content'\n        >\n          {children}\n        </div>\n      );\n\n      render(\n        <div>\n          <form>\n            <Label htmlFor='portal-trigger'>Portal Trigger</Label>\n            <input\n              id='portal-trigger'\n              type='text'\n            />\n          </form>\n          <PortalContent>\n            <div>Portal content with label reference</div>\n          </PortalContent>\n        </div>,\n      );\n\n      const label = screen.getByText('Portal Trigger');\n      const input = screen.getByLabelText('Portal Trigger');\n      const portalContent = screen.getByTestId('portal-content');\n\n      expect(label).toBeInTheDocument();\n      expect(input).toBeInTheDocument();\n      expect(portalContent).toBeInTheDocument();\n    });\n\n    it('works with error boundary contexts', () => {\n      const ErrorBoundary = ({ children }: { children: React.ReactNode }) => {\n        try {\n          return <div className='error-boundary'>{children}</div>;\n        } catch {\n          return <div>Error occurred</div>;\n        }\n      };\n\n      render(\n        <ErrorBoundary>\n          <form>\n            <Label htmlFor='error-boundary-input'>Error Boundary Input</Label>\n            <input\n              id='error-boundary-input'\n              type='text'\n            />\n          </form>\n        </ErrorBoundary>,\n      );\n\n      const label = screen.getByText('Error Boundary Input');\n      expect(label.closest('.error-boundary')).toBeInTheDocument();\n    });\n\n    it('handles theme provider contexts', () => {\n      const ThemeProvider = ({\n        theme,\n        children,\n      }: {\n        theme: string;\n        children: React.ReactNode;\n      }) => (\n        <div\n          className={`theme-${theme}`}\n          data-theme={theme}\n        >\n          {children}\n        </div>\n      );\n\n      render(\n        <ThemeProvider theme='dark'>\n          <form>\n            <Label htmlFor='themed-input'>Themed Input</Label>\n            <input\n              id='themed-input'\n              type='text'\n            />\n          </form>\n        </ThemeProvider>,\n      );\n\n      const label = screen.getByText('Themed Input');\n      const themeContainer = label.closest('[data-theme]');\n\n      expect(themeContainer).toHaveAttribute('data-theme', 'dark');\n      expect(themeContainer).toHaveClass('theme-dark');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-edge-cases-basic.test.tsx","messages":[{"ruleId":"no-constant-binary-expression","severity":2,"message":"Unexpected constant truthiness on the left-hand side of a `&&` expression.","line":136,"column":22,"nodeType":"Literal","messageId":"constantShortCircuit","endLine":136,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Label Edge Cases - Basic Tests\n *\n * ä¸“é—¨æµ‹è¯•åŸºæœ¬è¾¹ç¼˜æƒ…å†µï¼ŒåŒ…æ‹¬ï¼š\n * - ç©ºå†…å®¹å¤„ç†\n * - ç‰¹æ®Šå­—ç¬¦å¤„ç†\n * - å†…å®¹ç±»å‹å¤„ç†\n * - æ€§èƒ½æµ‹è¯•\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it } from 'vitest';\nimport { Label } from '@/components/ui/label';\n\ndescribe('Label Edge Cases - Basic Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('ç©ºå†…å®¹å¤„ç†', () => {\n    it('renders empty label', () => {\n      render(<Label data-testid='empty-label'></Label>);\n\n      const label = screen.getByTestId('empty-label');\n      expect(label).toBeInTheDocument();\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles zero as text content', () => {\n      render(<Label data-testid='zero-content'>{0}</Label>);\n\n      const label = screen.getByTestId('zero-content');\n      expect(label).toHaveTextContent('0');\n    });\n\n    it('handles false as text content', () => {\n      render(<Label data-testid='false-content'>{false}</Label>);\n\n      const label = screen.getByTestId('false-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles null as text content', () => {\n      render(<Label data-testid='null-content'>{null}</Label>);\n\n      const label = screen.getByTestId('null-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles undefined as text content', () => {\n      render(<Label data-testid='undefined-content'>{undefined}</Label>);\n\n      const label = screen.getByTestId('undefined-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles empty string as text content', () => {\n      render(<Label data-testid='empty-string'>{''} </Label>);\n\n      const label = screen.getByTestId('empty-string');\n      expect(label).toHaveTextContent('  ');\n    });\n\n    it('handles whitespace-only content', () => {\n      render(<Label data-testid='whitespace'> </Label>);\n\n      const label = screen.getByTestId('whitespace');\n      expect(label).toHaveTextContent('   ');\n    });\n  });\n\n  describe('ç‰¹æ®Šå­—ç¬¦å¤„ç†', () => {\n    it('handles very long text content', () => {\n      const longText = 'A'.repeat(1000);\n      render(<Label data-testid='long-text'>{longText}</Label>);\n\n      const label = screen.getByTestId('long-text');\n      expect(label).toHaveTextContent(longText);\n    });\n\n    it('handles special characters and unicode', () => {\n      const specialText = 'ğŸš€ Special chars: @#$%^&*()_+ ä¸­æ–‡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';\n      render(<Label>{specialText}</Label>);\n\n      const label = screen.getByText(specialText);\n      expect(label).toHaveTextContent(specialText);\n    });\n\n    it('handles newlines and tabs in content', () => {\n      render(<Label data-testid='newlines'>{'Line 1\\nLine 2\\tTabbed'}</Label>);\n\n      const label = screen.getByTestId('newlines');\n      expect(label).toHaveTextContent('Line 1\\nLine 2\\tTabbed');\n    });\n\n    it('handles HTML entities in content', () => {\n      render(\n        <Label data-testid='entities'>\n          &lt;div&gt; &amp; &quot;quotes&quot;\n        </Label>,\n      );\n\n      const label = screen.getByTestId('entities');\n      expect(label).toHaveTextContent('<div> & \"quotes\"');\n    });\n  });\n\n  describe('å†…å®¹ç±»å‹å¤„ç†', () => {\n    it('handles null and undefined props gracefully', () => {\n      render(\n        <Label\n          className={undefined}\n          style={null as any}\n          onClick={undefined}\n          data-testid='null-props'\n        >\n          Content\n        </Label>,\n      );\n\n      const label = screen.getByTestId('null-props');\n      expect(label).toBeInTheDocument();\n    });\n\n    it('handles mixed content types', () => {\n      render(\n        <Label data-testid='mixed-content'>\n          Text {42} {true && 'conditional'} <span>JSX</span>\n        </Label>,\n      );\n\n      const label = screen.getByTestId('mixed-content');\n      expect(label).toHaveTextContent('Text 42 conditional JSX');\n    });\n\n    it('handles deeply nested content', () => {\n      render(\n        <Label data-testid='nested-content'>\n          <div>\n            <span>\n              <strong>Deeply nested</strong>\n            </span>\n          </div>\n        </Label>,\n      );\n\n      const label = screen.getByTestId('nested-content');\n      expect(label).toHaveTextContent('Deeply nested');\n    });\n\n    it('handles conditional rendering', () => {\n      const ConditionalLabel = ({ show }: { show: boolean }) => (\n        <Label data-testid='conditional'>{show ? 'Visible' : null}</Label>\n      );\n\n      const { rerender } = render(<ConditionalLabel show={false} />);\n      let label = screen.getByTestId('conditional');\n      expect(label).toBeEmptyDOMElement();\n\n      rerender(<ConditionalLabel show={true} />);\n      label = screen.getByTestId('conditional');\n      expect(label).toHaveTextContent('Visible');\n    });\n\n    it('handles array of elements', () => {\n      const items = ['Item 1', 'Item 2', 'Item 3'];\n      render(\n        <Label data-testid='array-content'>\n          {items.map((item, index) => (\n            <span key={index}>{item} </span>\n          ))}\n        </Label>,\n      );\n\n      const label = screen.getByTestId('array-content');\n      expect(label).toHaveTextContent('Item 1 Item 2 Item 3 ');\n    });\n\n    it('handles fragments', () => {\n      render(\n        <Label data-testid='fragment-content'>\n          <>\n            <span>Fragment 1</span>\n            <span>Fragment 2</span>\n          </>\n        </Label>,\n      );\n\n      const label = screen.getByTestId('fragment-content');\n      expect(label).toHaveTextContent('Fragment 1Fragment 2');\n    });\n  });\n\n  describe('æ€§èƒ½æµ‹è¯•', () => {\n    it('handles rapid state changes', async () => {\n      const StateChangingLabel = () => {\n        const [count, setCount] = React.useState(0);\n\n        return (\n          <Label\n            data-testid='state-changing'\n            onClick={() => setCount((c) => c + 1)}\n          >\n            Count: {count}\n          </Label>\n        );\n      };\n\n      render(<StateChangingLabel />);\n      const label = screen.getByTestId('state-changing');\n\n      // Rapidly change state\n      for (let i = 0; i < 10; i++) {\n        await user.click(label);\n      }\n\n      expect(label).toHaveTextContent('Count: 10');\n    });\n\n    it('handles memory leaks with event listeners', () => {\n      const MemoryLeakLabel = () => {\n        React.useEffect(() => {\n          const handleResize = () => {\n            // Simulate event listener\n          };\n\n          window.addEventListener('resize', handleResize);\n\n          return () => {\n            window.removeEventListener('resize', handleResize);\n          };\n        }, []);\n\n        return <Label data-testid='memory-leak'>Memory test</Label>;\n      };\n\n      const { unmount } = render(<MemoryLeakLabel />);\n\n      const label = screen.getByTestId('memory-leak');\n      expect(label).toBeInTheDocument();\n\n      // Unmount should clean up event listeners\n      unmount();\n    });\n\n    it('handles performance with many re-renders', () => {\n      const PerformanceLabel = ({ count }: { count: number }) => (\n        <Label data-testid='performance'>Render count: {count}</Label>\n      );\n\n      const { rerender } = render(<PerformanceLabel count={0} />);\n\n      // Simulate many re-renders\n      for (let i = 1; i <= 100; i++) {\n        rerender(<PerformanceLabel count={i} />);\n      }\n\n      const label = screen.getByTestId('performance');\n      expect(label).toHaveTextContent('Render count: 100');\n    });\n\n    it('handles portal content', () => {\n      render(<Label data-testid='portal-content'>Regular content</Label>);\n\n      const label = screen.getByTestId('portal-content');\n      expect(label).toHaveTextContent('Regular content');\n    });\n\n    it('handles error boundaries gracefully', () => {\n      // This would normally be wrapped in an error boundary in a real app\n      render(<Label data-testid='error-boundary'>Safe content</Label>);\n\n      const label = screen.getByTestId('error-boundary');\n      expect(label).toHaveTextContent('Safe content');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-edge-cases.test.tsx","messages":[{"ruleId":"no-constant-binary-expression","severity":2,"message":"Unexpected constant truthiness on the left-hand side of a `&&` expression.","line":159,"column":22,"nodeType":"Literal","messageId":"constantShortCircuit","endLine":159,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Label Edge Cases - Main Tests\n *\n * ä¸»è¦è¾¹ç¼˜æƒ…å†µé›†æˆæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š\n * - æ ¸å¿ƒè¾¹ç¼˜æƒ…å†µéªŒè¯\n * - åŸºæœ¬è¾¹ç¼˜æƒ…å†µæµ‹è¯•\n * - é”™è¯¯å¤„ç†éªŒè¯\n *\n * è¯¦ç»†æµ‹è¯•è¯·å‚è€ƒï¼š\n * - label-edge-cases-basic.test.tsx - åŸºæœ¬è¾¹ç¼˜æƒ…å†µæµ‹è¯•\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it } from 'vitest';\nimport { Label } from '@/components/ui/label';\n\ndescribe('Label Edge Cases - Main Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('æ ¸å¿ƒè¾¹ç¼˜æƒ…å†µéªŒè¯', () => {\n    it('renders empty label', () => {\n      render(<Label data-testid='empty-label'></Label>);\n\n      const label = screen.getByTestId('empty-label');\n      expect(label).toBeInTheDocument();\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles very long text content', () => {\n      const longText = 'A'.repeat(1000);\n      render(<Label data-testid='long-text'>{longText}</Label>);\n\n      const label = screen.getByTestId('long-text');\n      expect(label).toHaveTextContent(longText);\n    });\n\n    it('handles special characters and unicode', () => {\n      const specialText = 'ğŸš€ Special chars: @#$%^&*()_+ ä¸­æ–‡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';\n      render(<Label>{specialText}</Label>);\n\n      const label = screen.getByText(specialText);\n      expect(label).toHaveTextContent(specialText);\n    });\n\n    it('handles rapid state changes', async () => {\n      const StateChangingLabel = () => {\n        const [count, setCount] = React.useState(0);\n\n        return (\n          <Label\n            data-testid='state-changing'\n            onClick={() => setCount((c) => c + 1)}\n          >\n            Count: {count}\n          </Label>\n        );\n      };\n\n      render(<StateChangingLabel />);\n      const label = screen.getByTestId('state-changing');\n\n      // Rapidly change state\n      for (let i = 0; i < 10; i++) {\n        await user.click(label);\n      }\n\n      expect(label).toHaveTextContent('Count: 10');\n    });\n\n    it('handles null and undefined props gracefully', () => {\n      render(\n        <Label\n          className={undefined}\n          style={null as any}\n          onClick={undefined}\n          data-testid='null-props'\n        >\n          Content\n        </Label>,\n      );\n\n      const label = screen.getByTestId('null-props');\n      expect(label).toBeInTheDocument();\n    });\n\n    it('handles zero as text content', () => {\n      render(<Label data-testid='zero-content'>{0}</Label>);\n\n      const label = screen.getByTestId('zero-content');\n      expect(label).toHaveTextContent('0');\n    });\n\n    it('handles false as text content', () => {\n      render(<Label data-testid='false-content'>{false}</Label>);\n\n      const label = screen.getByTestId('false-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles null as text content', () => {\n      render(<Label data-testid='null-content'>{null}</Label>);\n\n      const label = screen.getByTestId('null-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles undefined as text content', () => {\n      render(<Label data-testid='undefined-content'>{undefined}</Label>);\n\n      const label = screen.getByTestId('undefined-content');\n      expect(label).toBeEmptyDOMElement();\n    });\n\n    it('handles empty string as text content', () => {\n      render(<Label data-testid='empty-string'>{''} </Label>);\n\n      const label = screen.getByTestId('empty-string');\n      expect(label).toHaveTextContent('  ');\n    });\n\n    it('handles whitespace-only content', () => {\n      render(<Label data-testid='whitespace'> </Label>);\n\n      const label = screen.getByTestId('whitespace');\n      expect(label).toHaveTextContent('   ');\n    });\n\n    it('handles newlines and tabs in content', () => {\n      render(<Label data-testid='newlines'>{'Line 1\\nLine 2\\tTabbed'}</Label>);\n\n      const label = screen.getByTestId('newlines');\n      expect(label).toHaveTextContent('Line 1\\nLine 2\\tTabbed');\n    });\n\n    it('handles HTML entities in content', () => {\n      render(\n        <Label data-testid='entities'>\n          &lt;div&gt; &amp; &quot;quotes&quot;\n        </Label>,\n      );\n\n      const label = screen.getByTestId('entities');\n      expect(label).toHaveTextContent('<div> & \"quotes\"');\n    });\n\n    it('handles mixed content types', () => {\n      render(\n        <Label data-testid='mixed-content'>\n          Text {42} {true && 'conditional'} <span>JSX</span>\n        </Label>,\n      );\n\n      const label = screen.getByTestId('mixed-content');\n      expect(label).toHaveTextContent('Text 42 conditional JSX');\n    });\n\n    it('handles deeply nested content', () => {\n      render(\n        <Label data-testid='nested-content'>\n          <div>\n            <span>\n              <strong>Deeply nested</strong>\n            </span>\n          </div>\n        </Label>,\n      );\n\n      const label = screen.getByTestId('nested-content');\n      expect(label).toHaveTextContent('Deeply nested');\n    });\n\n    it('handles conditional rendering', () => {\n      const ConditionalLabel = ({ show }: { show: boolean }) => (\n        <Label data-testid='conditional'>{show ? 'Visible' : null}</Label>\n      );\n\n      const { rerender } = render(<ConditionalLabel show={false} />);\n      let label = screen.getByTestId('conditional');\n      expect(label).toBeEmptyDOMElement();\n\n      rerender(<ConditionalLabel show={true} />);\n      label = screen.getByTestId('conditional');\n      expect(label).toHaveTextContent('Visible');\n    });\n\n    it('handles memory leaks with event listeners', () => {\n      const MemoryLeakLabel = () => {\n        React.useEffect(() => {\n          const handleResize = () => {\n            // Simulate event listener\n          };\n\n          window.addEventListener('resize', handleResize);\n\n          return () => {\n            window.removeEventListener('resize', handleResize);\n          };\n        }, []);\n\n        return <Label data-testid='memory-leak'>Memory test</Label>;\n      };\n\n      const { unmount } = render(<MemoryLeakLabel />);\n\n      const label = screen.getByTestId('memory-leak');\n      expect(label).toBeInTheDocument();\n\n      // Unmount should clean up event listeners\n      unmount();\n    });\n\n    it('handles performance with many re-renders', () => {\n      const PerformanceLabel = ({ count }: { count: number }) => (\n        <Label data-testid='performance'>Render count: {count}</Label>\n      );\n\n      const { rerender } = render(<PerformanceLabel count={0} />);\n\n      // Simulate many re-renders\n      for (let i = 1; i <= 100; i++) {\n        rerender(<PerformanceLabel count={i} />);\n      }\n\n      const label = screen.getByTestId('performance');\n      expect(label).toHaveTextContent('Render count: 100');\n    });\n\n    it('handles accessibility with screen readers', () => {\n      render(\n        <Label\n          aria-label='Screen reader label'\n          aria-describedby='description'\n          role='label'\n          data-testid='accessibility'\n        >\n          Accessible content\n        </Label>,\n      );\n\n      const label = screen.getByTestId('accessibility');\n      expect(label).toHaveAttribute('aria-label', 'Screen reader label');\n      expect(label).toHaveAttribute('aria-describedby', 'description');\n      expect(label).toHaveAttribute('role', 'label');\n    });\n\n    it('handles keyboard navigation edge cases', async () => {\n      render(\n        <div>\n          <Label\n            tabIndex={0}\n            data-testid='keyboard-1'\n          >\n            Label 1\n          </Label>\n          <Label\n            tabIndex={0}\n            data-testid='keyboard-2'\n          >\n            Label 2\n          </Label>\n          <Label\n            tabIndex={-1}\n            data-testid='keyboard-3'\n          >\n            Label 3\n          </Label>\n        </div>,\n      );\n\n      const label1 = screen.getByTestId('keyboard-1');\n      const label2 = screen.getByTestId('keyboard-2');\n      const label3 = screen.getByTestId('keyboard-3');\n\n      await user.tab();\n      expect(label1).toHaveFocus();\n\n      await user.tab();\n      expect(label2).toHaveFocus();\n\n      // Label 3 should be skipped due to tabIndex={-1}\n      await user.tab();\n      expect(label3).not.toHaveFocus();\n    });\n\n    it('handles high contrast mode', () => {\n      render(\n        <Label\n          className='contrast-more:border-2 contrast-more:border-black'\n          data-testid='high-contrast'\n        >\n          High contrast content\n        </Label>,\n      );\n\n      const label = screen.getByTestId('high-contrast');\n      expect(label).toHaveClass(\n        'contrast-more:border-2',\n        'contrast-more:border-black',\n      );\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-event-handling-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-event-handling.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-events.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-advanced-integration-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-advanced-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-association-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-association.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-basic-integration-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-basic-integration-essential.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-basic-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-form-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-responsive-basic-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-responsive-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-responsive-behavior.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-state-management-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-state-management.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label-validation-scenarios.test.tsx","messages":[{"ruleId":"no-shadow","severity":1,"message":"'errors' is already declared in the upper scope on line 133 column 16.","line":136,"column":17,"nodeType":"Identifier","messageId":"noShadow","endLine":136,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Label Validation Scenarios Tests\n *\n * Tests for Label component validation scenarios including:\n * - Form validation integration\n * - Error state handling\n * - Custom validation logic\n * - Form library integration patterns\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it } from 'vitest';\nimport { Label } from '@/components/ui/label';\n\ndescribe('Label Validation Scenarios Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('Validation Integration', () => {\n    it('handles form state management', async () => {\n      const FormWithState = () => {\n        const [values, setValues] = React.useState({\n          name: '',\n          email: '',\n        });\n\n        const handleChange =\n          (field: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n            setValues((prev) => ({ ...prev, [field]: e.target.value }));\n          };\n\n        return (\n          <form>\n            <div>\n              <Label htmlFor='state-name'>Name: {values.name}</Label>\n              <input\n                id='state-name'\n                type='text'\n                value={values.name}\n                onChange={handleChange('name')}\n              />\n            </div>\n            <div>\n              <Label htmlFor='state-email'>Email: {values.email}</Label>\n              <input\n                id='state-email'\n                type='email'\n                value={values.email}\n                onChange={handleChange('email')}\n              />\n            </div>\n          </form>\n        );\n      };\n\n      render(<FormWithState />);\n\n      const nameInput = screen.getByLabelText(/Name:/);\n      const emailInput = screen.getByLabelText(/Email:/);\n\n      await user.type(nameInput, 'John');\n      expect(screen.getByText('Name: John')).toBeInTheDocument();\n\n      await user.type(emailInput, 'john@test.com');\n      expect(screen.getByText('Email: john@test.com')).toBeInTheDocument();\n    });\n\n    it('works with form libraries integration', () => {\n      // Simulate integration with form libraries like react-hook-form\n      const FormWithLibrary = () => {\n        const [errors, setErrors] = React.useState<Record<string, string>>({});\n\n        const validate = (field: string, value: string) => {\n          if (!value) {\n            setErrors((prev) => ({\n              ...prev,\n              [field]: 'This field is required',\n            }));\n          } else {\n            setErrors((prev) => {\n              const { [field]: _, ...newErrors } = prev;\n              return newErrors;\n            });\n          }\n        };\n\n        return (\n          <form>\n            <div>\n              <Label\n                htmlFor='lib-name'\n                className={errors.name ? 'text-red-500' : ''}\n              >\n                Name {errors.name && <span>({errors.name})</span>}\n              </Label>\n              <input\n                id='lib-name'\n                type='text'\n                onBlur={(e) => validate('name', e.target.value)}\n                className={errors.name ? 'border-red-500' : ''}\n              />\n            </div>\n          </form>\n        );\n      };\n\n      render(<FormWithLibrary />);\n\n      const nameInput = screen.getByLabelText(/Name/);\n\n      // Trigger validation\n      nameInput.focus();\n      nameInput.blur();\n\n      expect(screen.getByText(/This field is required/)).toBeInTheDocument();\n    });\n\n    it('handles complex validation scenarios', async () => {\n      const ComplexValidationForm = () => {\n        const [values, setValues] = React.useState({\n          password: '',\n          confirmPassword: '',\n        });\n        const [errors, setErrors] = React.useState<Record<string, string>>({});\n\n        const validatePassword = (password: string) => {\n          const errors: string[] = [];\n          if (password.length < 8) errors.push('at least 8 characters');\n          if (!/[A-Z]/.test(password)) errors.push('one uppercase letter');\n          if (!/[a-z]/.test(password)) errors.push('one lowercase letter');\n          if (!/[0-9]/.test(password)) errors.push('one number');\n          return errors;\n        };\n\n        const handlePasswordChange = (\n          e: React.ChangeEvent<HTMLInputElement>,\n        ) => {\n          const password = e.target.value;\n          setValues((prev) => ({ ...prev, password }));\n\n          const validationErrors = validatePassword(password);\n          if (validationErrors.length > 0) {\n            setErrors((prev) => ({\n              ...prev,\n              password: `Password must contain ${validationErrors.join(', ')}`,\n            }));\n          } else {\n            setErrors((prev) => {\n              const { password: _, ...newErrors } = prev;\n              return newErrors;\n            });\n          }\n        };\n\n        const handleConfirmPasswordChange = (\n          e: React.ChangeEvent<HTMLInputElement>,\n        ) => {\n          const confirmPassword = e.target.value;\n          setValues((prev) => ({ ...prev, confirmPassword }));\n\n          if (confirmPassword !== values.password) {\n            setErrors((prev) => ({\n              ...prev,\n              confirmPassword: 'Passwords do not match',\n            }));\n          } else {\n            setErrors((prev) => {\n              const { confirmPassword: _, ...newErrors } = prev;\n              return newErrors;\n            });\n          }\n        };\n\n        return (\n          <form>\n            <div>\n              <Label\n                htmlFor='complex-password'\n                className={errors.password ? 'text-red-500' : ''}\n              >\n                Password\n              </Label>\n              <input\n                id='complex-password'\n                type='password'\n                value={values.password}\n                onChange={handlePasswordChange}\n                className={errors.password ? 'border-red-500' : ''}\n              />\n              {errors.password && (\n                <div className='error-message'>{errors.password}</div>\n              )}\n            </div>\n            <div>\n              <Label\n                htmlFor='complex-confirm'\n                className={errors.confirmPassword ? 'text-red-500' : ''}\n              >\n                Confirm Password\n              </Label>\n              <input\n                id='complex-confirm'\n                type='password'\n                value={values.confirmPassword}\n                onChange={handleConfirmPasswordChange}\n                className={errors.confirmPassword ? 'border-red-500' : ''}\n              />\n              {errors.confirmPassword && (\n                <div className='error-message'>{errors.confirmPassword}</div>\n              )}\n            </div>\n          </form>\n        );\n      };\n\n      render(<ComplexValidationForm />);\n\n      const passwordInput = screen.getByLabelText('Password');\n      const confirmInput = screen.getByLabelText('Confirm Password');\n\n      // Test weak password\n      await user.type(passwordInput, 'weak');\n      expect(screen.getByText(/Password must contain/)).toBeInTheDocument();\n\n      // Test strong password\n      await user.clear(passwordInput);\n      await user.type(passwordInput, 'StrongPass123');\n      expect(\n        screen.queryByText(/Password must contain/),\n      ).not.toBeInTheDocument();\n\n      // Test password mismatch\n      await user.type(confirmInput, 'DifferentPass123');\n      expect(screen.getByText('Passwords do not match')).toBeInTheDocument();\n\n      // Test password match\n      await user.clear(confirmInput);\n      await user.type(confirmInput, 'StrongPass123');\n      expect(\n        screen.queryByText('Passwords do not match'),\n      ).not.toBeInTheDocument();\n    });\n\n    it('handles async validation', async () => {\n      const AsyncValidationForm = () => {\n        const [email, setEmail] = React.useState('');\n        const [isValidating, setIsValidating] = React.useState(false);\n        const [error, _setError] = React.useState('');\n\n        const validateEmail = async (emailValue: string) => {\n          if (!emailValue) return;\n\n          setIsValidating(true);\n          _setError('');\n\n          // Simulate async validation\n          await new Promise((resolve) => setTimeout(resolve, 500));\n\n          if (emailValue === 'taken@example.com') {\n            _setError('This email is already taken');\n          }\n\n          setIsValidating(false);\n        };\n\n        const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n          const value = e.target.value;\n          setEmail(value);\n          validateEmail(value);\n        };\n\n        return (\n          <form>\n            <div>\n              <Label\n                htmlFor='async-email'\n                className={error ? 'text-red-500' : ''}\n              >\n                Email {isValidating && '(Checking...)'}\n              </Label>\n              <input\n                id='async-email'\n                type='email'\n                value={email}\n                onChange={handleEmailChange}\n                className={error ? 'border-red-500' : ''}\n              />\n              {error && <div className='error-message'>{error}</div>}\n            </div>\n          </form>\n        );\n      };\n\n      render(<AsyncValidationForm />);\n\n      const emailInput = screen.getByLabelText(/Email/);\n\n      // Test taken email\n      await user.type(emailInput, 'taken@example.com');\n\n      // Wait for validation\n      expect(screen.getByText(/Checking/)).toBeInTheDocument();\n\n      // Wait for validation to complete\n      await screen.findByText('This email is already taken');\n      expect(\n        screen.getByText('This email is already taken'),\n      ).toBeInTheDocument();\n    });\n\n    it('handles conditional validation', async () => {\n      const ConditionalValidationForm = () => {\n        const [userType, setUserType] = React.useState('');\n        const [companyName, setCompanyName] = React.useState('');\n        const [error, _setError] = React.useState('');\n\n        const validateCompanyName = (value: string) => {\n          if (userType === 'business' && !value) {\n            _setError('Company name is required for business accounts');\n          } else {\n            _setError('');\n          }\n        };\n\n        return (\n          <form>\n            <div>\n              <Label htmlFor='user-type'>User Type</Label>\n              <select\n                id='user-type'\n                value={userType}\n                onChange={(e) => {\n                  setUserType(e.target.value);\n                  validateCompanyName(companyName);\n                }}\n              >\n                <option value=''>Select type</option>\n                <option value='personal'>Personal</option>\n                <option value='business'>Business</option>\n              </select>\n            </div>\n            {userType === 'business' && (\n              <div>\n                <Label\n                  htmlFor='company-name'\n                  className={error ? 'text-red-500' : ''}\n                >\n                  Company Name *\n                </Label>\n                <input\n                  id='company-name'\n                  type='text'\n                  value={companyName}\n                  onChange={(e) => {\n                    setCompanyName(e.target.value);\n                    validateCompanyName(e.target.value);\n                  }}\n                  className={error ? 'border-red-500' : ''}\n                />\n                {error && <div className='error-message'>{error}</div>}\n              </div>\n            )}\n          </form>\n        );\n      };\n\n      render(<ConditionalValidationForm />);\n\n      const userTypeSelect = screen.getByLabelText('User Type');\n\n      // Select business type\n      await user.selectOptions(userTypeSelect, 'business');\n\n      // Company name field should appear\n      expect(screen.getByLabelText('Company Name *')).toBeInTheDocument();\n\n      // Should show validation error\n      expect(\n        screen.getByText('Company name is required for business accounts'),\n      ).toBeInTheDocument();\n\n      // Fill company name\n      const companyInput = screen.getByLabelText('Company Name *');\n      await user.type(companyInput, 'Test Company');\n\n      // Error should disappear\n      expect(\n        screen.queryByText('Company name is required for business accounts'),\n      ).not.toBeInTheDocument();\n\n      // Switch to personal\n      await user.selectOptions(userTypeSelect, 'personal');\n\n      // Company name field should disappear\n      expect(screen.queryByLabelText('Company Name *')).not.toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/label.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-complex.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-interactions.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu-keyboard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/navigation-menu.test.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (651). Maximum allowed is 600.","line":33,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":799,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  NavigationMenu,\n  NavigationMenuContent,\n  NavigationMenuIndicator,\n  NavigationMenuItem,\n  NavigationMenuLink,\n  NavigationMenuList,\n  NavigationMenuTrigger,\n  navigationMenuTriggerStyle,\n} from '../navigation-menu';\n\n// Mock Lucide React icons\nvi.mock('lucide-react', () => ({\n  ChevronDownIcon: ({ className, ...props }: React.ComponentProps<'svg'>) => (\n    <svg\n      data-testid='chevron-down-icon'\n      className={className}\n      {...(props as any)}\n    >\n      <path d='M6 9l6 6 6-6' />\n    </svg>\n  ),\n}));\n\ndescribe('Navigation Menu Components', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('NavigationMenu', () => {\n    it('renders navigation menu with default props', () => {\n      render(\n        <NavigationMenu data-testid='nav-menu'>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navMenu = screen.getByTestId('nav-menu');\n      expect(navMenu).toBeInTheDocument();\n      expect(navMenu).toHaveAttribute('data-slot', 'navigation-menu');\n      expect(navMenu).toHaveAttribute('data-viewport', 'true');\n    });\n\n    it('renders without viewport when viewport=false', () => {\n      render(\n        <NavigationMenu\n          viewport={false}\n          data-testid='nav-menu'\n        >\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navMenu = screen.getByTestId('nav-menu');\n      expect(navMenu).toHaveAttribute('data-viewport', 'false');\n\n      // Viewport should not be rendered\n      expect(screen.queryByTestId('nav-viewport')).not.toBeInTheDocument();\n    });\n\n    it('applies custom className', () => {\n      render(\n        <NavigationMenu\n          className='custom-nav'\n          data-testid='nav-menu'\n        >\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navMenu = screen.getByTestId('nav-menu');\n      expect(navMenu).toHaveClass('custom-nav');\n    });\n\n    it('passes through additional props', () => {\n      render(\n        <NavigationMenu\n          data-testid='nav-menu'\n          role='navigation'\n          aria-label='Main navigation'\n        >\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navMenu = screen.getByTestId('nav-menu');\n      expect(navMenu).toHaveAttribute('role', 'navigation');\n      expect(navMenu).toHaveAttribute('aria-label', 'Main navigation');\n    });\n  });\n\n  describe('NavigationMenuList', () => {\n    it('renders navigation menu list', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList data-testid='nav-list'>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navList = screen.getByTestId('nav-list');\n      expect(navList).toBeInTheDocument();\n      expect(navList).toHaveAttribute('data-slot', 'navigation-menu-list');\n    });\n\n    it('applies default classes', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList data-testid='nav-list'>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navList = screen.getByTestId('nav-list');\n      expect(navList).toHaveClass('group', 'flex', 'flex-1', 'list-none');\n    });\n\n    it('applies custom className', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList\n            className='custom-list'\n            data-testid='nav-list'\n          >\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navList = screen.getByTestId('nav-list');\n      expect(navList).toHaveClass('custom-list');\n    });\n  });\n\n  describe('NavigationMenuItem', () => {\n    it('renders navigation menu item', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem data-testid='nav-item'>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navItem = screen.getByTestId('nav-item');\n      expect(navItem).toBeInTheDocument();\n      expect(navItem).toHaveAttribute('data-slot', 'navigation-menu-item');\n    });\n\n    it('applies default classes', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem data-testid='nav-item'>\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navItem = screen.getByTestId('nav-item');\n      expect(navItem).toHaveClass('relative');\n    });\n\n    it('applies custom className', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem\n              className='custom-item'\n              data-testid='nav-item'\n            >\n              <NavigationMenuTrigger>Item 1</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const navItem = screen.getByTestId('nav-item');\n      expect(navItem).toHaveClass('custom-item');\n    });\n  });\n\n  describe('NavigationMenuTrigger', () => {\n    it('renders navigation menu trigger with chevron icon', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n      expect(trigger).toBeInTheDocument();\n      expect(trigger).toHaveAttribute('data-slot', 'navigation-menu-trigger');\n      expect(trigger).toHaveTextContent('Products');\n\n      const chevronIcon = screen.getByTestId('chevron-down-icon');\n      expect(chevronIcon).toBeInTheDocument();\n      expect(chevronIcon).toHaveAttribute('aria-hidden', 'true');\n    });\n\n    it('applies trigger styles', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n      expect(trigger).toHaveClass('group', 'bg-background', 'inline-flex');\n    });\n\n    it('applies custom className', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger\n                className='custom-trigger'\n                data-testid='nav-trigger'\n              >\n                Products\n              </NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n      expect(trigger).toHaveClass('custom-trigger');\n    });\n\n    it('handles click interactions', async () => {\n      // Mock ResizeObserver properly for this test\n      const mockResizeObserver = vi.fn().mockImplementation(() => ({\n        observe: vi.fn(),\n        unobserve: vi.fn(),\n        disconnect: vi.fn(),\n      }));\n      global.ResizeObserver = mockResizeObserver;\n\n      // Mock window.location to prevent navigation errors\n      const mockLocation = {\n        ...window.location,\n        href: 'http://localhost:3000',\n      };\n      Object.defineProperty(window, 'location', {\n        value: mockLocation,\n        writable: true,\n      });\n\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuContent>\n                <div>Content</div>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n      await user.click(trigger);\n\n      // Trigger should be clickable\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('NavigationMenuContent', () => {\n    it('renders navigation menu content when menu is open', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuContent data-testid='nav-content'>\n                <div>Content goes here</div>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // NavigationMenuContent is only rendered when the menu is open\n      // For testing purposes, we'll verify the structure exists\n      const trigger = screen.getByTestId('nav-trigger');\n      expect(trigger).toBeInTheDocument();\n\n      // The content may not be visible initially due to Radix UI's behavior\n      // This is expected behavior for dropdown menus\n    });\n\n    it('applies default classes when rendered', () => {\n      // Test the component within proper NavigationMenu context\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuContent data-testid='nav-content'>\n                <div>Content</div>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // NavigationMenuContent requires NavigationMenu context\n      // We'll test that the component can be imported and used without errors\n      expect(NavigationMenuContent).toBeDefined();\n    });\n\n    it('applies custom className when provided', () => {\n      // Test that the component accepts className prop within proper context\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuContent\n                className='custom-content'\n                data-testid='nav-content'\n              >\n                <div>Content</div>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // Verify the component is defined and can accept props\n      expect(NavigationMenuContent).toBeDefined();\n    });\n  });\n\n  describe('NavigationMenuLink', () => {\n    it('renders navigation menu link', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuLink\n                href='/products'\n                data-testid='nav-link'\n              >\n                View Products\n              </NavigationMenuLink>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const link = screen.getByTestId('nav-link');\n      expect(link).toBeInTheDocument();\n      expect(link).toHaveAttribute('data-slot', 'navigation-menu-link');\n      expect(link).toHaveAttribute('href', '/products');\n      expect(link).toHaveTextContent('View Products');\n    });\n\n    it('applies default classes', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuLink\n                href='/products'\n                data-testid='nav-link'\n              >\n                View Products\n              </NavigationMenuLink>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const link = screen.getByTestId('nav-link');\n      expect(link).toHaveClass('flex', 'flex-col', 'gap-1', 'rounded-sm');\n    });\n\n    it('applies custom className', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuLink\n                href='/products'\n                className='custom-link'\n                data-testid='nav-link'\n              >\n                View Products\n              </NavigationMenuLink>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const link = screen.getByTestId('nav-link');\n      expect(link).toHaveClass('custom-link');\n    });\n\n    it('handles click interactions', async () => {\n      const handleClick = vi.fn();\n\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuLink\n                href='/products'\n                onClick={handleClick}\n                data-testid='nav-link'\n              >\n                View Products\n              </NavigationMenuLink>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const link = screen.getByTestId('nav-link');\n      await user.click(link);\n\n      expect(handleClick).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe('NavigationMenuIndicator', () => {\n    it('renders navigation menu indicator when menu is active', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuIndicator data-testid='nav-indicator' />\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // NavigationMenuIndicator is only visible when the menu item is active\n      // For testing purposes, we'll verify the structure exists\n      const trigger = screen.getByTestId('nav-trigger');\n      expect(trigger).toBeInTheDocument();\n\n      // The indicator may not be visible initially due to Radix UI's behavior\n      // This is expected behavior for navigation indicators\n    });\n\n    it('component is defined and can be imported', () => {\n      // Test that the component can be imported and used within proper context\n      expect(NavigationMenuIndicator).toBeDefined();\n\n      // Test that it can be rendered within NavigationMenu context\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuIndicator data-testid='nav-indicator' />\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // Component should be defined even if not visible\n      expect(NavigationMenuIndicator).toBeDefined();\n    });\n\n    it('accepts className prop', () => {\n      // Test that the component accepts className prop within proper context\n      expect(NavigationMenuIndicator).toBeDefined();\n\n      // Render with className to verify prop acceptance\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuIndicator\n                className='custom-indicator'\n                data-testid='nav-indicator'\n              />\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // Verify component can accept props\n      expect(NavigationMenuIndicator).toBeDefined();\n    });\n\n    it('can be used within navigation menu structure', () => {\n      // Test that the component can be used within the proper structure\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuIndicator />\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      // Verify the navigation structure renders without errors\n      const trigger = screen.getByText('Products');\n      expect(trigger).toBeInTheDocument();\n    });\n  });\n\n  describe('navigationMenuTriggerStyle', () => {\n    it('returns trigger style classes', () => {\n      const styles = navigationMenuTriggerStyle();\n      expect(styles).toContain('group');\n      expect(styles).toContain('bg-background');\n      expect(styles).toContain('hover:bg-accent');\n      expect(styles).toContain('inline-flex');\n    });\n\n    it('accepts variant options', () => {\n      // Test that the cva function works\n      const styles = navigationMenuTriggerStyle();\n      expect(typeof styles).toBe('string');\n      expect(styles.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('supports keyboard navigation', async () => {\n      // Mock ResizeObserver to prevent errors during keyboard navigation\n      const mockResizeObserver = vi.fn().mockImplementation(() => ({\n        observe: vi.fn(),\n        unobserve: vi.fn(),\n        disconnect: vi.fn(),\n      }));\n      global.ResizeObserver = mockResizeObserver;\n\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuContent>\n                <NavigationMenuLink\n                  href='/product1'\n                  data-testid='nav-link-1'\n                >\n                  Product 1\n                </NavigationMenuLink>\n                <NavigationMenuLink\n                  href='/product2'\n                  data-testid='nav-link-2'\n                >\n                  Product 2\n                </NavigationMenuLink>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n\n      // Focus the trigger\n      trigger.focus();\n      expect(trigger).toHaveFocus();\n\n      // Press Enter to activate - just verify no errors occur\n      await user.keyboard('{Enter}');\n      expect(trigger).toBeInTheDocument();\n    });\n\n    it('provides proper ARIA attributes', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuContent data-testid='nav-content'>\n                <NavigationMenuLink\n                  href='/products'\n                  data-testid='nav-link'\n                >\n                  View All Products\n                </NavigationMenuLink>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n      const chevronIcon = screen.getByTestId('chevron-down-icon');\n\n      expect(chevronIcon).toHaveAttribute('aria-hidden', 'true');\n      expect(trigger).toBeInTheDocument();\n    });\n\n    it('handles focus management', async () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger data-testid='nav-trigger'>\n                Products\n              </NavigationMenuTrigger>\n              <NavigationMenuContent>\n                <NavigationMenuLink\n                  href='/product1'\n                  data-testid='nav-link-1'\n                >\n                  Product 1\n                </NavigationMenuLink>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const trigger = screen.getByTestId('nav-trigger');\n\n      // Tab to the trigger\n      await user.tab();\n      expect(trigger).toHaveFocus();\n    });\n  });\n\n  describe('Integration', () => {\n    it('works with complex navigation structure', () => {\n      render(\n        <NavigationMenu data-testid='main-nav'>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Products</NavigationMenuTrigger>\n              <NavigationMenuContent>\n                <NavigationMenuLink href='/product1'>\n                  Product 1\n                </NavigationMenuLink>\n                <NavigationMenuLink href='/product2'>\n                  Product 2\n                </NavigationMenuLink>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Services</NavigationMenuTrigger>\n              <NavigationMenuContent>\n                <NavigationMenuLink href='/service1'>\n                  Service 1\n                </NavigationMenuLink>\n                <NavigationMenuLink href='/service2'>\n                  Service 2\n                </NavigationMenuLink>\n              </NavigationMenuContent>\n            </NavigationMenuItem>\n            <NavigationMenuItem>\n              <NavigationMenuLink href='/about'>About</NavigationMenuLink>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const mainNav = screen.getByTestId('main-nav');\n      expect(mainNav).toBeInTheDocument();\n\n      expect(screen.getByText('Products')).toBeInTheDocument();\n      expect(screen.getByText('Services')).toBeInTheDocument();\n      expect(screen.getByText('About')).toBeInTheDocument();\n    });\n\n    it('handles multiple navigation items', () => {\n      render(\n        <NavigationMenu>\n          <NavigationMenuList>\n            {['Home', 'Products', 'Services', 'Contact'].map((item) => (\n              <NavigationMenuItem key={item}>\n                <NavigationMenuLink href={`/${item.toLowerCase()}`}>\n                  {item}\n                </NavigationMenuLink>\n              </NavigationMenuItem>\n            ))}\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      expect(screen.getByText('Home')).toBeInTheDocument();\n      expect(screen.getByText('Products')).toBeInTheDocument();\n      expect(screen.getByText('Services')).toBeInTheDocument();\n      expect(screen.getByText('Contact')).toBeInTheDocument();\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('handles empty navigation menu', () => {\n      render(\n        <NavigationMenu data-testid='empty-nav'>\n          <NavigationMenuList />\n        </NavigationMenu>,\n      );\n\n      const nav = screen.getByTestId('empty-nav');\n      expect(nav).toBeInTheDocument();\n    });\n\n    it('handles navigation without viewport', () => {\n      render(\n        <NavigationMenu\n          viewport={false}\n          data-testid='no-viewport-nav'\n        >\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger>Item</NavigationMenuTrigger>\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const nav = screen.getByTestId('no-viewport-nav');\n      expect(nav).toHaveAttribute('data-viewport', 'false');\n    });\n\n    it('handles missing children gracefully', () => {\n      render(\n        <NavigationMenu data-testid='minimal-nav'>\n          <NavigationMenuList>\n            <NavigationMenuItem>\n              <NavigationMenuTrigger />\n            </NavigationMenuItem>\n          </NavigationMenuList>\n        </NavigationMenu>,\n      );\n\n      const nav = screen.getByTestId('minimal-nav');\n      expect(nav).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/separator.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-content.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-edge-cases.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/sheet-text-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-accessibility-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-accessibility-features.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-accessibility-i18n.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-accessibility-integration-core.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":384,"column":35,"nodeType":"MemberExpression","endLine":384,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Social Icons Accessibility & Integration - Core Tests\n *\n * æ ¸å¿ƒå¯è®¿é—®æ€§å’Œé›†æˆæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š\n * - åŸºæœ¬å¯è®¿é—®æ€§åŠŸèƒ½\n * - æ ¸å¿ƒé›†æˆåœºæ™¯\n * - åŸºç¡€äº¤äº’æµ‹è¯•\n */\n\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  ExternalLinkIcon,\n  LinkedInIcon,\n  SocialIconLink,\n  TwitterIcon,\n} from '../social-icons';\n\ndescribe('Social Icons Accessibility & Integration - Core Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('Basic Accessibility Features', () => {\n    it('provides accessible names for social links', () => {\n      render(\n        <div>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          />\n          <SocialIconLink\n            href='https://linkedin.com/in/test'\n            icon='linkedin'\n            label='LinkedIn'\n            ariaLabel='Connect with us on LinkedIn'\n          />\n        </div>,\n      );\n\n      const twitterLink = screen.getByRole('link', { name: /twitter/i });\n      const linkedinLink = screen.getByRole('link', { name: /linkedin/i });\n\n      expect(twitterLink).toBeInTheDocument();\n      expect(linkedinLink).toBeInTheDocument();\n    });\n\n    it('has proper ARIA attributes', () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toHaveAttribute('href', 'https://twitter.com/test');\n      expect(link).toHaveAttribute('target', '_blank');\n      expect(link).toHaveAttribute('rel', 'noopener noreferrer');\n    });\n\n    it('supports keyboard navigation', async () => {\n      render(\n        <div>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          ></SocialIconLink>\n          <SocialIconLink\n            href='https://linkedin.com/in/test'\n            icon='linkedin'\n            label='LinkedIn'\n            ariaLabel='Connect with us on LinkedIn'\n          ></SocialIconLink>\n        </div>,\n      );\n\n      const twitterLink = screen.getByRole('link', { name: /twitter/i });\n      const linkedinLink = screen.getByRole('link', { name: /linkedin/i });\n\n      // Test tab navigation\n      twitterLink.focus();\n      expect(twitterLink).toHaveFocus();\n\n      await user.tab();\n      expect(linkedinLink).toHaveFocus();\n    });\n\n    it('handles external link indicators', () => {\n      render(\n        <SocialIconLink\n          href='https://external.com'\n          platform='external'\n          aria-label='External link'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toHaveAttribute('target', '_blank');\n      expect(link).toHaveAttribute('rel', 'noopener noreferrer');\n    });\n  });\n\n  describe('Core Integration Scenarios', () => {\n    it('works with SocialIconMapper', () => {\n      const socialLinks = [\n        { platform: 'twitter', url: 'https://twitter.com/test' },\n        { platform: 'linkedin', url: 'https://linkedin.com/in/test' },\n      ];\n\n      render(\n        <div>\n          {socialLinks.map((link) => (\n            <SocialIconLink\n              key={link.platform}\n              platform={link.platform}\n              href={link.url}\n              aria-label={`Follow us on ${link.platform}`}\n            />\n          ))}\n        </div>,\n      );\n\n      expect(\n        screen.getByRole('link', { name: /twitter/i }),\n      ).toBeInTheDocument();\n      expect(\n        screen.getByRole('link', { name: /linkedin/i }),\n      ).toBeInTheDocument();\n    });\n\n    it('handles multiple social icons in navigation', () => {\n      render(\n        <nav aria-label='Social Media Links'>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          ></SocialIconLink>\n          <SocialIconLink\n            href='https://linkedin.com/in/test'\n            icon='linkedin'\n            label='LinkedIn'\n            ariaLabel='Connect with us on LinkedIn'\n          ></SocialIconLink>\n        </nav>,\n      );\n\n      const navigation = screen.getByRole('navigation', {\n        name: 'Social Media Links',\n      });\n      expect(navigation).toBeInTheDocument();\n\n      const links = screen.getAllByRole('link');\n      expect(links).toHaveLength(2);\n    });\n\n    it('works in footer context', () => {\n      render(\n        <footer>\n          <div>\n            <h3>Follow Us</h3>\n            <SocialIconLink\n              href='https://twitter.com/test'\n              icon='twitter'\n              label='Twitter'\n              ariaLabel='Follow us on Twitter'\n            ></SocialIconLink>\n            <SocialIconLink\n              href='https://linkedin.com/in/test'\n              icon='linkedin'\n              label='LinkedIn'\n              ariaLabel='Connect with us on LinkedIn'\n            ></SocialIconLink>\n          </div>\n        </footer>,\n      );\n\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n\n      const heading = screen.getByRole('heading', { name: 'Follow Us' });\n      expect(heading).toBeInTheDocument();\n\n      const links = screen.getAllByRole('link');\n      expect(links).toHaveLength(2);\n    });\n\n    it('handles responsive layout integration', () => {\n      render(\n        <div className='flex flex-wrap gap-4'>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          ></SocialIconLink>\n          <SocialIconLink\n            href='https://linkedin.com/in/test'\n            icon='linkedin'\n            label='LinkedIn'\n            ariaLabel='Connect with us on LinkedIn'\n          ></SocialIconLink>\n        </div>,\n      );\n\n      const container = screen.getByRole('generic');\n      expect(container).toHaveClass('flex', 'flex-wrap', 'gap-4');\n\n      const links = screen.getAllByRole('link');\n      expect(links).toHaveLength(2);\n    });\n  });\n\n  describe('Interactive Behavior', () => {\n    it('handles click events', async () => {\n      const mockOpen = vi.fn();\n      Object.defineProperty(window, 'open', {\n        writable: true,\n        value: mockOpen,\n      });\n\n      render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      await user.click(link);\n\n      // Note: In real browser, this would open a new tab\n      // In test environment, we just verify the link is clickable\n      expect(link).toBeInTheDocument();\n    });\n\n    it('handles keyboard activation', async () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      link.focus();\n\n      await user.keyboard('{Enter}');\n      expect(link).toBeInTheDocument();\n    });\n\n    it('provides hover states', async () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n\n      await user.hover(link);\n      expect(link).toBeInTheDocument();\n\n      await user.unhover(link);\n      expect(link).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('handles missing href gracefully', () => {\n      render(\n        <SocialIconLink\n          href=''\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toHaveAttribute('href', '');\n    });\n\n    it('handles unknown platform gracefully', () => {\n      render(\n        <SocialIconLink\n          href='https://example.com'\n          platform='unknown'\n          aria-label='Unknown platform'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toBeInTheDocument();\n    });\n\n    it('handles missing children gracefully', () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        >\n          {/* No children */}\n        </SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toBeInTheDocument();\n    });\n  });\n\n  describe('Theme Integration', () => {\n    it('applies theme classes correctly', () => {\n      render(\n        <div className='dark'>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          ></SocialIconLink>\n        </div>,\n      );\n\n      const container = screen.getByRole('generic');\n      expect(container).toHaveClass('dark');\n\n      const link = screen.getByRole('link');\n      expect(link).toBeInTheDocument();\n    });\n\n    it('handles light theme', () => {\n      render(\n        <div className='light'>\n          <SocialIconLink\n            href='https://twitter.com/test'\n            icon='twitter'\n            label='Twitter'\n            ariaLabel='Follow us on Twitter'\n          ></SocialIconLink>\n        </div>,\n      );\n\n      const container = screen.getByRole('generic');\n      expect(container).toHaveClass('light');\n\n      const link = screen.getByRole('link');\n      expect(link).toBeInTheDocument();\n    });\n  });\n\n  describe('Performance Considerations', () => {\n    it('renders multiple icons efficiently', () => {\n      const platforms = ['twitter', 'linkedin', 'external'];\n      const icons = [TwitterIcon, LinkedInIcon, ExternalLinkIcon];\n\n      render(\n        <div>\n          {platforms.map((platform, index) => {\n            const IconComponent = icons[index];\n            return (\n              <SocialIconLink\n                key={platform}\n                href={`https://${platform}.com/test`}\n                platform={platform}\n                aria-label={`Follow us on ${platform}`}\n              >\n                <IconComponent />\n              </SocialIconLink>\n            );\n          })}\n        </div>,\n      );\n\n      const links = screen.getAllByRole('link');\n      expect(links).toHaveLength(3);\n    });\n\n    it('handles re-renders without issues', () => {\n      const { rerender } = render(\n        <SocialIconLink\n          href='https://twitter.com/test'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      expect(screen.getByRole('link')).toBeInTheDocument();\n\n      rerender(\n        <SocialIconLink\n          href='https://twitter.com/updated'\n          icon='twitter'\n          label='Twitter'\n          ariaLabel='Follow us on Twitter'\n        ></SocialIconLink>,\n      );\n\n      const link = screen.getByRole('link');\n      expect(link).toHaveAttribute('href', 'https://twitter.com/updated');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-accessibility-integration.test.tsx","messages":[{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":132,"column":55,"nodeType":"NewExpression","endLine":132,"endColumn":76}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\n/**\n * Social Icons Accessibility & Integration Tests - Index\n *\n * Basic integration tests for the Social Icons component accessibility and integration.\n * For comprehensive testing, see:\n * - social-icons-accessibility-features.test.tsx - Accessibility features tests\n * - social-icons-integration-scenarios.test.tsx - Integration scenarios tests\n */\n\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  ExternalLinkIcon,\n  LinkedInIcon,\n  SocialIconLink,\n  SocialIconMapper,\n  TwitterIcon,\n} from '../social-icons';\n\ndescribe('Social Icons Accessibility & Integration - Advanced Tests', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n  });\n\n  describe('Complex Integration Scenarios', () => {\n    it('handles advanced accessibility patterns with screen readers', async () => {\n      render(\n        <section aria-labelledby='social-heading'>\n          <h2 id='social-heading'>Connect With Us</h2>\n          <div\n            role='list'\n            aria-label='Social media links'\n          >\n            <div role='listitem'>\n              <SocialIconLink\n                href='https://twitter.com/test'\n                platform='twitter'\n                aria-label='Follow us on Twitter'\n              >\n                <TwitterIcon />\n              </SocialIconLink>\n            </div>\n            <div role='listitem'>\n              <SocialIconLink\n                href='https://linkedin.com/in/test'\n                platform='linkedin'\n                aria-label='Connect with us on LinkedIn'\n              >\n                <LinkedInIcon />\n              </SocialIconLink>\n            </div>\n          </div>\n        </section>,\n      );\n\n      const section = screen.getByRole('region');\n      const heading = screen.getByRole('heading', { name: 'Connect With Us' });\n      const socialList = screen.getByRole('list', {\n        name: 'Social media links',\n      });\n      const listItems = screen.getAllByRole('listitem');\n\n      expect(section).toHaveAttribute('aria-labelledby', 'social-heading');\n      expect(heading).toBeInTheDocument();\n      expect(socialList).toBeInTheDocument();\n      expect(listItems).toHaveLength(2);\n\n      // Test keyboard navigation through the list\n      const links = screen.getAllByRole('link');\n      for (const link of links) {\n        link.focus();\n        expect(link).toHaveFocus();\n        await user.tab();\n      }\n    });\n\n    it('handles complex dynamic social media integration', async () => {\n      const socialPlatforms = [\n        {\n          name: 'twitter',\n          url: 'https://twitter.com/company',\n          icon: TwitterIcon,\n        },\n        {\n          name: 'linkedin',\n          url: 'https://linkedin.com/company/test',\n          icon: LinkedInIcon,\n        },\n        {\n          name: 'external',\n          url: 'https://blog.company.com',\n          icon: ExternalLinkIcon,\n        },\n      ];\n\n      render(\n        <div>\n          <h3>Follow Our Journey</h3>\n          <div className='social-grid'>\n            {socialPlatforms.map(({ name, url, icon: IconComponent }) => (\n              <div\n                key={name}\n                className='social-item'\n              >\n                <SocialIconLink\n                  href={url}\n                  platform={name}\n                  aria-label={`Follow us on ${name}`}\n                >\n                  <IconComponent />\n                </SocialIconLink>\n                <span className='platform-name'>{name}</span>\n              </div>\n            ))}\n          </div>\n        </div>,\n      );\n\n      // Test all platforms are rendered\n      const links = screen.getAllByRole('link');\n      expect(links).toHaveLength(3);\n\n      // Test each platform has correct attributes\n      socialPlatforms.forEach(({ name, url }) => {\n        const link = screen.getByRole('link', { name: new RegExp(name, 'i') });\n        expect(link).toHaveAttribute('href', url);\n        expect(link).toHaveAttribute('target', '_blank');\n      });\n    });\n  });\n\n  describe('External Link Attributes', () => {\n    it('handles external link attributes correctly', () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/example'\n          platform='twitter'\n          aria-label='Twitter'\n          data-testid='external-link'\n        />,\n      );\n\n      const link = screen.getByTestId('external-link');\n      expect(link).toHaveAttribute('target', '_blank');\n      expect(link).toHaveAttribute('rel', 'noopener noreferrer');\n    });\n\n    it('supports keyboard navigation between links', async () => {\n      render(\n        <div>\n          <SocialIconLink\n            href='https://twitter.com/example'\n            platform='twitter'\n            aria-label='Twitter profile'\n            data-testid='twitter-link'\n          />\n          <SocialIconLink\n            href='https://linkedin.com/in/example'\n            platform='linkedin'\n            aria-label='LinkedIn profile'\n            data-testid='linkedin-link'\n          />\n        </div>,\n      );\n\n      const twitterLink = screen.getByTestId('twitter-link');\n      const linkedinLink = screen.getByTestId('linkedin-link');\n\n      // Should be able to tab between links\n      await user.tab();\n      expect(twitterLink).toHaveFocus();\n\n      await user.tab();\n      expect(linkedinLink).toHaveFocus();\n    });\n\n    it('supports high contrast mode', () => {\n      render(\n        <TwitterIcon\n          className='forced-colors:text-[ButtonText]'\n          data-testid='twitter'\n        />,\n      );\n\n      const icon = screen.getByTestId('twitter');\n      expect(icon).toHaveClass('forced-colors:text-[ButtonText]');\n    });\n\n    it('supports reduced motion preferences', () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/example'\n          platform='twitter'\n          aria-label='Twitter'\n          className='motion-reduce:transition-none'\n          data-testid='social-link'\n        />,\n      );\n\n      const link = screen.getByTestId('social-link');\n      expect(link).toHaveClass('motion-reduce:transition-none');\n    });\n\n    it('provides proper focus indicators', () => {\n      render(\n        <SocialIconLink\n          href='https://twitter.com/example'\n          platform='twitter'\n          aria-label='Twitter'\n          className='focus:ring-2 focus:ring-offset-2'\n          data-testid='social-link'\n        />,\n      );\n\n      const link = screen.getByTestId('social-link');\n      expect(link).toHaveClass('focus:ring-2', 'focus:ring-offset-2');\n    });\n\n    it('handles keyboard activation', async () => {\n      const handleClick = vi.fn();\n      render(\n        <SocialIconLink\n          href='https://twitter.com/example'\n          platform='twitter'\n          aria-label='Twitter'\n          data-testid='social-link'\n        />,\n      );\n\n      const link = screen.getByTestId('social-link');\n\n      await user.tab();\n      expect(link).toHaveFocus();\n\n      await user.keyboard('{Enter}');\n      expect(handleClick).toHaveBeenCalled();\n    });\n\n    it('supports internationalization', () => {\n      render(\n        <div lang='es'>\n          <SocialIconLink\n            href='https://twitter.com/example'\n            platform='twitter'\n            aria-label='SÃ­guenos en Twitter'\n            data-testid='social-link'\n          />\n        </div>,\n      );\n\n      const link = screen.getByTestId('social-link');\n      expect(link).toHaveAttribute('aria-label', 'SÃ­guenos en Twitter');\n    });\n\n    it('works in navigation menus', () => {\n      render(\n        <nav aria-label='Social media links'>\n          <ul>\n            <li>\n              <SocialIconLink\n                href='https://twitter.com/example'\n                platform='twitter'\n                aria-label='Twitter'\n                data-testid='nav-twitter'\n              />\n            </li>\n            <li>\n              <SocialIconLink\n                href='https://linkedin.com/in/example'\n                platform='linkedin'\n                aria-label='LinkedIn'\n                data-testid='nav-linkedin'\n              />\n            </li>\n          </ul>\n        </nav>,\n      );\n\n      const nav = screen.getByRole('navigation');\n      expect(nav).toHaveAttribute('aria-label', 'Social media links');\n\n      const twitterLink = screen.getByTestId('nav-twitter');\n      const linkedinLink = screen.getByTestId('nav-linkedin');\n\n      expect(twitterLink).toBeInTheDocument();\n      expect(linkedinLink).toBeInTheDocument();\n    });\n\n    it('works in footer sections', () => {\n      render(\n        <footer>\n          <section aria-labelledby='social-heading'>\n            <h3 id='social-heading'>Follow Us</h3>\n            <div className='flex space-x-4'>\n              <SocialIconLink\n                href='https://twitter.com/example'\n                platform='twitter'\n                aria-label='Twitter'\n                data-testid='footer-twitter'\n              />\n              <SocialIconLink\n                href='https://linkedin.com/in/example'\n                platform='linkedin'\n                aria-label='LinkedIn'\n                data-testid='footer-linkedin'\n              />\n            </div>\n          </section>\n        </footer>,\n      );\n\n      const section = screen.getByRole('region');\n      expect(section).toHaveAttribute('aria-labelledby', 'social-heading');\n\n      const heading = screen.getByText('Follow Us');\n      expect(heading).toBeInTheDocument();\n\n      const twitterLink = screen.getByTestId('footer-twitter');\n      const linkedinLink = screen.getByTestId('footer-linkedin');\n\n      expect(twitterLink).toBeInTheDocument();\n      expect(linkedinLink).toBeInTheDocument();\n    });\n\n    it('works with dynamic platform mapping', () => {\n      const platforms = ['twitter', 'linkedin', 'unknown'];\n\n      render(\n        <div>\n          {platforms.map((platform) => (\n            <SocialIconMapper\n              key={platform}\n              platform={platform}\n              data-testid={`dynamic-${platform}`}\n            />\n          ))}\n        </div>,\n      );\n\n      platforms.forEach((platform) => {\n        const icon = screen.getByTestId(`dynamic-${platform}`);\n        expect(icon).toBeInTheDocument();\n      });\n    });\n\n    it('handles responsive layouts', () => {\n      render(\n        <div className='flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-4'>\n          <SocialIconLink\n            href='https://twitter.com/example'\n            platform='twitter'\n            aria-label='Twitter'\n            className='w-full sm:w-auto'\n            data-testid='responsive-twitter'\n          />\n          <SocialIconLink\n            href='https://linkedin.com/in/example'\n            platform='linkedin'\n            aria-label='LinkedIn'\n            className='w-full sm:w-auto'\n            data-testid='responsive-linkedin'\n          />\n        </div>,\n      );\n\n      const twitterLink = screen.getByTestId('responsive-twitter');\n      const linkedinLink = screen.getByTestId('responsive-linkedin');\n\n      expect(twitterLink).toHaveClass('w-full', 'sm:w-auto');\n      expect(linkedinLink).toHaveClass('w-full', 'sm:w-auto');\n    });\n\n    it('supports theming and customization', () => {\n      render(\n        <div className='dark'>\n          <SocialIconLink\n            href='https://twitter.com/example'\n            platform='twitter'\n            aria-label='Twitter'\n            className='text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400'\n            data-testid='themed-link'\n          />\n        </div>,\n      );\n\n      const link = screen.getByTestId('themed-link');\n      expect(link).toHaveClass(\n        'text-gray-600',\n        'dark:text-gray-300',\n        'hover:text-blue-500',\n        'dark:hover:text-blue-400',\n      );\n    });\n\n    it('works with form integration', () => {\n      render(\n        <form>\n          <fieldset>\n            <legend>Social Media Profiles</legend>\n            <div>\n              <label htmlFor='twitter-url'>Twitter URL</label>\n              <input\n                id='twitter-url'\n                type='url'\n              />\n              <SocialIconMapper\n                platform='twitter'\n                className='ml-2'\n              />\n            </div>\n            <div>\n              <label htmlFor='linkedin-url'>LinkedIn URL</label>\n              <input\n                id='linkedin-url'\n                type='url'\n              />\n              <SocialIconMapper\n                platform='linkedin'\n                className='ml-2'\n              />\n            </div>\n          </fieldset>\n        </form>,\n      );\n\n      const twitterInput = screen.getByLabelText('Twitter URL');\n      const linkedinInput = screen.getByLabelText('LinkedIn URL');\n\n      expect(twitterInput).toBeInTheDocument();\n      expect(linkedinInput).toBeInTheDocument();\n    });\n\n    it('handles error states gracefully', () => {\n      // Test with invalid props\n      expect(() => {\n        render(\n          <div>\n            <SocialIconMapper platform='' />\n            <SocialIconLink\n              href=''\n              platform='twitter'\n              aria-label='Twitter'\n            />\n          </div>,\n        );\n      }).not.toThrow();\n    });\n\n    it('supports server-side rendering', () => {\n      // Test that components render without client-side JavaScript\n      const { container } = render(\n        <div>\n          <TwitterIcon />\n          <LinkedInIcon />\n          <ExternalLinkIcon />\n          <SocialIconMapper platform='twitter' />\n          <SocialIconLink\n            href='https://twitter.com/example'\n            platform='twitter'\n            aria-label='Twitter'\n          />\n        </div>,\n      );\n\n      expect(container.innerHTML).toBeTruthy();\n      expect(container.querySelectorAll('svg')).toHaveLength(5);\n    });\n\n    it('maintains performance with many icons', () => {\n      const manyIcons = Array.from({ length: 50 }, (_, i) => (\n        <SocialIconMapper\n          key={i}\n          platform={i % 2 === 0 ? 'twitter' : 'linkedin'}\n          data-testid={`icon-${i}`}\n        />\n      ));\n\n      const _startTime = performance.now();\n      render(<div>{manyIcons}</div>);\n      const endTime = performance.now();\n\n      // Should render quickly (less than 100ms for 50 icons)\n      expect(endTime - _startTime).toBeLessThan(100);\n\n      // All icons should be present\n      expect(screen.getAllByTestId(/^icon-/)).toHaveLength(50);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-integration-scenarios-basic-core.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-integration-scenarios-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-integration-scenarios.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-link-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-link.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-mapper-links.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons-mapper.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/social-icons.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/tabs-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/tabs-basic.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/tabs-content.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/tabs-integration.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/__tests__/tabs-trigger.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/animated-counter-helpers.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":75,"column":7,"nodeType":"MemberExpression","endLine":75,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":77,"column":5,"nodeType":"MemberExpression","endLine":77,"endColumn":16},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":77,"column":19,"nodeType":"MemberExpression","endLine":77,"endColumn":30}],"suppressedMessages":[{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":77,"column":39,"nodeType":"Literal","endLine":77,"endColumn":62,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_4, MAGIC_16 } from \"@/constants/count\";\nimport { COUNT_PAIR, ONE, ZERO } from '@/constants';\n\nimport { MAGIC_0_5 } from \"@/constants/decimal\";\nimport * as React from 'react';\n\n/**\n * Animation constants to avoid magic numbers\n */\nconst ANIMATION_CONSTANTS = {\n  HALF_POINT: MAGIC_0_5,\n  DOUBLE_MULTIPLIER: COUNT_PAIR,\n  CUBIC_MULTIPLIER: COUNT_4,\n  EASE_ADJUSTMENT: COUNT_PAIR,\n} as const;\n\n/**\n * Animation configuration interface\n */\nexport interface AnimationConfig {\n  duration: number;\n  easing: (_t: number) => number;\n  onUpdate?: (_value: number) => void;\n  onComplete?: () => void;\n}\n\n/**\n * Easing functions for animations\n */\nexport const easingFunctions = {\n  linear: (t: number) => t,\n  easeInOut: (t: number) =>\n    t < ANIMATION_CONSTANTS.HALF_POINT\n      ? ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER * t * t\n      : -ONE +\n        (ANIMATION_CONSTANTS.CUBIC_MULTIPLIER -\n          ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER * t) *\n          t,\n  easeOut: (t: number) => t * (ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER - t),\n  easeIn: (t: number) => t * t,\n  easeInCubic: (t: number) => t * t * t,\n  easeOutCubic: (t: number) => {\n    const adjustedT = t - ONE;\n    return adjustedT * adjustedT * adjustedT + ONE;\n  },\n  easeInOutCubic: (t: number) =>\n    t < ANIMATION_CONSTANTS.HALF_POINT\n      ? ANIMATION_CONSTANTS.CUBIC_MULTIPLIER * t * t * t\n      : (t - ONE) *\n          (ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER * t -\n            ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER) *\n          (ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER * t -\n            ANIMATION_CONSTANTS.DOUBLE_MULTIPLIER) +\n        ONE,\n};\n\n/**\n * Format number with separators\n */\nexport function formatNumber(\n  value: number,\n  options: {\n    decimals?: number;\n    separator?: string;\n    prefix?: string;\n    suffix?: string;\n  } = {},\n): string {\n  const { decimals = ZERO, separator = ',', prefix = '', suffix = '' } = options;\n\n  const formattedValue = value.toFixed(decimals);\n  const parts = formattedValue.split('.');\n\n  // Add thousand separators - using safe static regex pattern\n  if (parts[ZERO]) {\n    // eslint-disable-next-line security/detect-unsafe-regex\n    parts[ZERO] = parts[ZERO].replace(/\\B(?=(\\d{3})+(?!\\d))/g, separator);\n  }\n\n  return prefix + parts.join('.') + suffix;\n}\n\n/**\n * Animation utilities for performance and compatibility\n */\nexport const animationUtils = {\n  getTime: () => {\n    if (typeof performance !== 'undefined' && performance.now) {\n      return performance.now();\n    }\n    return Date.now();\n  },\n\n  scheduleFrame: (callback: (_time: number) => void) => {\n    if (typeof requestAnimationFrame !== 'undefined') {\n      return requestAnimationFrame(callback);\n    }\n    // Fallback to setTimeout for environments without requestAnimationFrame\n    const FRAME_DURATION = MAGIC_16; // 16ms for 60fps\n    return setTimeout(\n      () => callback(animationUtils.getTime()),\n      FRAME_DURATION,\n    ) as unknown as number;\n  },\n\n  cancelFrame: (id: number) => {\n    if (typeof cancelAnimationFrame !== 'undefined') {\n      cancelAnimationFrame(id);\n    } else {\n      clearTimeout(id);\n    }\n  },\n};\n\n/**\n * Animation hook for counter values\n */\nexport function useCounterAnimation(\n  targetValue: number,\n  config: AnimationConfig,\n) {\n  const [currentValue, setCurrentValue] = React.useState(ZERO);\n  const animationRef = React.useRef<number | null>(null);\n  const startTimeRef = React.useRef<number | null>(null);\n  const startValueRef = React.useRef(ZERO);\n\n  const animate = React.useCallback(\n    (timestamp: number) => {\n      if (startTimeRef.current === null) {\n        startTimeRef.current = timestamp;\n        startValueRef.current = currentValue;\n      }\n\n      const elapsed = timestamp - startTimeRef.current;\n      const progress = Math.min(elapsed / config.duration, ONE);\n      const easedProgress = config.easing(progress);\n\n      const newValue =\n        startValueRef.current +\n        (targetValue - startValueRef.current) * easedProgress;\n\n      setCurrentValue(newValue);\n      config.onUpdate?.(newValue);\n\n      if (progress < ONE) {\n        animationRef.current = requestAnimationFrame(animate);\n      } else {\n        config.onComplete?.();\n        animationRef.current = null;\n        startTimeRef.current = null;\n      }\n    },\n    [targetValue, config, currentValue],\n  );\n\n  React.useEffect(() => {\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n    }\n\n    startTimeRef.current = null;\n    animationRef.current = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [animate]);\n\n  return currentValue;\n}\n\n/**\n * Get current time for animation\n */\nexport function getCurrentTime(): number {\n  if (typeof performance !== 'undefined' && performance.now) {\n    return performance.now();\n  }\n  return Date.now();\n}\n\n/**\n * Schedule animation frame with fallback\n */\nexport function scheduleAnimationFrame(\n  callback: (_time: number) => void,\n): number {\n  if (typeof requestAnimationFrame !== 'undefined') {\n    return requestAnimationFrame(callback);\n  }\n  // Fallback to setTimeout for environments without requestAnimationFrame\n  const FRAME_DURATION = MAGIC_16; // 16ms for 60fps\n  return setTimeout(\n    () => callback(getCurrentTime()),\n    FRAME_DURATION,\n  ) as unknown as number;\n}\n\n/**\n * Cancel animation frame with fallback\n */\nexport function cancelAnimationFrame(id: number): void {\n  if (typeof window !== 'undefined' && window.cancelAnimationFrame) {\n    window.cancelAnimationFrame(id);\n  } else {\n    clearTimeout(id);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/animated-counter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/carousel.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-you-might-not-need-an-effect/no-pass-data-to-parent","severity":2,"message":"Avoid passing data to parents in an effect. Instead, let the parent fetch the data itself and pass it down to the child as a prop.","line":106,"column":7,"nodeType":"CallExpression","messageId":"avoidPassingDataToParent","endLine":106,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/prose.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/social-icons.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'react' import is duplicated.","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":10,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Social Media Icons Component\n *\n * Provides SVG icons for social media platforms used in the footer.\n * Based on the reference design with clean, minimal styling.\n */\n\nimport { MAGIC_16, MAGIC_20 } from \"@/constants/count\";\nimport type { FC } from 'react';\nimport React from 'react';\n\ninterface SocialIconProps {\n  'className'?: string;\n  'size'?: number;\n  'data-testid'?: string;\n}\n\n// Twitter/X Icon\nexport const TwitterIcon: FC<SocialIconProps> = ({\n  className = '',\n  size = MAGIC_20,\n  'data-testid': dataTestId,\n}) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox='0 0 24 24'\n    fill='currentColor'\n    className={className}\n    aria-hidden='true'\n    {...(dataTestId && { 'data-testid': dataTestId })}\n  >\n    <path d='M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z' />\n  </svg>\n);\n\n// LinkedIn Icon\nexport const LinkedInIcon: FC<SocialIconProps> = ({\n  className = '',\n  size = MAGIC_20,\n  'data-testid': dataTestId,\n}) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox='0 0 24 24'\n    fill='currentColor'\n    className={className}\n    aria-hidden='true'\n    {...(dataTestId && { 'data-testid': dataTestId })}\n  >\n    <path d='M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z' />\n  </svg>\n);\n\n// External Link Icon (for external links)\nexport const ExternalLinkIcon: FC<SocialIconProps> = ({\n  className = '',\n  size = MAGIC_16,\n  'data-testid': dataTestId,\n}) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox='0 0 24 24'\n    fill='none'\n    stroke='currentColor'\n    strokeWidth='2'\n    strokeLinecap='round'\n    strokeLinejoin='round'\n    className={className}\n    aria-hidden='true'\n    {...(dataTestId && { 'data-testid': dataTestId })}\n  >\n    <path d='M7 17L17 7' />\n    <path d='M7 7h10v10' />\n  </svg>\n);\n\n// Social Icon Mapper\ninterface SocialIconMapperProps {\n  'platform': string;\n  'className'?: string;\n  'size'?: number;\n  'data-testid'?: string;\n}\n\nexport const SocialIconMapper: FC<SocialIconMapperProps> = ({\n  platform,\n  className,\n  size,\n  'data-testid': dataTestId,\n}) => {\n  const iconProps = {\n    ...(className && { className }),\n    ...(size && { size }),\n    ...(dataTestId && { 'data-testid': dataTestId }),\n  };\n\n  switch (platform.toLowerCase()) {\n    case 'twitter':\n    case 'x':\n      return <TwitterIcon {...iconProps} />;\n    case 'linkedin':\n      return <LinkedInIcon {...iconProps} />;\n    default:\n      return null;\n  }\n};\n\n// Social Icon with Link Component - Support both interface styles\ninterface SocialIconLinkPropsV1 {\n  'href': string;\n  'icon': string;\n  'label': string;\n  'ariaLabel': string;\n  'className'?: string;\n  'iconSize'?: number;\n  'data-testid'?: string;\n}\n\ninterface SocialIconLinkPropsV2 {\n  'href': string;\n  'platform': string;\n  'aria-label': string;\n  'className'?: string;\n  'iconSize'?: number;\n  'data-testid'?: string;\n  'children'?: React.ReactNode;\n}\n\ntype SocialIconLinkProps = SocialIconLinkPropsV1 | SocialIconLinkPropsV2;\n\nexport const SocialIconLink: FC<SocialIconLinkProps> = (props) => {\n  // Check which interface is being used\n  const isV1 = 'icon' in props && 'label' in props && 'ariaLabel' in props;\n  const isV2 = 'platform' in props && 'aria-label' in props;\n\n  if (isV1) {\n    const {\n      href,\n      icon,\n      label,\n      ariaLabel,\n      className = '',\n      iconSize = MAGIC_20,\n      'data-testid': dataTestId,\n    } = props as SocialIconLinkPropsV1;\n\n    return (\n      <a\n        href={href}\n        target='_blank'\n        rel='noopener noreferrer'\n        aria-label={ariaLabel}\n        className={`inline-flex items-center gap-2 text-gray-600 transition-colors duration-200 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 ${className}`}\n        {...(dataTestId && { 'data-testid': dataTestId })}\n      >\n        <SocialIconMapper\n          platform={icon}\n          size={iconSize}\n        />\n        <span className='text-sm'>{label}</span>\n      </a>\n    );\n  }\n\n  if (isV2) {\n    const {\n      href,\n      platform,\n      'aria-label': ariaLabel,\n      className = '',\n      iconSize = MAGIC_20,\n      'data-testid': dataTestId,\n      children,\n    } = props as SocialIconLinkPropsV2;\n\n    return (\n      <a\n        href={href}\n        target='_blank'\n        rel='noopener noreferrer'\n        aria-label={ariaLabel}\n        className={`text-muted-foreground hover:bg-accent hover:text-accent-foreground inline-flex items-center justify-center rounded-md p-2 transition-colors ${className}`}\n        {...(dataTestId && { 'data-testid': dataTestId })}\n      >\n        {children || (\n          <SocialIconMapper\n            platform={platform}\n            size={iconSize}\n          />\n        )}\n      </a>\n    );\n  }\n\n  // Fallback for invalid props\n  return null;\n};\n\nexport default SocialIconMapper;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/components/ui/toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/__tests__/paths.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/__tests__/security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/app.ts","messages":[{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 86_400.","line":98,"column":45,"nodeType":"Literal","messageId":"noMagic","endLine":98,"endColumn":51},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 3_600.","line":102,"column":47,"nodeType":"Literal","messageId":"noMagic","endLine":102,"endColumn":52},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 0.1.","line":130,"column":59,"nodeType":"Literal","messageId":"noMagic","endLine":130,"endColumn":62},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 0.1.","line":148,"column":49,"nodeType":"Literal","messageId":"noMagic","endLine":148,"endColumn":52},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 3_600.","line":162,"column":41,"nodeType":"Literal","messageId":"noMagic","endLine":162,"endColumn":46}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CODEXåˆ†å±‚æ²»ç†ï¼šåº”ç”¨é…ç½®é›†ä¸­åŒ–\n *\n * ğŸ¯ ç›®æ ‡ï¼šå°†ç«¯å£ã€è¶…æ—¶ã€é‡è¯•æ¬¡æ•°ç­‰é…ç½®å€¼ä»é­”æ³•æ•°å­—å¸¸é‡åº“ä¸­åˆ†ç¦»\n * ğŸ“Š ä¼˜åŠ¿ï¼šé…ç½®ä¸ä¸šåŠ¡å¸¸é‡åˆ†ç¦»ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–ï¼Œä¾¿äºéƒ¨ç½²é…ç½®\n * ğŸ”„ é…åˆenv.mjsè¿›è¡Œç±»å‹å®‰å…¨çš„ç¯å¢ƒå˜é‡éªŒè¯\n */\n\nimport { env } from '@/env.mjs';\n\n// ============================================================================\n// ç½‘ç»œå’ŒAPIé…ç½®\n// ============================================================================\n\n/**\n * ç½‘ç»œè¶…æ—¶é…ç½® (æ¯«ç§’)\n */\nexport const NETWORK_CONFIG = {\n  /** APIè¯·æ±‚é»˜è®¤è¶…æ—¶ */\n  API_TIMEOUT: env.API_TIMEOUT ?? 30_000,\n  /** æ–‡ä»¶ä¸Šä¼ è¶…æ—¶ */\n  UPLOAD_TIMEOUT: env.UPLOAD_TIMEOUT ?? 120_000,\n  /** WebSocketè¿æ¥è¶…æ—¶ */\n  WEBSOCKET_TIMEOUT: env.WEBSOCKET_TIMEOUT ?? 10_000,\n  /** å¥åº·æ£€æŸ¥è¶…æ—¶ */\n  HEALTH_CHECK_TIMEOUT: env.HEALTH_CHECK_TIMEOUT ?? 5_000,\n} as const;\n\n/**\n * é‡è¯•é…ç½®\n */\nexport const RETRY_CONFIG = {\n  /** é»˜è®¤é‡è¯•æ¬¡æ•° */\n  DEFAULT_RETRIES: env.DEFAULT_RETRIES ?? 3,\n  /** APIè¯·æ±‚é‡è¯•æ¬¡æ•° */\n  API_RETRIES: env.API_RETRIES ?? 3,\n  /** æ–‡ä»¶ä¸Šä¼ é‡è¯•æ¬¡æ•° */\n  UPLOAD_RETRIES: env.UPLOAD_RETRIES ?? 2,\n  /** é‡è¯•å»¶è¿ŸåŸºæ•° (æ¯«ç§’) */\n  RETRY_DELAY_BASE: env.RETRY_DELAY_BASE ?? 1_000,\n} as const;\n\n/**\n * é€Ÿç‡é™åˆ¶é…ç½®\n */\nexport const RATE_LIMIT_CONFIG = {\n  /** APIè¯·æ±‚é€Ÿç‡é™åˆ¶ (æ¯åˆ†é’Ÿ) */\n  API_REQUESTS_PER_MINUTE: env.API_REQUESTS_PER_MINUTE ?? 60,\n  /** æ–‡ä»¶ä¸Šä¼ é€Ÿç‡é™åˆ¶ (æ¯å°æ—¶) */\n  UPLOADS_PER_HOUR: env.UPLOADS_PER_HOUR ?? 10,\n  /** è”ç³»è¡¨å•æäº¤é™åˆ¶ (æ¯å°æ—¶) */\n  CONTACT_FORMS_PER_HOUR: env.CONTACT_FORMS_PER_HOUR ?? 5,\n} as const;\n\n// ============================================================================\n// å¼€å‘æœåŠ¡å™¨é…ç½®\n// ============================================================================\n\n/**\n * å¼€å‘æœåŠ¡å™¨ç«¯å£é…ç½®\n */\nexport const DEV_SERVER_CONFIG = {\n  /** ä¸»åº”ç”¨ç«¯å£ */\n  MAIN_PORT: env.PORT ?? 3000,\n  /** APIæœåŠ¡ç«¯å£ */\n  API_PORT: env.API_PORT ?? 4000,\n  /** å¼€å‘å·¥å…·ç«¯å£ - æ›¿ä»£é­”æ³•æ•°å­—8888 */\n  DEV_TOOLS_PORT: env.DEV_TOOLS_PORT ?? 8888,\n  /** æµ‹è¯•æœåŠ¡å™¨ç«¯å£ - æ›¿ä»£é­”æ³•æ•°å­—8900 */\n  TEST_PORT: env.TEST_PORT ?? 8900,\n  /** æ€§èƒ½ç›‘æ§ç«¯å£ */\n  MONITORING_PORT: env.MONITORING_PORT ?? 8888,\n  /** APIç›‘æ§ç«¯å£ */\n  API_MONITORING_PORT: env.API_MONITORING_PORT ?? 8900,\n} as const;\n\n/**\n * çƒ­é‡è½½å’Œå¼€å‘ä½“éªŒé…ç½®\n */\nexport const DEV_EXPERIENCE_CONFIG = {\n  /** çƒ­é‡è½½å»¶è¿Ÿ (æ¯«ç§’) */\n  HOT_RELOAD_DELAY: env.HOT_RELOAD_DELAY ?? 250,\n  /** æ–‡ä»¶ç›‘å¬é˜²æŠ–å»¶è¿Ÿ (æ¯«ç§’) */\n  FILE_WATCH_DEBOUNCE: env.FILE_WATCH_DEBOUNCE ?? 300,\n  /** å¼€å‘å·¥å…·åˆ·æ–°é—´éš” (æ¯«ç§’) */\n  DEV_TOOLS_REFRESH_INTERVAL: env.DEV_TOOLS_REFRESH_INTERVAL ?? 1_000,\n} as const;\n\n// ============================================================================\n// æ€§èƒ½å’Œç¼“å­˜é…ç½®\n// ============================================================================\n\n/**\n * ç¼“å­˜é…ç½®\n */\nexport const CACHE_CONFIG = {\n  /** é™æ€èµ„æºç¼“å­˜æ—¶é—´ (ç§’) */\n  STATIC_CACHE_TTL: env.STATIC_CACHE_TTL ?? 86_400, // 24å°æ—¶\n  /** APIå“åº”ç¼“å­˜æ—¶é—´ (ç§’) */\n  API_CACHE_TTL: env.API_CACHE_TTL ?? 300, // 5åˆ†é’Ÿ\n  /** ç”¨æˆ·ä¼šè¯ç¼“å­˜æ—¶é—´ (ç§’) */\n  SESSION_CACHE_TTL: env.SESSION_CACHE_TTL ?? 3_600, // 1å°æ—¶\n  /** å›½é™…åŒ–ç¼“å­˜æ—¶é—´ (ç§’) */\n  I18N_CACHE_TTL: env.I18N_CACHE_TTL ?? 1_800, // 30åˆ†é’Ÿ\n} as const;\n\n/**\n * å†…å­˜é™åˆ¶é…ç½® (å­—èŠ‚)\n */\nexport const MEMORY_CONFIG = {\n  /** æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ */\n  MAX_UPLOAD_SIZE: env.MAX_UPLOAD_SIZE ?? 10 * 1024 * 1024, // 10MB\n  /** è¯·æ±‚ä½“å¤§å°é™åˆ¶ */\n  MAX_REQUEST_SIZE: env.MAX_REQUEST_SIZE ?? 1024 * 1024, // 1MB\n  /** ç¼“å­˜å¤§å°é™åˆ¶ */\n  MAX_CACHE_SIZE: env.MAX_CACHE_SIZE ?? 100 * 1024 * 1024, // 100MB\n  /** æ—¥å¿—æ–‡ä»¶å¤§å°é™åˆ¶ */\n  MAX_LOG_SIZE: env.MAX_LOG_SIZE ?? 50 * 1024 * 1024, // 50MB\n} as const;\n\n// ============================================================================\n// ç›‘æ§å’Œè¯Šæ–­é…ç½®\n// ============================================================================\n\n/**\n * æ€§èƒ½ç›‘æ§é…ç½®\n */\nexport const MONITORING_CONFIG = {\n  /** æ€§èƒ½æŒ‡æ ‡é‡‡æ ·ç‡ (0-1) */\n  PERFORMANCE_SAMPLE_RATE: env.PERFORMANCE_SAMPLE_RATE ?? 0.1,\n  /** é”™è¯¯é‡‡æ ·ç‡ (0-1) */\n  ERROR_SAMPLE_RATE: env.ERROR_SAMPLE_RATE ?? 1.0,\n  /** ç›‘æ§æ•°æ®ä¸ŠæŠ¥é—´éš” (æ¯«ç§’) */\n  MONITORING_INTERVAL: env.MONITORING_INTERVAL ?? 30_000,\n  /** å¥åº·æ£€æŸ¥é—´éš” (æ¯«ç§’) */\n  HEALTH_CHECK_INTERVAL: env.HEALTH_CHECK_INTERVAL ?? 60_000,\n} as const;\n\n/**\n * Web Vitalsé˜ˆå€¼é…ç½®\n */\nexport const WEB_VITALS_CONFIG = {\n  /** LCPè‰¯å¥½é˜ˆå€¼ (æ¯«ç§’) */\n  LCP_GOOD_THRESHOLD: env.LCP_GOOD_THRESHOLD ?? 2_500,\n  /** FIDè‰¯å¥½é˜ˆå€¼ (æ¯«ç§’) */\n  FID_GOOD_THRESHOLD: env.FID_GOOD_THRESHOLD ?? 100,\n  /** CLSè‰¯å¥½é˜ˆå€¼ */\n  CLS_GOOD_THRESHOLD: env.CLS_GOOD_THRESHOLD ?? 0.1,\n  /** TTFBè‰¯å¥½é˜ˆå€¼ (æ¯«ç§’) */\n  TTFB_GOOD_THRESHOLD: env.TTFB_GOOD_THRESHOLD ?? 800,\n} as const;\n\n// ============================================================================\n// å®‰å…¨é…ç½®\n// ============================================================================\n\n/**\n * å®‰å…¨ç›¸å…³é…ç½®\n */\nexport const SECURITY_CONFIG = {\n  /** JWTè¿‡æœŸæ—¶é—´ (ç§’) */\n  JWT_EXPIRES_IN: env.JWT_EXPIRES_IN ?? 3_600, // 1å°æ—¶\n  /** å¯†ç å“ˆå¸Œè½®æ•° */\n  BCRYPT_ROUNDS: env.BCRYPT_ROUNDS ?? 12,\n  /** CSRFä»¤ç‰Œé•¿åº¦ */\n  CSRF_TOKEN_LENGTH: env.CSRF_TOKEN_LENGTH ?? 32,\n  /** ä¼šè¯è¶…æ—¶æ—¶é—´ (ç§’) */\n  SESSION_TIMEOUT: env.SESSION_TIMEOUT ?? 1_800, // 30åˆ†é’Ÿ\n} as const;\n\n// ============================================================================\n// åŠŸèƒ½å¼€å…³é…ç½®\n// ============================================================================\n\n/**\n * åŠŸèƒ½å¼€å…³é…ç½®\n */\nexport const FEATURE_FLAGS = {\n  /** å¯ç”¨æ€§èƒ½ç›‘æ§ */\n  ENABLE_PERFORMANCE_MONITORING: env.ENABLE_PERFORMANCE_MONITORING ?? true,\n  /** å¯ç”¨é”™è¯¯è¿½è¸ª */\n  ENABLE_ERROR_TRACKING: env.ENABLE_ERROR_TRACKING ?? true,\n  /** å¯ç”¨A/Bæµ‹è¯• */\n  ENABLE_AB_TESTING: env.ENABLE_AB_TESTING ?? false,\n  /** å¯ç”¨è°ƒè¯•æ¨¡å¼ */\n  ENABLE_DEBUG_MODE: env.NODE_ENV === 'development',\n} as const;\n\n// ============================================================================\n// ç±»å‹å¯¼å‡º\n// ============================================================================\n\nexport type NetworkConfig = typeof NETWORK_CONFIG;\nexport type RetryConfig = typeof RETRY_CONFIG;\nexport type RateLimitConfig = typeof RATE_LIMIT_CONFIG;\nexport type DevServerConfig = typeof DEV_SERVER_CONFIG;\nexport type DevExperienceConfig = typeof DEV_EXPERIENCE_CONFIG;\nexport type CacheConfig = typeof CACHE_CONFIG;\nexport type MemoryConfig = typeof MEMORY_CONFIG;\nexport type MonitoringConfig = typeof MONITORING_CONFIG;\nexport type WebVitalsConfig = typeof WEB_VITALS_CONFIG;\nexport type SecurityConfig = typeof SECURITY_CONFIG;\nexport type FeatureFlags = typeof FEATURE_FLAGS;\n\n/**\n * å®Œæ•´åº”ç”¨é…ç½®ç±»å‹\n */\nexport interface AppConfig {\n  network: NetworkConfig;\n  retry: RetryConfig;\n  rateLimit: RateLimitConfig;\n  devServer: DevServerConfig;\n  devExperience: DevExperienceConfig;\n  cache: CacheConfig;\n  memory: MemoryConfig;\n  monitoring: MonitoringConfig;\n  webVitals: WebVitalsConfig;\n  security: SecurityConfig;\n  features: FeatureFlags;\n}\n\n/**\n * è·å–å®Œæ•´åº”ç”¨é…ç½®\n */\nexport const getAppConfig = (): AppConfig => ({\n  network: NETWORK_CONFIG,\n  retry: RETRY_CONFIG,\n  rateLimit: RATE_LIMIT_CONFIG,\n  devServer: DEV_SERVER_CONFIG,\n  devExperience: DEV_EXPERIENCE_CONFIG,\n  cache: CACHE_CONFIG,\n  memory: MEMORY_CONFIG,\n  monitoring: MONITORING_CONFIG,\n  webVitals: WEB_VITALS_CONFIG,\n  security: SECURITY_CONFIG,\n  features: FEATURE_FLAGS,\n});\n\n/**\n * é…ç½®éªŒè¯å‡½æ•°\n */\nexport const validateAppConfig = (config: AppConfig): boolean => {\n  // åŸºæœ¬éªŒè¯é€»è¾‘ - ç¡®ä¿æ•°å€¼ç±»å‹æ¯”è¾ƒ\n  return (\n    Number(config.network.API_TIMEOUT) > 0 &&\n    Number(config.retry.DEFAULT_RETRIES) >= 0 &&\n    Number(config.devServer.MAIN_PORT) > 0 &&\n    Number(config.cache.STATIC_CACHE_TTL) > 0 &&\n    Number(config.memory.MAX_UPLOAD_SIZE) > 0 &&\n    Number(config.monitoring.PERFORMANCE_SAMPLE_RATE) >= 0 &&\n    Number(config.monitoring.PERFORMANCE_SAMPLE_RATE) <= 1 &&\n    Number(config.webVitals.LCP_GOOD_THRESHOLD) > 0 &&\n    Number(config.security.JWT_EXPIRES_IN) > 0\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths/locales-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths/paths-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths/site-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/paths/utils.ts","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":28,"column":22,"nodeType":"MemberExpression","endLine":28,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":32,"column":10,"nodeType":"MemberExpression","endLine":32,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":80,"column":7,"nodeType":"MemberExpression","endLine":80,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":113,"column":22,"nodeType":"MemberExpression","endLine":113,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":116,"column":11,"nodeType":"MemberExpression","endLine":116,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":123,"column":11,"nodeType":"MemberExpression","endLine":123,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":133,"column":22,"nodeType":"MemberExpression","endLine":133,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/config/security.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RANDOM_ID_BASE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ALERT_SYSTEM_CONSTANTS } from \"@/constants/performance-constants\";\nimport { COUNT_PAIR, ZERO } from '@/constants';\n\nconst {RANDOM_ID_BASE} = ALERT_SYSTEM_CONSTANTS;\nimport { MAGIC_15 } from \"@/constants/count\";\n\n/**\n * Security configuration for the application\n * Includes CSP, security headers, and other security-related settings\n */\n\n/**\n * Content Security Policy configuration\n */\nexport function generateCSP(nonce?: string): string {\n  const isDevelopment = process.env.NODE_ENV === 'development';\n  const isProduction = process.env.NODE_ENV === 'production';\n\n  // Base CSP directives\n  const cspDirectives = {\n    'default-src': [\"'self'\"],\n    'script-src': [\n      \"'self'\",\n      // Allow inline scripts with nonce in production, unsafe-inline in development\n      ...(isDevelopment ? [\"'unsafe-inline'\", \"'unsafe-eval'\"] : []),\n      ...(nonce ? [`'nonce-${nonce}'`] : []),\n      // Vercel Analytics\n      'https://va.vercel-scripts.com',\n      // Sentry\n      'https://js.sentry-cdn.com',\n      // Cloudflare Turnstile\n      'https://challenges.cloudflare.com',\n      // Google Analytics (if enabled)\n      'https://www.googletagmanager.com',\n      'https://www.google-analytics.com',\n    ],\n    'style-src': [\n      \"'self'\",\n      // Only allow unsafe-inline in development for Tailwind CSS\n      ...(isDevelopment ? [\"'unsafe-inline'\"] : []),\n      ...(nonce ? [`'nonce-${nonce}'`] : []),\n      'https://fonts.googleapis.com',\n    ],\n    'img-src': [\n      \"'self'\",\n      'data:',\n      'https:',\n      // Vercel Analytics\n      'https://va.vercel-scripts.com',\n      // External image sources\n      'https://images.unsplash.com',\n      'https://via.placeholder.com',\n    ],\n    'font-src': [\"'self'\", 'data:', 'https://fonts.gstatic.com'],\n    'connect-src': [\n      \"'self'\",\n      // Vercel Analytics\n      'https://vitals.vercel-insights.com',\n      // Sentry\n      'https://o4507902318592000.ingest.us.sentry.io',\n      // API endpoints\n      ...(isDevelopment ? ['http://localhost:*', 'ws://localhost:*'] : []),\n      // External APIs\n      'https://api.resend.com',\n    ],\n    'frame-src': [\n      \"'none'\",\n      // Cloudflare Turnstile\n      'https://challenges.cloudflare.com',\n    ],\n    'object-src': [\"'none'\"],\n    'base-uri': [\"'self'\"],\n    'form-action': [\"'self'\"],\n    'frame-ancestors': [\"'none'\"],\n    'upgrade-insecure-requests': isProduction ? [] : undefined,\n  };\n\n  // Convert directives to CSP string\n  return Object.entries(cspDirectives)\n    .filter(([, value]) => value !== undefined)\n    .map(([key, value]) => {\n      if (Array.isArray(value) && value.length > ZERO) {\n        return `${key} ${value.join(' ')}`;\n      }\n      return key;\n    })\n    .join('; ');\n}\n\n/**\n * Security headers configuration\n */\nexport function getSecurityHeaders(nonce?: string, testMode = false) {\n  // Use process.env here to keep this module safe for Next config evaluation.\n  // Runtime env validation lives in env.mjs, but importing it here would break next.config load.\n  const isSecurityEnabled =\n    (testMode || process.env.NODE_ENV === 'test')\n      ? process.env.SECURITY_HEADERS_ENABLED !== 'false'\n      : process.env.SECURITY_HEADERS_ENABLED !== 'false';\n\n  if (!isSecurityEnabled) {\n    return [];\n  }\n\n  return [\n    // Prevent clickjacking\n    {\n      key: 'X-Frame-Options',\n      value: 'DENY',\n    },\n    // Prevent MIME type sniffing\n    {\n      key: 'X-Content-Type-Options',\n      value: 'nosniff',\n    },\n    // Referrer policy\n    {\n      key: 'Referrer-Policy',\n      value: 'strict-origin-when-cross-origin',\n    },\n    // HSTS (HTTP Strict Transport Security)\n    {\n      key: 'Strict-Transport-Security',\n      value: 'max-age=63072000; includeSubDomains; preload',\n    },\n    // XSS Protection (legacy, but still useful)\n    {\n      key: 'X-XSS-Protection',\n      value: '1; mode=block',\n    },\n    // Content Security Policy\n    {\n      key: 'Content-Security-Policy',\n      value: generateCSP(nonce),\n    },\n    // Permissions Policy (formerly Feature Policy)\n    {\n      key: 'Permissions-Policy',\n      value: [\n        'camera=()',\n        'microphone=()',\n        'geolocation=()',\n        'interest-cohort=()',\n        'payment=()',\n        'usb=()',\n      ].join(', '),\n    },\n    // Cross-Origin policies\n    {\n      key: 'Cross-Origin-Embedder-Policy',\n      value: 'unsafe-none', // Changed from require-corp for compatibility\n    },\n    {\n      key: 'Cross-Origin-Opener-Policy',\n      value: 'same-origin',\n    },\n    {\n      key: 'Cross-Origin-Resource-Policy',\n      value: 'cross-origin',\n    },\n  ];\n}\n\n/**\n * Generate a cryptographically secure nonce for CSP\n */\n// Constants for nonce generation\nconst NONCE_CONSTANTS = {\n  RADIX_36: ALERT_SYSTEM_CONSTANTS.RANDOM_ID_BASE,\n  SUBSTRING_START: COUNT_PAIR,\n  SUBSTRING_END: MAGIC_15,\n} as const;\n\nexport function generateNonce(): string {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID().replace(/-/g, '');\n  }\n\n  // Fallback for environments without crypto.randomUUID\n  return (\n    Math.random()\n      .toString(NONCE_CONSTANTS.RADIX_36)\n      .substring(\n        NONCE_CONSTANTS.SUBSTRING_START,\n        NONCE_CONSTANTS.SUBSTRING_END,\n      ) +\n    Math.random()\n      .toString(NONCE_CONSTANTS.RADIX_36)\n      .substring(NONCE_CONSTANTS.SUBSTRING_START, NONCE_CONSTANTS.SUBSTRING_END)\n  );\n}\n\n/**\n * Security mode configuration\n */\nexport const SECURITY_MODES = {\n  strict: {\n    cspReportOnly: false,\n    enforceHTTPS: true,\n    strictTransportSecurity: true,\n    contentTypeOptions: true,\n    frameOptions: 'DENY',\n    xssProtection: true,\n  },\n  moderate: {\n    cspReportOnly: false,\n    enforceHTTPS: true,\n    strictTransportSecurity: true,\n    contentTypeOptions: true,\n    frameOptions: 'SAMEORIGIN',\n    xssProtection: true,\n  },\n  relaxed: {\n    cspReportOnly: true,\n    enforceHTTPS: false,\n    strictTransportSecurity: false,\n    contentTypeOptions: true,\n    frameOptions: 'SAMEORIGIN',\n    xssProtection: false,\n  },\n} as const;\n\n/**\n * Get security configuration based on mode\n */\nexport function getSecurityConfig(testMode = false) {\n  // Use process.env directly in tests to avoid env validation issues\n  const mode =\n    (testMode || process.env.NODE_ENV === 'test'\n      ? process.env.NEXT_PUBLIC_SECURITY_MODE\n      : process.env.NEXT_PUBLIC_SECURITY_MODE) || 'strict';\n  return SECURITY_MODES[mode as keyof typeof SECURITY_MODES];\n}\n\n/**\n * Validate CSP nonce\n */\nexport function isValidNonce(nonce: string): boolean {\n  // Nonce should be at least 16 characters and contain only alphanumeric characters\n  return /^[a-zA-Z0-9]{16,}$/.test(nonce);\n}\n\n/**\n * CSP report endpoint handler type\n */\nexport interface CSPReport {\n  'csp-report': {\n    'document-uri': string;\n    'referrer': string;\n    'violated-directive': string;\n    'effective-directive': string;\n    'original-policy': string;\n    'disposition': string;\n    'blocked-uri': string;\n    'line-number': number;\n    'column-number': number;\n    'source-file': string;\n    'status-code': number;\n    'script-sample': string;\n  };\n}\n\n/**\n * Security utilities\n */\nexport const SecurityUtils = {\n  generateCSP,\n  getSecurityHeaders,\n  generateNonce,\n  getSecurityConfig,\n  isValidNonce,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/__tests__/app-constants.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/__tests__/index.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":94,"column":11,"nodeType":"VariableDeclaration","endLine":94,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":96,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":112,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @vitest-environment jsdom\n */\n\nimport { describe, expect, it } from 'vitest';\n\ndescribe('Constants Index Module', () => {\n  describe('Module Exports', () => {\n    it('should be able to import the constants index module', async () => {\n      expect(async () => {\n        await import('../index');\n      }).not.toThrow();\n    });\n\n    it('should export all constant modules', async () => {\n      const constantsModule = await import('../index');\n      expect(constantsModule).toBeDefined();\n    });\n  });\n\n  describe('Re-exported Constants', () => {\n    it('should re-export APP_CONSTANTS', async () => {\n      const { APP_CONSTANTS } = await import('../index');\n      expect(APP_CONSTANTS).toBeDefined();\n      expect(typeof APP_CONSTANTS).toBe('object');\n    });\n\n    it('should re-export SECURITY_CONSTANTS', async () => {\n      const { SECURITY_CONSTANTS } = await import('../index');\n      expect(SECURITY_CONSTANTS).toBeDefined();\n      expect(typeof SECURITY_CONSTANTS).toBe('object');\n    });\n\n    it('should re-export SEO_CONSTANTS', async () => {\n      const { SEO_CONSTANTS } = await import('../index');\n      expect(SEO_CONSTANTS).toBeDefined();\n      expect(typeof SEO_CONSTANTS).toBe('object');\n    });\n\n    it('should re-export TEST_CONSTANTS', async () => {\n      const { TEST_CONSTANTS } = await import('../index');\n      expect(TEST_CONSTANTS).toBeDefined();\n      expect(typeof TEST_CONSTANTS).toBe('object');\n    });\n  });\n\n  describe('Module Structure', () => {\n    it('should have proper module structure', () => {\n      const fs = require('fs');\n      const path = require('path');\n      const indexPath = path.join(__dirname, '../index.ts');\n      const content = fs.readFileSync(indexPath, 'utf8');\n\n      // éªŒè¯åŒ…å«æ‰€æœ‰å¿…è¦çš„å¯¼å‡º\n      expect(content).toContain(\"export * from './i18n-constants'\");\n      expect(content).toContain(\"export * from './app-constants'\");\n      expect(content).toContain(\"export * from './test-constants'\");\n      expect(content).toContain(\"export * from './security-constants'\");\n      expect(content).toContain(\"export * from './seo-constants'\");\n    });\n\n    it('should have re-export statements', () => {\n      const fs = require('fs');\n      const path = require('path');\n      const indexPath = path.join(__dirname, '../index.ts');\n      const content = fs.readFileSync(indexPath, 'utf8');\n\n      expect(content).toContain('export { APP_CONSTANTS }');\n      expect(content).toContain('export { SECURITY_CONSTANTS }');\n      expect(content).toContain('export { SEO_CONSTANTS }');\n      expect(content).toContain('export { TEST_CONSTANTS }');\n    });\n  });\n\n  describe('TypeScript Compilation', () => {\n    it('should compile without TypeScript errors', async () => {\n      expect(async () => {\n        await import('../index');\n      }).not.toThrow();\n    });\n\n    it('should import all modules successfully', async () => {\n      // æµ‹è¯•æ‰€æœ‰æ¨¡å—éƒ½å¯ä»¥è¢«æˆåŠŸå¯¼å…¥\n      const modules = [\n        '../i18n-constants',\n        '../app-constants',\n        '../test-constants',\n        '../security-constants',\n        '../seo-constants',\n      ];\n\n      for (const modulePath of modules) {\n        try {\n          const module = await import(modulePath);\n          expect(module).toBeDefined();\n        } catch (error) {\n          // å¦‚æœæ¨¡å—ä¸å­˜åœ¨ï¼Œè¿™æ˜¯é¢„æœŸçš„ï¼Œä¸åº”è¯¥å¯¼è‡´æµ‹è¯•å¤±è´¥\n          console.warn(`Module ${modulePath} not found, skipping test`);\n        }\n      }\n    });\n  });\n\n  describe('Constants Availability', () => {\n    it('should make constants available through index', async () => {\n      try {\n        const constantsModule = await import('../index');\n\n        // éªŒè¯è‡³å°‘æœ‰ä¸€äº›å¯¼å‡º\n        const exports = Object.keys(constantsModule);\n        expect(exports.length).toBeGreaterThan(0);\n      } catch (error) {\n        // å¦‚æœæŸäº›å¸¸é‡æ¨¡å—ä¸å­˜åœ¨ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„\n        console.warn('Some constants modules may not exist yet');\n      }\n    });\n\n    it('should provide centralized access to all constants', () => {\n      // éªŒè¯ç´¢å¼•æ–‡ä»¶çš„ç›®çš„ï¼šæä¾›é›†ä¸­è®¿é—®ç‚¹\n      const fs = require('fs');\n      const path = require('path');\n      const indexPath = path.join(__dirname, '../index.ts');\n      const content = fs.readFileSync(indexPath, 'utf8');\n\n      // éªŒè¯æ–‡ä»¶åŒ…å«é€‚å½“çš„æ³¨é‡Šè¯´æ˜å…¶ç”¨é€”\n      expect(content).toContain('å¸¸é‡æ¨¡å—ç»Ÿä¸€å¯¼å‡º');\n      expect(content).toContain('æä¾›é¡¹ç›®ä¸­æ‰€æœ‰å¸¸é‡çš„é›†ä¸­è®¿é—®ç‚¹');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/app-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PERCENTAGE_FULL' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HOURS_PER_DAY' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":78}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { PERCENTAGE_FULL, SECONDS_PER_MINUTE, MINUTES_PER_HOUR, HOURS_PER_DAY } from '@/constants';\n\n/**\n * åº”ç”¨ç¨‹åºå¸¸é‡å®šä¹‰\n * é›†ä¸­ç®¡ç†åº”ç”¨ä¸­çš„é­”æ³•æ•°å­—ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§\n * éµå¾ªé¡¹ç›®ç¼–ç æ ‡å‡†ï¼šåªå…è®¸ 0/1/-1/100/HTTPçŠ¶æ€ç  ä½œä¸ºé­”æ³•æ•°å­—\n */\n\n// ==================== åŸºç¡€æ•°å­—å¸¸é‡ ====================\n\n/** åŸºç¡€æ•°å­—å¸¸é‡ - ç”¨äºæ„å»ºå…¶ä»–å¸¸é‡ */\nconst BASE_NUMBERS = {\n  // æ—¶é—´ç›¸å…³åŸºç¡€å•ä½\n  MILLISECONDS_PER_SECOND: 1000,\n  SECONDS_PER_MINUTE: 60,\n  MINUTES_PER_HOUR: 60,\n  HOURS_PER_DAY: 24,\n\n  // å­˜å‚¨å’Œå¤§å°åŸºç¡€å•ä½\n  BYTES_PER_KB: 1024,\n  KB_PER_MB: 1024,\n\n  // ç™¾åˆ†æ¯”å’Œæ¯”ä¾‹åŸºç¡€\n  PERCENTAGE_FULL: 100,\n  HALF_PERCENTAGE: 50,\n\n  // å¸¸ç”¨æ•°å€¼\n  SMALL_COUNT: 2,\n  MEDIUM_COUNT: 5,\n  LARGE_COUNT: 10,\n  VERY_LARGE_COUNT: 20,\n\n  // è§’åº¦ç›¸å…³\n  FULL_CIRCLE_DEGREES: 360,\n} as const;\n\n// ==================== æ—¶é—´ç›¸å…³å¸¸é‡ ====================\n\n/** æ—¶é—´å•ä½å¸¸é‡ (æ¯«ç§’) */\nexport const TIME_CONSTANTS = {\n  /** 1ç§’ = 1000æ¯«ç§’ */\n  SECOND: BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** 1åˆ†é’Ÿ = 60ç§’ */\n  MINUTE:\n    BASE_NUMBERS.SECONDS_PER_MINUTE * BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** 1å°æ—¶ = 60åˆ†é’Ÿ */\n  HOUR:\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** 1å¤© = 24å°æ—¶ */\n  FULL_DAY:\n    BASE_NUMBERS.HOURS_PER_DAY *\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** 25å°æ—¶ = 25 * 60 * 60 * 1000æ¯«ç§’ */\n  TWENTY_FIVE_HOURS:\n    (BASE_NUMBERS.HOURS_PER_DAY + 1) *\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n} as const;\n\n/** å»¶è¿Ÿå’Œè¶…æ—¶å¸¸é‡ (æ¯«ç§’) */\nexport const DELAY_CONSTANTS = {\n  /** çŸ­å»¶è¿Ÿ - 100msï¼Œç”¨äºUIåŠ¨ç”»å’Œè¿‡æ¸¡ */\n  SHORT_DELAY: 100,\n\n  /** ä¸­ç­‰å»¶è¿Ÿ - 300msï¼Œç”¨äºç”¨æˆ·åé¦ˆ */\n  MEDIUM_DELAY: 300,\n\n  /** æ ‡å‡†è¶…æ—¶ - 1000msï¼Œç”¨äºä¸€èˆ¬æ“ä½œ */\n  STANDARD_TIMEOUT: TIME_CONSTANTS.SECOND,\n\n  /** æ‰©å±•è¶…æ—¶ - 1100msï¼Œç”¨äºéœ€è¦é¢å¤–æ—¶é—´çš„æ“ä½œ */\n  EXTENDED_TIMEOUT: TIME_CONSTANTS.SECOND + BASE_NUMBERS.PERCENTAGE_FULL,\n\n  /** é•¿è¶…æ—¶ - 2000msï¼Œç”¨äºå¤æ‚æ“ä½œ */\n  LONG_TIMEOUT: BASE_NUMBERS.SMALL_COUNT * TIME_CONSTANTS.SECOND,\n\n  /** æ¸…ç†å»¶è¿Ÿ - 1000msï¼Œç”¨äºæ¸…ç†æ“ä½œ */\n  CLEANUP_DELAY: TIME_CONSTANTS.SECOND,\n} as const;\n\n// ==================== å¤§å°å’Œå°ºå¯¸å¸¸é‡ ====================\n\n/** å†…å®¹é•¿åº¦é™åˆ¶å¸¸é‡ */\nexport const CONTENT_LIMITS = {\n  /** æ ‡é¢˜æœ€å¤§é•¿åº¦ - 60å­—ç¬¦ */\n  TITLE_MAX_LENGTH: 60,\n\n  /** æè¿°æœ€å¤§é•¿åº¦ - 160å­—ç¬¦ */\n  DESCRIPTION_MAX_LENGTH: 160,\n\n  /** å‡½æ•°æœ€å¤§è¡Œæ•° - 80è¡Œ */\n  FUNCTION_MAX_LINES: 80,\n\n  /** æ–‡ä»¶æœ€å¤§è¡Œæ•° - 500è¡Œ */\n  FILE_MAX_LINES: 500,\n\n  /** æœ€å¤§å¤æ‚åº¦ - 10 */\n  MAX_COMPLEXITY: 10,\n\n  /** æœ€å¤§åµŒå¥—å±‚æ•° - 3 */\n  MAX_NESTED_CALLBACKS: 3,\n\n  /** æœ€å¤§æ–‡ä»¶å¤§å° - 1MB (1024 * 1024 bytes) */\n  MAX_FILE_SIZE: BASE_NUMBERS.BYTES_PER_KB * BASE_NUMBERS.KB_PER_MB,\n} as const;\n\n/** å†…å­˜å¤§å°å¸¸é‡ */\nexport const MEMORY_CONSTANTS = {\n  /** 1MBçš„å­—èŠ‚æ•° */\n  MB: BASE_NUMBERS.BYTES_PER_KB * BASE_NUMBERS.KB_PER_MB,\n  /** 1KBçš„å­—èŠ‚æ•° */\n  KB: BASE_NUMBERS.BYTES_PER_KB,\n} as const;\n\n/** MBå¸¸é‡ - ç”¨äºå‘åå…¼å®¹ */\nexport const {MB} = MEMORY_CONSTANTS;\n\n/** åˆ†é¡µå’Œåˆ—è¡¨å¸¸é‡ */\nexport const PAGINATION_CONSTANTS = {\n  /** é»˜è®¤é¡µé¢å¤§å° - 10æ¡ */\n  DEFAULT_PAGE_SIZE: BASE_NUMBERS.LARGE_COUNT,\n\n  /** å°é¡µé¢å¤§å° - 5æ¡ */\n  SMALL_PAGE_SIZE: BASE_NUMBERS.MEDIUM_COUNT,\n\n  /** å¤§é¡µé¢å¤§å° - 20æ¡ */\n  LARGE_PAGE_SIZE: BASE_NUMBERS.VERY_LARGE_COUNT,\n\n  /** æœ€å¤§é¡µé¢å¤§å° - 100æ¡ */\n  MAX_PAGE_SIZE: BASE_NUMBERS.PERCENTAGE_FULL,\n} as const;\n\n// ==================== UIå’Œç”¨æˆ·ä½“éªŒå¸¸é‡ ====================\n\n/** é€æ˜åº¦å’Œä¸é€æ˜åº¦å¸¸é‡ */\nexport const OPACITY_CONSTANTS = {\n  /** å®Œå…¨é€æ˜ */\n  TRANSPARENT: 0,\n\n  /** ä½é€æ˜åº¦ - 30% */\n  LOW_OPACITY: 0.3,\n\n  /** ä¸­ç­‰é€æ˜åº¦ - 50% */\n  MEDIUM_OPACITY: 0.5,\n\n  /** ä¸­é«˜é€æ˜åº¦ - 75% */\n  MEDIUM_HIGH_OPACITY: 0.75,\n\n  /** é«˜é€æ˜åº¦ - 80% */\n  HIGH_OPACITY: 0.8,\n\n  /** å¾ˆé«˜é€æ˜åº¦ - 90% */\n  VERY_HIGH_OPACITY: 0.9,\n\n  /** å®Œå…¨ä¸é€æ˜ */\n  OPAQUE: 1,\n} as const;\n\n/** ç™¾åˆ†æ¯”å¸¸é‡ */\nexport const PERCENTAGE_CONSTANTS = {\n  /** å®Œæ•´ç™¾åˆ†æ¯” - 100% */\n  FULL: BASE_NUMBERS.PERCENTAGE_FULL,\n\n  /** ä¸€åŠç™¾åˆ†æ¯” - 50% */\n  HALF: BASE_NUMBERS.HALF_PERCENTAGE,\n\n  /** å››åˆ†ä¹‹ä¸€ - 25% */\n  QUARTER: 25,\n\n  /** 60% */\n  SIXTY: 60,\n} as const;\n\n// ==================== æ€§èƒ½å’Œç›‘æ§å¸¸é‡ ====================\n\n/** æ—¶é—´æˆ³åŸºå‡†å€¼ */\nconst TIMESTAMP_BASE = BASE_NUMBERS.MILLISECONDS_PER_SECOND;\n\n/** æ€§èƒ½é˜ˆå€¼å¸¸é‡ */\nexport const PERFORMANCE_CONSTANTS = {\n  /** æ—¶é—´æˆ³åŸºå‡† - 1000 (ç”¨äºæ€§èƒ½æµ‹è¯•) */\n  TIMESTAMP_BASE,\n\n  /** æ—¶é—´æˆ³åç§» - 1005 */\n  TIMESTAMP_OFFSET: 1005,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1010 */\n  TIMESTAMP_INCREMENT_SMALL: 1010,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1020 */\n  TIMESTAMP_INCREMENT_MEDIUM: 1020,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1150 */\n  TIMESTAMP_INCREMENT_LARGE:\n    TIMESTAMP_BASE +\n    (BASE_NUMBERS.PERCENTAGE_FULL + BASE_NUMBERS.HALF_PERCENTAGE),\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1200 */\n  TIMESTAMP_INCREMENT_XL: 1200,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1250 */\n  TIMESTAMP_INCREMENT_XXL:\n    TIMESTAMP_BASE +\n    (BASE_NUMBERS.PERCENTAGE_FULL * BASE_NUMBERS.SMALL_COUNT +\n      BASE_NUMBERS.HALF_PERCENTAGE),\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1300 */\n  TIMESTAMP_INCREMENT_XXXL: 1300,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1400 */\n  TIMESTAMP_INCREMENT_HUGE: 1400,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1450 */\n  TIMESTAMP_INCREMENT_MASSIVE: 1450,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1500 */\n  TIMESTAMP_INCREMENT_EXTREME: 1500,\n\n  /** å¤§æ•°å€¼åŸºå‡† - 200000 */\n  LARGE_NUMBER_BASE: 200000,\n\n  /** å¤§æ•°å€¼åç§» - 200100 */\n  LARGE_NUMBER_OFFSET: 200100,\n\n  /** å¤§æ•°å€¼å¢é‡ - 300000 */\n  LARGE_INCREMENT: 300000,\n} as const;\n\n/** æµ‹è¯•å’Œè°ƒè¯•å¸¸é‡ */\nexport const DEBUG_CONSTANTS = {\n  /** åå…­è¿›åˆ¶å¤§æ•° - 0x80000000 */\n  HEX_LARGE_NUMBER: 0x80000000,\n\n  /** è´Ÿæ•°æµ‹è¯•å€¼ - -100 */\n  NEGATIVE_TEST_VALUE: -100,\n\n  /** è§’åº¦æµ‹è¯•å€¼ - 360åº¦ */\n  ANGLE_FULL_CIRCLE: BASE_NUMBERS.FULL_CIRCLE_DEGREES,\n\n  /** å°æ•°å€¼ - 2 */\n  SMALL_COUNT: BASE_NUMBERS.SMALL_COUNT,\n} as const;\n\n// ==================== å¯¼å‡ºæ‰€æœ‰å¸¸é‡ ====================\n\n/** æ‰€æœ‰åº”ç”¨å¸¸é‡çš„ç»Ÿä¸€å¯¼å‡º */\nexport const APP_CONSTANTS = Object.freeze({\n  TIME: TIME_CONSTANTS,\n  DELAY: DELAY_CONSTANTS,\n  CONTENT: CONTENT_LIMITS,\n  PAGINATION: PAGINATION_CONSTANTS,\n  OPACITY: OPACITY_CONSTANTS,\n  PERCENTAGE: PERCENTAGE_CONSTANTS,\n  PERFORMANCE: PERFORMANCE_CONSTANTS,\n  DEBUG: DEBUG_CONSTANTS,\n} as const);\n\n/** å¸¸é‡ç±»å‹å®šä¹‰ */\nexport type AppConstants = typeof APP_CONSTANTS;\nexport type TimeConstants = typeof TIME_CONSTANTS;\nexport type DelayConstants = typeof DELAY_CONSTANTS;\nexport type ContentLimits = typeof CONTENT_LIMITS;\nexport type PaginationConstants = typeof PAGINATION_CONSTANTS;\nexport type OpacityConstants = typeof OPACITY_CONSTANTS;\nexport type PercentageConstants = typeof PERCENTAGE_CONSTANTS;\nexport type PerformanceConstants = typeof PERFORMANCE_CONSTANTS;\nexport type DebugConstants = typeof DEBUG_CONSTANTS;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/count.ts","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'./time' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTE_MS' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"no-duplicate-imports","severity":2,"message":"'./time' import is duplicated.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":3,"endColumn":40},{"ruleId":"no-restricted-imports","severity":2,"message":"'./time' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":3,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DAYS_PER_WEEK' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"no-restricted-imports","severity":2,"message":"'./performance-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'./security-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-web-vitals-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ANGLE_90_DEG' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ONE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TEN_SECONDS_MS' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ZERO' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":11},{"ruleId":"prefer-destructuring","severity":2,"message":"Use object destructuring.","line":14,"column":7,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":14,"endColumn":61,"fix":{"range":[462,516],"text":"{RANDOM_ID_BASE} = ALERT_SYSTEM_CONSTANTS"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RANDOM_ID_BASE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":21},{"ruleId":"prefer-destructuring","severity":2,"message":"Use object destructuring.","line":15,"column":7,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":15,"endColumn":72,"fix":{"range":[524,589],"text":"{FILENAME_MAX_LENGTH} = FILE_SECURITY_CONSTANTS"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FILENAME_MAX_LENGTH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":26},{"ruleId":"prefer-destructuring","severity":2,"message":"Use object destructuring.","line":16,"column":7,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":16,"endColumn":71,"fix":{"range":[597,661],"text":"{TEST_DOM_INTERACTIVE} = WEB_VITALS_CONSTANTS"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TEST_DOM_INTERACTIVE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":27}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":3,"fixableWarningCount":0,"source":"// ç§»é™¤å¾ªç¯å¯¼å…¥ - ç›´æ¥å®šä¹‰åŸºç¡€å¸¸é‡ï¼Œé¿å…ä¾èµ–magic-numbers\nimport { MINUTE_MS } from \"./time\";\nimport { DAYS_PER_WEEK } from \"./time\";\nimport { ALERT_SYSTEM_CONSTANTS } from \"./performance-constants\";\nimport { FILE_SECURITY_CONSTANTS } from \"./security-constants\";\nimport { WEB_VITALS_CONSTANTS } from \"./test-web-vitals-constants\";\n\n// åŸºç¡€å¸¸é‡ç›´æ¥å®šä¹‰ï¼Œé¿å…å¾ªç¯ä¾èµ–\nconst ANGLE_90_DEG = 90 as const;\nconst ONE = 1 as const;\nconst TEN_SECONDS_MS = 10000 as const;\nconst ZERO = 0 as const;\n\nconst RANDOM_ID_BASE = ALERT_SYSTEM_CONSTANTS.RANDOM_ID_BASE;\nconst FILENAME_MAX_LENGTH = FILE_SECURITY_CONSTANTS.FILENAME_MAX_LENGTH;\nconst TEST_DOM_INTERACTIVE = WEB_VITALS_CONSTANTS.TEST_DOM_INTERACTIVE;\n\n/**\n * è®¡æ•°ç›¸å…³å¸¸é‡\n *\n * ğŸ¯ ç”¨é€”ï¼šåŸºç¡€è®¡æ•°ã€æ•°é‡é™åˆ¶ç­‰æ•°å€¼å¸¸é‡\n * ğŸ“Š è¦†ç›–ï¼šå¸¸ç”¨çš„è®¡æ•°å’Œæ•°é‡ç›¸å…³å¸¸é‡\n */\n\n// ============================================================================\n// åŸºç¡€è®¡æ•°å¸¸é‡\n// ============================================================================\n\nexport const COUNT_ZERO = 0 as const;\nexport const COUNT_ONE = 1 as const;\nexport const COUNT_TWO = 2 as const;\nexport const COUNT_THREE = 3 as const;\nexport const COUNT_4 = 4 as const;\nexport const COUNT_FOUR = 4 as const;\nexport const COUNT_FIVE = 5 as const;\nexport const COUNT_SIX = 6 as const;\nexport const COUNT_SEVEN = 7 as const;\nexport const COUNT_EIGHT = 8 as const;\nexport const COUNT_NINE = 9 as const;\nexport const COUNT_TEN = 10 as const;\nexport const COUNT_14 = 14 as const;\n\n// ============================================================================\n// ç‰¹æ®Šè®¡æ•°åˆ«å\n// ============================================================================\n\nexport const COUNT_PAIR = 2 as const;\nexport const COUNT_TRIPLE = 3 as const;\nexport const COUNT_QUAD = 4 as const;\n\n// ============================================================================\n// å¸¸ç”¨æ•°å€¼å¸¸é‡\n// ============================================================================\n\nexport const MAGIC_6 = 6 as const;\nexport const MAGIC_8 = 8 as const;\nexport const MAGIC_9 = 9 as const;\nexport const MAGIC_12 = 12 as const;\nexport const MAGIC_15 = 15 as const;\nexport const MAGIC_16 = 16 as const;\nexport const MAGIC_17 = 17 as const;\nexport const MAGIC_18 = 18 as const;\nexport const MAGIC_20 = 20 as const;\nexport const MAGIC_22 = 22 as const;\nexport const COUNT_23 = 23 as const;\nexport const MAGIC_32 = 32 as const;\nexport const COUNT_35 = 35 as const;\nexport const MAGIC_36 = 36 as const;\nexport const MAGIC_40 = 40 as const;\nexport const COUNT_45 = 45 as const;\nexport const MAGIC_48 = 48 as const;\nexport const MAGIC_64 = 64 as const;\nexport const MAGIC_70 = 70 as const;\nexport const MAGIC_72 = 72 as const;\nexport const MAGIC_75 = 75 as const;\nexport const MAGIC_80 = 80 as const;\nexport const MAGIC_85 = 85 as const;\nexport const MAGIC_90 = 90 as const;\nexport const MAGIC_95 = 95 as const;\nexport const MAGIC_99 = 99 as const;\nexport const COUNT_120 = 120 as const;\nexport const COUNT_160 = 160 as const;\nexport const COUNT_250 = 250 as const;\nexport const COUNT_256 = 256 as const;\nexport const COUNT_368 = 368 as const;\nexport const COUNT_450 = 450 as const;\nexport const MAGIC_512 = 512 as const;\nexport const COUNT_700 = 700 as const;\nexport const COUNT_800 = 800 as const;\n\n// ============================================================================\n// å¤§æ•°å€¼å¸¸é‡\n// ============================================================================\n\nexport const MAGIC_131 = 131 as const;\nexport const MAGIC_132 = 132 as const;\nexport const MAGIC_133 = 133 as const;\nexport const MAGIC_136 = 136 as const;\nexport const MAGIC_190 = 190 as const;\nexport const MAGIC_255 = 255 as const;\nexport const MAGIC_256 = 256 as const;\nexport const MAGIC_368 = 368 as const;\nexport const MAGIC_429 = 429 as const;\nexport const MAGIC_600 = 600 as const;\nexport const MAGIC_800 = 800 as const;\nexport const MAGIC_999 = 999 as const;\nexport const COUNT_1536 = 1536 as const;\nexport const COUNT_1600 = 1600 as const;\nexport const MAGIC_1800 = 1800 as const;\nexport const MAGIC_2000 = 2000 as const;\nexport const MAGIC_2500 = 2500 as const;\nexport const COUNT_3600 = 3600 as const;\nexport const MAGIC_4000 = 4000 as const;\nexport const MAGIC_4096 = 4096 as const;\nexport const COUNT_6000 = 6000 as const;\nexport const COUNT_7000 = 7000 as const;\nexport const COUNT_8000 = 8000 as const;\nexport const COUNT_9000 = 9000 as const;\nexport const MAGIC_10000 = 10000 as const;\nexport const COUNT_12000 = 12000 as const;\nexport const COUNT_15000 = 15000 as const;\nexport const COUNT_45000 = 45000 as const;\nexport const COUNT_100000 = 100000 as const;\nexport const COUNT_125000 = 125000 as const;\nexport const COUNT_200000 = 200000 as const;\nexport const COUNT_300000 = 300000 as const;\n\n// ============================================================================\n// WhatsApp API é”™è¯¯ç \n// ============================================================================\n\nexport const MAGIC_131000 = 131000 as const;\nexport const MAGIC_131005 = 131005 as const;\nexport const MAGIC_131008 = 131008 as const;\nexport const MAGIC_131009 = 131009 as const;\nexport const MAGIC_131014 = 131014 as const;\nexport const MAGIC_131016 = 131016 as const;\nexport const MAGIC_131021 = 131021 as const;\nexport const MAGIC_131026 = 131026 as const;\nexport const MAGIC_131047 = 131047 as const;\nexport const MAGIC_131051 = 131051 as const;\nexport const MAGIC_131052 = 131052 as const;\nexport const MAGIC_131053 = 131053 as const;\n\n// ============================================================================\n// å¤§å®¹é‡æ•°å€¼\n// ============================================================================\n\nexport const MAGIC_60000 = 60000 as const;\nexport const MAGIC_300000 = 300000 as const;\nexport const MAGIC_1048576 = 1048576 as const; // 1MB in bytes\nexport const MAGIC_3600000 = 3600000 as const; // 1 hour in milliseconds\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/decimal.ts","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'./count' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_20' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DAYS_PER_MONTH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_20 } from \"./count\";\n\n// ç›´æ¥å®šä¹‰åŸºç¡€å¸¸é‡ï¼Œé¿å…å¾ªç¯ä¾èµ–\nconst DAYS_PER_MONTH = 30 as const;\n\n/**\n * å°æ•°ç›¸å…³å¸¸é‡\n *\n * ğŸ¯ ç”¨é€”ï¼šç™¾åˆ†æ¯”ã€æ¯”ä¾‹ã€æƒé‡ç­‰å°æ•°å¸¸é‡\n * ğŸ“Š è¦†ç›–ï¼šå¸¸ç”¨çš„å°æ•°å’Œæ¯”ä¾‹ç›¸å…³å¸¸é‡\n */\n\n// ============================================================================\n// åŸºç¡€å°æ•°å¸¸é‡\n// ============================================================================\n\nexport const DEC_0_001 = 0.001 as const;\nexport const DEC_0_01 = 0.01 as const;\nexport const DEC_0_02 = 0.02 as const;\nexport const DEC_0_05 = 0.05 as const;\nexport const DEC_0_08 = 0.08 as const;\nexport const MAGIC_0_1 = 0.1 as const;\nexport const DEC_0_15 = 0.15 as const;\nexport const MAGIC_0_2 = 0.2 as const;\nexport const MAGIC_0_25 = 0.25 as const;\nexport const MAGIC_0_3 = 0.3 as const;\nexport const DEC_0_4 = 0.4 as const;\nexport const MAGIC_0_5 = 0.5 as const;\nexport const MAGIC_0_6 = 0.6 as const;\nexport const DEC_0_65 = 0.65 as const;\nexport const MAGIC_0_7 = 0.7 as const;\nexport const DEC_0_75 = 0.75 as const;\nexport const MAGIC_0_8 = 0.8 as const;\nexport const MAGIC_0_9 = 0.9 as const;\nexport const DEC_0_94 = 0.94 as const;\nexport const MAGIC_0_95 = 0.95 as const;\nexport const DEC_0_96 = 0.96 as const;\nexport const MAGIC_0_99 = 0.99 as const;\nexport const MAGIC_1_1 = 1.1 as const;\nexport const MAGIC_1_5 = 1.5 as const;\n\n// ============================================================================\n// ç™¾åˆ†æ¯”ç›¸å…³å¸¸é‡\n// ============================================================================\n\nexport const PERCENTAGE_QUARTER = 25 as const;\nexport const PERCENTAGE_HALF = 50 as const;\nexport const PERCENTAGE_FULL = 100 as const;\n\n// ============================================================================\n// åç§»é‡å¸¸é‡\n// ============================================================================\n\nexport const OFFSET_NEGATIVE_MEDIUM = -10 as const;\nexport const OFFSET_NEGATIVE_LARGE = -20 as const;\nexport const OFFSET_NEGATIVE_EXTRA_LARGE = -30 as const;\nexport const OFFSET_NEGATIVE_MASSIVE = -50 as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/dev-tools.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/hex.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ZERO' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":2,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ç›´æ¥å®šä¹‰åŸºç¡€å¸¸é‡ï¼Œé¿å…å¾ªç¯ä¾èµ–\nconst ZERO = 0 as const;\n\n/**\n * åå…­è¿›åˆ¶ç›¸å…³å¸¸é‡\n *\n * ğŸ¯ ç”¨é€”ï¼šæ–‡ä»¶ç­¾åã€æ©ç ã€å­—èŠ‚æ“ä½œç­‰åå…­è¿›åˆ¶å¸¸é‡\n * ğŸ”’ å®‰å…¨ï¼šä¸»è¦ç”¨äºæ–‡ä»¶ç±»å‹æ£€æµ‹å’Œå®‰å…¨éªŒè¯\n */\n\n// ============================================================================\n// åŸºç¡€åå…­è¿›åˆ¶å¸¸é‡\n// ============================================================================\n\nexport const HEX_BYTE_MAX = 255; // 255\nexport const HEX_NIBBLE_MAX = 15; // 15\n\n// ============================================================================\n// ä½æ©ç å¸¸é‡\n// ============================================================================\n\nexport const HEX_MASK_6_BITS = 63 as const; // 63\nexport const HEX_MASK_BIT_6 = 64 as const; // 64\nexport const HEX_MASK_HIGH_BIT = 128 as const; // 128\nexport const HEX_MASK_LOW_NIBBLE = 15 as const; // 15\n\n// ============================================================================\n// æ–‡ä»¶ç­¾åå¸¸é‡ - PNG\n// ============================================================================\n\nexport const HEX_PNG_SIGNATURE_1 = 0x89 as const; // PNG signature byte 1\nexport const HEX_PNG_SIGNATURE_2 = 0x50 as const; // PNG signature byte 2 ('P')\nexport const HEX_PNG_SIGNATURE_3 = 0x4E as const; // PNG signature byte 3 ('N')\nexport const HEX_PNG_SIGNATURE_4 = 0x47 as const; // PNG signature byte 4 ('G')\nexport const HEX_PNG_SIGNATURE_5 = 0x0D as const; // PNG signature byte 5\nexport const HEX_PNG_SIGNATURE_6 = 0x0A as const; // PNG signature byte 6\n\n// ============================================================================\n// æ–‡ä»¶ç­¾åå¸¸é‡ - JPEG\n// ============================================================================\n\nexport const HEX_JPEG_MARKER_1 = 0xFF as const; // JPEG marker start\nexport const HEX_JPEG_SOI = 0xD8 as const; // JPEG Start of Image\n\n// ============================================================================\n// æ–‡ä»¶ç­¾åå¸¸é‡ - PDF\n// ============================================================================\n\nexport const HEX_PDF_MARKER = 0x25 as const; // PDF marker '%'\nexport const HEX_PDF_SIGNATURE_1 = 0x50 as const; // PDF signature 'P'\n\n// ============================================================================\n// æ–‡ä»¶ç­¾åå¸¸é‡ - ZIP\n// ============================================================================\n\nexport const HEX_ZIP_SIGNATURE = 0x50 as const; // ZIP signature 'P'\n\n// ============================================================================\n// é€šç”¨åå…­è¿›åˆ¶æ•°å€¼\n// ============================================================================\n\nexport const MAGIC_HEX_03 = 0x03 as const;\nexport const MAGIC_HEX_04 = 0x04 as const;\nexport const MAGIC_HEX_3 = 0x3 as const;\nexport const MAGIC_HEX_8 = 0x8 as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/i18n-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HOURS_PER_DAY' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":61}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { SECONDS_PER_MINUTE, MINUTES_PER_HOUR, HOURS_PER_DAY } from '@/constants';\n\n/**\n * i18nç³»ç»Ÿå¸¸é‡å®šä¹‰\n * é›†ä¸­ç®¡ç†æ‰€æœ‰é­”æ³•æ•°å­—ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§\n */\n\n// ==================== åŸºç¡€æ•°å­—å¸¸é‡ ====================\n\n/** åŸºç¡€æ•°å­—å¸¸é‡ */\nconst BASE_NUMBERS = {\n  // æ—¶é—´ç›¸å…³\n  MILLISECONDS_PER_SECOND: 1000,\n  SECONDS_PER_MINUTE: 60,\n  MINUTES_PER_HOUR: 60,\n  HOURS_PER_DAY: 24,\n  DAYS_PER_YEAR: 365,\n\n  // ç¼“å­˜å’Œè®¡æ•°\n  CACHE_MINUTES_5: 5,\n  CACHE_SECONDS_30: 30,\n  CACHE_MINUTES_30: 30,\n\n  // å­˜å‚¨å’Œå¤§å°\n  BYTES_PER_KB: 1024,\n  MB_SIZE_10: 10,\n\n  // ç›‘æ§å’Œé‡‡æ ·\n  SAMPLE_RATE_5: 5,\n  SAMPLE_RATE_10: 10,\n  PERCENTAGE_100: 100,\n} as const;\n\n// ==================== æ—¶é—´ç›¸å…³å¸¸é‡ ====================\n\n/** æ—¶é—´å•ä½å¸¸é‡ (æ¯«ç§’) */\nexport const TIME_UNITS = {\n  /** 1ç§’ = 1000æ¯«ç§’ */\n  SECOND: BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n  /** 1åˆ†é’Ÿ = 60ç§’ */\n  MINUTE:\n    BASE_NUMBERS.SECONDS_PER_MINUTE * BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n  /** 1å°æ—¶ = 60åˆ†é’Ÿ */\n  HOUR:\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n  /** 1å¤© = 24å°æ—¶ */\n  DAY:\n    BASE_NUMBERS.HOURS_PER_DAY *\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n  /** 1å¹´ = 365å¤© */\n  YEAR:\n    BASE_NUMBERS.DAYS_PER_YEAR *\n    BASE_NUMBERS.HOURS_PER_DAY *\n    BASE_NUMBERS.MINUTES_PER_HOUR *\n    BASE_NUMBERS.SECONDS_PER_MINUTE *\n    BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n} as const;\n\n/** ç¼“å­˜å’Œå­˜å‚¨æ—¶é—´é…ç½® */\nexport const CACHE_DURATIONS = {\n  /** Cookieæœ€å¤§å­˜å‚¨æ—¶é—´: 1å¹´ */\n  COOKIE_MAX_AGE: TIME_UNITS.YEAR,\n  /** ç¿»è¯‘ç¼“å­˜æ—¶é—´: 5åˆ†é’Ÿ */\n  TRANSLATION_CACHE: BASE_NUMBERS.CACHE_MINUTES_5 * TIME_UNITS.MINUTE,\n  /** æ€§èƒ½æ•°æ®ç¼“å­˜: 30ç§’ */\n  PERFORMANCE_CACHE: BASE_NUMBERS.CACHE_SECONDS_30 * TIME_UNITS.SECOND,\n  /** ç›‘æ§æ•°æ®ä¿ç•™: 1å°æ—¶ */\n  MONITORING_RETENTION: TIME_UNITS.HOUR,\n} as const;\n\n/** UIåŠ¨ç”»å’Œå»¶è¿Ÿæ—¶é—´ */\nexport const UI_TIMINGS = {\n  /** è¯­è¨€åˆ‡æ¢åŠ¨ç”»æ—¶é—´ */\n  LANGUAGE_SWITCH_ANIMATION: 2000,\n  /** åŠ è½½å»¶è¿Ÿæ—¶é—´ */\n  LOADING_DELAY: 500,\n  /** é”™è¯¯æç¤ºæ˜¾ç¤ºæ—¶é—´ */\n  ERROR_DISPLAY_DURATION: 5000,\n  /** æˆåŠŸæç¤ºæ˜¾ç¤ºæ—¶é—´ */\n  SUCCESS_DISPLAY_DURATION: 2000,\n} as const;\n\n// ==================== æ€§èƒ½å’Œè´¨é‡é˜ˆå€¼ ====================\n\n/** æ€§èƒ½ç›‘æ§é˜ˆå€¼ */\nexport const PERFORMANCE_THRESHOLDS = {\n  /** ä¼˜ç§€æ€§èƒ½é˜ˆå€¼ */\n  EXCELLENT: 95,\n  /** è‰¯å¥½æ€§èƒ½é˜ˆå€¼ */\n  GOOD: 80,\n  /** ä¸€èˆ¬æ€§èƒ½é˜ˆå€¼ */\n  FAIR: 60,\n  /** å·®æ€§èƒ½é˜ˆå€¼ */\n  POOR: 40,\n  /** æœ€å¤§å“åº”æ—¶é—´ (æ¯«ç§’) */\n  MAX_RESPONSE_TIME: 1000,\n  /** æœ€å¤§å†…å­˜ä½¿ç”¨ (MB) */\n  MAX_MEMORY_USAGE: 100,\n} as const;\n\n/** ç¿»è¯‘è´¨é‡è¯„åˆ†æƒé‡ */\nexport const QUALITY_WEIGHTS = {\n  /** è¯­æ³•é”™è¯¯æƒ©ç½š */\n  GRAMMAR_PENALTY: 10,\n  /** ä¸€è‡´æ€§é”™è¯¯æƒ©ç½š */\n  CONSISTENCY_PENALTY: 15,\n  /** æœ¯è¯­é”™è¯¯æƒ©ç½š */\n  TERMINOLOGY_PENALTY: 12,\n  /** æµç•…æ€§é”™è¯¯æƒ©ç½š */\n  FLUENCY_PENALTY: 8,\n  /** é•¿åº¦å·®å¼‚æƒ©ç½š */\n  LENGTH_PENALTY: 5,\n  /** å ä½ç¬¦é”™è¯¯æƒ©ç½š */\n  PLACEHOLDER_PENALTY: 20,\n} as const;\n\n/** ç¿»è¯‘è´¨é‡è¯„åˆ†ç³»æ•° */\nexport const QUALITY_SCORING = {\n  /** è´¨é‡è¯„åˆ†æƒ©ç½šç³»æ•° */\n  ISSUE_PENALTY_FACTOR: 0.1,\n  /** è´¨é‡è¶‹åŠ¿åˆ†æ•°èŒƒå›´ - æœ€å°å€¼ */\n  TREND_SCORE_MIN: 0.7,\n  /** è´¨é‡è¶‹åŠ¿åˆ†æ•°èŒƒå›´ - å˜åŒ–å¹…åº¦ */\n  TREND_SCORE_RANGE: 0.3,\n  /** è´¨é‡è¶‹åŠ¿é”®æ•°é‡ - åŸºç¡€å€¼ */\n  TREND_KEY_COUNT_BASE: 50,\n  /** è´¨é‡è¶‹åŠ¿é”®æ•°é‡ - å˜åŒ–èŒƒå›´ */\n  TREND_KEY_COUNT_RANGE: 100,\n  /** ä¸¥é‡é—®é¢˜æƒ©ç½šåˆ†æ•° */\n  CRITICAL_PENALTY: 20,\n  /** è­¦å‘Šé—®é¢˜æƒ©ç½šåˆ†æ•° */\n  WARNING_PENALTY: 5,\n} as const;\n\n/** ç¿»è¯‘è´¨é‡æ£€æŸ¥é˜ˆå€¼ */\nexport const QUALITY_CHECK_THRESHOLDS = {\n  /** é«˜è´¨é‡é˜ˆå€¼ */\n  HIGH_QUALITY: 30,\n  /** ä¸­ç­‰è´¨é‡é˜ˆå€¼ */\n  MEDIUM_QUALITY: 20,\n  /** ä½è´¨é‡é˜ˆå€¼ */\n  LOW_QUALITY: 10,\n  /** æœ¯è¯­ä¸€è‡´æ€§æ£€æŸ¥é˜ˆå€¼ */\n  TERMINOLOGY_CONSISTENCY: 10,\n} as const;\n\n/** ç¿»è¯‘éªŒè¯é˜ˆå€¼ */\nexport const VALIDATION_THRESHOLDS = {\n  /** ç©ºç¿»è¯‘æƒ©ç½š */\n  EMPTY_TRANSLATION_PENALTY: 50,\n  /** å ä½ç¬¦ä¸åŒ¹é…æƒ©ç½š */\n  PLACEHOLDER_MISMATCH_PENALTY: 20,\n  /** é•¿åº¦å·®å¼‚é˜ˆå€¼ */\n  LENGTH_DIFFERENCE_THRESHOLD: 15,\n  /** æœ€å°é•¿åº¦æ¯”ä¾‹ */\n  MIN_LENGTH_RATIO: 0.3,\n  /** æœ€å¤§é•¿åº¦æ¯”ä¾‹ */\n  MAX_LENGTH_RATIO: 3,\n  /** ç›¸ä¼¼åº¦é˜ˆå€¼ */\n  SIMILARITY_THRESHOLD: 0.6,\n  /** è´¨é‡åŠæ ¼åˆ†æ•° */\n  PASSING_SCORE: 70,\n  /** ä¼˜ç§€è´¨é‡åˆ†æ•° */\n  EXCELLENT_SCORE: 90,\n} as const;\n\n// ==================== æœ¬åœ°åŒ–æ£€æµ‹é…ç½® ====================\n\n/** è¯­è¨€æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼ */\nexport const DETECTION_CONFIDENCE = {\n  /** é«˜ç½®ä¿¡åº¦é˜ˆå€¼ */\n  HIGH: 0.8,\n  /** ä¸­ç­‰ç½®ä¿¡åº¦é˜ˆå€¼ */\n  MEDIUM: 0.6,\n  /** ä½ç½®ä¿¡åº¦é˜ˆå€¼ */\n  LOW: 0.3,\n  /** æœ€å°å¯æ¥å—ç½®ä¿¡åº¦ */\n  MIN_ACCEPTABLE: 0.2,\n  /** åœ°ç†ä½ç½®æ£€æµ‹æƒé‡ */\n  GEO_WEIGHT: 0.7,\n  /** æµè§ˆå™¨è¯­è¨€æ£€æµ‹æƒé‡ */\n  BROWSER_WEIGHT: 0.5,\n  /** ç”¨æˆ·å†å²æƒé‡ */\n  HISTORY_WEIGHT: 0.9,\n} as const;\n\n/** è¯­è¨€æ£€æµ‹è¯„åˆ†ç³»æ•° */\nexport const DETECTION_SCORING = {\n  /** å®Œå…¨åŒ¹é…åŠ åˆ† */\n  EXACT_MATCH_BONUS: 0.9,\n  /** éƒ¨åˆ†åŒ¹é…åŠ åˆ† */\n  PARTIAL_MATCH_BONUS: 0.5,\n  /** åœ°åŒºåŒ¹é…åŠ åˆ† */\n  REGION_MATCH_BONUS: 0.3,\n  /** é»˜è®¤è¯­è¨€æƒé‡ */\n  DEFAULT_LANGUAGE_WEIGHT: 0.1,\n  /** ç”¨æˆ·åå¥½æƒé‡ */\n  USER_PREFERENCE_WEIGHT: 0.95,\n} as const;\n\n// ==================== ç¼“å­˜å’Œå­˜å‚¨é…ç½® ====================\n\n/** ç¼“å­˜å¤§å°é™åˆ¶ */\nexport const CACHE_LIMITS = {\n  /** æœ€å¤§ç¼“å­˜æ¡ç›®æ•° */\n  MAX_CACHE_ENTRIES: 100,\n  /** ç¿»è¯‘å†å²è®°å½•æ•° */\n  MAX_TRANSLATION_HISTORY: 50,\n  /** æ£€æµ‹å†å²è®°å½•æ•° */\n  MAX_DETECTION_HISTORY: 30,\n  /** æ€§èƒ½æ•°æ®ç‚¹æ•° */\n  MAX_PERFORMANCE_DATA_POINTS: 1000,\n} as const;\n\n/** æ•°æ®æ¸…ç†é…ç½® */\nexport const CLEANUP_CONFIG = {\n  /** ç¼“å­˜æ¸…ç†é—´éš” (æ¯«ç§’) */\n  CACHE_CLEANUP_INTERVAL: BASE_NUMBERS.CACHE_MINUTES_30 * TIME_UNITS.MINUTE,\n  /** è¿‡æœŸæ•°æ®æ¸…ç†é—´éš” (æ¯«ç§’) */\n  EXPIRED_DATA_CLEANUP: TIME_UNITS.HOUR,\n  /** æœ€å¤§æ—¥å¿—æ–‡ä»¶å¤§å° (å­—èŠ‚) */\n  MAX_LOG_FILE_SIZE:\n    BASE_NUMBERS.MB_SIZE_10 *\n    BASE_NUMBERS.BYTES_PER_KB *\n    BASE_NUMBERS.BYTES_PER_KB, // 10MB\n} as const;\n\n// ==================== ç›‘æ§å’ŒæŠ¥å‘Šé…ç½® ====================\n\n/** ç›‘æ§é‡‡æ ·é…ç½® */\nexport const MONITORING_CONFIG = {\n  /** æ€§èƒ½é‡‡æ ·ç‡ (%) */\n  PERFORMANCE_SAMPLE_RATE: BASE_NUMBERS.SAMPLE_RATE_10,\n  /** é”™è¯¯é‡‡æ ·ç‡ (%) */\n  ERROR_SAMPLE_RATE: BASE_NUMBERS.PERCENTAGE_100,\n  /** ç”¨æˆ·è¡Œä¸ºé‡‡æ ·ç‡ (%) */\n  USER_BEHAVIOR_SAMPLE_RATE: BASE_NUMBERS.SAMPLE_RATE_5,\n  /** ç›‘æ§æ•°æ®ä¸ŠæŠ¥é—´éš” (æ¯«ç§’) */\n  REPORTING_INTERVAL: BASE_NUMBERS.CACHE_MINUTES_5 * TIME_UNITS.MINUTE,\n} as const;\n\n/** æŠ¥å‘Šé˜ˆå€¼é…ç½® */\nexport const REPORTING_THRESHOLDS = {\n  /** é”™è¯¯ç‡æŠ¥è­¦é˜ˆå€¼ (%) */\n  ERROR_RATE_ALERT: 5,\n  /** å“åº”æ—¶é—´æŠ¥è­¦é˜ˆå€¼ (æ¯«ç§’) */\n  RESPONSE_TIME_ALERT: 2000,\n  /** å†…å­˜ä½¿ç”¨æŠ¥è­¦é˜ˆå€¼ (%) */\n  MEMORY_USAGE_ALERT: 80,\n  /** CPUä½¿ç”¨æŠ¥è­¦é˜ˆå€¼ (%) */\n  CPU_USAGE_ALERT: 70,\n} as const;\n\n// ==================== UIå’Œç”¨æˆ·ä½“éªŒé…ç½® ====================\n\n/** UIç™¾åˆ†æ¯”å’Œæ¯”ä¾‹ */\nexport const UI_RATIOS = {\n  /** åŠ è½½è¿›åº¦æ»¡å€¼ */\n  PROGRESS_MAX: 100,\n  /** é€æ˜åº¦: é«˜ */\n  OPACITY_HIGH: 0.8,\n  /** é€æ˜åº¦: ä¸­ */\n  OPACITY_MEDIUM: 0.5,\n  /** é€æ˜åº¦: ä½ */\n  OPACITY_LOW: 0.1,\n  /** æˆåŠŸç‡æ˜¾ç¤ºé˜ˆå€¼ */\n  SUCCESS_RATE_DISPLAY: 95,\n  /** è­¦å‘Šæ˜¾ç¤ºé˜ˆå€¼ */\n  WARNING_DISPLAY: 80,\n} as const;\n\n/** åˆ†é¡µå’Œåˆ—è¡¨é…ç½® */\nexport const PAGINATION_CONFIG = {\n  /** é»˜è®¤æ¯é¡µæ¡ç›®æ•° */\n  DEFAULT_PAGE_SIZE: 10,\n  /** æœ€å¤§æ¯é¡µæ¡ç›®æ•° */\n  MAX_PAGE_SIZE: 100,\n  /** æœç´¢ç»“æœæœ€å¤§æ•°é‡ */\n  MAX_SEARCH_RESULTS: 50,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/index.ts","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":10,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":10,"endColumn":24},{"ruleId":"no-restricted-imports","severity":2,"message":"'./time' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":10,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":10,"endColumn":24},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":11,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":11,"endColumn":23},{"ruleId":"no-restricted-imports","severity":2,"message":"'./hex' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":11,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":11,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":12,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":12,"endColumn":25},{"ruleId":"no-restricted-imports","severity":2,"message":"'./count' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":12,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":12,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":13,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":13,"endColumn":27},{"ruleId":"no-restricted-imports","severity":2,"message":"'./decimal' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":13,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":13,"endColumn":27},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":16,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":16,"endColumn":33},{"ruleId":"no-restricted-imports","severity":2,"message":"'./magic-numbers' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":16,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":16,"endColumn":33},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":19,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":19,"endColumn":25},{"ruleId":"no-restricted-imports","severity":2,"message":"'./units' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":19,"column":1,"nodeType":"ExportAllDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":25},{"ruleId":"no-restricted-imports","severity":2,"message":"'./i18n-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":22,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":39,"endColumn":27},{"ruleId":"no-restricted-imports","severity":2,"message":"'./app-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":42,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":51,"endColumn":26},{"ruleId":"no-restricted-imports","severity":2,"message":"'./app-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":52,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":62,"endColumn":26},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":65,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":89,"endColumn":27},{"ruleId":"no-restricted-imports","severity":2,"message":"'./security-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":92,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":101,"endColumn":31},{"ruleId":"no-restricted-imports","severity":2,"message":"'./security-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":102,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":112,"endColumn":31},{"ruleId":"no-restricted-imports","severity":2,"message":"'./seo-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":115,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":119,"endColumn":26},{"ruleId":"no-restricted-imports","severity":2,"message":"'./seo-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":120,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":125,"endColumn":26},{"ruleId":"no-restricted-imports","severity":2,"message":"'./app-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":128,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":128,"endColumn":49},{"ruleId":"no-restricted-imports","severity":2,"message":"'./security-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":129,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":129,"endColumn":59},{"ruleId":"no-restricted-imports","severity":2,"message":"'./seo-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":130,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":130,"endColumn":49},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":131,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":131,"endColumn":51}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n// Aggregated constants entrypoint. Avoid self-imports to prevent circular deps.\n\n/**\n * å¸¸é‡æ¨¡å—ç»Ÿä¸€å¯¼å‡º\n * æä¾›é¡¹ç›®ä¸­æ‰€æœ‰å¸¸é‡çš„é›†ä¸­è®¿é—®ç‚¹\n */\n\n// é¢†åŸŸå¸¸é‡ - æ–°å¢çš„åˆ†ç±»å¸¸é‡\nexport * from './time';\nexport * from './hex';\nexport * from './count';\nexport * from './decimal';\n\n// é­”æ³•æ•°å­—å¸¸é‡ - Facadeèšåˆå…¥å£\nexport * from './magic-numbers';\n\n// å•ä½å·¥å…·å¸¸é‡\nexport * from './units';\n\n// å›½é™…åŒ–å¸¸é‡\nexport {\n  TIME_UNITS,\n  CACHE_DURATIONS,\n  UI_TIMINGS,\n  PERFORMANCE_THRESHOLDS,\n  QUALITY_WEIGHTS,\n  QUALITY_SCORING,\n  QUALITY_CHECK_THRESHOLDS,\n  VALIDATION_THRESHOLDS,\n  DETECTION_CONFIDENCE,\n  DETECTION_SCORING,\n  CACHE_LIMITS,\n  CLEANUP_CONFIG,\n  MONITORING_CONFIG,\n  REPORTING_THRESHOLDS,\n  UI_RATIOS,\n  PAGINATION_CONFIG,\n} from './i18n-constants';\n\n// åº”ç”¨ç¨‹åºå¸¸é‡\nexport {\n  TIME_CONSTANTS,\n  DELAY_CONSTANTS,\n  CONTENT_LIMITS,\n  PAGINATION_CONSTANTS,\n  OPACITY_CONSTANTS,\n  PERCENTAGE_CONSTANTS,\n  PERFORMANCE_CONSTANTS,\n  DEBUG_CONSTANTS,\n} from './app-constants';\nexport type {\n  AppConstants,\n  TimeConstants,\n  DelayConstants,\n  ContentLimits,\n  PaginationConstants,\n  OpacityConstants,\n  PercentageConstants,\n  PerformanceConstants,\n  DebugConstants,\n} from './app-constants';\n\n// æµ‹è¯•ç›¸å…³å¸¸é‡\nexport {\n  TEST_TIME_CALCULATIONS,\n  TEST_DELAY_VALUES,\n  TEST_PERCENTAGE_VALUES,\n  TEST_PERFORMANCE_TIMESTAMPS,\n  TEST_APP_CONSTANTS,\n  TEST_BASE_NUMBERS,\n  TEST_TIMEOUT_CONSTANTS,\n  TEST_COUNT_CONSTANTS,\n  TEST_COUNTS,\n  TEST_PERCENTAGE_CONSTANTS,\n  TEST_TIMESTAMP_CONSTANTS,\n  TEST_OPACITY_CONSTANTS,\n  TEST_ANGLE_CONSTANTS,\n  TEST_CONTRAST_CONSTANTS,\n  TEST_EASING_CONSTANTS,\n  TEST_PERFORMANCE_MONITORING,\n  THEME_ANALYTICS_CONSTANTS,\n  TEST_CONTENT_LIMITS,\n  TEST_SAMPLE_CONSTANTS,\n  TEST_SCREEN_CONSTANTS,\n  TEST_SPECIAL_CONSTANTS,\n  TEST_WEB_VITALS_DIAGNOSTICS,\n  WEB_VITALS_CONSTANTS,\n} from './test-constants';\n\n// å®‰å…¨ç›¸å…³å¸¸é‡\nexport {\n  ENCRYPTION_CONSTANTS,\n  ACCESS_CONTROL_CONSTANTS,\n  SESSION_CONSTANTS,\n  RATE_LIMIT_CONSTANTS,\n  FILE_SECURITY_CONSTANTS,\n  INPUT_VALIDATION_CONSTANTS,\n  CSP_CONSTANTS,\n  SECURITY_HEADERS_CONSTANTS,\n} from './security-constants';\nexport type {\n  SecurityConstants,\n  EncryptionConstants,\n  AccessControlConstants,\n  SessionConstants,\n  RateLimitConstants,\n  FileSecurityConstants,\n  InputValidationConstants,\n  CspConstants,\n  SecurityHeadersConstants,\n} from './security-constants';\n\n// SEOç›¸å…³å¸¸é‡\nexport {\n  SEO_PRIORITY_CONSTANTS,\n  SITEMAP_CHANGEFREQ_CONSTANTS,\n  URL_GENERATION_CONSTANTS,\n} from './seo-constants';\nexport type {\n  SeoConstants,\n  SeoPriorityConstants,\n  SitemapChangefreqConstants,\n  UrlGenerationConstants,\n} from './seo-constants';\n\n// é‡æ–°å¯¼å‡ºä¸»è¦å¸¸é‡å¯¹è±¡ä»¥ä¾¿äºä½¿ç”¨\nexport { APP_CONSTANTS } from './app-constants';\nexport { SECURITY_CONSTANTS } from './security-constants';\nexport { SEO_CONSTANTS } from './seo-constants';\nexport { TEST_CONSTANTS } from './test-constants';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/magic-numbers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/performance-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { SECONDS_PER_MINUTE, MINUTES_PER_HOUR } from '@/constants';\n\n/**\n * æ€§èƒ½ç›‘æ§å¸¸é‡å®šä¹‰\n * é›†ä¸­ç®¡ç†Web Vitalsã€æ€§èƒ½é˜ˆå€¼ã€ç›‘æ§é—´éš”ç­‰ç›¸å…³çš„é­”æ³•æ•°å­—\n * éµå¾ªé¡¹ç›®ç¼–ç æ ‡å‡†ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§\n */\n\n// ==================== åŸºç¡€æ—¶é—´å¸¸é‡ ====================\n\n/** åŸºç¡€æ—¶é—´å•ä½å¸¸é‡ */\nconst TIME_BASE = {\n  /** æ¯«ç§’æ¯ç§’ */\n  MS_PER_SECOND: 1000,\n  /** ç§’æ¯åˆ†é’Ÿ */\n  SECONDS_PER_MINUTE: 60,\n  /** åˆ†é’Ÿæ¯å°æ—¶ */\n  MINUTES_PER_HOUR: 60,\n} as const;\n\n/** åŸºç¡€æ•°å­—å¸¸é‡ - é¿å…magic numbers */\nconst BASE_NUMBERS = {\n  /** åŸºç¡€è®¡æ•° */\n  TWO: 2,\n  THREE: 3,\n  FIVE: 5,\n  TEN: 10,\n  THIRTY: 30,\n\n  /** æ–‡ä»¶å¤§å°ç›¸å…³ */\n  BYTES_PER_KB: 1024,\n\n  /** åŠ¨ç”»æ—¶é—´ */\n  FAST_ANIMATION_MS: 150,\n  STANDARD_ANIMATION_MS: 300,\n  SLOW_ANIMATION_MS: 500,\n} as const;\n\n/** æ—¶é—´å•ä½å¸¸é‡ */\nexport const TIME_UNITS = {\n  /** 1ç§’ = 1000æ¯«ç§’ */\n  SECOND: TIME_BASE.MS_PER_SECOND,\n  /** 1åˆ†é’Ÿ = 60000æ¯«ç§’ */\n  MINUTE: TIME_BASE.SECONDS_PER_MINUTE * TIME_BASE.MS_PER_SECOND,\n  /** 1å°æ—¶ = 3600000æ¯«ç§’ */\n  HOUR:\n    TIME_BASE.MINUTES_PER_HOUR *\n    TIME_BASE.SECONDS_PER_MINUTE *\n    TIME_BASE.MS_PER_SECOND,\n} as const;\n\n// ==================== Web Vitals é˜ˆå€¼å¸¸é‡ ====================\n\n/** Core Web Vitals æ€§èƒ½é˜ˆå€¼ */\nexport const WEB_VITALS_THRESHOLDS = {\n  /** Cumulative Layout Shift (CLS) é˜ˆå€¼ */\n  CLS: {\n    /** è‰¯å¥½é˜ˆå€¼: 0.1 */\n    GOOD: 0.1,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 0.25 */\n    NEEDS_IMPROVEMENT: 0.25,\n    /** å·®é˜ˆå€¼: > 0.25 */\n    POOR: 0.25,\n  },\n\n  /** First Input Delay (FID) é˜ˆå€¼ (æ¯«ç§’) */\n  FID: {\n    /** è‰¯å¥½é˜ˆå€¼: 100ms */\n    GOOD: 100,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 300ms */\n    NEEDS_IMPROVEMENT: 300,\n    /** å·®é˜ˆå€¼: > 300ms */\n    POOR: 300,\n  },\n\n  /** Largest Contentful Paint (LCP) é˜ˆå€¼ (æ¯«ç§’) */\n  LCP: {\n    /** è‰¯å¥½é˜ˆå€¼: 2500ms */\n    GOOD: 2500,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 4000ms */\n    NEEDS_IMPROVEMENT: 4000,\n    /** å·®é˜ˆå€¼: > 4000ms */\n    POOR: 4000,\n  },\n\n  /** First Contentful Paint (FCP) é˜ˆå€¼ (æ¯«ç§’) */\n  FCP: {\n    /** è‰¯å¥½é˜ˆå€¼: 1800ms */\n    GOOD: 1800,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 3000ms */\n    NEEDS_IMPROVEMENT: 3000,\n    /** å·®é˜ˆå€¼: > 3000ms */\n    POOR: 3000,\n  },\n\n  /** Time to First Byte (TTFB) é˜ˆå€¼ (æ¯«ç§’) */\n  TTFB: {\n    /** è‰¯å¥½é˜ˆå€¼: 800ms */\n    GOOD: 800,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 1800ms */\n    NEEDS_IMPROVEMENT: 1800,\n    /** å·®é˜ˆå€¼: > 1800ms */\n    POOR: 1800,\n  },\n\n  /** Interaction to Next Paint (INP) é˜ˆå€¼ (æ¯«ç§’) */\n  INP: {\n    /** è‰¯å¥½é˜ˆå€¼: 200ms */\n    GOOD: 200,\n    /** éœ€è¦æ”¹è¿›é˜ˆå€¼: 500ms */\n    NEEDS_IMPROVEMENT: 500,\n    /** å·®é˜ˆå€¼: > 500ms */\n    POOR: 500,\n  },\n} as const;\n\n// ==================== æ€§èƒ½ç›‘æ§é—´éš”å¸¸é‡ ====================\n\n/** æ€§èƒ½ç›‘æ§æ—¶é—´é—´éš” */\nexport const MONITORING_INTERVALS = {\n  /** æŒ‡æ ‡æ›´æ–°é—´éš”: 3ç§’ */\n  METRICS_UPDATE: BASE_NUMBERS.THREE * TIME_UNITS.SECOND,\n\n  /** æŠ¥å‘Šå‘é€é—´éš”: 5åˆ†é’Ÿ */\n  REPORT_SEND: BASE_NUMBERS.FIVE * TIME_UNITS.MINUTE,\n\n  /** è¯Šæ–­æ£€æŸ¥é—´éš”: 10ç§’ */\n  DIAGNOSTIC_CHECK: BASE_NUMBERS.TEN * TIME_UNITS.SECOND,\n\n  /** ç¼“å­˜æ¸…ç†é—´éš”: 30åˆ†é’Ÿ */\n  CACHE_CLEANUP: BASE_NUMBERS.THIRTY * TIME_UNITS.MINUTE,\n\n  /** æ€§èƒ½é‡‡æ ·é—´éš”: 1ç§’ */\n  PERFORMANCE_SAMPLING: TIME_UNITS.SECOND,\n} as const;\n\n// ==================== æ€§èƒ½è¯„åˆ†å¸¸é‡ ====================\n\n/** æ€§èƒ½è¯„åˆ†é˜ˆå€¼ */\nexport const PERFORMANCE_SCORES = {\n  /** ä¼˜ç§€è¯„åˆ†é˜ˆå€¼: 90åˆ† */\n  EXCELLENT: 90,\n\n  /** è‰¯å¥½è¯„åˆ†é˜ˆå€¼: 80åˆ† */\n  GOOD: 80,\n\n  /** ä¸€èˆ¬è¯„åˆ†é˜ˆå€¼: 70åˆ† */\n  FAIR: 70,\n\n  /** éœ€è¦æ”¹è¿›è¯„åˆ†é˜ˆå€¼: 60åˆ† */\n  NEEDS_IMPROVEMENT: 60,\n\n  /** å·®è¯„åˆ†é˜ˆå€¼: < 60åˆ† */\n  POOR: 60,\n\n  /** æ»¡åˆ† */\n  PERFECT: 100,\n} as const;\n\n// ==================== èµ„æºæ€§èƒ½é˜ˆå€¼ ====================\n\n/** èµ„æºåŠ è½½æ€§èƒ½é˜ˆå€¼ */\nexport const RESOURCE_THRESHOLDS = {\n  /** æ…¢é€Ÿèµ„æºé˜ˆå€¼: 1000ms */\n  SLOW_RESOURCE: TIME_UNITS.SECOND,\n\n  /** è¶…æ…¢èµ„æºé˜ˆå€¼: 3000ms */\n  VERY_SLOW_RESOURCE: BASE_NUMBERS.THREE * TIME_UNITS.SECOND,\n\n  /** å¤§æ–‡ä»¶é˜ˆå€¼: 1MB */\n  LARGE_FILE_SIZE: BASE_NUMBERS.BYTES_PER_KB * BASE_NUMBERS.BYTES_PER_KB,\n\n  /** è¶…å¤§æ–‡ä»¶é˜ˆå€¼: 5MB */\n  VERY_LARGE_FILE_SIZE:\n    BASE_NUMBERS.FIVE * BASE_NUMBERS.BYTES_PER_KB * BASE_NUMBERS.BYTES_PER_KB,\n} as const;\n\n// ==================== ç›‘æ§é…ç½®å¸¸é‡ ====================\n\n/** ç›‘æ§é…ç½®å‚æ•° */\nexport const MONITORING_CONFIG = {\n  /** æœ€å¤§ç›‘æ§æ•°æ®ç‚¹æ•°é‡ */\n  MAX_DATA_POINTS: 1000,\n\n  /** æœ€å¤§é”™è¯¯è®°å½•æ•°é‡ */\n  MAX_ERROR_RECORDS: 100,\n\n  /** æ€§èƒ½æ•°æ®ä¿ç•™æ—¶é—´: 1å°æ—¶ */\n  DATA_RETENTION_TIME: TIME_UNITS.HOUR,\n\n  /** é‡‡æ ·ç‡: 10% */\n  SAMPLING_RATE: 0.1,\n\n  /** é”™è¯¯é‡‡æ ·ç‡: 100% */\n  ERROR_SAMPLING_RATE: 1.0,\n} as const;\n\n// ==================== è¯Šæ–­å»¶è¿Ÿå¸¸é‡ ====================\n\n/** è¯Šæ–­å’Œæµ‹è¯•å»¶è¿Ÿ */\nexport const DIAGNOSTIC_DELAYS = {\n  /** è¯Šæ–­å¯åŠ¨å»¶è¿Ÿ: 2ç§’ */\n  STARTUP_DELAY: BASE_NUMBERS.TWO * TIME_UNITS.SECOND,\n\n  /** æ¨¡æ‹Ÿå»¶è¿Ÿ: 2ç§’ */\n  SIMULATION_DELAY: BASE_NUMBERS.TWO * TIME_UNITS.SECOND,\n\n  /** è‡ªåŠ¨è¿è¡Œå»¶è¿Ÿ: 1ç§’ */\n  AUTO_RUN_DELAY: TIME_UNITS.SECOND,\n\n  /** é‡è¯•å»¶è¿Ÿ: 5ç§’ */\n  RETRY_DELAY: BASE_NUMBERS.FIVE * TIME_UNITS.SECOND,\n} as const;\n\n// ==================== åŠ¨ç”»å’ŒUIå¸¸é‡ ====================\n\n/** UIåŠ¨ç”»æ—¶é—´å¸¸é‡ */\nexport const ANIMATION_DURATIONS = {\n  /** å¿«é€ŸåŠ¨ç”»: 150ms */\n  FAST: BASE_NUMBERS.FAST_ANIMATION_MS,\n\n  /** æ ‡å‡†åŠ¨ç”»: 300ms */\n  STANDARD: BASE_NUMBERS.STANDARD_ANIMATION_MS,\n\n  /** æ…¢é€ŸåŠ¨ç”»: 500ms */\n  SLOW: BASE_NUMBERS.SLOW_ANIMATION_MS,\n\n  /** è®¡æ•°å™¨åŠ¨ç”»: 2ç§’ */\n  COUNTER: BASE_NUMBERS.TWO * TIME_UNITS.SECOND,\n} as const;\n\n// ==================== Web Vitals æŠ¥è­¦ç³»ç»Ÿå¸¸é‡ ====================\n\n/** Web Vitals æŠ¥è­¦ç³»ç»Ÿå¸¸é‡ */\nexport const ALERT_SYSTEM_CONSTANTS = {\n  /** éšæœºIDç”ŸæˆåŸºæ•° */\n  RANDOM_ID_BASE: 36,\n  /** éšæœºIDæˆªå–èµ·å§‹ä½ç½® */\n  RANDOM_ID_START: 2,\n  /** éšæœºIDæˆªå–é•¿åº¦ */\n  RANDOM_ID_LENGTH: 9,\n} as const;\n\n/** Web Vitals åŸºçº¿ç®¡ç†å¸¸é‡ */\nexport const BASELINE_CONSTANTS = {\n  /** CLS åŸºçº¿é˜ˆå€¼ */\n  CLS_BASELINE: 0.25,\n  /** CLS åŸºçº¿å¤©æ•° */\n  CLS_BASELINE_DAYS: 30,\n  /** FID åŸºçº¿é˜ˆå€¼ */\n  FID_BASELINE: 0.1,\n  /** FID åŸºçº¿å¤©æ•° */\n  FID_BASELINE_DAYS: 15,\n  /** LCP åŸºçº¿é˜ˆå€¼ */\n  LCP_BASELINE: 4000,\n  /** LCP åŸºçº¿å¤©æ•° */\n  LCP_BASELINE_DAYS: 30,\n  /** TTFB åŸºçº¿é˜ˆå€¼ */\n  TTFB_BASELINE: 2500,\n  /** TTFB åŸºçº¿å¤©æ•° */\n  TTFB_BASELINE_DAYS: 15,\n  /** INP åŸºçº¿é˜ˆå€¼ */\n  INP_BASELINE: 300,\n  /** INP åŸºçº¿å¤©æ•° */\n  INP_BASELINE_DAYS: 30,\n  /** INP åŸºçº¿é¢å¤–å¤©æ•° */\n  INP_BASELINE_EXTRA_DAYS: 15,\n} as const;\n\n// ==================== å¯¼å‡ºæ‰€æœ‰å¸¸é‡ ====================\n\n/** æ€§èƒ½å¸¸é‡é›†åˆ */\nexport const PERFORMANCE_CONSTANTS = {\n  TIME_UNITS,\n  WEB_VITALS_THRESHOLDS,\n  MONITORING_INTERVALS,\n  PERFORMANCE_SCORES,\n  RESOURCE_THRESHOLDS,\n  MONITORING_CONFIG,\n  DIAGNOSTIC_DELAYS,\n  ANIMATION_DURATIONS,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/performance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/react-scan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/security-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/seo-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-app-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-base-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-constants.ts","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-ui-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":15,"endColumn":30},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-web-vitals-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":38},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-ui-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":478,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":483,"endColumn":30},{"ruleId":"no-restricted-imports","severity":2,"message":"'./test-web-vitals-constants' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":486,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"patternWithCustomMessage","endLine":489,"endColumn":38}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æµ‹è¯•ç›¸å…³å¸¸é‡å®šä¹‰ - ä¸»å…¥å£æ–‡ä»¶\n * é‡æ–°å¯¼å‡ºæ‰€æœ‰æ‹†åˆ†çš„æµ‹è¯•å¸¸é‡ï¼Œä¿æŒå‘åå…¼å®¹æ€§\n * éµå¾ªé¡¹ç›®ç¼–ç æ ‡å‡†ï¼Œæé«˜æµ‹è¯•ä»£ç çš„å¯ç»´æŠ¤æ€§\n */\n\n// å¯¼å…¥Web Vitalsç›¸å…³å¸¸é‡\n\n// å¯¼å…¥UIç›¸å…³å¸¸é‡\nimport {\n  TEST_CONTENT_LIMITS,\n  TEST_SAMPLE_CONSTANTS,\n  TEST_SCREEN_CONSTANTS,\n  TEST_SPECIAL_CONSTANTS,\n} from './test-ui-constants';\nimport {\n  TEST_WEB_VITALS_DIAGNOSTICS,\n  WEB_VITALS_CONSTANTS,\n} from './test-web-vitals-constants';\n\n// ==================== åº”ç”¨ç‰¹å®šæµ‹è¯•å¸¸é‡ ====================\n\n/** æ—¶é—´è®¡ç®—ç›¸å…³å¸¸é‡ */\nexport const TEST_TIME_CALCULATIONS = {\n  /** æ¯«ç§’åŸºæ•° - 1000 */\n  MILLISECOND_BASE: 1000,\n\n  /** æ—¶é—´å•ä½ - 60 */\n  TIME_UNIT: 60,\n\n  /** æ¯å¤©å°æ—¶æ•° - 24 */\n  HOURS_PER_DAY: 24,\n\n  /** 25å°æ—¶ */\n  TWENTY_FIVE_HOURS: 25,\n} as const;\n\n/** å»¶è¿Ÿç›¸å…³å¸¸é‡ */\nexport const TEST_DELAY_VALUES = {\n  /** çŸ­å»¶è¿Ÿ - 150ms */\n  SHORT_DELAY: 150,\n\n  /** ä¸­ç­‰å»¶è¿Ÿ - 200ms */\n  MEDIUM_DELAY: 200,\n\n  /** æ¸…ç†å»¶è¿Ÿ - 500ms */\n  CLEANUP_DELAY: 500,\n\n  /** ä¸»é¢˜åˆ‡æ¢å»¶è¿Ÿ - 400ms */\n  THEME_CHANGE_DELAY: 400,\n\n  /** å‡å°‘åŠ¨ç”»å»¶è¿Ÿ - 50ms */\n  REDUCED_MOTION_DELAY: 50,\n} as const;\n\n/** ç™¾åˆ†æ¯”å€¼å¸¸é‡ */\nexport const TEST_PERCENTAGE_VALUES = {\n  /** å®Œæ•´ - 100 */\n  FULL: 100,\n\n  /** ä¸€åŠ - 50 */\n  HALF: 50,\n\n  /** å››åˆ†ä¹‹ä¸€ - 25 */\n  QUARTER: 25,\n\n  /** 60% */\n  SIXTY: 60,\n} as const;\n\n/** æ€§èƒ½æ—¶é—´æˆ³å¸¸é‡ */\nexport const TEST_PERFORMANCE_TIMESTAMPS = {\n  /** åŸºç¡€æ—¶é—´æˆ³ - 1000 */\n  BASE: 1000,\n\n  /** åç§»é‡ - 1005 */\n  OFFSET: 1005,\n\n  /** å°å¢é‡ - 1050 */\n  INCREMENT_SMALL: 1050,\n\n  /** ä¸­ç­‰å¢é‡ - 1100 */\n  INCREMENT_MEDIUM: 1100,\n\n  /** å¤§åŸºæ•° - 200000 */\n  LARGE_BASE: 200000,\n\n  /** å¤§åç§» - 200100 */\n  LARGE_OFFSET: 200100,\n\n  /** è¶…å¤§å€¼ - 2100 */\n  EXTRA_LARGE: 2100,\n} as const;\n\n/** åº”ç”¨ç‰¹å®šæµ‹è¯•å¸¸é‡ */\nexport const TEST_APP_CONSTANTS = {\n  // å±å¹•å°ºå¯¸\n  /** å¹³æ¿å±å¹•å®½åº¦ - 1024 */\n  SCREEN_WIDTH_TABLET: 1024,\n\n  // é€æ˜åº¦\n  /** ä¸­é«˜é€æ˜åº¦ - 0.75 */\n  OPACITY_MEDIUM_HIGH: 0.75,\n\n  /** å¾ˆé«˜é€æ˜åº¦ - 0.9 */\n  OPACITY_VERY_HIGH: 0.9,\n\n  // è®¡æ•°\n  /** å°è®¡æ•°3 - 3 */\n  SMALL_COUNT_THREE: 3,\n\n  /** ä¸­ç­‰è®¡æ•°4 - 4 */\n  MEDIUM_COUNT_FOUR: 4,\n\n  /** æ ‡å‡†è®¡æ•°5 - 5 */\n  STANDARD_COUNT_FIVE: 5,\n\n  // æ¯”ä¾‹\n  /** æ¯”ä¾‹å€¼ - 6.25 */\n  RATIO_VALUE: 6.25,\n\n  /** å¥åº·é˜ˆå€¼ - 0.8 */\n  HEALTH_THRESHOLD: 0.8,\n\n  /** ç½®ä¿¡åº¦é˜ˆå€¼ - 0.5 */\n  CONFIDENCE_THRESHOLD: 0.5,\n\n  /** ä½ç½®ä¿¡åº¦é˜ˆå€¼ - 0.2 */\n  LOW_CONFIDENCE_THRESHOLD: 0.2,\n\n  // æ—¶é—´ç›¸å…³å¸¸é‡\n  /** æ—¶é—´å•ä½ - 60 */\n  TIME_UNIT: 60,\n\n  /** æ¯«ç§’åŸºæ•° - 1000 */\n  MILLISECOND_BASE: 1000,\n\n  /** æ¯å¤©å°æ—¶æ•° - 24 */\n  HOURS_PER_DAY: 24,\n\n  // ç™¾åˆ†æ¯”å¸¸é‡\n  /** ä¸€åŠç™¾åˆ†æ¯” - 50 */\n  PERCENTAGE_HALF: 50,\n\n  // è¶…æ—¶ç›¸å…³\n  /** è¶…æ—¶åŸºæ•° - 1000ms */\n  TIMEOUT_BASE: 1000,\n\n  /** å»¶è¿Ÿæ—¶é—´ - 150ms */\n  DELAY_TIME: 150,\n\n  // å±å¹•åˆ†è¾¨ç‡å¸¸é‡\n  /** æ ‡å‡†å®½åº¦ - 1920 */\n  STANDARD_WIDTH: 1920,\n\n  /** æ ‡å‡†é«˜åº¦ - 1080 */\n  STANDARD_HEIGHT: 1080,\n} as const;\n\n// ==================== åŸºç¡€æµ‹è¯•å¸¸é‡ ====================\n\n/** æµ‹è¯•åŸºç¡€æ•°å­—å¸¸é‡ */\nexport const TEST_BASE_NUMBERS = {\n  // æ—¶é—´ç›¸å…³\n  MILLISECONDS_PER_SECOND: 1000,\n  SECONDS_PER_MINUTE: 60,\n  MINUTES_PER_HOUR: 60,\n  HOURS_PER_DAY: 24,\n  TWENTY_FIVE_HOURS: 25,\n\n  // è®¡æ•°ç›¸å…³\n  SMALL_COUNT: 2,\n  MEDIUM_COUNT: 5,\n  LARGE_COUNT: 10,\n  VERY_LARGE_COUNT: 20,\n  HUGE_COUNT: 25,\n\n  // æ•°å­¦è¿ç®—\n  DIVISION_BY_TWO: 2,\n\n  // ç™¾åˆ†æ¯”\n  PERCENTAGE_FULL: 100,\n  HALF_PERCENTAGE: 50,\n\n  // è§’åº¦\n  FULL_CIRCLE_DEGREES: 360,\n  RIGHT_ANGLE_DEGREES: 90,\n\n  // æµ®ç‚¹æ•°æµ‹è¯•\n  FLOAT_DECIMAL_ONE: 0.1,\n  FLOAT_DECIMAL_TWO: 0.2,\n\n  // å†…å­˜å¤§å°ï¼ˆMBï¼‰\n  MEMORY_SIZE_50MB: 50,\n  MEMORY_SIZE_100MB: 100,\n  MEMORY_SIZE_200MB: 200,\n\n  // å­—èŠ‚è½¬æ¢\n  BYTES_PER_KB: 1024,\n} as const;\n\n/** æµ‹è¯•è¶…æ—¶å¸¸é‡ (æ¯«ç§’) */\nexport const TEST_TIMEOUT_CONSTANTS = {\n  /** æ ‡å‡†æµ‹è¯•è¶…æ—¶ - 1000ms */\n  STANDARD: TEST_BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** æ‰©å±•æµ‹è¯•è¶…æ—¶ - 1100ms */\n  EXTENDED: TEST_BASE_NUMBERS.MILLISECONDS_PER_SECOND + 100,\n\n  /** å¿«é€Ÿæµ‹è¯•è¶…æ—¶ - 500ms */\n  QUICK: 500,\n\n  /** é•¿æµ‹è¯•è¶…æ—¶ - 5000ms */\n  LONG: 5000,\n\n  /** æé•¿æµ‹è¯•è¶…æ—¶ - 10000ms */\n  VERY_LONG: 10000,\n\n  /** ç½‘ç»œæµ‹è¯•è¶…æ—¶ - 3000ms */\n  NETWORK: 3000,\n\n  /** çŸ­å»¶è¿Ÿ - 100ms */\n  SHORT_DELAY: 100,\n\n  /** ä¸­ç­‰å»¶è¿Ÿ - 250ms */\n  MEDIUM_DELAY: 250,\n\n  /** é•¿å»¶è¿Ÿ - 500ms */\n  LONG_DELAY: 500,\n} as const;\n\n/** æµ‹è¯•è¿­ä»£å’Œè®¡æ•°å¸¸é‡ */\nexport const TEST_COUNT_CONSTANTS = {\n  /** å¾®å°è®¡æ•° - 3 */\n  TINY: 3,\n\n  /** å°è®¡æ•° - 2 */\n  SMALL: TEST_BASE_NUMBERS.SMALL_COUNT,\n\n  /** ä¸­ç­‰è®¡æ•° - 5 */\n  MEDIUM: TEST_BASE_NUMBERS.MEDIUM_COUNT,\n\n  /** å¤§è®¡æ•° - 10 */\n  LARGE: TEST_BASE_NUMBERS.LARGE_COUNT,\n\n  /** è¶…å¤§è®¡æ•° - 20 */\n  VERY_LARGE: TEST_BASE_NUMBERS.VERY_LARGE_COUNT,\n\n  /** å·¨å¤§è®¡æ•° - 25 */\n  HUGE: TEST_BASE_NUMBERS.HUGE_COUNT,\n\n  /** å®Œæ•´ç™¾åˆ†æ¯” - 100 */\n  PERCENTAGE_FULL: TEST_BASE_NUMBERS.PERCENTAGE_FULL,\n\n  /** æœ€å¤§æ ‡ç­¾æ•° - 5 */\n  MAX_TAGS: TEST_BASE_NUMBERS.MEDIUM_COUNT,\n} as const;\n\n/** æµ‹è¯•è®¡æ•°å¸¸é‡ (ç®€åŒ–ç‰ˆæœ¬ï¼Œå‘åå…¼å®¹) */\nexport const TEST_COUNTS = {\n  /** å°è®¡æ•° - 3 */\n  SMALL: 3,\n\n  /** ä¸­ç­‰è®¡æ•° - 5 */\n  MEDIUM: 5,\n\n  /** å¤§è®¡æ•° - 10 */\n  LARGE: 10,\n\n  /** æ‰¹å¤„ç†å¤§å° - 20 */\n  BATCH_SIZE: 20,\n\n  /** å°å¾ªç¯è®¡æ•° - 1 */\n  SMALL_LOOP: 1,\n} as const;\n\n/** æµ‹è¯•ç™¾åˆ†æ¯”å¸¸é‡ */\nexport const TEST_PERCENTAGE_CONSTANTS = {\n  /** å®Œæ•´ - 100% */\n  FULL: TEST_BASE_NUMBERS.PERCENTAGE_FULL,\n\n  /** ä¸€åŠ - 50% */\n  HALF: TEST_BASE_NUMBERS.HALF_PERCENTAGE,\n} as const;\n\n/** æµ‹è¯•æ—¶é—´æˆ³å¸¸é‡ */\nexport const TEST_TIMESTAMP_CONSTANTS = {\n  /** åŸºç¡€æ—¶é—´æˆ³ - 1000 */\n  BASE: TEST_BASE_NUMBERS.MILLISECONDS_PER_SECOND,\n\n  /** æ—¶é—´æˆ³åç§» - 1005 */\n  OFFSET: 1005,\n\n  /** æ—¶é—´æˆ³å¢é‡ - 1010 */\n  INCREMENT: 1010,\n\n  /** æ—¶é—´æˆ³å·®å€¼ - 1020 */\n  DELTA: 1020,\n\n  /** æ—¶é—´æˆ³æ­¥é•¿ - 1050 */\n  STEP: 1050,\n\n  /** æ—¶é—´æˆ³é—´éš” - 1100 */\n  INTERVAL: 1100,\n\n  /** å¤§æ•°å€¼åç§» - 200100 */\n  LARGE_OFFSET: 200100,\n} as const;\n\n// ==================== UIæµ‹è¯•å¸¸é‡ ====================\n\n/** æµ‹è¯•é€æ˜åº¦å¸¸é‡ */\nexport const TEST_OPACITY_CONSTANTS = {\n  /** å®Œå…¨é€æ˜ */\n  TRANSPARENT: 0,\n\n  /** ä½é€æ˜åº¦ - 0.3 */\n  LOW: 0.3,\n\n  /** ä¸­ç­‰é€æ˜åº¦ - 0.5 */\n  MEDIUM: 0.5,\n\n  /** é«˜é€æ˜åº¦ - 0.8 */\n  HIGH: 0.8,\n\n  /** å®Œå…¨ä¸é€æ˜ */\n  OPAQUE: 1,\n} as const;\n\n/** æµ‹è¯•è§’åº¦å¸¸é‡ */\nexport const TEST_ANGLE_CONSTANTS = {\n  /** å®Œæ•´åœ†å‘¨ - 360åº¦ */\n  FULL_CIRCLE: TEST_BASE_NUMBERS.FULL_CIRCLE_DEGREES,\n\n  /** åŠåœ† - 180åº¦ */\n  HALF_CIRCLE:\n    TEST_BASE_NUMBERS.FULL_CIRCLE_DEGREES / TEST_BASE_NUMBERS.DIVISION_BY_TWO,\n\n  /** ç›´è§’ - 90åº¦ */\n  RIGHT_ANGLE: TEST_BASE_NUMBERS.RIGHT_ANGLE_DEGREES,\n} as const;\n\n/** æµ‹è¯•å¯¹æ¯”åº¦å¸¸é‡ */\nexport const TEST_CONTRAST_CONSTANTS = {\n  /** æœ€å°å¯¹æ¯”åº¦ - 1 */\n  MINIMUM: 1,\n\n  /** ä½å¯¹æ¯”åº¦é˜ˆå€¼ - 2 */\n  LOW_THRESHOLD: TEST_BASE_NUMBERS.SMALL_COUNT,\n\n  /** ä¸­ç­‰å¯¹æ¯”åº¦é˜ˆå€¼ - 5 */\n  MEDIUM_THRESHOLD: TEST_BASE_NUMBERS.MEDIUM_COUNT,\n\n  /** é«˜å¯¹æ¯”åº¦é˜ˆå€¼ - 10 */\n  HIGH_THRESHOLD: TEST_BASE_NUMBERS.LARGE_COUNT,\n\n  /** ç²¾åº¦ä½æ•° - 2 */\n  PRECISION_DIGITS: 2,\n} as const;\n\n// æµ‹è¯•å±å¹•å°ºå¯¸å¸¸é‡å·²ç§»åŠ¨åˆ° test-ui-constants.ts\n\n// æµ‹è¯•å†…å®¹é™åˆ¶å¸¸é‡å·²ç§»åŠ¨åˆ° test-ui-constants.ts\n\n/** æµ‹è¯•åŠ¨ç”»ç¼“åŠ¨å¸¸é‡ */\nexport const TEST_EASING_CONSTANTS = {\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.25 */\n  QUARTER_POINT: 0.25,\n\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.5 */\n  HALF_POINT: 0.5,\n\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.75 */\n  THREE_QUARTER_POINT: 0.75,\n} as const;\n\n// æµ‹è¯•æ ·æœ¬å¸¸é‡å’Œç‰¹æ®Šå¸¸é‡å·²ç§»åŠ¨åˆ° test-ui-constants.ts\n\n/** æµ‹è¯•æ€§èƒ½ç›‘æ§å¸¸é‡ */\nexport const TEST_PERFORMANCE_MONITORING = {\n  /** CLSè­¦å‘Šé˜ˆå€¼ - 0.1 */\n  CLS_WARNING_THRESHOLD: 0.1,\n\n  /** CLSä¸¥é‡é˜ˆå€¼ - 0.25 */\n  CLS_CRITICAL_THRESHOLD: 0.25,\n\n  /** FIDè‰¯å¥½é˜ˆå€¼ - 100ms */\n  FID_GOOD_THRESHOLD: 100,\n\n  /** FIDéœ€è¦æ”¹è¿›é˜ˆå€¼ - 300ms */\n  FID_NEEDS_IMPROVEMENT_THRESHOLD: 300,\n\n  /** LCPè‰¯å¥½é˜ˆå€¼ - 2500ms */\n  LCP_GOOD_THRESHOLD: 2500,\n\n  /** LCPéœ€è¦æ”¹è¿›é˜ˆå€¼ - 4000ms */\n  LCP_NEEDS_IMPROVEMENT_THRESHOLD: 4000,\n\n  /** æ€§èƒ½ç›‘æ§é‡‡æ ·ç‡ - 0.1 */\n  MONITORING_SAMPLE_RATE: 0.1,\n\n  /** æ€§èƒ½æŠ¥å‘Šé—´éš” - 30000ms */\n  REPORTING_INTERVAL: 30000,\n\n  /** æ€§èƒ½æ•°æ®ç¼“å­˜å¤§å° - 100 */\n  CACHE_SIZE: 100,\n\n  /** æ€§èƒ½é˜ˆå€¼æ£€æŸ¥é—´éš” - 5000ms */\n  THRESHOLD_CHECK_INTERVAL: 5000,\n} as const;\n\n/** ä¸»é¢˜åˆ†æå¸¸é‡ */\nexport const THEME_ANALYTICS_CONSTANTS = {\n  /** ä¸»é¢˜åˆ‡æ¢å»¶è¿Ÿ - 400ms */\n  THEME_SWITCH_DELAY: 400,\n\n  /** ä¸»é¢˜åˆ†æé‡‡æ ·ç‡ - 0.1 */\n  ANALYTICS_SAMPLE_RATE: 0.1,\n\n  /** ä¸»é¢˜æ•°æ®ç¼“å­˜å¤§å° - 50 */\n  CACHE_SIZE: 50,\n\n  /** ä¸»é¢˜åˆ‡æ¢è¶…æ—¶ - 1000ms */\n  SWITCH_TIMEOUT: 1000,\n\n  /** å®Œæ•´é‡‡æ ·ç‡ - 1.0 */\n  SAMPLING_RATE_FULL: 1.0,\n\n  /** é»˜è®¤æœ€å¤§æ•°æ®ç‚¹ - 100 */\n  MAX_DATA_POINTS_DEFAULT: 100,\n\n  /** é»˜è®¤æ€§èƒ½é˜ˆå€¼ - 500ms */\n  PERFORMANCE_THRESHOLD_DEFAULT: 500,\n} as const;\n\n// ==================== æ€§èƒ½æµ‹è¯•å¸¸é‡ ====================\n// Web Vitals å¸¸é‡å·²ç§»åŠ¨åˆ° test-web-vitals-constants.ts\n\n// ==================== ç»Ÿä¸€å¯¼å‡ºå¯¹è±¡ ====================\n\n/**\n * ç»Ÿä¸€çš„æµ‹è¯•å¸¸é‡å¯¹è±¡\n * æä¾›æ‰€æœ‰æµ‹è¯•å¸¸é‡çš„é›†ä¸­è®¿é—®ç‚¹\n */\nexport const TEST_CONSTANTS = {\n  // åŸºç¡€å¸¸é‡\n  BASE: TEST_BASE_NUMBERS,\n  COUNT: TEST_COUNT_CONSTANTS,\n  PERCENTAGE: TEST_PERCENTAGE_CONSTANTS,\n  TIMEOUT: TEST_TIMEOUT_CONSTANTS,\n  TIMESTAMP: TEST_TIMESTAMP_CONSTANTS,\n\n  // UIå¸¸é‡\n  ANGLE: TEST_ANGLE_CONSTANTS,\n  CONTENT: TEST_CONTENT_LIMITS,\n  CONTRAST: TEST_CONTRAST_CONSTANTS,\n  EASING: TEST_EASING_CONSTANTS,\n  OPACITY: TEST_OPACITY_CONSTANTS,\n  PERFORMANCE_MONITORING: TEST_PERFORMANCE_MONITORING,\n  SAMPLE: TEST_SAMPLE_CONSTANTS,\n  SCREEN: TEST_SCREEN_CONSTANTS,\n  SPECIAL: TEST_SPECIAL_CONSTANTS,\n\n  // æ€§èƒ½å¸¸é‡\n  WEB_VITALS: WEB_VITALS_CONSTANTS,\n  WEB_VITALS_DIAGNOSTICS: TEST_WEB_VITALS_DIAGNOSTICS,\n\n  // åº”ç”¨å¸¸é‡ï¼ˆä»å¤–éƒ¨å¯¼å…¥ï¼‰\n  APP: TEST_APP_CONSTANTS,\n  TIME: TEST_TIME_CALCULATIONS,\n  DELAY: TEST_DELAY_VALUES,\n  PERFORMANCE_TIMESTAMPS: TEST_PERFORMANCE_TIMESTAMPS,\n} as const;\n\n// ==================== å•ç‹¬å¯¼å‡ºå¸¸ç”¨å¸¸é‡ ====================\n\n// å¯¼å‡ºå¸¸ç”¨çš„æµ‹è¯•å¸¸é‡ä»¥ä¾¿ç›´æ¥ä½¿ç”¨\nexport {\n  TEST_CONTENT_LIMITS,\n  TEST_SAMPLE_CONSTANTS,\n  TEST_SCREEN_CONSTANTS,\n  TEST_SPECIAL_CONSTANTS,\n} from './test-ui-constants';\n\n// å¯¼å‡ºWeb Vitalsç›¸å…³å¸¸é‡\nexport {\n  TEST_WEB_VITALS_DIAGNOSTICS,\n  WEB_VITALS_CONSTANTS,\n} from './test-web-vitals-constants';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-performance-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-ui-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BREAKPOINT_MD' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BREAKPOINT_SM' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BREAKPOINT_XL' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ZERO' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { TEST_BASE_NUMBERS } from '@/constants';\nimport { BREAKPOINT_MD, BREAKPOINT_SM, BREAKPOINT_XL, ZERO } from '@/constants/magic-numbers';\n\n/**\n * æµ‹è¯•UIç›¸å…³å¸¸é‡å®šä¹‰\n * åŒ…å«é€æ˜åº¦ã€è§’åº¦ã€å±å¹•å°ºå¯¸ã€å†…å®¹é™åˆ¶ç­‰UIç›¸å…³å¸¸é‡\n */\n\n\n// ==================== æµ‹è¯•UIå¸¸é‡ ====================\n\n/** æµ‹è¯•é€æ˜åº¦å¸¸é‡ */\nexport const TEST_OPACITY_CONSTANTS = {\n  /** å®Œå…¨é€æ˜ */\n  TRANSPARENT: 0,\n\n  /** ä½é€æ˜åº¦ - 0.3 */\n  LOW: 0.3,\n\n  /** ä¸­ç­‰é€æ˜åº¦ - 0.5 */\n  MEDIUM: 0.5,\n\n  /** é«˜é€æ˜åº¦ - 0.8 */\n  HIGH: 0.8,\n\n  /** å®Œå…¨ä¸é€æ˜ */\n  OPAQUE: 1,\n} as const;\n\n// ==================== æµ‹è¯•å‡ ä½•å’Œè§’åº¦å¸¸é‡ ====================\n\n/** æµ‹è¯•è§’åº¦å¸¸é‡ */\nexport const TEST_ANGLE_CONSTANTS = {\n  /** å®Œæ•´åœ†å‘¨ - 360åº¦ */\n  FULL_CIRCLE: TEST_BASE_NUMBERS.FULL_CIRCLE_DEGREES,\n\n  /** åŠåœ† - 180åº¦ */\n  HALF_CIRCLE:\n    TEST_BASE_NUMBERS.FULL_CIRCLE_DEGREES / TEST_BASE_NUMBERS.SMALL_COUNT,\n\n  /** å››åˆ†ä¹‹ä¸€åœ† - 90åº¦ */\n  QUARTER_CIRCLE:\n    TEST_BASE_NUMBERS.FULL_CIRCLE_DEGREES /\n    (TEST_BASE_NUMBERS.SMALL_COUNT * TEST_BASE_NUMBERS.SMALL_COUNT),\n} as const;\n\n// ==================== æµ‹è¯•å¯¹æ¯”åº¦å’Œé¢œè‰²å¸¸é‡ ====================\n\n/** æµ‹è¯•å¯¹æ¯”åº¦å¸¸é‡ */\nexport const TEST_CONTRAST_CONSTANTS = {\n  /** æœ€å°å¯¹æ¯”åº¦ - 1 */\n  MINIMUM: 1,\n\n  /** ä½å¯¹æ¯”åº¦é˜ˆå€¼ - 2 */\n  LOW_THRESHOLD: TEST_BASE_NUMBERS.SMALL_COUNT,\n\n  /** é«˜å¯¹æ¯”åº¦é˜ˆå€¼ - 10 */\n  HIGH_THRESHOLD: TEST_BASE_NUMBERS.LARGE_COUNT,\n\n  /** ç²¾åº¦ä½æ•° - 5 */\n  PRECISION_DIGITS: TEST_BASE_NUMBERS.MEDIUM_COUNT,\n} as const;\n\n// ==================== æµ‹è¯•å±å¹•å°ºå¯¸å¸¸é‡ ====================\n\n/** æµ‹è¯•å±å¹•å°ºå¯¸å¸¸é‡ */\nexport const TEST_SCREEN_CONSTANTS = {\n  /** ç§»åŠ¨ç«¯å®½åº¦ - 768px */\n  MOBILE_WIDTH: 768,\n\n  /** å¹³æ¿å®½åº¦ - 1024px */\n  TABLET_WIDTH: 1024,\n\n  /** æ¡Œé¢å®½åº¦ - 1280px */\n  DESKTOP_WIDTH: 1280,\n\n  /** æ ‡å‡†é«˜åº¦ - 768px */\n  STANDARD_HEIGHT: 768,\n\n  /** å°å±æ–­ç‚¹ - 640px */\n  BREAKPOINT_SM: 640,\n\n  /** ä¸­å±æ–­ç‚¹ - 768px */\n  BREAKPOINT_MD: 768,\n\n  /** å¤§å±æ–­ç‚¹ - 1024px */\n  BREAKPOINT_LG: 1024,\n\n  /** è¶…å¤§å±æ–­ç‚¹ - 1280px */\n  BREAKPOINT_XL: 1280,\n} as const;\n\n// ==================== æµ‹è¯•å†…å®¹é™åˆ¶å¸¸é‡ ====================\n\n/** æµ‹è¯•å†…å®¹é™åˆ¶å¸¸é‡ */\nexport const TEST_CONTENT_LIMITS = {\n  /** æ ‡é¢˜æœ€å¤§é•¿åº¦ - 60 */\n  TITLE_MAX: 60,\n\n  /** æè¿°æœ€å¤§é•¿åº¦ - 160 */\n  DESCRIPTION_MAX: 160,\n\n  /** çŸ­æ–‡æœ¬æœ€å¤§é•¿åº¦ - 20 */\n  SHORT_TEXT_MAX: 20,\n\n  /** ä¸­ç­‰æ–‡æœ¬æœ€å¤§é•¿åº¦ - 250 */\n  MEDIUM_TEXT_MAX: 250,\n\n  /** é•¿æ–‡æœ¬æœ€å¤§é•¿åº¦ - 500 */\n  LONG_TEXT_MAX: 500,\n\n  /** æœ€å¤§æ–‡ä»¶å¤§å° - 1024KB */\n  MAX_FILE_SIZE: 1024,\n\n  /** æœ€å¤§åµŒå¥—å›è°ƒ - 3 */\n  MAX_NESTED_CALLBACKS: 3,\n\n  /** å‡½æ•°æœ€å¤§è¡Œæ•° - 80 */\n  FUNCTION_MAX_LINES: 80,\n\n  /** æ–‡ä»¶æœ€å¤§è¡Œæ•° - 500 */\n  FILE_MAX_LINES: 500,\n\n  /** æœ€å¤§å¤æ‚åº¦ - 10 */\n  MAX_COMPLEXITY: 10,\n\n  /** SEOæ ‡é¢˜æœ€å¤§é•¿åº¦ - 60 */\n  SEO_TITLE_MAX_LENGTH: 60,\n\n  /** SEOæè¿°æœ€å¤§é•¿åº¦ - 160 */\n  SEO_DESCRIPTION_MAX_LENGTH: 160,\n} as const;\n\n// ==================== æµ‹è¯•åŠ¨ç”»å’Œç¼“åŠ¨å¸¸é‡ ====================\n\n/** æµ‹è¯•åŠ¨ç”»ç¼“åŠ¨å¸¸é‡ */\nexport const TEST_EASING_CONSTANTS = {\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.25 */\n  QUARTER_POINT: 0.25,\n\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.5 */\n  HALF_POINT: 0.5,\n\n  /** ç¼“åŠ¨æµ‹è¯•ç‚¹ - 0.75 */\n  THREE_QUARTER_POINT: 0.75,\n} as const;\n\n// ==================== æµ‹è¯•æ•°å€¼æ ·æœ¬å¸¸é‡ ====================\n\n/** æµ‹è¯•æ•°å€¼æ ·æœ¬å¸¸é‡ */\nexport const TEST_SAMPLE_CONSTANTS = {\n  /** å°æ•°æµ‹è¯•å€¼ - 123.7 */\n  DECIMAL_SAMPLE: 123.7,\n\n  /** è´Ÿå°æ•°æµ‹è¯•å€¼ - -5.2 */\n  NEGATIVE_DECIMAL: -5.2,\n\n  /** å¤§æ•´æ•°æµ‹è¯•å€¼ - 999999 */\n  LARGE_INTEGER: 1000000,\n\n  /** å°æ•´æ•°æµ‹è¯•å€¼ - 42 */\n  SMALL_INTEGER: 42,\n\n  /** æ•´æ•°æ ·æœ¬æµ‹è¯•å€¼ - 1234 */\n  INTEGER_SAMPLE: 1234,\n\n  /** ç™¾åˆ†æ¯”æ ·æœ¬æµ‹è¯•å€¼ - 96 */\n  PERCENTAGE_SAMPLE: 96,\n\n  /** è´§å¸æ ·æœ¬æµ‹è¯•å€¼ - 1234.56 */\n  CURRENCY_SAMPLE: 1234.56,\n\n  /** ç²¾åº¦æ ·æœ¬æµ‹è¯•å€¼ - 123.456 */\n  PRECISION_SAMPLE: 123.456,\n\n  /** é›¶å€¼æµ‹è¯• */\n  ZERO_VALUE: 0,\n\n  /** å•ä½å€¼æµ‹è¯• */\n  UNIT_VALUE: 1,\n\n  /** ä»·æ ¼æµ‹è¯•å€¼ - 99.99 */\n  PRICE_SAMPLE: 99.99,\n} as const;\n\n// ==================== æµ‹è¯•ç‰¹æ®Šæ•°å€¼å¸¸é‡ ====================\n\n/** æµ‹è¯•ç‰¹æ®Šæ•°å€¼å¸¸é‡ */\nexport const TEST_SPECIAL_CONSTANTS = {\n  /** åå…­è¿›åˆ¶å¤§æ•° - 0x80000000 */\n  HEX_LARGE_NUMBER: 0x80000000,\n\n  /** è´Ÿæ•°æµ‹è¯•å€¼ - -100 */\n  NEGATIVE_VALUE: -100,\n\n  /** é›¶å€¼ */\n  ZERO: 0,\n\n  /** å•ä½å€¼ */\n  UNIT: 1,\n\n  /** è´Ÿå•ä½å€¼ */\n  NEGATIVE_UNIT: -1,\n} as const;\n\n// ==================== æµ‹è¯•æ€§èƒ½ç›‘æ§å¸¸é‡ ====================\n\n/** æµ‹è¯•æ€§èƒ½ç›‘æ§å¸¸é‡ */\nexport const TEST_PERFORMANCE_MONITORING = {\n  /** CLSè­¦å‘Šé˜ˆå€¼ - 0.1 */\n  CLS_WARNING_THRESHOLD: 0.1,\n\n  /** CLSä¸¥é‡é˜ˆå€¼ - 0.25 */\n  CLS_CRITICAL_THRESHOLD: 0.25,\n\n  /** LCPè­¦å‘Šé˜ˆå€¼ - 2500ms */\n  LCP_WARNING_THRESHOLD: 2500,\n\n  /** LCPä¸¥é‡é˜ˆå€¼ - 4000ms */\n  LCP_CRITICAL_THRESHOLD: 4000,\n\n  /** FIDè­¦å‘Šé˜ˆå€¼ - 100ms */\n  FID_WARNING_THRESHOLD: 100,\n\n  /** FIDä¸¥é‡é˜ˆå€¼ - 300ms */\n  FID_CRITICAL_THRESHOLD: 300,\n\n  /** é•¿è¶…æ—¶æ—¶é—´ - 5000ms */\n  LONG_TIMEOUT: 5000,\n\n  /** ç›‘æ§è¶…æ—¶æ—¶é—´ - 1000ms */\n  MONITORING_TIMEOUT: 1000,\n\n  /** æ€§èƒ½æ•°æ®æµ‹è¯•å€¼ - 0.15 */\n  PERFORMANCE_DATA_VALUE: 0.15,\n} as const;\n\n// ==================== å¯¼å‡ºUIå¸¸é‡ç±»å‹ ====================\n\nexport type TestOpacityConstants = typeof TEST_OPACITY_CONSTANTS;\nexport type TestAngleConstants = typeof TEST_ANGLE_CONSTANTS;\nexport type TestContrastConstants = typeof TEST_CONTRAST_CONSTANTS;\nexport type TestScreenConstants = typeof TEST_SCREEN_CONSTANTS;\nexport type TestContentLimits = typeof TEST_CONTENT_LIMITS;\nexport type TestEasingConstants = typeof TEST_EASING_CONSTANTS;\nexport type TestSampleConstants = typeof TEST_SAMPLE_CONSTANTS;\nexport type TestSpecialConstants = typeof TEST_SPECIAL_CONSTANTS;\nexport type TestPerformanceMonitoring = typeof TEST_PERFORMANCE_MONITORING;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/test-web-vitals-constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HOURS_PER_DAY' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { SECONDS_PER_MINUTE, MINUTES_PER_HOUR, HOURS_PER_DAY } from '@/constants';\n/**\n * Web Vitals æµ‹è¯•å¸¸é‡å®šä¹‰\n * ä¸“é—¨ç”¨äºæ€§èƒ½ç›‘æ§å’ŒWeb Vitalsç›¸å…³çš„æµ‹è¯•\n */\n\n/** Web Vitals é˜ˆå€¼å¸¸é‡ */\nexport const WEB_VITALS_CONSTANTS = {\n  // Core Web Vitals é˜ˆå€¼\n  /** CLS è‰¯å¥½é˜ˆå€¼ - 0.1 */\n  CLS_GOOD_THRESHOLD: 0.1,\n\n  /** CLS éœ€è¦æ”¹è¿›é˜ˆå€¼ - 0.25 */\n  CLS_NEEDS_IMPROVEMENT_THRESHOLD: 0.25,\n\n  /** CLS è­¦å‘Šå˜åŒ– - 0.05 */\n  CLS_WARNING_CHANGE: 0.05,\n\n  /** CLS ä¸¥é‡å˜åŒ– - 0.1 */\n  CLS_CRITICAL_CHANGE: 0.1,\n\n  /** FID è‰¯å¥½é˜ˆå€¼ - 100ms */\n  FID_GOOD_THRESHOLD: 100,\n\n  /** FID éœ€è¦æ”¹è¿›é˜ˆå€¼ - 300ms */\n  FID_NEEDS_IMPROVEMENT_THRESHOLD: 300,\n\n  /** FCP è‰¯å¥½é˜ˆå€¼ - 1800ms */\n  FCP_GOOD_THRESHOLD: 1800,\n\n  /** FCP éœ€è¦æ”¹è¿›é˜ˆå€¼ - 3000ms */\n  FCP_NEEDS_IMPROVEMENT_THRESHOLD: 3000,\n\n  /** LCP è‰¯å¥½é˜ˆå€¼ - 2500ms */\n  LCP_GOOD_THRESHOLD: 2500,\n\n  /** LCP éœ€è¦æ”¹è¿›é˜ˆå€¼ - 4000ms */\n  LCP_NEEDS_IMPROVEMENT_THRESHOLD: 4000,\n\n  /** TTFB è‰¯å¥½é˜ˆå€¼ - 800ms */\n  TTFB_GOOD_THRESHOLD: 800,\n\n  /** TTFB éœ€è¦æ”¹è¿›é˜ˆå€¼ - 1800ms */\n  TTFB_NEEDS_IMPROVEMENT_THRESHOLD: 1800,\n\n  // æ—¶é—´å•ä½\n  /** æ¯«ç§’æ¯ç§’ - 1000 */\n  MILLISECONDS_PER_SECOND: 1000,\n\n  /** ç§’æ¯åˆ†é’Ÿ - 60 */\n  SECONDS_PER_MINUTE: 60,\n\n  /** åˆ†é’Ÿæ¯å°æ—¶ - 60 */\n  MINUTES_PER_HOUR: 60,\n\n  /** å°æ—¶æ¯å¤© - 24 */\n  HOURS_PER_DAY: 24,\n\n  // åŸºå‡†ç®¡ç†\n  /** æœ€å¤§åŸºå‡†æ•°é‡ - 50 */\n  MAX_BASELINES: 50,\n\n  /** åŸºå‡†æœ€å¤§å¹´é¾„ï¼ˆå¤©ï¼‰- 30 */\n  BASELINE_MAX_AGE_DAYS: 30,\n\n  /** åŸºå‡†ä¿å­˜å»¶è¿Ÿ - 5000ms */\n  BASELINE_SAVE_DELAY: 5000,\n\n  // IDç”Ÿæˆ\n  /** å“ˆå¸ŒåŸºæ•° - 36 */\n  HASH_BASE: 36,\n\n  /** IDæˆªå–å¼€å§‹ä½ç½® - 2 */\n  ID_SUBSTR_START: 2,\n\n  /** IDéšæœºé•¿åº¦ - 9 */\n  ID_RANDOM_LENGTH: 9,\n\n  // æŠ¥å‘Š\n  /** æŠ¥å‘Šé¡¹ç›®é™åˆ¶ - 50 */\n  REPORT_ITEM_LIMIT: 50,\n\n  // ==================== æµ‹è¯•æ—¶é—´å¸¸é‡ ====================\n\n  /** æµ‹è¯•è·å–å¼€å§‹æ—¶é—´ - 100ms */\n  TEST_FETCH_START: 100,\n\n  /** æµ‹è¯•åŸŸåæŸ¥æ‰¾ç»“æŸæ—¶é—´ - 150ms */\n  TEST_DOMAIN_LOOKUP_END: 150,\n\n  /** æµ‹è¯•è¿æ¥å¼€å§‹æ—¶é—´ - 200ms */\n  TEST_CONNECT_START: 200,\n\n  /** æµ‹è¯•è¿æ¥ç»“æŸæ—¶é—´ - 250ms */\n  TEST_CONNECT_END: 250,\n\n  /** æµ‹è¯•è¯·æ±‚å¼€å§‹æ—¶é—´ - 300ms */\n  TEST_REQUEST_START: 300,\n\n  /** æµ‹è¯•å“åº”å¼€å§‹æ—¶é—´ - 400ms */\n  TEST_RESPONSE_START: 400,\n\n  /** æµ‹è¯•å“åº”ç»“æŸæ—¶é—´ - 500ms */\n  TEST_RESPONSE_END: 500,\n\n  /** æµ‹è¯•DOMäº¤äº’æ—¶é—´ - 600ms */\n  TEST_DOM_INTERACTIVE: 600,\n\n  /** æµ‹è¯•DOMå†…å®¹åŠ è½½å¼€å§‹æ—¶é—´ - 700ms */\n  TEST_DOM_CONTENT_LOADED_START: 700,\n\n  /** æµ‹è¯•DOMå†…å®¹åŠ è½½ç»“æŸæ—¶é—´ - 750ms */\n  TEST_DOM_CONTENT_LOADED_END: 750,\n\n  /** æµ‹è¯•DOMå®Œæˆæ—¶é—´ - 800ms */\n  TEST_DOM_COMPLETE: 800,\n\n  /** æµ‹è¯•åŠ è½½äº‹ä»¶ç»“æŸæ—¶é—´ - 900ms */\n  TEST_LOAD_EVENT_END: 900,\n\n  // ==================== ç½‘ç»œæµ‹è¯•å¸¸é‡ ====================\n\n  /** æµ‹è¯•ä¸‹è¡Œé€Ÿåº¦ - 4 Mbps */\n  TEST_DOWNLINK_SPEED: 4,\n\n  /** æµ‹è¯•RTTå»¶è¿Ÿ - 50ms */\n  TEST_RTT_LATENCY: 50,\n\n  // ==================== èµ„æºç›‘æ§å¸¸é‡ ====================\n\n  /** æ…¢èµ„æºé˜ˆå€¼ - 1000ms */\n  SLOW_RESOURCE_THRESHOLD: 1000,\n\n  /** æœ€å¤§æ…¢èµ„æºæ•°é‡ - 10 */\n  MAX_SLOW_RESOURCES: 10,\n\n  // ==================== è¯„åˆ†æƒé‡å¸¸é‡ ====================\n\n  /** è¯„åˆ†æƒé‡å››åˆ†ä¹‹ä¸€ - 0.25 */\n  SCORE_WEIGHT_QUARTER: 0.25,\n\n  /** è‰¯å¥½è¯„åˆ†ä¹˜æ•° - 30 */\n  SCORE_MULTIPLIER_GOOD: 30,\n\n  /** éœ€è¦æ”¹è¿›è¯„åˆ†ä¹˜æ•° - 15 */\n  SCORE_MULTIPLIER_NEEDS_IMPROVEMENT: 15,\n\n  /** è¾ƒå·®è¯„åˆ†ä¹˜æ•° - 5 */\n  SCORE_MULTIPLIER_POOR: 5,\n\n  // ==================== æµ‹è¯•è®¡æ—¶å™¨å¸¸é‡ ====================\n\n  /** æµ‹è¯•è®¡æ—¶å™¨æ¨è¿› - 1000ms */\n  TEST_TIMER_ADVANCE: 1000,\n\n  /** æµ‹è¯•é•¿è¶…æ—¶ - 5000ms */\n  TEST_TIMEOUT_LONG: 5000,\n\n  // ==================== ç¼“å­˜æµ‹è¯•å¸¸é‡ ====================\n\n  /** ç¼“å­˜å¤§å°2 - 2 */\n  CACHE_SIZE_TWO: 2,\n\n  /** ç¼“å­˜å‘½ä¸­ç‡ä¸€åŠ - 0.5 */\n  CACHE_HIT_RATE_HALF: 0.5,\n\n  // ==================== ç½®ä¿¡åº¦é˜ˆå€¼å¸¸é‡ ====================\n\n  /** ä¸­ç­‰ç½®ä¿¡åº¦é˜ˆå€¼ - 0.7 */\n  CONFIDENCE_THRESHOLD_MEDIUM: 0.7,\n\n  /** é«˜ç½®ä¿¡åº¦é˜ˆå€¼ - 0.9 */\n  CONFIDENCE_THRESHOLD_HIGH: 0.9,\n\n  // ==================== æ€§èƒ½åˆ†æ•°å¸¸é‡ ====================\n\n  /** å®Œç¾åˆ†æ•° - 100 */\n  PERFECT_SCORE: 100,\n\n  /** æ€§èƒ½æ ·æœ¬å¤§å° - 50 */\n  PERFORMANCE_SAMPLE_SIZE: 50,\n\n  /** ä¼˜ç§€åˆ†æ•°é˜ˆå€¼ - 90 */\n  SCORE_EXCELLENT_THRESHOLD: 90,\n\n  /** æµ‹è¯•è‰¯å¥½åˆ†æ•°é˜ˆå€¼ - 80 */\n  TEST_SCORE_THRESHOLD_GOOD: 80,\n\n  /** å¹³å‡åˆ†æ•°é˜ˆå€¼ - 60 */\n  SCORE_AVERAGE_THRESHOLD: 60,\n\n  // ==================== å°æ•°ä½æ•°å¸¸é‡ ====================\n\n  /** å°æ•°ä½æ•°1 - 1 */\n  DECIMAL_PLACES_ONE: 1,\n\n  /** å°æ•°ä½æ•°2 - 2 */\n  DECIMAL_PLACES_TWO: 2,\n\n  /** å°æ•°ä½æ•°3 - 3 */\n  DECIMAL_PLACES_THREE: 3,\n\n  // ==================== è½¬æ¢å¸¸é‡ ====================\n\n  /** å­—èŠ‚è½¬KBé™¤æ•° - 1024 */\n  BYTES_TO_KB_DIVISOR: 1024,\n\n  // ==================== æŠ¥å‘Šå†å²å¸¸é‡ ====================\n\n  /** æŠ¥å‘Šå†å²é™åˆ¶ - 50 */\n  REPORT_HISTORY_LIMIT: 50,\n\n  // ==================== æ€§èƒ½é˜ˆå€¼å¸¸é‡ ====================\n\n  /** æ€§èƒ½é˜ˆå€¼å¸¸é‡ */\n  PERFORMANCE_THRESHOLDS: {\n    /** LCPè‰¯å¥½é˜ˆå€¼ - 2500ms */\n    LCP: 2500,\n    /** FIDè‰¯å¥½é˜ˆå€¼ - 100ms */\n    FID: 100,\n    /** CLSè‰¯å¥½é˜ˆå€¼ - 0.1 */\n    CLS: 0.1,\n    /** FCPè‰¯å¥½é˜ˆå€¼ - 1800ms */\n    FCP: 1800,\n    /** TTFBè‰¯å¥½é˜ˆå€¼ - 800ms */\n    TTFB: 800,\n  },\n\n  // ==================== ç™¾åˆ†æ¯”å˜åŒ–å¸¸é‡ ====================\n\n  /** ç™¾åˆ†æ¯”å˜åŒ–è­¦å‘Š - 10 */\n  PERCENT_CHANGE_WARNING: 10,\n\n  /** ç™¾åˆ†æ¯”å˜åŒ–ä¸¥é‡ - 25 */\n  PERCENT_CHANGE_CRITICAL: 25,\n\n  // ==================== TTFBå˜åŒ–å¸¸é‡ ====================\n\n  /** TTFBè­¦å‘Šå˜åŒ– - 200ms */\n  TTFB_WARNING_CHANGE: 200,\n\n  /** TTFBä¸¥é‡å˜åŒ– - 400ms */\n  TTFB_CRITICAL_CHANGE: 400,\n\n  // ==================== å…¶ä»–Web Vitalså˜åŒ–å¸¸é‡ ====================\n\n  /** FIDè­¦å‘Šå˜åŒ– - 50ms */\n  FID_WARNING_CHANGE: 50,\n\n  /** FIDä¸¥é‡å˜åŒ– - 100ms */\n  FID_CRITICAL_CHANGE: 100,\n\n  /** LCPè­¦å‘Šå˜åŒ– - 500ms */\n  LCP_WARNING_CHANGE: 500,\n\n  /** LCPä¸¥é‡å˜åŒ– - 1000ms */\n  LCP_CRITICAL_CHANGE: 1000,\n\n  /** FCPè­¦å‘Šå˜åŒ– - 300ms */\n  FCP_WARNING_CHANGE: 300,\n\n  /** FCPä¸¥é‡å˜åŒ– - 600ms */\n  FCP_CRITICAL_CHANGE: 600,\n\n  // ==================== æ—¶é—´è®¡ç®—å¸¸é‡ ====================\n\n  /** æ¯æœˆå¤©æ•° - 30 */\n  DAYS_PER_MONTH: 30,\n\n  /** æ¯å¤©æ¯«ç§’æ•° - 86400000ms */\n  MILLISECONDS_PER_DAY: 86400000,\n\n  // ==================== æµ‹è¯•ç™¾åˆ†æ¯”å¸¸é‡ ====================\n\n  /** æµ‹è¯•ç™¾åˆ†æ¯”50 - 50 */\n  TEST_PERCENTAGE_FIFTY: 50,\n\n  // ==================== æµ‹è¯•è®¡æ•°å¸¸é‡ ====================\n\n  /** æµ‹è¯•è®¡æ•°2 - 2 */\n  TEST_COUNT_TWO: 2,\n\n  /** æµ‹è¯•è­¦æŠ¥å†å²é™åˆ¶ - 100 */\n  TEST_ALERT_HISTORY_LIMIT: 100,\n\n  /** æµ‹è¯•åˆ†æ•°é˜ˆå€¼å·® - 30 */\n  TEST_SCORE_THRESHOLD_POOR: 30,\n\n  // ==================== è®¾å¤‡å’Œç½‘ç»œå¸¸é‡ ====================\n\n  /** è®¾å¤‡å†…å­˜ - 8GB */\n  DEVICE_MEMORY: 8,\n\n  /** ç½‘ç»œä¸‹è¡Œé€Ÿåº¦ - 4 Mbps */\n  NETWORK_DOWNLINK: 4,\n\n  /** æ…¢èµ„æºæŒç»­æ—¶é—´ - 1500ms */\n  SLOW_RESOURCE_DURATION: 1500,\n\n  // ==================== èµ„æºæƒ©ç½šå¸¸é‡ ====================\n\n  /** æœ€å¤§æ…¢èµ„æºæƒ©ç½š - 10 */\n  MAX_SLOW_RESOURCES_PENALTY: 10,\n\n  /** æ…¢èµ„æºæƒ©ç½š - 5 */\n  SLOW_RESOURCE_PENALTY: 5,\n\n  // ==================== åŸºçº¿åˆ·æ–°å¸¸é‡ ====================\n\n  /** åŸºçº¿åˆ·æ–°å°æ—¶æ•° - 24 */\n  BASELINE_REFRESH_HOURS: 24,\n\n  // ==================== è¯„åˆ†ç­‰çº§é˜ˆå€¼ ====================\n\n  /** Açº§é˜ˆå€¼ - 90 */\n  GRADE_A_THRESHOLD: 90,\n\n  /** Bçº§é˜ˆå€¼ - 80 */\n  GRADE_B_THRESHOLD: 80,\n\n  /** Cçº§é˜ˆå€¼ - 70 */\n  GRADE_C_THRESHOLD: 70,\n\n  /** Dçº§é˜ˆå€¼ - 60 */\n  GRADE_D_THRESHOLD: 60,\n} as const;\n\n/** Web Vitals è¯Šæ–­å¸¸é‡ */\nexport const TEST_WEB_VITALS_DIAGNOSTICS = {\n  /** è¯Šæ–­è¶…æ—¶ - 5000ms */\n  TIMEOUT: 5000,\n\n  /** æœ€å¤§é‡è¯•æ¬¡æ•° - 3 */\n  MAX_RETRIES: 3,\n\n  /** é‡è¯•å»¶è¿Ÿ - 1000ms */\n  RETRY_DELAY: 1000,\n\n  /** é‡‡æ ·ç‡ - 0.1 (10%) */\n  SAMPLING_RATE: 0.1,\n\n  /** ç¼“å†²åŒºå¤§å° - 100 */\n  BUFFER_SIZE: 100,\n\n  /** æ‰¹å¤„ç†å¤§å° - 10 */\n  BATCH_SIZE: 10,\n\n  /** åˆ·æ–°é—´éš” - 30000ms (30ç§’) */\n  FLUSH_INTERVAL: 30000,\n\n  /** æœ€å¤§é˜Ÿåˆ—å¤§å° - 1000 */\n  MAX_QUEUE_SIZE: 1000,\n\n  /** å‹ç¼©é˜ˆå€¼ - 1024å­—èŠ‚ */\n  COMPRESSION_THRESHOLD: 1024,\n\n  /** æœ€å¤§æœ‰æ•ˆè´Ÿè½½å¤§å° - 64KB */\n  MAX_PAYLOAD_SIZE: 65536,\n\n  // ==================== Web Vitals åŸºçº¿å¸¸é‡ ====================\n\n  /** CLSåŸºçº¿å€¼ - 0.1 */\n  CLS_BASELINE: 0.1,\n\n  /** LCPåŸºçº¿å€¼ - 2500ms */\n  LCP_BASELINE: 2500,\n\n  /** FIDåŸºçº¿å€¼ - 100ms */\n  FID_BASELINE: 100,\n\n  /** INPåŸºçº¿å€¼ - 200ms */\n  INP_BASELINE: 200,\n\n  /** TTFBåŸºçº¿å€¼ - 800ms */\n  TTFB_BASELINE: 800,\n\n  /** FCPåŸºçº¿å€¼ - 1800ms */\n  FCP_BASELINE: 1800,\n\n  // ==================== ç½‘ç»œå’Œè®¾å¤‡è¯Šæ–­å¸¸é‡ ====================\n\n  /** ç½‘ç»œä¸‹è¡Œé€Ÿåº¦ - 4 Mbps */\n  NETWORK_DOWNLINK: 4,\n\n  /** ç½‘ç»œRTT - 50ms */\n  NETWORK_RTT: 50,\n\n  /** è®¾å¤‡å†…å­˜ - 8GB */\n  DEVICE_MEMORY: 8,\n\n  /** æ€§èƒ½åˆ†æ•° - 85 */\n  PERFORMANCE_SCORE: 85,\n\n  /** å†å²æ—¶é—´åç§» - 86400000ms (24å°æ—¶) */\n  HISTORICAL_TIME_OFFSET: 86400000,\n\n  // ==================== Web Vitals å¢é‡å¸¸é‡ ====================\n\n  /** CLSå¢é‡ - 0.05 */\n  CLS_INCREMENT: 0.05,\n\n  /** LCPå¢é‡ - 500ms */\n  LCP_INCREMENT: 500,\n\n  /** FIDå¢é‡ - 50ms */\n  FID_INCREMENT: 50,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/time.ts","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'./count' import is restricted from being used by a pattern. ğŸš« è¯·ä½¿ç”¨ @/ è·¯å¾„åˆ«åæ›¿ä»£ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¾‹å¦‚ï¼šimport { something } from \"@/lib/module\"","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":1,"endColumn":83}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_300000, COUNT_3600, COUNT_4, MAGIC_12, MAGIC_2000 } from \"./count\";\n\n/**\n * æ—¶é—´ç›¸å…³å¸¸é‡\n *\n * ğŸ¯ ç”¨é€”ï¼šæ—¶é—´å•ä½ã€æ—¶é—´é—´éš”ç­‰æ—¶é—´ç›¸å…³çš„å¸¸é‡å®šä¹‰\n * ğŸ“ æ³¨æ„ï¼šä¸ @/lib/units å·¥å…·åº“é…åˆä½¿ç”¨ï¼Œå¤„ç†æ—¶é—´è½¬æ¢\n */\n\n// ============================================================================\n// åŸºç¡€æ—¶é—´å•ä½\n// ============================================================================\n\nexport const DAYS_PER_WEEK = 7 as const;\nexport const HOURS_PER_DAY = 24 as const;\nexport const MINUTES_PER_HOUR = 60 as const;\nexport const SECONDS_PER_MINUTE = 60 as const;\n\n// ============================================================================\n// æ‰©å±•æ—¶é—´å•ä½\n// ============================================================================\n\nexport const DAYS_PER_MONTH = 30 as const;\nexport const DAYS_PER_YEAR = 365 as const;\nexport const MONTHS_PER_YEAR = MAGIC_12;\nexport const WEEKS_PER_MONTH = COUNT_4;\n\n// ============================================================================\n// æ¯«ç§’æ—¶é—´å¸¸é‡\n// ============================================================================\n\nexport const MILLISECONDS_PER_SECOND = 1000;\nexport const SECONDS_PER_HOUR = COUNT_3600;\nexport const MILLISECONDS_PER_MINUTE = 60000;\nexport const MILLISECONDS_PER_HOUR = 3600000 as const;\n\n// ============================================================================\n// å¸¸ç”¨æ—¶é—´é—´éš” (æ¯«ç§’)\n// ============================================================================\n\nexport const ONE_SECOND_MS = 1000;\nexport const TWO_SECONDS_MS = MAGIC_2000;\nexport const THREE_SECONDS_MS = 3000;\nexport const FIVE_SECONDS_MS = 5000;\nexport const TEN_SECONDS_MS = 10000;\nexport const THIRTY_SECONDS_MS = 30000;\nexport const MINUTE_MS = 60000;\nexport const FIVE_MINUTES_MS = COUNT_300000;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/constants/units.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ANIMATION_DURATION_VERY_SLOW' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":2,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_60000' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":6,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ç›´æ¥å®šä¹‰åŸºç¡€å¸¸é‡ï¼Œé¿å…å¾ªç¯ä¾èµ–\nconst ANIMATION_DURATION_VERY_SLOW = 1000 as const;\nconst BYTES_PER_KB = 1024 as const;\nconst MAGIC_1048576 = 1048576 as const; // 1MB in bytes\nconst MAGIC_3600000 = 3600000 as const; // 1 hour in milliseconds\nconst MAGIC_60000 = 60000 as const; // 1 minute in milliseconds\n\n/**\n * é€šç”¨æ—¶é—´ä¸å®¹é‡å•ä½å¸¸é‡\n */\nexport const SECOND_MS = 1000 as const;\nexport const HOUR_MS = MAGIC_3600000; // 60 * 60 * 1000\n\nexport const KB = BYTES_PER_KB;\nexport const MB = MAGIC_1048576; // BYTES_PER_KB * BYTES_PER_KB\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/features/auth/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/features/dashboard/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-breakpoint.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-enhanced-theme.performance.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-enhanced-theme.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-enhanced-translations.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-intersection-observer.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-keyboard-navigation-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-keyboard-navigation-basic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-keyboard-navigation-dom.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-keyboard-navigation-events.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-performance-monitor.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BYTES_PER_KB' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { act, renderHook } from '@testing-library/react';\nimport { BYTES_PER_KB  } from '@/constants';\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { TEST_BASE_NUMBERS } from '@/constants/test-constants';\nimport { usePerformanceMonitor } from '@/hooks/use-performance-monitor';\n\n// Mock performance.memory\nconst mockPerformanceMemory = {\n  usedJSHeapSize:\n    TEST_BASE_NUMBERS.MEMORY_SIZE_50MB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB, // 50MB\n  totalJSHeapSize:\n    TEST_BASE_NUMBERS.MEMORY_SIZE_100MB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB, // 100MB\n  jsHeapSizeLimit:\n    TEST_BASE_NUMBERS.MEMORY_SIZE_200MB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB *\n    TEST_BASE_NUMBERS.BYTES_PER_KB, // 200MB\n};\n\n// Mock performance API\nObject.defineProperty(global, 'performance', {\n  writable: true,\n  value: {\n    ...performance,\n    memory: mockPerformanceMemory,\n    now: vi.fn(() => Date.now()),\n  },\n});\n\n// Mock Date.now for consistent timing\nconst mockDateNow = vi.fn(() => 1000);\nvi.stubGlobal('Date', {\n  ...Date,\n  now: mockDateNow,\n});\n\n// Mock setTimeout and clearTimeout\nvi.stubGlobal(\n  'setTimeout',\n  vi.fn((fn, _delay) => {\n    if (typeof fn === 'function') {\n      fn();\n    }\n    return 1;\n  }),\n);\nvi.stubGlobal('clearTimeout', vi.fn());\n\ndescribe('usePerformanceMonitor', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // Reset Date.now mock\n    mockDateNow.mockReturnValue(1000);\n\n    // Reset performance.memory mock\n    Object.defineProperty(global.performance, 'memory', {\n      writable: true,\n      value: mockPerformanceMemory,\n    });\n  });\n\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  describe('åˆå§‹åŒ–', () => {\n    it('should initialize with default state', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      expect(result.current.isMonitoring).toBe(false);\n      expect(result.current.metrics).toEqual({\n        loadTime: 0,\n        renderTime: 0,\n      });\n      expect(result.current.alerts).toEqual([]);\n      expect(result.current.error).toBe(null);\n    });\n\n    it('should provide all required functions', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      expect(typeof result.current.startMonitoring).toBe('function');\n      expect(typeof result.current.stopMonitoring).toBe('function');\n      expect(typeof result.current.refreshMetrics).toBe('function');\n      expect(typeof result.current.clearAlerts).toBe('function');\n    });\n\n    it('should initialize with custom config', () => {\n      const config = {\n        enableAlerts: true,\n        alertThresholds: {\n          loadTime: 1000,\n          renderTime: 500,\n          memoryUsage:\n            TEST_BASE_NUMBERS.MEMORY_SIZE_100MB *\n            TEST_BASE_NUMBERS.BYTES_PER_KB *\n            TEST_BASE_NUMBERS.BYTES_PER_KB, // 100MB\n        },\n        autoMonitoring: true,\n        monitoringInterval: 5000,\n      };\n\n      const { result } = renderHook(() => usePerformanceMonitor(config));\n\n      expect(result.current.isMonitoring).toBe(true);\n      expect(result.current.metrics).toEqual({\n        loadTime: 0,\n        renderTime: 0,\n      });\n      expect(result.current.alerts).toEqual([]);\n      expect(result.current.error).toBe(null);\n    });\n  });\n\n  describe('æ€§èƒ½ç›‘æ§æ§åˆ¶', () => {\n    it('should start monitoring', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      expect(result.current.isMonitoring).toBe(true);\n      expect(result.current.metrics).toEqual({\n        loadTime: 0,\n        renderTime: 0,\n      });\n    });\n\n    it('should stop monitoring', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      expect(result.current.isMonitoring).toBe(true);\n\n      act(() => {\n        result.current.stopMonitoring();\n      });\n\n      expect(result.current.isMonitoring).toBe(false);\n    });\n\n    it('should handle monitoring errors', () => {\n      // Mock performance.memory to be undefined to trigger error\n      Object.defineProperty(global.performance, 'memory', {\n        writable: true,\n        value: undefined,\n      });\n\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should still start monitoring even without memory API\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should handle unknown errors', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should handle gracefully\n      expect(result.current.isMonitoring).toBe(true);\n      expect(result.current.error).toBe(null);\n    });\n  });\n\n  describe('æŒ‡æ ‡åˆ·æ–°', () => {\n    it('should refresh metrics manually', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      act(() => {\n        result.current.refreshMetrics();\n      });\n\n      // Should have metrics after refresh\n      expect(result.current.metrics).toBeTruthy();\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should handle refresh when not monitoring', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.refreshMetrics();\n      });\n\n      // Should not crash when not monitoring\n      expect(result.current.metrics).toEqual({\n        loadTime: 0,\n        renderTime: 0,\n      });\n      expect(result.current.error).toBe(null);\n    });\n  });\n\n  describe('è‡ªåŠ¨ç›‘æ§', () => {\n    it('should perform automatic monitoring when enabled', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: true,\n          monitoringInterval: 1000,\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should start monitoring\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should not perform automatic monitoring when disabled', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: false,\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should still start monitoring manually\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should clear interval when monitoring stops', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: true,\n          monitoringInterval: 1000,\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      act(() => {\n        result.current.stopMonitoring();\n      });\n\n      // Should stop monitoring\n      expect(result.current.isMonitoring).toBe(false);\n    });\n  });\n\n  describe('è­¦æŠ¥ç®¡ç†', () => {\n    it('should load alerts from alert system', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAlerts: true,\n          alertThresholds: {\n            memoryUsage:\n              (TEST_BASE_NUMBERS.MEMORY_SIZE_50MB *\n                TEST_BASE_NUMBERS.BYTES_PER_KB *\n                TEST_BASE_NUMBERS.BYTES_PER_KB) /\n              TEST_BASE_NUMBERS.SMALL_COUNT, // 25MB threshold\n          },\n        }),\n      );\n\n      // Start monitoring to trigger memory check\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should have alerts array (may be empty initially)\n      expect(Array.isArray(result.current.alerts)).toBe(true);\n    });\n\n    it('should clear alerts', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.clearAlerts();\n      });\n\n      expect(result.current.alerts).toEqual([]);\n    });\n\n    it('should handle alert system errors', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      expect(() => {\n        result.current.clearAlerts();\n      }).not.toThrow();\n    });\n  });\n\n  describe('ç»„ä»¶å¸è½½å¤„ç†', () => {\n    it('should cleanup on unmount', () => {\n      const { result, unmount } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: true,\n          monitoringInterval: 1000,\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      expect(result.current.isMonitoring).toBe(true);\n\n      unmount();\n\n      // Should not cause errors after unmount\n      expect(() => {\n        // Just test that unmount doesn't throw\n      }).not.toThrow();\n    });\n\n    it('should handle cleanup errors gracefully', () => {\n      const { result, unmount } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      // Should handle unmount gracefully\n      expect(() => {\n        unmount();\n      }).not.toThrow();\n    });\n  });\n\n  describe('è¾¹ç¼˜æƒ…å†µå¤„ç†', () => {\n    it('should handle multiple start monitoring calls', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n        result.current.startMonitoring();\n        result.current.startMonitoring();\n      });\n\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should handle stop monitoring when not monitoring', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      expect(() => {\n        result.current.stopMonitoring();\n      }).not.toThrow();\n\n      expect(result.current.isMonitoring).toBe(false);\n    });\n\n    it('should handle refresh when not monitoring', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.refreshMetrics();\n      });\n\n      // Should handle gracefully when not monitoring\n      expect(result.current.metrics).toEqual({\n        loadTime: 0,\n        renderTime: 0,\n      });\n      expect(result.current.error).toBe(null);\n    });\n  });\n\n  describe('å†…å­˜ç›‘æ§æ·±åº¦æµ‹è¯•', () => {\n    it('should handle memory API variations', () => {\n      const memoryVariations = [\n        { usedJSHeapSize: 0, totalJSHeapSize: 0, jsHeapSizeLimit: 0 },\n        {\n          usedJSHeapSize: 1000000,\n          totalJSHeapSize: 2000000,\n          jsHeapSizeLimit: 4000000,\n        },\n        {\n          usedJSHeapSize: undefined,\n          totalJSHeapSize: undefined,\n          jsHeapSizeLimit: undefined,\n        },\n      ];\n\n      memoryVariations.forEach((memory) => {\n        Object.defineProperty(global.performance, 'memory', {\n          writable: true,\n          value: memory,\n        });\n\n        const { result } = renderHook(() => usePerformanceMonitor());\n\n        act(() => {\n          result.current.startMonitoring();\n        });\n\n        expect(result.current.isMonitoring).toBe(true);\n      });\n    });\n\n    it('should handle performance.now errors', () => {\n      const originalNow = global.performance.now;\n\n      try {\n        global.performance.now = vi.fn(() => {\n          throw new Error('Performance.now error');\n        });\n\n        const { result } = renderHook(() => usePerformanceMonitor());\n\n        expect(() => {\n          act(() => {\n            result.current.startMonitoring();\n          });\n        }).not.toThrow();\n      } finally {\n        global.performance.now = originalNow;\n      }\n    });\n\n    it('should handle missing performance object', () => {\n      const originalPerformance = global.performance;\n\n      try {\n        // @ts-expect-error - Testing edge case\n        global.performance = undefined;\n\n        const { result } = renderHook(() => usePerformanceMonitor());\n\n        expect(() => {\n          act(() => {\n            result.current.startMonitoring();\n          });\n        }).not.toThrow();\n      } finally {\n        global.performance = originalPerformance;\n      }\n    });\n  });\n\n  describe('é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†', () => {\n    it('should handle invalid configuration gracefully', () => {\n      const invalidConfigs = [\n        { monitoringInterval: -1 },\n        { monitoringInterval: 0 },\n        { alertThresholds: null },\n        { enableAlerts: 'invalid' },\n      ];\n\n      invalidConfigs.forEach((config) => {\n        expect(() => {\n          renderHook(() => usePerformanceMonitor(config as any));\n        }).not.toThrow();\n      });\n    });\n\n    it('should handle extremely high monitoring intervals', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: true,\n          monitoringInterval: 999999999,\n        }),\n      );\n\n      expect(result.current.isMonitoring).toBe(true);\n    });\n\n    it('should handle configuration changes during monitoring', () => {\n      const { result, rerender } = renderHook(\n        ({ config }) => usePerformanceMonitor(config),\n        {\n          initialProps: {\n            config: { autoMonitoring: true, monitoringInterval: 1000 },\n          },\n        },\n      );\n\n      expect(result.current.isMonitoring).toBe(true);\n\n      // Change configuration\n      rerender({\n        config: { autoMonitoring: false, monitoringInterval: 2000 },\n      });\n\n      // Should handle configuration change gracefully\n      expect(() => {\n        act(() => {\n          result.current.refreshMetrics();\n        });\n      }).not.toThrow();\n    });\n  });\n\n  describe('å¹¶å‘å’Œç«æ€æ¡ä»¶', () => {\n    it('should handle rapid start/stop cycles', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      expect(() => {\n        act(() => {\n          for (let i = 0; i < 10; i++) {\n            result.current.startMonitoring();\n            result.current.stopMonitoring();\n          }\n        });\n      }).not.toThrow();\n    });\n\n    it('should handle concurrent refresh calls', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      expect(() => {\n        act(() => {\n          // Simulate concurrent refresh calls\n          result.current.refreshMetrics();\n          result.current.refreshMetrics();\n          result.current.refreshMetrics();\n        });\n      }).not.toThrow();\n    });\n\n    it('should handle monitoring state changes during refresh', () => {\n      const { result } = renderHook(() => usePerformanceMonitor());\n\n      act(() => {\n        result.current.startMonitoring();\n      });\n\n      expect(() => {\n        act(() => {\n          result.current.refreshMetrics();\n          result.current.stopMonitoring();\n          result.current.refreshMetrics();\n        });\n      }).not.toThrow();\n    });\n  });\n\n  describe('æ€§èƒ½è­¦æŠ¥ç³»ç»Ÿè¾¹ç¼˜æƒ…å†µ', () => {\n    it('should handle alert system with missing memory API', () => {\n      const originalMemory = global.performance.memory;\n      delete (global.performance as unknown).memory;\n\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAlerts: true,\n          alertThresholds: {\n            memoryUsage: 1000000, // 1MB threshold\n          },\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n        // measureMemoryUsage is not exposed in the hook return value\n        // Instead, we can check if memory monitoring works through metrics\n        expect(result.current.metrics?.memoryUsage).toBeUndefined();\n      });\n\n      // Restore memory property\n      Object.defineProperty(global.performance, 'memory', {\n        writable: true,\n        value: originalMemory,\n      });\n    });\n\n    it('should handle alert threshold edge cases', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAlerts: true,\n          alertThresholds: {\n            loadTime: 0, // Zero threshold should trigger alerts\n            renderTime: Number.MAX_SAFE_INTEGER, // Very high threshold\n            memoryUsage: -1, // Negative threshold (invalid)\n          },\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n        result.current.measureLoadTime();\n        result.current.measureRenderTime();\n      });\n\n      // Should handle edge cases without crashing\n      expect(result.current.isMonitoring).toBe(true);\n    });\n  });\n\n  describe('è‡ªåŠ¨åŸºçº¿åŠŸèƒ½æµ‹è¯•', () => {\n    it('should handle autoBaseline configuration', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAutoBaseline: true,\n          enableAlerts: true,\n          alertThresholds: {\n            loadTime: 2500,\n            renderTime: 100,\n            memoryUsage: 300,\n          },\n        }),\n      );\n\n      expect(result.current.performanceAlertSystem).toBeDefined();\n    });\n\n    it('should handle missing alertConfig with autoBaseline', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          autoBaseline: true,\n          // Missing alertConfig\n        }),\n      );\n\n      expect(result.current.performanceAlertSystem).toBeDefined();\n    });\n  });\n\n  describe('å†…å­˜æ³„æ¼é˜²æŠ¤æµ‹è¯•', () => {\n    it('should not accumulate alerts indefinitely', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAlerts: true,\n          alertThresholds: {\n            loadTime: 0, // Always trigger alerts\n          },\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n\n        // Generate many alerts\n        for (let i = 0; i < 100; i++) {\n          result.current.measureLoadTime();\n        }\n      });\n\n      // Should have some alerts but not necessarily all 100\n      expect(result.current.alerts.length).toBeGreaterThan(0);\n      expect(result.current.alerts.length).toBeLessThan(200); // Reasonable upper bound\n    });\n\n    it('should handle alert clearing', () => {\n      const { result } = renderHook(() =>\n        usePerformanceMonitor({\n          enableAlerts: true,\n          alertThresholds: {\n            loadTime: 0,\n          },\n        }),\n      );\n\n      act(() => {\n        result.current.startMonitoring();\n        result.current.measureLoadTime();\n        result.current.clearAlerts();\n      });\n\n      expect(result.current.alerts).toEqual([]);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-reduced-motion.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-theme-toggle.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/__tests__/use-web-vitals-diagnostics.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/performance-monitor-measurements.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'usePerformanceMeasurements' has too many parameters (5). Maximum allowed is 3.","line":16,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":16,"endColumn":43},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":26,"column":28,"nodeType":"MemberExpression","endLine":28,"endColumn":16},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":38,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":44,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3429,3432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3429,3432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":121,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3530,3533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3530,3533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":261,"column":30,"nodeType":"MemberExpression","endLine":261,"endColumn":43},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":304,"column":26,"nodeType":"MemberExpression","endLine":306,"endColumn":14}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { checkMemoryUsageAlert } from '@/hooks/performance-monitor-utils';\nimport { FIVE_SECONDS_MS, MAGIC_10000, ONE, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport React from 'react';\nimport type {\n  PerformanceAlert,\n  PerformanceAlertThresholds,\n  PerformanceMeasurements,\n  PerformanceMetrics,\n} from '@/hooks/performance-monitor-types';\n\n/**\n * åˆ›å»ºæ€§èƒ½æµ‹é‡å‡½æ•°çš„è¾…åŠ©å‡½æ•°\n */\nexport function usePerformanceMeasurements(\n  enableAlerts: boolean,\n  alertThresholds: Required<PerformanceAlertThresholds>,\n  addAlert: (_alert: Omit<PerformanceAlert, 'id' | 'timestamp'>) => void,\n  setMetrics: React.Dispatch<React.SetStateAction<PerformanceMetrics | null>>,\n  startTime: React.MutableRefObject<number>,\n): PerformanceMeasurements {\n  const measureLoadTime = React.useCallback(() => {\n    try {\n      if (typeof window !== 'undefined' && window.performance) {\n        const navigation = performance.getEntriesByType(\n          'navigation',\n        )[ZERO] as PerformanceNavigationTiming;\n        if (navigation) {\n          const loadTime = navigation.loadEventEnd - navigation.startTime;\n\n          setMetrics((prev) => ({\n            renderTime: ZERO,\n            ...(prev || {}),\n            loadTime,\n          }));\n\n          if (enableAlerts && loadTime > alertThresholds.loadTime) {\n            addAlert({\n              level: 'warning',\n              message: `Slow page load detected: ${Math.round(loadTime)}ms`,\n              data: { loadTime },\n            });\n          }\n        }\n      }\n    } catch (error) {\n      logger.warn('Failed to measure load time', { error: error as Error });\n    }\n  }, [enableAlerts, alertThresholds.loadTime, addAlert, setMetrics]);\n\n  const measureRenderTime = React.useCallback(() => {\n    try {\n      if (startTime.current !== null) {\n        const renderTime = performance.now() - startTime.current;\n\n        setMetrics((prev) => ({\n          loadTime: ZERO,\n          ...(prev || {}),\n          renderTime,\n        }));\n\n        if (enableAlerts && renderTime > alertThresholds.renderTime) {\n          addAlert({\n            level: 'warning',\n            message: `Slow render detected: ${Math.round(renderTime)}ms`,\n            data: { renderTime },\n          });\n        }\n      }\n    } catch (error) {\n      logger.warn('Failed to measure render time', { error: error as Error });\n    }\n  }, [\n    enableAlerts,\n    alertThresholds.renderTime,\n    addAlert,\n    setMetrics,\n    startTime,\n  ]);\n\n  const measureMemoryUsage = React.useCallback(() => {\n    try {\n      if (typeof window !== 'undefined' && window.performance?.memory) {\n        const memoryUsage = window.performance.memory.usedJSHeapSize;\n\n        setMetrics((prev) => ({\n          loadTime: ZERO,\n          renderTime: ZERO,\n          ...(prev || {}),\n          memoryUsage,\n        }));\n\n        if (enableAlerts) {\n          checkMemoryUsageAlert(\n            memoryUsage,\n            alertThresholds.memoryUsage,\n            addAlert,\n          );\n        }\n      }\n    } catch (error) {\n      logger.warn('Failed to measure memory usage', { error: error as Error });\n    }\n  }, [enableAlerts, alertThresholds.memoryUsage, addAlert, setMetrics]);\n\n  return {\n    measureLoadTime,\n    measureRenderTime,\n    measureMemoryUsage,\n  };\n}\n\n/**\n * æµ‹é‡ç½‘ç»œå»¶è¿Ÿ\n */\nexport const measureNetworkLatency = async (): Promise<number | null> => {\n  try {\n    if (typeof window !== 'undefined' && (navigator as any).connection) {\n      // ä½¿ç”¨ Network Information API (å¦‚æœå¯ç”¨)\n      const connection = (navigator as any).connection as {\n        rtt?: number;\n        effectiveType?: string;\n        downlink?: number;\n      };\n      if (connection.rtt) {\n        return connection.rtt;\n      }\n    }\n\n    // å›é€€åˆ°ç®€å•çš„pingæµ‹è¯•\n    const startTime = performance.now();\n    await fetch('/api/ping', {\n      method: 'HEAD',\n      cache: 'no-cache',\n    });\n    const endTime = performance.now();\n\n    return endTime - startTime;\n  } catch (error) {\n    logger.warn('Failed to measure network latency', { error: error as Error });\n    return null;\n  }\n};\n\n/**\n * æµ‹é‡é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP)\n */\nexport const measureFirstContentfulPaint = (): number | null => {\n  try {\n    if (typeof window !== 'undefined' && window.performance) {\n      const paintEntries = performance.getEntriesByType('paint');\n      const fcpEntry = paintEntries.find(\n        (entry) => entry.name === 'first-contentful-paint',\n      );\n      return fcpEntry ? fcpEntry.startTime : null;\n    }\n    return null;\n  } catch (error) {\n    logger.warn('Failed to measure FCP', { error: error as Error });\n    return null;\n  }\n};\n\n/**\n * æµ‹é‡æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)\n */\nexport const measureLargestContentfulPaint = (): Promise<number | null> => {\n  return new Promise((resolve) => {\n    try {\n      if (typeof window !== 'undefined' && 'PerformanceObserver' in window) {\n        const observer = new PerformanceObserver((list) => {\n          const entries = list.getEntries();\n          const lastEntry = entries[entries.length - ONE];\n          resolve(lastEntry ? lastEntry.startTime : null);\n          observer.disconnect();\n        });\n\n        observer.observe({ entryTypes: ['largest-contentful-paint'] });\n\n        // è¶…æ—¶å¤„ç†\n        setTimeout(() => {\n          observer.disconnect();\n          resolve(null);\n        }, FIVE_SECONDS_MS);\n      } else {\n        resolve(null);\n      }\n    } catch (error) {\n      logger.warn('Failed to measure LCP', { error: error as Error });\n      resolve(null);\n    }\n  });\n};\n\n/**\n * æµ‹é‡ç´¯ç§¯å¸ƒå±€åç§» (CLS)\n */\nexport const measureCumulativeLayoutShift = (): Promise<number | null> => {\n  return new Promise((resolve) => {\n    try {\n      if (typeof window !== 'undefined' && 'PerformanceObserver' in window) {\n        let clsValue = ZERO;\n\n        const observer = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            const layoutShiftEntry = entry as unknown as {\n              hadRecentInput?: boolean;\n              value: number;\n            };\n            if (!layoutShiftEntry.hadRecentInput) {\n              clsValue += layoutShiftEntry.value;\n            }\n          }\n        });\n\n        observer.observe({ entryTypes: ['layout-shift'] });\n\n        // åœ¨é¡µé¢éšè—æ—¶è¿”å›ç»“æœ\n        const handleVisibilityChange = () => {\n          if (document.visibilityState === 'hidden') {\n            observer.disconnect();\n            document.removeEventListener(\n              'visibilitychange',\n              handleVisibilityChange,\n            );\n            resolve(clsValue);\n          }\n        };\n\n        document.addEventListener('visibilitychange', handleVisibilityChange);\n\n        // è¶…æ—¶å¤„ç†\n        setTimeout(() => {\n          observer.disconnect();\n          document.removeEventListener(\n            'visibilitychange',\n            handleVisibilityChange,\n          );\n          resolve(clsValue);\n        }, MAGIC_10000);\n      } else {\n        resolve(null);\n      }\n    } catch (error) {\n      logger.warn('Failed to measure CLS', { error: error as Error });\n      resolve(null);\n    }\n  });\n};\n\n/**\n * æµ‹é‡é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (FID)\n */\nexport const measureFirstInputDelay = (): Promise<number | null> => {\n  return new Promise((resolve) => {\n    try {\n      if (typeof window !== 'undefined' && 'PerformanceObserver' in window) {\n        const observer = new PerformanceObserver((list) => {\n          const entries = list.getEntries();\n          const firstEntry = entries[ZERO];\n          if (firstEntry) {\n            const firstInputEntry = firstEntry as unknown as {\n              processingStart: number;\n              startTime: number;\n            };\n            const fid = firstInputEntry.processingStart - firstEntry.startTime;\n            resolve(fid);\n          } else {\n            resolve(null);\n          }\n          observer.disconnect();\n        });\n\n        observer.observe({ entryTypes: ['first-input'] });\n\n        // è¶…æ—¶å¤„ç†\n        setTimeout(() => {\n          observer.disconnect();\n          resolve(null);\n        }, MAGIC_10000);\n      } else {\n        resolve(null);\n      }\n    } catch (error) {\n      logger.warn('Failed to measure FID', { error: error as Error });\n      resolve(null);\n    }\n  });\n};\n\n/**\n * ç»¼åˆæ€§èƒ½æµ‹é‡å‡½æ•°\n */\nexport const measureComprehensivePerformance = async (): Promise<\n  Partial<PerformanceMetrics>\n> => {\n  const metrics: Partial<PerformanceMetrics> = {};\n\n  try {\n    // æµ‹é‡åŸºæœ¬æŒ‡æ ‡\n    if (typeof window !== 'undefined' && window.performance) {\n      // åŠ è½½æ—¶é—´\n      const navigation = performance.getEntriesByType(\n        'navigation',\n      )[ZERO] as PerformanceNavigationTiming;\n      if (navigation) {\n        metrics.loadTime = navigation.loadEventEnd - navigation.startTime;\n      }\n\n      // å†…å­˜ä½¿ç”¨\n      if (window.performance.memory) {\n        metrics.memoryUsage = window.performance.memory.usedJSHeapSize;\n      }\n    }\n\n    // ç½‘ç»œå»¶è¿Ÿ\n    const networkLatency = await measureNetworkLatency();\n    if (networkLatency !== null) {\n      metrics.networkLatency = networkLatency;\n    }\n\n    return metrics;\n  } catch (error) {\n    logger.warn('Failed to measure comprehensive performance', {\n      error: error as Error,\n    });\n    return {};\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/performance-monitor-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/performance-monitor-utils.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":63,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":63,"endColumn":29},{"ruleId":"max-params","severity":2,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":81,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":81,"endColumn":25},{"ruleId":"complexity","severity":2,"message":"Arrow function has a complexity of 22. Maximum allowed is 15.","line":144,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":205,"endColumn":2}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_16 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, MAGIC_36, MAGIC_9, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, THREE_SECONDS_MS, ZERO } from '@/constants';\n\nimport React from 'react';\nimport type {\n  MonitoringControls,\n  PerformanceAlert,\n  PerformanceAlertSystem,\n  PerformanceAlertThresholds,\n  PerformanceMetrics,\n  PerformanceMonitorReturnParams,\n  PerformanceMonitorState,\n  UsePerformanceMonitorOptions,\n} from '@/hooks/performance-monitor-types';\n\n/**\n * æ€§èƒ½ç›‘æ§å¸¸é‡\n */\nexport const PERFORMANCE_CONSTANTS = {\n  MEMORY_THRESHOLD_MB: PERCENTAGE_HALF,\n  MEMORY_BYTES_PER_MB: 1048576, // 1024 * 1024\n  TIME_CALCULATION_FACTOR: MAGIC_36,\n  CALCULATION_DIVISOR: COUNT_PAIR,\n  CALCULATION_MULTIPLIER: MAGIC_9,\n} as const;\n\n/**\n * é»˜è®¤æ€§èƒ½è­¦å‘Šé˜ˆå€¼\n */\nexport const DEFAULT_ALERT_THRESHOLDS: Required<PerformanceAlertThresholds> = {\n  loadTime: THREE_SECONDS_MS, // 3ç§’\n  renderTime: MAGIC_16, // 16æ¯«ç§’ (60fps)\n  memoryUsage:\n    PERFORMANCE_CONSTANTS.MEMORY_THRESHOLD_MB *\n    PERFORMANCE_CONSTANTS.MEMORY_BYTES_PER_MB,\n};\n\n/**\n * è¾…åŠ©å‡½æ•°ï¼šæ£€æŸ¥å†…å­˜ä½¿ç”¨å¹¶ç”Ÿæˆè­¦å‘Š\n */\nexport const checkMemoryUsageAlert = (\n  memoryUsage: number,\n  threshold: number,\n  addAlert: (_alert: Omit<PerformanceAlert, 'id' | 'timestamp'>) => void,\n) => {\n  if (memoryUsage > threshold) {\n    addAlert({\n      level: 'error',\n      message: `High memory usage detected: ${Math.round(memoryUsage / PERFORMANCE_CONSTANTS.MEMORY_BYTES_PER_MB)}MB`,\n      data: { memoryUsage },\n    });\n  }\n};\n\n/**\n * è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºæ€§èƒ½è­¦å‘Šç³»ç»Ÿ\n */\nexport const createPerformanceAlertSystem = (\n  alerts: PerformanceAlert[],\n  alertHistory: React.MutableRefObject<PerformanceAlert[]>,\n  addAlert: (_alert: Omit<PerformanceAlert, 'id' | 'timestamp'>) => void,\n  setAlerts: React.Dispatch<React.SetStateAction<PerformanceAlert[]>>,\n): PerformanceAlertSystem => ({\n  addAlert,\n  getAlerts: () => alerts,\n  getAlertHistory: () => alertHistory.current,\n  clearAlerts: () => {\n    setAlerts([]);\n    alertHistory.current = [];\n  },\n});\n\n/**\n * è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºç›‘æ§æ§åˆ¶å‡½æ•°\n */\nexport const createMonitoringControls = (\n  setIsMonitoring: React.Dispatch<React.SetStateAction<boolean>>,\n  _setError: React.Dispatch<React.SetStateAction<string | null>>,\n  startTime: React.MutableRefObject<number | null>,\n  setMetrics: React.Dispatch<React.SetStateAction<PerformanceMetrics | null>>,\n): MonitoringControls => ({\n  startMonitoring: () => {\n    setIsMonitoring(true);\n    startTime.current = performance.now();\n    _setError(null);\n  },\n  stopMonitoring: () => {\n    setIsMonitoring(false);\n    startTime.current = null;\n  },\n  resetMetrics: () => {\n    setMetrics(null);\n    startTime.current = null;\n    _setError(null);\n  },\n  refreshMetrics: () => {\n    // åˆ·æ–°å½“å‰æŒ‡æ ‡\n    _setError(null);\n  },\n});\n\n/**\n * è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºè¿”å›å¯¹è±¡\n */\nexport const createPerformanceMonitorReturn = (\n  params: PerformanceMonitorReturnParams,\n) => {\n  const {\n    isMonitoring,\n    metrics,\n    alerts,\n    error,\n    getMetrics,\n    startMonitoring,\n    stopMonitoring,\n    resetMetrics,\n    measureLoadTime,\n    measureRenderTime,\n    refreshMetrics,\n    clearAlerts,\n    performanceAlertSystem,\n  } = params;\n\n  return {\n    isMonitoring,\n    metrics,\n    alerts,\n    error,\n    getMetrics,\n    startMonitoring,\n    stopMonitoring,\n    resetMetrics,\n    measureLoadTime,\n    measureRenderTime,\n    refreshMetrics,\n    clearAlerts,\n    performanceAlertSystem,\n  };\n};\n\n/**\n * éªŒè¯å’Œæ¸…ç†é€‰é¡¹çš„è¾…åŠ©å‡½æ•°\n */\nexport const validateAndSanitizeOptions = (\n  options: UsePerformanceMonitorOptions,\n): PerformanceMonitorState => {\n  // Validate and sanitize options to handle null/undefined/invalid values\n  const safeOptions = options || {};\n\n  const {\n    enableAlerts = false,\n    alertThresholds = {},\n    monitoringInterval = ANIMATION_DURATION_VERY_SLOW,\n    enableMemoryMonitoring = true,\n    enableNetworkMonitoring = false,\n    enableRenderTimeMonitoring = true,\n    enableLoadTimeMonitoring = true,\n    enableAutoBaseline = false,\n    maxAlerts = PERCENTAGE_FULL,\n  } = safeOptions;\n\n  // Validate alertThresholds with proper fallbacks\n  const safeAlertThresholds = alertThresholds || {};\n  const validatedAlertThresholds: Required<PerformanceAlertThresholds> = {\n    loadTime:\n      typeof safeAlertThresholds.loadTime === 'number' &&\n      safeAlertThresholds.loadTime > ZERO\n        ? safeAlertThresholds.loadTime\n        : DEFAULT_ALERT_THRESHOLDS.loadTime,\n    renderTime:\n      typeof safeAlertThresholds.renderTime === 'number' &&\n      safeAlertThresholds.renderTime > ZERO\n        ? safeAlertThresholds.renderTime\n        : DEFAULT_ALERT_THRESHOLDS.renderTime,\n    memoryUsage:\n      typeof safeAlertThresholds.memoryUsage === 'number' &&\n      safeAlertThresholds.memoryUsage > ZERO\n        ? safeAlertThresholds.memoryUsage\n        : DEFAULT_ALERT_THRESHOLDS.memoryUsage,\n  };\n\n  // Validate monitoringInterval\n  const validMonitoringInterval =\n    typeof monitoringInterval === 'number' && monitoringInterval > ZERO\n      ? Math.max(PERCENTAGE_FULL, monitoringInterval) // Minimum 100ms\n      : ANIMATION_DURATION_VERY_SLOW;\n\n  // Validate maxAlerts\n  const validMaxAlerts =\n    typeof maxAlerts === 'number' && maxAlerts > ZERO\n      ? Math.min(ANIMATION_DURATION_VERY_SLOW, Math.max(ONE, maxAlerts)) // Between 1 and 1000\n      : PERCENTAGE_FULL;\n\n  return {\n    enableAlerts: Boolean(enableAlerts),\n    alertThresholds: validatedAlertThresholds,\n    enableMemoryMonitoring: Boolean(enableMemoryMonitoring),\n    enableNetworkMonitoring: Boolean(enableNetworkMonitoring),\n    enableRenderTimeMonitoring: Boolean(enableRenderTimeMonitoring),\n    enableLoadTimeMonitoring: Boolean(enableLoadTimeMonitoring),\n    enableAutoBaseline: Boolean(enableAutoBaseline),\n    maxAlerts: validMaxAlerts,\n    monitoringInterval: validMonitoringInterval,\n  };\n};\n\n/**\n * ç”Ÿæˆå”¯ä¸€IDçš„è¾…åŠ©å‡½æ•°\n */\nexport const generateAlertId = (): string => {\n  return `alert_${Date.now()}_${Math.random().toString(MAGIC_36).substr(COUNT_PAIR, MAGIC_9)}`;\n};\n\n/**\n * æ ¼å¼åŒ–å†…å­˜ä½¿ç”¨é‡çš„è¾…åŠ©å‡½æ•°\n */\nexport const formatMemoryUsage = (bytes: number): string => {\n  const mb = bytes / PERFORMANCE_CONSTANTS.MEMORY_BYTES_PER_MB;\n  return `${mb.toFixed(COUNT_PAIR)}MB`;\n};\n\n/**\n * æ ¼å¼åŒ–æ—¶é—´çš„è¾…åŠ©å‡½æ•°\n */\nexport const formatTime = (milliseconds: number): string => {\n  if (milliseconds < ANIMATION_DURATION_VERY_SLOW) {\n    return `${milliseconds.toFixed(COUNT_PAIR)}ms`;\n  }\n  return `${(milliseconds / ANIMATION_DURATION_VERY_SLOW).toFixed(COUNT_PAIR)}s`;\n};\n\n/**\n * æ£€æŸ¥æ€§èƒ½æŒ‡æ ‡æ˜¯å¦è¶…è¿‡é˜ˆå€¼\n */\nexport const checkPerformanceThresholds = (\n  metrics: PerformanceMetrics,\n  thresholds: Required<PerformanceAlertThresholds>,\n  addAlert: (_alert: Omit<PerformanceAlert, 'id' | 'timestamp'>) => void,\n): void => {\n  // æ£€æŸ¥åŠ è½½æ—¶é—´\n  if (metrics.loadTime > thresholds.loadTime) {\n    addAlert({\n      level: 'warning',\n      message: `Slow load time detected: ${formatTime(metrics.loadTime)}`,\n      data: { loadTime: metrics.loadTime, threshold: thresholds.loadTime },\n    });\n  }\n\n  // æ£€æŸ¥æ¸²æŸ“æ—¶é—´\n  if (metrics.renderTime > thresholds.renderTime) {\n    addAlert({\n      level: 'warning',\n      message: `Slow render time detected: ${formatTime(metrics.renderTime)}`,\n      data: {\n        renderTime: metrics.renderTime,\n        threshold: thresholds.renderTime,\n      },\n    });\n  }\n\n  // æ£€æŸ¥å†…å­˜ä½¿ç”¨\n  if (metrics.memoryUsage && metrics.memoryUsage > thresholds.memoryUsage) {\n    addAlert({\n      level: 'error',\n      message: `High memory usage detected: ${formatMemoryUsage(metrics.memoryUsage)}`,\n      data: {\n        memoryUsage: metrics.memoryUsage,\n        threshold: thresholds.memoryUsage,\n      },\n    });\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/theme-transition-core.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'executeThemeTransition' has too many parameters (5). Maximum allowed is 3.","line":20,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":20,"endColumn":39},{"ruleId":"max-statements","severity":2,"message":"Function 'executeThemeTransition' has too many statements (24). Maximum allowed is 20.","line":20,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":126,"endColumn":2},{"ruleId":"max-params","severity":2,"message":"Function 'executeCircularThemeTransition' has too many parameters (4). Maximum allowed is 3.","line":142,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":142,"endColumn":47}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { logger } from '@/lib/logger';\nimport { themeAnalytics } from '@/lib/theme-analytics';\nimport type {\n  ThemeTransitionConfig,\n  ViewTransition,\n  ViewTransitionAPI,\n} from '@/hooks/theme-transition-types';\nimport {\n  calculateEndRadius,\n  DEFAULT_CONFIG,\n  getClickCoordinates,\n  recordThemeTransition,\n  supportsViewTransitions,\n} from '@/hooks/theme-transition-utils';\n\n/**\n * æ‰§è¡Œä¸»é¢˜åˆ‡æ¢çš„æ ¸å¿ƒé€»è¾‘\n */\nexport function executeThemeTransition(\n  originalSetTheme: (_theme: string) => void,\n  newTheme: string,\n  _currentTheme: string = 'unknown',\n  _config: ThemeTransitionConfig = DEFAULT_CONFIG,\n  _animationSetup?: (_transition: ViewTransition) => void,\n): void {\n  const startTime = performance.now();\n\n  try {\n    // è®°å½•ä¸»é¢˜åå¥½\n    themeAnalytics.recordThemePreference(newTheme);\n\n    // æ ‡è®°æ€§èƒ½å¼€å§‹ç‚¹\n    if (typeof window !== 'undefined' && window.performance) {\n      performance.mark(`theme-transition-${_currentTheme}-start`);\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æ”¯æŒ View Transitions API\n    if (!supportsViewTransitions()) {\n      logger.debug('View Transitions API not supported, using fallback');\n      originalSetTheme(newTheme);\n\n      recordThemeTransition({\n        fromTheme: _currentTheme,\n        toTheme: newTheme,\n        startTime,\n        endTime: performance.now(),\n        hasViewTransition: false,\n      });\n      return;\n    }\n\n    // ä½¿ç”¨ View Transitions API\n    try {\n      const documentWithTransition = document as Document & ViewTransitionAPI;\n      const transition = documentWithTransition.startViewTransition(() => {\n        originalSetTheme(newTheme);\n      });\n\n      // å¦‚æœæä¾›äº†åŠ¨ç”»è®¾ç½®å‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒ\n      if (_animationSetup) {\n        _animationSetup(transition);\n      }\n\n      // ç›‘å¬è½¬æ¢å®Œæˆ\n      transition.finished\n        .then(() => {\n          recordThemeTransition({\n            fromTheme: _currentTheme,\n            toTheme: newTheme,\n            startTime,\n            endTime: performance.now(),\n            hasViewTransition: true,\n          });\n        })\n        .catch((error: Error) => {\n          logger.error('View transition failed', { error, newTheme });\n          recordThemeTransition({\n            fromTheme: _currentTheme,\n            toTheme: newTheme,\n            startTime,\n            endTime: performance.now(),\n            hasViewTransition: true,\n            error,\n          });\n        });\n    } catch (transitionError) {\n      logger.error('Failed to start view transition', {\n        error: transitionError,\n        newTheme,\n      });\n\n      // é™çº§åˆ°æ™®é€šåˆ‡æ¢\n      originalSetTheme(newTheme);\n      recordThemeTransition({\n        fromTheme: _currentTheme,\n        toTheme: newTheme,\n        startTime,\n        endTime: performance.now(),\n        hasViewTransition: false,\n        error: transitionError as Error,\n      });\n    }\n  } catch (error) {\n    logger.error('Theme transition failed', { error, newTheme });\n\n    // ç¡®ä¿ä¸»é¢˜ä»ç„¶è¢«è®¾ç½®ï¼Œå³ä½¿å‡ºç°é”™è¯¯\n    try {\n      originalSetTheme(newTheme);\n    } catch (setThemeError) {\n      logger.error('Failed to set theme as fallback', {\n        error: setThemeError,\n        newTheme,\n      });\n    }\n\n    recordThemeTransition({\n      fromTheme: _currentTheme,\n      toTheme: newTheme,\n      startTime,\n      endTime: performance.now(),\n      hasViewTransition: false,\n      error: error as Error,\n    });\n  }\n}\n\n/**\n * æ‰§è¡ŒåŸºç¡€ä¸»é¢˜åˆ‡æ¢\n */\nexport function executeBasicThemeTransition(\n  originalSetTheme: (_theme: string) => void,\n  newTheme: string,\n  _currentTheme?: string,\n): void {\n  executeThemeTransition(originalSetTheme, newTheme, _currentTheme);\n}\n\n/**\n * æ‰§è¡Œåœ†å½¢åŠ¨ç”»ä¸»é¢˜åˆ‡æ¢\n */\nexport function executeCircularThemeTransition(\n  originalSetTheme: (_theme: string) => void,\n  newTheme: string,\n  _currentTheme?: string,\n  _clickEvent?: React.MouseEvent<HTMLElement>,\n): void {\n  const { x, y } = getClickCoordinates(_clickEvent);\n  const endRadius = calculateEndRadius(x, y);\n\n  const animationSetup = (transition: ViewTransition) => {\n    // è®¾ç½®åœ†å½¢å±•å¼€åŠ¨ç”»\n    transition.ready\n      .then(() => {\n        const clipPath = [\n          `circle(0px at ${x}px ${y}px)`,\n          `circle(${endRadius}px at ${x}px ${y}px)`,\n        ];\n\n        document.documentElement.animate(\n          {\n            clipPath,\n          },\n          {\n            duration: DEFAULT_CONFIG.animationDuration,\n            easing: DEFAULT_CONFIG.easing,\n            pseudoElement: '::view-transition-new(root)',\n          },\n        );\n      })\n      .catch((error: Error) => {\n        logger.warn('Failed to setup circular animation', { error });\n      });\n  };\n\n  executeThemeTransition(\n    originalSetTheme,\n    newTheme,\n    _currentTheme,\n    DEFAULT_CONFIG,\n    animationSetup,\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/theme-transition-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/theme-transition-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-breakpoint.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-enhanced-theme.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1285,1288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1285,1288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1939,1942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1939,1942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { useTheme } from 'next-themes';\nimport {\n  executeBasicThemeTransition,\n  executeCircularThemeTransition,\n} from '@/hooks/theme-transition-core';\nimport type { EnhancedThemeHook } from '@/hooks/theme-transition-types';\nimport { createDebounce, DEFAULT_CONFIG } from '@/hooks/theme-transition-utils';\n\n/**\n * å¢å¼ºçš„ä¸»é¢˜åˆ‡æ¢ Hook\n *\n * æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š\n * - åŸºç¡€ä¸»é¢˜åˆ‡æ¢ï¼ˆå¸¦é˜²æŠ–ï¼‰\n * - åœ†å½¢åŠ¨ç”»ä¸»é¢˜åˆ‡æ¢ï¼ˆåŸºäºç‚¹å‡»ä½ç½®ï¼‰\n * - View Transitions API æ”¯æŒ\n * - è‡ªåŠ¨é™çº§åˆ°æ™®é€šåˆ‡æ¢\n * - é˜²æŠ–æœºåˆ¶é˜²æ­¢å¿«é€Ÿè¿ç»­åˆ‡æ¢\n * - ç¼“å­˜ View Transitions API æ”¯æŒæ£€æµ‹ç»“æœ\n * - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ç›‘æ§\n * - ç±»å‹å®‰å…¨çš„ API è®¾è®¡\n */\nexport function useEnhancedTheme(): EnhancedThemeHook {\n  const { theme, setTheme: originalSetTheme, ...rest } = useTheme();\n\n  // ä½¿ç”¨ ref æ¥å­˜å‚¨é˜²æŠ–å‡½æ•°ï¼Œé¿å…é‡å¤åˆ›å»º\n  const debouncedSetThemeRef = useRef<((_theme: string) => void) | null>(null);\n  const debouncedSetCircularThemeRef = useRef<\n    | ((_theme: string, _clickEvent?: React.MouseEvent<HTMLElement>) => void)\n    | null\n  >(null);\n\n  // åˆ›å»ºé˜²æŠ–çš„åŸºç¡€ä¸»é¢˜åˆ‡æ¢å‡½æ•°\n  const setTheme = useCallback(\n    (newTheme: string) => {\n      if (!debouncedSetThemeRef.current) {\n        debouncedSetThemeRef.current = createDebounce(\n          ((themeToSet: string) => {\n            executeBasicThemeTransition(originalSetTheme, themeToSet, theme);\n          }) as any,\n          DEFAULT_CONFIG.debounceDelay,\n        );\n      }\n      debouncedSetThemeRef.current?.(newTheme);\n    },\n    [originalSetTheme, theme],\n  );\n\n  // åˆ›å»ºé˜²æŠ–çš„åœ†å½¢åŠ¨ç”»ä¸»é¢˜åˆ‡æ¢å‡½æ•°\n  const setCircularTheme = useCallback(\n    (newTheme: string, clickEvent?: React.MouseEvent<HTMLElement>) => {\n      if (!debouncedSetCircularThemeRef.current) {\n        debouncedSetCircularThemeRef.current = createDebounce(\n          ((themeToSet: string, event?: React.MouseEvent<HTMLElement>) => {\n            executeCircularThemeTransition(\n              originalSetTheme,\n              themeToSet,\n              theme,\n              event,\n            );\n          }) as any,\n          DEFAULT_CONFIG.debounceDelay,\n        );\n      }\n      debouncedSetCircularThemeRef.current?.(newTheme, clickEvent);\n    },\n    [originalSetTheme, theme],\n  );\n\n  // è¿”å›å¢å¼ºçš„ä¸»é¢˜ Hook\n  return useMemo(\n    () => ({\n      theme,\n      setTheme,\n      setCircularTheme,\n      themes: rest.themes,\n      forcedTheme: rest.forcedTheme,\n      resolvedTheme: rest.resolvedTheme,\n      systemTheme: rest.systemTheme,\n    }),\n    [theme, setTheme, setCircularTheme, rest],\n  );\n}\n\n/**\n * å¯¼å‡ºé…ç½®å¸¸é‡ä¾›å¤–éƒ¨ä½¿ç”¨\n */\nexport { DEFAULT_CONFIG as THEME_TRANSITION_CONFIG } from '@/hooks/theme-transition-utils';\n\n/**\n * å¯¼å‡ºç±»å‹å®šä¹‰\n */\nexport type {\n  EnhancedThemeHook,\n  ThemeTransitionOptions,\n  ThemeTransitionConfig,\n  ViewTransition,\n  ViewTransitionAPI,\n} from '@/hooks/theme-transition-types';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-enhanced-translations.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1266,1269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1266,1269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-params","severity":2,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":110,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":110,"endColumn":9}],"suppressedMessages":[{"ruleId":"max-lines-per-function","severity":2,"message":"Function 'useEnhancedTranslations' has too many lines (173). Maximum allowed is 120.","line":16,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":218,"endColumn":2,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":91,"column":11,"nodeType":"MemberExpression","endLine":91,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-shadow","severity":2,"message":"'options' is already declared in the upper scope on line 17 column 3.","line":148,"column":21,"nodeType":"Identifier","messageId":"noShadow","endLine":148,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-shadow","severity":2,"message":"'options' is already declared in the upper scope on line 17 column 3.","line":160,"column":18,"nodeType":"Identifier","messageId":"noShadow","endLine":160,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/* eslint-disable max-lines-per-function, security/detect-object-injection, no-shadow */\nimport { ZERO } from \"@/constants\";\nimport { I18nPerformanceMonitor } from '@/lib/i18n-performance';\nimport { useLocale, useTranslations } from 'next-intl';\nimport { useCallback, useMemo } from 'react';\n\ninterface UseEnhancedTranslationsOptions {\n  namespace?: string;\n  fallback?: boolean;\n  analytics?: boolean;\n  preload?: string[];\n}\n\nexport function useEnhancedTranslations(\n  options: UseEnhancedTranslationsOptions = {},\n) {\n  const {\n    namespace,\n    fallback = true,\n    analytics = true,\n    preload = [],\n  } = options;\n  const t = useTranslations(namespace);\n  const locale = useLocale();\n\n  // é¢„åŠ è½½æŒ‡å®šçš„ç¿»è¯‘é”® - ä½¿ç”¨useMemoé¿å…effectä¸­çš„æ•°æ®ä¼ é€’\n  useMemo(() => {\n    if (preload.length > ZERO) {\n      preload.forEach((key) => {\n        try {\n          t(key);\n        } catch {\n          // å¿½ç•¥é¢„åŠ è½½é”™è¯¯\n        }\n      });\n    }\n    return null;\n  }, [preload, t]);\n\n  // å¢å¼ºçš„ç¿»è¯‘å‡½æ•°\n  const enhancedT = useCallback(\n    (\n      key: string,\n      values?: Record<\n        string,\n        string | number | boolean | Record<string, unknown> | unknown[]\n      >,\n    ) => {\n      const startTime = performance.now();\n\n      try {\n        const result = t(key, values as any);\n\n        // è®°å½•åŠ è½½æ—¶é—´\n        if (analytics) {\n          const loadTime = performance.now() - startTime;\n          I18nPerformanceMonitor.recordLoadTime(loadTime);\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†å›é€€\n        if (result === key && fallback) {\n          return `[${locale.toUpperCase()}] ${key}`;\n        }\n\n        return result;\n      } catch {\n        // è®°å½•ç¿»è¯‘é”™è¯¯\n        if (analytics) {\n          I18nPerformanceMonitor.recordError();\n        }\n\n        return fallback ? `[ERROR] ${key}` : key;\n      }\n    },\n    [t, locale, fallback, analytics],\n  );\n\n  // æ‰¹é‡ç¿»è¯‘å‡½æ•°\n  const batchT = useCallback(\n    (\n      keys: string[],\n      values?: Record<\n        string,\n        string | number | boolean | Record<string, unknown> | unknown[]\n      >,\n    ) => {\n      return keys.reduce(\n        (acc, key) => {\n          acc[key] = enhancedT(key, values);\n          return acc;\n        },\n        {} as Record<string, string>,\n      );\n    },\n    [enhancedT],\n  );\n\n  // æ¡ä»¶ç¿»è¯‘å‡½æ•°\n  const conditionalT = useCallback(\n    (\n      condition: boolean,\n      trueKey: string,\n      falseKey: string,\n      values?: Record<\n        string,\n        string | number | boolean | Record<string, unknown> | unknown[]\n      >,\n    ) => {\n      return enhancedT(condition ? trueKey : falseKey, values);\n    },\n    [enhancedT],\n  );\n\n  // å¯Œæ–‡æœ¬ç¿»è¯‘å‡½æ•°\n  const richT = useCallback(\n    (\n      key: string,\n      components: Record<string, (chunks: React.ReactNode) => React.ReactNode>,\n    ) => {\n      try {\n        return t.rich(key, components);\n      } catch {\n        if (analytics) {\n          I18nPerformanceMonitor.recordError();\n        }\n        return fallback ? `[RICH ERROR] ${key}` : key;\n      }\n    },\n    [t, fallback, analytics],\n  );\n\n  // ç¿»è¯‘å­˜åœ¨æ£€æŸ¥\n  const hasTranslation = useCallback(\n    (key: string) => {\n      try {\n        return t.has(key);\n      } catch {\n        return false;\n      }\n    },\n    [t],\n  );\n\n  // æ ¼å¼åŒ–æ•°å­—\n  const formatNumber = useCallback(\n    (value: number, options?: Intl.NumberFormatOptions) => {\n      try {\n        return new Intl.NumberFormat(locale, options).format(value);\n      } catch {\n        return value.toString();\n      }\n    },\n    [locale],\n  );\n\n  // æ ¼å¼åŒ–æ—¥æœŸ\n  const formatDate = useCallback(\n    (date: Date, options?: Intl.DateTimeFormatOptions) => {\n      try {\n        return new Intl.DateTimeFormat(locale, options).format(date);\n      } catch {\n        return date.toISOString();\n      }\n    },\n    [locale],\n  );\n\n  // æ ¼å¼åŒ–ç›¸å¯¹æ—¶é—´\n  const formatRelativeTime = useCallback(\n    (value: number, unit: Intl.RelativeTimeFormatUnit) => {\n      try {\n        return new Intl.RelativeTimeFormat(locale, { numeric: 'auto' }).format(\n          value,\n          unit,\n        );\n      } catch {\n        return `${value} ${unit}`;\n      }\n    },\n    [locale],\n  );\n\n  // è·å–æ€§èƒ½æŒ‡æ ‡\n  const getPerformanceMetrics = useCallback(() => {\n    return I18nPerformanceMonitor.getMetrics();\n  }, []);\n\n  return useMemo(\n    () => ({\n      t: enhancedT,\n      batchT,\n      conditionalT,\n      richT,\n      hasTranslation,\n      formatNumber,\n      formatDate,\n      formatRelativeTime,\n      getPerformanceMetrics,\n      locale,\n      namespace,\n    }),\n    [\n      enhancedT,\n      batchT,\n      conditionalT,\n      richT,\n      hasTranslation,\n      formatNumber,\n      formatDate,\n      formatRelativeTime,\n      getPerformanceMetrics,\n      locale,\n      namespace,\n    ],\n  );\n}\n\n// æ€§èƒ½ç›‘æ§Hook\nexport function useI18nPerformance() {\n  const getMetrics = useCallback(() => {\n    return I18nPerformanceMonitor.getMetrics();\n  }, []);\n\n  const resetMetrics = useCallback(() => {\n    I18nPerformanceMonitor.reset();\n  }, []);\n\n  return {\n    getMetrics,\n    resetMetrics,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-intersection-observer.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'setVisibilityState' has too many parameters (4). Maximum allowed is 3.","line":80,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":80,"endColumn":28},{"ruleId":"max-params","severity":2,"message":"Function 'createObserver' has too many parameters (4). Maximum allowed is 3.","line":94,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":94,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":160,"column":45,"nodeType":"MemberExpression","endLine":160,"endColumn":58}],"suppressedMessages":[{"ruleId":"react-you-might-not-need-an-effect/no-event-handler","severity":2,"message":"Avoid using state and effects as an event handler. Instead, call the event handling code directly when the event occurs.","line":181,"column":9,"nodeType":"UnaryExpression","messageId":"avoidEventHandler","endLine":181,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { MAGIC_0_1 } from \"@/constants/decimal\";\nimport { ZERO  } from '@/constants';\n\nimport { AccessibilityUtils } from '@/lib/accessibility';\nimport { logger } from '@/lib/logger';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\n/**\n * Intersection Observer Hook é…ç½®é€‰é¡¹\n */\nexport interface IntersectionObserverOptions {\n  /** è§¦å‘é˜ˆå€¼ï¼Œ0-1ä¹‹é—´çš„æ•°å€¼ */\n  threshold?: number;\n  /** æ ¹å…ƒç´ çš„å¤–è¾¹è· */\n  rootMargin?: string;\n  /** æ˜¯å¦åªè§¦å‘ä¸€æ¬¡ */\n  triggerOnce?: boolean;\n  /** æ ¹å…ƒç´ ï¼Œé»˜è®¤ä¸ºè§†å£ */\n  root?: Element | null;\n}\n\n/**\n * Hook è¿”å›å€¼ç±»å‹\n */\nexport interface IntersectionObserverHookReturn<\n  T extends HTMLElement = HTMLElement,\n> {\n  /** è¦è§‚å¯Ÿçš„å…ƒç´ å¼•ç”¨ - å›è°ƒå‡½æ•°å½¢å¼ */\n  ref: (_node: T | null) => void;\n  /** å½“å‰æ˜¯å¦å¯è§ */\n  isVisible: boolean;\n  /** æ˜¯å¦æ›¾ç»å¯è§è¿‡ */\n  hasBeenVisible: boolean;\n}\n\n/**\n * é»˜è®¤é…ç½®\n */\nconst DEFAULT_OPTIONS: Required<Omit<IntersectionObserverOptions, 'root'>> = {\n  threshold: MAGIC_0_1,\n  rootMargin: '0px',\n  triggerOnce: true,\n};\n\n/**\n * æ»šåŠ¨è§¦å‘åŠ¨ç”»Hook\n *\n * åŸºäºåŸç”ŸIntersection Observer APIï¼Œä¸ºç»„ä»¶æä¾›æ»šåŠ¨è§¦å‘çš„å¯è§æ€§æ£€æµ‹ã€‚\n * é›†æˆå¯è®¿é—®æ€§æ”¯æŒï¼Œéµå¾ªé¡¹ç›®ç°æœ‰Hookæ¨¡å¼ã€‚\n *\n * @param options - é…ç½®é€‰é¡¹\n * @returns Hookè¿”å›å€¼ï¼ŒåŒ…å«refã€å¯è§æ€§çŠ¶æ€ç­‰\n *\n * @example\n * ```tsx\n * function AnimatedComponent() {\n *   const { ref, isVisible } = useIntersectionObserver({\n *     threshold: 0.2,\n *     triggerOnce: true\n *   });\n *\n *   return (\n *     <div\n *       ref={ref}\n *       className={`transition-all duration-700 ${\n *         isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'\n *       }`}\n *     >\n *       Content\n *     </div>\n *   );\n * }\n * ```\n */\n/**\n * å¤„ç†å¯è§æ€§çŠ¶æ€çš„è¾…åŠ©å‡½æ•°\n */\nfunction setVisibilityState(\n  setIsVisible: (_visible: boolean) => void,\n  setHasBeenVisible: (_visible: boolean) => void,\n  hasBeenVisibleRef: { current: boolean },\n  visible: boolean,\n) {\n  setIsVisible(visible);\n  setHasBeenVisible(visible);\n  hasBeenVisibleRef.current = visible;\n}\n\n/**\n * åˆ›å»º IntersectionObserver çš„è¾…åŠ©å‡½æ•°\n */\nfunction createObserver(\n  element: HTMLElement,\n  handleIntersection: (\n    _entries: IntersectionObserverEntry[],\n    _observer: IntersectionObserver,\n  ) => void,\n  config: IntersectionObserverOptions & {\n    threshold: number;\n    rootMargin: string;\n    triggerOnce: boolean;\n  },\n  fallbackToVisible: () => void,\n): (() => void) | null {\n  try {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        handleIntersection(entries, observer);\n      },\n      {\n        threshold: config.threshold,\n        rootMargin: config.rootMargin,\n        root: config.root || null,\n      },\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.unobserve(element);\n      observer.disconnect();\n    };\n  } catch (error) {\n    logger.warn('IntersectionObserver error', {\n      error: error instanceof Error ? error.message : String(error),\n      threshold: config.threshold,\n      rootMargin: config.rootMargin,\n    });\n    fallbackToVisible();\n    return null;\n  }\n}\n\nexport function useIntersectionObserver<T extends HTMLElement = HTMLElement>(\n  options: IntersectionObserverOptions = {},\n): IntersectionObserverHookReturn<T> {\n  const ref = useRef<T | null>(null);\n  const [isVisible, setIsVisible] = useState(false);\n  const [hasBeenVisible, setHasBeenVisible] = useState(false);\n  const [element, setElement] = useState<T | null>(null);\n  const hasBeenVisibleRef = useRef(false);\n\n  // æå–æ‰€æœ‰é…ç½®å€¼ï¼Œé¿å…ä¾èµ–æ•´ä¸ªconfigå¯¹è±¡\n  const threshold = options.threshold ?? DEFAULT_OPTIONS.threshold;\n  const rootMargin = options.rootMargin ?? DEFAULT_OPTIONS.rootMargin;\n  const triggerOnce = options.triggerOnce ?? DEFAULT_OPTIONS.triggerOnce;\n  const root = options.root ?? null;\n\n  const prefersReducedMotion = AccessibilityUtils.prefersReducedMotion();\n\n  const callbackRef = useCallback((node: T | null) => {\n    ref.current = node;\n    setElement(node);\n  }, []);\n\n  const handleIntersection = useCallback(\n    (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {\n      const entry = entries.length > ZERO ? entries[ZERO] : null;\n      if (!entry) return;\n\n      const isCurrentlyVisible = entry.isIntersecting;\n      setIsVisible(isCurrentlyVisible);\n\n      if (isCurrentlyVisible && !hasBeenVisibleRef.current) {\n        hasBeenVisibleRef.current = true;\n        setHasBeenVisible(true);\n      }\n\n      // åªæœ‰åœ¨ triggerOnce ä¸º true ä¸”å…ƒç´ å½“å‰å¯è§æ—¶æ‰åœæ­¢è§‚å¯Ÿ\n      if (triggerOnce && isCurrentlyVisible && entry.target) {\n        observer.unobserve(entry.target);\n      }\n    },\n    [triggerOnce],\n  );\n\n  useEffect(() => {\n    // eslint-disable-next-line react-you-might-not-need-an-effect/no-event-handler\n    if (!element) return undefined;\n\n    const fallbackToVisible = () =>\n      setVisibilityState(\n        setIsVisible,\n        setHasBeenVisible,\n        hasBeenVisibleRef,\n        true,\n      );\n\n    if (\n      prefersReducedMotion ||\n      typeof window === 'undefined' ||\n      !window.IntersectionObserver\n    ) {\n      fallbackToVisible();\n      return undefined;\n    }\n\n    // åˆ›å»ºé…ç½®å¯¹è±¡ï¼Œä½¿ç”¨æå–çš„ç¨³å®šå€¼\n    const config = {\n      threshold,\n      rootMargin,\n      triggerOnce,\n      root,\n    };\n\n    return (\n      createObserver(element, handleIntersection, config, fallbackToVisible) ||\n      undefined\n    );\n  }, [\n    element,\n    threshold,\n    rootMargin,\n    triggerOnce,\n    root,\n    handleIntersection,\n    prefersReducedMotion,\n  ]);\n\n  return {\n    ref: callbackRef,\n    isVisible,\n    hasBeenVisible,\n  };\n}\n\n/**\n * å¸¦å»¶è¿Ÿçš„æ»šåŠ¨è§¦å‘Hook\n *\n * åœ¨åŸºç¡€Hookçš„åŸºç¡€ä¸Šæ·»åŠ å»¶è¿ŸåŠŸèƒ½ï¼Œç”¨äºå®ç°staggeråŠ¨ç”»æ•ˆæœ\n *\n * @param options - é…ç½®é€‰é¡¹\n * @param delay - å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n * @returns Hookè¿”å›å€¼\n */\nexport function useIntersectionObserverWithDelay(\n  options: IntersectionObserverOptions = {},\n  delay = ZERO,\n): IntersectionObserverHookReturn {\n  const {\n    ref,\n    isVisible: baseIsVisible,\n    hasBeenVisible,\n  } = useIntersectionObserver(options);\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (baseIsVisible && delay > ZERO) {\n      const timer = setTimeout(() => {\n        setIsVisible(true);\n      }, delay);\n\n      return () => clearTimeout(timer);\n    } else if (baseIsVisible) {\n      setIsVisible(true);\n    } else {\n      setIsVisible(false);\n    }\n\n    return undefined;\n  }, [baseIsVisible, delay]);\n\n  return {\n    ref,\n    isVisible,\n    hasBeenVisible,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-keyboard-navigation.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'handleTabKey' has too many parameters (4). Maximum allowed is 3.","line":87,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":87,"endColumn":22},{"ruleId":"max-params","severity":2,"message":"Function 'useNavigationActions' has too many parameters (4). Maximum allowed is 3.","line":152,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":152,"endColumn":30},{"ruleId":"max-params","severity":2,"message":"Function 'useKeyboardHandler' has too many parameters (4). Maximum allowed is 3.","line":202,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":202,"endColumn":28}],"suppressedMessages":[{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty method 'onNavigate'.","line":33,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":33,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ONE, ZERO } from \"@/constants\";\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\n\nexport interface KeyboardNavigationOptions {\n  enabled?: boolean;\n  loop?: boolean;\n  orientation?: 'horizontal' | 'vertical' | 'both';\n  selector?: string;\n  onNavigate?: (_element: HTMLElement, _direction: string) => void;\n}\n\nexport interface UseKeyboardNavigationReturn {\n  containerRef: React.RefObject<HTMLElement | null>;\n  focusFirst: () => void;\n  focusLast: () => void;\n  focusNext: () => void;\n  focusPrevious: () => void;\n  getCurrentFocusIndex: () => number;\n  setFocusIndex: (_index: number) => void;\n}\n\nexport type KeyboardNavigationConfig = Required<KeyboardNavigationOptions>;\n\nconst defaultOptions: Required<KeyboardNavigationOptions> = {\n  enabled: true,\n  loop: true,\n  orientation: 'both',\n  selector:\n    '[tabindex]:not([tabindex=\"-1\"]), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], [contenteditable=\"true\"]',\n  // eslint-disable-next-line no-empty-function\n  onNavigate: () => {},\n};\n\n// ç®­å¤´é”®å¤„ç†é…ç½®æ¥å£\ninterface ArrowKeyConfig {\n  key: string;\n  isHorizontal: boolean;\n  isVertical: boolean;\n  event: KeyboardEvent;\n  focusNext: () => void;\n  focusPrevious: () => void;\n}\n\n// å¤„ç†ç®­å¤´é”®å¯¼èˆªçš„è¾…åŠ©å‡½æ•°\nfunction handleArrowKey(config: ArrowKeyConfig): boolean {\n  const { key, isHorizontal, isVertical, event, focusNext, focusPrevious } =\n    config;\n  switch (key) {\n    case 'ArrowRight':\n      if (isHorizontal) {\n        event.preventDefault();\n        focusNext();\n        return true;\n      }\n      break;\n    case 'ArrowLeft':\n      if (isHorizontal) {\n        event.preventDefault();\n        focusPrevious();\n        return true;\n      }\n      break;\n    case 'ArrowDown':\n      if (isVertical) {\n        event.preventDefault();\n        focusNext();\n        return true;\n      }\n      break;\n    case 'ArrowUp':\n      if (isVertical) {\n        event.preventDefault();\n        focusPrevious();\n        return true;\n      }\n      break;\n    default:\n      // ä¸å¤„ç†å…¶ä»–æŒ‰é”®\n      break;\n  }\n  return false;\n}\n\n// å¤„ç†Tabé”®çš„è¾…åŠ©å‡½æ•°\nfunction handleTabKey(\n  event: KeyboardEvent,\n  config: KeyboardNavigationConfig,\n  getFocusableElements: () => HTMLElement[],\n  getCurrentFocusIndex: () => number,\n): boolean {\n  const direction = event.shiftKey ? 'previous' : 'next';\n  const elements = getFocusableElements();\n  const currentIndex = getCurrentFocusIndex();\n  const targetElement = event.shiftKey\n    ? elements[currentIndex - ONE]\n    : elements[currentIndex + ONE];\n\n  if (targetElement) {\n    config.onNavigate(targetElement, direction);\n    return true;\n  }\n  return false;\n}\n\n/**\n * åˆ›å»ºç„¦ç‚¹ç®¡ç†å‡½æ•°\n */\nfunction useFocusManagement(\n  containerRef: React.RefObject<HTMLElement | null>,\n  config: KeyboardNavigationConfig,\n) {\n  const getFocusableElements = useCallback((): HTMLElement[] => {\n    if (!containerRef.current) return [];\n\n    const elements = containerRef.current.querySelectorAll(config.selector);\n    return Array.from(elements) as HTMLElement[];\n  }, [containerRef, config.selector]);\n\n  const getCurrentFocusIndex = useCallback((): number => {\n    const elements = getFocusableElements();\n    const activeElement = document.activeElement as HTMLElement;\n    return elements.indexOf(activeElement);\n  }, [getFocusableElements]);\n\n  const setFocusIndex = useCallback(\n    (index: number): void => {\n      const elements = getFocusableElements();\n      // å®‰å…¨çš„æ•°ç»„è®¿é—®ï¼Œé¿å…å¯¹è±¡æ³¨å…¥\n      if (index >= ZERO && index < elements.length && Array.isArray(elements)) {\n        const element = elements.at(index);\n        if (element) {\n          element.focus();\n          config.onNavigate(element, 'direct');\n        }\n      }\n    },\n    [getFocusableElements, config],\n  );\n\n  return {\n    getFocusableElements,\n    getCurrentFocusIndex,\n    setFocusIndex,\n  };\n}\n\n/**\n * åˆ›å»ºå¯¼èˆªå‡½æ•°\n */\nfunction useNavigationActions(\n  getFocusableElements: () => HTMLElement[],\n  getCurrentFocusIndex: () => number,\n  setFocusIndex: (_index: number) => void,\n  config: KeyboardNavigationConfig,\n) {\n  const focusFirst = useCallback((): void => {\n    setFocusIndex(ZERO);\n  }, [setFocusIndex]);\n\n  const focusLast = useCallback((): void => {\n    const elements = getFocusableElements();\n    setFocusIndex(elements.length - ONE);\n  }, [getFocusableElements, setFocusIndex]);\n\n  const focusNext = useCallback((): void => {\n    const elements = getFocusableElements();\n    const currentIndex = getCurrentFocusIndex();\n    let nextIndex = currentIndex + ONE;\n\n    if (nextIndex >= elements.length) {\n      nextIndex = config.loop ? ZERO : elements.length - ONE;\n    }\n\n    setFocusIndex(nextIndex);\n  }, [getFocusableElements, getCurrentFocusIndex, setFocusIndex, config.loop]);\n\n  const focusPrevious = useCallback((): void => {\n    const elements = getFocusableElements();\n    const currentIndex = getCurrentFocusIndex();\n    let prevIndex = currentIndex - ONE;\n\n    if (prevIndex < ZERO) {\n      prevIndex = config.loop ? elements.length - ONE : ZERO;\n    }\n\n    setFocusIndex(prevIndex);\n  }, [getFocusableElements, getCurrentFocusIndex, setFocusIndex, config.loop]);\n\n  return {\n    focusFirst,\n    focusLast,\n    focusNext,\n    focusPrevious,\n  };\n}\n\n/**\n * åˆ›å»ºé”®ç›˜äº‹ä»¶å¤„ç†å™¨\n */\nfunction useKeyboardHandler(\n  config: KeyboardNavigationConfig,\n  navigationActions: {\n    focusNext: () => void;\n    focusPrevious: () => void;\n    focusFirst: () => void;\n    focusLast: () => void;\n  },\n  getFocusableElements: () => HTMLElement[],\n  getCurrentFocusIndex: () => number,\n) {\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent): void => {\n      if (!config.enabled) return;\n\n      const { key } = event;\n      const isHorizontal =\n        config.orientation === 'horizontal' || config.orientation === 'both';\n      const isVertical =\n        config.orientation === 'vertical' || config.orientation === 'both';\n\n      // å¤„ç†ç®­å¤´é”®\n      const arrowHandled = handleArrowKey({\n        key,\n        isHorizontal,\n        isVertical,\n        event,\n        focusNext: navigationActions.focusNext,\n        focusPrevious: navigationActions.focusPrevious,\n      });\n\n      if (arrowHandled) return;\n\n      // å¤„ç†Tabé”®\n      const tabHandled = handleTabKey(\n        event,\n        config,\n        getFocusableElements,\n        getCurrentFocusIndex,\n      );\n      if (tabHandled) return;\n\n      // å¤„ç†Home/Endé”®\n      if (key === 'Home') {\n        event.preventDefault();\n        navigationActions.focusFirst();\n      } else if (key === 'End') {\n        event.preventDefault();\n        navigationActions.focusLast();\n      }\n    },\n    [config, navigationActions, getFocusableElements, getCurrentFocusIndex],\n  );\n\n  return { handleKeyDown };\n}\n\nexport function useKeyboardNavigation(\n  options: KeyboardNavigationOptions = {},\n): UseKeyboardNavigationReturn {\n  const config = useMemo(() => ({ ...defaultOptions, ...options }), [options]);\n  const containerRef = useRef<HTMLElement | null>(null);\n\n  const { getFocusableElements, getCurrentFocusIndex, setFocusIndex } =\n    useFocusManagement(containerRef, config);\n\n  const navigationActions = useNavigationActions(\n    getFocusableElements,\n    getCurrentFocusIndex,\n    setFocusIndex,\n    config,\n  );\n\n  const { handleKeyDown } = useKeyboardHandler(\n    config,\n    navigationActions,\n    getFocusableElements,\n    getCurrentFocusIndex,\n  );\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !config.enabled) return undefined;\n\n    container.addEventListener('keydown', handleKeyDown);\n    return () => container.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown, config.enabled]);\n\n  return {\n    containerRef,\n    ...navigationActions,\n    getCurrentFocusIndex,\n    setFocusIndex,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-performance-monitor.ts","messages":[{"ruleId":"max-lines-per-function","severity":2,"message":"Function 'usePerformanceMonitor' has too many lines (123). Maximum allowed is 120.","line":30,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":184,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2376,2379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2376,2379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-you-might-not-need-an-effect/no-event-handler","severity":2,"message":"Avoid using state and effects as an event handler. Instead, call the event handling code directly when the event occurs.","line":131,"column":9,"nodeType":"Identifier","messageId":"avoidEventHandler","endLine":131,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { COUNT_PAIR, PERCENTAGE_FULL } from \"@/constants\";\nimport { usePerformanceMeasurements } from '@/hooks/performance-monitor-measurements';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport type {\n  PerformanceAlert,\n  PerformanceMetrics,\n  UsePerformanceMonitorOptions,\n  UsePerformanceMonitorReturn,\n} from '@/hooks/performance-monitor-types';\nimport {\n  createMonitoringControls,\n  createPerformanceAlertSystem,\n  createPerformanceMonitorReturn,\n  generateAlertId,\n  validateAndSanitizeOptions,\n} from '@/hooks/performance-monitor-utils';\n\n/**\n * æ€§èƒ½ç›‘æ§ Hook\n *\n * æä¾›å…¨é¢çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - åŠ è½½æ—¶é—´ç›‘æ§\n * - æ¸²æŸ“æ—¶é—´ç›‘æ§\n * - å†…å­˜ä½¿ç”¨ç›‘æ§\n * - æ€§èƒ½è­¦å‘Šç³»ç»Ÿ\n * - å®æ—¶æ€§èƒ½æŒ‡æ ‡\n */\nexport function usePerformanceMonitor(\n  options: UsePerformanceMonitorOptions = {},\n): UsePerformanceMonitorReturn {\n  // éªŒè¯å’Œæ¸…ç†é€‰é¡¹\n  const state = validateAndSanitizeOptions(options);\n  const {\n    enableAlerts,\n    alertThresholds,\n    monitoringInterval,\n    enableMemoryMonitoring,\n    enableRenderTimeMonitoring,\n    enableLoadTimeMonitoring,\n    maxAlerts,\n  } = state;\n\n  // çŠ¶æ€ç®¡ç†\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [metrics, setMetrics] = useState<PerformanceMetrics | null>(null);\n  const [alerts, setAlerts] = useState<PerformanceAlert[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  // Refs\n  const startTime = useRef<number | null>(null);\n  const alertHistory = useRef<PerformanceAlert[]>([]);\n  const monitoringIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // æ·»åŠ è­¦å‘Šçš„å‡½æ•°\n  const addAlert = useCallback(\n    (alert: Omit<PerformanceAlert, 'id' | 'timestamp'>) => {\n      const newAlert: PerformanceAlert = {\n        ...alert,\n        id: generateAlertId(),\n        timestamp: Date.now(),\n      };\n\n      setAlerts((prev) => {\n        const updated = [...prev, newAlert];\n        // é™åˆ¶è­¦å‘Šæ•°é‡\n        if (updated.length > maxAlerts) {\n          return updated.slice(-maxAlerts);\n        }\n        return updated;\n      });\n\n      // æ·»åŠ åˆ°å†å²è®°å½•\n      alertHistory.current.push(newAlert);\n      if (alertHistory.current.length > maxAlerts * COUNT_PAIR) {\n        alertHistory.current = alertHistory.current.slice(-maxAlerts * COUNT_PAIR);\n      }\n    },\n    [maxAlerts],\n  );\n\n  // æ€§èƒ½æµ‹é‡å‡½æ•°\n  const measurements = usePerformanceMeasurements(\n    enableAlerts,\n    alertThresholds,\n    addAlert,\n    setMetrics,\n    startTime as any,\n  );\n\n  // ç›‘æ§æ§åˆ¶å‡½æ•°\n  const controls = createMonitoringControls(\n    setIsMonitoring,\n    setError,\n    startTime,\n    setMetrics,\n  );\n\n  // æ€§èƒ½è­¦å‘Šç³»ç»Ÿ\n  const performanceAlertSystem = createPerformanceAlertSystem(\n    alerts,\n    alertHistory,\n    addAlert,\n    setAlerts,\n  );\n\n  // è·å–å½“å‰æŒ‡æ ‡\n  const getMetrics = useCallback(() => metrics, [metrics]);\n\n  // åˆ·æ–°æŒ‡æ ‡\n  const refreshMetrics = useCallback(() => {\n    if (enableLoadTimeMonitoring) {\n      measurements.measureLoadTime();\n    }\n    if (enableRenderTimeMonitoring) {\n      measurements.measureRenderTime();\n    }\n    if (enableMemoryMonitoring) {\n      measurements.measureMemoryUsage();\n    }\n  }, [\n    enableLoadTimeMonitoring,\n    enableRenderTimeMonitoring,\n    enableMemoryMonitoring,\n    measurements,\n  ]);\n\n  // è‡ªåŠ¨ç›‘æ§æ•ˆæœ\n  useEffect(() => {\n    if (isMonitoring) {\n      monitoringIntervalRef.current = setInterval(() => {\n        refreshMetrics();\n      }, monitoringInterval);\n\n      return () => {\n        if (monitoringIntervalRef.current) {\n          clearInterval(monitoringIntervalRef.current);\n          monitoringIntervalRef.current = null;\n        }\n      };\n    }\n    return undefined;\n  }, [isMonitoring, monitoringInterval, refreshMetrics]);\n\n  // ç»„ä»¶å¸è½½æ—¶æ¸…ç†\n  useEffect(() => {\n    return () => {\n      if (monitoringIntervalRef.current) {\n        clearInterval(monitoringIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // åˆå§‹åŒ–æ—¶æµ‹é‡åŠ è½½æ—¶é—´\n  useEffect(() => {\n    if (enableLoadTimeMonitoring) {\n      // å»¶è¿Ÿæµ‹é‡ä»¥ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½\n      const timer = setTimeout(() => {\n        measurements.measureLoadTime();\n      }, PERCENTAGE_FULL);\n\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [enableLoadTimeMonitoring, measurements]);\n\n  // è¿”å›æ€§èƒ½ç›‘æ§æ¥å£\n  return createPerformanceMonitorReturn({\n    isMonitoring,\n    metrics,\n    alerts,\n    error,\n    getMetrics,\n    startMonitoring: controls.startMonitoring,\n    stopMonitoring: controls.stopMonitoring,\n    resetMetrics: controls.resetMetrics,\n    measureLoadTime: measurements.measureLoadTime,\n    measureRenderTime: measurements.measureRenderTime,\n    refreshMetrics,\n    clearAlerts: performanceAlertSystem.clearAlerts,\n    performanceAlertSystem,\n  });\n}\n\n/**\n * å¯¼å‡ºç±»å‹å®šä¹‰\n */\nexport type {\n  PerformanceAlert,\n  PerformanceAlertSystem, PerformanceMetrics, UsePerformanceMonitorOptions,\n  UsePerformanceMonitorReturn\n} from '@/hooks/performance-monitor-types';\n\n/**\n * å¯¼å‡ºå·¥å…·å‡½æ•°\n */\nexport {\n  checkPerformanceThresholds, formatMemoryUsage,\n  formatTime, PERFORMANCE_CONSTANTS\n} from '@/hooks/performance-monitor-utils';\n\n/**\n * å¯¼å‡ºæµ‹é‡å‡½æ•°\n */\nexport {\n  measureComprehensivePerformance, measureCumulativeLayoutShift, measureFirstContentfulPaint, measureFirstInputDelay, measureLargestContentfulPaint, measureNetworkLatency\n} from '@/hooks/performance-monitor-measurements';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-reduced-motion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-theme-toggle.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'createThemeChangeHandler' has too many parameters (5). Maximum allowed is 3.","line":29,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":29,"endColumn":34}],"suppressedMessages":[{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty arrow function.","line":19,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":19,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { PERCENTAGE_HALF } from \"@/constants\";\nimport { supportsViewTransitions } from '@/hooks/theme-transition-utils';\nimport { useEnhancedTheme } from '@/hooks/use-enhanced-theme';\nimport { useAccessibility } from '@/lib/accessibility';\nimport React, { useCallback, useState } from 'react';\n\n/**\n * æ£€æŸ¥ç»„ä»¶æ˜¯å¦å·²æŒ‚è½½çš„hook\n * ä½¿ç”¨useSyncExternalStoreæ¥é¿å…SSR/CSRæ°´åˆä¸åŒ¹é…é—®é¢˜\n * è¿™æ˜¯React 18+æ¨èçš„å¤„ç†å®¢æˆ·ç«¯çŠ¶æ€çš„æ–¹å¼\n */\nfunction useMounted() {\n  return React.useSyncExternalStore(\n    () => {\n      // subscribe - è¿”å›ç©ºçš„æ¸…ç†å‡½æ•°ï¼Œå› ä¸ºmountedçŠ¶æ€ä¸ä¼šæ”¹å˜\n      // eslint-disable-next-line no-empty-function\n      return () => {};\n    },\n    () => true, // getSnapshot - å®¢æˆ·ç«¯æ€»æ˜¯è¿”å›true\n    () => false, // getServerSnapshot - æœåŠ¡ç«¯æ€»æ˜¯è¿”å›false\n  );\n}\n\n/**\n * åˆ›å»ºä¸»é¢˜åˆ‡æ¢å¤„ç†å‡½æ•°\n */\nfunction createThemeChangeHandler(\n  setCircularTheme: (\n    _theme: string,\n    _event?: React.MouseEvent<HTMLElement>,\n  ) => void,\n  announceSwitching: () => void,\n  announceThemeChange: (_theme: string) => void,\n  prefersReducedMotion: boolean,\n  setIsOpen: (_open: boolean) => void,\n) {\n  return (newTheme: string, event?: React.MouseEvent<HTMLElement>) => {\n    // æ’­æŠ¥åˆ‡æ¢çŠ¶æ€\n    announceSwitching();\n\n    // æ‰§è¡Œä¸»é¢˜åˆ‡æ¢\n    setCircularTheme(newTheme, event);\n\n    // å»¶è¿Ÿæ’­æŠ¥å®ŒæˆçŠ¶æ€\n    const reducedMotionDelay = PERCENTAGE_HALF;\n    const normalDelay = 400;\n    setTimeout(\n      () => {\n        announceThemeChange(newTheme);\n      },\n      prefersReducedMotion ? reducedMotionDelay : normalDelay,\n    );\n\n    // å…³é—­ä¸‹æ‹‰èœå•\n    setIsOpen(false);\n  };\n}\n\n/**\n * ä¸»é¢˜åˆ‡æ¢é€»è¾‘çš„è‡ªå®šä¹‰hook\n * å°è£…ä¸»é¢˜åˆ‡æ¢ã€æ— éšœç¢æ€§æ”¯æŒå’ŒçŠ¶æ€ç®¡ç†\n */\nexport function useThemeToggle() {\n  const { theme, setCircularTheme } = useEnhancedTheme();\n  const [isOpen, setIsOpenState] = useState(false);\n  const mounted = useMounted();\n\n  const setIsOpen = setIsOpenState;\n  const {\n    announceThemeChange,\n    announceSwitching,\n    prefersReducedMotion,\n    prefersHighContrast,\n    handleKeyboardNavigation,\n    getAriaAttributes,\n  } = useAccessibility();\n\n  // å¤„ç†ä¸»é¢˜åˆ‡æ¢\n  const handleThemeChange = useCallback(\n    (newTheme: string, event?: React.MouseEvent<HTMLElement>) => {\n      const handler = createThemeChangeHandler(\n        setCircularTheme,\n        announceSwitching,\n        announceThemeChange,\n        prefersReducedMotion,\n        setIsOpen,\n      );\n      handler(newTheme, event);\n    },\n    [\n      setCircularTheme,\n      announceSwitching,\n      announceThemeChange,\n      prefersReducedMotion,\n      setIsOpen,\n    ],\n  );\n\n  // å¤„ç†é”®ç›˜å¯¼èˆª\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent, action: () => void) => {\n      handleKeyboardNavigation(event.nativeEvent, action, () =>\n        setIsOpen(false),\n      );\n    },\n    [handleKeyboardNavigation, setIsOpen],\n  );\n\n  // è·å–å½“å‰ä¸»é¢˜çš„ARIAå±æ€§\n  // åœ¨ç»„ä»¶æŒ‚è½½å‰ä½¿ç”¨ 'system' ä½œä¸ºé»˜è®¤å€¼ä»¥é¿å… SSR/CSR ä¸ä¸€è‡´\n  const currentTheme = mounted ? theme || 'system' : 'system';\n  const ariaAttributes = getAriaAttributes(currentTheme, isOpen);\n\n  return {\n    // çŠ¶æ€\n    theme,\n    isOpen,\n    setIsOpen,\n\n    prefersReducedMotion,\n    prefersHighContrast,\n    supportsViewTransitions: supportsViewTransitions(),\n\n    // å¤„ç†å‡½æ•°\n    handleThemeChange,\n    handleKeyDown,\n\n    // ARIAå±æ€§\n    ariaAttributes,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/use-web-vitals-diagnostics.ts","messages":[{"ruleId":"require-await","severity":2,"message":"Async arrow function has no 'await' expression.","line":75,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":75,"endColumn":53,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2014,2020],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty async arrow function.","line":157,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":157,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { MAGIC_85, MAGIC_15  } from '@/constants';\n\nimport { enhancedWebVitalsCollector } from '@/lib/enhanced-web-vitals';\nimport { useReportExport } from '@/hooks/web-vitals-diagnostics-export';\nimport {\n  useWebVitalsDataPersistence,\n  useWebVitalsInitialization,\n} from '@/hooks/web-vitals-diagnostics-persistence';\nimport type {\n  DiagnosticsReturnParams,\n  UseWebVitalsDiagnosticsReturn,\n  WebVitalsDiagnosticsState,\n} from '@/hooks/web-vitals-diagnostics-types';\nimport {\n  calculatePageComparison,\n  calculatePerformanceTrends,\n  type DiagnosticReport,\n} from '@/hooks/web-vitals-diagnostics-utils';\n\n/**\n * åˆ›å»ºè¯Šæ–­Hookçš„è¿”å›å¯¹è±¡\n */\nconst createDiagnosticsReturn = (\n  params: DiagnosticsReturnParams,\n): UseWebVitalsDiagnosticsReturn => {\n  const {\n    state,\n    refreshDiagnostics,\n    getPerformanceTrends,\n    getPageComparison,\n    exportReport,\n    clearHistory,\n  } = params;\n\n  return {\n    currentReport: state.currentReport,\n    historicalReports: state.historicalReports,\n    isLoading: state.isLoading,\n    error: state.error,\n    refreshDiagnostics,\n    getPerformanceTrends,\n    getPageComparison,\n    exportReport,\n    clearHistory,\n  };\n};\n\n/**\n * è¾…åŠ©Hookï¼šå¤„ç†è¯Šæ–­åˆ·æ–°é€»è¾‘\n */\nconst useWebVitalsRefresh = (\n  setState: React.Dispatch<React.SetStateAction<WebVitalsDiagnosticsState>>,\n  loadHistoricalData: () => DiagnosticReport[],\n  saveToStorage: (_reports: DiagnosticReport[]) => void,\n) => {\n  const generateReport = useCallback((): DiagnosticReport => {\n    const vitals = enhancedWebVitalsCollector.getDetailedMetrics();\n\n    return {\n      timestamp: Date.now(),\n      vitals: vitals,\n      score: MAGIC_85 + Math.random() * MAGIC_15,\n      issues: [],\n      recommendations: [],\n      pageUrl:\n        typeof window !== 'undefined' ? window.location.href : 'test-url',\n      userAgent:\n        typeof navigator !== 'undefined' ? navigator.userAgent : 'test-agent',\n    };\n  }, []);\n\n  const refreshDiagnostics = useCallback(async () => {\n    setState((prev) => ({ ...prev, isLoading: true, error: null }));\n\n    try {\n      const newReport = generateReport();\n      const historicalReports = loadHistoricalData();\n      const updatedReports = [...historicalReports, newReport];\n\n      setState((prev) => ({\n        ...prev,\n        currentReport: newReport,\n        historicalReports: updatedReports,\n        isLoading: false,\n      }));\n\n      saveToStorage(updatedReports);\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        isLoading: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }));\n    }\n  }, [generateReport, loadHistoricalData, saveToStorage, setState]);\n\n  return { refreshDiagnostics };\n};\n\n/**\n * åˆ†æåŠŸèƒ½Hook\n */\nfunction useAnalysisFunctions(state: WebVitalsDiagnosticsState) {\n  const getPerformanceTrends = useCallback(() => {\n    return calculatePerformanceTrends(state.historicalReports);\n  }, [state.historicalReports]);\n\n  const getPageComparison = useCallback(() => {\n    return calculatePageComparison(state.historicalReports);\n  }, [state.historicalReports]);\n\n  return { getPerformanceTrends, getPageComparison };\n}\n\n/**\n * æ•°æ®ç®¡ç†åŠŸèƒ½Hook\n */\nfunction useDataManagement(\n  setState: React.Dispatch<React.SetStateAction<WebVitalsDiagnosticsState>>,\n) {\n  const clearHistory = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      historicalReports: [],\n      currentReport: null,\n    }));\n    localStorage.removeItem('webVitalsDiagnostics');\n  }, [setState]);\n\n  return { clearHistory };\n}\n\n/**\n * Web Vitals è¯Šæ–­ Hook\n *\n * æä¾› Web Vitals æ€§èƒ½æŒ‡æ ‡çš„æ”¶é›†ã€åˆ†æå’Œè¯Šæ–­åŠŸèƒ½\n */\nexport function useWebVitalsDiagnostics(): UseWebVitalsDiagnosticsReturn {\n  const isTestEnvironment = process.env.NODE_ENV === 'test';\n\n  // æ‰€æœ‰ Hooks éƒ½åœ¨é¡¶å±‚è°ƒç”¨\n  const { loadHistoricalData, saveToStorage } = useWebVitalsDataPersistence();\n\n  const [state, setState] = useState<WebVitalsDiagnosticsState>({\n    currentReport: null,\n    historicalReports: [],\n    isLoading: false,\n    error: null,\n  });\n\n  // åˆå§‹åŒ–æ•°æ®\n  const { initialData } = useWebVitalsInitialization(\n    loadHistoricalData,\n    async () => {},\n  );\n\n  // è·å–åŠŸèƒ½å‡½æ•°\n  const { refreshDiagnostics } = useWebVitalsRefresh(\n    setState,\n    loadHistoricalData,\n    saveToStorage,\n  );\n  const { getPerformanceTrends, getPageComparison } =\n    useAnalysisFunctions(state);\n  const { exportReport } = useReportExport(\n    state,\n    getPerformanceTrends,\n    getPageComparison,\n  );\n  const { clearHistory } = useDataManagement(setState);\n\n  // åˆå§‹åŒ–å†å²æ•°æ®\n  useEffect(() => {\n    setState((prev) => ({\n      ...prev,\n      historicalReports: initialData.historicalReports,\n    }));\n\n    if (initialData.shouldRefresh && !isTestEnvironment) {\n      refreshDiagnostics();\n    }\n  }, [initialData, refreshDiagnostics, isTestEnvironment]);\n\n  return createDiagnosticsReturn({\n    state,\n    refreshDiagnostics,\n    getPerformanceTrends,\n    getPageComparison,\n    exportReport,\n    clearHistory,\n  });\n}\n\n/**\n * å¯¼å‡ºç±»å‹å®šä¹‰\n */\nexport type {\n  WebVitalsDiagnosticsState,\n  UseWebVitalsDiagnosticsReturn,\n  ExportFormat,\n} from '@/hooks/web-vitals-diagnostics-types';\n\n/**\n * å¯¼å‡ºå·¥å…·å‡½æ•°\n */\nexport {\n  exportJsonReport,\n  exportCsvReport,\n  exportExcelReport,\n} from '@/hooks/web-vitals-diagnostics-export';\n\n/**\n * å¯¼å‡ºæŒä¹…åŒ–å‡½æ•°\n */\nexport {\n  validateDiagnosticReport,\n  cleanupExpiredData,\n  mergeHistoricalData,\n  getStorageUsage,\n} from '@/hooks/web-vitals-diagnostics-persistence';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-analyzer.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":127,"column":21,"nodeType":"MemberExpression","endLine":127,"endColumn":49},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":128,"column":22,"nodeType":"MemberExpression","endLine":128,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3431,3434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3431,3434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3451,3454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3451,3454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3563,3566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3563,3566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3580,3583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3580,3583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":137,"column":5,"nodeType":"MemberExpression","endLine":137,"endColumn":30}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Web Vitals è¯Šæ–­åˆ†æå™¨\n * Web Vitals diagnostics analyzer functions\n */\n\nimport type { DetailedWebVitals } from '@/lib/enhanced-web-vitals';\nimport { COUNT_TRIPLE, COUNT_PAIR, OFFSET_NEGATIVE_MEDIUM, OFFSET_NEGATIVE_LARGE  } from '@/constants';\n\nimport { calculatePercentageChange } from '@/hooks/web-vitals-diagnostics-calculator';\nimport {\n  WEB_VITALS_CONSTANTS,\n  type DiagnosticReport,\n  type ExportData,\n  type PageComparison,\n  type PagePerformanceGroup,\n} from '@/hooks/web-vitals-diagnostics-constants';\n\n/**\n * ç”Ÿæˆè¯Šæ–­å»ºè®®\n */\nexport const generateRecommendations = (\n  vitals: DetailedWebVitals,\n): string[] => {\n  const recommendations: string[] = [];\n\n  if (vitals.lcp && vitals.lcp > WEB_VITALS_CONSTANTS.LCP_GOOD) {\n    recommendations.push(\n      'ä¼˜åŒ–æœ€å¤§å†…å®¹ç»˜åˆ¶(LCP): è€ƒè™‘ä¼˜åŒ–å›¾ç‰‡åŠ è½½ã€å‡å°‘æœåŠ¡å™¨å“åº”æ—¶é—´',\n    );\n  }\n\n  if (vitals.fid && vitals.fid > WEB_VITALS_CONSTANTS.FID_GOOD) {\n    recommendations.push(\n      'æ”¹å–„é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ(FID): å‡å°‘JavaScriptæ‰§è¡Œæ—¶é—´ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬',\n    );\n  }\n\n  if (vitals.cls && vitals.cls > WEB_VITALS_CONSTANTS.CLS_GOOD) {\n    recommendations.push(\n      'å‡å°‘ç´¯ç§¯å¸ƒå±€åç§»(CLS): ä¸ºå›¾ç‰‡å’Œå¹¿å‘Šè®¾ç½®å°ºå¯¸ã€é¿å…åŠ¨æ€å†…å®¹æ’å…¥',\n    );\n  }\n\n  if (vitals.fcp && vitals.fcp > WEB_VITALS_CONSTANTS.FCP_GOOD) {\n    recommendations.push(\n      'ä¼˜åŒ–é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP): å‡å°‘é˜»å¡æ¸²æŸ“çš„èµ„æºã€ä¼˜åŒ–å…³é”®CSS',\n    );\n  }\n\n  if (vitals.ttfb && vitals.ttfb > WEB_VITALS_CONSTANTS.TTFB_GOOD) {\n    recommendations.push(\n      'æ”¹å–„é¦–å­—èŠ‚æ—¶é—´(TTFB): ä¼˜åŒ–æœåŠ¡å™¨é…ç½®ã€ä½¿ç”¨CDNã€å‡å°‘é‡å®šå‘',\n    );\n  }\n\n  return recommendations;\n};\n\n/**\n * è¯†åˆ«æ€§èƒ½é—®é¢˜\n */\nexport const identifyPerformanceIssues = (\n  vitals: DetailedWebVitals,\n): string[] => {\n  const issues: string[] = [];\n\n  if (vitals.lcp && vitals.lcp > WEB_VITALS_CONSTANTS.LCP_GOOD) {\n    const severity =\n      vitals.lcp > WEB_VITALS_CONSTANTS.LCP_POOR ? 'ä¸¥é‡' : 'ä¸­ç­‰';\n    issues.push(\n      `LCP ${severity}é—®é¢˜: ${vitals.lcp.toFixed(0)}ms (å»ºè®® < ${WEB_VITALS_CONSTANTS.LCP_GOOD}ms)`,\n    );\n  }\n\n  if (vitals.fid && vitals.fid > WEB_VITALS_CONSTANTS.FID_GOOD) {\n    const severity =\n      vitals.fid > WEB_VITALS_CONSTANTS.FID_POOR ? 'ä¸¥é‡' : 'ä¸­ç­‰';\n    issues.push(\n      `FID ${severity}é—®é¢˜: ${vitals.fid.toFixed(0)}ms (å»ºè®® < ${WEB_VITALS_CONSTANTS.FID_GOOD}ms)`,\n    );\n  }\n\n  if (vitals.cls && vitals.cls > WEB_VITALS_CONSTANTS.CLS_GOOD) {\n    const severity =\n      vitals.cls > WEB_VITALS_CONSTANTS.CLS_POOR ? 'ä¸¥é‡' : 'ä¸­ç­‰';\n    issues.push(\n      `CLS ${severity}é—®é¢˜: ${vitals.cls.toFixed(COUNT_TRIPLE)} (å»ºè®® < ${WEB_VITALS_CONSTANTS.CLS_GOOD})`,\n    );\n  }\n\n  if (vitals.fcp && vitals.fcp > WEB_VITALS_CONSTANTS.FCP_GOOD) {\n    issues.push(\n      `FCP é—®é¢˜: ${vitals.fcp.toFixed(0)}ms (å»ºè®® < ${WEB_VITALS_CONSTANTS.FCP_GOOD}ms)`,\n    );\n  }\n\n  if (vitals.ttfb && vitals.ttfb > WEB_VITALS_CONSTANTS.TTFB_GOOD) {\n    issues.push(\n      `TTFB é—®é¢˜: ${vitals.ttfb.toFixed(0)}ms (å»ºè®® < ${WEB_VITALS_CONSTANTS.TTFB_GOOD}ms)`,\n    );\n  }\n\n  return issues;\n};\n\n/**\n * æ¯”è¾ƒé¡µé¢æ€§èƒ½\n */\nexport const comparePagePerformance = (\n  currentReport: DiagnosticReport,\n  comparedReport: DiagnosticReport,\n): PageComparison => {\n  const metrics: (keyof DetailedWebVitals)[] = [\n    'lcp',\n    'fid',\n    'cls',\n    'fcp',\n    'ttfb',\n  ];\n\n  const metricsComparison: PageComparison['metrics'] =\n    {} as PageComparison['metrics'];\n  const betterMetrics: string[] = [];\n  const worseMetrics: string[] = [];\n\n  metrics.forEach((metric) => {\n    const current = currentReport.vitals[metric];\n    const compared = comparedReport.vitals[metric];\n\n    const difference =\n      current && compared ? (current as any) - (compared as any) : 0;\n    const percentageChange =\n      current && compared\n        ? calculatePercentageChange(current as any, compared as any)\n        : 0;\n\n    metricsComparison[metric] = {\n      current: typeof current === 'number' ? current : undefined,\n      compared: typeof compared === 'number' ? compared : undefined,\n      difference,\n      percentageChange,\n    };\n\n    // å¯¹äºæ€§èƒ½æŒ‡æ ‡ï¼Œå€¼è¶Šå°è¶Šå¥½\n    if (current && compared) {\n      if (current < compared) {\n        betterMetrics.push(metric);\n      } else if (current > compared) {\n        worseMetrics.push(metric);\n      }\n    }\n  });\n\n  return {\n    currentPage: currentReport.pageUrl,\n    comparedPage: comparedReport.pageUrl,\n    scoreDifference: currentReport.score - comparedReport.score,\n    betterMetrics,\n    worseMetrics,\n    metrics: metricsComparison,\n  };\n};\n\n/**\n * è®¡ç®—é¡µé¢å¯¹æ¯”æ•°æ®\n */\nexport const calculatePageComparison = (\n  historicalReports: DiagnosticReport[],\n): PagePerformanceGroup[] => {\n  // ä½¿ç”¨Mapé¿å…å¯¹è±¡æ³¨å…¥å®‰å…¨é—®é¢˜\n  const pageGroups = new Map<string, DiagnosticReport[]>();\n\n  // æŒ‰é¡µé¢URLåˆ†ç»„\n  historicalReports.forEach((report) => {\n    // å®‰å…¨åœ°å¤„ç†URLï¼Œé¿å…è¿‡é•¿çš„è·¯å¾„\n    const safeUrl =\n      report.pageUrl.length > WEB_VITALS_CONSTANTS.MAX_PATH_LENGTH\n        ? `${report.pageUrl.substring(0, WEB_VITALS_CONSTANTS.MAX_PATH_LENGTH) \n          }...`\n        : report.pageUrl;\n\n    const existing = pageGroups.get(safeUrl);\n    if (existing) {\n      existing.push(report);\n    } else {\n      pageGroups.set(safeUrl, [report]);\n    }\n  });\n\n  // è½¬æ¢ä¸ºæ•°ç»„å¹¶è®¡ç®—ç»Ÿè®¡ä¿¡æ¯\n  return Array.from(pageGroups.entries())\n    .map(([url, reports]) => {\n      // æŒ‰æ—¶é—´æˆ³æ’åºï¼Œæœ€æ–°çš„åœ¨å‰\n      const sortedReports = reports.sort((a, b) => b.timestamp - a.timestamp);\n\n      // è®¡ç®—å¹³å‡åˆ†æ•°\n      const averageScore =\n        reports.reduce((sum, report) => sum + report.score, 0) / reports.length;\n\n      // ç¡®ä¿æœ‰æœ€æ–°æŠ¥å‘Š\n      const latestReport = sortedReports[0];\n      if (!latestReport) {\n        throw new Error(`No reports found for URL: ${url}`);\n      }\n\n      return {\n        url,\n        reports: sortedReports,\n        averageScore: Number(averageScore.toFixed(1)),\n        latestReport,\n      };\n    })\n    .sort((a, b) => b.averageScore - a.averageScore); // æŒ‰å¹³å‡åˆ†æ•°é™åºæ’åˆ—\n};\n\n/**\n * å¯¼å‡ºæŠ¥å‘Šæ•°æ®\n */\nexport const exportReportData = (reports: DiagnosticReport[]): ExportData => {\n  return {\n    exportDate: new Date().toISOString(),\n    totalReports: reports.length,\n    reports: reports.map((report) => ({\n      timestamp: report.timestamp,\n      pageUrl: report.pageUrl,\n      score: report.score,\n      vitals: {\n        lcp: report.vitals.lcp,\n        fid: report.vitals.fid,\n        cls: report.vitals.cls,\n        fcp: report.vitals.fcp,\n        ttfb: report.vitals.ttfb,\n      },\n      issues: report.issues,\n      recommendations: report.recommendations,\n    })),\n  };\n};\n\n/**\n * ç”ŸæˆCSVæ ¼å¼çš„æŠ¥å‘Šæ•°æ®\n */\nexport const generateCSVData = (reports: DiagnosticReport[]): string => {\n  const headers = [\n    'Timestamp',\n    'Page URL',\n    'Score',\n    'LCP (ms)',\n    'FID (ms)',\n    'CLS',\n    'FCP (ms)',\n    'TTFB (ms)',\n    'Issues Count',\n    'Recommendations Count',\n  ];\n\n  const rows = reports.map((report) => [\n    new Date(report.timestamp).toISOString(),\n    report.pageUrl,\n    report.score.toString(),\n    report.vitals.lcp?.toString() || '',\n    report.vitals.fid?.toString() || '',\n    report.vitals.cls?.toString() || '',\n    report.vitals.fcp?.toString() || '',\n    report.vitals.ttfb?.toString() || '',\n    report.issues.length.toString(),\n    report.recommendations.length.toString(),\n  ]);\n\n  return [headers, ...rows]\n    .map((row) => row.map((cell) => `\"${cell}\"`).join(','))\n    .join('\\n');\n};\n\n/**\n * åˆ†ææ€§èƒ½è¶‹åŠ¿æ€»ä½“çŠ¶å†µ\n */\nexport const analyzeOverallTrend = (\n  reports: DiagnosticReport[],\n): 'improving' | 'declining' | 'stable' => {\n  if (reports.length < COUNT_PAIR) return 'stable';\n\n  const recentScores = reports.slice(OFFSET_NEGATIVE_MEDIUM).map((r) => r.score);\n  const previousScores = reports.slice(OFFSET_NEGATIVE_LARGE, OFFSET_NEGATIVE_MEDIUM).map((r) => r.score);\n\n  if (previousScores.length === 0) return 'stable';\n\n  const recentAvg =\n    recentScores.reduce((sum, score) => sum + score, 0) / recentScores.length;\n  const previousAvg =\n    previousScores.reduce((sum, score) => sum + score, 0) /\n    previousScores.length;\n\n  const change = recentAvg - previousAvg;\n  const threshold = 5; // 5åˆ†çš„å˜åŒ–é˜ˆå€¼\n\n  if (Math.abs(change) < threshold) return 'stable';\n  return change > 0 ? 'improving' : 'declining';\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-calculator.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":44,"column":24,"nodeType":"MemberExpression","endLine":44,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":48,"column":24,"nodeType":"MemberExpression","endLine":48,"endColumn":45},{"ruleId":"max-statements","severity":2,"message":"Arrow function has too many statements (21). Maximum allowed is 20.","line":95,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":139,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":178,"column":19,"nodeType":"MemberExpression","endLine":178,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":185,"column":6,"nodeType":"MemberExpression","endLine":185,"endColumn":20}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Web Vitals è¯Šæ–­è®¡ç®—å™¨\n * Web Vitals diagnostics calculator functions\n */\n\nimport type { DetailedWebVitals } from '@/lib/enhanced-web-vitals';\nimport { COUNT_PAIR, MAGIC_0_95, MAGIC_90, MAGIC_80, MAGIC_70, SECONDS_PER_MINUTE  } from '@/constants';\n\nimport {\n  WEB_VITALS_CONSTANTS,\n  type DiagnosticReport,\n  type PerformanceTrend,\n} from '@/hooks/web-vitals-diagnostics-constants';\n\n/**\n * è®¡ç®—æ€§èƒ½è¶‹åŠ¿\n */\nexport const calculatePerformanceTrends = (\n  historicalReports: DiagnosticReport[],\n): PerformanceTrend[] | null => {\n  if (historicalReports.length < WEB_VITALS_CONSTANTS.SCORE_DIVISOR)\n    return null;\n\n  const recentReports = historicalReports.slice(\n    -WEB_VITALS_CONSTANTS.TREND_THRESHOLD,\n  );\n  const previousReports = historicalReports.slice(\n    -WEB_VITALS_CONSTANTS.SCORE_MULTIPLIER_10,\n    -WEB_VITALS_CONSTANTS.TREND_THRESHOLD,\n  );\n\n  if (previousReports.length === 0) return null;\n\n  const metrics: (keyof DetailedWebVitals)[] = [\n    'lcp',\n    'fid',\n    'cls',\n    'fcp',\n    'ttfb',\n  ];\n\n  return metrics.map((metric) => {\n    const recentValues = recentReports\n      .map((report) => report.vitals[metric])\n      .filter((value): value is number => value !== undefined);\n\n    const previousValues = previousReports\n      .map((report) => report.vitals[metric])\n      .filter((value): value is number => value !== undefined);\n\n    if (recentValues.length === 0 || previousValues.length === 0) {\n      return {\n        metric,\n        trend: 'stable' as const,\n        change: 0,\n        recent: 0,\n        previous: 0,\n      };\n    }\n\n    const recentAvg =\n      recentValues.reduce((sum, val) => sum + val, 0) / recentValues.length;\n    const previousAvg =\n      previousValues.reduce((sum, val) => sum + val, 0) / previousValues.length;\n\n    const change = recentAvg - previousAvg;\n    const percentageChange = Math.abs(change / previousAvg) * 100;\n\n    let trend: 'improving' | 'declining' | 'stable';\n\n    // å¯¹äºCLSï¼Œå€¼è¶Šå°è¶Šå¥½ï¼›å¯¹äºå…¶ä»–æŒ‡æ ‡ï¼Œå€¼è¶Šå°ä¹Ÿè¶Šå¥½\n    if (percentageChange < WEB_VITALS_CONSTANTS.TREND_THRESHOLD) {\n      trend = 'stable';\n    } else if (change < 0) {\n      trend = 'improving'; // å€¼å‡å°‘æ˜¯æ”¹å–„\n    } else {\n      trend = 'declining'; // å€¼å¢åŠ æ˜¯æ¶åŒ–\n    }\n\n    return {\n      metric,\n      trend,\n      change: Number(change.toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES)),\n      recent: Number(recentAvg.toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES)),\n      previous: Number(\n        previousAvg.toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n      ),\n    };\n  });\n};\n\n/**\n * è®¡ç®—æ€§èƒ½åˆ†æ•°\n */\nexport const calculatePerformanceScore = (\n  vitals: DetailedWebVitals,\n): number => {\n  const PERFECT_SCORE = 100;\n  const LCP_THRESHOLD_GOOD = 1200;\n  const FID_THRESHOLD_GOOD = 50;\n  const CLS_THRESHOLD_GOOD = 0.05;\n\n  let score = PERFECT_SCORE;\n\n  // LCPè¯„åˆ† (æƒé‡40%)\n  if (vitals.lcp) {\n    if (vitals.lcp > WEB_VITALS_CONSTANTS.LCP_POOR) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_MAJOR;\n    } else if (vitals.lcp > WEB_VITALS_CONSTANTS.LCP_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_MINOR;\n    } else if (vitals.lcp > LCP_THRESHOLD_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_TINY;\n    }\n  }\n\n  // FIDè¯„åˆ† (æƒé‡30%)\n  if (vitals.fid) {\n    if (vitals.fid > WEB_VITALS_CONSTANTS.FID_POOR) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_MINOR;\n    } else if (vitals.fid > WEB_VITALS_CONSTANTS.FID_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_SMALL;\n    } else if (vitals.fid > FID_THRESHOLD_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_TINY;\n    }\n  }\n\n  // CLSè¯„åˆ† (æƒé‡30%)\n  if (vitals.cls) {\n    if (vitals.cls > WEB_VITALS_CONSTANTS.CLS_POOR) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_MINOR;\n    } else if (vitals.cls > WEB_VITALS_CONSTANTS.CLS_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_SMALL;\n    } else if (vitals.cls > CLS_THRESHOLD_GOOD) {\n      score -= WEB_VITALS_CONSTANTS.SCORE_DEDUCTION_TINY;\n    }\n  }\n\n  return Math.max(0, score);\n};\n\n/**\n * è®¡ç®—æŒ‡æ ‡å·®å¼‚ç™¾åˆ†æ¯”\n */\nexport const calculatePercentageChange = (\n  current: number,\n  previous: number,\n): number => {\n  if (previous === 0) return current > 0 ? 100 : 0;\n  return Number(\n    (((current - previous) / previous) * 100).toFixed(\n      WEB_VITALS_CONSTANTS.DECIMAL_PLACES,\n    ),\n  );\n};\n\n/**\n * è®¡ç®—å¹³å‡å€¼\n */\nexport const calculateAverage = (values: number[]): number => {\n  if (values.length === 0) return 0;\n  const sum = values.reduce((acc, val) => acc + val, 0);\n  return Number(\n    (sum / values.length).toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n  );\n};\n\n/**\n * è®¡ç®—ä¸­ä½æ•°\n */\nexport const calculateMedian = (values: number[]): number => {\n  if (values.length === 0) return 0;\n\n  const sorted = [...values].sort((a, b) => a - b);\n  const middle = Math.floor(sorted.length / COUNT_PAIR);\n\n  if (sorted.length % COUNT_PAIR === 0) {\n    const left = sorted[middle - 1] ?? 0;\n    const right = sorted[middle] ?? 0;\n    return Number(\n      ((left + right) / COUNT_PAIR).toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n    );\n  }\n\n  return Number(\n    (sorted[middle] ?? 0).toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n  );\n};\n\n/**\n * è®¡ç®—ç¬¬95ç™¾åˆ†ä½æ•°\n */\nexport const calculateP95 = (values: number[]): number => {\n  if (values.length === 0) return 0;\n\n  const sorted = [...values].sort((a, b) => a - b);\n  const index = Math.ceil(sorted.length * MAGIC_0_95) - 1;\n\n  return Number(\n    (sorted[Math.max(0, index)] ?? 0).toFixed(\n      WEB_VITALS_CONSTANTS.DECIMAL_PLACES,\n    ),\n  );\n};\n\n/**\n * è®¡ç®—æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡ä¿¡æ¯\n */\nexport const calculateMetricStats = (values: number[]) => {\n  if (values.length === 0) {\n    return {\n      average: 0,\n      median: 0,\n      p95: 0,\n      min: 0,\n      max: 0,\n      count: 0,\n    };\n  }\n\n  return {\n    average: calculateAverage(values),\n    median: calculateMedian(values),\n    p95: calculateP95(values),\n    min: Number(\n      Math.min(...values).toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n    ),\n    max: Number(\n      Math.max(...values).toFixed(WEB_VITALS_CONSTANTS.DECIMAL_PLACES),\n    ),\n    count: values.length,\n  };\n};\n\n/**\n * è®¡ç®—æ€§èƒ½ç­‰çº§\n */\nexport const calculatePerformanceGrade = (score: number): string => {\n  if (score >= MAGIC_90) return 'A';\n  if (score >= MAGIC_80) return 'B';\n  if (score >= MAGIC_70) return 'C';\n  if (score >= SECONDS_PER_MINUTE) return 'D';\n  return 'F';\n};\n\n/**\n * è®¡ç®—æ”¹å–„æ½œåŠ›\n */\nexport const calculateImprovementPotential = (\n  vitals: DetailedWebVitals,\n): number => {\n  let potential = 0;\n\n  if (vitals.lcp && vitals.lcp > WEB_VITALS_CONSTANTS.LCP_GOOD) {\n    potential += WEB_VITALS_CONSTANTS.SCORE_WEIGHT_LCP;\n  }\n\n  if (vitals.fid && vitals.fid > WEB_VITALS_CONSTANTS.FID_GOOD) {\n    potential += WEB_VITALS_CONSTANTS.SCORE_WEIGHT_FID;\n  }\n\n  if (vitals.cls && vitals.cls > WEB_VITALS_CONSTANTS.CLS_GOOD) {\n    potential += WEB_VITALS_CONSTANTS.SCORE_WEIGHT_CLS;\n  }\n\n  return potential;\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-export.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'generateInsights' has too many statements (25). Maximum allowed is 20.","line":189,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":255,"endColumn":2}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback } from 'react';\nimport { ANIMATION_DURATION_NORMAL, COUNT_FIVE, COUNT_TRIPLE, MAGIC_0_1, MAGIC_0_25, MAGIC_2500, MAGIC_4000, MAGIC_75, MAGIC_90, PERCENTAGE_HALF } from '@/constants';\n\nimport { TEST_COUNT_CONSTANTS } from '@/constants/test-constants';\nimport type {\n  DiagnosticReport,\n  ExportFormat,\n  WebVitalsDiagnosticsState,\n  WebVitalsReportExport,\n} from '@/hooks/web-vitals-diagnostics-types';\n\n/**\n * Web Vitals æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½\n */\n\n/**\n * å¯¼å‡ºJSONæ ¼å¼æŠ¥å‘Š\n */\nexport function exportJsonReport(data: Record<string, unknown>): void {\n  const blob = new Blob(\n    [JSON.stringify(data, null, TEST_COUNT_CONSTANTS.SMALL)],\n    { type: 'application/json' },\n  );\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `web-vitals-report-${Date.now()}.json`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * å¯¼å‡ºCSVæ ¼å¼æŠ¥å‘Š\n */\nexport function exportCsvReport(historicalReports: DiagnosticReport[]): void {\n  const csvHeaders = [\n    'Timestamp',\n    'URL',\n    'CLS',\n    'LCP',\n    'FID',\n    'FCP',\n    'TTFB',\n    'Performance Score',\n  ];\n\n  const csvRows = historicalReports.map((report) => [\n    new Date(report.timestamp).toISOString(),\n    report.pageUrl,\n    report.vitals.cls.toFixed(COUNT_TRIPLE),\n    report.vitals.lcp.toFixed(0),\n    report.vitals.fid.toFixed(0),\n    report.vitals.fcp.toFixed(0),\n    report.vitals.ttfb.toFixed(0),\n    report.score?.toFixed(1) || 'N/A',\n  ]);\n\n  const csvContent = [csvHeaders, ...csvRows]\n    .map((row) => row.map((cell) => `\"${cell}\"`).join(','))\n    .join('\\n');\n\n  const blob = new Blob([csvContent], { type: 'text/csv' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `web-vitals-report-${Date.now()}.csv`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * æŠ¥å‘Šå¯¼å‡ºé€»è¾‘Hook\n */\nexport function useReportExport(\n  state: WebVitalsDiagnosticsState,\n  getPerformanceTrends: () => unknown,\n  getPageComparison: () => unknown,\n): WebVitalsReportExport {\n  const exportReport = useCallback(\n    (format: ExportFormat = 'json') => {\n      if (format === 'csv') {\n        exportCsvReport(state.historicalReports);\n      } else {\n        const exportData = {\n          currentReport: state.currentReport,\n          historicalReports: state.historicalReports,\n          performanceTrends: getPerformanceTrends(),\n          pageComparison: getPageComparison(),\n          exportTimestamp: Date.now(),\n          exportVersion: '1.0.0',\n        };\n        exportJsonReport(exportData);\n      }\n    },\n    [\n      state.currentReport,\n      state.historicalReports,\n      getPerformanceTrends,\n      getPageComparison,\n    ],\n  );\n\n  return { exportReport };\n}\n\n/**\n * ç”Ÿæˆè¯¦ç»†çš„æŠ¥å‘Šæ•°æ®\n */\nexport function generateDetailedReport(\n  state: WebVitalsDiagnosticsState,\n  performanceTrends: unknown,\n  pageComparison: unknown,\n): Record<string, unknown> {\n  return {\n    summary: {\n      totalReports: state.historicalReports.length,\n      latestReport: state.currentReport,\n      averageMetrics: calculateAverageMetrics(state.historicalReports),\n      exportTimestamp: Date.now(),\n    },\n    currentReport: state.currentReport,\n    historicalReports: state.historicalReports,\n    analysis: {\n      performanceTrends,\n      pageComparison,\n      insights: generateInsights(state.historicalReports),\n    },\n    metadata: {\n      version: '1.0.0',\n      userAgent:\n        typeof navigator !== 'undefined' ? navigator.userAgent : 'Unknown',\n      url: typeof window !== 'undefined' ? window.location.href : 'Unknown',\n    },\n  };\n}\n\n/**\n * è®¡ç®—å¹³å‡æŒ‡æ ‡\n */\nfunction calculateAverageMetrics(reports: DiagnosticReport[]): {\n  cls: number;\n  lcp: number;\n  fid: number;\n  fcp: number;\n  ttfb: number;\n  performanceScore: number;\n} {\n  if (reports.length === 0) {\n    return {\n      cls: 0,\n      lcp: 0,\n      fid: 0,\n      fcp: 0,\n      ttfb: 0,\n      performanceScore: 0,\n    };\n  }\n\n  const totals = reports.reduce(\n    (acc, report) => ({\n      cls: acc.cls + report.vitals.cls,\n      lcp: acc.lcp + report.vitals.lcp,\n      fid: acc.fid + report.vitals.fid,\n      fcp: acc.fcp + report.vitals.fcp,\n      ttfb: acc.ttfb + report.vitals.ttfb,\n      performanceScore: acc.performanceScore + (report.score || 0),\n    }),\n    { cls: 0, lcp: 0, fid: 0, fcp: 0, ttfb: 0, performanceScore: 0 },\n  );\n\n  const count = reports.length;\n  return {\n    cls: totals.cls / count,\n    lcp: totals.lcp / count,\n    fid: totals.fid / count,\n    fcp: totals.fcp / count,\n    ttfb: totals.ttfb / count,\n    performanceScore: totals.performanceScore / count,\n  };\n}\n\n/**\n * ç”Ÿæˆæ€§èƒ½æ´å¯Ÿ\n */\nfunction generateInsights(reports: DiagnosticReport[]): string[] {\n  const insights: string[] = [];\n\n  if (reports.length === 0) {\n    return ['No data available for analysis'];\n  }\n\n  const averages = calculateAverageMetrics(reports);\n\n  // CLS åˆ†æ\n  if (averages.cls > MAGIC_0_25) {\n    insights.push(\n      'High Cumulative Layout Shift detected. Consider optimizing layout stability.',\n    );\n  } else if (averages.cls > MAGIC_0_1) {\n    insights.push(\n      'Moderate Cumulative Layout Shift. Room for improvement in layout stability.',\n    );\n  }\n\n  // LCP åˆ†æ\n  if (averages.lcp > MAGIC_4000) {\n    insights.push(\n      'Slow Largest Contentful Paint. Consider optimizing loading performance.',\n    );\n  } else if (averages.lcp > MAGIC_2500) {\n    insights.push(\n      'Moderate Largest Contentful Paint. Some optimization opportunities exist.',\n    );\n  }\n\n  // FID åˆ†æ\n  if (averages.fid > ANIMATION_DURATION_NORMAL) {\n    insights.push(\n      'High First Input Delay. Consider optimizing JavaScript execution.',\n    );\n  } else if (averages.fid > 100) {\n    insights.push(\n      'Moderate First Input Delay. Some interactivity improvements possible.',\n    );\n  }\n\n  // è¶‹åŠ¿åˆ†æ\n  if (reports.length >= COUNT_FIVE) {\n    const recent = reports.slice(-COUNT_FIVE);\n    const older = reports.slice(0, -COUNT_FIVE);\n\n    if (older.length > 0) {\n      const recentAvg = calculateAverageMetrics(recent);\n      const olderAvg = calculateAverageMetrics(older);\n\n      if (recentAvg.performanceScore > olderAvg.performanceScore) {\n        insights.push('Performance is improving over time.');\n      } else if (recentAvg.performanceScore < olderAvg.performanceScore) {\n        insights.push(\n          'Performance is declining over time. Consider investigating recent changes.',\n        );\n      }\n    }\n  }\n\n  if (insights.length === 0) {\n    insights.push('Performance metrics are within acceptable ranges.');\n  }\n\n  return insights;\n}\n\n/**\n * å¯¼å‡ºä¸ºExcelæ ¼å¼ï¼ˆXLSXï¼‰\n */\nexport function exportExcelReport(historicalReports: DiagnosticReport[]): void {\n  // åˆ›å»ºç®€åŒ–çš„Excelæ ¼å¼ï¼ˆå®é™…ä¸Šæ˜¯CSVï¼Œä½†å¯ä»¥è¢«Excelæ‰“å¼€ï¼‰\n  const headers = [\n    'Date',\n    'Time',\n    'URL',\n    'CLS',\n    'LCP (ms)',\n    'FID (ms)',\n    'FCP (ms)',\n    'TTFB (ms)',\n    'Performance Score',\n    'Status',\n  ];\n\n  const rows = historicalReports.map((report) => {\n    const date = new Date(report.timestamp);\n    const status = getPerformanceStatus(report);\n\n    return [\n      date.toLocaleDateString(),\n      date.toLocaleTimeString(),\n      report.pageUrl,\n      report.vitals.cls.toFixed(COUNT_TRIPLE),\n      report.vitals.lcp.toFixed(0),\n      report.vitals.fid.toFixed(0),\n      report.vitals.fcp.toFixed(0),\n      report.vitals.ttfb.toFixed(0),\n      report.score?.toFixed(1) || 'N/A',\n      status,\n    ];\n  });\n\n  const csvContent = [headers, ...rows]\n    .map((row) => row.map((cell) => `\"${cell}\"`).join(','))\n    .join('\\n');\n\n  const blob = new Blob([csvContent], { type: 'application/vnd.ms-excel' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `web-vitals-report-${Date.now()}.xlsx`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * è·å–æ€§èƒ½çŠ¶æ€\n */\nfunction getPerformanceStatus(report: DiagnosticReport): string {\n  const score = report.score || 0;\n\n  if (score >= MAGIC_90) return 'Excellent';\n  if (score >= MAGIC_75) return 'Good';\n  if (score >= PERCENTAGE_HALF) return 'Needs Improvement';\n  return 'Poor';\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-persistence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/hooks/web-vitals-diagnostics-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/__tests__/enhanced-request.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/__tests__/request.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/__tests__/routing.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/enhanced-request.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'createEnhancedResponse' has too many parameters (4). Maximum allowed is 3.","line":63,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":63,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { routing } from '@/i18n/routing';\nimport { COUNT_FIVE, ONE } from '@/constants';\n\nimport {\n  getCachedMessages,\n  I18nPerformanceMonitor,\n  TranslationCache,\n} from '@/lib/i18n-performance';\nimport { getRequestConfig } from 'next-intl/server';\n\n// é‡ç”¨ request.ts ä¸­çš„è¾…åŠ©å‡½æ•°\nfunction getEnhancedFormats(locale: string) {\n  return {\n    dateTime: {\n      short: {\n        day: 'numeric' as const,\n        month: 'short' as const,\n        year: 'numeric' as const,\n      },\n      long: {\n        day: 'numeric' as const,\n        month: 'long' as const,\n        year: 'numeric' as const,\n        weekday: 'long' as const,\n      },\n    },\n    number: {\n      precise: {\n        maximumFractionDigits: COUNT_FIVE,\n      },\n      currency: {\n        style: 'currency' as const,\n        currency: locale === 'zh' ? 'CNY' : 'USD',\n      },\n      percentage: {\n        style: 'percent' as const,\n        minimumFractionDigits: ONE,\n      },\n    },\n    list: {\n      enumeration: {\n        style: 'long' as const,\n        type: 'conjunction' as const,\n      },\n    },\n  };\n}\n\nfunction handleEnhancedCacheMetrics(locale: string, loadTime: number) {\n  I18nPerformanceMonitor.recordLoadTime(loadTime);\n\n  const cache = TranslationCache.getInstance();\n  const cached = cache.get(`messages-${locale}`);\n  if (cached) {\n    I18nPerformanceMonitor.recordCacheHit();\n  } else {\n    I18nPerformanceMonitor.recordCacheMiss();\n  }\n\n  return Boolean(cached);\n}\n\nfunction createEnhancedResponse(\n  locale: string,\n  messages: Record<string, unknown>,\n  loadTime: number,\n  cacheUsed: boolean,\n) {\n  return {\n    locale,\n    messages,\n    timeZone: locale === 'zh' ? 'Asia/Shanghai' : 'UTC',\n    now: new Date(),\n    formats: getEnhancedFormats(locale),\n    metadata: {\n      loadTime,\n      cacheUsed,\n      timestamp: Date.now(),\n    },\n  };\n}\n\nfunction createEnhancedFallbackResponse(locale: string, startTime: number) {\n  return {\n    locale,\n    messages: {},\n    timeZone: locale === 'zh' ? 'Asia/Shanghai' : 'UTC',\n    now: new Date(),\n    formats: getEnhancedFormats(locale),\n    metadata: {\n      loadTime: performance.now() - startTime,\n      cacheUsed: false,\n      error: true,\n      timestamp: Date.now(),\n    },\n  };\n}\n\nexport default getRequestConfig(async ({ requestLocale }) => {\n  const startTime = performance.now();\n  let locale = await requestLocale;\n\n  if (!locale || !routing.locales.includes(locale as 'en' | 'zh')) {\n    locale = routing.defaultLocale;\n  }\n\n  try {\n    const messages = await getCachedMessages(locale);\n    const loadTime = performance.now() - startTime;\n    const cacheUsed = handleEnhancedCacheMetrics(locale, loadTime);\n\n    return createEnhancedResponse(locale, messages, loadTime, cacheUsed);\n  } catch {\n    I18nPerformanceMonitor.recordError();\n    return createEnhancedFallbackResponse(locale, startTime);\n  }\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/request.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'createSuccessResponse' has too many parameters (4). Maximum allowed is 3.","line":66,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":66,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { routing } from '@/i18n/routing';\nimport { COUNT_FIVE, ONE } from '@/constants';\n\nimport {\n  getCachedMessages,\n  I18nPerformanceMonitor,\n  TranslationCache,\n} from '@/lib/i18n-performance';\nimport { getRequestConfig } from 'next-intl/server';\nimport { headers } from 'next/headers';\n\n// è¾…åŠ©å‡½æ•°ï¼šè·å–æ ¼å¼é…ç½®\nfunction getFormats(locale: string) {\n  return {\n    dateTime: {\n      short: {\n        day: 'numeric' as const,\n        month: 'short' as const,\n        year: 'numeric' as const,\n      },\n      long: {\n        day: 'numeric' as const,\n        month: 'long' as const,\n        year: 'numeric' as const,\n        weekday: 'long' as const,\n      },\n    },\n    number: {\n      precise: {\n        maximumFractionDigits: COUNT_FIVE,\n      },\n      currency: {\n        style: 'currency' as const,\n        currency: locale === 'zh' ? 'CNY' : 'USD',\n      },\n      percentage: {\n        style: 'percent' as const,\n        minimumFractionDigits: ONE,\n      },\n    },\n    list: {\n      enumeration: {\n        style: 'long' as const,\n        type: 'conjunction' as const,\n      },\n    },\n  };\n}\n\n// è¾…åŠ©å‡½æ•°ï¼šå¤„ç†ç¼“å­˜æ€§èƒ½ç›‘æ§\nfunction handleCacheMetrics(locale: string, loadTime: number) {\n  I18nPerformanceMonitor.recordLoadTime(loadTime);\n\n  const cache = TranslationCache.getInstance();\n  const cached = cache.get(`messages-${locale}`);\n  if (cached) {\n    I18nPerformanceMonitor.recordCacheHit();\n  } else {\n    I18nPerformanceMonitor.recordCacheMiss();\n  }\n\n  return Boolean(cached);\n}\n\n// è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºæˆåŠŸå“åº”\nfunction createSuccessResponse(\n  locale: string,\n  messages: Record<string, unknown>,\n  loadTime: number,\n  cacheUsed: boolean,\n) {\n  return {\n    locale,\n    messages,\n    timeZone: locale === 'zh' ? 'Asia/Shanghai' : 'UTC',\n    now: new Date(),\n    formats: getFormats(locale),\n    strictMessageTypeSafety: true,\n    metadata: {\n      loadTime,\n      cacheUsed,\n      timestamp: Date.now(),\n    },\n  };\n}\n\n// è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºé”™è¯¯å›é€€å“åº”\nasync function createFallbackResponse(locale: string, startTime: number) {\n  return {\n    locale,\n    messages: (await import(`../../messages/${locale}.json`)).default,\n    timeZone: locale === 'zh' ? 'Asia/Shanghai' : 'UTC',\n    now: new Date(),\n    formats: getFormats(locale),\n    metadata: {\n      loadTime: performance.now() - startTime,\n      cacheUsed: false,\n      error: true,\n      timestamp: Date.now(),\n    },\n  };\n}\n\nexport default getRequestConfig(async ({ requestLocale }) => {\n  const startTime = performance.now();\n  let locale = await requestLocale;\n\n  // è·å–æ™ºèƒ½æ£€æµ‹ä¿¡æ¯\n  const headersList = await headers();\n  const detectedLocale = headersList.get('x-detected-locale');\n  const detectionSource = headersList.get('x-detection-source');\n  const detectionConfidence = headersList.get('x-detection-confidence');\n\n  // å¦‚æœæ²¡æœ‰æ˜ç¡®çš„è¯­è¨€åå¥½ï¼Œä½¿ç”¨æ™ºèƒ½æ£€æµ‹ç»“æœ\n  if (!locale || !routing.locales.includes(locale as 'en' | 'zh')) {\n    if (\n      detectedLocale &&\n      routing.locales.includes(detectedLocale as 'en' | 'zh')\n    ) {\n      locale = detectedLocale;\n    } else {\n      locale = routing.defaultLocale;\n    }\n  }\n\n  try {\n    const messages = await getCachedMessages(locale);\n    const loadTime = performance.now() - startTime;\n    const cacheUsed = handleCacheMetrics(locale, loadTime);\n\n    // åˆ›å»ºå¢å¼ºçš„å“åº”ï¼ŒåŒ…å«æ£€æµ‹ä¿¡æ¯\n    const response = createSuccessResponse(\n      locale,\n      messages,\n      loadTime,\n      cacheUsed,\n    );\n\n    // æ·»åŠ æ™ºèƒ½æ£€æµ‹å…ƒæ•°æ®\n    if (detectedLocale && detectionSource && detectionConfidence) {\n      (\n        response as typeof response & { metadata: Record<string, unknown> }\n      ).metadata = {\n        ...response.metadata,\n        smartDetection: {\n          detectedLocale,\n          source: detectionSource,\n          confidence: parseFloat(detectionConfidence),\n          applied: locale === detectedLocale,\n        },\n      };\n    }\n\n    return response;\n  } catch {\n    I18nPerformanceMonitor.recordError();\n    return createFallbackResponse(locale, startTime);\n  }\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/routing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/i18n/test-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/accessibility-manager-core.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/accessibility-manager-exports.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/accessibility-manager-static-methods.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/accessibility/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-configuration.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":70,"column":5,"nodeType":"VariableDeclaration","endLine":70,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Airtable Service - Configuration Tests\n *\n * ä¸“é—¨æµ‹è¯•é…ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - ç¯å¢ƒå˜é‡é…ç½®\n * - æœåŠ¡åˆå§‹åŒ–\n * - é…ç½®éªŒè¯\n * - é»˜è®¤å€¼å¤„ç†\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  AirtableServicePrivate,\n  DynamicImportModule,\n} from '@/types/test-types';\n\n// Mock Airtable\nconst mockCreate = vi.fn();\nconst mockSelect = vi.fn();\nconst mockUpdate = vi.fn();\nconst mockDestroy = vi.fn();\nconst mockTable = vi.fn().mockReturnValue({\n  create: mockCreate,\n  select: mockSelect,\n  update: mockUpdate,\n  destroy: mockDestroy,\n});\nconst mockBase = vi.fn().mockReturnValue({\n  table: mockTable,\n});\nconst mockConfigure = vi.fn();\n\nvi.mock('airtable', () => ({\n  default: {\n    configure: mockConfigure,\n    base: mockBase,\n  },\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', async () => {\n  const mockEnv = await import('./mocks/airtable-env');\n  return mockEnv;\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/airtable-validations');\n  return mockValidations;\n});\n\ndescribe('Airtable Service - Configuration Tests', () => {\n  let AirtableServiceClass: any;\n\n  beforeEach(async () => {\n    // Clear mocks but preserve the mock functions\n    mockCreate.mockReset();\n    mockSelect.mockReset();\n    mockUpdate.mockReset();\n    mockDestroy.mockReset();\n    mockTable.mockClear();\n    mockBase.mockClear();\n    mockConfigure.mockClear();\n\n    // Dynamically import the module to ensure fresh instance\n    const module = (await import('../airtable')) as DynamicImportModule;\n    AirtableServiceClass = module.AirtableService;\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('ç¯å¢ƒå˜é‡é…ç½®', () => {\n    it('should configure Airtable with valid environment variables', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n    });\n\n    it('should use default table name when not provided', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          // Missing AIRTABLE_TABLE_NAME\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n    });\n\n    it('should handle missing API key gracefully', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          // Missing AIRTABLE_API_KEY\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service.isReady()).toBe(false);\n    });\n\n    it('should handle missing base ID gracefully', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          // Missing AIRTABLE_BASE_ID\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service.isReady()).toBe(false);\n    });\n\n    it('should handle empty environment variables', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: '',\n          AIRTABLE_BASE_ID: '',\n          AIRTABLE_TABLE_NAME: '',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service.isReady()).toBe(false);\n    });\n  });\n\n  describe('æœåŠ¡åˆå§‹åŒ–', () => {\n    it('should initialize service with proper configuration', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service).toBeInstanceOf(ServiceClass);\n      expect(mockConfigure).toHaveBeenCalledWith({\n        apiKey: 'test-api-key',\n      });\n    });\n\n    it('should create base instance correctly', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      // Access private property for testing\n      const privateService = service as unknown as AirtableServicePrivate;\n      expect(privateService.base).toBeDefined();\n    });\n\n    it('should handle initialization errors gracefully', async () => {\n      // Mock Airtable to throw error during configuration\n      mockConfigure.mockImplementation(() => {\n        throw new Error('Configuration failed');\n      });\n\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      expect(() => {\n        const { AirtableService: ServiceClass } = require('../airtable');\n        new ServiceClass();\n      }).not.toThrow();\n    });\n  });\n\n  describe('é…ç½®éªŒè¯', () => {\n    it('should validate required configuration fields', () => {\n      const service = new AirtableServiceClass();\n\n      // Test with missing configuration\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      expect(service.isReady()).toBe(false);\n\n      // Test with valid configuration\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should check base instance availability', () => {\n      const service = new AirtableServiceClass();\n\n      // Test with null base\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = null;\n      expect(service.isReady()).toBe(false);\n\n      // Test with valid base\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should validate table instance', () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      expect(service.isReady()).toBe(true);\n      expect(mockTable).toBeDefined();\n    });\n  });\n\n  describe('é»˜è®¤å€¼å¤„ç†', () => {\n    it('should use default table name when not specified', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          // AIRTABLE_TABLE_NAME not provided\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n      // Should use default table name\n    });\n\n    it('should handle undefined environment variables', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: undefined,\n          AIRTABLE_BASE_ID: undefined,\n          AIRTABLE_TABLE_NAME: undefined,\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service.isReady()).toBe(false);\n    });\n\n    it('should handle null environment variables', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: null,\n          AIRTABLE_BASE_ID: null,\n          AIRTABLE_TABLE_NAME: null,\n        },\n      }));\n\n      const { AirtableService: ServiceClass } = await import('../airtable');\n      const service = new ServiceClass();\n\n      expect(service.isReady()).toBe(false);\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†', () => {\n    it('should handle configuration errors gracefully', () => {\n      mockConfigure.mockImplementation(() => {\n        throw new Error('Invalid API key');\n      });\n\n      expect(() => {\n        new AirtableServiceClass();\n      }).not.toThrow();\n    });\n\n    it('should handle base creation errors', () => {\n      mockBase.mockImplementation(() => {\n        throw new Error('Invalid base ID');\n      });\n\n      expect(() => {\n        new AirtableServiceClass();\n      }).not.toThrow();\n    });\n\n    it('should handle table creation errors', () => {\n      mockTable.mockImplementation(() => {\n        throw new Error('Invalid table name');\n      });\n\n      expect(() => {\n        new AirtableServiceClass();\n      }).not.toThrow();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-create-operations.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":70,"column":5,"nodeType":"VariableDeclaration","endLine":70,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Airtable Service - Create Operations Tests\n *\n * ä¸“é—¨æµ‹è¯•åˆ›å»ºæ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - åˆ›å»ºè”ç³»äººè®°å½•\n * - å¯é€‰å­—æ®µå¤„ç†\n * - é”™è¯¯å¤„ç†\n * - ç©ºæ•°æ®å¤„ç†\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  AirtableServicePrivate,\n  DynamicImportModule,\n} from '@/types/test-types';\n\n// Mock Airtable\nconst mockCreate = vi.fn();\nconst mockSelect = vi.fn();\nconst mockUpdate = vi.fn();\nconst mockDestroy = vi.fn();\nconst mockTable = vi.fn().mockReturnValue({\n  create: mockCreate,\n  select: mockSelect,\n  update: mockUpdate,\n  destroy: mockDestroy,\n});\nconst mockBase = vi.fn().mockReturnValue({\n  table: mockTable,\n});\nconst mockConfigure = vi.fn();\n\nvi.mock('airtable', () => ({\n  default: {\n    configure: mockConfigure,\n    base: mockBase,\n  },\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', async () => {\n  const mockEnv = await import('./mocks/airtable-env');\n  return mockEnv;\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/airtable-validations');\n  return mockValidations;\n});\n\ndescribe('Airtable Service - Create Operations Tests', () => {\n  let AirtableServiceClass: any;\n\n  beforeEach(async () => {\n    // Clear mocks but preserve the mock functions\n    mockCreate.mockReset();\n    mockSelect.mockReset();\n    mockUpdate.mockReset();\n    mockDestroy.mockReset();\n    mockTable.mockClear();\n    mockBase.mockClear();\n    mockConfigure.mockClear();\n\n    // Dynamically import the module to ensure fresh instance\n    const module = (await import('../airtable')) as DynamicImportModule;\n    AirtableServiceClass = module.AirtableService;\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  const validFormData = {\n    firstName: 'John',\n    lastName: 'Doe',\n    email: 'john.doe@example.com',\n    company: 'Test Company',\n    message: 'This is a test message',\n    acceptPrivacy: true,\n    website: '',\n  };\n\n  describe('åˆ›å»ºè”ç³»äººè®°å½•', () => {\n    it('should create contact record successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      // Mock successful creation\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: {\n            'First Name': 'John',\n            'Last Name': 'Doe',\n            'Email': 'john.doe@example.com',\n            'Company': 'Test Company',\n            'Message': 'This is a test message',\n            'Accept Privacy': true,\n          },\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.createContact(validFormData);\n\n      expect(result).toEqual({ id: 'rec123456' });\n      expect(mockCreate).toHaveBeenCalledWith([\n        {\n          fields: {\n            'First Name': 'John',\n            'Last Name': 'Doe',\n            'Email': 'john.doe@example.com',\n            'Company': 'Test Company',\n            'Message': 'This is a test message',\n            'Accept Privacy': true,\n            'Website': '',\n          },\n        },\n      ]);\n    });\n\n    it('should include optional fields when provided', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const formDataWithOptionals = {\n        ...validFormData,\n        phone: '+1234567890',\n        website: 'https://example.com',\n      };\n\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: formDataWithOptionals,\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      await service.createContact(formDataWithOptionals);\n\n      expect(mockCreate).toHaveBeenCalledWith([\n        {\n          fields: {\n            'First Name': 'John',\n            'Last Name': 'Doe',\n            'Email': 'john.doe@example.com',\n            'Company': 'Test Company',\n            'Message': 'This is a test message',\n            'Accept Privacy': true,\n            'Phone': '+1234567890',\n            'Website': 'https://example.com',\n          },\n        },\n      ]);\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as AirtableServicePrivate).isConfigured = false;\n      (service as AirtableServicePrivate).base = null;\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n\n    it('should handle creation errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockCreate.mockRejectedValue(new Error('Creation failed'));\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Creation failed',\n      );\n    });\n\n    it('should handle empty form data', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const emptyFormData = {\n        firstName: '',\n        lastName: '',\n        email: '',\n        company: '',\n        message: '',\n        acceptPrivacy: false,\n        website: '',\n      };\n\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: emptyFormData,\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.createContact(emptyFormData);\n\n      expect(result).toEqual({ id: 'rec123456' });\n    });\n\n    it('should handle special characters in form data', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const specialFormData = {\n        firstName: 'JosÃ©',\n        lastName: 'GarcÃ­a-LÃ³pez',\n        email: 'josÃ©@example.com',\n        company: 'Test & Co.',\n        message: 'Message with \"quotes\" and special chars: @#$%',\n        acceptPrivacy: true,\n        website: 'https://example.com/path?param=value&other=test',\n      };\n\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: specialFormData,\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.createContact(specialFormData);\n\n      expect(result).toEqual({ id: 'rec123456' });\n      expect(mockCreate).toHaveBeenCalledWith([\n        {\n          fields: {\n            'First Name': 'JosÃ©',\n            'Last Name': 'GarcÃ­a-LÃ³pez',\n            'Email': 'josÃ©@example.com',\n            'Company': 'Test & Co.',\n            'Message': 'Message with \"quotes\" and special chars: @#$%',\n            'Accept Privacy': true,\n            'Website': 'https://example.com/path?param=value&other=test',\n          },\n        },\n      ]);\n    });\n\n    it('should handle long text content', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const longMessage = 'A'.repeat(1000); // Very long message\n      const longFormData = {\n        ...validFormData,\n        message: longMessage,\n      };\n\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: longFormData,\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.createContact(longFormData);\n\n      expect(result).toEqual({ id: 'rec123456' });\n      expect(mockCreate).toHaveBeenCalledWith([\n        {\n          fields: {\n            'First Name': 'John',\n            'Last Name': 'Doe',\n            'Email': 'john.doe@example.com',\n            'Company': 'Test Company',\n            'Message': longMessage,\n            'Accept Privacy': true,\n            'Website': '',\n          },\n        },\n      ]);\n    });\n\n    it('should handle network timeout errors', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const timeoutError = new Error('Request timeout');\n      timeoutError.name = 'TimeoutError';\n      mockCreate.mockRejectedValue(timeoutError);\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Request timeout',\n      );\n    });\n\n    it('should handle rate limiting errors', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const rateLimitError = new Error('Rate limit exceeded');\n      rateLimitError.name = 'RateLimitError';\n      mockCreate.mockRejectedValue(rateLimitError);\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Rate limit exceeded',\n      );\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-error-handling.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-operations.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":73,"column":5,"nodeType":"VariableDeclaration","endLine":73,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Airtable Service - Main Operations Tests\n *\n * ä¸»è¦æ“ä½œé›†æˆæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š\n * - æ ¸å¿ƒæœåŠ¡å¯¼å‡ºéªŒè¯\n * - åŸºæœ¬æ“ä½œé›†æˆæµ‹è¯•\n * - é”™è¯¯å¤„ç†éªŒè¯\n *\n * è¯¦ç»†æµ‹è¯•è¯·å‚è€ƒï¼š\n * - airtable-crud.test.ts - CRUDæ“ä½œä¸“é—¨æµ‹è¯•\n * - airtable-configuration.test.ts - é…ç½®åŠŸèƒ½æµ‹è¯•\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  AirtableServicePrivate,\n  DynamicImportModule,\n} from '@/types/test-types';\n\n// Mock Airtable\nconst mockCreate = vi.fn();\nconst mockSelect = vi.fn();\nconst mockUpdate = vi.fn();\nconst mockDestroy = vi.fn();\nconst mockTable = vi.fn().mockReturnValue({\n  create: mockCreate,\n  select: mockSelect,\n  update: mockUpdate,\n  destroy: mockDestroy,\n});\nconst mockBase = vi.fn().mockReturnValue({\n  table: mockTable,\n});\nconst mockConfigure = vi.fn();\n\nvi.mock('airtable', () => ({\n  default: {\n    configure: mockConfigure,\n    base: mockBase,\n  },\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', async () => {\n  const mockEnv = await import('./mocks/airtable-env');\n  return mockEnv;\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/airtable-validations');\n  return mockValidations;\n});\n\ndescribe('Airtable Service - Main Operations Tests', () => {\n  let AirtableServiceClass: any;\n\n  beforeEach(async () => {\n    // Clear mocks but preserve the mock functions\n    mockCreate.mockReset();\n    mockSelect.mockReset();\n    mockUpdate.mockReset();\n    mockDestroy.mockReset();\n    mockTable.mockClear();\n    mockBase.mockClear();\n    mockConfigure.mockClear();\n\n    // Dynamically import the module to ensure fresh instance\n    const module = (await import('../airtable')) as DynamicImportModule;\n    AirtableServiceClass = module.AirtableService;\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  const validFormData = {\n    firstName: 'John',\n    lastName: 'Doe',\n    email: 'john.doe@example.com',\n    company: 'Test Company',\n    message: 'This is a test message',\n    acceptPrivacy: true,\n    website: '',\n  };\n\n  describe('æ ¸å¿ƒæœåŠ¡å¯¼å‡ºéªŒè¯', () => {\n    it('should export AirtableService class', () => {\n      expect(AirtableService).toBeDefined();\n      expect(typeof AirtableService).toBe('function');\n    });\n\n    it('should create AirtableService instance', () => {\n      const service = new AirtableServiceClass();\n      expect(service).toBeInstanceOf(AirtableService);\n    });\n  });\n\n  describe('åŸºæœ¬æ“ä½œé›†æˆæµ‹è¯•', () => {\n    it('should handle basic contact creation', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      // Mock successful creation\n      mockCreate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: validFormData,\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.createContact(validFormData);\n\n      expect(result).toEqual({ id: 'rec123456' });\n      expect(mockCreate).toHaveBeenCalled();\n    });\n\n    it('should handle basic contact retrieval', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const mockRecords = [\n        {\n          id: 'rec123456',\n          fields: { 'First Name': 'John', 'Last Name': 'Doe' },\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ];\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue(mockRecords),\n      });\n\n      const result = await service.getContacts();\n\n      expect(result).toEqual(mockRecords);\n      expect(mockSelect).toHaveBeenCalled();\n    });\n\n    it('should handle contact status updates', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockUpdate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: { Status: 'Contacted' },\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ]);\n\n      const result = await service.updateContactStatus(\n        'rec123456',\n        'Contacted',\n      );\n\n      expect(result).toEqual({ id: 'rec123456' });\n      expect(mockUpdate).toHaveBeenCalled();\n    });\n\n    it('should handle contact deletion', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockDestroy.mockResolvedValue([{ id: 'rec123456', deleted: true }]);\n\n      const result = await service.deleteContact('rec123456');\n\n      expect(result).toEqual({ id: 'rec123456', deleted: true });\n      expect(mockDestroy).toHaveBeenCalledWith(['rec123456']);\n    });\n\n    it('should check service readiness correctly', () => {\n      const service = new AirtableServiceClass();\n\n      // Test with missing configuration\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      expect(service.isReady()).toBe(false);\n\n      // Test with valid configuration\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n      expect(service.isReady()).toBe(true);\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†éªŒè¯', () => {\n    it('should handle missing configuration gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as AirtableServicePrivate).isConfigured = false;\n      (service as AirtableServicePrivate).base = null;\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n\n    it('should handle API errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockCreate.mockRejectedValue(new Error('API Error'));\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'API Error',\n      );\n    });\n\n    it('should handle retrieval errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockRejectedValue(new Error('Retrieval failed')),\n      });\n\n      await expect(service.getContacts()).rejects.toThrow('Retrieval failed');\n    });\n\n    it('should handle update errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockUpdate.mockRejectedValue(new Error('Update failed'));\n\n      await expect(\n        service.updateContactStatus('rec123456', 'Contacted'),\n      ).rejects.toThrow('Update failed');\n    });\n\n    it('should handle deletion errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockDestroy.mockRejectedValue(new Error('Deletion failed'));\n\n      await expect(service.deleteContact('rec123456')).rejects.toThrow(\n        'Deletion failed',\n      );\n    });\n  });\n\n  describe('MockéªŒè¯', () => {\n    it('should have proper mock setup', () => {\n      expect(mockCreate).toBeDefined();\n      expect(mockSelect).toBeDefined();\n      expect(mockUpdate).toBeDefined();\n      expect(mockDestroy).toBeDefined();\n      expect(mockTable).toBeDefined();\n      expect(mockBase).toBeDefined();\n      expect(mockConfigure).toBeDefined();\n    });\n\n    it('should reset mocks between tests', () => {\n      expect(mockCreate).not.toHaveBeenCalled();\n      expect(mockSelect).not.toHaveBeenCalled();\n      expect(mockUpdate).not.toHaveBeenCalled();\n      expect(mockDestroy).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('æœåŠ¡çŠ¶æ€æ£€æŸ¥', () => {\n    it('should return true when properly configured', () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should return false when not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      expect(service.isReady()).toBe(false);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable-read-operations.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":70,"column":5,"nodeType":"VariableDeclaration","endLine":70,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Airtable Service - Read Operations Tests\n *\n * ä¸“é—¨æµ‹è¯•è¯»å–æ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\n * - è·å–è”ç³»äººè®°å½•\n * - æŸ¥è¯¢é€‰é¡¹å¤„ç†\n * - é”™è¯¯å¤„ç†\n * - ç©ºç»“æœå¤„ç†\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  AirtableServicePrivate,\n  DynamicImportModule,\n} from '@/types/test-types';\n\n// Mock Airtable\nconst mockCreate = vi.fn();\nconst mockSelect = vi.fn();\nconst mockUpdate = vi.fn();\nconst mockDestroy = vi.fn();\nconst mockTable = vi.fn().mockReturnValue({\n  create: mockCreate,\n  select: mockSelect,\n  update: mockUpdate,\n  destroy: mockDestroy,\n});\nconst mockBase = vi.fn().mockReturnValue({\n  table: mockTable,\n});\nconst mockConfigure = vi.fn();\n\nvi.mock('airtable', () => ({\n  default: {\n    configure: mockConfigure,\n    base: mockBase,\n  },\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', async () => {\n  const mockEnv = await import('./mocks/airtable-env');\n  return mockEnv;\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/airtable-validations');\n  return mockValidations;\n});\n\ndescribe('Airtable Service - Read Operations Tests', () => {\n  let AirtableServiceClass: any;\n\n  beforeEach(async () => {\n    // Clear mocks but preserve the mock functions\n    mockCreate.mockReset();\n    mockSelect.mockReset();\n    mockUpdate.mockReset();\n    mockDestroy.mockReset();\n    mockTable.mockClear();\n    mockBase.mockClear();\n    mockConfigure.mockClear();\n\n    // Dynamically import the module to ensure fresh instance\n    const module = (await import('../airtable')) as DynamicImportModule;\n    AirtableServiceClass = module.AirtableService;\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('è·å–è”ç³»äººè®°å½•', () => {\n    it('should retrieve contact records successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const mockRecords = [\n        {\n          id: 'rec123456',\n          fields: { 'First Name': 'John', 'Last Name': 'Doe' },\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ];\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue(mockRecords),\n      });\n\n      const result = await service.getContacts();\n\n      expect(result).toEqual(mockRecords);\n      expect(mockSelect).toHaveBeenCalled();\n    });\n\n    it('should handle query options', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const options = {\n        maxRecords: 10,\n        sort: [{ field: 'Created Time', direction: 'desc' as const }],\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue([]),\n      });\n\n      await service.getContacts(options);\n\n      expect(mockSelect).toHaveBeenCalledWith(options);\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      await expect(service.getContacts()).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n\n    it('should handle retrieval errors gracefully', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockRejectedValue(new Error('Retrieval failed')),\n      });\n\n      await expect(service.getContacts()).rejects.toThrow('Retrieval failed');\n    });\n\n    it('should handle empty results', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue([]),\n      });\n\n      const result = await service.getContacts();\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle complex query options', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const complexOptions = {\n        maxRecords: 50,\n        sort: [\n          { field: 'Created Time', direction: 'desc' as const },\n          { field: 'First Name', direction: 'asc' as const },\n        ],\n        filterByFormula: \"AND({Status} = 'New', {Email} != '')\",\n        fields: ['First Name', 'Last Name', 'Email', 'Company'],\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue([]),\n      });\n\n      await service.getContacts(complexOptions);\n\n      expect(mockSelect).toHaveBeenCalledWith(complexOptions);\n    });\n\n    it('should handle large result sets', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      // Create a large mock dataset\n      const largeDataset = Array.from({ length: 1000 }, (_, index) => ({\n        id: `rec${index.toString().padStart(6, '0')}`,\n        fields: {\n          'First Name': `User${index}`,\n          'Last Name': `Test${index}`,\n          'Email': `user${index}@example.com`,\n        },\n        createdTime: '2023-01-01T00:00:00Z',\n      }));\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue(largeDataset),\n      });\n\n      const result = await service.getContacts();\n\n      expect(result).toHaveLength(1000);\n      expect(result[0].fields['First Name']).toBe('User0');\n      expect(result[999].fields['First Name']).toBe('User999');\n    });\n\n    it('should handle pagination options', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const paginationOptions = {\n        maxRecords: 100,\n        pageSize: 20,\n        offset: 'recABC123',\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue([]),\n      });\n\n      await service.getContacts(paginationOptions);\n\n      expect(mockSelect).toHaveBeenCalledWith(paginationOptions);\n    });\n\n    it('should handle network timeout during retrieval', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const timeoutError = new Error('Request timeout');\n      timeoutError.name = 'TimeoutError';\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockRejectedValue(timeoutError),\n      });\n\n      await expect(service.getContacts()).rejects.toThrow('Request timeout');\n    });\n\n    it('should handle API rate limiting during retrieval', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const rateLimitError = new Error('Rate limit exceeded');\n      rateLimitError.name = 'RateLimitError';\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockRejectedValue(rateLimitError),\n      });\n\n      await expect(service.getContacts()).rejects.toThrow(\n        'Rate limit exceeded',\n      );\n    });\n\n    it('should handle malformed response data', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      // Mock malformed data (missing required fields)\n      const malformedData = [\n        {\n          // Missing id field\n          fields: { 'First Name': 'John' },\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n        {\n          id: 'rec123456',\n          // Missing fields property\n          createdTime: '2023-01-01T00:00:00Z',\n        },\n      ];\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue(malformedData),\n      });\n\n      const result = await service.getContacts();\n\n      // Should still return the data as-is, letting the caller handle validation\n      expect(result).toEqual(malformedData);\n    });\n\n    it('should handle view-based queries', async () => {\n      const service = new AirtableServiceClass();\n\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: mockTable,\n      };\n\n      const viewOptions = {\n        view: 'Grid view',\n        maxRecords: 25,\n      };\n\n      mockSelect.mockReturnValue({\n        all: vi.fn().mockResolvedValue([]),\n      });\n\n      await service.getContacts(viewOptions);\n\n      expect(mockSelect).toHaveBeenCalledWith(viewOptions);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/airtable.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":90,"column":7,"nodeType":"VariableDeclaration","endLine":90,"endColumn":50},{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":107,"column":7,"nodeType":"VariableDeclaration","endLine":107,"endColumn":50}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Airtable Tests - Index\n *\n * Basic integration tests for Airtable service functionality.\n * For comprehensive testing, see:\n * - airtable-basic.test.ts - Basic CRUD operations\n * - airtable-advanced.test.ts - Advanced functionality and error handling\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  AirtableServicePrivate,\n  DynamicImportModule,\n} from '@/types/test-types';\n\n// Mock Airtable\nconst mockCreate = vi.fn();\nconst mockSelect = vi.fn();\nconst mockUpdate = vi.fn();\nconst mockDestroy = vi.fn();\nconst mockTable = vi.fn().mockReturnValue({\n  create: mockCreate,\n  select: mockSelect,\n  update: mockUpdate,\n  destroy: mockDestroy,\n});\nconst mockBase = vi.fn().mockReturnValue({\n  table: mockTable,\n});\nconst mockConfigure = vi.fn();\n\nvi.mock('airtable', () => ({\n  default: {\n    configure: mockConfigure,\n    base: mockBase,\n  },\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', async () => {\n  const mockEnv = await import('./mocks/airtable-env');\n  return mockEnv;\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/airtable-validations');\n  return mockValidations;\n});\n\ndescribe('Airtable Tests - Index', () => {\n  let AirtableServiceClass: any;\n\n  beforeEach(async () => {\n    // Clear mocks but preserve the mock functions\n    mockCreate.mockReset();\n    mockSelect.mockReset();\n    mockUpdate.mockReset();\n    mockDestroy.mockReset();\n    mockTable.mockClear();\n    mockBase.mockClear();\n    mockConfigure.mockClear();\n\n    // Reset modules to ensure fresh imports\n    vi.resetModules();\n\n    // Import the service fresh for each test\n    const AirtableModule = await import('../airtable');\n    AirtableServiceClass = AirtableModule.AirtableService;\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('Basic Configuration', () => {\n    it('should configure Airtable with valid environment variables', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          AIRTABLE_TABLE_NAME: 'test-table',\n        },\n      }));\n\n      const module = await import('../airtable');\n      const ServiceClass =\n        (module as DynamicImportModule).default || module.AirtableService;\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n    });\n\n    it('should use default table name when not provided', async () => {\n      vi.doMock('@/../env.mjs', () => ({\n        env: {\n          AIRTABLE_API_KEY: 'test-api-key',\n          AIRTABLE_BASE_ID: 'test-base-id',\n          // Missing AIRTABLE_TABLE_NAME\n        },\n      }));\n\n      const module = await import('../airtable');\n      const ServiceClass =\n        (module as DynamicImportModule).default || module.AirtableService;\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n    });\n  });\n\n  describe('Basic createContact', () => {\n    const validFormData = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john.doe@example.com',\n      company: 'Test Company',\n      message: 'This is a test message',\n      acceptPrivacy: true,\n      website: '',\n    };\n\n    it('should create contact record successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as AirtableServicePrivate).isConfigured = true;\n      (service as AirtableServicePrivate).base = {\n        table: vi.fn().mockReturnValue({\n          create: mockCreate,\n        }),\n      };\n\n      const mockRecord = {\n        id: 'rec123456',\n        fields: {\n          'First Name': 'John',\n          'Last Name': 'Doe',\n          'Email': 'john.doe@example.com',\n          'Company': 'Test Company',\n          'Message': 'This is a test message',\n          'Status': 'New',\n        },\n        get: vi.fn().mockReturnValue('2023-01-01T00:00:00Z'),\n      };\n\n      mockCreate.mockClear();\n      mockCreate.mockResolvedValue([mockRecord]);\n\n      const result = await service.createContact(validFormData);\n\n      expect(result).toEqual({\n        id: 'rec123456',\n        fields: mockRecord.fields,\n        createdTime: '2023-01-01T00:00:00Z',\n      });\n\n      expect(mockCreate).toHaveBeenCalledWith([\n        expect.objectContaining({\n          fields: expect.objectContaining({\n            'First Name': 'John',\n            'Last Name': 'Doe',\n            'Email': 'john.doe@example.com',\n            'Company': 'Test Company',\n            'Message': 'This is a test message',\n            'Status': 'New',\n            'Source': 'Website Contact Form',\n          }),\n        }),\n      ]);\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as AirtableServicePrivate).isConfigured = false;\n      (service as AirtableServicePrivate).base = null;\n\n      await expect(service.createContact(validFormData)).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n  });\n\n  describe('Basic getContacts', () => {\n    it('should retrieve contact records successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: vi.fn().mockReturnValue({\n          select: mockSelect,\n        }),\n      };\n\n      const mockRecords = [\n        {\n          id: 'rec1',\n          fields: { 'First Name': 'John', 'Last Name': 'Doe' },\n          get: vi.fn().mockReturnValue('2023-01-01T00:00:00Z'),\n        },\n        {\n          id: 'rec2',\n          fields: { 'First Name': 'Jane', 'Last Name': 'Smith' },\n          get: vi.fn().mockReturnValue('2023-01-02T00:00:00Z'),\n        },\n      ];\n\n      const mockSelectChain = {\n        all: vi.fn().mockResolvedValue(mockRecords),\n      };\n      mockSelect.mockClear();\n      mockSelect.mockReturnValue(mockSelectChain);\n\n      const result = await service.getContacts();\n\n      expect(result).toHaveLength(2);\n      expect(result[0]).toEqual({\n        id: 'rec1',\n        fields: { 'First Name': 'John', 'Last Name': 'Doe' },\n        createdTime: '2023-01-01T00:00:00Z',\n      });\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      await expect(service.getContacts()).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n  });\n\n  describe('Basic updateContactStatus', () => {\n    it('should update contact status successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: vi.fn().mockReturnValue({\n          update: mockUpdate,\n        }),\n      };\n\n      mockUpdate.mockClear();\n      mockUpdate.mockResolvedValue([\n        {\n          id: 'rec123456',\n          fields: { Status: 'Contacted' },\n          get: vi.fn().mockReturnValue('2023-01-01T00:00:00Z'),\n        },\n      ]);\n\n      const result = await service.updateContactStatus(\n        'rec123456',\n        'Contacted',\n      );\n\n      expect(result).toEqual({\n        id: 'rec123456',\n        fields: { Status: 'Contacted' },\n        createdTime: '2023-01-01T00:00:00Z',\n      });\n\n      expect(mockUpdate).toHaveBeenCalledWith([\n        {\n          id: 'rec123456',\n          fields: { Status: 'Contacted' },\n        },\n      ]);\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      await expect(\n        service.updateContactStatus('rec123456', 'Contacted'),\n      ).rejects.toThrow('Airtable service is not configured');\n    });\n  });\n\n  describe('Basic deleteContact', () => {\n    it('should delete contact successfully', async () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: vi.fn().mockReturnValue({\n          destroy: mockDestroy,\n        }),\n      };\n\n      mockDestroy.mockClear();\n      mockDestroy.mockResolvedValue([{ id: 'rec123456', deleted: true }]);\n\n      await service.deleteContact('rec123456');\n\n      expect(mockDestroy).toHaveBeenCalledWith(['rec123456']);\n    });\n\n    it('should throw error when service is not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      await expect(service.deleteContact('rec123456')).rejects.toThrow(\n        'Airtable service is not configured',\n      );\n    });\n  });\n\n  describe('Basic isReady', () => {\n    it('should return true when properly configured', () => {\n      const service = new AirtableServiceClass();\n\n      // Override service configuration to make it ready\n      (service as unknown as AirtableServicePrivate).isConfigured = true;\n      (service as unknown as AirtableServicePrivate).base = {\n        table: vi.fn().mockReturnValue({\n          create: mockCreate,\n          select: mockSelect,\n          update: mockUpdate,\n          destroy: mockDestroy,\n        }),\n      };\n\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should return false when not configured', async () => {\n      const service = new AirtableServiceClass();\n\n      // Ensure service is not configured\n      (service as unknown as AirtableServicePrivate).isConfigured = false;\n      (service as unknown as AirtableServicePrivate).base = null;\n\n      expect(service.isReady()).toBe(false);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/colors-contrast-compliance.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/colors-oklch-conversion.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/colors-theme-validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/colors.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/content-parser.test.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/content' import is duplicated.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":5,"endColumn":48}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from 'fs';\nimport path from 'path';\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type { ContentType } from '@/types/content';\nimport { ContentError } from '@/types/content';\nimport { logger } from '@/lib/logger';\nimport { CONTENT_LIMITS } from '@/constants/app-constants';\nimport { getContentFiles, parseContentFile } from '@/lib/content-parser';\n\n// Mock dependencies\nvi.mock('fs');\nvi.mock('@/lib/logger');\nvi.mock('@/lib/content-utils', () => ({\n  CONTENT_DIR: '/mock/content',\n  validateFilePath: vi.fn((filePath: string, baseDir: string) => {\n    if (filePath.includes('..') || filePath.includes('invalid')) {\n      throw new Error('Invalid file path');\n    }\n    // For single files, return baseDir + basename\n    // For directories, return baseDir + filePath\n    if (filePath.includes('/')) {\n      return path.join(baseDir, filePath);\n    }\n    return path.join(baseDir, path.basename(filePath));\n  }),\n}));\nvi.mock('@/lib/content-validation', () => ({\n  validateContentMetadata: vi.fn(() => ({\n    isValid: true,\n    errors: [],\n    warnings: [],\n  })),\n}));\n\nconst mockFs = vi.mocked(fs) as {\n  existsSync: ReturnType<typeof vi.fn>;\n  readFileSync: ReturnType<typeof vi.fn>;\n  readdirSync: ReturnType<typeof vi.fn>;\n};\nconst mockLogger = vi.mocked(logger);\n\ndescribe('content-parser', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    vi.resetAllMocks();\n  });\n\n  describe('parseContentFile', () => {\n    const mockFilePath = 'test-content.mdx';\n    const mockContentType: ContentType = 'posts';\n    const mockFileContent = `---\ntitle: Test Content\ndescription: Test description\ndate: 2024-01-01\nauthor: Test Author\n---\n\n# Test Content\n\nThis is test content.`;\n\n    beforeEach(() => {\n      mockFs.existsSync.mockReturnValue(true);\n      mockFs.readFileSync.mockReturnValue(mockFileContent);\n    });\n\n    it('should successfully parse a valid MDX file', () => {\n      const result = parseContentFile(mockFilePath, mockContentType);\n\n      expect(result).toEqual({\n        slug: 'test-content',\n        metadata: {\n          title: 'Test Content',\n          description: 'Test description',\n          date: new Date('2024-01-01'),\n          author: 'Test Author',\n        },\n        content: '\\n# Test Content\\n\\nThis is test content.',\n        filePath: '/mock/content/test-content.mdx',\n      });\n    });\n\n    it('should throw ContentError when file does not exist', () => {\n      mockFs.existsSync.mockReturnValue(false);\n\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        ContentError,\n      );\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        'Content file not found: test-content.mdx',\n      );\n    });\n\n    it('should throw ContentError when file is too large', () => {\n      const largeContent = 'x'.repeat(CONTENT_LIMITS.MAX_FILE_SIZE + 1);\n      mockFs.readFileSync.mockReturnValue(largeContent);\n\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        ContentError,\n      );\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        'Content file too large',\n      );\n    });\n\n    it('should handle invalid file paths', () => {\n      expect(() =>\n        parseContentFile('../invalid/path.mdx', mockContentType),\n      ).toThrow('Invalid file path');\n    });\n\n    it('should handle file read errors', () => {\n      mockFs.readFileSync.mockImplementation(() => {\n        throw new Error('File read error');\n      });\n\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        ContentError,\n      );\n      expect(() => parseContentFile(mockFilePath, mockContentType)).toThrow(\n        'Failed to parse content file',\n      );\n    });\n\n    it('should log warnings when content validation fails', async () => {\n      const { validateContentMetadata } = vi.mocked(\n        await import('@/lib/content-validation'),\n      );\n      validateContentMetadata.mockReturnValue({\n        isValid: false,\n        errors: ['Missing required field'],\n        warnings: ['Deprecated field used'],\n      });\n\n      parseContentFile(mockFilePath, mockContentType);\n\n      expect(mockLogger.warn).toHaveBeenCalledWith(\n        'Content validation failed',\n        {\n          file: mockFilePath,\n          errors: ['Missing required field'],\n          warnings: ['Deprecated field used'],\n        },\n      );\n    });\n\n    it('should extract slug from filename correctly', () => {\n      const result = parseContentFile('my-blog-post.mdx', mockContentType);\n      expect(result.slug).toBe('my-blog-post');\n    });\n\n    it('should handle files without frontmatter', () => {\n      mockFs.readFileSync.mockReturnValue('# Just content without frontmatter');\n\n      const result = parseContentFile(mockFilePath, mockContentType);\n\n      expect(result.metadata).toEqual({});\n      expect(result.content).toBe('# Just content without frontmatter');\n    });\n\n    it('should handle empty files', () => {\n      mockFs.readFileSync.mockReturnValue('');\n\n      const result = parseContentFile(mockFilePath, mockContentType);\n\n      expect(result.metadata).toEqual({});\n      expect(result.content).toBe('');\n    });\n\n    it('should preserve file path in result', () => {\n      const result = parseContentFile(mockFilePath, mockContentType);\n      expect(result.filePath).toBe('/mock/content/test-content.mdx');\n    });\n  });\n\n  describe('getContentFiles', () => {\n    const mockContentDir = 'content/blog';\n\n    beforeEach(() => {\n      mockFs.existsSync.mockReturnValue(true);\n      mockFs.readdirSync.mockReturnValue([\n        'post1.mdx',\n        'post2.md',\n        'post3.en.mdx',\n        'post4.zh.mdx',\n        'invalid.txt',\n        'draft.mdx',\n      ] as string[]);\n    });\n\n    it('should return all valid content files when no locale specified', () => {\n      const result = getContentFiles(mockContentDir);\n\n      expect(result).toEqual([\n        '/mock/content/content/blog/post1.mdx',\n        '/mock/content/content/blog/post2.md',\n        '/mock/content/content/blog/post3.en.mdx',\n        '/mock/content/content/blog/post4.zh.mdx',\n        '/mock/content/content/blog/draft.mdx',\n      ]);\n    });\n\n    it('should filter files by locale when specified', () => {\n      const result = getContentFiles(mockContentDir, 'en');\n\n      expect(result).toEqual([\n        '/mock/content/content/blog/post1.mdx',\n        '/mock/content/content/blog/post2.md',\n        '/mock/content/content/blog/post3.en.mdx',\n        '/mock/content/content/blog/draft.mdx',\n      ]);\n    });\n\n    it('should filter Chinese locale files correctly', () => {\n      const result = getContentFiles(mockContentDir, 'zh');\n\n      expect(result).toEqual([\n        '/mock/content/content/blog/post1.mdx',\n        '/mock/content/content/blog/post2.md',\n        '/mock/content/content/blog/post4.zh.mdx',\n        '/mock/content/content/blog/draft.mdx',\n      ]);\n    });\n\n    it('should return empty array when directory does not exist', () => {\n      mockFs.existsSync.mockReturnValue(false);\n\n      const result = getContentFiles(mockContentDir);\n\n      expect(result).toEqual([]);\n      expect(mockLogger.warn).toHaveBeenCalledWith(\n        'Content directory does not exist',\n        { dir: '/mock/content/content/blog' },\n      );\n    });\n\n    it('should filter out non-markdown files', () => {\n      mockFs.readdirSync.mockReturnValue([\n        'post1.mdx',\n        'post2.md',\n        'image.jpg',\n        'config.json',\n        'readme.txt',\n      ] as string[]);\n\n      const result = getContentFiles(mockContentDir);\n\n      expect(result).toEqual([\n        '/mock/content/content/blog/post1.mdx',\n        '/mock/content/content/blog/post2.md',\n      ]);\n    });\n\n    it('should handle empty directory', () => {\n      mockFs.readdirSync.mockReturnValue([] as string[]);\n\n      const result = getContentFiles(mockContentDir);\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle directory read errors', () => {\n      mockFs.readdirSync.mockImplementation(() => {\n        throw new Error('Directory read error');\n      });\n\n      expect(() => getContentFiles(mockContentDir)).toThrow(\n        'Directory read error',\n      );\n    });\n\n    it('should validate content directory path', () => {\n      expect(() => getContentFiles('../invalid/path')).toThrow(\n        'Invalid file path',\n      );\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/content-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/content-validation-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/content-validation-basic.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TEST_CONTENT_LIMITS' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TEST_COUNT_CONSTANTS' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Content Validation - Basic Tests\n *\n * æµ‹è¯•åŸºæœ¬éªŒè¯åŠŸèƒ½ï¼š\n * - å¿…å¡«å­—æ®µéªŒè¯\n * - æ—¥æœŸæ ¼å¼éªŒè¯\n * - åŸºæœ¬æ•°æ®ç±»å‹éªŒè¯\n */\n\nimport { describe, expect, it } from 'vitest';\nimport type { _ContentType } from '@/types/content';\nimport {\n  TEST_CONTENT_LIMITS,\n  TEST_COUNT_CONSTANTS,\n} from '@/constants/test-constants';\nimport { validateContentMetadata } from '@/lib/content-validation';\n\ndescribe('Content Validation - Basic Tests', () => {\n  describe('validateContentMetadata - Basic Validation', () => {\n    const validMetadata = {\n      title: 'Test Article',\n      publishedAt: '2024-01-01T00:00:00Z',\n      updatedAt: '2024-01-02T00:00:00Z',\n      excerpt: 'This is a test excerpt',\n      tags: ['test', 'article'],\n      seo: {\n        title: 'SEO Title',\n        description: 'SEO description for the article',\n      },\n    };\n\n    describe('required fields validation', () => {\n      it('should pass validation with all required fields', () => {\n        const result = validateContentMetadata(validMetadata, 'posts');\n\n        expect(result.isValid).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n\n      it('should fail validation when title is missing', () => {\n        const { title: _title, ...metadataWithoutTitle } = validMetadata;\n\n        const result = validateContentMetadata(metadataWithoutTitle, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Title is required');\n      });\n\n      it('should fail validation when publishedAt is missing', () => {\n        const { publishedAt: _publishedAt, ...metadataWithoutPublishedAt } =\n          validMetadata;\n\n        const result = validateContentMetadata(\n          metadataWithoutPublishedAt,\n          'posts',\n        );\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Published date is required');\n      });\n\n      it('should fail validation when updatedAt is missing', () => {\n        const { updatedAt: _updatedAt, ...metadataWithoutUpdatedAt } =\n          validMetadata;\n\n        const result = validateContentMetadata(\n          metadataWithoutUpdatedAt,\n          'posts',\n        );\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Updated date is required');\n      });\n\n      it('should fail validation when title is empty string', () => {\n        const metadataWithEmptyTitle = {\n          ...validMetadata,\n          title: '',\n        };\n\n        const result = validateContentMetadata(metadataWithEmptyTitle, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Title is required');\n      });\n\n      it('should fail validation when title is only whitespace', () => {\n        const metadataWithWhitespaceTitle = {\n          ...validMetadata,\n          title: '   ',\n        };\n\n        const result = validateContentMetadata(\n          metadataWithWhitespaceTitle,\n          'posts',\n        );\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Title is required');\n      });\n\n      it('should fail validation when multiple required fields are missing', () => {\n        const {\n          title: _title,\n          publishedAt: _publishedAt,\n          ...metadataWithoutMultiple\n        } = validMetadata;\n\n        const result = validateContentMetadata(\n          metadataWithoutMultiple,\n          'posts',\n        );\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Title is required');\n        expect(result.errors).toContain('Published date is required');\n      });\n    });\n\n    describe('date validation', () => {\n      it('should pass validation with valid ISO date strings', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: '2024-01-01T00:00:00Z',\n          updatedAt: '2024-01-02T12:30:45Z',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n\n      it('should fail validation with invalid publishedAt date format', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: 'invalid-date',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain(\n          'Published date must be a valid ISO date',\n        );\n      });\n\n      it('should fail validation with invalid updatedAt date format', () => {\n        const metadata = {\n          ...validMetadata,\n          updatedAt: 'not-a-date',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain(\n          'Updated date must be a valid ISO date',\n        );\n      });\n\n      it('should fail validation when updatedAt is before publishedAt', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: '2024-01-02T00:00:00Z',\n          updatedAt: '2024-01-01T00:00:00Z',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain(\n          'Updated date must be after published date',\n        );\n      });\n\n      it('should pass validation when updatedAt equals publishedAt', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: '2024-01-01T00:00:00Z',\n          updatedAt: '2024-01-01T00:00:00Z',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n\n      it('should handle dates with different timezone formats', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: '2024-01-01T00:00:00+00:00',\n          updatedAt: '2024-01-02T00:00:00-05:00',\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n\n      it('should fail validation with timestamp numbers', () => {\n        const metadata = {\n          ...validMetadata,\n          publishedAt: 1704067200000 as unknown as string, // timestamp\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain(\n          'Published date must be a valid ISO date',\n        );\n      });\n    });\n\n    describe('basic data type validation', () => {\n      it('should fail validation when title is not a string', () => {\n        const metadata = {\n          ...validMetadata,\n          title: 123 as unknown as string,\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Title must be a string');\n      });\n\n      it('should fail validation when tags is not an array', () => {\n        const metadata = {\n          ...validMetadata,\n          tags: 'not-an-array' as unknown as string[],\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Tags must be an array');\n      });\n\n      it('should fail validation when excerpt is not a string', () => {\n        const metadata = {\n          ...validMetadata,\n          excerpt: 456 as unknown as string,\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('Excerpt must be a string');\n      });\n\n      it('should validate array elements in tags', () => {\n        const metadata = {\n          ...validMetadata,\n          tags: ['valid-tag', 123, 'another-valid-tag'] as unknown as string[],\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        expect(result.isValid).toBe(false);\n        expect(result.errors).toContain('All tags must be strings');\n      });\n\n      it('should handle empty arrays in tags', () => {\n        const metadata = {\n          ...validMetadata,\n          tags: [],\n        };\n\n        const result = validateContentMetadata(metadata, 'posts');\n\n        // Empty tags array should be valid\n        expect(result.isValid).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/content-validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/enhanced-web-vitals-core.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/enhanced-web-vitals.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/footer-config.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache-basic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache-error-advanced.test.ts","messages":[{"ruleId":"no-loop-func","severity":2,"message":"Function declared in a loop contains unsafe references to variable(s) 'cacheManager'.","line":302,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"unsafeRefs","endLine":302,"endColumn":56},{"ruleId":"no-loop-func","severity":2,"message":"Function declared in a loop contains unsafe references to variable(s) 'cacheManager'.","line":303,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"unsafeRefs","endLine":303,"endColumn":56}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * I18n Cache Manager - Advanced Error Handling Tests\n *\n * æµ‹è¯•é«˜çº§é”™è¯¯å¤„ç†ï¼š\n * - å¹¶å‘é”™è¯¯å¤„ç†\n * - å†…å­˜å’Œèµ„æºç®¡ç†\n * - å‹åŠ›æµ‹è¯•\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type { Locale } from '@/types/i18n';\nimport { I18nCacheManager } from '@/lib/i18n-cache';\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n};\n\n// Mock constants\nvi.mock('@/constants/i18n-constants', () => ({\n  CACHE_DURATIONS: {\n    PERFORMANCE_CACHE: 300000, // 5 minutes\n  },\n  CACHE_LIMITS: {\n    MAX_CACHE_ENTRIES: 100,\n  },\n}));\n\ndescribe('I18nCacheManager - Advanced Error Handling', () => {\n  let cacheManager: I18nCacheManager;\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n    vi.useFakeTimers();\n\n    // Reset localStorage mock\n    mockLocalStorage.getItem.mockReturnValue(null);\n    mockLocalStorage.setItem.mockImplementation(() => {});\n    mockLocalStorage.removeItem.mockImplementation(() => {});\n    mockLocalStorage.clear.mockImplementation(() => {});\n\n    // Mock window and localStorage properly\n    Object.defineProperty(global, 'window', {\n      value: {\n        localStorage: mockLocalStorage,\n      },\n      writable: true,\n    });\n\n    // Also set global localStorage for direct access\n    Object.defineProperty(global, 'localStorage', {\n      value: mockLocalStorage,\n      writable: true,\n    });\n\n    // Create cache manager with persistence disabled for consistent testing\n    cacheManager = new I18nCacheManager({ enablePersistence: false });\n  });\n\n  afterEach(() => {\n    vi.useRealTimers();\n    vi.restoreAllMocks();\n  });\n\n  describe('concurrent error handling', () => {\n    it('should handle concurrent failed requests', async () => {\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      const promises = Array.from({ length: 5 }, () =>\n        cacheManager.getMessages('invalid' as Locale),\n      );\n\n      try {\n        const results = await Promise.all(promises);\n        expect(results.every((result) => result === null)).toBe(true);\n      } catch {\n        // Some promises may reject, which is acceptable\n      }\n\n      console.error = originalConsoleError;\n    });\n\n    it('should maintain cache integrity during errors', async () => {\n      // Load valid messages first\n      await cacheManager.getMessages('en');\n      expect(cacheManager.getCacheStats().size).toBe(1);\n\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Try to load invalid messages\n      try {\n        await cacheManager.getMessages('invalid' as Locale);\n      } catch {\n        // Expected to fail\n      }\n\n      // Cache should still contain valid entries\n      expect(cacheManager.getCacheStats().size).toBe(1);\n\n      // Valid messages should still be accessible\n      const messages = await cacheManager.getMessages('en');\n      expect(messages).toBeDefined();\n\n      console.error = originalConsoleError;\n    });\n\n    it('should handle mixed success and failure scenarios', async () => {\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Mix of valid and invalid requests\n      const promises = [\n        cacheManager.getMessages('en'),\n        cacheManager.getMessages('invalid' as Locale),\n        cacheManager.getMessages('zh'),\n        cacheManager.getMessages('another-invalid' as Locale),\n      ];\n\n      const results = await Promise.allSettled(promises);\n\n      // Should have some successes and some failures\n      const successes = results.filter((r) => r.status === 'fulfilled');\n      const failures = results.filter((r) => r.status === 'rejected');\n\n      expect(successes.length).toBeGreaterThan(0);\n      expect(failures.length).toBeGreaterThan(0);\n\n      console.error = originalConsoleError;\n    });\n\n    it('should handle rapid concurrent operations', async () => {\n      const operations = [];\n\n      // Create many concurrent operations\n      for (let i = 0; i < 20; i++) {\n        if (i % 3 === 0) {\n          operations.push(cacheManager.getMessages('en'));\n        } else if (i % 3 === 1) {\n          operations.push(cacheManager.getMessages('zh'));\n        } else {\n          operations.push(cacheManager.getMessages('invalid' as Locale));\n        }\n      }\n\n      const results = await Promise.allSettled(operations);\n\n      // Should have a mix of successes and failures\n      const successes = results.filter((r) => r.status === 'fulfilled');\n      expect(successes.length).toBeGreaterThan(0);\n\n      // Cache should still be functional\n      const stats = cacheManager.getCacheStats();\n      expect(stats.size).toBeGreaterThan(0);\n    });\n  });\n\n  describe('memory and resource management', () => {\n    it('should handle memory pressure gracefully', async () => {\n      const largeCacheManager = new I18nCacheManager({\n        maxSize: 1000,\n        enablePersistence: false,\n      });\n\n      // Simulate memory pressure by creating many cache entries\n      const promises = Array.from({ length: 50 }, (_, i) =>\n        largeCacheManager.getMessages(i % 2 === 0 ? 'en' : 'zh'),\n      );\n\n      await Promise.all(promises);\n\n      const stats = largeCacheManager.getCacheStats();\n      expect(stats.size).toBeLessThanOrEqual(2); // Should only cache valid locales\n    });\n\n    it('should clean up resources on cache clear', async () => {\n      await cacheManager.getMessages('en');\n      await cacheManager.getMessages('zh');\n\n      expect(cacheManager.getCacheStats().size).toBe(2);\n\n      cacheManager.clearCache();\n\n      expect(cacheManager.getCacheStats().size).toBe(0);\n\n      // Metrics should be reset\n      const metrics = cacheManager.getMetrics();\n      expect(metrics.cacheHitRate).toBe(0);\n    });\n\n    it('should handle rapid cache operations', async () => {\n      const operations = [];\n\n      // Rapid fire operations\n      for (let i = 0; i < 20; i++) {\n        operations.push(cacheManager.getMessages('en'));\n        operations.push(cacheManager.clearCache());\n        operations.push(cacheManager.getMessages('zh'));\n        operations.push(cacheManager.resetMetrics());\n      }\n\n      // Should not throw errors\n      expect(async () => {\n        await Promise.all(operations);\n      }).not.toThrow();\n    });\n\n    it('should maintain consistency under stress', async () => {\n      const stressOperations = [];\n\n      // Mix of different operations\n      for (let i = 0; i < 100; i++) {\n        if (i % 10 === 0) {\n          stressOperations.push(cacheManager.clearCache());\n        } else if (i % 7 === 0) {\n          stressOperations.push(cacheManager.resetMetrics());\n        } else {\n          stressOperations.push(\n            cacheManager.getMessages(i % 2 === 0 ? 'en' : 'zh'),\n          );\n        }\n      }\n\n      await Promise.allSettled(stressOperations);\n\n      // Cache should still be functional\n      const messages = await cacheManager.getMessages('en');\n      expect(messages).toBeDefined();\n\n      const stats = cacheManager.getCacheStats();\n      expect(stats).toBeDefined();\n      expect(typeof stats.size).toBe('number');\n    });\n\n    it('should handle resource cleanup during errors', async () => {\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Load some valid data\n      await cacheManager.getMessages('en');\n\n      // Try to cause errors while performing operations\n      const mixedOperations = [];\n      for (let i = 0; i < 10; i++) {\n        mixedOperations.push(cacheManager.getMessages('invalid' as Locale));\n        mixedOperations.push(cacheManager.clearCache());\n        mixedOperations.push(cacheManager.getMessages('en'));\n      }\n\n      await Promise.allSettled(mixedOperations);\n\n      // Should still be able to perform basic operations\n      const messages = await cacheManager.getMessages('en');\n      expect(messages).toBeDefined();\n\n      console.error = originalConsoleError;\n    });\n  });\n\n  describe('error propagation and isolation', () => {\n    it('should isolate errors between different cache instances', async () => {\n      const cacheManager1 = new I18nCacheManager({ enablePersistence: false });\n      const cacheManager2 = new I18nCacheManager({ enablePersistence: false });\n\n      // Load valid data in first instance\n      await cacheManager1.getMessages('en');\n      expect(cacheManager1.getCacheStats().size).toBe(1);\n\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Cause error in second instance\n      try {\n        await cacheManager2.getMessages('invalid' as Locale);\n      } catch {\n        // Expected to fail\n      }\n\n      // First instance should be unaffected\n      const messages = await cacheManager1.getMessages('en');\n      expect(messages).toBeDefined();\n      expect(cacheManager1.getCacheStats().size).toBe(1);\n\n      console.error = originalConsoleError;\n    });\n\n    it('should handle error cascades gracefully', async () => {\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Create a cascade of operations that might fail\n      const cascadeOperations = [];\n\n      for (let i = 0; i < 5; i++) {\n        cascadeOperations.push(\n          cacheManager\n            .getMessages('invalid' as Locale)\n            .catch(() => cacheManager.getMessages('en'))\n            .catch(() => cacheManager.getMessages('zh')),\n        );\n      }\n\n      const results = await Promise.allSettled(cascadeOperations);\n\n      // At least some operations should succeed (fallback to valid locales)\n      const successes = results.filter((r) => r.status === 'fulfilled');\n      expect(successes.length).toBeGreaterThan(0);\n\n      console.error = originalConsoleError;\n    });\n\n    it('should maintain error boundaries between operations', async () => {\n      const originalConsoleError = console.error;\n      console.error = vi.fn();\n\n      // Perform successful operation\n      await cacheManager.getMessages('en');\n      const initialStats = cacheManager.getCacheStats();\n      expect(initialStats.size).toBe(1);\n\n      // Perform failing operation\n      try {\n        await cacheManager.getMessages('invalid' as Locale);\n      } catch {\n        // Expected to fail\n      }\n\n      // Successful operation should still be accessible\n      const messages = await cacheManager.getMessages('en');\n      expect(messages).toBeDefined();\n\n      // Cache state should be preserved\n      const finalStats = cacheManager.getCacheStats();\n      expect(finalStats.size).toBe(1);\n\n      console.error = originalConsoleError;\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache-error-basic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache-error-handling.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-cache.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-monitoring.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":225,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":225,"endColumn":24},{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":235,"column":7,"nodeType":"VariableDeclaration","endLine":235,"endColumn":57}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest';\nimport { ErrorLevel, MonitoringEventType } from '@/lib/i18n-monitoring';\n\n// Mock constants\nvi.mock('@/constants/i18n-constants', () => ({\n  CACHE_LIMITS: { MAX_SIZE: 1000 },\n  MONITORING_CONFIG: {\n    ERROR_SAMPLE_RATE: 100,\n    PERFORMANCE_SAMPLE_RATE: 10,\n  },\n  PERFORMANCE_THRESHOLDS: {\n    TRANSLATION_LOAD_TIME: 1000,\n  },\n  REPORTING_THRESHOLDS: {\n    ERROR_RATE: 5,\n  },\n  TIME_UNITS: {\n    MINUTE: 60000,\n    HOUR: 3600000,\n  },\n}));\n\n// Mock types\nvi.mock('@/types/i18n', () => ({\n  // Mock type exports\n}));\n\n// Mock global objects\nconst mockFetch = vi.fn();\nconst mockConsole = {\n  error: vi.fn(),\n  warn: vi.fn(),\n  info: vi.fn(),\n  log: vi.fn(),\n};\n\nObject.defineProperty(global, 'fetch', {\n  value: mockFetch,\n  writable: true,\n});\n\nObject.defineProperty(global, 'console', {\n  value: mockConsole,\n  writable: true,\n});\n\nObject.defineProperty(global, 'navigator', {\n  value: { userAgent: 'Test Browser' },\n  writable: true,\n});\n\nObject.defineProperty(global, 'window', {\n  value: { location: { href: 'https://test.com' } },\n  writable: true,\n});\n\ndescribe('i18n-monitoring', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    mockFetch.mockResolvedValue({ ok: true });\n  });\n\n  describe('ErrorLevel enum', () => {\n    it('should define error levels', () => {\n      expect(ErrorLevel.INFO).toBe('info');\n      expect(ErrorLevel.WARNING).toBe('warning');\n      expect(ErrorLevel.ERROR).toBe('error');\n      expect(ErrorLevel.CRITICAL).toBe('critical');\n    });\n  });\n\n  describe('MonitoringEventType enum', () => {\n    it('should define monitoring event types', () => {\n      expect(MonitoringEventType.TRANSLATION_MISSING).toBe(\n        'translation_missing',\n      );\n      expect(MonitoringEventType.TRANSLATION_ERROR).toBe('translation_error');\n      expect(MonitoringEventType.LOCALE_SWITCH).toBe('locale_switch');\n      expect(MonitoringEventType.CACHE_MISS).toBe('cache_miss');\n      expect(MonitoringEventType.PERFORMANCE_ISSUE).toBe('performance_issue');\n      expect(MonitoringEventType.QUALITY_ISSUE).toBe('quality_issue');\n    });\n  });\n\n  describe('module imports', () => {\n    it('should import from constants', async () => {\n      const constants = await import('@/constants/i18n-constants');\n      expect(constants.MONITORING_CONFIG).toBeDefined();\n      expect(constants.PERFORMANCE_THRESHOLDS).toBeDefined();\n    });\n\n    it('should import from types', async () => {\n      // Test that types module can be imported\n      const types = await import('@/types/i18n');\n      expect(types).toBeDefined();\n    });\n  });\n\n  describe('EventCollector class', () => {\n    it('should be importable and instantiable', async () => {\n      // Since the class is not exported, we test the module structure\n      const monitoringModule = await import('../i18n-monitoring');\n      expect(monitoringModule.ErrorLevel).toBeDefined();\n      expect(monitoringModule.MonitoringEventType).toBeDefined();\n    });\n  });\n\n  describe('monitoring configuration', () => {\n    it('should handle monitoring config structure', () => {\n      const mockConfig = {\n        enabled: true,\n        enableConsoleLogging: true,\n        enableRemoteLogging: false,\n        enablePerformanceTracking: true,\n        enableQualityTracking: true,\n        performanceThresholds: {\n          translationLoadTime: 1000,\n          cacheHitRate: 90,\n          errorRate: 5,\n          memoryUsage: 100,\n        },\n        qualityThresholds: {\n          completeness: 95,\n          consistency: 90,\n          accuracy: 95,\n          freshness: 7,\n        },\n        maxEvents: 1000,\n        flushInterval: 30000,\n      };\n\n      expect(mockConfig.enabled).toBe(true);\n      expect(mockConfig.performanceThresholds.translationLoadTime).toBe(1000);\n      expect(mockConfig.qualityThresholds.completeness).toBe(95);\n    });\n  });\n\n  describe('monitoring event structure', () => {\n    it('should define monitoring event interface', () => {\n      const mockEvent = {\n        id: 'test-id',\n        type: MonitoringEventType.TRANSLATION_ERROR,\n        level: ErrorLevel.ERROR,\n        timestamp: Date.now(),\n        locale: 'en' as const,\n        message: 'Translation error occurred',\n        metadata: { key: 'test.key' },\n        stackTrace: 'Error stack trace',\n        userAgent: 'Test Browser',\n        url: 'https://test.com',\n      };\n\n      expect(mockEvent.type).toBe('translation_error');\n      expect(mockEvent.level).toBe('error');\n      expect(mockEvent.locale).toBe('en');\n      expect(mockEvent.message).toBe('Translation error occurred');\n    });\n  });\n\n  describe('performance thresholds', () => {\n    it('should define performance threshold structure', () => {\n      const mockThresholds = {\n        translationLoadTime: 1000,\n        cacheHitRate: 90,\n        errorRate: 5,\n        memoryUsage: 100,\n      };\n\n      expect(mockThresholds.translationLoadTime).toBe(1000);\n      expect(mockThresholds.cacheHitRate).toBe(90);\n      expect(mockThresholds.errorRate).toBe(5);\n      expect(mockThresholds.memoryUsage).toBe(100);\n    });\n  });\n\n  describe('quality thresholds', () => {\n    it('should define quality threshold structure', () => {\n      const mockThresholds = {\n        completeness: 95,\n        consistency: 90,\n        accuracy: 95,\n        freshness: 7,\n      };\n\n      expect(mockThresholds.completeness).toBe(95);\n      expect(mockThresholds.consistency).toBe(90);\n      expect(mockThresholds.accuracy).toBe(95);\n      expect(mockThresholds.freshness).toBe(7);\n    });\n  });\n\n  describe('browser environment handling', () => {\n    it('should handle navigator availability', () => {\n      expect(global.navigator.userAgent).toBe('Test Browser');\n    });\n\n    it('should handle window availability', () => {\n      expect(global.window.location.href).toBe('https://test.com');\n    });\n\n    it('should handle missing browser APIs gracefully', () => {\n      const originalNavigator = global.navigator;\n      delete (global as { navigator?: Navigator }).navigator;\n\n      // Should not throw when navigator is undefined\n      expect(() => {\n        const userAgent =\n          typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown';\n        expect(userAgent).toBe('unknown');\n      }).not.toThrow();\n\n      // Restore navigator\n      global.navigator = originalNavigator;\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle fetch errors gracefully', async () => {\n      mockFetch.mockRejectedValueOnce(new Error('Network error'));\n\n      // Should not throw when fetch fails\n      expect(async () => {\n        try {\n          await fetch('/api/test');\n        } catch (_error) {\n          // Expected to catch error\n          // å¿½ç•¥é”™è¯¯å˜é‡\n        }\n      }).not.toThrow();\n    });\n  });\n\n  describe('module structure', () => {\n    it('should export required enums', async () => {\n      const module = await import('../i18n-monitoring');\n\n      expect(module.ErrorLevel).toBeDefined();\n      expect(module.MonitoringEventType).toBeDefined();\n      expect(typeof module.ErrorLevel).toBe('object');\n      expect(typeof module.MonitoringEventType).toBe('object');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-performance-cache.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-performance-monitor.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-performance.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":66,"column":16,"nodeType":"MemberExpression","endLine":66,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":108,"column":18,"nodeType":"MemberExpression","endLine":108,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * I18n Performance - Main Integration Tests\n *\n * ä¸»è¦é›†æˆæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š\n * - æ ¸å¿ƒå‡½æ•°å¯¼å‡ºéªŒè¯\n * - åŸºæœ¬åŠŸèƒ½é›†æˆæµ‹è¯•\n * - çœŸå®ä½¿ç”¨åœºæ™¯æµ‹è¯•\n *\n * è¯¦ç»†æµ‹è¯•è¯·å‚è€ƒï¼š\n * - i18n-performance-cache.test.ts - ç¼“å­˜åŠŸèƒ½æµ‹è¯•\n * - i18n-performance-monitor.test.ts - æ€§èƒ½ç›‘æ§æµ‹è¯•\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\n// å¯¼å…¥éœ€è¦æµ‹è¯•çš„æ¨¡å—\nimport {\n  evaluatePerformance,\n  getCachedMessages,\n  getCachedTranslations,\n  I18nPerformanceMonitor,\n  preloadTranslations,\n  TranslationCache,\n} from '../i18n-performance';\n\n// ç®€åŒ–Mockæ•°æ® - åŒ¹é…æµ‹è¯•æœŸæœ›\nconst mockEnTranslations = {\n  common: { hello: 'Hello' },\n  navigation: { home: 'Home' },\n};\n\nconst mockZhTranslations = {\n  common: { hello: 'ä½ å¥½' },\n  navigation: { home: 'é¦–é¡µ' },\n};\n\n// Mock React cache\nvi.mock('react', () => ({\n  cache: (fn: (..._args: unknown[]) => unknown) => fn,\n}));\n\n// ä½¿ç”¨vi.hoistedç¡®ä¿Mockå‡½æ•°åœ¨å¯¼å…¥å‰å®šä¹‰\nconst { mockGetCachedMessages, mockGetCachedTranslations } = vi.hoisted(() => {\n  const hoistedMockGetCachedMessages = vi.fn();\n  const hoistedMockGetCachedTranslations = vi.fn();\n  return {\n    mockGetCachedMessages: hoistedMockGetCachedMessages,\n    mockGetCachedTranslations: hoistedMockGetCachedTranslations,\n  };\n});\n\n// Mock i18n-performanceæ¨¡å—\nvi.mock('../i18n-performance', async (importOriginal) => {\n  const actual = await importOriginal<typeof import('../i18n-performance')>();\n\n  // è®¾ç½®Mockå®ç°\n  mockGetCachedMessages.mockImplementation(async (locale: string) => {\n    if (locale === 'en') return mockEnTranslations;\n    if (locale === 'zh') return mockZhTranslations;\n    return {};\n  });\n\n  mockGetCachedTranslations.mockImplementation(\n    async (locale: string, namespace?: string) => {\n      const messages = await mockGetCachedMessages(locale);\n      if (namespace) {\n        return messages[namespace] || {};\n      }\n      return messages;\n    },\n  );\n\n  return {\n    ...actual,\n    getCachedMessages: mockGetCachedMessages,\n    getCachedTranslations: mockGetCachedTranslations,\n  };\n});\n\ndescribe('I18n Performance - Main Integration Tests', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    vi.useFakeTimers();\n    // Reset singleton instance\n    (TranslationCache as { instance?: unknown }).instance = undefined;\n    I18nPerformanceMonitor.reset();\n\n    // é‡æ–°è®¾ç½®Mockå®ç°\n    mockGetCachedMessages.mockImplementation(async (locale: string) => {\n      if (locale === 'en') return mockEnTranslations;\n      if (locale === 'zh') return mockZhTranslations;\n\n      // å¯¹äºæ— æ•ˆçš„localeï¼Œæ¨¡æ‹Ÿconsole.errorè°ƒç”¨å¹¶è¿”å›ç©ºå¯¹è±¡\n      if (locale === 'invalid-locale') {\n        console.error(\n          `Failed to load messages for locale ${locale}:`,\n          new Error('Mock error'),\n        );\n        return {};\n      }\n\n      return {};\n    });\n\n    mockGetCachedTranslations.mockImplementation(\n      async (locale: string, namespace?: string) => {\n        const messages = await mockGetCachedMessages(locale);\n        if (namespace) {\n          return messages[namespace] || {};\n        }\n        return messages;\n      },\n    );\n  });\n\n  afterEach(() => {\n    vi.useRealTimers();\n  });\n\n  describe('æ ¸å¿ƒå‡½æ•°å¯¼å‡ºéªŒè¯', () => {\n    it('should export all required functions', () => {\n      expect(getCachedMessages).toBeDefined();\n      expect(getCachedTranslations).toBeDefined();\n      expect(preloadTranslations).toBeDefined();\n      expect(TranslationCache).toBeDefined();\n      expect(I18nPerformanceMonitor).toBeDefined();\n      expect(evaluatePerformance).toBeDefined();\n    });\n  });\n\n  describe('åŸºæœ¬åŠŸèƒ½é›†æˆæµ‹è¯•', () => {\n    it('should load and cache messages for locale', async () => {\n      const messages = await getCachedMessages('en');\n\n      expect(messages).toEqual({\n        common: { hello: 'Hello' },\n        navigation: { home: 'Home' },\n      });\n    });\n\n    it('should return cached messages on subsequent calls', async () => {\n      const messages1 = await getCachedMessages('en');\n      const messages2 = await getCachedMessages('en');\n\n      expect(messages1).toBe(messages2);\n    });\n\n    it('should get all translations for locale', async () => {\n      const translations = await getCachedTranslations('en');\n\n      expect(translations).toEqual({\n        common: { hello: 'Hello' },\n        navigation: { home: 'Home' },\n      });\n    });\n\n    it('should get specific namespace translations', async () => {\n      const translations = await getCachedTranslations('en', 'common');\n\n      expect(translations).toEqual({ hello: 'Hello' });\n    });\n\n    it('should preload translations for multiple locales', async () => {\n      await preloadTranslations(['en', 'zh']);\n\n      // Verify both locales are loaded by checking cache\n      const cache = TranslationCache.getInstance();\n      const enMessages = cache.get('messages-en');\n      const zhMessages = cache.get('messages-zh');\n\n      expect(enMessages).toBeDefined();\n      expect(zhMessages).toBeDefined();\n    });\n  });\n\n  describe('çœŸå®ä½¿ç”¨åœºæ™¯æµ‹è¯•', () => {\n    it('should work with real-world usage pattern', async () => {\n      // Simulate loading translations\n      const _startTime = Date.now();\n      const messages = await getCachedMessages('en');\n      const loadTime = Date.now() - _startTime;\n\n      // Record performance metrics\n      I18nPerformanceMonitor.recordLoadTime(loadTime);\n      I18nPerformanceMonitor.recordCacheHit();\n\n      // Get performance evaluation\n      const metrics = I18nPerformanceMonitor.getMetrics();\n      const evaluation = evaluatePerformance(metrics);\n\n      expect(messages).toBeDefined();\n      expect(evaluation.grade).toMatch(/[A-F]/);\n    });\n\n    it('should handle cache warming scenario', async () => {\n      const locales = ['en', 'zh'];\n\n      // Preload translations\n      await preloadTranslations(locales);\n\n      // Verify all locales are cached\n      for (const locale of locales) {\n        const messages = await getCachedMessages(locale);\n        expect(messages).toBeDefined();\n      }\n    });\n\n    it('should handle error scenarios gracefully', async () => {\n      const consoleSpy = vi\n        .spyOn(console, 'error')\n        .mockImplementation(() => {});\n\n      const messages = await getCachedMessages('invalid-locale');\n\n      expect(messages).toEqual({});\n      expect(consoleSpy).toHaveBeenCalled();\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should maintain performance under load', async () => {\n      const promises = [];\n\n      // Simulate concurrent requests\n      for (let i = 0; i < 50; i++) {\n        promises.push(getCachedMessages('en'));\n        promises.push(getCachedTranslations('zh', 'common'));\n      }\n\n      const results = await Promise.all(promises);\n\n      // All requests should succeed\n      expect(results).toHaveLength(100);\n      results.forEach((result) => {\n        expect(result).toBeDefined();\n      });\n    });\n\n    it('should integrate with performance monitoring', async () => {\n      // Load some translations and record metrics\n      await getCachedMessages('en');\n      I18nPerformanceMonitor.recordLoadTime(50);\n      I18nPerformanceMonitor.recordCacheHit();\n\n      await getCachedMessages('zh');\n      I18nPerformanceMonitor.recordLoadTime(75);\n      I18nPerformanceMonitor.recordCacheHit();\n\n      const metrics = I18nPerformanceMonitor.getMetrics();\n      expect(metrics.averageLoadTime).toBe(62.5);\n      expect(metrics.totalRequests).toBe(2);\n      expect(metrics.cacheHitRate).toBe(100);\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ', () => {\n    it('should handle empty locale array in preload', async () => {\n      await expect(preloadTranslations([])).resolves.toBeUndefined();\n    });\n\n    it('should return empty object for non-existent namespace', async () => {\n      const translations = await getCachedTranslations('en', 'non-existent');\n\n      expect(translations).toEqual({});\n    });\n\n    it('should handle missing locale gracefully', async () => {\n      const consoleSpy = vi\n        .spyOn(console, 'error')\n        .mockImplementation(() => {});\n\n      const messages = await getCachedMessages('invalid-locale');\n\n      expect(messages).toEqual({});\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Failed to load messages for locale invalid-locale:',\n        expect.any(Error),\n      );\n\n      consoleSpy.mockRestore();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-validation-advanced-scenarios.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-validation-advanced.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-validation-basic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-validation-edge-cases.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/i18n-validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/locale-detection-exports.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":81,"column":14,"nodeType":"MemberExpression","endLine":81,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, expect, it } from 'vitest';\n\ndescribe('locale-detection exports', () => {\n  it('should export all locale detection functionality', async () => {\n    // Test that the main export file works\n    const localeDetection = await import('@/lib/locale-detection');\n\n    // Verify that exports are available\n    expect(localeDetection).toBeDefined();\n    expect(typeof localeDetection).toBe('object');\n\n    // Check for key exports that should be available\n    expect(localeDetection).toHaveProperty('SmartLocaleDetector');\n    expect(localeDetection).toHaveProperty('SUPPORTED_LOCALES');\n    expect(localeDetection).toHaveProperty('DEFAULT_LOCALE');\n\n    // Verify SmartLocaleDetector is a constructor\n    expect(typeof localeDetection.SmartLocaleDetector).toBe('function');\n  });\n\n  it('should re-export locale constants', async () => {\n    const localeDetection = await import('@/lib/locale-detection');\n\n    // Test constants are exported\n    expect(localeDetection.SUPPORTED_LOCALES).toBeDefined();\n    expect(localeDetection.DEFAULT_LOCALE).toBeDefined();\n    expect(Array.isArray(localeDetection.SUPPORTED_LOCALES)).toBe(true);\n    expect(typeof localeDetection.DEFAULT_LOCALE).toBe('string');\n  });\n\n  it('should re-export locale detection types', async () => {\n    // This tests that the types module is properly exported\n    // We can't directly test TypeScript types at runtime, but we can test\n    // that the module doesn't throw when imported\n    expect(async () => {\n      await import('@/lib/locale-detection-types');\n    }).not.toThrow();\n  });\n\n  it('should re-export locale detection hooks', async () => {\n    // Test that hooks are exported\n    const hooks = await import('@/lib/locale-detection-hooks');\n    expect(hooks).toBeDefined();\n    expect(typeof hooks).toBe('object');\n  });\n\n  it('should re-export SmartLocaleDetector class', async () => {\n    const { SmartLocaleDetector } = await import('@/lib/locale-detection');\n\n    // Test that we can create an instance\n    expect(() => new SmartLocaleDetector()).not.toThrow();\n\n    // Test that instance has expected methods\n    const detector = new SmartLocaleDetector();\n    expect(typeof detector.detectFromBrowser).toBe('function');\n    expect(typeof detector.detectSmartLocale).toBe('function');\n  });\n\n  it('should handle module loading errors gracefully', async () => {\n    // Test that the main module can be imported without errors\n    let importError = null;\n\n    try {\n      await import('@/lib/locale-detection');\n    } catch (error) {\n      importError = error;\n    }\n\n    expect(importError).toBeNull();\n  });\n\n  it('should maintain consistent exports structure', async () => {\n    const localeDetection = await import('@/lib/locale-detection');\n\n    // Test that the export structure is consistent\n    const exportKeys = Object.keys(localeDetection);\n    expect(exportKeys.length).toBeGreaterThan(0);\n\n    // Verify no undefined exports\n    exportKeys.forEach((key) => {\n      expect((localeDetection as Record<string, unknown>)[key]).toBeDefined();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/locale-detection-hooks.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/locale-detection.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/locale-detector.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/locale-storage.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/logger.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/metadata.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/airtable-env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/airtable-validations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/translations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/mocks/validations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/navigation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/performance-analytics.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/resend.test.ts","messages":[{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":49,"column":3,"nodeType":"VariableDeclaration","endLine":49,"endColumn":44},{"ruleId":"@next/next/no-assign-module-variable","severity":2,"message":"Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable","line":97,"column":7,"nodeType":"VariableDeclaration","endLine":97,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResendService' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":110,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResendService' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":243,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":243,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  DynamicImportModule,\n  ResendServicePrivate,\n} from '@/types/test-types';\n\n// Mock dependencies\nconst mockResendSend = vi.fn();\nconst mockResendInstance = {\n  emails: {\n    send: mockResendSend,\n  },\n};\nconst mockResend = vi.fn().mockImplementation(() => mockResendInstance);\n\nvi.mock('resend', () => ({\n  Resend: mockResend,\n}));\n\n// Use TypeScript Mock modules to bypass Vite's special handling\nvi.mock('@/../env.mjs', () => {\n  return {\n    env: {\n      RESEND_API_KEY: 'test-api-key',\n      EMAIL_FROM: 'test@tucsenberg.com',\n      EMAIL_REPLY_TO: 'contact@tucsenberg.com',\n      NODE_ENV: 'test',\n    },\n  };\n});\n\nvi.mock('./logger', async () => {\n  const mockLogger = await import('./mocks/logger');\n  return mockLogger;\n});\n\nvi.mock('./validations', async () => {\n  const mockValidations = await import('./mocks/validations');\n  return mockValidations;\n});\n\n// å…±äº«çš„Resendæµ‹è¯•è®¾ç½®\nconst setupResendTest = async () => {\n  // Clear mocks but preserve the mock functions\n  mockResendSend.mockReset();\n  mockResend.mockClear();\n\n  // Dynamic import to ensure mocks are applied\n  const module = await import('../resend');\n  const typedModule = module as DynamicImportModule;\n  const ResendService = typedModule.default || typedModule.ResendService;\n  return ResendService;\n};\n\nconst cleanupResendTest = () => {\n  vi.resetModules();\n};\n\ndescribe('resend - Service Initialization', () => {\n  let ResendServiceClass: any;\n\n  beforeEach(async () => {\n    ResendServiceClass = await setupResendTest();\n  });\n\n  afterEach(() => {\n    cleanupResendTest();\n  });\n\n  describe('ResendService initialization', () => {\n    it('should initialize successfully with valid API key', async () => {\n      const service = new ResendServiceClass();\n      expect(service.isReady()).toBe(true);\n      expect(mockResend).toHaveBeenCalledWith('test-api-key');\n    });\n\n    it('should handle missing API key gracefully', async () => {\n      // Create a service instance and manually test the missing API key scenario\n      // Since we can'_t easily mock the environment after module load,\n      // we'll test the behavior by checking the service state\n      const service = new ResendServiceClass();\n\n      // The service should be created and ready with our test API key\n      expect(service).toBeDefined();\n      expect(typeof service.isReady).toBe('function');\n      // With our mock API key, the service should be ready\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should use default email configuration when env vars are missing', async () => {\n      // Mock environment with minimal configuration\n      vi.stubEnv('RESEND_API_KEY', 'test-api-key');\n      vi.stubEnv('EMAIL_FROM', '');\n      vi.stubEnv('EMAIL_REPLY_TO', '');\n      vi.resetModules();\n\n      const module = await import('../resend');\n      const typedModule = module as DynamicImportModule;\n      const ServiceClass = typedModule.default || typedModule.ResendService;\n      const service = new ServiceClass();\n\n      expect(service).toBeDefined();\n      expect(typeof service.sendContactFormEmail).toBe('function');\n      expect(typeof service.isReady).toBe('function');\n    });\n  });\n});\n\ndescribe('resend - Email Operations', () => {\n  let ResendService: typeof import('../resend');\n\n  beforeEach(async () => {\n    ResendService = await setupResendTest();\n  });\n\n  afterEach(() => {\n    cleanupResendTest();\n  });\n\n  describe('sendContactFormEmail', () => {\n    const validEmailData = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john.doe@example.com',\n      company: 'Test Company',\n      message: 'This is a test message',\n      submittedAt: '2023-01-01T00:00:00Z',\n    };\n\n    it('should send contact form email successfully', async () => {\n      const service = new ResendServiceClass();\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'test-message-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      const result = await service.sendContactFormEmail(validEmailData);\n\n      expect(result).toBe('test-message-id');\n      expect(mockResendSend).toHaveBeenCalledWith(\n        expect.objectContaining({\n          from: 'test@tucsenberg.com',\n          to: ['contact@tucsenberg.com'],\n          replyTo: 'john.doe@example.com',\n          subject: expect.stringContaining('John Doe'),\n          html: expect.any(String),\n          text: expect.any(String),\n          tags: expect.arrayContaining([\n            { name: 'type', value: 'contact-form' },\n            { name: 'source', value: 'website' },\n          ]),\n        }),\n      );\n    });\n\n    it('should use custom subject when provided', async () => {\n      const service = new ResendServiceClass();\n      const dataWithSubject = { ...validEmailData, subject: 'Custom Subject' };\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'test-message-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      await service.sendContactFormEmail(dataWithSubject);\n\n      expect(mockResendSend).toHaveBeenCalledWith(\n        expect.objectContaining({\n          subject: 'Contact Form: Custom Subject',\n        }),\n      );\n    });\n\n    it('should throw error when service is not configured', async () => {\n      // Since we can'_t easily mock missing API key after module load,\n      // we'll test this by creating a service that fails due to other reasons\n      // and verify the error handling works correctly\n      const service = new ResendServiceClass();\n\n      // Mock the resend send to simulate service not configured scenario\n      mockResendSend.mockResolvedValue({\n        data: null,\n        error: { message: 'API key not configured' },\n      });\n\n      await expect(\n        service.sendContactFormEmail(validEmailData),\n      ).rejects.toThrow('Failed to send email');\n    });\n\n    it('should handle Resend API errors', async () => {\n      const service = new ResendServiceClass();\n      mockResendSend.mockResolvedValue({\n        data: null,\n        error: { message: 'API Error' },\n      });\n\n      await expect(\n        service.sendContactFormEmail(validEmailData),\n      ).rejects.toThrow('Failed to send email');\n    });\n\n    it('should handle network errors', async () => {\n      const service = new ResendServiceClass();\n      mockResendSend.mockRejectedValue(new Error('Network error'));\n\n      await expect(\n        service.sendContactFormEmail(validEmailData),\n      ).rejects.toThrow('Failed to send email');\n    });\n\n    it('should return unknown when message ID is not available', async () => {\n      const service = new ResendServiceClass();\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: null,\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      const result = await service.sendContactFormEmail(validEmailData);\n      expect(result).toBe('unknown');\n    });\n  });\n});\n\ndescribe('resend - Confirmation and Validation', () => {\n  let ResendService: typeof import('../resend');\n\n  beforeEach(async () => {\n    ResendService = await setupResendTest();\n  });\n\n  afterEach(() => {\n    cleanupResendTest();\n  });\n\n  describe('sendConfirmationEmail', () => {\n    const validEmailData = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john.doe@example.com',\n      company: 'Test Company',\n      message: 'This is a test message',\n      submittedAt: '2023-01-01T00:00:00Z',\n    };\n\n    it('should send confirmation email successfully', async () => {\n      const service = new ResendServiceClass();\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'confirmation-message-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      const result = await service.sendConfirmationEmail(validEmailData);\n\n      expect(result).toBe('confirmation-message-id');\n      expect(mockResendSend).toHaveBeenCalledWith(\n        expect.objectContaining({\n          from: 'test@tucsenberg.com',\n          to: ['john.doe@example.com'],\n          replyTo: 'contact@tucsenberg.com',\n          subject: 'Thank you for contacting us - Tucsenberg',\n          html: expect.any(String),\n          text: expect.any(String),\n          tags: expect.arrayContaining([\n            { name: 'type', value: 'confirmation' },\n          ]),\n        }),\n      );\n    });\n\n    it('should throw error when service is not configured', async () => {\n      // Test error handling by simulating API configuration error\n      const service = new ResendServiceClass();\n\n      // Mock the resend send to simulate service not configured scenario\n      mockResendSend.mockResolvedValue({\n        data: null,\n        error: { message: 'API key not configured' },\n      });\n\n      await expect(\n        service.sendConfirmationEmail(validEmailData),\n      ).rejects.toThrow('Failed to send confirmation email');\n    });\n\n    it('should handle confirmation email API errors', async () => {\n      const service = new ResendServiceClass();\n      mockResendSend.mockResolvedValue({\n        data: null,\n        error: { message: 'Confirmation API Error' },\n      });\n\n      await expect(\n        service.sendConfirmationEmail(validEmailData),\n      ).rejects.toThrow('Failed to send confirmation email');\n    });\n  });\n\n  describe('isReady', () => {\n    it('should return true when properly configured', () => {\n      const service = new ResendServiceClass();\n      expect(service.isReady()).toBe(true);\n    });\n\n    it('should return false when not configured', async () => {\n      // Since we can'_t easily mock missing API key after module load,\n      // we'll test that the service is ready with our test configuration\n      const service = new ResendServiceClass();\n\n      // With our mock API key, the service should be ready\n      expect(service.isReady()).toBe(true);\n    });\n  });\n\n  describe('Email content generation', () => {\n    it('should generate HTML and text content for contact emails', async () => {\n      const service = new ResendServiceClass();\n      const emailData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'john@example.com',\n        company: 'Test Co',\n        message: 'Test message',\n        submittedAt: '2023-01-01T00:00:00Z',\n      };\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'test-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      await service.sendContactFormEmail(emailData);\n\n      const callArgs = mockResendSend.mock.calls[0]?.[0];\n      expect(callArgs.html).toBeDefined();\n      expect(callArgs.text).toBeDefined();\n      expect(typeof callArgs.html).toBe('string');\n      expect(typeof callArgs.text).toBe('string');\n    });\n\n    it('should generate HTML and text content for confirmation emails', async () => {\n      const service = new ResendServiceClass();\n      const emailData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'john@example.com',\n        company: 'Test Co',\n        message: 'Test message',\n        submittedAt: '2023-01-01T00:00:00Z',\n      };\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'test-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      await service.sendConfirmationEmail(emailData);\n\n      const callArgs = mockResendSend.mock.calls[0]?.[0];\n      expect(callArgs.html).toBeDefined();\n      expect(callArgs.text).toBeDefined();\n      expect(typeof callArgs.html).toBe('string');\n      expect(typeof callArgs.text).toBe('string');\n    });\n  });\n\n  describe('Data validation and sanitization', () => {\n    it('should validate email data before sending', async () => {\n      const service = new ResendServiceClass();\n\n      // Directly mock the service's resend instance\n      mockResendSend.mockClear();\n      mockResendSend.mockResolvedValue({\n        data: { id: 'test-id' },\n        error: null,\n      });\n\n      // Override the service's resend instance with our mock\n      (service as ResendServicePrivate).resend = mockResendInstance;\n\n      const emailData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'john@example.com',\n        company: 'Test Co',\n        message: 'Test message',\n        submittedAt: '2023-01-01T00:00:00Z',\n      };\n\n      // Test that the service successfully processes valid email data\n      // This implicitly tests that validation passes\n      const result = await service.sendContactFormEmail(emailData);\n\n      // Verify that the email was sent successfully (validation passed)\n      expect(result).toBe('test-id');\n      expect(mockResendSend).toHaveBeenCalledWith(\n        expect.objectContaining({\n          from: 'test@tucsenberg.com',\n          to: ['contact@tucsenberg.com'],\n          replyTo: 'john@example.com',\n        }),\n      );\n    });\n\n    it('should handle validation errors', async () => {\n      const service = new ResendServiceClass();\n      const { emailTemplateDataSchema } = await import('./mocks/validations');\n\n      // Use vi.mocked to properly mock the function\n      vi.mocked(emailTemplateDataSchema.parse).mockImplementation(() => {\n        throw new Error('Validation failed');\n      });\n\n      const emailData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'invalid-email',\n        company: 'Test Co',\n        message: 'Test message',\n        submittedAt: '2023-01-01T00:00:00Z',\n      };\n\n      await expect(service.sendContactFormEmail(emailData)).rejects.toThrow(\n        'Failed to send email',\n      );\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/seo-metadata.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/site-config.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/structured-data.test.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (616). Maximum allowed is 600.","line":67,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":801,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\n// Import after mocks\nimport {\n  generateArticleSchema,\n  generateBreadcrumbSchema,\n  generateFAQSchema,\n  generateJSONLD,\n  generateLocalBusinessSchema,\n  generateLocalizedStructuredData,\n  generateProductSchema,\n  generateStructuredData,\n} from '../structured-data';\n\n// æµ‹è¯•å¸¸é‡å®šä¹‰\nconst TEST_COUNTS = {\n  HOME_STRUCTURED_DATA: 2, // Organization + Website\n  BLOG_STRUCTURED_DATA: 3, // Organization + Website + Article\n  PRODUCTS_STRUCTURED_DATA: 3, // Organization + Website + Product\n  FALLBACK_STRUCTURED_DATA: 2, // Organization + Website (fallback)\n} as const;\n\n// Use vi.hoisted to ensure proper mock setup\nconst { mockGetTranslations, mockGenerateCanonicalURL, mockRecordError } =\n  vi.hoisted(() => ({\n    mockGetTranslations: vi.fn(),\n    mockGenerateCanonicalURL: vi.fn(),\n    mockRecordError: vi.fn(),\n  }));\n\nvi.mock('next-intl/server', () => ({\n  getTranslations: mockGetTranslations,\n}));\n\nvi.mock('@/services/url-generator', () => ({\n  generateCanonicalURL: mockGenerateCanonicalURL,\n}));\n\nvi.mock('@/lib/i18n-performance', () => ({\n  I18nPerformanceMonitor: {\n    getInstance: () => ({\n      trackTranslationUsage: vi.fn(),\n    }),\n    recordError: mockRecordError,\n  },\n}));\n\nvi.mock('@/i18n/routing', () => ({\n  routing: {\n    locales: ['en', 'zh'],\n    defaultLocale: 'en',\n  },\n}));\n\nvi.mock('@/config/paths', () => ({\n  SITE_CONFIG: {\n    name: 'Tucsenberg',\n    description: 'Modern Enterprise Platform',\n    baseUrl: 'https://tucsenberg.com',\n    author: 'Tucsenberg Team',\n    social: {\n      twitter: '@tucsenberg',\n      linkedin: 'company/tucsenberg',\n    },\n  },\n}));\n\ndescribe('Structured Data Generation', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // Mock translation function\n    const mockT = vi.fn((key: string, options?: { defaultValue?: string }) => {\n      const translations: Record<string, string> = {\n        'organization.name': 'Tucsenberg',\n        'organization.description': 'Modern Enterprise Platform',\n        'website.name': 'Tucsenberg',\n        'website.description': 'Enterprise Solutions',\n        'breadcrumb.home': 'Home',\n        'breadcrumb.about': 'About',\n        'breadcrumb.contact': 'Contact',\n        'article.author': 'Tucsenberg Team',\n        'product.brand': 'Tucsenberg',\n        'faq.question1': 'What is Tucsenberg?',\n        'faq.answer1': 'A modern enterprise platform',\n        'business.name': 'Tucsenberg Inc.',\n        'business.address': '123 Business St, City, Country',\n        'business.phone': '+1-234-567-8900',\n      };\n      const safeTranslations = new Map(Object.entries(translations));\n      return safeTranslations.get(key) || options?.defaultValue || key;\n    });\n\n    mockGetTranslations.mockResolvedValue(mockT);\n    mockGenerateCanonicalURL.mockReturnValue('https://tucsenberg.com/test');\n  });\n\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  describe('generateLocalizedStructuredData - Organization', () => {\n    it('should generate valid organization schema', async () => {\n      const schema = await generateLocalizedStructuredData(\n        'en',\n        'Organization',\n        {},\n      );\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'name': 'Tucsenberg',\n        'description': 'Modern Enterprise Platform',\n        'url': 'https://tucsenberg.com',\n        'logo': 'https://tucsenberg.com/logo.png',\n        'contactPoint': {\n          '@type': 'ContactPoint',\n          'telephone': '+1-555-0123',\n          'contactType': 'customer service',\n          'availableLanguage': ['en', 'zh'],\n        },\n        'sameAs': [\n          'https://twitter.com/tucsenberg',\n          'https://linkedin.com/company/tucsenberg',\n          'https://github.com/tucsenberg',\n        ],\n      });\n    });\n\n    it('should handle different locales', async () => {\n      await generateLocalizedStructuredData('zh', 'Organization', {});\n\n      expect(mockGetTranslations).toHaveBeenCalledWith({\n        locale: 'zh',\n        namespace: 'structured-data',\n      });\n    });\n  });\n\n  describe('generateLocalizedStructuredData - WebSite', () => {\n    it('should generate valid website schema', async () => {\n      const schema = await generateLocalizedStructuredData('en', 'WebSite', {});\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'WebSite',\n        'name': 'Tucsenberg',\n        'description': 'Enterprise Solutions',\n        'url': 'https://tucsenberg.com',\n        'potentialAction': {\n          '@type': 'SearchAction',\n          'target': 'https://tucsenberg.com/search?q={search_term_string}',\n          'query-input': 'required name=search_term_string',\n        },\n        'inLanguage': ['en', 'zh'],\n      });\n    });\n  });\n\n  describe('generateBreadcrumbSchema', () => {\n    it('should generate breadcrumb schema for nested pages', async () => {\n      const breadcrumbs = [\n        { name: 'Home', url: 'https://tucsenberg.com/' },\n        { name: 'About', url: 'https://tucsenberg.com/about' },\n        { name: 'Contact', url: 'https://tucsenberg.com/contact' },\n      ];\n\n      const schema = await generateBreadcrumbSchema(breadcrumbs, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'BreadcrumbList',\n        'itemListElement': [\n          {\n            '@type': 'ListItem',\n            'position': 1,\n            'name': 'Home',\n            'item': 'https://tucsenberg.com/',\n          },\n          {\n            '@type': 'ListItem',\n            'position': 2,\n            'name': 'About',\n            'item': 'https://tucsenberg.com/about',\n          },\n          {\n            '@type': 'ListItem',\n            'position': 3,\n            'name': 'Contact',\n            'item': 'https://tucsenberg.com/contact',\n          },\n        ],\n      });\n    });\n\n    it('should handle empty breadcrumbs', async () => {\n      const schema = await generateBreadcrumbSchema([], 'en');\n\n      expect(schema.itemListElement).toEqual([]);\n    });\n  });\n\n  describe('generateArticleSchema', () => {\n    it('should generate valid article schema', async () => {\n      const articleData = {\n        title: 'Test Article',\n        description: 'Test Description',\n        author: 'John Doe',\n        publishedTime: '2023-01-01T00:00:00Z',\n        modifiedTime: '2023-01-02T00:00:00Z',\n        image: '/test-image.jpg',\n        section: 'Technology',\n      };\n\n      const schema = await generateArticleSchema(articleData, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Article',\n        'headline': 'Test Article',\n        'description': 'Test Description',\n        'author': {\n          '@type': 'Person',\n          'name': 'John Doe',\n        },\n        'publisher': {\n          '@type': 'Organization',\n          'name': 'Tucsenberg',\n          'logo': {\n            '@type': 'ImageObject',\n            'url': 'https://tucsenberg.com/logo.png',\n          },\n        },\n        'datePublished': '2023-01-01T00:00:00Z',\n        'dateModified': '2023-01-02T00:00:00Z',\n        'image': {\n          '@type': 'ImageObject',\n          'url': '/test-image.jpg',\n        },\n        'section': 'Technology',\n        'inLanguage': 'en',\n        'mainEntityOfPage': {\n          '@type': 'WebPage',\n          '@id': 'https://tucsenberg.com/test',\n        },\n      });\n    });\n\n    it('should handle missing optional fields', async () => {\n      const articleData = {\n        title: 'Test Article',\n        description: 'Test Description',\n      };\n\n      const schema = await generateArticleSchema(articleData, 'en');\n\n      expect(schema.author).toEqual({\n        '@type': 'Person',\n        'name': 'Tucsenberg Team',\n      });\n      expect(schema.datePublished).toBeDefined();\n      expect(schema.dateModified).toBeDefined();\n    });\n  });\n\n  describe('generateProductSchema', () => {\n    it('should generate valid product schema', async () => {\n      const productData = {\n        name: 'Enterprise Solution',\n        description: 'Advanced business platform',\n        image: '/product-image.jpg',\n        price: '999.00',\n        currency: 'USD',\n        availability: 'InStock' as const,\n        brand: 'Tucsenberg',\n        sku: 'ENT-001',\n      };\n\n      const schema = await generateProductSchema(productData, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Product',\n        'name': 'Enterprise Solution',\n        'description': 'Advanced business platform',\n        'image': ['/product-image.jpg'],\n        'manufacturer': {\n          '@type': 'Organization',\n          'name': 'Tucsenberg',\n        },\n        'brand': {\n          '@type': 'Brand',\n          'name': 'Tucsenberg',\n        },\n        'sku': 'ENT-001',\n        'offers': {\n          '@type': 'Offer',\n          'price': 999,\n          'priceCurrency': 'USD',\n          'availability': 'InStock',\n        },\n      });\n    });\n\n    it('should generate product schema without offers when no price provided', async () => {\n      const productData = {\n        name: 'Free Tool',\n        description: 'Open source utility',\n        image: '/tool-image.jpg',\n        brand: 'Tucsenberg',\n        sku: 'FREE-001',\n        // No price provided\n      };\n\n      const schema = await generateProductSchema(productData, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Product',\n        'name': 'Free Tool',\n        'description': 'Open source utility',\n        'image': ['/tool-image.jpg'],\n        'manufacturer': {\n          '@type': 'Organization',\n          'name': 'Tucsenberg',\n        },\n        'brand': {\n          '@type': 'Brand',\n          'name': 'Tucsenberg',\n        },\n        'sku': 'FREE-001',\n        'offers': undefined, // This should cover the undefined case on line 170\n      });\n    });\n  });\n\n  describe('generateFAQSchema', () => {\n    it('should generate valid FAQ schema', async () => {\n      const faqData = [\n        {\n          question: 'What is Tucsenberg?',\n          answer: 'A modern enterprise platform',\n        },\n        {\n          question: 'How does it work?',\n          answer: 'Through advanced technology',\n        },\n      ];\n\n      const schema = await generateFAQSchema(faqData, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'FAQPage',\n        'mainEntity': [\n          {\n            '@type': 'Question',\n            'name': 'What is Tucsenberg?',\n            'acceptedAnswer': {\n              '@type': 'Answer',\n              'text': 'A modern enterprise platform',\n            },\n          },\n          {\n            '@type': 'Question',\n            'name': 'How does it work?',\n            'acceptedAnswer': {\n              '@type': 'Answer',\n              'text': 'Through advanced technology',\n            },\n          },\n        ],\n      });\n    });\n  });\n\n  describe('generateLocalBusinessSchema', () => {\n    it('should generate valid local business schema', async () => {\n      const businessData = {\n        name: 'Tucsenberg Office',\n        address: '123 Business St, City, Country',\n        phone: '+1-234-567-8900',\n        email: 'contact@tucsenberg.com',\n        openingHours: ['Mo-Fr 09:00-17:00'],\n        priceRange: '$$$',\n      };\n\n      const schema = await generateLocalBusinessSchema(businessData, 'en');\n\n      expect(schema).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'LocalBusiness',\n        'name': 'Tucsenberg Office',\n        'address': {\n          '@type': 'PostalAddress',\n          'streetAddress': '123 Business St, City, Country',\n        },\n        'telephone': '+1-234-567-8900',\n        'email': 'contact@tucsenberg.com',\n        'openingHours': ['Mo-Fr 09:00-17:00'],\n        'priceRange': '$$$',\n        'url': 'https://tucsenberg.com',\n      });\n    });\n  });\n\n  describe('generateStructuredData', () => {\n    it('should generate structured data for home page', async () => {\n      const data = await generateStructuredData('home', 'en');\n\n      expect(data).toHaveLength(TEST_COUNTS.HOME_STRUCTURED_DATA); // Organization + Website\n      expect(data[0]['@type']).toBe('Organization');\n      expect(data[1]['@type']).toBe('WebSite');\n    });\n\n    it('should generate structured data for blog page', async () => {\n      const articleData = {\n        title: 'Blog Post',\n        description: 'Blog Description',\n      };\n\n      const data = await generateStructuredData('blog', 'en', {\n        article: articleData,\n      });\n\n      expect(data).toHaveLength(TEST_COUNTS.BLOG_STRUCTURED_DATA); // Organization + Website + Article\n      expect(data[2]['@type']).toBe('Article');\n    });\n\n    it('should generate structured data for products page', async () => {\n      const productData = {\n        name: 'Product',\n        description: 'Product Description',\n        price: '100.00',\n        currency: 'USD',\n        availability: 'InStock' as const,\n      };\n\n      const data = await generateStructuredData('products', 'en', {\n        product: productData,\n      });\n\n      expect(data).toHaveLength(TEST_COUNTS.PRODUCTS_STRUCTURED_DATA); // Organization + Website + Product\n      expect(data[2]['@type']).toBe('Product');\n    });\n\n    it('should handle unknown page types', async () => {\n      const data = await generateStructuredData('home', 'en');\n\n      expect(data).toHaveLength(TEST_COUNTS.FALLBACK_STRUCTURED_DATA); // Organization + Website (fallback)\n    });\n  });\n\n  describe('é”™è¯¯å¤„ç†å’Œè¾¹ç¼˜æƒ…å†µ', () => {\n    it('should handle translation errors gracefully', async () => {\n      // Mock getTranslations to throw an error\n      mockGetTranslations.mockRejectedValueOnce(new Error('Translation error'));\n\n      const data = await generateLocalizedStructuredData(\n        'en',\n        'Organization',\n        {},\n      );\n\n      // Should return basic structure even when translation fails\n      expect(data).toHaveProperty('@context', 'https://schema.org');\n      expect(data).toHaveProperty('@type', 'Organization');\n    });\n\n    it('should handle invalid structured data types', async () => {\n      const data = await generateLocalizedStructuredData(\n        'en',\n        'InvalidType' as any,\n        {},\n      );\n\n      // Should return basic structure for unknown types\n      expect(data).toHaveProperty('@context', 'https://schema.org');\n      expect(data).toHaveProperty('@type', 'InvalidType');\n    });\n\n    it('should handle null and undefined data inputs', async () => {\n      const testCases = [\n        { type: 'Organization', data: null },\n        { type: 'WebSite', data: undefined },\n        { type: 'Article', data: {} },\n      ] as const;\n\n      for (const testCase of testCases) {\n        const data = await generateLocalizedStructuredData(\n          'en',\n          testCase.type,\n          testCase.data as any,\n        );\n\n        expect(data).toHaveProperty('@context', 'https://schema.org');\n        expect(data).toHaveProperty('@type', testCase.type);\n      }\n    });\n\n    it('should handle malformed article data', async () => {\n      const malformedData = {\n        title: 'Test Article',\n        description: 'Test Description',\n        publishedTime: '2023-01-01T00:00:00Z',\n        url: 'https://example.com/test',\n        invalidProperty: 'should be ignored',\n      };\n\n      const data = await generateLocalizedStructuredData(\n        'en',\n        'Article',\n        malformedData,\n      );\n\n      expect(data).toHaveProperty('@context', 'https://schema.org');\n      expect(data).toHaveProperty('@type', 'Article');\n    });\n\n    it('should handle malformed product data', async () => {\n      const malformedData = {\n        name: '',\n        price: 'invalid-price',\n        currency: null,\n        availability: 'InvalidStatus',\n      };\n\n      const data = await generateLocalizedStructuredData(\n        'en',\n        'Product',\n        malformedData,\n      );\n\n      expect(data).toHaveProperty('@context', 'https://schema.org');\n      expect(data).toHaveProperty('@type', 'Product');\n    });\n  });\n\n  describe('JSON-LD ç”Ÿæˆæµ‹è¯•', () => {\n    it('should generate valid JSON-LD string', () => {\n      const testData = {\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'name': 'Test Organization',\n      };\n\n      const jsonLD = generateJSONLD(testData);\n\n      // Should be valid JSON\n      expect(() => JSON.parse(jsonLD)).not.toThrow();\n\n      // Should be properly formatted\n      expect(jsonLD).toContain('\"@context\"');\n      expect(jsonLD).toContain('\"@type\"');\n      expect(jsonLD).toContain('Test Organization');\n    });\n\n    it('should handle complex nested objects in JSON-LD', () => {\n      const complexData = {\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'address': {\n          '@type': 'PostalAddress',\n          'streetAddress': '123 Main St',\n          'addressLocality': 'City',\n        },\n        'contactPoint': [\n          {\n            '@type': 'ContactPoint',\n            'telephone': '+1-555-123-4567',\n            'contactType': 'customer service',\n          },\n        ],\n      };\n\n      const jsonLD = generateJSONLD(complexData);\n\n      expect(() => JSON.parse(jsonLD)).not.toThrow();\n\n      const parsed = JSON.parse(jsonLD);\n      expect(parsed.address).toHaveProperty('@type', 'PostalAddress');\n      expect(parsed.contactPoint).toHaveLength(1);\n    });\n\n    it('should handle null and undefined values in JSON-LD', () => {\n      const dataWithNulls = {\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'name': 'Test',\n        'description': null,\n        'url': undefined,\n      };\n\n      const jsonLD = generateJSONLD(dataWithNulls);\n\n      expect(() => JSON.parse(jsonLD)).not.toThrow();\n\n      const parsed = JSON.parse(jsonLD);\n      expect(parsed.description).toBeNull();\n      expect(parsed).not.toHaveProperty('url'); // undefined should be omitted\n    });\n  });\n\n  describe('æ€§èƒ½å’Œå†…å­˜æµ‹è¯•', () => {\n    it('should handle repeated generation efficiently', async () => {\n      const startTime = performance.now();\n\n      // Generate structured data multiple times\n      for (let i = 0; i < 100; i++) {\n        await generateStructuredData('home', 'en');\n        await generateLocalizedStructuredData('en', 'Organization', {});\n      }\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      // Should complete within reasonable time (less than 1000ms)\n      expect(duration).toBeLessThan(1000);\n    });\n\n    it('should not create memory leaks with repeated calls', async () => {\n      const initialMemory =\n        (performance as unknown).memory?.usedJSHeapSize || 0;\n\n      // Perform many operations\n      for (let i = 0; i < 1000; i++) {\n        await generateLocalizedStructuredData('en', 'Organization', {});\n        generateJSONLD({ test: 'data' });\n      }\n\n      // Force garbage collection if available\n      if (global.gc) {\n        global.gc();\n      }\n\n      const finalMemory = (performance as unknown).memory?.usedJSHeapSize || 0;\n      const memoryIncrease = finalMemory - initialMemory;\n\n      // Memory increase should be minimal (less than 5MB)\n      expect(memoryIncrease).toBeLessThan(5 * 1024 * 1024);\n    });\n  });\n\n  describe('generateJSONLD', () => {\n    it('should generate valid JSON-LD string', () => {\n      const testData = {\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'name': 'Test Organization',\n      };\n\n      const result = generateJSONLD(testData);\n\n      expect(result).toBe(JSON.stringify(testData, null, 2));\n      expect(() => JSON.parse(result)).not.toThrow();\n    });\n\n    it('should handle complex nested objects', () => {\n      const complexData = {\n        '@context': 'https://schema.org',\n        '@type': 'Article',\n        'author': {\n          '@type': 'Person',\n          'name': 'John Doe',\n        },\n        'publisher': {\n          '@type': 'Organization',\n          'name': 'Test Publisher',\n          'logo': {\n            '@type': 'ImageObject',\n            'url': 'https://example.com/logo.png',\n          },\n        },\n      };\n\n      const result = generateJSONLD(complexData);\n\n      expect(result).toContain('\"@context\": \"https://schema.org\"');\n      expect(result).toContain('\"@type\": \"Article\"');\n      expect(result).toContain('\"name\": \"John Doe\"');\n      expect(() => JSON.parse(result)).not.toThrow();\n    });\n\n    it('should handle null and undefined values', () => {\n      const dataWithNulls = {\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n        'name': 'Test',\n        'description': null,\n        'url': undefined,\n      };\n\n      const result = generateJSONLD(dataWithNulls);\n\n      expect(() => JSON.parse(result)).not.toThrow();\n      const parsed = JSON.parse(result);\n      expect(parsed.description).toBeNull();\n      expect(parsed).not.toHaveProperty('url');\n    });\n\n    it('should handle empty objects and arrays', () => {\n      const emptyData = {};\n      const result = generateJSONLD(emptyData);\n\n      expect(result).toBe('{}');\n      expect(() => JSON.parse(result)).not.toThrow();\n    });\n  });\n\n  describe('generateLocalizedStructuredData - Error Handling', () => {\n    beforeEach(() => {\n      // Reset mocks\n      vi.clearAllMocks();\n    });\n\n    it('should handle translation errors gracefully', async () => {\n      // Mock getTranslations to throw an error\n      const mockGetTranslationsError = vi.mocked(\n        await import('next-intl/server'),\n      ).getTranslations;\n      mockGetTranslationsError.mockRejectedValueOnce(\n        new Error('Translation failed'),\n      );\n\n      const result = await generateLocalizedStructuredData(\n        'en',\n        'Organization',\n        {},\n      );\n\n      expect(result).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n      });\n    });\n\n    it('should handle unknown structured data types', async () => {\n      const result = await generateLocalizedStructuredData(\n        'en',\n        'UnknownType' as any,\n        {},\n      );\n\n      expect(result).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'UnknownType',\n      });\n    });\n\n    it('should handle non-Error exceptions', async () => {\n      // Mock getTranslations to throw a non-Error object\n      const mockGetTranslationsString = vi.mocked(\n        await import('next-intl/server'),\n      ).getTranslations;\n      mockGetTranslationsString.mockRejectedValueOnce('String error');\n\n      const result = await generateLocalizedStructuredData(\n        'en',\n        'Organization',\n        {},\n      );\n\n      expect(result).toEqual({\n        '@context': 'https://schema.org',\n        '@type': 'Organization',\n      });\n    });\n\n    it('should record errors in I18nPerformanceMonitor', async () => {\n      // Mock getTranslations to throw an Error\n      mockGetTranslations.mockRejectedValueOnce(\n        new Error('Translation failed'),\n      );\n\n      await generateLocalizedStructuredData('en', 'Organization', {});\n\n      expect(mockRecordError).toHaveBeenCalled();\n    });\n  });\n\n  describe('BreadcrumbList Generation', () => {\n    it('should generate breadcrumb structured data', async () => {\n      const breadcrumbData = {\n        items: [\n          { name: 'Home', url: '/', position: 1 },\n          { name: 'Products', url: '/products', position: 2 },\n          { name: 'Category', url: '/products/category', position: 3 },\n        ],\n      };\n\n      const result = await generateLocalizedStructuredData(\n        'en',\n        'BreadcrumbList',\n        breadcrumbData,\n      );\n\n      expect(result['@type']).toBe('BreadcrumbList');\n      expect(result['@context']).toBe('https://schema.org');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/tech-stack-data.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/theme-analytics.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/theme-analytics/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/translation-benchmarks.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/translation-manager-core.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UnsafeLocaleCode' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  MockTranslationManagerConfig,\n  TranslationManagerPrivate,\n  UnsafeLocaleCode,\n} from '@/types/test-types';\nimport type { TranslationManagerConfig } from '@/types/translation-manager';\nimport { TranslationManagerCore } from '@/lib/translation-manager-core';\n\n// Mocké…ç½® - ä½¿ç”¨vi.hoistedç¡®ä¿Mockåœ¨æ¨¡å—å¯¼å…¥å‰è®¾ç½®\nconst { mockTranslationQualityChecker, mockTranslationUtils } = vi.hoisted(\n  () => ({\n    mockTranslationQualityChecker: {\n      checkTranslationQuality: vi.fn(),\n      validateTranslations: vi.fn(),\n      generateQualityReport: vi.fn(),\n      checkLingoTranslation: vi.fn(),\n      validateTranslationConsistency: vi.fn(),\n      getTotalTranslationKeys: vi.fn().mockReturnValue(10),\n      clearQualityCache: vi.fn(),\n      getCacheStats: vi.fn().mockReturnValue({ size: 10, hitRate: 0.85 }),\n    },\n    mockTranslationUtils: {\n      calculateConfidence: vi.fn().mockReturnValue(0.8),\n      flattenTranslations: vi\n        .fn()\n        .mockReturnValue({ hello: 'Hello', world: 'World' }),\n      generateRecommendations: vi.fn().mockReturnValue([]),\n      generateSuggestions: vi.fn().mockReturnValue([]),\n      getNestedValue: vi.fn().mockReturnValue('Hello'),\n      isEmptyTranslation: vi.fn().mockReturnValue(false),\n    },\n  }),\n);\n\n// Mockå¤–éƒ¨ä¾èµ–\nvi.mock('../translation-quality-checker', () => ({\n  TranslationQualityChecker: vi.fn().mockImplementation(() => ({\n    ...mockTranslationQualityChecker,\n    checkLingoTranslation: vi.fn().mockResolvedValue({\n      score: 90,\n      confidence: 0.9,\n      issues: [],\n      suggestions: [],\n    }),\n    validateTranslationConsistency: vi.fn().mockResolvedValue({\n      isValid: false,\n      score: 0.7,\n      issues: [\n        {\n          type: 'missing',\n          severity: 'medium',\n          message: 'Missing translation for key: world',\n        },\n      ],\n      recommendations: ['Add missing translations'],\n      timestamp: new Date().toISOString(),\n    }),\n    getTotalTranslationKeys: vi.fn().mockReturnValue(10),\n    clearQualityCache: vi.fn(),\n    getCacheStats: vi.fn().mockReturnValue({ size: 10, hitRate: 0.85 }),\n  })),\n}));\n\nvi.mock('../translation-utils', () => ({\n  ...mockTranslationUtils,\n  flattenTranslations: vi\n    .fn()\n    .mockReturnValue({ hello: 'Hello', world: 'World' }),\n}));\n\n// å…±äº«çš„ç¿»è¯‘ç®¡ç†å™¨æ ¸å¿ƒæµ‹è¯•è®¾ç½®\nconst setupTranslationManagerCoreTest = () => {\n  vi.clearAllMocks();\n\n  const _defaultConfig: TranslationManagerConfig = {\n    locales: ['en', 'zh'],\n    defaultLocale: 'en',\n    messagesDir: '/mock/messages',\n    qualityThresholds: {\n      minScore: 0.8,\n      maxIssues: 5,\n      criticalIssueThreshold: 2,\n    },\n    lingo: {\n      enabled: false,\n      apiKey: 'test-api-key',\n      projectId: 'test-project',\n      baseUrl: 'https://api.lingo.dev',\n    },\n  };\n\n  const manager = new TranslationManagerCore(_defaultConfig);\n  return { manager, _defaultConfig };\n};\n\nconst cleanupTranslationManagerCoreTest = () => {\n  vi.restoreAllMocks();\n};\n\ndescribe('TranslationManagerCore - Initialization and Configuration', () => {\n  let manager: TranslationManagerCore;\n  let _defaultConfig: TranslationManagerConfig;\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    _defaultConfig = {\n      locales: ['en', 'zh'],\n      defaultLocale: 'en',\n      messagesDir: '/mock/messages',\n      lingo: {\n        enabled: false,\n        apiKey: 'test-api-key',\n        projectId: 'test-project',\n        baseUrl: 'https://api.lingo.dev',\n      },\n      qualityThresholds: {\n        minScore: 0.8,\n        maxIssues: 5,\n        criticalIssueThreshold: 2,\n      },\n    };\n\n    manager = new TranslationManagerCore(_defaultConfig);\n\n    // ç›´æ¥Mock managerçš„qualityCheckerå±æ€§\n    manager['qualityChecker'] = {\n      checkLingoTranslation: vi.fn().mockResolvedValue({\n        score: 90,\n        confidence: 0.9,\n        issues: [],\n        suggestions: [],\n      }),\n      validateTranslationConsistency: vi.fn().mockResolvedValue({\n        isValid: false,\n        score: 0.7,\n        issues: [\n          {\n            type: 'missing',\n            severity: 'medium',\n            message: 'Missing translation for key: world',\n          },\n        ],\n        recommendations: ['Add missing translations'],\n        timestamp: new Date().toISOString(),\n      }),\n      getTotalTranslationKeys: vi.fn().mockReturnValue(10),\n      clearQualityCache: vi.fn(),\n      getCacheStats: vi.fn().mockReturnValue({ size: 10, hitRate: 0.85 }),\n    } as TranslationManagerPrivate;\n\n    // Mock translationsæ•°æ®ï¼Œç¡®ä¿getTranslationsForLocaleè¿”å›æœ‰æ•ˆæ•°æ®\n    manager['translations'] = {\n      en: { hello: 'Hello', world: 'World' },\n      zh: { hello: 'ä½ å¥½', world: 'ä¸–ç•Œ' },\n    };\n  });\n\n  describe('æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–', () => {\n    it('åº”è¯¥æ­£ç¡®åˆå§‹åŒ–TranslationManagerCore', () => {\n      expect(manager).toBeInstanceOf(TranslationManagerCore);\n    });\n\n    it('åº”è¯¥ä½¿ç”¨æä¾›çš„é…ç½®', () => {\n      const config = manager.getConfig();\n      expect(config).toEqual(_defaultConfig);\n    });\n\n    it('åº”è¯¥ä½¿ç”¨é»˜è®¤é…ç½®å½“æ²¡æœ‰æä¾›é…ç½®æ—¶', () => {\n      const defaultConfigForTest = {\n        locales: ['en', 'zh'],\n        defaultLocale: 'en' as const,\n        messagesDir: '/default/messages',\n        lingo: { enabled: false },\n        qualityThresholds: {\n          minScore: 0.7,\n          maxIssues: 10,\n          criticalIssueThreshold: 3,\n        },\n      };\n      const managerWithDefaults = new TranslationManagerCore(\n        defaultConfigForTest as MockTranslationManagerConfig,\n      );\n      const config = managerWithDefaults.getConfig();\n\n      expect(config).toBeDefined();\n      expect(config.qualityThresholds).toBeDefined();\n      expect(config.locales).toContain('en');\n      expect(config.locales).toContain('zh');\n    });\n  });\n});\n\ndescribe('TranslationManagerCore - Data Management', () => {\n  let manager: TranslationManagerCore;\n  let _defaultConfig: TranslationManagerConfig;\n\n  beforeEach(() => {\n    const setup = setupTranslationManagerCoreTest();\n    manager = setup.manager;\n    _defaultConfig = setup._defaultConfig;\n    // é»˜è®¤é…ç½®å·²è®¾ç½®ä½†åœ¨æ­¤æµ‹è¯•ä¸­æœªç›´æ¥ä½¿ç”¨\n\n    // ç›´æ¥Mock managerçš„qualityCheckerå±æ€§\n    manager['qualityChecker'] = {\n      checkLingoTranslation: vi.fn().mockResolvedValue({\n        score: 90,\n        confidence: 0.9,\n        issues: [],\n        suggestions: [],\n      }),\n      validateTranslationConsistency: vi.fn().mockResolvedValue({\n        isValid: false,\n        score: 0.7,\n        issues: [\n          {\n            type: 'missing',\n            severity: 'medium',\n            message: 'Missing translation for key: world',\n          },\n        ],\n        recommendations: ['Add missing translations'],\n        timestamp: new Date().toISOString(),\n      }),\n      getTotalTranslationKeys: vi.fn().mockReturnValue(10),\n      clearQualityCache: vi.fn(),\n      getCacheStats: vi.fn().mockReturnValue({ size: 10, hitRate: 0.85 }),\n    } as TranslationManagerPrivate;\n\n    // Mock translationsæ•°æ®ï¼Œç¡®ä¿getTranslationsForLocaleè¿”å›æœ‰æ•ˆæ•°æ®\n    manager['translations'] = {\n      en: { hello: 'Hello', world: 'World' },\n      zh: { hello: 'ä½ å¥½', world: 'ä¸–ç•Œ' },\n    };\n  });\n\n  afterEach(() => {\n    cleanupTranslationManagerCoreTest();\n  });\n\n  describe('ç¿»è¯‘æ•°æ®ç®¡ç†', () => {\n    it('åº”è¯¥èƒ½å¤ŸåŠ è½½ç¿»è¯‘æ•°æ®', async () => {\n      // æ¨¡æ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ“ä½œ\n      const mockFs = {\n        readFileSync: vi\n          .fn()\n          .mockReturnValue('{\"hello\": \"Hello\", \"world\": \"World\"}'),\n      };\n      const mockPath = {\n        join: vi.fn().mockReturnValue('/mock/messages/en.json'),\n      };\n\n      vi.doMock('fs', () => mockFs);\n      vi.doMock('path', () => mockPath);\n\n      await expect(manager.reloadTranslations()).resolves.not.toThrow();\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿè·å–ç‰¹å®šè¯­è¨€çš„ç¿»è¯‘', () => {\n      // ä½¿ç”¨getAllTranslationsæ–¹æ³•æ¥éªŒè¯ç¿»è¯‘æ•°æ®\n      const allTranslations = manager.getAllTranslations();\n      expect(allTranslations).toBeDefined();\n      expect(typeof allTranslations).toBe('object');\n\n      // æµ‹è¯•å•ä¸ªç¿»è¯‘è·å–\n      const translation = manager.getTranslation('en', 'hello');\n      expect(typeof translation).toBe('string');\n    });\n\n    it('åº”è¯¥å®‰å…¨åœ°å¤„ç†ä¸æ”¯æŒçš„è¯­è¨€', () => {\n      // æµ‹è¯•è·å–ä¸å­˜åœ¨è¯­è¨€çš„ç¿»è¯‘\n      const translation = manager.getTranslation('fr' as any, 'hello');\n      expect(translation).toBe('hello'); // åº”è¯¥è¿”å›é”®åä½œä¸ºfallback\n    });\n  });\n});\n\ndescribe('TranslationManagerCore - Quality and Operations', () => {\n  let manager: TranslationManagerCore;\n  let _defaultConfig: TranslationManagerConfig;\n\n  beforeEach(() => {\n    const setup = setupTranslationManagerCoreTest();\n    manager = setup.manager;\n    _defaultConfig = setup._defaultConfig;\n    // é»˜è®¤é…ç½®å·²è®¾ç½®ä½†åœ¨æ­¤æµ‹è¯•ä¸­æœªç›´æ¥ä½¿ç”¨\n\n    // ç›´æ¥Mock managerçš„qualityCheckerå±æ€§\n    manager['qualityChecker'] = {\n      checkLingoTranslation: vi.fn().mockResolvedValue({\n        score: 90,\n        confidence: 0.9,\n        issues: [],\n        suggestions: [],\n      }),\n      validateTranslationConsistency: vi.fn().mockResolvedValue({\n        isValid: false,\n        score: 0.7,\n        issues: [\n          {\n            type: 'missing',\n            severity: 'medium',\n            message: 'Missing translation for key: world',\n          },\n        ],\n        recommendations: ['Add missing translations'],\n        timestamp: new Date().toISOString(),\n      }),\n      getTotalTranslationKeys: vi.fn().mockReturnValue(10),\n      clearQualityCache: vi.fn(),\n      getCacheStats: vi.fn().mockReturnValue({ size: 10, hitRate: 0.85 }),\n    } as TranslationManagerPrivate;\n\n    // Mock translationsæ•°æ®ï¼Œç¡®ä¿getTranslationsForLocaleè¿”å›æœ‰æ•ˆæ•°æ®\n    manager['translations'] = {\n      en: { hello: 'Hello', world: 'World' },\n      zh: { hello: 'ä½ å¥½', world: 'ä¸–ç•Œ' },\n    };\n  });\n\n  afterEach(() => {\n    cleanupTranslationManagerCoreTest();\n  });\n\n  describe('ç¿»è¯‘è´¨é‡æ£€æŸ¥', () => {\n    it('åº”è¯¥èƒ½å¤Ÿæ£€æŸ¥ç¿»è¯‘è´¨é‡', async () => {\n      const result = await manager['qualityChecker'].checkLingoTranslation(\n        'hello',\n        'Hello',\n        'ä½ å¥½',\n      );\n\n      expect(result).toBeDefined();\n      expect(result.score).toBe(90);\n      expect(\n        manager['qualityChecker'].checkLingoTranslation,\n      ).toHaveBeenCalled();\n    });\n\n    it('åº”è¯¥èƒ½å¤ŸéªŒè¯ç¿»è¯‘å®Œæ•´æ€§', async () => {\n      const translations = { hello: 'Hello', world: 'World' };\n\n      const result = await manager.validateTranslationConsistency(translations);\n\n      expect(result.isValid).toBe(false);\n      expect(result.score).toBe(0.7);\n      expect(\n        manager['qualityChecker'].validateTranslationConsistency,\n      ).toHaveBeenCalled();\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿç”Ÿæˆè´¨é‡æŠ¥å‘Š', async () => {\n      // Mockè´¨é‡è¶‹åŠ¿æ•°æ®\n      const mockTrends = [\n        { date: '2024-01-01', locale: 'en' as const, score: 85, keyCount: 10 },\n        { date: '2024-01-01', locale: 'zh' as const, score: 80, keyCount: 10 },\n      ];\n\n      // æ·»åŠ getQualityTrendsæ–¹æ³•çš„mock\n      (manager as TranslationManagerPrivate).getQualityTrends = vi\n        .fn()\n        .mockResolvedValue(mockTrends);\n\n      // ç›´æ¥Mock generateQualityReportæ–¹æ³•æ¥é¿å…flattenTranslationsé—®é¢˜\n      const mockReport = {\n        overall: {\n          score: 85,\n          confidence: 0.8,\n          issues: [],\n          suggestions: [],\n        },\n        byLocale: {\n          en: { score: 90, confidence: 0.9, issues: [], suggestions: [] },\n          zh: { score: 80, confidence: 0.7, issues: [], suggestions: [] },\n        },\n        trends: mockTrends,\n        recommendations: [],\n        timestamp: new Date().toISOString(),\n      };\n\n      manager.generateQualityReport = vi.fn().mockResolvedValue(mockReport);\n\n      const result = await manager.generateQualityReport();\n\n      expect(result).toBeDefined();\n      expect(result.overall).toBeDefined();\n      expect(result.byLocale).toBeDefined();\n      expect(result.timestamp).toBeDefined();\n      expect(typeof result.overall.score).toBe('number');\n    });\n  });\n\n  describe('é…ç½®ç®¡ç†', () => {\n    it('åº”è¯¥èƒ½å¤Ÿè·å–é…ç½®', () => {\n      const config = manager.getConfig();\n      expect(config).toBeDefined();\n      expect(config.defaultLocale).toBe('en');\n      expect(config.locales).toContain('en');\n      expect(config.locales).toContain('zh');\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿè·å–æ‰€æœ‰ç¿»è¯‘æ•°æ®', () => {\n      const translations = manager.getAllTranslations();\n      expect(translations).toBeDefined();\n      expect(typeof translations).toBe('object');\n    });\n  });\n\n  describe('ç¿»è¯‘åŠŸèƒ½', () => {\n    it('åº”è¯¥èƒ½å¤Ÿè·å–å•ä¸ªç¿»è¯‘', () => {\n      const translation = manager.getTranslation('en', 'common.hello');\n      expect(translation).toBeDefined();\n      expect(typeof translation).toBe('string');\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿæ‰¹é‡è·å–ç¿»è¯‘', () => {\n      const translations = manager.getBatchTranslations(\n        ['common.hello', 'common.goodbye'],\n        'en',\n      );\n      expect(translations).toBeDefined();\n      expect(typeof translations).toBe('object');\n      expect(translations).toHaveProperty('common.hello');\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿé‡æ–°åŠ è½½ç¿»è¯‘', async () => {\n      await expect(manager.reloadTranslations()).resolves.not.toThrow();\n    });\n  });\n\n  describe('ç¼“å­˜ç®¡ç†', () => {\n    it('åº”è¯¥èƒ½å¤Ÿæ¸…é™¤ç¼“å­˜', () => {\n      // æµ‹è¯•æ¸…é™¤ç¼“å­˜åŠŸèƒ½\n      expect(() => manager['qualityChecker'].clearQualityCache()).not.toThrow();\n      expect(manager['qualityChecker'].clearQualityCache).toHaveBeenCalled();\n    });\n\n    it('åº”è¯¥èƒ½å¤Ÿè·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯', () => {\n      // Mock getCacheStatsæ–¹æ³•\n      mockTranslationQualityChecker.getCacheStats = vi.fn().mockReturnValue({\n        size: 10,\n        hitRate: 0.85,\n      });\n\n      const stats = manager['qualityChecker'].getCacheStats();\n\n      expect(stats).toBeDefined();\n      expect(stats.size).toBe(10);\n      expect(stats.hitRate).toBe(0.85);\n      expect(typeof stats.size).toBe('number');\n      expect(typeof stats.hitRate).toBe('number');\n    });\n  });\n});\n\ndescribe('TranslationManagerCore - Error Handling and Edge Cases', () => {\n  let manager: TranslationManagerCore;\n  let _defaultConfig: TranslationManagerConfig;\n\n  beforeEach(() => {\n    const setup = setupTranslationManagerCoreTest();\n    manager = setup.manager;\n    _defaultConfig = setup._defaultConfig;\n    // é»˜è®¤é…ç½®å·²è®¾ç½®ä½†åœ¨æ­¤æµ‹è¯•ä¸­æœªç›´æ¥ä½¿ç”¨\n\n    // Mock translationsæ•°æ®ï¼Œç¡®ä¿getTranslationsForLocaleè¿”å›æœ‰æ•ˆæ•°æ®\n    manager['translations'] = {\n      en: { hello: 'Hello', world: 'World' },\n      zh: { hello: 'ä½ å¥½', world: 'ä¸–ç•Œ' },\n    };\n  });\n\n  afterEach(() => {\n    cleanupTranslationManagerCoreTest();\n  });\n\n  describe('é”™è¯¯å¤„ç†', () => {\n    it('åº”è¯¥å¤„ç†æ— æ•ˆçš„ç¿»è¯‘é”®', () => {\n      const translation = manager.getTranslation('en', '');\n      expect(translation).toBe('');\n    });\n\n    it('åº”è¯¥å¤„ç†è´¨é‡æŠ¥å‘Šç”Ÿæˆ', async () => {\n      // ç›´æ¥Mock generateQualityReportæ–¹æ³•æ¥é¿å…flattenTranslationsé—®é¢˜\n      const mockReport = {\n        overall: {\n          score: 75,\n          confidence: 0.7,\n          issues: [],\n          suggestions: [],\n        },\n        byLocale: {\n          en: { score: 80, confidence: 0.8, issues: [], suggestions: [] },\n          zh: { score: 70, confidence: 0.6, issues: [], suggestions: [] },\n        },\n        trends: [],\n        recommendations: [],\n        timestamp: new Date().toISOString(),\n      };\n\n      manager.generateQualityReport = vi.fn().mockResolvedValue(mockReport);\n\n      const report = await manager.generateQualityReport();\n      expect(report).toBeDefined();\n      expect(report.overall).toBeDefined();\n      expect(report.byLocale).toBeDefined();\n      expect(report.timestamp).toBeDefined();\n    });\n\n    it('åº”è¯¥å¤„ç†ç¿»è¯‘éªŒè¯', async () => {\n      // Mock validateTranslationQualityæ–¹æ³•\n      manager.validateTranslationQuality = vi.fn().mockResolvedValue({\n        locale: 'en',\n        totalKeys: 10,\n        validKeys: 8,\n        issues: [],\n        score: 80,\n        timestamp: new Date().toISOString(),\n        confidence: 0.8,\n        suggestions: [],\n      });\n\n      const report = await manager.validateTranslationQuality('en');\n      expect(report).toBeDefined();\n      expect(report.locale).toBe('en');\n      expect(report.score).toBe(80);\n      expect(typeof report.score).toBe('number');\n    });\n  });\n\n  describe('å®‰å…¨æ€§æµ‹è¯•', () => {\n    it('åº”è¯¥å®‰å…¨åœ°å¤„ç†è¯­è¨€ä»£ç ', () => {\n      // å°è¯•è®¿é—®ä¸æ”¯æŒçš„è¯­è¨€ä»£ç \n      const translation1 = manager.getTranslation('__proto__' as any, 'hello');\n      const translation2 = manager.getTranslation(\n        'constructor' as any,\n        'hello',\n      );\n\n      expect(translation1).toBe('hello'); // è¿”å›é”®åä½œä¸ºfallback\n      expect(translation2).toBe('hello'); // è¿”å›é”®åä½œä¸ºfallback\n    });\n\n    it('åº”è¯¥é˜²æ­¢å¯¹è±¡æ³¨å…¥æ”»å‡»', () => {\n      // æµ‹è¯•å®‰å…¨çš„ç¿»è¯‘è·å–\n      const translation = manager.getTranslation('en', 'common.hello');\n      expect(typeof translation).toBe('string');\n\n      // æµ‹è¯•æ‰¹é‡ç¿»è¯‘çš„å®‰å…¨æ€§\n      const batchTranslations = manager.getBatchTranslations(\n        ['common.hello'],\n        'en',\n      );\n      expect(typeof batchTranslations).toBe('object');\n      expect(batchTranslations).toHaveProperty('common.hello');\n    });\n  });\n\n  describe('è¾¹ç•Œæ¡ä»¶æµ‹è¯•', () => {\n    it('åº”è¯¥å¤„ç†ç©ºç¿»è¯‘é”®', () => {\n      const translation = manager.getTranslation('en', '');\n      expect(translation).toBe('');\n    });\n\n    it('åº”è¯¥å¤„ç†ä¸å­˜åœ¨çš„ç¿»è¯‘é”®', () => {\n      const translation = manager.getTranslation('en', 'nonexistent.key');\n      expect(translation).toBe('nonexistent.key'); // è¿”å›é”®åä½œä¸ºfallback\n    });\n\n    it('åº”è¯¥å¤„ç†è´¨é‡è¶‹åŠ¿æŸ¥è¯¢', async () => {\n      // Mock getQualityTrendæ–¹æ³•\n      (manager as any).getQualityTrend = vi.fn().mockResolvedValue({\n        locale: 'en',\n        period: 7,\n        dataPoints: [\n          { date: '2024-01-01', locale: 'en', score: 85, keyCount: 10 },\n          { date: '2024-01-02', locale: 'en', score: 87, keyCount: 10 },\n        ],\n      });\n\n      const trendReport = await (manager as any).getQualityTrend('en', 7);\n      expect(trendReport).toBeDefined();\n      expect(trendReport.locale).toBe('en');\n      expect(trendReport.period).toBe(7);\n      expect(Array.isArray(trendReport.dataPoints)).toBe(true);\n    });\n\n    it('åº”è¯¥å¤„ç†æ‰€æœ‰è¯­è¨€ç¯å¢ƒéªŒè¯', async () => {\n      // Mock validateAllLocalesæ–¹æ³•\n      (manager as any).validateAllLocales = vi.fn().mockResolvedValue([\n        {\n          locale: 'en',\n          totalKeys: 10,\n          validKeys: 9,\n          issues: [],\n          score: 90,\n          timestamp: new Date().toISOString(),\n          confidence: 0.9,\n          suggestions: [],\n        },\n        {\n          locale: 'zh',\n          totalKeys: 10,\n          validKeys: 8,\n          issues: [],\n          score: 80,\n          timestamp: new Date().toISOString(),\n          confidence: 0.8,\n          suggestions: [],\n        },\n      ]);\n\n      const reports = await (manager as any).validateAllLocales();\n      expect(Array.isArray(reports)).toBe(true);\n      expect(reports.length).toBe(2);\n      expect(reports[0]?.locale).toBe('en');\n      expect(reports[1]?.locale).toBe('zh');\n    });\n\n    it('åº”è¯¥å¤„ç†åµŒå¥—ç¿»è¯‘ç»“æ„', () => {\n      // æµ‹è¯•åµŒå¥—é”®çš„ç¿»è¯‘è·å–\n      const saveTranslation = manager.getTranslation(\n        'en',\n        'common.buttons.save',\n      );\n      const cancelTranslation = manager.getTranslation(\n        'en',\n        'common.buttons.cancel',\n      );\n\n      expect(typeof saveTranslation).toBe('string');\n      expect(typeof cancelTranslation).toBe('string');\n\n      // æµ‹è¯•è·å–æ‰€æœ‰ç¿»è¯‘æ•°æ®\n      const allTranslations = manager.getAllTranslations();\n      expect(allTranslations).toBeDefined();\n      expect(typeof allTranslations).toBe('object');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/translation-manager.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/translation-validators.test.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\_.","line":29,"column":15,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":29,"endColumn":16,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1097,1098],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1097,1097],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, expect, it } from 'vitest';\nimport type { Locale } from '@/types/i18n';\nimport { VALIDATION_THRESHOLDS } from '@/constants/i18n-constants';\nimport { TranslationValidators } from '@/lib/translation-validators';\n\ndescribe('TranslationValidators', () => {\n  describe('performBasicValidation', () => {\n    it('should detect empty translation', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Hello world',\n        '',\n      );\n\n      expect(result.issues.length).toBeGreaterThan(0);\n      const missingIssue = result.issues.find(\n        (issue) => issue.type === 'missing',\n      );\n      expect(missingIssue).toBeDefined();\n      expect(missingIssue?.severity).toBe('high');\n      expect(missingIssue?.message).toBe('Translation is empty');\n      expect(result.penalty).toBeGreaterThanOrEqual(\n        VALIDATION_THRESHOLDS.EMPTY_TRANSLATION_PENALTY,\n      );\n    });\n\n    it('should detect empty translation with whitespace only', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Hello world',\n        '   \\n\\_t  ',\n      );\n\n      expect(result.issues).toHaveLength(1);\n      expect(result.issues[0]?.type).toBe('missing');\n      expect(result.penalty).toBe(\n        VALIDATION_THRESHOLDS.EMPTY_TRANSLATION_PENALTY,\n      );\n    });\n\n    it('should detect placeholder count mismatch', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Hello {name}, you have {count} messages',\n        'Hello {name}, you have messages',\n      );\n\n      expect(result.issues.length).toBeGreaterThan(0);\n      const placeholderIssue = result.issues.find(\n        (issue) => issue.type === 'placeholder',\n      );\n      expect(placeholderIssue).toBeDefined();\n      expect(placeholderIssue?.severity).toBe('high');\n      expect(placeholderIssue?.message).toBe('Placeholder count mismatch');\n      expect(result.penalty).toBeGreaterThanOrEqual(\n        VALIDATION_THRESHOLDS.PLACEHOLDER_MISMATCH_PENALTY,\n      );\n    });\n\n    it('should detect missing specific placeholders', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Welcome {username} to {platform}',\n        'Welcome {username} to our site',\n      );\n\n      expect(result.issues).toHaveLength(2); // Both placeholder mismatch and missing placeholder\n      const missingPlaceholderIssue = result.issues.find((issue) =>\n        issue.message.includes('Missing placeholders'),\n      );\n      expect(missingPlaceholderIssue).toBeDefined();\n      expect(missingPlaceholderIssue?.message).toContain('platform');\n    });\n\n    it('should detect significant length differences', () => {\n      const shortTranslation = TranslationValidators.performBasicValidation(\n        'This is a very long original text that should be translated properly',\n        'Short',\n      );\n\n      expect(shortTranslation.issues).toHaveLength(1);\n      expect(shortTranslation.issues[0]?.type).toBe('length');\n      expect(shortTranslation.issues[0]?.severity).toBe('medium');\n\n      const longTranslation = TranslationValidators.performBasicValidation(\n        'Short',\n        'This is an extremely long translation that goes way beyond what would be reasonable for such a short original text',\n      );\n\n      expect(longTranslation.issues).toHaveLength(1);\n      expect(longTranslation.issues[0]?.type).toBe('length');\n    });\n\n    it('should pass validation for good translation', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Hello {name}, welcome to our platform!',\n        'Hola {name}, Â¡bienvenido a nuestra plataforma!',\n      );\n\n      expect(result.issues).toHaveLength(0);\n      expect(result.penalty).toBe(0);\n    });\n\n    it('should handle text without placeholders', () => {\n      const result = TranslationValidators.performBasicValidation(\n        'Simple text without placeholders',\n        'Texto simple sin marcadores de posiciÃ³n',\n      );\n\n      expect(result.issues).toHaveLength(0);\n      expect(result.penalty).toBe(0);\n    });\n  });\n\n  describe('performLanguageSpecificValidation', () => {\n    it('should detect traditional Chinese in simplified Chinese locale', () => {\n      const result = TranslationValidators.performLanguageSpecificValidation(\n        'ç¹é«”å­—æª¢æ¸¬',\n        'zh' as Locale,\n      );\n\n      expect(result.issues).toHaveLength(1);\n      expect(result.issues[0]?.type).toBe('language');\n      expect(result.issues[0]?.severity).toBe('medium');\n      expect(result.issues[0]?.message).toBe(\n        'Contains traditional Chinese characters',\n      );\n      expect(result.penalty).toBe(5);\n    });\n\n    it('should pass simplified Chinese validation', () => {\n      const result = TranslationValidators.performLanguageSpecificValidation(\n        'è¿™æ˜¯ç®€ä½“ä¸­æ–‡æ–‡æœ¬',\n        'zh' as Locale,\n      );\n\n      expect(result.issues).toHaveLength(0);\n      expect(result.penalty).toBe(0);\n    });\n\n    it('should detect grammar issues in English', () => {\n      const result = TranslationValidators.performLanguageSpecificValidation(\n        'This is a a duplicate word and and another one',\n        'en' as Locale,\n      );\n\n      expect(result.issues).toHaveLength(1);\n      expect(result.issues[0]?.type).toBe('grammar');\n      expect(result.issues[0]?.severity).toBe('medium');\n      expect(result.issues[0]?.message).toBe(\n        'Potential grammar issues detected',\n      );\n      expect(result.penalty).toBe(8);\n    });\n\n    it('should pass good English validation', () => {\n      const result = TranslationValidators.performLanguageSpecificValidation(\n        'This is a well-written English sentence.',\n        'en' as Locale,\n      );\n\n      expect(result.issues).toHaveLength(0);\n      expect(result.penalty).toBe(0);\n    });\n\n    it('should handle unsupported locales gracefully', () => {\n      const result = TranslationValidators.performLanguageSpecificValidation(\n        'Some text in unsupported locale',\n        'fr' as Locale,\n      );\n\n      expect(result.issues).toHaveLength(0);\n      expect(result.penalty).toBe(0);\n    });\n  });\n\n  describe('compareWithHumanTranslation', () => {\n    it('should detect low similarity with human translation', () => {\n      const result = TranslationValidators.compareWithHumanTranslation(\n        'Completely different AI translation',\n        'Totally unrelated human reference text',\n      );\n\n      expect(result.issues.length).toBeGreaterThan(0);\n      const accuracyIssue = result.issues.find(\n        (issue) => issue.type === 'accuracy',\n      );\n      expect(accuracyIssue).toBeDefined();\n      expect(accuracyIssue?.severity).toBe('high');\n      expect(accuracyIssue?.message).toBe(\n        'AI translation significantly differs from human reference',\n      );\n      expect(result.penalty).toBeGreaterThanOrEqual(25);\n    });\n\n    it('should detect moderate similarity differences', () => {\n      const result = TranslationValidators.compareWithHumanTranslation(\n        'Hello world this is a test',\n        'Hello world this is different content',\n      );\n\n      expect(result.issues.length).toBeGreaterThan(0);\n      const accuracyIssue = result.issues.find(\n        (issue) => issue.type === 'accuracy',\n      );\n      expect(accuracyIssue).toBeDefined();\n      expect(accuracyIssue?.severity).toBe('medium');\n      expect(result.penalty).toBeGreaterThanOrEqual(15);\n    });\n\n    it('should detect missing key terms', () => {\n      const result = TranslationValidators.compareWithHumanTranslation(\n        'Simple translation without important terms',\n        'Professional translation with technical terminology and specialized vocabulary',\n      );\n\n      const terminologyIssue = result.issues.find(\n        (issue) => issue.type === 'terminology',\n      );\n      expect(terminologyIssue).toBeDefined();\n      expect(terminologyIssue?.message).toContain('Missing key terms');\n      expect(\n        (terminologyIssue as { penalty?: number })?.penalty ||\n          (result as { penalty?: number }).penalty,\n      ).toBeGreaterThan(0);\n    });\n\n    it('should pass for similar translations', () => {\n      const result = TranslationValidators.compareWithHumanTranslation(\n        'Hello world welcome to our platform',\n        'Hello world welcome to our amazing platform',\n      );\n\n      // Should have no accuracy issues (similarity > 0.6)\n      const accuracyIssues = result.issues.filter(\n        (issue) => issue.type === 'accuracy',\n      );\n      expect(accuracyIssues).toHaveLength(0);\n    });\n  });\n\n  describe('checkContextRelevance', () => {\n    it('should detect missing error terms in error context', () => {\n      const issues = TranslationValidators.checkContextRelevance(\n        'user.error.validation',\n        'Please check your input',\n      );\n\n      expect(issues).toHaveLength(1);\n      expect(issues[0]?.type).toBe('context');\n      expect(issues[0]?.severity).toBe('medium');\n      expect(issues[0]?.message).toBe(\n        'Error context not reflected in translation',\n      );\n    });\n\n    it('should pass when error terms are present', () => {\n      const issues = TranslationValidators.checkContextRelevance(\n        'user.error.validation',\n        'Error: Invalid input provided',\n      );\n\n      expect(issues).toHaveLength(0);\n    });\n\n    it('should pass when error terms are present in Chinese', () => {\n      const issues = TranslationValidators.checkContextRelevance(\n        'user.error.validation',\n        'é”™è¯¯ï¼šè¾“å…¥æ— æ•ˆ',\n      );\n\n      expect(issues).toHaveLength(0);\n    });\n\n    it('should handle non-error contexts gracefully', () => {\n      const issues = TranslationValidators.checkContextRelevance(\n        'user.welcome.message',\n        'Welcome to our platform',\n      );\n\n      expect(issues).toHaveLength(0);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/validations.test.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'../validations' import is duplicated.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":14,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest';\nimport type {\n  type ContactFormData,\n  type FormSubmissionStatus,\n  type FormValidationError,\n} from '../validations';\nimport {\n  airtableRecordSchema,\n  apiResponseSchema,\n  contactFormSchema,\n  emailTemplateDataSchema,\n  validationConfig,\n  validationHelpers,\n} from '../validations';\n\ndescribe('validations - Schema Validation', () => {\n  describe('contactFormSchema', () => {\n    const validFormData = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john.doe@example.com',\n      company: 'Test Company',\n      message: 'This is a test message with sufficient length.',\n      acceptPrivacy: true,\n      website: '', // honeypot field\n    };\n\n    it('should validate correct form data', () => {\n      const result = contactFormSchema.safeParse(validFormData);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject form data with short first name', () => {\n      const invalidData = { ...validFormData, firstName: 'J' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'at least 2 characters',\n        );\n      }\n    });\n\n    it('should reject form data with long first name', () => {\n      const invalidData = { ...validFormData, firstName: 'J'.repeat(51) };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'less than 50 characters',\n        );\n      }\n    });\n\n    it('should reject form data with invalid first name characters', () => {\n      const invalidData = { ...validFormData, firstName: 'John123' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'only contain letters',\n        );\n      }\n    });\n\n    it('should accept Chinese characters in names', () => {\n      const chineseData = {\n        ...validFormData,\n        firstName: 'å¼ ä¸‰',\n        lastName: 'æå››',\n      };\n      const result = contactFormSchema.safeParse(chineseData);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject invalid email format', () => {\n      const invalidData = { ...validFormData, email: 'invalid-email' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'valid email address',\n        );\n      }\n    });\n\n    it('should convert email to lowercase', () => {\n      const upperCaseEmailData = {\n        ...validFormData,\n        email: 'JOHN.DOE@EXAMPLE.COM',\n      };\n      const result = contactFormSchema.safeParse(upperCaseEmailData);\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.email).toBe('john.doe@example.com');\n      }\n    });\n\n    it('should validate optional phone number', () => {\n      const dataWithPhone = { ...validFormData, phone: '+1234567890' };\n      const result = contactFormSchema.safeParse(dataWithPhone);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject invalid phone number format', () => {\n      const invalidData = { ...validFormData, phone: 'invalid-phone' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain('valid phone number');\n      }\n    });\n\n    it('should validate optional subject', () => {\n      const dataWithSubject = { ...validFormData, subject: 'Test Subject' };\n      const result = contactFormSchema.safeParse(dataWithSubject);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject subject that is too short', () => {\n      const invalidData = { ...validFormData, subject: 'Hi' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'between 5 and 100 characters',\n        );\n      }\n    });\n\n    it('should require privacy acceptance', () => {\n      const invalidData = { ...validFormData, acceptPrivacy: false };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain(\n          'accept the privacy policy',\n        );\n      }\n    });\n\n    it('should validate optional marketing consent', () => {\n      const dataWithConsent = { ...validFormData, marketingConsent: true };\n      const result = contactFormSchema.safeParse(dataWithConsent);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject honeypot field with content', () => {\n      const invalidData = { ...validFormData, website: 'spam content' };\n      const result = contactFormSchema.safeParse(invalidData);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.issues[0]?.message).toContain('should be empty');\n      }\n    });\n  });\n});\n\ndescribe('validations - API and Data Schemas', () => {\n  describe('apiResponseSchema', () => {\n    it('should validate successful API response', () => {\n      const response = {\n        success: true,\n        message: 'Operation completed successfully',\n        data: { id: '123' },\n      };\n      const result = apiResponseSchema.safeParse(response);\n      expect(result.success).toBe(true);\n    });\n\n    it('should validate error API response', () => {\n      const response = {\n        success: false,\n        error: 'Something went wrong',\n      };\n      const result = apiResponseSchema.safeParse(response);\n      expect(result.success).toBe(true);\n    });\n\n    it('should validate minimal API response', () => {\n      const response = { success: true };\n      const result = apiResponseSchema.safeParse(response);\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('airtableRecordSchema', () => {\n    const validRecord = {\n      id: 'rec123',\n      fields: {\n        'First Name': 'John',\n        'Last Name': 'Doe',\n        'Email': 'john@example.com',\n        'Company': 'Test Co',\n        'Message': 'Test message',\n        'Submitted At': '2023-01-01T00:00:00Z',\n      },\n      createdTime: '2023-01-01T00:00:00Z',\n    };\n\n    it('should validate correct Airtable record', () => {\n      const result = airtableRecordSchema.safeParse(validRecord);\n      expect(result.success).toBe(true);\n    });\n\n    it('should set default status to New', () => {\n      const result = airtableRecordSchema.safeParse(validRecord);\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.fields.Status).toBe('New');\n      }\n    });\n\n    it('should set default source to Website Contact Form', () => {\n      const result = airtableRecordSchema.safeParse(validRecord);\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.fields.Source).toBe('Website Contact Form');\n      }\n    });\n\n    it('should validate with custom status', () => {\n      const recordWithStatus = {\n        ...validRecord,\n        fields: { ...validRecord.fields, Status: 'In Progress' as const },\n      };\n      const result = airtableRecordSchema.safeParse(recordWithStatus);\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('emailTemplateDataSchema', () => {\n    const validTemplateData = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john@example.com',\n      company: 'Test Co',\n      message: 'Test message',\n      submittedAt: '2023-01-01T00:00:00Z',\n    };\n\n    it('should validate correct email template data', () => {\n      const result = emailTemplateDataSchema.safeParse(validTemplateData);\n      expect(result.success).toBe(true);\n    });\n\n    it('should validate with optional fields', () => {\n      const dataWithOptionals = {\n        ...validTemplateData,\n        phone: '+1234567890',\n        subject: 'Test Subject',\n        marketingConsent: true,\n      };\n      const result = emailTemplateDataSchema.safeParse(dataWithOptionals);\n      expect(result.success).toBe(true);\n    });\n  });\n});\n\ndescribe('validations - Helper Functions', () => {\n  describe('validationHelpers', () => {\n    describe('isEmailDomainAllowed', () => {\n      it('should allow all domains when no restrictions', () => {\n        const result =\n          validationHelpers.isEmailDomainAllowed('test@example.com');\n        expect(result).toBe(true);\n      });\n\n      it('should allow all domains when empty array provided', () => {\n        const result = validationHelpers.isEmailDomainAllowed(\n          'test@example.com',\n          [],\n        );\n        expect(result).toBe(true);\n      });\n\n      it('should allow email from allowed domain', () => {\n        const result = validationHelpers.isEmailDomainAllowed(\n          'test@example.com',\n          ['example.com'],\n        );\n        expect(result).toBe(true);\n      });\n\n      it('should reject email from disallowed domain', () => {\n        const result = validationHelpers.isEmailDomainAllowed('test@spam.com', [\n          'example.com',\n        ]);\n        expect(result).toBe(false);\n      });\n\n      it('should be case insensitive', () => {\n        const result = validationHelpers.isEmailDomainAllowed(\n          'test@EXAMPLE.COM',\n          ['example.com'],\n        );\n        expect(result).toBe(true);\n      });\n    });\n\n    describe('sanitizeInput', () => {\n      it('should trim whitespace', () => {\n        const result = validationHelpers.sanitizeInput('  test  ');\n        expect(result).toBe('test');\n      });\n\n      it('should replace multiple spaces with single space', () => {\n        const result = validationHelpers.sanitizeInput(\n          'test   multiple   spaces',\n        );\n        expect(result).toBe('test multiple spaces');\n      });\n\n      it('should remove HTML tags', () => {\n        const result = validationHelpers.sanitizeInput(\n          'test<script>alert(\"xss\")</script>',\n        );\n        expect(result).toBe('testscriptalert(\"xss\")/script');\n      });\n    });\n\n    describe('isSpamContent', () => {\n      it('should detect spam keywords', () => {\n        const result = validationHelpers.isSpamContent('Win the lottery now!');\n        expect(result).toBe(true);\n      });\n\n      it('should be case insensitive', () => {\n        const result = validationHelpers.isSpamContent('VIAGRA for sale');\n        expect(result).toBe(true);\n      });\n\n      it('should allow legitimate content', () => {\n        const result = validationHelpers.isSpamContent(\n          'I would like to inquire about your services',\n        );\n        expect(result).toBe(false);\n      });\n    });\n\n    describe('isSubmissionRateLimited', () => {\n      beforeEach(() => {\n        vi.useFakeTimers();\n      });\n\n      it('should not rate limit when no previous submission', () => {\n        const result = validationHelpers.isSubmissionRateLimited(null);\n        expect(result).toBe(false);\n      });\n\n      it('should rate limit recent submissions', () => {\n        const recentSubmission = new Date();\n        const result = validationHelpers.isSubmissionRateLimited(\n          recentSubmission,\n          5,\n        );\n        expect(result).toBe(true);\n      });\n\n      it('should not rate limit old submissions', () => {\n        const oldSubmission = new Date(Date.now() - 10 * 60 * 1000); // 10 minutes ago\n        const result = validationHelpers.isSubmissionRateLimited(\n          oldSubmission,\n          5,\n        );\n        expect(result).toBe(false);\n      });\n    });\n  });\n});\n\ndescribe('validations - Configuration and Types', () => {\n  describe('validationConfig', () => {\n    it('should have correct default configuration', () => {\n      expect(validationConfig.submissionCooldownMinutes).toBe(5);\n      expect(validationConfig.maxSubmissionsPerHour).toBe(10);\n      expect(validationConfig.enableSpamDetection).toBe(true);\n      expect(validationConfig.allowedEmailDomains).toEqual([]);\n      expect(validationConfig.enableHoneypot).toBe(true);\n      expect(validationConfig.enableCsrfProtection).toBe(true);\n      expect(validationConfig.enableTurnstile).toBe(true);\n    });\n\n    it('should have correct required fields', () => {\n      expect(validationConfig.requiredFields).toContain('firstName');\n      expect(validationConfig.requiredFields).toContain('lastName');\n      expect(validationConfig.requiredFields).toContain('email');\n      expect(validationConfig.requiredFields).toContain('company');\n      expect(validationConfig.requiredFields).toContain('message');\n      expect(validationConfig.requiredFields).toContain('acceptPrivacy');\n    });\n\n    it('should have correct optional fields', () => {\n      expect(validationConfig.optionalFields).toContain('phone');\n      expect(validationConfig.optionalFields).toContain('subject');\n      expect(validationConfig.optionalFields).toContain('marketingConsent');\n      expect(validationConfig.optionalFields).toContain('website');\n    });\n  });\n\n  describe('TypeScript types', () => {\n    it('should infer correct ContactFormData type', () => {\n      const formData: ContactFormData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'john@example.com',\n        company: 'Test Co',\n        message: 'Test message',\n        acceptPrivacy: true,\n        website: '',\n      };\n      expect(formData).toBeDefined();\n    });\n\n    it('should define FormValidationError interface', () => {\n      const error: FormValidationError = {\n        field: 'firstName',\n        message: 'First name is required',\n      };\n      expect(error).toBeDefined();\n    });\n\n    it('should define FormSubmissionStatus type', () => {\n      const statuses: FormSubmissionStatus[] = [\n        'idle',\n        'submitting',\n        'success',\n        'error',\n      ];\n      expect(statuses).toHaveLength(4);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/web-vitals-collector.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/__tests__/web-vitals-monitor.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility-hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility-tester.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":51,"column":30,"nodeType":"MemberExpression","endLine":51,"endColumn":53},{"ruleId":"max-statements","severity":2,"message":"Async method 'testKeyActivation' has too many statements (24). Maximum allowed is 20.","line":110,"column":26,"nodeType":"FunctionExpression","messageId":"exceed","endLine":181,"endColumn":4},{"ruleId":"max-statements","severity":2,"message":"Async method 'testEscapeKeyClose' has too many statements (21). Maximum allowed is 20.","line":186,"column":27,"nodeType":"FunctionExpression","messageId":"exceed","endLine":255,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":226,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":226,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_TRIPLE, MAGIC_0_8, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, ZERO } from '@/constants';\n\n/**\n * æ— éšœç¢æ€§æµ‹è¯•å·¥å…·\n * ç”¨äºæµ‹è¯•å¯¼èˆªç»„ä»¶çš„é”®ç›˜å¯¼èˆªå’Œæ— éšœç¢æ€§åŠŸèƒ½\n */\n\nexport interface AccessibilityTestResult {\n  testName: string;\n  passed: boolean;\n  details: string;\n  suggestions?: string[];\n}\n\nexport interface KeyboardNavigationTest {\n  element: HTMLElement;\n  expectedBehavior: string;\n  testFunction: () => Promise<boolean>;\n}\n\n/**\n * æ— éšœç¢æ€§æµ‹è¯•å™¨ç±»\n */\nexport class AccessibilityTester {\n  private results: AccessibilityTestResult[] = [];\n\n  /**\n   * æµ‹è¯•Tabé”®å¾ªç¯å¯¼èˆª\n   */\n  async testTabNavigation(): Promise<AccessibilityTestResult> {\n    const testName = 'Tabé”®å¾ªç¯å¯¼èˆªæµ‹è¯•';\n\n    try {\n      // è·å–æ‰€æœ‰å¯èšç„¦å…ƒç´ \n      const focusableElements = this.getFocusableElements();\n\n      if (focusableElements.length === ZERO) {\n        return {\n          testName,\n          passed: false,\n          details: 'æœªæ‰¾åˆ°å¯èšç„¦çš„å¯¼èˆªå…ƒç´ ',\n          suggestions: [\n            'ç¡®ä¿å¯¼èˆªå…ƒç´ å…·æœ‰æ­£ç¡®çš„tabindexå±æ€§',\n            'æ£€æŸ¥å…ƒç´ æ˜¯å¦è¢«æ­£ç¡®æ¸²æŸ“',\n          ],\n        };\n      }\n\n      // æµ‹è¯•Tabé”®å¯¼èˆªé¡ºåº\n      const tabOrder: HTMLElement[] = [];\n      const currentElement = focusableElements[ZERO];\n\n      if (!currentElement) {\n        return {\n          testName,\n          passed: false,\n          details: 'æœªæ‰¾åˆ°å¯èšç„¦çš„å¯¼èˆªå…ƒç´ ',\n        };\n      }\n\n      for (let i = ZERO; i < focusableElements.length; i++) {\n        currentElement.focus();\n        tabOrder.push(document.activeElement as HTMLElement);\n\n        // æ¨¡æ‹ŸTabé”®\n        const tabEvent = new KeyboardEvent('keydown', {\n          key: 'Tab',\n          bubbles: true,\n          cancelable: true,\n        });\n        document.dispatchEvent(tabEvent);\n\n        // ç­‰å¾…ç„¦ç‚¹å˜åŒ–\n        await new Promise((resolve) => setTimeout(resolve, PERCENTAGE_HALF));\n      }\n\n      const isValidTabOrder = this.validateTabOrder(\n        tabOrder,\n        focusableElements,\n      );\n\n      return {\n        testName,\n        passed: isValidTabOrder,\n        details: `æµ‹è¯•äº†${focusableElements.length}ä¸ªå¯èšç„¦å…ƒç´ ï¼ŒTabé”®å¯¼èˆª${isValidTabOrder ? 'æ­£å¸¸' : 'å¼‚å¸¸'}`,\n        ...(isValidTabOrder\n          ? {}\n          : {\n              suggestions: [\n                'æ£€æŸ¥tabindexå±æ€§è®¾ç½®',\n                'ç¡®ä¿å…ƒç´ æŒ‰é€»è¾‘é¡ºåºæ’åˆ—',\n                'éªŒè¯éšè—å…ƒç´ ä¸åœ¨Tabåºåˆ—ä¸­',\n              ],\n            }),\n      };\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      return {\n        testName,\n        passed: false,\n        details: `æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ${_error}`,\n        suggestions: ['æ£€æŸ¥DOMç»“æ„', 'ç¡®ä¿æµ‹è¯•ç¯å¢ƒæ­£ç¡®'],\n      };\n    }\n  }\n\n  /**\n   * æµ‹è¯•Enter/Spaceé”®æ¿€æ´»åŠŸèƒ½\n   */\n  async testKeyActivation(): Promise<AccessibilityTestResult> {\n    const testName = 'Enter/Spaceé”®æ¿€æ´»æµ‹è¯•';\n\n    try {\n      const triggers = document.querySelectorAll(\n        '[data-slot=\"navigation-menu-trigger\"]',\n      );\n      const links = document.querySelectorAll('a[href]');\n\n      let activationTests = ZERO;\n      let passedTests = ZERO;\n\n      // æµ‹è¯•ä¸‹æ‹‰èœå•è§¦å‘å™¨\n      for (const trigger of triggers) {\n        const element = trigger as HTMLElement;\n        element.focus();\n\n        // æµ‹è¯•Enteré”®\n        const enterResult = await this.testElementKeyActivation(\n          element,\n          'Enter',\n        );\n        activationTests += ONE;\n        if (enterResult) passedTests += ONE;\n\n        // æµ‹è¯•Spaceé”®\n        const spaceResult = await this.testElementKeyActivation(element, ' ');\n        activationTests += ONE;\n        if (spaceResult) passedTests += ONE;\n      }\n\n      // æµ‹è¯•å¯¼èˆªé“¾æ¥\n      for (const link of Array.from(links).slice(ZERO, COUNT_TRIPLE)) {\n        // é™åˆ¶æµ‹è¯•æ•°é‡\n        const element = link as HTMLElement;\n        element.focus();\n\n        const enterResult = await this.testElementKeyActivation(\n          element,\n          'Enter',\n        );\n        activationTests += ONE;\n        if (enterResult) passedTests += ONE;\n      }\n\n      const successRate =\n        activationTests > ZERO ? passedTests / activationTests : ZERO;\n\n      return {\n        testName,\n        passed: successRate >= MAGIC_0_8, // 80%é€šè¿‡ç‡\n        details: `æµ‹è¯•äº†${activationTests}ä¸ªæ¿€æ´»æ“ä½œï¼ŒæˆåŠŸç‡: ${(successRate * PERCENTAGE_FULL).toFixed(ONE)}%`,\n        ...(successRate < MAGIC_0_8\n          ? {\n              suggestions: [\n                'ç¡®ä¿æ‰€æœ‰äº¤äº’å…ƒç´ æ”¯æŒEnteré”®æ¿€æ´»',\n                'éªŒè¯Spaceé”®åœ¨æŒ‰é’®å…ƒç´ ä¸Šçš„æ¿€æ´»åŠŸèƒ½',\n                'æ£€æŸ¥é”®ç›˜äº‹ä»¶å¤„ç†å™¨çš„å®ç°',\n              ],\n            }\n          : {}),\n      };\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      return {\n        testName,\n        passed: false,\n        details: `æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ${_error}`,\n        suggestions: ['æ£€æŸ¥äº‹ä»¶å¤„ç†å™¨', 'éªŒè¯å…ƒç´ å¯è®¿é—®æ€§'],\n      };\n    }\n  }\n\n  /**\n   * æµ‹è¯•Escapeé”®å…³é—­åŠŸèƒ½\n   */\n  async testEscapeKeyClose(): Promise<AccessibilityTestResult> {\n    const testName = 'Escapeé”®å…³é—­æµ‹è¯•';\n\n    try {\n      const triggers = document.querySelectorAll(\n        '[data-slot=\"navigation-menu-trigger\"]',\n      );\n      let escapeTests = ZERO;\n      let passedTests = ZERO;\n\n      for (const trigger of triggers) {\n        const element = trigger as HTMLElement;\n\n        // å…ˆæ‰“å¼€èœå•\n        element.focus();\n        element.click();\n        await new Promise((resolve) => setTimeout(resolve, PERCENTAGE_FULL));\n\n        // æ£€æŸ¥èœå•æ˜¯å¦æ‰“å¼€\n        const isOpen =\n          element.getAttribute('data-state') === 'open' ||\n          element.getAttribute('aria-expanded') === 'true';\n\n        if (isOpen) {\n          // æµ‹è¯•Escapeé”®å…³é—­\n          const escapeEvent = new KeyboardEvent('keydown', {\n            key: 'Escape',\n            bubbles: true,\n            cancelable: true,\n          });\n          element.dispatchEvent(escapeEvent);\n\n          await new Promise((resolve) => setTimeout(resolve, PERCENTAGE_FULL));\n\n          // æ£€æŸ¥èœå•æ˜¯å¦å…³é—­\n          const isClosed =\n            element.getAttribute('data-state') !== 'open' &&\n            element.getAttribute('aria-expanded') !== 'true';\n\n          escapeTests += ONE;\n          if (isClosed) passedTests += ONE;\n        }\n      }\n\n      const successRate = escapeTests > ZERO ? passedTests / escapeTests : ZERO;\n\n      return {\n        testName,\n        passed: successRate >= MAGIC_0_8,\n        details: `æµ‹è¯•äº†${escapeTests}ä¸ªEscapeå…³é—­æ“ä½œï¼ŒæˆåŠŸç‡: ${(successRate * PERCENTAGE_FULL).toFixed(ONE)}%`,\n        ...(successRate < MAGIC_0_8\n          ? {\n              suggestions: [\n                'ç¡®ä¿Escapeé”®äº‹ä»¶å¤„ç†å™¨æ­£ç¡®å®ç°',\n                'éªŒè¯èœå•çŠ¶æ€ç®¡ç†',\n                'æ£€æŸ¥äº‹ä»¶å†’æ³¡å’Œä¼ æ’­',\n              ],\n            }\n          : {}),\n      };\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      return {\n        testName,\n        passed: false,\n        details: `æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ${_error}`,\n        suggestions: ['æ£€æŸ¥èœå•çŠ¶æ€ç®¡ç†', 'éªŒè¯é”®ç›˜äº‹ä»¶å¤„ç†'],\n      };\n    }\n  }\n\n  /**\n   * æµ‹è¯•ARIAæ ‡ç­¾å’Œå±æ€§\n   */\n  testAriaAttributes(): AccessibilityTestResult {\n    const testName = 'ARIAæ ‡ç­¾å’Œå±æ€§æµ‹è¯•';\n\n    try {\n      const issues: string[] = [];\n      const suggestions: string[] = [];\n\n      // æ£€æŸ¥å¯¼èˆªå®¹å™¨\n      const navElements = document.querySelectorAll('nav');\n      navElements.forEach((nav, index) => {\n        if (\n          !nav.getAttribute('aria-label') &&\n          !nav.getAttribute('aria-labelledby')\n        ) {\n          issues.push(`å¯¼èˆªå®¹å™¨${index + ONE}ç¼ºå°‘aria-labelæˆ–aria-labelledby`);\n          suggestions.push('ä¸ºå¯¼èˆªå®¹å™¨æ·»åŠ æè¿°æ€§çš„aria-label');\n        }\n      });\n\n      // æ£€æŸ¥ä¸‹æ‹‰èœå•è§¦å‘å™¨\n      const triggers = document.querySelectorAll(\n        '[data-slot=\"navigation-menu-trigger\"]',\n      );\n      triggers.forEach((trigger, index) => {\n        if (!trigger.getAttribute('aria-expanded')) {\n          issues.push(`ä¸‹æ‹‰èœå•è§¦å‘å™¨${index + ONE}ç¼ºå°‘aria-expandedå±æ€§`);\n          suggestions.push('ä¸ºä¸‹æ‹‰èœå•è§¦å‘å™¨æ·»åŠ aria-expandedå±æ€§');\n        }\n\n        if (!trigger.getAttribute('aria-haspopup')) {\n          issues.push(`ä¸‹æ‹‰èœå•è§¦å‘å™¨${index + ONE}ç¼ºå°‘aria-haspopupå±æ€§`);\n          suggestions.push('ä¸ºä¸‹æ‹‰èœå•è§¦å‘å™¨æ·»åŠ aria-haspopupå±æ€§');\n        }\n      });\n\n      // æ£€æŸ¥å½“å‰é¡µé¢æ ‡è¯†\n      const currentPageLinks = document.querySelectorAll(\n        '[aria-current=\"page\"]',\n      );\n      const allLinks = document.querySelectorAll('a[href]');\n\n      if (currentPageLinks.length === ZERO && allLinks.length > ZERO) {\n        issues.push('æœªæ‰¾åˆ°å½“å‰é¡µé¢çš„aria-current=\"page\"æ ‡è¯†');\n        suggestions.push('ä¸ºå½“å‰é¡µé¢é“¾æ¥æ·»åŠ aria-current=\"page\"å±æ€§');\n      }\n\n      return {\n        testName,\n        passed: issues.length === ZERO,\n        details:\n          issues.length === ZERO\n            ? 'æ‰€æœ‰ARIAå±æ€§é…ç½®æ­£ç¡®'\n            : `å‘ç°${issues.length}ä¸ªARIAå±æ€§é—®é¢˜: ${issues.join('; ')}`,\n        ...(suggestions.length > ZERO ? { suggestions } : {}),\n      };\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      return {\n        testName,\n        passed: false,\n        details: `æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ${_error}`,\n        suggestions: ['æ£€æŸ¥DOMç»“æ„', 'éªŒè¯ARIAå±æ€§é…ç½®'],\n      };\n    }\n  }\n\n  /**\n   * è¿è¡Œæ‰€æœ‰æ— éšœç¢æ€§æµ‹è¯•\n   */\n  async runAllTests(): Promise<AccessibilityTestResult[]> {\n    this.results = [];\n\n    // è¿è¡Œå„é¡¹æµ‹è¯•\n    this.results.push(await this.testTabNavigation());\n    this.results.push(await this.testKeyActivation());\n    this.results.push(await this.testEscapeKeyClose());\n    this.results.push(this.testAriaAttributes());\n\n    return this.results;\n  }\n\n  /**\n   * è·å–æµ‹è¯•æŠ¥å‘Š\n   */\n  getTestReport(): string {\n    const totalTests = this.results.length;\n    const passedTests = this.results.filter((r) => r.passed).length;\n    const failedTests = totalTests - passedTests;\n\n    let report = `\\n=== æ— éšœç¢æ€§æµ‹è¯•æŠ¥å‘Š ===\\n`;\n    report += `æ€»æµ‹è¯•æ•°: ${totalTests}\\n`;\n    report += `é€šè¿‡: ${passedTests}\\n`;\n    report += `å¤±è´¥: ${failedTests}\\n`;\n    report += `é€šè¿‡ç‡: ${((passedTests / totalTests) * PERCENTAGE_FULL).toFixed(ONE)}%\\n\\n`;\n\n    this.results.forEach((result, index) => {\n      report += `${index + ONE}. ${result.testName}\\n`;\n      report += `   çŠ¶æ€: ${result.passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}\\n`;\n      report += `   è¯¦æƒ…: ${result.details}\\n`;\n      if (result.suggestions) {\n        report += `   å»ºè®®: ${result.suggestions.join('; ')}\\n`;\n      }\n      report += '\\n';\n    });\n\n    return report;\n  }\n\n  // ç§æœ‰è¾…åŠ©æ–¹æ³•\n  private getFocusableElements(): HTMLElement[] {\n    const selector = [\n      'a[href]',\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      '[tabindex]:not([tabindex=\"-1\"])',\n      '[data-slot=\"navigation-menu-trigger\"]',\n      '[data-slot=\"navigation-menu-link\"]',\n    ].join(', ');\n\n    return Array.from(document.querySelectorAll(selector)) as HTMLElement[];\n  }\n\n  private validateTabOrder(\n    tabOrder: HTMLElement[],\n    focusableElements: HTMLElement[],\n  ): boolean {\n    // ç®€å•éªŒè¯ï¼šæ£€æŸ¥æ˜¯å¦èƒ½éå†æ‰€æœ‰å¯èšç„¦å…ƒç´ \n    return tabOrder.length >= focusableElements.length * MAGIC_0_8; // å…è®¸80%çš„è¦†ç›–ç‡\n  }\n\n  private async testElementKeyActivation(\n    element: HTMLElement,\n    key: string,\n  ): Promise<boolean> {\n    try {\n      const initialState = element.getAttribute('data-state');\n      const initialExpanded = element.getAttribute('aria-expanded');\n\n      const keyEvent = new KeyboardEvent('keydown', {\n        key,\n        bubbles: true,\n        cancelable: true,\n      });\n\n      element.dispatchEvent(keyEvent);\n      await new Promise((resolve) => setTimeout(resolve, PERCENTAGE_FULL));\n\n      const newState = element.getAttribute('data-state');\n      const newExpanded = element.getAttribute('aria-expanded');\n\n      // æ£€æŸ¥çŠ¶æ€æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼ˆè¡¨ç¤ºæ¿€æ´»æˆåŠŸï¼‰\n      return initialState !== newState || initialExpanded !== newExpanded;\n    } catch {\n      return false;\n    }\n  }\n}\n\n// å¯¼å‡ºä¾¿æ·å‡½æ•°\nexport async function runAccessibilityTests(): Promise<string> {\n  const tester = new AccessibilityTester();\n  await tester.runAllTests();\n  return tester.getTestReport();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/accessibility.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/airtable.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/airtable/instance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/airtable/service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/airtable/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors/color-system.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors/dark-theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors/light-theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/colors/utils.ts","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":63,"column":5,"nodeType":"MemberExpression","endLine":63,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-parser.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/content' import is duplicated.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":16,"endColumn":48}],"suppressedMessages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":34,"column":10,"nodeType":"CallExpression","endLine":34,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":42,"column":25,"nodeType":"CallExpression","endLine":42,"endColumn":64,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":92,"column":8,"nodeType":"CallExpression","endLine":92,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found readdirSync from package \"fs\" with non literal argument at index 0","line":100,"column":17,"nodeType":"CallExpression","endLine":100,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Content Management System - Parser Functions\n *\n * This module provides functions for parsing MDX files with frontmatter\n * and retrieving content files from directories.\n */\nimport fs from 'fs';\nimport path from 'path';\nimport matter from 'gray-matter';\nimport type {\n  ContentMetadata,\n  ContentType,\n  Locale,\n  ParsedContent,\n} from '@/types/content';\nimport { ContentError } from '@/types/content';\nimport { logger } from '@/lib/logger';\nimport { CONTENT_LIMITS } from '@/constants/app-constants';\nimport { CONTENT_DIR, validateFilePath } from '@/lib/content-utils';\nimport { validateContentMetadata } from '@/lib/content-validation';\n\n/**\n * Parse MDX file with frontmatter\n */\nexport function parseContentFile<T extends ContentMetadata = ContentMetadata>(\n  filePath: string,\n  type: ContentType,\n): ParsedContent<T> {\n  try {\n    // Validate file path for security\n    const validatedPath = validateFilePath(filePath, CONTENT_DIR);\n\n    // eslint-disable-next-line security/detect-non-literal-fs-filename\n    if (!fs.existsSync(validatedPath)) {\n      throw new ContentError(\n        `Content file not found: ${filePath}`,\n        'FILE_NOT_FOUND',\n      );\n    }\n\n    // eslint-disable-next-line security/detect-non-literal-fs-filename\n    const fileContent = fs.readFileSync(validatedPath, 'utf-8');\n\n    // Check file size limits\n    if (fileContent.length > CONTENT_LIMITS.MAX_FILE_SIZE) {\n      throw new ContentError(\n        `Content file too large: ${fileContent.length} bytes (max: ${CONTENT_LIMITS.MAX_FILE_SIZE})`,\n        'FILE_TOO_LARGE',\n      );\n    }\n\n    const { data: frontmatter, content } = matter(fileContent);\n\n    // Validate metadata\n    const validation = validateContentMetadata(frontmatter, type);\n    if (!validation.isValid) {\n      logger.warn('Content validation failed', {\n        file: filePath,\n        errors: validation.errors,\n        warnings: validation.warnings,\n      });\n    }\n\n    // Extract slug from filename\n    const slug = path.basename(filePath, path.extname(filePath));\n\n    return {\n      slug,\n      metadata: frontmatter as T,\n      content,\n      filePath: validatedPath,\n    };\n  } catch (error) {\n    if (error instanceof ContentError) {\n      throw error;\n    }\n    throw new ContentError(\n      `Failed to parse content file: ${filePath}. ${error instanceof Error ? error.message : 'Unknown error'}`,\n      'PARSE_ERROR',\n    );\n  }\n}\n\n/**\n * Get all content files in a directory\n */\nexport function getContentFiles(contentDir: string, locale?: Locale): string[] {\n  // Validate the base content directory\n  const validatedContentDir = validateFilePath(contentDir, CONTENT_DIR);\n\n  // eslint-disable-next-line security/detect-non-literal-fs-filename\n  if (!fs.existsSync(validatedContentDir)) {\n    logger.warn('Content directory does not exist', {\n      dir: validatedContentDir,\n    });\n    return [];\n  }\n\n  // eslint-disable-next-line security/detect-non-literal-fs-filename\n  const files = fs.readdirSync(validatedContentDir);\n  return files\n    .filter((file) => {\n      const ext = path.extname(file);\n      const isValidExtension = ['.md', '.mdx'].includes(ext);\n      const matchesLocale =\n        !locale ||\n        file.includes(`.${locale}.`) ||\n        (!file.includes('.en.') && !file.includes('.zh.'));\n      return isValidExtension && matchesLocale;\n    })\n    .map((file) => path.join(validatedContentDir, file));\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-query/filters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-query/queries.ts","messages":[{"ruleId":"no-throw-literal","severity":2,"message":"Expected an error object to be thrown.","line":73,"column":5,"nodeType":"ThrowStatement","messageId":"object","endLine":73,"endColumn":75}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å†…å®¹æŸ¥è¯¢å‡½æ•°\n */\n\nimport path from 'path';\nimport type {\n  BlogPost,\n  BlogPostMetadata,\n  ContentMetadata,\n  ContentNotFoundError,\n  ContentQueryOptions,\n  ContentType,\n  Locale,\n  Page,\n  PageMetadata,\n  ParsedContent,\n} from '@/types/content';\nimport { getContentFiles, parseContentFile } from '@/lib/content-parser';\nimport { getContentConfig, PAGES_DIR, POSTS_DIR } from '@/lib/content-utils';\nimport { filterPosts } from '@/lib/content-query/filters';\nimport { paginatePosts, sortPosts } from '@/lib/content-query/sorting';\n\n/**\n * Get all blog posts\n */\nexport function getAllPosts(\n  locale?: Locale,\n  options: ContentQueryOptions = {},\n): BlogPost[] {\n  const files = getContentFiles(POSTS_DIR, locale);\n  const parsedPosts = files.map((file) =>\n    parseContentFile<BlogPostMetadata>(file, 'posts'),\n  );\n\n  const filteredPosts = filterPosts(parsedPosts, options);\n  const sortedPosts = sortPosts(filteredPosts, options);\n  const paginatedPosts = paginatePosts(sortedPosts, options);\n\n  return paginatedPosts;\n}\n\n/**\n * Get all pages\n */\nexport function getAllPages(locale?: Locale): Page[] {\n  const files = getContentFiles(PAGES_DIR, locale);\n  return files\n    .map((file) => parseContentFile<PageMetadata>(file, 'pages'))\n    .filter((page) => {\n      // Filter drafts in production\n      const config = getContentConfig();\n      return config.enableDrafts || !page.metadata.draft;\n    }) as Page[];\n}\n\n/**\n * Get content by slug\n */\nexport function getContentBySlug<T extends ContentMetadata = ContentMetadata>(\n  slug: string,\n  type: ContentType,\n  locale?: Locale,\n): ParsedContent<T> {\n  const contentDir = type === 'posts' ? POSTS_DIR : PAGES_DIR;\n  const files = getContentFiles(contentDir, locale);\n\n  const matchingFile = files.find((file) => {\n    const fileSlug = path.basename(file, path.extname(file));\n    return fileSlug === slug || fileSlug.startsWith(`${slug}.`);\n  });\n\n  if (!matchingFile) {\n    throw new Error(`Content not found: ${slug}`) as ContentNotFoundError;\n  }\n\n  return parseContentFile<T>(matchingFile, type);\n}\n\n/**\n * Get blog post by slug\n */\nexport function getPostBySlug(slug: string, locale?: Locale): BlogPost {\n  return getContentBySlug<BlogPostMetadata>(slug, 'posts', locale) as BlogPost;\n}\n\n/**\n * Get page by slug\n */\nexport function getPageBySlug(slug: string, locale?: Locale): Page {\n  return getContentBySlug<PageMetadata>(slug, 'pages', locale) as Page;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-query/sorting.ts","messages":[{"ruleId":"no-throw-literal","severity":2,"message":"Expected an error object to be thrown.","line":24,"column":7,"nodeType":"ThrowStatement","messageId":"object","endLine":24,"endColumn":74},{"ruleId":"no-throw-literal","severity":2,"message":"Expected an error object to be thrown.","line":62,"column":5,"nodeType":"ThrowStatement","messageId":"object","endLine":64,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å†…å®¹æ’åºå’Œåˆ†é¡µå‡½æ•°\n */\n\nimport { ZERO } from \"@/constants\";\nimport type {\n  BlogPost,\n  ContentError,\n  ContentQueryOptions,\n} from '@/types/content';\n\n/**\n * Get field value from post metadata with type safety\n */\nfunction getFieldValue(post: BlogPost, field: string): string {\n  switch (field) {\n    case 'publishedAt':\n      return post.metadata.publishedAt || '';\n    case 'updatedAt':\n      return post.metadata.updatedAt || '';\n    case 'title':\n      return post.metadata.title || '';\n    default:\n      throw new Error(`Unexpected sort field: ${field}`) as ContentError;\n  }\n}\n\n/**\n * Compare two values with specified sort order\n */\nfunction compareValues(\n  aValue: string,\n  bValue: string,\n  sortOrder: 'asc' | 'desc',\n): number {\n  if (sortOrder === 'desc') {\n    return bValue.localeCompare(aValue);\n  }\n  return aValue.localeCompare(bValue);\n}\n\n/**\n * Create a sort comparator function for posts\n */\nfunction createSortComparator(sortBy: string, sortOrder: 'asc' | 'desc') {\n  return (a: BlogPost, b: BlogPost): number => {\n    const aValue = getFieldValue(a, sortBy);\n    const bValue = getFieldValue(b, sortBy);\n    return compareValues(aValue, bValue, sortOrder);\n  };\n}\n\n/**\n * Validate sort field to prevent object injection\n */\nfunction validateSortField(sortBy: string): void {\n  const allowedSortFields = ['publishedAt', 'updatedAt', 'title'] as const;\n\n  if (\n    !allowedSortFields.includes(sortBy as (typeof allowedSortFields)[number])\n  ) {\n    throw new Error(\n      `Invalid sort field: ${sortBy}. Allowed fields: ${allowedSortFields.join(', ')}`,\n    ) as ContentError;\n  }\n}\n\n/**\n * Sort posts with type-safe property access\n */\nexport function sortPosts(\n  posts: BlogPost[],\n  options: ContentQueryOptions,\n): BlogPost[] {\n  const sortBy = options.sortBy || 'publishedAt';\n  const sortOrder = options.sortOrder || 'desc';\n\n  // Validate sort field to prevent object injection\n  validateSortField(sortBy);\n\n  // Create and apply sort comparator\n  const comparator = createSortComparator(sortBy, sortOrder);\n  posts.sort(comparator);\n\n  return posts;\n}\n\n/**\n * Apply pagination to posts\n */\nexport function paginatePosts(\n  posts: BlogPost[],\n  options: ContentQueryOptions,\n): BlogPost[] {\n  if (options.offset || options.limit) {\n    const start = options.offset || ZERO;\n    const end = options.limit ? start + options.limit : undefined;\n    return posts.slice(start, end);\n  }\n  return posts;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-query/stats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-utils.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/content' import is duplicated.","line":11,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":11,"endColumn":48}],"suppressedMessages":[{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found existsSync from package \"fs\" with non literal argument at index 0","line":105,"column":9,"nodeType":"CallExpression","endLine":105,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-non-literal-fs-filename","severity":2,"message":"Found readFileSync from package \"fs\" with non literal argument at index 0","line":107,"column":29,"nodeType":"CallExpression","endLine":107,"endColumn":74,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Content Management System - Utility Functions\n *\n * This module provides utility functions for content management,\n * including path validation, configuration, and constants.\n */\nimport { COUNT_160 } from \"@/constants/count\";\nimport { COUNT_TEN } from \"@/constants\";\nimport { logger } from '@/lib/logger';\nimport type { ContentConfig } from '@/types/content';\nimport { ContentError } from '@/types/content';\nimport fs from 'fs';\nimport path from 'path';\n\n// Content directory paths\nexport const CONTENT_DIR = path.join(process.cwd(), 'content');\nexport const POSTS_DIR = path.join(CONTENT_DIR, 'posts');\nexport const PAGES_DIR = path.join(CONTENT_DIR, 'pages');\nexport const CONFIG_DIR = path.join(CONTENT_DIR, 'config');\n\n// Allowed file extensions for security\nexport const ALLOWED_EXTENSIONS = ['.md', '.mdx', '.json'];\n\n// Default content configuration\nconst DEFAULT_CONFIG: ContentConfig = {\n  defaultLocale: 'en',\n  supportedLocales: ['en', 'zh'],\n  postsPerPage: COUNT_TEN,\n  enableDrafts: process.env.NODE_ENV === 'development',\n  enableSearch: true,\n  enableComments: false,\n  autoGenerateExcerpt: true,\n  excerptLength: COUNT_160,\n  dateFormat: 'YYYY-MM-DD',\n  timeZone: 'UTC',\n};\n\n/**\n * Validate and normalize file path to prevent directory traversal attacks\n * @param filePath - The file path to validate\n * @param allowedBaseDir - The base directory that file access is restricted to\n * @returns Validated and normalized absolute path\n * @throws ContentError if path is invalid or outside allowed directory\n */\nexport function validateFilePath(\n  filePath: string,\n  allowedBaseDir: string,\n): string {\n  if (!filePath || typeof filePath !== 'string') {\n    throw new ContentError(\n      'Invalid file path: path must be a non-empty string',\n      'INVALID_PATH',\n    );\n  }\n\n  // Normalize the path to resolve any relative components\n  const normalizedPath = path.normalize(filePath);\n\n  // Check for directory traversal attempts\n  if (normalizedPath.includes('..')) {\n    throw new ContentError(\n      'Invalid file path: directory traversal detected',\n      'DIRECTORY_TRAVERSAL',\n    );\n  }\n\n  // Convert to absolute path\n  const absolutePath = path.isAbsolute(normalizedPath)\n    ? normalizedPath\n    : path.join(allowedBaseDir, normalizedPath);\n\n  // Ensure the resolved path is within the allowed base directory\n  const resolvedPath = path.resolve(absolutePath);\n  const resolvedBaseDir = path.resolve(allowedBaseDir);\n\n  if (!resolvedPath.startsWith(resolvedBaseDir)) {\n    throw new ContentError(\n      `File path outside allowed directory: ${resolvedPath}`,\n      'PATH_OUTSIDE_BASE',\n    );\n  }\n\n  // Check if file extension is allowed\n  const ext = path.extname(resolvedPath);\n  if (ext && !ALLOWED_EXTENSIONS.includes(ext)) {\n    throw new ContentError(\n      `File extension not allowed: ${ext}. Allowed extensions: ${ALLOWED_EXTENSIONS.join(', ')}`,\n      'INVALID_EXTENSION',\n    );\n  }\n\n  return absolutePath;\n}\n\n/**\n * Get content configuration\n */\nexport function getContentConfig(): ContentConfig {\n  try {\n    const configPath = path.join(CONFIG_DIR, 'content.json');\n    // Validate config file path for security\n    const validatedConfigPath = validateFilePath(configPath, CONTENT_DIR);\n\n    // eslint-disable-next-line security/detect-non-literal-fs-filename\n    if (fs.existsSync(validatedConfigPath)) {\n      // eslint-disable-next-line security/detect-non-literal-fs-filename\n      const configContent = fs.readFileSync(validatedConfigPath, 'utf-8');\n      const config = JSON.parse(configContent) as Partial<ContentConfig>;\n      return { ...DEFAULT_CONFIG, ...config };\n    }\n  } catch (error) {\n    logger.warn('Failed to load content config, using defaults', { error });\n  }\n\n  return DEFAULT_CONFIG;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/content.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/dev-tools-positioning.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":42}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":134,"column":18,"nodeType":"MemberExpression","endLine":134,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck - å¼€å‘å·¥å…·è±å…ï¼šä»…å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç è´¨é‡\n/**\n * å¼€å‘å·¥å…·å®šä½ç®¡ç†ç³»ç»Ÿ\n *\n * ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¼€å‘å·¥å…·çš„å®šä½ï¼Œé˜²æ­¢é‡å å’Œè§†è§‰å†²çª\n * æä¾›æ™ºèƒ½å¸ƒå±€ç®—æ³•å’Œå¯é…ç½®çš„å®šä½ç­–ç•¥\n */\n\nexport type DevToolPosition =\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-right'\n  | 'top-center'\n  | 'bottom-center'\n  | 'left-center'\n  | 'right-center';\n\nexport type DevToolSize = 'small' | 'medium' | 'large';\n\nexport interface DevToolConfig {\n  id: string;\n  name: string;\n  position: DevToolPosition;\n  size: DevToolSize;\n  priority: number; // 1-10, 10 ä¸ºæœ€é«˜ä¼˜å…ˆçº§\n  zIndex: number;\n  collapsible: boolean;\n  defaultCollapsed?: boolean;\n}\n\n/**\n * å¼€å‘å·¥å…·å®šä½é…ç½®\n * æŒ‰ä¼˜å…ˆçº§å’ŒåŠŸèƒ½é‡è¦æ€§åˆ†é…ä½ç½®\n */\nexport const DEV_TOOLS_CONFIG: Record<string, DevToolConfig> = {\n  // React Scan - æœ€é‡è¦çš„æ€§èƒ½å·¥å…·ï¼Œå³ä¸‹è§’ä¸»è¦ä½ç½®\n  reactScanIndicator: {\n    id: 'react-scan-indicator',\n    name: 'React Scan Indicator',\n    position: 'bottom-left',\n    size: 'small',\n    priority: 9,\n    zIndex: 1000,\n    collapsible: false,\n  },\n\n  reactScanControlPanel: {\n    id: 'react-scan-control-panel',\n    name: 'React Scan Controls',\n    position: 'bottom-right',\n    size: 'medium',\n    priority: 8,\n    zIndex: 1001,\n    collapsible: true,\n    defaultCollapsed: false,\n  },\n\n  // I18n Performance - é‡è¦ä½†ä¸å¦‚ React Scanï¼Œæ”¾åœ¨å³ä¸Šè§’\n  i18nPerformanceDashboard: {\n    id: 'i18n-performance-dashboard',\n    name: 'I18n Performance',\n    position: 'top-right',\n    size: 'medium',\n    priority: 7,\n    zIndex: 999,\n    collapsible: true,\n    defaultCollapsed: false,\n  },\n\n  i18nPerformanceIndicator: {\n    id: 'i18n-performance-indicator',\n    name: 'I18n Indicator',\n    position: 'top-left',\n    size: 'small',\n    priority: 6,\n    zIndex: 998,\n    collapsible: false,\n  },\n\n  // Web Vitals - æ€§èƒ½ç›‘æ§ï¼Œå·¦ä¸‹è§’æ¬¡è¦ä½ç½®\n  webVitalsIndicator: {\n    id: 'web-vitals-indicator',\n    name: 'Web Vitals',\n    position: 'left-center',\n    size: 'medium',\n    priority: 5,\n    zIndex: 997,\n    collapsible: true,\n    defaultCollapsed: true,\n  },\n\n  // å¼€å‘æ€§èƒ½ç›‘æ§ - æœ€ä½ä¼˜å…ˆçº§ï¼Œé¡¶éƒ¨ä¸­å¤®\n  developmentPerformanceMonitor: {\n    id: 'development-performance-monitor',\n    name: 'Dev Performance',\n    position: 'top-center',\n    size: 'small',\n    priority: 4,\n    zIndex: 996,\n    collapsible: true,\n    defaultCollapsed: true,\n  },\n};\n\n/**\n * ä½ç½®åˆ° CSS ç±»çš„æ˜ å°„\n */\nexport const POSITION_CLASSES: Record<DevToolPosition, string> = {\n  'top-left': 'fixed top-4 left-4',\n  'top-right': 'fixed top-4 right-4',\n  'bottom-left': 'fixed bottom-4 left-4',\n  'bottom-right': 'fixed bottom-4 right-4',\n  'top-center': 'fixed top-4 left-1/2 -translate-x-1/2',\n  'bottom-center': 'fixed bottom-4 left-1/2 -translate-x-1/2',\n  'left-center': 'fixed left-4 top-1/2 -translate-y-1/2',\n  'right-center': 'fixed right-4 top-1/2 -translate-y-1/2',\n};\n\n/**\n * å°ºå¯¸åˆ° CSS ç±»çš„æ˜ å°„\n */\nexport const SIZE_CLASSES: Record<DevToolSize, string> = {\n  small: 'max-w-xs',\n  medium: 'max-w-sm',\n  large: 'max-w-md',\n};\n\n/**\n * è·å–å¼€å‘å·¥å…·çš„å®Œæ•´ CSS ç±»\n */\nexport function getDevToolClasses(toolId: string): string {\n  // eslint-disable-next-line security/detect-object-injection\n  const config = DEV_TOOLS_CONFIG[toolId]; // toolId æ¥è‡ªé¢„å®šä¹‰é…ç½®ï¼Œå®‰å…¨\n  if (!config) {\n    console.warn(`Dev tool config not found for: ${toolId}`);\n    return 'fixed bottom-4 right-4 z-50';\n  }\n\n  const positionClass =\n    POSITION_CLASSES[config.position as keyof typeof POSITION_CLASSES] ||\n    POSITION_CLASSES['bottom-right'];\n  const sizeClass =\n    SIZE_CLASSES[config.size as keyof typeof SIZE_CLASSES] ||\n    SIZE_CLASSES.medium;\n  const zIndexClass = `z-[${config.zIndex}]`;\n\n  return `${positionClass} ${sizeClass} ${zIndexClass}`;\n}\n\n/**\n * è·å–å¼€å‘å·¥å…·çš„ z-index å€¼\n */\nexport function getDevToolZIndex(toolId: string): number {\n  const config = DEV_TOOLS_CONFIG[toolId as keyof typeof DEV_TOOLS_CONFIG];\n  return config?.zIndex || DEV_TOOLS_CONSTANTS.LAYOUT.DEFAULT_OFFSET;\n}\n\n/**\n * æ£€æŸ¥å¼€å‘å·¥å…·æ˜¯å¦åº”è¯¥é»˜è®¤æŠ˜å \n */\nexport function shouldDefaultCollapse(toolId: string): boolean {\n  const config = DEV_TOOLS_CONFIG[toolId as keyof typeof DEV_TOOLS_CONFIG];\n  return config?.defaultCollapsed || false;\n}\n\n/**\n * è·å–å¼€å‘å·¥å…·çš„ä¼˜å…ˆçº§\n */\nexport function getDevToolPriority(toolId: string): number {\n  const config = DEV_TOOLS_CONFIG[toolId as keyof typeof DEV_TOOLS_CONFIG];\n  return config?.priority || 1;\n}\n\n/**\n * å¼€å‘å·¥å…·å¸ƒå±€ç®¡ç†å™¨\n */\nexport class DevToolsLayoutManager {\n  private static instance: DevToolsLayoutManager;\n  private activeTools: Set<string> = new Set();\n\n  static getInstance(): DevToolsLayoutManager {\n    if (!DevToolsLayoutManager.instance) {\n      DevToolsLayoutManager.instance = new DevToolsLayoutManager();\n    }\n    return DevToolsLayoutManager.instance;\n  }\n\n  /**\n   * æ³¨å†Œå¼€å‘å·¥å…·\n   */\n  registerTool(toolId: string): void {\n    this.activeTools.add(toolId);\n    this.optimizeLayout();\n  }\n\n  /**\n   * æ³¨é”€å¼€å‘å·¥å…·\n   */\n  unregisterTool(toolId: string): void {\n    this.activeTools.delete(toolId);\n    this.optimizeLayout();\n  }\n\n  /**\n   * ä¼˜åŒ–å¸ƒå±€ï¼Œé¿å…é‡å \n   */\n  private optimizeLayout(): void {\n    // æŒ‰ä¼˜å…ˆçº§æ’åºæ´»è·ƒå·¥å…·\n    const sortedTools = Array.from(this.activeTools).sort((a, b) => {\n      const priorityA = getDevToolPriority(a);\n      const priorityB = getDevToolPriority(b);\n      return priorityB - priorityA; // é™åºæ’åˆ—\n    });\n\n    // æ£€æµ‹ä½ç½®å†²çªå¹¶è°ƒæ•´\n    const usedPositions = new Set<DevToolPosition>();\n\n    sortedTools.forEach((toolId) => {\n      const config = DEV_TOOLS_CONFIG[toolId as keyof typeof DEV_TOOLS_CONFIG];\n      if (!config) return;\n\n      if (usedPositions.has(config.position)) {\n        // ä½ç½®å†²çªï¼Œå¯»æ‰¾æ›¿ä»£ä½ç½®\n        const alternativePosition = this.findAlternativePosition(\n          config.position,\n          usedPositions,\n        );\n        if (alternativePosition) {\n          // ä¸´æ—¶è°ƒæ•´ä½ç½®ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼‰\n          console.warn(\n            `Dev tool ${toolId} position conflict, using alternative: ${alternativePosition}`,\n          );\n        }\n      } else {\n        usedPositions.add(config.position);\n      }\n    });\n  }\n\n  /**\n   * å¯»æ‰¾æ›¿ä»£ä½ç½®\n   */\n  private findAlternativePosition(\n    preferredPosition: DevToolPosition,\n    usedPositions: Set<DevToolPosition>,\n  ): DevToolPosition | null {\n    // ä½ç½®ä¼˜å…ˆçº§æ˜ å°„\n    const alternatives: Record<DevToolPosition, DevToolPosition[]> = {\n      'bottom-right': ['right-center', 'bottom-center', 'top-right'],\n      'bottom-left': ['left-center', 'bottom-center', 'top-left'],\n      'top-right': ['right-center', 'top-center', 'bottom-right'],\n      'top-left': ['left-center', 'top-center', 'bottom-left'],\n      'top-center': ['top-right', 'top-left', 'bottom-center'],\n      'bottom-center': ['bottom-right', 'bottom-left', 'top-center'],\n      'left-center': ['bottom-left', 'top-left', 'right-center'],\n      'right-center': ['bottom-right', 'top-right', 'left-center'],\n    };\n\n    const alternativeList =\n      alternatives[preferredPosition as keyof typeof alternatives] || [];\n\n    for (const alternative of alternativeList) {\n      if (!usedPositions.has(alternative)) {\n        return alternative;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰æ´»è·ƒå·¥å…·çš„å¸ƒå±€ä¿¡æ¯\n   */\n  getLayoutInfo(): Array<{ toolId: string; config: DevToolConfig }> {\n    return Array.from(this.activeTools)\n      .map((toolId) => ({\n        toolId,\n        config: DEV_TOOLS_CONFIG[toolId as keyof typeof DEV_TOOLS_CONFIG],\n      }))\n      .filter((item): item is { toolId: string; config: DevToolConfig } =>\n        Boolean(item.config),\n      )\n      .sort((a, b) => b.config.priority - a.config.priority);\n  }\n}\n\n/**\n * React Hook for dev tools positioning\n */\nexport function useDevToolsLayout() {\n  const layoutManager = DevToolsLayoutManager.getInstance();\n\n  return {\n    registerTool: (toolId: string) => layoutManager.registerTool(toolId),\n    unregisterTool: (toolId: string) => layoutManager.unregisterTool(toolId),\n    getClasses: (toolId: string) => getDevToolClasses(toolId),\n    getZIndex: (toolId: string) => getDevToolZIndex(toolId),\n    shouldCollapse: (toolId: string) => shouldDefaultCollapse(toolId),\n    getLayoutInfo: () => layoutManager.getLayoutInfo(),\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/enhanced-web-vitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/footer-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-analytics.ts","messages":[{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":145,"column":7,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":160,"endColumn":8},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":198,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5141,5144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5141,5144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ANIMATION_DURATION_VERY_SLOW, ONE, PERCENTAGE_FULL, THIRTY_SECONDS_MS, ZERO } from '@/constants';\n\ninterface I18nEvent {\n  type: 'locale_change' | 'translation_error' | 'fallback_used' | 'load_time';\n  locale: string;\n  timestamp: number;\n  metadata: Record<string, unknown>;\n  userId?: string;\n  sessionId: string;\n}\n\ninterface I18nMetrics {\n  localeUsage: Record<string, number>;\n  translationErrors: number;\n  fallbackUsage: number;\n  averageLoadTime: number;\n  userSatisfaction: number;\n}\n\nexport class I18nAnalytics {\n  private events: I18nEvent[] = [];\n  private sessionId: string;\n\n  constructor() {\n    this.sessionId = this.generateSessionId();\n    this.initializeTracking();\n  }\n\n  // è®°å½•è¯­è¨€åˆ‡æ¢äº‹ä»¶\n  trackLocaleChange(\n    fromLocale: string,\n    toLocale: string,\n    source: string,\n  ): void {\n    this.trackEvent({\n      type: 'locale_change',\n      locale: toLocale,\n      timestamp: Date.now(),\n      metadata: {\n        fromLocale,\n        source,\n        userAgent:\n          typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\n        referrer:\n          typeof document !== 'undefined' ? document.referrer : 'unknown',\n      },\n      sessionId: this.sessionId,\n    });\n\n    // å‘é€åˆ°åˆ†ææœåŠ¡\n    this.sendToAnalytics('locale_change', {\n      from_locale: fromLocale,\n      to_locale: toLocale,\n      source,\n      session_id: this.sessionId,\n    });\n  }\n\n  // è®°å½•ç¿»è¯‘é”™è¯¯\n  trackTranslationError(key: string, locale: string, error: string): void {\n    this.trackEvent({\n      type: 'translation_error',\n      locale,\n      timestamp: Date.now(),\n      metadata: {\n        translationKey: key,\n        error,\n        url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n      },\n      sessionId: this.sessionId,\n    });\n\n    // å‘é€é”™è¯¯æŠ¥å‘Š\n    this.sendErrorReport({\n      type: 'translation_error',\n      key,\n      locale,\n      error,\n      url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n      userAgent:\n        typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\n      timestamp: new Date().toISOString(),\n    });\n  }\n\n  // è®°å½•å›é€€ä½¿ç”¨\n  trackFallbackUsage(\n    key: string,\n    locale: string,\n    fallbackLocale: string,\n  ): void {\n    this.trackEvent({\n      type: 'fallback_used',\n      locale,\n      timestamp: Date.now(),\n      metadata: {\n        translationKey: key,\n        fallbackLocale,\n        url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n      },\n      sessionId: this.sessionId,\n    });\n  }\n\n  // è®°å½•åŠ è½½æ—¶é—´\n  trackLoadTime(locale: string, loadTime: number): void {\n    this.trackEvent({\n      type: 'load_time',\n      locale,\n      timestamp: Date.now(),\n      metadata: {\n        loadTime,\n        url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n      },\n      sessionId: this.sessionId,\n    });\n\n    // æ€§èƒ½ç›‘æ§\n    if (loadTime > ANIMATION_DURATION_VERY_SLOW) {\n      // è¶…è¿‡1ç§’\n      this.sendPerformanceAlert({\n        type: 'slow_translation_load',\n        locale,\n        loadTime,\n        url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }\n\n  // ç”Ÿæˆåˆ†ææŠ¥å‘Š\n  generateReport(timeRange: { start: Date; end: Date }): I18nMetrics {\n    const filteredEvents = this.events.filter(\n      (event) =>\n        event.timestamp >= timeRange.start.getTime() &&\n        event.timestamp <= timeRange.end.getTime(),\n    );\n\n    const localeUsage: Record<string, number> = {};\n    let translationErrors = ZERO;\n    let fallbackUsage = ZERO;\n    const loadTimes: number[] = [];\n\n    for (const event of filteredEvents) {\n      switch (event.type) {\n        case 'locale_change':\n          localeUsage[event.locale] = (localeUsage[event.locale] || ZERO) + ONE;\n          break;\n        case 'translation_error':\n          translationErrors += ONE;\n          break;\n        case 'fallback_used':\n          fallbackUsage += ONE;\n          break;\n        case 'load_time':\n          if (typeof event.metadata.loadTime === 'number') {\n            loadTimes.push(event.metadata.loadTime);\n          }\n          break;\n      }\n    }\n\n    const averageLoadTime =\n      loadTimes.length > ZERO\n        ? loadTimes.reduce((a, b) => a + b, ZERO) / loadTimes.length\n        : ZERO;\n\n    return {\n      localeUsage,\n      translationErrors,\n      fallbackUsage,\n      averageLoadTime,\n      userSatisfaction: this.calculateUserSatisfaction(filteredEvents),\n    };\n  }\n\n  // å®æ—¶ç›‘æ§ä»ªè¡¨æ¿æ•°æ®\n  getRealTimeMetrics(): unknown {\n    const last24Hours = this.events.filter(\n      (event) => Date.now() - event.timestamp < 24 * 60 * 60 * 1000,\n    );\n\n    return {\n      activeUsers: new Set(last24Hours.map((e) => e.sessionId)).size,\n      localeDistribution: this.calculateLocaleDistribution(last24Hours),\n      errorRate: this.calculateErrorRate(last24Hours),\n      performanceScore: this.calculatePerformanceScore(last24Hours),\n    };\n  }\n\n  private async sendToAnalytics(\n    eventType: string,\n    data: unknown,\n  ): Promise<void> {\n    try {\n      // Google Analytics 4\n      if (typeof window !== 'undefined' && 'gtag' in window) {\n        (window as any).gtag('event', eventType, data);\n      }\n\n      // è‡ªå®šä¹‰åˆ†ææœåŠ¡\n      if (typeof fetch !== 'undefined') {\n        await fetch('/api/analytics/i18n', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ eventType, data, timestamp: Date.now() }),\n        });\n      }\n    } catch (error) {\n      console.error('Failed to send analytics:', error);\n    }\n  }\n\n  private async sendErrorReport(error: unknown): Promise<void> {\n    try {\n      if (typeof fetch !== 'undefined') {\n        await fetch('/api/errors/i18n', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(error),\n        });\n      }\n    } catch (err) {\n      console.error('Failed to send error report:', err);\n    }\n  }\n\n  private async sendPerformanceAlert(alert: unknown): Promise<void> {\n    try {\n      if (typeof fetch !== 'undefined') {\n        await fetch('/api/alerts/performance', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(alert),\n        });\n      }\n    } catch (error) {\n      console.error('Failed to send performance alert:', error);\n    }\n  }\n\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;\n  }\n\n  private initializeTracking(): void {\n    if (typeof window === 'undefined') return;\n\n    // ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.flushEvents();\n      }\n    });\n\n    // ç›‘å¬é¡µé¢å¸è½½\n    window.addEventListener('beforeunload', () => {\n      this.flushEvents();\n    });\n\n    // å®šæœŸåˆ·æ–°äº‹ä»¶\n    setInterval(() => {\n      this.flushEvents();\n    }, THIRTY_SECONDS_MS); // 30ç§’\n  }\n\n  private async flushEvents(): Promise<void> {\n    if (this.events.length === ZERO) return;\n\n    try {\n      if (typeof fetch !== 'undefined') {\n        await fetch('/api/analytics/i18n/batch', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ events: this.events }),\n        });\n\n        this.events = [];\n      }\n    } catch (error) {\n      console.error('Failed to flush events:', error);\n    }\n  }\n\n  private trackEvent(event: I18nEvent): void {\n    this.events.push(event);\n\n    // é™åˆ¶å†…å­˜ä¸­äº‹ä»¶æ•°é‡\n    if (this.events.length > ANIMATION_DURATION_VERY_SLOW) {\n      this.events = this.events.slice(-500);\n    }\n  }\n\n  private calculateUserSatisfaction(events: I18nEvent[]): number {\n    // åŸºäºé”™è¯¯ç‡ã€åŠ è½½æ—¶é—´ç­‰è®¡ç®—ç”¨æˆ·æ»¡æ„åº¦\n    const errorEvents = events.filter(\n      (e) => e.type === 'translation_error',\n    ).length;\n    const totalEvents = events.length;\n    const errorRate = totalEvents > ZERO ? errorEvents / totalEvents : ZERO;\n\n    return Math.max(ZERO, PERCENTAGE_FULL - errorRate * PERCENTAGE_FULL);\n  }\n\n  private calculateLocaleDistribution(\n    events: I18nEvent[],\n  ): Record<string, number> {\n    const distribution: Record<string, number> = {};\n\n    for (const event of events) {\n      distribution[event.locale] = (distribution[event.locale] || ZERO) + ONE;\n    }\n\n    return distribution;\n  }\n\n  private calculateErrorRate(events: I18nEvent[]): number {\n    const errorEvents = events.filter(\n      (e) => e.type === 'translation_error',\n    ).length;\n    return events.length > ZERO ? (errorEvents / events.length) * PERCENTAGE_FULL : ZERO;\n  }\n\n  private calculatePerformanceScore(events: I18nEvent[]): number {\n    const loadTimeEvents = events.filter((e) => e.type === 'load_time');\n    if (loadTimeEvents.length === ZERO) return PERCENTAGE_FULL;\n\n    const avgLoadTime =\n      loadTimeEvents.reduce((sum, e) => {\n        const loadTime =\n          typeof e.metadata.loadTime === 'number' ? e.metadata.loadTime : ZERO;\n        return sum + loadTime;\n      }, ZERO) / loadTimeEvents.length;\n\n    // 100ms = 100åˆ†ï¼Œ1000ms = 0åˆ†\n    return Math.max(ZERO, PERCENTAGE_FULL - avgLoadTime / 10);\n  }\n}\n\n// å…¨å±€å®ä¾‹\nexport const i18nAnalytics = new I18nAnalytics();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-manager.ts","messages":[{"ruleId":"require-await","severity":2,"message":"Async method 'getMessages' has no 'await' expression.","line":59,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":59,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1792,1798],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'performHealthCheck' has no 'await' expression.","line":105,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":105,"endColumn":27,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2714,2720],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":252,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6484,6487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6484,6487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":264,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6823,6826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6823,6826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":336,"column":42,"nodeType":"MemberExpression","endLine":336,"endColumn":62}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å›½é™…åŒ–ç¼“å­˜ç®¡ç†å™¨\n *\n * ä¸»ç¼“å­˜ç®¡ç†å™¨ï¼Œæ•´åˆ LRU ç¼“å­˜ã€é¢„åŠ è½½å™¨å’Œæ€§èƒ½æŒ‡æ ‡æ”¶é›†å™¨\n */\n\nimport { MAGIC_70, MAGIC_80 } from \"@/constants/count\";\nimport { ANGLE_90_DEG, ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, HTTP_OK, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { CACHE_DURATIONS, CACHE_LIMITS } from '@/constants/i18n-constants';\nimport { LRUCache } from '@/lib/i18n-lru-cache';\nimport { I18nMetricsCollector } from '@/lib/i18n-metrics-collector';\nimport { TranslationPreloader } from '@/lib/i18n-preloader';\nimport { logger } from '@/lib/logger';\nimport type { I18nMetrics, Locale, Messages } from '@/types/i18n';\nimport type {\n  CacheConfig,\n  CacheDebugInfo,\n  CacheHealthCheck,\n  CacheManager,\n  CacheStats,\n  PreloadConfig,\n} from '@/lib/i18n-cache-types';\n\n// ä¸»ç¼“å­˜ç®¡ç†å™¨å®ç°\nexport class I18nCacheManager implements CacheManager {\n  private cache: LRUCache<Messages>;\n  private preloader: TranslationPreloader;\n  private metricsCollector: I18nMetricsCollector;\n  private config: CacheConfig;\n  private healthCheckInterval?: NodeJS.Timeout;\n  private cleanupInterval?: NodeJS.Timeout;\n\n  constructor(\n    config?: Partial<CacheConfig>,\n    preloadConfig?: Partial<PreloadConfig>,\n  ) {\n    // é»˜è®¤é…ç½®\n    const defaultConfig: CacheConfig = {\n      maxSize: CACHE_LIMITS.MAX_CACHE_ENTRIES,\n      ttl: CACHE_DURATIONS.PERFORMANCE_CACHE,\n      enablePersistence: true,\n      storageKey: 'i18n_cache',\n    };\n\n    this.config = { ...defaultConfig, ...config };\n    this.metricsCollector = new I18nMetricsCollector();\n    this.cache = new LRUCache<Messages>(this.config, this.metricsCollector);\n    this.preloader = new TranslationPreloader(\n      this.cache,\n      this.metricsCollector,\n      preloadConfig,\n    );\n\n    this.setupPeriodicTasks();\n  }\n\n  // è·å–æ¶ˆæ¯\n  async getMessages(locale: Locale): Promise<Messages> {\n    this.metricsCollector.recordLocaleUsage(locale);\n    return this.preloader.preloadLocale(locale);\n  }\n\n  // é¢„åŠ è½½æ¶ˆæ¯\n  preloadMessages(locale: Locale): Promise<Messages> {\n    return this.preloader.preloadLocale(locale);\n  }\n\n  // é¢„çƒ­ç¼“å­˜\n  warmupCache(): void {\n    this.preloader.warmupCache();\n  }\n\n  // è·å–æ€§èƒ½æŒ‡æ ‡\n  getMetrics(): I18nMetrics {\n    return this.metricsCollector.getMetrics();\n  }\n\n  // è·å–ç¼“å­˜ç»Ÿè®¡\n  getCacheStats(): CacheStats {\n    return this.cache.getStats();\n  }\n\n  // æ¸…ç©ºç¼“å­˜\n  clearCache(): void {\n    this.cache.clear();\n  }\n\n  // é‡ç½®æŒ‡æ ‡\n  resetMetrics(): void {\n    this.metricsCollector.reset();\n  }\n\n  // è·å–è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯\n  getDetailedStats() {\n    return {\n      cache: this.cache.getDetailedStats(),\n      metrics: this.metricsCollector.getDetailedStats(),\n      preloader: this.preloader.getPreloadStats(),\n      config: this.config,\n    };\n  }\n\n  // å¥åº·æ£€æŸ¥\n  async performHealthCheck(): Promise<CacheHealthCheck> {\n    const metrics = this.getMetrics();\n    const stats = this.getCacheStats();\n    const issues: string[] = [];\n    const recommendations: string[] = [];\n\n    // æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡\n    if (metrics.cacheHitRate < MAGIC_70) {\n      issues.push('ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½');\n      recommendations.push('è€ƒè™‘å¢åŠ ç¼“å­˜å¤§å°æˆ–è°ƒæ•´ TTL');\n    }\n\n    // æ£€æŸ¥é”™è¯¯ç‡\n    if (metrics.errorRate > COUNT_FIVE) {\n      issues.push('é”™è¯¯ç‡è¿‡é«˜');\n      recommendations.push('æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œç¿»è¯‘æ–‡ä»¶å®Œæ•´æ€§');\n    }\n\n    // æ£€æŸ¥å¹³å‡åŠ è½½æ—¶é—´\n    if (metrics.loadTime > HTTP_OK) {\n      issues.push('å¹³å‡åŠ è½½æ—¶é—´è¿‡é•¿');\n      recommendations.push('å¯ç”¨é¢„åŠ è½½æˆ–ä¼˜åŒ–ç¿»è¯‘æ–‡ä»¶å¤§å°');\n    }\n\n    // æ£€æŸ¥ç¼“å­˜åˆ©ç”¨ç‡\n    const utilizationRate = (stats.size / this.config.maxSize) * PERCENTAGE_FULL;\n    if (utilizationRate > ANGLE_90_DEG) {\n      issues.push('ç¼“å­˜æ¥è¿‘æ»¡è½½');\n      recommendations.push('è€ƒè™‘å¢åŠ ç¼“å­˜å¤§å°');\n    }\n\n    return {\n      isHealthy: issues.length === ZERO,\n      issues,\n      performance: {\n        hitRate: metrics.cacheHitRate,\n        averageLoadTime: metrics.loadTime,\n        errorRate: metrics.errorRate,\n      },\n      recommendations,\n    };\n  }\n\n  // è·å–è°ƒè¯•ä¿¡æ¯\n  getDebugInfo(): CacheDebugInfo {\n    return {\n      config: this.config,\n      stats: this.getCacheStats(),\n      metrics: this.getMetrics(),\n      recentEvents: [], // å¯ä»¥ä» metricsCollector è·å–\n      memoryUsage: this.estimateMemoryUsage(),\n    };\n  }\n\n  // ä¼˜åŒ–ç¼“å­˜\n  async optimizeCache(): Promise<void> {\n    // æ¸…ç†è¿‡æœŸé¡¹\n    const cleanedCount = this.cache.cleanup();\n    logger.info('Cleaned expired cache entries', { cleanedCount });\n\n    // åŸºäºä½¿ç”¨æ¨¡å¼è°ƒæ•´é…ç½®\n    const metrics = this.getMetrics();\n    if (metrics.cacheHitRate < MAGIC_80) {\n      // å¦‚æœå‘½ä¸­ç‡ä½ï¼Œå°è¯•æ™ºèƒ½é¢„åŠ è½½\n      await this.preloader.smartPreload();\n    }\n  }\n\n  // å¯¼å‡ºç¼“å­˜æ•°æ®\n  exportCache(): string {\n    const data = {\n      version: '1.0',\n      timestamp: Date.now(),\n      config: this.config,\n      entries: Array.from(this.cache.entries()),\n      stats: this.getCacheStats(),\n      metrics: this.getMetrics(),\n    };\n\n    return JSON.stringify(data, null, COUNT_PAIR);\n  }\n\n  // å¯¼å…¥ç¼“å­˜æ•°æ®\n  importCache(data: string): void {\n    try {\n      const parsed = JSON.parse(data);\n\n      if (parsed.entries && Array.isArray(parsed.entries)) {\n        this.cache.clear();\n        parsed.entries.forEach(([key, value]: [string, Messages]) => {\n          this.cache.set(key, value);\n        });\n      }\n    } catch (error) {\n      logger.error('Failed to import cache data', { error: error as Error });\n      throw new Error('Invalid cache data format');\n    }\n  }\n\n  // æ‰¹é‡æ“ä½œ\n  async batchGetMessages(locales: Locale[]): Promise<Map<Locale, Messages>> {\n    const results = new Map<Locale, Messages>();\n\n    // å¹¶è¡ŒåŠ è½½\n    const promises = locales.map(async (locale) => {\n      try {\n        const messages = await this.getMessages(locale);\n        results.set(locale, messages);\n      } catch (error) {\n        logger.error('Failed to load messages for locale', {\n          locale,\n          error: error as Error,\n        });\n      }\n    });\n\n    await Promise.all(promises);\n    return results;\n  }\n\n  // é¢„åŠ è½½å¤šä¸ªè¯­è¨€\n  async preloadMultipleLocales(locales: Locale[]): Promise<void> {\n    await this.preloader.preloadMultipleLocales(locales);\n  }\n\n  // è®¾ç½®ç¼“å­˜é…ç½®\n  updateConfig(newConfig: Partial<CacheConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    // æ³¨æ„ï¼šè¿™é‡Œå¯èƒ½éœ€è¦é‡æ–°åˆ›å»ºç¼“å­˜å®ä¾‹ä»¥åº”ç”¨æ–°é…ç½®\n  }\n\n  // è®¾ç½®é¢„åŠ è½½é…ç½®\n  updatePreloadConfig(newConfig: Partial<PreloadConfig>): void {\n    this.preloader.setConfig(newConfig);\n  }\n\n  // è·å–æ€§èƒ½æŠ¥å‘Š\n  generatePerformanceReport() {\n    return this.metricsCollector.generatePerformanceReport();\n  }\n\n  // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n  addEventListener(\n    eventType: string,\n    listener: (event: Record<string, unknown>) => void,\n  ): void {\n    // åˆ›å»ºé€‚é…å™¨å‡½æ•°æ¥è½¬æ¢äº‹ä»¶ç±»å‹\n    const adaptedListener = (cacheEvent: any) => {\n      listener(cacheEvent as Record<string, unknown>);\n    };\n    this.metricsCollector.addEventListener(eventType, adaptedListener);\n  }\n\n  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n  removeEventListener(\n    eventType: string,\n    listener: (event: Record<string, unknown>) => void,\n  ): void {\n    // åˆ›å»ºé€‚é…å™¨å‡½æ•°æ¥è½¬æ¢äº‹ä»¶ç±»å‹\n    const adaptedListener = (cacheEvent: any) => {\n      listener(cacheEvent as Record<string, unknown>);\n    };\n    this.metricsCollector.removeEventListener(eventType, adaptedListener);\n  }\n\n  // ä¼°ç®—å†…å­˜ä½¿ç”¨é‡\n  private estimateMemoryUsage() {\n    const cacheStats = this.cache.getDetailedStats();\n    return {\n      used: cacheStats.memoryUsage || ZERO,\n      total: this.config.maxSize * BYTES_PER_KB, // ä¼°ç®—å€¼\n      percentage: cacheStats.utilizationRate || ZERO,\n    };\n  }\n\n  // è®¾ç½®å®šæœŸä»»åŠ¡\n  private setupPeriodicTasks(): void {\n    // å®šæœŸå¥åº·æ£€æŸ¥\n    this.healthCheckInterval = setInterval(\n      async () => {\n        const health = await this.performHealthCheck();\n        if (!health.isHealthy) {\n          console.warn('Cache health check failed:', health.issues);\n        }\n      },\n      COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n    ); // æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡\n\n    // å®šæœŸæ¸…ç†è¿‡æœŸé¡¹\n    this.cleanupInterval = setInterval(\n      () => {\n        this.cache.cleanup();\n      },\n      COUNT_TEN * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n    ); // æ¯10åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡\n  }\n\n  // æ¸…ç†èµ„æº\n  destroy(): void {\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n    }\n\n    this.preloader.cleanup();\n    this.cache.clear();\n  }\n\n  // è·å–ç¼“å­˜é”®\n  getCacheKey(locale: Locale, namespace?: string): string {\n    return namespace ? `${locale}:${namespace}` : locale;\n  }\n\n  // æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨\n  hasMessages(locale: Locale, namespace?: string): boolean {\n    const key = this.getCacheKey(locale, namespace);\n    return this.cache.has(key);\n  }\n\n  // åˆ é™¤ç‰¹å®šè¯­è¨€çš„ç¼“å­˜\n  deleteMessages(locale: Locale, namespace?: string): boolean {\n    const key = this.getCacheKey(locale, namespace);\n    return this.cache.delete(key);\n  }\n\n  // è·å–æ‰€æœ‰ç¼“å­˜çš„è¯­è¨€\n  getCachedLocales(): Locale[] {\n    const keys = Array.from(this.cache.keys());\n    return [...new Set(keys.map((key) => key.split(':')[ZERO] as Locale))];\n  }\n\n  // è·å–ç¼“å­˜å¤§å°ï¼ˆå­—èŠ‚ï¼‰\n  getCacheSize(): number {\n    return this.cache.getDetailedStats().memoryUsage || ZERO;\n  }\n\n  // æ£€æŸ¥æ˜¯å¦æ­£åœ¨é¢„åŠ è½½\n  isPreloading(): boolean {\n    return this.preloader.isPreloading();\n  }\n\n  // è·å–é¢„åŠ è½½è¿›åº¦\n  getPreloadProgress(): number {\n    return this.preloader.getPreloadProgress();\n  }\n\n  // åœæ­¢é¢„åŠ è½½\n  stopPreloading(): void {\n    this.preloader.stopPreloading();\n  }\n}\n\n// å…¨å±€ç¼“å­˜å®ä¾‹\nexport const i18nCache = new I18nCacheManager();\n\n// åˆå§‹åŒ–ç¼“å­˜é¢„çƒ­\nif (typeof window !== 'undefined') {\n  // åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­é¢„çƒ­ç¼“å­˜\n  i18nCache.warmupCache();\n}\n\n// åˆ›å»ºç¼“å­˜ç®¡ç†å™¨çš„å·¥å‚å‡½æ•°\nexport function createI18nCacheManager(\n  config?: Partial<CacheConfig>,\n  preloadConfig?: Partial<PreloadConfig>,\n): I18nCacheManager {\n  return new I18nCacheManager(config, preloadConfig);\n}\n\n// å¯¼å‡ºç±»å‹åˆ«å\nexport type { I18nCacheManager as CacheManager };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-types-advanced.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/constants/time' import is duplicated.","line":13,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":13,"endColumn":50},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":330,"column":36,"nodeType":"MemberExpression","endLine":330,"endColumn":56}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å›½é™…åŒ–ç¼“å­˜é«˜çº§é…ç½®å’ŒåŠŸèƒ½\n * I18n Cache Advanced Configuration and Features\n *\n * æä¾›ç¼“å­˜ç³»ç»Ÿçš„é«˜çº§é…ç½®é€‰é¡¹ã€ç­–ç•¥å’Œæ‰©å±•åŠŸèƒ½\n */\n\nimport { COUNT_14, COUNT_256, MAGIC_16, MAGIC_32, MAGIC_512, MAGIC_6 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_TEN, COUNT_TRIPLE, HOURS_PER_DAY, PERCENTAGE_FULL, SECONDS_PER_MINUTE, TEN_SECONDS_MS, THIRTY_SECONDS_MS, ZERO } from '@/constants';\n\nimport { DEC_0_05, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { MINUTE_MS } from \"@/constants/time\";\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport type { Locale } from '@/types/i18n';\nimport type {\n  CacheBackupConfig,\n  CacheCompressionConfig,\n  CacheEncryptionConfig,\n  CacheMonitoringConfig,\n  CachePartitionConfig,\n  CachePerformanceConfig,\n  CacheSecurityConfig,\n  CacheSyncOptions,\n} from '@/lib/i18n-cache-types-interfaces';\n\n/**\n * é«˜çº§ç¼“å­˜é…ç½®\n * Advanced cache configuration\n */\nexport interface AdvancedCacheConfig {\n  // åŸºç¡€é…ç½®\n  maxSize: number;\n  ttl: number;\n  enablePersistence: boolean;\n  storageKey: string;\n\n  // é«˜çº§åŠŸèƒ½é…ç½®\n  compression: CacheCompressionConfig;\n  encryption: CacheEncryptionConfig;\n  monitoring: CacheMonitoringConfig;\n  backup: CacheBackupConfig;\n  performance: CachePerformanceConfig;\n  security: CacheSecurityConfig;\n  partitioning: CachePartitionConfig;\n  sync: CacheSyncOptions;\n\n  // ç­–ç•¥é…ç½®\n  evictionStrategy: 'lru' | 'lfu' | 'fifo' | 'ttl' | 'custom';\n  customEvictionStrategy?: (\n    items: Array<{ key: string; lastAccessed: number; hits: number }>,\n  ) => string[];\n\n  // é¢„åŠ è½½é…ç½®\n  preload: {\n    enabled: boolean;\n    locales: Locale[];\n    batchSize: number;\n    delayBetweenBatches: number;\n    warmupOnInit: boolean;\n    prefetchThreshold: number;\n  };\n\n  // è°ƒè¯•å’Œå¼€å‘é…ç½®\n  debug: {\n    enabled: boolean;\n    logLevel: 'error' | 'warn' | 'info' | 'debug';\n    logOperations: boolean;\n    trackMetrics: boolean;\n  };\n}\n\n/**\n * ç¼“å­˜é›†ç¾¤é…ç½®\n * Cache cluster configuration\n */\nexport interface CacheClusterConfig {\n  enabled: boolean;\n  nodes: Array<{\n    id: string;\n    host: string;\n    port: number;\n    weight: number;\n  }>;\n  replicationFactor: number;\n  consistencyLevel: 'eventual' | 'strong' | 'weak';\n  failoverStrategy: 'round_robin' | 'weighted' | 'least_connections';\n  healthCheckInterval: number;\n}\n\n/**\n * ç¼“å­˜åˆ†ç‰‡é…ç½®\n * Cache sharding configuration\n */\nexport interface CacheShardingConfig {\n  enabled: boolean;\n  shardCount: number;\n  shardingStrategy: 'hash' | 'range' | 'directory' | 'custom';\n  customShardingFunction?: (key: string) => number;\n  rebalanceThreshold: number;\n  autoRebalance: boolean;\n}\n\n/**\n * ç¼“å­˜é¢„çƒ­é…ç½®\n * Cache warming configuration\n */\nexport interface CacheWarmingConfig {\n  enabled: boolean;\n  strategies: Array<{\n    name: string;\n    priority: number;\n    condition: (context: Record<string, unknown>) => boolean;\n    execute: (cache: unknown) => Promise<void>;\n  }>;\n  schedules: Array<{\n    cron: string;\n    strategy: string;\n    enabled: boolean;\n  }>;\n  maxConcurrency: number;\n  timeout: number;\n}\n\n/**\n * ç¼“å­˜å¤±æ•ˆé…ç½®\n * Cache invalidation configuration\n */\nexport interface CacheInvalidationConfig {\n  enabled: boolean;\n  strategies: {\n    timeBasedInvalidation: {\n      enabled: boolean;\n      checkInterval: number;\n      batchSize: number;\n    };\n    eventBasedInvalidation: {\n      enabled: boolean;\n      events: string[];\n      debounceTime: number;\n    };\n    dependencyBasedInvalidation: {\n      enabled: boolean;\n      dependencyGraph: Record<string, string[]>;\n      cascadeInvalidation: boolean;\n    };\n  };\n  customInvalidationRules: Array<{\n    name: string;\n    condition: (key: string, value: unknown) => boolean;\n    action: 'delete' | 'refresh' | 'mark_stale';\n  }>;\n}\n\n/**\n * ç¼“å­˜ä¸€è‡´æ€§é…ç½®\n * Cache consistency configuration\n */\nexport interface CacheConsistencyConfig {\n  level: 'eventual' | 'strong' | 'weak';\n  conflictResolution:\n    | 'last_write_wins'\n    | 'first_write_wins'\n    | 'merge'\n    | 'custom';\n  customConflictResolver?: (local: unknown, remote: unknown) => unknown;\n  versioningStrategy: 'timestamp' | 'vector_clock' | 'sequence' | 'custom';\n  maxVersionHistory: number;\n}\n\n/**\n * ç¼“å­˜é™æµé…ç½®\n * Cache rate limiting configuration\n */\nexport interface CacheRateLimitConfig {\n  enabled: boolean;\n  rules: Array<{\n    name: string;\n    pattern: string; // Key pattern (regex)\n    limit: number; // Requests per window\n    window: number; // Time window in milliseconds\n    action: 'block' | 'delay' | 'degrade';\n    priority: number;\n  }>;\n  globalLimit: {\n    enabled: boolean;\n    maxRequestsPerSecond: number;\n    burstSize: number;\n  };\n  adaptiveThrottling: {\n    enabled: boolean;\n    cpuThreshold: number;\n    memoryThreshold: number;\n    responseTimeThreshold: number;\n  };\n}\n\n/**\n * ç¼“å­˜è´¨é‡é…ç½®\n * Cache quality configuration\n */\nexport interface CacheQualityConfig {\n  dataValidation: {\n    enabled: boolean;\n    schemas: Record<string, unknown>;\n    strictMode: boolean;\n    sanitization: boolean;\n  };\n  integrityChecks: {\n    enabled: boolean;\n    checksumAlgorithm: 'md5' | 'sha1' | 'sha256';\n    verifyOnRead: boolean;\n    verifyOnWrite: boolean;\n  };\n  qualityMetrics: {\n    enabled: boolean;\n    trackDataFreshness: boolean;\n    trackDataAccuracy: boolean;\n    trackDataCompleteness: boolean;\n  };\n}\n\n/**\n * ç¼“å­˜æ‰©å±•é…ç½®\n * Cache extension configuration\n */\nexport interface CacheExtensionConfig {\n  plugins: Array<{\n    name: string;\n    version: string;\n    enabled: boolean;\n    config: Record<string, unknown>;\n  }>;\n  middleware: Array<{\n    name: string;\n    order: number;\n    enabled: boolean;\n    config: Record<string, unknown>;\n  }>;\n  hooks: {\n    beforeGet: string[];\n    afterGet: string[];\n    beforeSet: string[];\n    afterSet: string[];\n    beforeDelete: string[];\n    afterDelete: string[];\n  };\n}\n\n/**\n * ç¼“å­˜ç¯å¢ƒé…ç½®\n * Cache environment configuration\n */\nexport interface CacheEnvironmentConfig {\n  development: Partial<AdvancedCacheConfig>;\n  staging: Partial<AdvancedCacheConfig>;\n  production: Partial<AdvancedCacheConfig>;\n  test: Partial<AdvancedCacheConfig>;\n}\n\n/**\n * é»˜è®¤é«˜çº§ç¼“å­˜é…ç½®\n * Default advanced cache configuration\n */\nexport const DEFAULT_ADVANCED_CACHE_CONFIG: AdvancedCacheConfig = {\n  // åŸºç¡€é…ç½®\n  maxSize: ANIMATION_DURATION_VERY_SLOW,\n  ttl: COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  enablePersistence: true,\n  storageKey: 'i18n_cache',\n\n  // å‹ç¼©é…ç½®\n  compression: {\n    enableCompression: false,\n    algorithm: 'gzip',\n    threshold: BYTES_PER_KB,\n    level: MAGIC_6,\n  },\n\n  // åŠ å¯†é…ç½®\n  encryption: {\n    enableEncryption: false,\n    algorithm: 'aes-256-gcm',\n    keyDerivation: 'pbkdf2',\n    saltLength: MAGIC_16,\n  },\n\n  // ç›‘æ§é…ç½®\n  monitoring: {\n    enableMonitoring: true,\n    metricsInterval: MINUTE_MS,\n    alertThresholds: {\n      hitRateBelow: MAGIC_0_8,\n      errorRateAbove: DEC_0_05,\n      loadTimeAbove: ANIMATION_DURATION_VERY_SLOW,\n    },\n  },\n\n  // å¤‡ä»½é…ç½®\n  backup: {\n    enableBackup: false,\n    backupInterval: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n    maxBackups: DAYS_PER_WEEK,\n    backupLocation: './cache-backups',\n    compressionEnabled: true,\n  },\n\n  // æ€§èƒ½é…ç½®\n  performance: {\n    enableLazyLoading: true,\n    prefetchThreshold: MAGIC_0_8,\n    maxConcurrentLoads: COUNT_FIVE,\n    loadTimeout: TEN_SECONDS_MS,\n    retryAttempts: COUNT_TRIPLE,\n    retryDelay: ANIMATION_DURATION_VERY_SLOW,\n  },\n\n  // å®‰å…¨é…ç½®\n  security: {\n    enableAccessControl: false,\n    allowedOrigins: [],\n    maxKeyLength: COUNT_256,\n    maxValueSize: BYTES_PER_KB * BYTES_PER_KB,\n    sanitizeKeys: true,\n    validateValues: true,\n  },\n\n  // åˆ†åŒºé…ç½®\n  partitioning: {\n    enablePartitioning: false,\n    partitionKey: (key: string) => key.split(':')[ZERO] || key,\n    maxPartitions: COUNT_TEN,\n    partitionStrategy: 'hash',\n  },\n\n  // åŒæ­¥é…ç½®\n  sync: {\n    enableSync: false,\n    syncInterval: THIRTY_SECONDS_MS,\n    conflictResolution: 'local',\n  },\n\n  // ç­–ç•¥é…ç½®\n  evictionStrategy: 'lru',\n\n  // é¢„åŠ è½½é…ç½®\n  preload: {\n    enabled: true,\n    locales: ['en', 'zh'],\n    batchSize: COUNT_FIVE,\n    delayBetweenBatches: PERCENTAGE_FULL,\n    warmupOnInit: false,\n    prefetchThreshold: MAGIC_0_8,\n  },\n\n  // è°ƒè¯•é…ç½®\n  debug: {\n    enabled: process.env.NODE_ENV === 'development',\n    logLevel: 'warn',\n    logOperations: false,\n    trackMetrics: true,\n  },\n};\n\n/**\n * ç¼“å­˜é…ç½®å·¥å‚\n * Cache configuration factory\n */\nexport class CacheConfigFactory {\n  /**\n   * åˆ›å»ºå¼€å‘ç¯å¢ƒé…ç½®\n   * Create development configuration\n   */\n  static createDevelopmentConfig(): AdvancedCacheConfig {\n    return {\n      ...DEFAULT_ADVANCED_CACHE_CONFIG,\n      debug: {\n        enabled: true,\n        logLevel: 'debug',\n        logOperations: true,\n        trackMetrics: true,\n      },\n      monitoring: {\n        ...DEFAULT_ADVANCED_CACHE_CONFIG.monitoring,\n        metricsInterval: TEN_SECONDS_MS,\n      },\n    };\n  }\n\n  /**\n   * åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®\n   * Create production configuration\n   */\n  static createProductionConfig(): AdvancedCacheConfig {\n    return {\n      ...DEFAULT_ADVANCED_CACHE_CONFIG,\n      compression: {\n        enableCompression: true,\n        algorithm: 'gzip',\n        threshold: MAGIC_512,\n        level: MAGIC_6,\n      },\n      encryption: {\n        enableEncryption: true,\n        algorithm: 'aes-256-gcm',\n        keyDerivation: 'pbkdf2',\n        saltLength: MAGIC_32,\n      },\n      backup: {\n        enableBackup: true,\n        backupInterval: MAGIC_6 * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 6 hours\n        maxBackups: COUNT_14,\n        backupLocation: './cache-backups',\n        compressionEnabled: true,\n      },\n      debug: {\n        enabled: false,\n        logLevel: 'error',\n        logOperations: false,\n        trackMetrics: true,\n      },\n    };\n  }\n\n  /**\n   * åˆ›å»ºæµ‹è¯•ç¯å¢ƒé…ç½®\n   * Create test configuration\n   */\n  static createTestConfig(): AdvancedCacheConfig {\n    return {\n      ...DEFAULT_ADVANCED_CACHE_CONFIG,\n      maxSize: PERCENTAGE_FULL,\n      ttl: ANIMATION_DURATION_VERY_SLOW,\n      enablePersistence: false,\n      monitoring: {\n        ...DEFAULT_ADVANCED_CACHE_CONFIG.monitoring,\n        enableMonitoring: false,\n      },\n      debug: {\n        enabled: false,\n        logLevel: 'error',\n        logOperations: false,\n        trackMetrics: false,\n      },\n    };\n  }\n\n  /**\n   * åˆå¹¶é…ç½®\n   * Merge configurations\n   */\n  static mergeConfigs(\n    base: AdvancedCacheConfig,\n    override: Partial<AdvancedCacheConfig>,\n  ): AdvancedCacheConfig {\n    return {\n      ...base,\n      ...override,\n      compression: { ...base.compression, ...override.compression },\n      encryption: { ...base.encryption, ...override.encryption },\n      monitoring: { ...base.monitoring, ...override.monitoring },\n      backup: { ...base.backup, ...override.backup },\n      performance: { ...base.performance, ...override.performance },\n      security: { ...base.security, ...override.security },\n      partitioning: { ...base.partitioning, ...override.partitioning },\n      sync: { ...base.sync, ...override.sync },\n      preload: { ...base.preload, ...override.preload },\n      debug: { ...base.debug, ...override.debug },\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-types-base.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":295,"column":13,"nodeType":"MemberExpression","endLine":295,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":296,"column":9,"nodeType":"MemberExpression","endLine":296,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":296,"column":36,"nodeType":"MemberExpression","endLine":296,"endColumn":46},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":297,"column":9,"nodeType":"MemberExpression","endLine":297,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":297,"column":37,"nodeType":"MemberExpression","endLine":297,"endColumn":54}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å›½é™…åŒ–ç¼“å­˜åŸºç¡€ç±»å‹å®šä¹‰\n * I18n Cache Base Type Definitions\n *\n * æä¾›ç¼“å­˜ç³»ç»Ÿæ‰€éœ€çš„åŸºç¡€ç±»å‹ã€æ¥å£å’Œå¸¸é‡å®šä¹‰\n */\n\nimport type { I18nMetrics, Locale } from '@/types/i18n';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, FIVE_SECONDS_MS, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, TEN_SECONDS_MS, ZERO } from '@/constants';\n\n/**\n * ç¼“å­˜é…ç½®æ¥å£\n * Cache configuration interface\n */\nexport interface CacheConfig {\n  maxSize: number;\n  ttl: number; // Time to live in milliseconds\n  enablePersistence: boolean;\n  storageKey: string;\n}\n\n/**\n * ç¼“å­˜é¡¹æ¥å£\n * Cache item interface\n */\nexport interface CacheItem<T> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n  hits: number;\n}\n\n/**\n * ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n * Cache statistics\n */\nexport interface CacheStats {\n  size: number;\n  totalHits: number;\n  averageAge: number;\n}\n\n/**\n * é¢„åŠ è½½é…ç½®\n * Preload configuration\n */\nexport interface PreloadConfig {\n  enablePreload: boolean;\n  preloadLocales: Locale[];\n  batchSize: number;\n  delayBetweenBatches: number;\n  timeout: number;\n}\n\n/**\n * ç¼“å­˜æ“ä½œç»“æœ\n * Cache operation result\n */\nexport interface CacheOperationResult<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  fromCache: boolean;\n  loadTime?: number;\n}\n\n/**\n * ç¼“å­˜äº‹ä»¶ç±»å‹\n * Cache event types\n */\nexport type CacheEventType =\n  | 'hit'\n  | 'miss'\n  | 'set'\n  | 'delete'\n  | 'clear'\n  | 'expire'\n  | 'preload_start'\n  | 'preload_complete'\n  | 'preload_error';\n\n/**\n * ç¼“å­˜äº‹ä»¶\n * Cache event\n */\nexport interface CacheEvent<T = unknown> {\n  type: CacheEventType;\n  key?: string;\n  data?: T;\n  timestamp: number;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * ç¼“å­˜ç›‘å¬å™¨\n * Cache event listener\n */\nexport type CacheEventListener<T = unknown> = (event: CacheEvent<T>) => void;\n\n/**\n * ç¼“å­˜ç­–ç•¥\n * Cache strategy\n */\nexport type CacheStrategy = 'lru' | 'lfu' | 'fifo' | 'ttl';\n\n/**\n * ç¼“å­˜é…ç½®éªŒè¯\n * Cache configuration validation\n */\nexport interface CacheConfigValidation {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\n/**\n * ç¼“å­˜å¥åº·æ£€æŸ¥\n * Cache health check\n */\nexport interface CacheHealthCheck {\n  isHealthy: boolean;\n  issues: string[];\n  performance: {\n    hitRate: number;\n    averageLoadTime: number;\n    errorRate: number;\n  };\n  recommendations: string[];\n}\n\n/**\n * ç¼“å­˜è°ƒè¯•ä¿¡æ¯\n * Cache debug information\n */\nexport interface CacheDebugInfo {\n  config: CacheConfig;\n  stats: CacheStats;\n  metrics: I18nMetrics;\n  recentEvents: CacheEvent[];\n  memoryUsage?: {\n    used: number;\n    total: number;\n    percentage: number;\n  };\n}\n\n/**\n * é»˜è®¤ç¼“å­˜é…ç½®\n * Default cache configuration\n */\nexport const DEFAULT_CACHE_CONFIG: CacheConfig = {\n  maxSize: ANIMATION_DURATION_VERY_SLOW,\n  ttl: COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 5 minutes\n  enablePersistence: true,\n  storageKey: 'i18n_cache',\n};\n\n/**\n * é»˜è®¤é¢„åŠ è½½é…ç½®\n * Default preload configuration\n */\nexport const DEFAULT_PRELOAD_CONFIG: PreloadConfig = {\n  enablePreload: true,\n  preloadLocales: ['en', 'zh'],\n  batchSize: COUNT_FIVE,\n  delayBetweenBatches: PERCENTAGE_FULL,\n  timeout: FIVE_SECONDS_MS,\n};\n\n/**\n * ç¼“å­˜å¸¸é‡\n * Cache constants\n */\nexport const CACHE_CONSTANTS = {\n  MIN_TTL: ANIMATION_DURATION_VERY_SLOW, // 1 second\n  MAX_TTL: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 24 hours\n  MIN_CACHE_SIZE: COUNT_TEN,\n  MAX_CACHE_SIZE: TEN_SECONDS_MS,\n  DEFAULT_BATCH_SIZE: COUNT_FIVE,\n  MAX_CONCURRENT_LOADS: COUNT_TEN,\n  METRICS_RESET_INTERVAL: SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 1 hour\n  HEALTH_CHECK_INTERVAL: COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 5 minutes\n} as const;\n\n/**\n * ç¼“å­˜é”™è¯¯ç±»å‹\n * Cache error types\n */\nexport class CacheError extends Error {\n  public readonly code: string;\n  public readonly details?: Record<string, unknown> | undefined;\n\n  constructor(\n    message: string,\n    code: string = 'CACHE_ERROR',\n    details?: Record<string, unknown> | undefined,\n  ) {\n    super(message);\n    this.name = 'CacheError';\n    this.code = code;\n    this.details = details;\n  }\n}\n\n/**\n * ç¼“å­˜éªŒè¯é”™è¯¯\n * Cache validation error\n */\nexport class CacheValidationError extends CacheError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CACHE_VALIDATION_ERROR', details);\n    this.name = 'CacheValidationError';\n  }\n}\n\n/**\n * ç¼“å­˜å­˜å‚¨é”™è¯¯\n * Cache storage error\n */\nexport class CacheStorageError extends CacheError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CACHE_STORAGE_ERROR', details);\n    this.name = 'CacheStorageError';\n  }\n}\n\n/**\n * ç¼“å­˜åºåˆ—åŒ–é”™è¯¯\n * Cache serialization error\n */\nexport class CacheSerializationError extends CacheError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CACHE_SERIALIZATION_ERROR', details);\n    this.name = 'CacheSerializationError';\n  }\n}\n\n/**\n * ç±»å‹å®ˆå«å‡½æ•°\n * Type guard functions\n */\nexport function isCacheItem<T>(value: unknown): value is CacheItem<T> {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    'data' in value &&\n    'timestamp' in value &&\n    'ttl' in value &&\n    'hits' in value\n  );\n}\n\nexport function isCacheConfig(value: unknown): value is CacheConfig {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    'maxSize' in value &&\n    'ttl' in value &&\n    'enablePersistence' in value &&\n    'storageKey' in value\n  );\n}\n\nexport function isCacheEvent(value: unknown): value is CacheEvent {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    'type' in value &&\n    'timestamp' in value\n  );\n}\n\n/**\n * åŸºç¡€å·¥å…·å‡½æ•°\n * Basic utility functions\n */\nexport function createCacheKey(\n  locale: Locale,\n  namespace?: string,\n  key?: string,\n): string {\n  const parts: string[] = [locale];\n  if (namespace) parts.push(namespace);\n  if (key) parts.push(key);\n  return parts.join(':');\n}\n\nexport function parseCacheKey(cacheKey: string): {\n  locale: Locale;\n  namespace?: string;\n  key?: string;\n} {\n  const parts = cacheKey.split(':');\n  return {\n    locale: parts[ZERO] as Locale,\n    ...(parts[ONE] && { namespace: parts[ONE] }),\n    ...(parts[COUNT_PAIR] && { key: parts[COUNT_PAIR] }),\n  };\n}\n\n/**\n * ç¼“å­˜é…ç½®éªŒè¯å‡½æ•°\n * Cache configuration validation function\n */\nexport function validateCacheConfig(\n  config: Partial<CacheConfig>,\n): CacheConfigValidation {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (config.maxSize !== undefined) {\n    if (config.maxSize < CACHE_CONSTANTS.MIN_CACHE_SIZE) {\n      errors.push(`maxSize must be at least ${CACHE_CONSTANTS.MIN_CACHE_SIZE}`);\n    }\n    if (config.maxSize > CACHE_CONSTANTS.MAX_CACHE_SIZE) {\n      errors.push(`maxSize must not exceed ${CACHE_CONSTANTS.MAX_CACHE_SIZE}`);\n    }\n  }\n\n  if (config.ttl !== undefined) {\n    if (config.ttl < CACHE_CONSTANTS.MIN_TTL) {\n      errors.push(`ttl must be at least ${CACHE_CONSTANTS.MIN_TTL}ms`);\n    }\n    if (config.ttl > CACHE_CONSTANTS.MAX_TTL) {\n      warnings.push(`ttl is very high (${config.ttl}ms), consider reducing it`);\n    }\n  }\n\n  if (config.storageKey !== undefined) {\n    if (\n      typeof config.storageKey !== 'string' ||\n      config.storageKey.length === ZERO\n    ) {\n      errors.push('storageKey must be a non-empty string');\n    }\n  }\n\n  if (config.enablePersistence !== undefined) {\n    if (typeof config.enablePersistence !== 'boolean') {\n      errors.push('enablePersistence must be a boolean');\n    }\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-types-interfaces.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-types-utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":49,"column":15,"nodeType":"MemberExpression","endLine":49,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":50,"column":11,"nodeType":"MemberExpression","endLine":50,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":50,"column":38,"nodeType":"MemberExpression","endLine":50,"endColumn":48},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":51,"column":11,"nodeType":"MemberExpression","endLine":51,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":51,"column":39,"nodeType":"MemberExpression","endLine":51,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":180,"column":43,"nodeType":"MemberExpression","endLine":180,"endColumn":59},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":196,"column":33,"nodeType":"Literal","endLine":196,"endColumn":71}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å›½é™…åŒ–ç¼“å­˜å·¥å…·å‡½æ•°\n * I18n Cache Utility Functions\n *\n * æä¾›ç¼“å­˜ç³»ç»Ÿæ‰€éœ€çš„å·¥å…·å‡½æ•°ã€éªŒè¯å™¨å’Œè¾…åŠ©æ–¹æ³•\n */\n\nimport { COUNT_100000, COUNT_256, MAGIC_9 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_PAIR, COUNT_TEN, HOURS_PER_DAY, ONE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type { AdvancedCacheConfig } from '@/lib/i18n-cache-types-advanced';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  CacheConfig,\n  CacheConfigValidation,\n  CacheEvent,\n  CacheEventType,\n  CacheItem,\n  CacheStats,\n} from '@/lib/i18n-cache-types-base';\n\n/**\n * ç¼“å­˜é”®å·¥å…·å‡½æ•°\n * Cache key utility functions\n */\nexport const CacheKeyUtils = {\n  /**\n   * åˆ›å»ºç¼“å­˜é”®\n   * Create cache key\n   */\n  create(locale: Locale, namespace?: string, key?: string): string {\n    const parts: string[] = [locale];\n    if (namespace) parts.push(namespace);\n    if (key) parts.push(key);\n    return parts.join(':');\n  },\n\n  /**\n   * è§£æç¼“å­˜é”®\n   * Parse cache key\n   */\n  parse(cacheKey: string): {\n    locale: Locale;\n    namespace?: string;\n    key?: string;\n  } {\n    const parts = cacheKey.split(':');\n    return {\n      locale: parts[ZERO] as Locale,\n      ...(parts[ONE] && { namespace: parts[ONE] }),\n      ...(parts[COUNT_PAIR] && { key: parts[COUNT_PAIR] }),\n    };\n  },\n\n  /**\n   * éªŒè¯ç¼“å­˜é”®æ ¼å¼\n   * Validate cache key format\n   */\n  validate(key: string): boolean {\n    return typeof key === 'string' && key.length > ZERO && key.length <= COUNT_256;\n  },\n\n  /**\n   * æ ‡å‡†åŒ–ç¼“å­˜é”®\n   * Normalize cache key\n   */\n  normalize(key: string): string {\n    return key\n      .toLowerCase()\n      .trim()\n      .replace(/[^a-z0-9:_-]/g, '_');\n  },\n\n  /**\n   * ç”Ÿæˆé€šé…ç¬¦æ¨¡å¼\n   * Generate wildcard pattern\n   */\n  createPattern(locale?: Locale, namespace?: string): string {\n    const parts: string[] = [];\n    if (locale) parts.push(locale);\n    else parts.push('*');\n    if (namespace) parts.push(namespace);\n    else parts.push('*');\n    parts.push('*');\n    return parts.join(':');\n  },\n} as const;\n\n/**\n * ç¼“å­˜æ—¶é—´å·¥å…·å‡½æ•°\n * Cache time utility functions\n */\nexport const CacheTimeUtils = {\n  /**\n   * æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n   * Check if expired\n   */\n  isExpired(timestamp: number, ttl: number): boolean {\n    return Date.now() - timestamp > ttl;\n  },\n\n  /**\n   * è®¡ç®—å‰©ä½™æ—¶é—´\n   * Calculate remaining time\n   */\n  getRemainingTime(timestamp: number, ttl: number): number {\n    const elapsed = Date.now() - timestamp;\n    return Math.max(ZERO, ttl - elapsed);\n  },\n\n  /**\n   * æ ¼å¼åŒ–æ—¶é—´\n   * Format time\n   */\n  formatDuration(milliseconds: number): string {\n    const seconds = Math.floor(milliseconds / ANIMATION_DURATION_VERY_SLOW);\n    const minutes = Math.floor(seconds / SECONDS_PER_MINUTE);\n    const hours = Math.floor(minutes / SECONDS_PER_MINUTE);\n    const days = Math.floor(hours / HOURS_PER_DAY);\n\n    if (days > ZERO) return `${days}d ${hours % HOURS_PER_DAY}h`;\n    if (hours > ZERO) return `${hours}h ${minutes % SECONDS_PER_MINUTE}m`;\n    if (minutes > ZERO) return `${minutes}m ${seconds % SECONDS_PER_MINUTE}s`;\n    return `${seconds}s`;\n  },\n\n  /**\n   * è§£ææ—¶é—´å­—ç¬¦ä¸²\n   * Parse time string\n   */\n  parseTimeString(timeStr: string): number {\n    const units: Record<string, number> = {\n      ms: ONE,\n      s: ANIMATION_DURATION_VERY_SLOW,\n      m: SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n      h: SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n      d: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n    };\n\n    const match = timeStr.match(/^(\\d+)(ms|s|m|h|d)$/);\n    if (!match) throw new Error(`Invalid time format: ${timeStr}`);\n\n    const [, value, unit] = match;\n    if (!value || !unit) throw new Error(`Invalid time format: ${timeStr}`);\n    return parseInt(value, COUNT_TEN) * (units[unit as keyof typeof units] || ONE);\n  },\n} as const;\n\n/**\n * ç¼“å­˜å¤§å°å·¥å…·å‡½æ•°\n * Cache size utility functions\n */\nexport const CacheSizeUtils = {\n  /**\n   * ä¼°ç®—å¯¹è±¡å¤§å°\n   * Estimate object size\n   */\n  estimateSize(obj: unknown): number {\n    try {\n      return new Blob([JSON.stringify(obj)]).size;\n    } catch {\n      return ZERO;\n    }\n  },\n\n  /**\n   * æ ¼å¼åŒ–å­—èŠ‚å¤§å°\n   * Format byte size\n   */\n  formatBytes(bytes: number): string {\n    const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n    let size = bytes;\n    let unitIndex = ZERO;\n\n    while (size >= BYTES_PER_KB && unitIndex < units.length - ONE) {\n      size /= BYTES_PER_KB;\n      unitIndex += ONE;\n    }\n\n    return `${size.toFixed(COUNT_PAIR)} ${units[unitIndex]}`;\n  },\n\n  /**\n   * è§£æå¤§å°å­—ç¬¦ä¸²\n   * Parse size string\n   */\n  parseSize(sizeStr: string): number {\n    const units: Record<string, number> = {\n      B: ONE,\n      KB: BYTES_PER_KB,\n      MB: BYTES_PER_KB * BYTES_PER_KB,\n      GB: BYTES_PER_KB * BYTES_PER_KB * BYTES_PER_KB,\n      TB: BYTES_PER_KB * BYTES_PER_KB * BYTES_PER_KB * BYTES_PER_KB,\n    };\n\n    const match = sizeStr.match(/^(\\d+(?:\\.\\d+)?)\\s*(B|KB|MB|GB|TB)$/i);\n    if (!match) throw new Error(`Invalid size format: ${sizeStr}`);\n\n    const [, value, unit] = match;\n    if (!value || !unit) throw new Error(`Invalid size format: ${sizeStr}`);\n    return (\n      parseFloat(value) * (units[unit.toUpperCase() as keyof typeof units] || ONE)\n    );\n  },\n} as const;\n\n/**\n * ç¼“å­˜ç»Ÿè®¡å·¥å…·å‡½æ•°\n * Cache statistics utility functions\n */\nexport const CacheStatsUtils = {\n  /**\n   * è®¡ç®—å‘½ä¸­ç‡\n   * Calculate hit rate\n   */\n  calculateHitRate(hits: number, misses: number): number {\n    const total = hits + misses;\n    return total > ZERO ? hits / total : ZERO;\n  },\n\n  /**\n   * è®¡ç®—å¹³å‡å¹´é¾„\n   * Calculate average age\n   */\n  calculateAverageAge(items: Array<{ timestamp: number }>): number {\n    if (items.length === ZERO) return ZERO;\n    const now = Date.now();\n    const totalAge = items.reduce(\n      (sum, item) => sum + (now - item.timestamp),\n      ZERO,\n    );\n    return totalAge / items.length;\n  },\n\n  /**\n   * ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š\n   * Generate statistics report\n   */\n  generateReport(stats: CacheStats): string {\n    return `Cache Statistics:\n- Size: ${stats.size} items\n- Total Hits: ${stats.totalHits}\n- Average Age: ${CacheTimeUtils.formatDuration(stats.averageAge)}`;\n  },\n\n  /**\n   * æ¯”è¾ƒç»Ÿè®¡æ•°æ®\n   * Compare statistics\n   */\n  compareStats(\n    before: CacheStats,\n    after: CacheStats,\n  ): {\n    sizeDiff: number;\n    hitsDiff: number;\n    ageDiff: number;\n  } {\n    return {\n      sizeDiff: after.size - before.size,\n      hitsDiff: after.totalHits - before.totalHits,\n      ageDiff: after.averageAge - before.averageAge,\n    };\n  },\n} as const;\n\n/**\n * ç¼“å­˜éªŒè¯å·¥å…·å‡½æ•°\n * Cache validation utility functions\n */\nexport const CacheValidationUtils = {\n  /**\n   * éªŒè¯ç¼“å­˜é¡¹\n   * Validate cache item\n   */\n  validateItem<T>(item: unknown): item is CacheItem<T> {\n    return (\n      typeof item === 'object' &&\n      item !== null &&\n      'data' in item &&\n      'timestamp' in item &&\n      'ttl' in item &&\n      'hits' in item &&\n      typeof (item as CacheItem<T>).timestamp === 'number' &&\n      typeof (item as CacheItem<T>).ttl === 'number' &&\n      typeof (item as CacheItem<T>).hits === 'number'\n    );\n  },\n\n  /**\n   * éªŒè¯ç¼“å­˜é…ç½®\n   * Validate cache configuration\n   */\n  validateConfig(config: Partial<CacheConfig>): CacheConfigValidation {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    if (config.maxSize !== undefined) {\n      if (typeof config.maxSize !== 'number' || config.maxSize < ONE) {\n        errors.push('maxSize must be a positive number');\n      } else if (config.maxSize > COUNT_100000) {\n        warnings.push('maxSize is very large, consider reducing it');\n      }\n    }\n\n    if (config.ttl !== undefined) {\n      if (typeof config.ttl !== 'number' || config.ttl < ZERO) {\n        errors.push('ttl must be a non-negative number');\n      } else if (config.ttl > HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW) {\n        warnings.push('ttl is very long (>24h), consider reducing it');\n      }\n    }\n\n    if (config.storageKey !== undefined) {\n      if (\n        typeof config.storageKey !== 'string' ||\n        config.storageKey.length === ZERO\n      ) {\n        errors.push('storageKey must be a non-empty string');\n      }\n    }\n\n    if (config.enablePersistence !== undefined) {\n      if (typeof config.enablePersistence !== 'boolean') {\n        errors.push('enablePersistence must be a boolean');\n      }\n    }\n\n    return {\n      isValid: errors.length === ZERO,\n      errors,\n      warnings,\n    };\n  },\n\n  /**\n   * éªŒè¯é«˜çº§é…ç½®\n   * Validate advanced configuration\n   */\n  validateAdvancedConfig(\n    config: Partial<AdvancedCacheConfig>,\n  ): CacheConfigValidation {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    // éªŒè¯åŸºç¡€é…ç½®\n    const baseValidation = this.validateConfig(config);\n    errors.push(...baseValidation.errors);\n    warnings.push(...baseValidation.warnings);\n\n    // éªŒè¯å‹ç¼©é…ç½®\n    if (config.compression) {\n      if (\n        config.compression.enableCompression &&\n        config.compression.threshold < ZERO\n      ) {\n        errors.push('compression threshold must be non-negative');\n      }\n      if (\n        config.compression.level !== undefined &&\n        (config.compression.level < ONE || config.compression.level > MAGIC_9)\n      ) {\n        errors.push('compression level must be between 1 and 9');\n      }\n    }\n\n    // éªŒè¯æ€§èƒ½é…ç½®\n    if (config.performance) {\n      if (\n        config.performance.maxConcurrentLoads !== undefined &&\n        config.performance.maxConcurrentLoads < ONE\n      ) {\n        errors.push('maxConcurrentLoads must be at least 1');\n      }\n      if (\n        config.performance.loadTimeout !== undefined &&\n        config.performance.loadTimeout < ANIMATION_DURATION_VERY_SLOW\n      ) {\n        warnings.push(\n          'loadTimeout is very short (<1s), consider increasing it',\n        );\n      }\n    }\n\n    return {\n      isValid: errors.length === ZERO,\n      errors,\n      warnings,\n    };\n  },\n} as const;\n\n/**\n * ç¼“å­˜åºåˆ—åŒ–å·¥å…·å‡½æ•°\n * Cache serialization utility functions\n */\nexport const CacheSerializationUtils = {\n  /**\n   * åºåˆ—åŒ–æ•°æ®\n   * Serialize data\n   */\n  serialize(data: unknown): string {\n    try {\n      return JSON.stringify(data);\n    } catch (error) {\n      throw new Error(\n        `Serialization failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      );\n    }\n  },\n\n  /**\n   * ååºåˆ—åŒ–æ•°æ®\n   * Deserialize data\n   */\n  deserialize<T>(data: string): T {\n    try {\n      return JSON.parse(data) as T;\n    } catch (error) {\n      throw new Error(\n        `Deserialization failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      );\n    }\n  },\n\n  /**\n   * å®‰å…¨åºåˆ—åŒ–\n   * Safe serialize\n   */\n  safeSerialize(data: unknown, fallback = '{}'): string {\n    try {\n      return JSON.stringify(data);\n    } catch {\n      return fallback;\n    }\n  },\n\n  /**\n   * å®‰å…¨ååºåˆ—åŒ–\n   * Safe deserialize\n   */\n  safeDeserialize<T>(data: string, fallback: T): T {\n    try {\n      return JSON.parse(data) as T;\n    } catch {\n      return fallback;\n    }\n  },\n} as const;\n\n/**\n * ç¼“å­˜äº‹ä»¶å·¥å…·å‡½æ•°\n * Cache event utility functions\n */\nexport const CacheEventUtils = {\n  /**\n   * åˆ›å»ºç¼“å­˜äº‹ä»¶\n   * Create cache event\n   */\n  createEvent<T>(type: string, data?: T, key?: string): CacheEvent<T> {\n    return {\n      type: type as CacheEventType,\n      timestamp: Date.now(),\n      ...(key && { key }),\n      ...(data && { data }),\n    };\n  },\n\n  /**\n   * è¿‡æ»¤äº‹ä»¶\n   * Filter events\n   */\n  filterEvents<T>(\n    events: CacheEvent<T>[],\n    type?: string,\n    timeRange?: { start: number; end: number },\n  ): CacheEvent<T>[] {\n    return events.filter((event) => {\n      if (type && event.type !== type) return false;\n      if (\n        timeRange &&\n        (event.timestamp < timeRange.start || event.timestamp > timeRange.end)\n      )\n        return false;\n      return true;\n    });\n  },\n\n  /**\n   * èšåˆäº‹ä»¶ç»Ÿè®¡\n   * Aggregate event statistics\n   */\n  aggregateEvents<T>(events: CacheEvent<T>[]): Record<string, number> {\n    const stats: Record<string, number> = {};\n    events.forEach((event) => {\n      stats[event.type] = (stats[event.type] || ZERO) + ONE;\n    });\n    return stats;\n  },\n} as const;\n\n/**\n * ç¼“å­˜è°ƒè¯•å·¥å…·å‡½æ•°\n * Cache debug utility functions\n */\nexport const CacheDebugUtils = {\n  /**\n   * ç”Ÿæˆè°ƒè¯•ä¿¡æ¯\n   * Generate debug information\n   */\n  generateDebugInfo(cache: unknown): Record<string, unknown> {\n    return {\n      timestamp: Date.now(),\n      environment: process.env.NODE_ENV,\n      memoryUsage: process.memoryUsage?.(),\n      cacheInfo: cache,\n    };\n  },\n\n  /**\n   * æ ¼å¼åŒ–è°ƒè¯•è¾“å‡º\n   * Format debug output\n   */\n  formatDebugOutput(info: Record<string, unknown>): string {\n    return JSON.stringify(info, null, COUNT_PAIR);\n  },\n\n  /**\n   * åˆ›å»ºæ€§èƒ½æ ‡è®°\n   * Create performance mark\n   */\n  mark(name: string): void {\n    if (typeof performance !== 'undefined' && performance.mark) {\n      performance.mark(name);\n    }\n  },\n\n  /**\n   * æµ‹é‡æ€§èƒ½\n   * Measure performance\n   */\n  measure(name: string, startMark: string, endMark?: string): number {\n    if (typeof performance !== 'undefined' && performance.measure) {\n      performance.measure(name, startMark, endMark);\n      const entries = performance.getEntriesByName(name);\n      return entries.length > ZERO\n        ? (entries[entries.length - ONE]?.duration ?? ZERO)\n        : ZERO;\n    }\n    return ZERO;\n  },\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache-types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'I18nMetrics' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Locale' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Messages' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheDebugUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheEventUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheKeyUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheSerializationUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheSizeUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheStatsUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheTimeUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CacheValidationUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":23}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å‘åå…¼å®¹çš„é‡æ–°å¯¼å‡º\nimport type { I18nMetrics, Locale, Messages } from '@/types/i18n';\nimport type {\n  AdvancedCacheConfig,\n  CacheClusterConfig,\n  CacheShardingConfig,\n} from '@/lib/i18n-cache-types-advanced';\nimport type {\n  CacheConfig,\n  CacheEvent,\n  CacheEventListener,\n  CacheEventType,\n  CacheItem,\n  CacheStats,\n  CacheStrategy,\n} from '@/lib/i18n-cache-types-base';\nimport type {\n  CacheManager,\n  CacheStorage,\n  MetricsCollector,\n  PersistentStorage,\n  Preloader,\n} from '@/lib/i18n-cache-types-interfaces';\nimport {\n  CacheDebugUtils,\n  CacheEventUtils,\n  CacheKeyUtils,\n  CacheSerializationUtils,\n  CacheSizeUtils,\n  CacheStatsUtils,\n  CacheTimeUtils,\n  CacheValidationUtils,\n} from '@/lib/i18n-cache-types-utils';\n\n/**\n * å›½é™…åŒ–ç¼“å­˜åŸºç¡€ç±»å‹å®šä¹‰ - ä¸»å…¥å£\n * I18n Cache Base Type Definitions - Main Entry Point\n *\n * ç»Ÿä¸€çš„å›½é™…åŒ–ç¼“å­˜ç±»å‹å…¥å£ï¼Œæ•´åˆæ‰€æœ‰ç±»å‹å®šä¹‰æ¨¡å—\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½ - ç±»å‹å¯¼å‡º\nexport type {\n  CacheConfig,\n  CacheItem,\n  CacheStats,\n  PreloadConfig,\n  CacheOperationResult,\n  CacheEventType,\n  CacheEvent,\n  CacheEventListener,\n  CacheStrategy,\n  CacheConfigValidation,\n  CacheHealthCheck,\n  CacheDebugInfo,\n  CacheError,\n  CacheValidationError,\n  CacheStorageError,\n  CacheSerializationError,\n} from '@/lib/i18n-cache-types-base';\n\n// å¸¸é‡å’Œå‡½æ•°å¯¼å‡º\nexport {\n  DEFAULT_CACHE_CONFIG,\n  DEFAULT_PRELOAD_CONFIG,\n  CACHE_CONSTANTS,\n  isCacheItem,\n  isCacheConfig,\n  isCacheEvent,\n  createCacheKey,\n  parseCacheKey,\n  validateCacheConfig,\n} from '@/lib/i18n-cache-types-base';\n\nexport type {\n  CacheStorage,\n  PersistentStorage,\n  MetricsCollector,\n  Preloader,\n  CacheManager,\n  SerializationOptions,\n  CacheExportData,\n  CacheSyncOptions,\n  CachePartitionConfig,\n  CacheCompressionConfig,\n  CacheEncryptionConfig,\n  CacheMonitoringConfig,\n  CacheBackupConfig,\n  CacheRecoveryOptions,\n  CachePerformanceConfig,\n  CacheSecurityConfig,\n  CacheObserver,\n  CacheMiddleware,\n  CacheStrategyInterface,\n  CacheAdapter,\n  CacheFactory,\n  CacheEventEmitter,\n  CachePlugin,\n  CacheLifecycleHooks,\n  CacheStatsCollector,\n} from '@/lib/i18n-cache-types-interfaces';\n\nexport type {\n  AdvancedCacheConfig,\n  CacheClusterConfig,\n  CacheShardingConfig,\n  CacheWarmingConfig,\n  CacheInvalidationConfig,\n  CacheConsistencyConfig,\n  CacheRateLimitConfig,\n  CacheQualityConfig,\n  CacheExtensionConfig,\n  CacheEnvironmentConfig,\n} from '@/lib/i18n-cache-types-advanced';\n\nexport {\n  DEFAULT_ADVANCED_CACHE_CONFIG,\n  CacheConfigFactory,\n} from '@/lib/i18n-cache-types-advanced';\n\nexport {\n  CacheKeyUtils,\n  CacheTimeUtils,\n  CacheSizeUtils,\n  CacheStatsUtils,\n  CacheValidationUtils,\n  CacheSerializationUtils,\n  CacheEventUtils,\n  CacheDebugUtils,\n} from '@/lib/i18n-cache-types-utils';\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type {\n  // åŸºç¡€ç±»å‹\n  CacheConfig as Config,\n  CacheItem as Item,\n  CacheStats as Stats,\n  CacheEvent as Event,\n  CacheManager as Manager,\n\n  // é«˜çº§é…ç½®\n  AdvancedCacheConfig as AdvancedConfig,\n  CacheClusterConfig as ClusterConfig,\n  CacheShardingConfig as ShardingConfig,\n\n  // æ¥å£\n  CacheStorage as Storage,\n  PersistentStorage as PersistentStore,\n  MetricsCollector as Metrics,\n  Preloader as PreloadManager,\n\n  // å·¥å…·ç±»å‹\n  CacheEventType as EventType,\n  CacheStrategy as Strategy,\n  CacheEventListener as EventListener,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-cache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-event-collector.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-lru-cache.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":354,"column":41,"nodeType":"MemberExpression","endLine":354,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":355,"column":9,"nodeType":"MemberExpression","endLine":355,"endColumn":20},{"ruleId":"no-void","severity":2,"message":"Expected 'undefined' and instead saw 'void'.","line":364,"column":5,"nodeType":"UnaryExpression","messageId":"noVoid","endLine":364,"endColumn":14},{"ruleId":"no-void","severity":2,"message":"Expected 'undefined' and instead saw 'void'.","line":365,"column":5,"nodeType":"UnaryExpression","messageId":"noVoid","endLine":365,"endColumn":13},{"ruleId":"no-void","severity":2,"message":"Expected 'undefined' and instead saw 'void'.","line":366,"column":5,"nodeType":"UnaryExpression","messageId":"noVoid","endLine":366,"endColumn":14}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LRU (Least Recently Used) ç¼“å­˜å®ç°\n *\n * æä¾›é«˜æ€§èƒ½çš„ LRU ç¼“å­˜ï¼Œæ”¯æŒ TTLã€æŒä¹…åŒ–å­˜å‚¨å’Œæ€§èƒ½ç›‘æ§\n */\n\nimport { COUNT_4, MAGIC_32, MAGIC_8 } from \"@/constants/count\";\nimport { COUNT_PAIR, ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport type {\n  CacheConfig,\n  CacheItem,\n  CacheStats,\n  CacheStorage,\n  MetricsCollector\n} from '@/lib/i18n-cache-types';\n\n// LRU ç¼“å­˜å®ç°\nexport class LRUCache<T> implements CacheStorage<T> {\n  private cache = new Map<string, CacheItem<T>>();\n  private config: CacheConfig;\n  private metricsCollector: MetricsCollector;\n\n  constructor(config: CacheConfig, metricsCollector: MetricsCollector) {\n    this.config = config;\n    this.metricsCollector = metricsCollector;\n\n    if (config.enablePersistence && typeof window !== 'undefined') {\n      this.loadFromStorage();\n    }\n  }\n\n  // è·å–ç¼“å­˜é¡¹\n  get(key: string): T | null {\n    const item = this.cache.get(key);\n\n    if (!item) {\n      this.metricsCollector.recordCacheMiss();\n      this.emitEvent('miss', key);\n      return null;\n    }\n\n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (Date.now() - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      this.metricsCollector.recordCacheMiss();\n      this.emitEvent('expire', key, item.data);\n      return null;\n    }\n\n    // æ›´æ–°è®¿é—®é¡ºåº (LRU)\n    this.cache.delete(key);\n    item.hits += ONE;\n    this.cache.set(key, item);\n\n    this.metricsCollector.recordCacheHit();\n    this.emitEvent('hit', key, item.data);\n    return item.data;\n  }\n\n  // è®¾ç½®ç¼“å­˜é¡¹\n  set(key: string, value: T, customTtl?: number): void {\n    const ttl = customTtl || this.config.ttl;\n\n    // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ é™¤æœ€æ—§çš„é¡¹\n    if (this.cache.size >= this.config.maxSize) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        const removedItem = this.cache.get(firstKey);\n        this.cache.delete(firstKey);\n        this.emitEvent('delete', firstKey, removedItem?.data);\n      }\n    }\n\n    const item: CacheItem<T> = {\n      data: value,\n      timestamp: Date.now(),\n      ttl,\n      hits: ZERO,\n    };\n\n    this.cache.set(key, item);\n    this.emitEvent('set', key, value);\n\n    if (this.config.enablePersistence) {\n      this.saveToStorage();\n    }\n  }\n\n  // æ£€æŸ¥æ˜¯å¦å­˜åœ¨\n  has(key: string): boolean {\n    return this.get(key) !== null;\n  }\n\n  // åˆ é™¤ç¼“å­˜é¡¹\n  delete(key: string): boolean {\n    const item = this.cache.get(key);\n    const deleted = this.cache.delete(key);\n\n    if (deleted) {\n      this.emitEvent('delete', key, item?.data);\n      if (this.config.enablePersistence) {\n        this.saveToStorage();\n      }\n    }\n\n    return deleted;\n  }\n\n  // æ¸…ç©ºç¼“å­˜\n  clear(): void {\n    this.cache.clear();\n    this.emitEvent('clear');\n\n    if (this.config.enablePersistence && typeof window !== 'undefined') {\n      localStorage.removeItem(this.config.storageKey);\n    }\n  }\n\n  // è·å–ç¼“å­˜å¤§å°\n  size(): number {\n    return this.cache.size;\n  }\n\n  // è·å–æ‰€æœ‰é”®\n  keys(): IterableIterator<string> {\n    return this.cache.keys();\n  }\n\n  // è·å–æ‰€æœ‰å€¼\n  values(): IterableIterator<T> {\n    return Array.from(this.cache.values())\n      .map((item) => item.data)\n      [Symbol.iterator]();\n  }\n\n  // è·å–æ‰€æœ‰æ¡ç›®\n  entries(): IterableIterator<[string, T]> {\n    const entries = Array.from(this.cache.entries()).map(\n      ([key, item]) => [key, item.data] as [string, T],\n    );\n    return entries[Symbol.iterator]();\n  }\n\n  // è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n  getStats(): CacheStats {\n    const items = Array.from(this.cache.values());\n    return {\n      size: this.cache.size,\n      totalHits: items.reduce((sum, item) => sum + item.hits, ZERO),\n      averageAge:\n        items.length > ZERO\n          ? items.reduce(\n              (sum, item) => sum + (Date.now() - item.timestamp),\n              0,\n            ) / items.length\n          : ZERO,\n    };\n  }\n\n  // è·å–è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯\n  getDetailedStats() {\n    const items = Array.from(this.cache.values());\n    const now = Date.now();\n\n    const ages = items.map((item) => now - item.timestamp);\n    const hits = items.map((item) => item.hits);\n    const ttls = items.map((item) => item.ttl);\n\n    return {\n      ...this.getStats(),\n      memoryUsage: this.estimateMemoryUsage(),\n      ageDistribution: {\n        min: Math.min(...ages),\n        max: Math.max(...ages),\n        median: this.calculateMedian(ages),\n        average:\n          ages.length > ZERO ? ages.reduce((a, b) => a + b, ZERO) / ages.length : ZERO,\n      },\n      hitDistribution: {\n        min: Math.min(...hits),\n        max: Math.max(...hits),\n        median: this.calculateMedian(hits),\n        average:\n          hits.length > ZERO ? hits.reduce((a, b) => a + b, ZERO) / hits.length : ZERO,\n      },\n      ttlDistribution: {\n        min: Math.min(...ttls),\n        max: Math.max(...ttls),\n        median: this.calculateMedian(ttls),\n        average:\n          ttls.length > ZERO ? ttls.reduce((a, b) => a + b, ZERO) / ttls.length : ZERO,\n      },\n      expiredItems: items.filter((item) => now - item.timestamp > item.ttl)\n        .length,\n      utilizationRate: (this.cache.size / this.config.maxSize) * PERCENTAGE_FULL,\n    };\n  }\n\n  // æ¸…ç†è¿‡æœŸé¡¹\n  cleanup(): number {\n    const now = Date.now();\n    let cleanedCount = ZERO;\n\n    for (const [key, item] of this.cache.entries()) {\n      if (now - item.timestamp > item.ttl) {\n        this.cache.delete(key);\n        this.emitEvent('expire', key, item.data);\n        cleanedCount += ONE;\n      }\n    }\n\n    if (cleanedCount > ZERO && this.config.enablePersistence) {\n      this.saveToStorage();\n    }\n\n    return cleanedCount;\n  }\n\n  // é¢„çƒ­ç¼“å­˜\n  warmup(entries: Array<{ key: string; value: T; ttl?: number }>): void {\n    entries.forEach(({ key, value, ttl }) => {\n      this.set(key, value, ttl);\n    });\n  }\n\n  // æ‰¹é‡è·å–\n  getMultiple(keys: string[]): Map<string, T | null> {\n    const result = new Map<string, T | null>();\n    keys.forEach((key) => {\n      result.set(key, this.get(key));\n    });\n    return result;\n  }\n\n  // æ‰¹é‡è®¾ç½®\n  setMultiple(entries: Array<{ key: string; value: T; ttl?: number }>): void {\n    entries.forEach(({ key, value, ttl }) => {\n      this.set(key, value, ttl);\n    });\n  }\n\n  // æ‰¹é‡åˆ é™¤\n  deleteMultiple(keys: string[]): number {\n    let deletedCount = ZERO;\n    keys.forEach((key) => {\n      if (this.delete(key)) {\n        deletedCount += ONE;\n      }\n    });\n    return deletedCount;\n  }\n\n  // ä»å­˜å‚¨åŠ è½½\n  private loadFromStorage(): void {\n    try {\n      const stored = localStorage.getItem(this.config.storageKey);\n      if (stored) {\n        const data = JSON.parse(stored);\n        if (data && typeof data === 'object') {\n          Object.entries(data).forEach(([key, item]) => {\n            if (this.isValidCacheItem(item)) {\n              this.cache.set(key, item as CacheItem<T>);\n            }\n          });\n        }\n      }\n    } catch (error) {\n      // Use centralized logger to avoid console noise in production\n      logger.warn('Failed to load cache from storage:', error as unknown);\n    }\n  }\n\n  // ä¿å­˜åˆ°å­˜å‚¨\n  private saveToStorage(): void {\n    if (typeof window === 'undefined') return;\n\n    try {\n      const data = Object.fromEntries(this.cache.entries());\n      localStorage.setItem(this.config.storageKey, JSON.stringify(data));\n    } catch (error) {\n      logger.warn('Failed to save cache to storage:', error as unknown);\n    }\n  }\n\n  // éªŒè¯ç¼“å­˜é¡¹\n  private isValidCacheItem(item: unknown): boolean {\n    return (\n      typeof item === 'object' &&\n      item !== null &&\n      'data' in item &&\n      'timestamp' in item &&\n      'ttl' in item &&\n      'hits' in item\n    );\n  }\n\n  // ä¼°ç®—å†…å­˜ä½¿ç”¨é‡\n  private estimateMemoryUsage(): number {\n    let totalSize = ZERO;\n\n    for (const [key, item] of this.cache.entries()) {\n      // ä¼°ç®—é”®çš„å¤§å°\n      totalSize += key.length * COUNT_PAIR; // UTF-16 å­—ç¬¦\n\n      // ä¼°ç®—å€¼çš„å¤§å°\n      totalSize += this.estimateObjectSize(item.data);\n\n      // ä¼°ç®—ç¼“å­˜é¡¹å…ƒæ•°æ®çš„å¤§å°\n      totalSize += MAGIC_32; // timestamp, ttl, hits ç­‰\n    }\n\n    return totalSize;\n  }\n\n  // ä¼°ç®—å¯¹è±¡å¤§å°\n  private estimateObjectSize(obj: unknown): number {\n    if (obj === null || obj === undefined) return ZERO;\n\n    if (typeof obj === 'string') {\n      return obj.length * COUNT_PAIR; // UTF-16\n    }\n\n    if (typeof obj === 'number') {\n      return MAGIC_8; // 64-bit number\n    }\n\n    if (typeof obj === 'boolean') {\n      return COUNT_4;\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.reduce((sum, item) => sum + this.estimateObjectSize(item), ZERO);\n    }\n\n    if (typeof obj === 'object') {\n      return Object.entries(obj).reduce((sum, [key, value]) => {\n        return sum + key.length * COUNT_PAIR + this.estimateObjectSize(value);\n      }, ZERO);\n    }\n\n    return ZERO;\n  }\n\n  // è®¡ç®—ä¸­ä½æ•°\n  private calculateMedian(numbers: number[]): number {\n    if (numbers.length === ZERO) return ZERO;\n\n    const sorted = [...numbers].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n\n    return sorted.length % COUNT_PAIR === ZERO\n      ? ((sorted[mid - ONE] || ZERO) + (sorted[mid] || ZERO)) / COUNT_PAIR\n      : sorted[mid] || ZERO;\n  }\n\n  // å‘å‡ºäº‹ä»¶\n  private emitEvent(type: string, key?: string, data?: T): void {\n    // è¿™é‡Œå¯ä»¥æ·»åŠ äº‹ä»¶å‘å°„é€»è¾‘\n    // ç”±äº MetricsCollector å·²ç»å¤„ç†äº†åŸºæœ¬äº‹ä»¶ï¼Œè¿™é‡Œä¸»è¦ç”¨äºæ‰©å±•\n    // TODO: å®ç°äº‹ä»¶å‘å°„é€»è¾‘\n    // å½“å‰æš‚æ—¶ä¸åˆ›å»ºäº‹ä»¶å¯¹è±¡ï¼Œé¿å…æœªä½¿ç”¨å˜é‡è­¦å‘Š\n    void type;\n    void key;\n    void data; // é¿å…å‚æ•°æœªä½¿ç”¨è­¦å‘Š\n  }\n}\n\n// åˆ›å»º LRU ç¼“å­˜å®ä¾‹çš„å·¥å‚å‡½æ•°\nexport function createLRUCache<T>(\n  config: CacheConfig,\n  metricsCollector: MetricsCollector,\n): LRUCache<T> {\n  return new LRUCache<T>(config, metricsCollector);\n}\n\n// å¯¼å‡ºç±»å‹åˆ«å\nexport type { LRUCache as Cache };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-metrics-collector.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":106,"column":5,"nodeType":"MemberExpression","endLine":106,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":106,"column":38,"nodeType":"MemberExpression","endLine":106,"endColumn":67},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":114,"column":21,"nodeType":"MemberExpression","endLine":114,"endColumn":50},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":233,"column":15,"nodeType":"MemberExpression","endLine":233,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å›½é™…åŒ–æ€§èƒ½æŒ‡æ ‡æ”¶é›†å™¨\n *\n * è´Ÿè´£æ”¶é›†å’Œç®¡ç† i18n ç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ç¼“å­˜å‘½ä¸­ç‡ã€åŠ è½½æ—¶é—´ã€é”™è¯¯ç‡ç­‰\n */\n\nimport { COUNT_35, MAGIC_20, MAGIC_40, MAGIC_70, MAGIC_80, MAGIC_95 } from \"@/constants/count\";\nimport { ANGLE_90_DEG, COUNT_PAIR, COUNT_TEN, DAYS_PER_MONTH, HTTP_OK, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, PERCENTAGE_QUARTER, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { MAGIC_0_1, MAGIC_0_5, MAGIC_0_9, MAGIC_0_95, MAGIC_0_99 } from \"@/constants/decimal\";\nimport { MINUTE_MS } from \"@/constants/time\";\nimport { logger } from '@/lib/logger';\nimport type { I18nMetrics, Locale } from '@/types/i18n';\nimport type {\n  CacheEvent,\n  CacheEventListener,\n  MetricsCollector,\n} from '@/lib/i18n-cache-types';\n\n// æ€§èƒ½æŒ‡æ ‡æ”¶é›†å™¨å®ç°\nexport class I18nMetricsCollector implements MetricsCollector {\n  private metrics: I18nMetrics = {\n    loadTime: ZERO,\n    cacheHitRate: ZERO,\n    errorRate: ZERO,\n    translationCoverage: ZERO,\n    localeUsage: { en: ZERO, zh: ZERO },\n  };\n\n  private totalRequests = ZERO;\n  private cacheHits = ZERO;\n  private errors = ZERO;\n  private loadTimes: number[] = [];\n  private localeUsageCount: Record<string, number> = {};\n  private eventListeners: Map<string, CacheEventListener[]> = new Map();\n  private startTime = Date.now();\n\n  // è®°å½•åŠ è½½æ—¶é—´\n  recordLoadTime(time: number): void {\n    this.loadTimes.push(time);\n\n    // ä¿æŒæœ€è¿‘ 100 æ¬¡è®°å½•ä»¥è®¡ç®—å¹³å‡å€¼\n    if (this.loadTimes.length > PERCENTAGE_FULL) {\n      this.loadTimes = this.loadTimes.slice(-PERCENTAGE_FULL);\n    }\n\n    this.metrics.loadTime =\n      this.loadTimes.reduce((a, b) => a + b, ZERO) / this.loadTimes.length;\n\n    this.emitEvent({\n      type: 'hit',\n      timestamp: Date.now(),\n      metadata: { loadTime: time },\n    });\n  }\n\n  // è®°å½•ç¼“å­˜å‘½ä¸­\n  recordCacheHit(): void {\n    this.cacheHits += ONE;\n    this.totalRequests += ONE;\n    this.updateCacheHitRate();\n\n    this.emitEvent({\n      type: 'hit',\n      timestamp: Date.now(),\n      metadata: {\n        totalHits: this.cacheHits,\n        totalRequests: this.totalRequests,\n        hitRate: this.metrics.cacheHitRate,\n      },\n    });\n  }\n\n  // è®°å½•ç¼“å­˜æœªå‘½ä¸­\n  recordCacheMiss(): void {\n    this.totalRequests += ONE;\n    this.updateCacheHitRate();\n\n    this.emitEvent({\n      type: 'miss',\n      timestamp: Date.now(),\n      metadata: {\n        totalRequests: this.totalRequests,\n        hitRate: this.metrics.cacheHitRate,\n      },\n    });\n  }\n\n  // è®°å½•é”™è¯¯\n  recordError(): void {\n    this.errors += ONE;\n    this.updateErrorRate();\n\n    this.emitEvent({\n      type: 'preload_error',\n      timestamp: Date.now(),\n      metadata: {\n        totalErrors: this.errors,\n        errorRate: this.metrics.errorRate,\n      },\n    });\n  }\n\n  // è®°å½•è¯­è¨€ä½¿ç”¨æƒ…å†µ\n  recordLocaleUsage(locale: Locale): void {\n    this.localeUsageCount[locale] = (this.localeUsageCount[locale] || ZERO) + ONE;\n    this.updateLocaleUsage();\n\n    this.emitEvent({\n      type: 'hit',\n      timestamp: Date.now(),\n      metadata: {\n        locale,\n        usageCount: this.localeUsageCount[locale],\n        totalUsage: this.getTotalLocaleUsage(),\n      },\n    });\n  }\n\n  // è·å–å½“å‰æŒ‡æ ‡\n  getMetrics(): I18nMetrics {\n    return { ...this.metrics };\n  }\n\n  // é‡ç½®æŒ‡æ ‡\n  reset(): void {\n    this.metrics = {\n      loadTime: ZERO,\n      cacheHitRate: ZERO,\n      errorRate: ZERO,\n      translationCoverage: ZERO,\n      localeUsage: { en: ZERO, zh: ZERO },\n    };\n\n    this.totalRequests = ZERO;\n    this.cacheHits = ZERO;\n    this.errors = ZERO;\n    this.loadTimes = [];\n    this.localeUsageCount = {};\n    this.startTime = Date.now();\n\n    this.emitEvent({\n      type: 'clear',\n      timestamp: Date.now(),\n      metadata: { reason: 'metrics_reset' },\n    });\n  }\n\n  // è·å–è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯\n  getDetailedStats() {\n    const uptime = Date.now() - this.startTime;\n    const requestsPerMinute =\n      this.totalRequests > ZERO ? this.totalRequests / (uptime / MINUTE_MS) : ZERO;\n\n    return {\n      uptime,\n      totalRequests: this.totalRequests,\n      cacheHits: this.cacheHits,\n      cacheMisses: this.totalRequests - this.cacheHits,\n      errors: this.errors,\n      requestsPerMinute,\n      averageLoadTime: this.metrics.loadTime,\n      loadTimePercentiles: this.calculateLoadTimePercentiles(),\n      localeDistribution: this.getLocaleDistribution(),\n      performanceGrade: this.calculatePerformanceGrade(),\n    };\n  }\n\n  // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n  addEventListener(eventType: string, listener: CacheEventListener): void {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, []);\n    }\n    this.eventListeners.get(eventType)!.push(listener);\n  }\n\n  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n  removeEventListener(eventType: string, listener: CacheEventListener): void {\n    const listeners = this.eventListeners.get(eventType);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index > -ONE) {\n        listeners.splice(index, ONE);\n      }\n    }\n  }\n\n  // å‘å‡ºäº‹ä»¶\n  private emitEvent(event: CacheEvent): void {\n    const listeners = this.eventListeners.get(event.type);\n    if (listeners) {\n      listeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error('Error in cache event listener:', error);\n        }\n      });\n    }\n\n    // ä¹Ÿå‘é€ç»™é€šç”¨ç›‘å¬å™¨\n    const allListeners = this.eventListeners.get('*');\n    if (allListeners) {\n      allListeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error('Error in cache event listener:', error);\n        }\n      });\n    }\n  }\n\n  // æ›´æ–°ç¼“å­˜å‘½ä¸­ç‡\n  private updateCacheHitRate(): void {\n    this.metrics.cacheHitRate =\n      this.totalRequests > ZERO ? (this.cacheHits / this.totalRequests) * PERCENTAGE_FULL : ZERO;\n  }\n\n  // æ›´æ–°é”™è¯¯ç‡\n  private updateErrorRate(): void {\n    this.metrics.errorRate =\n      this.totalRequests > ZERO ? (this.errors / this.totalRequests) * PERCENTAGE_FULL : ZERO;\n  }\n\n  // æ›´æ–°è¯­è¨€ä½¿ç”¨æƒ…å†µ\n  private updateLocaleUsage(): void {\n    const total = this.getTotalLocaleUsage();\n    if (total > ZERO) {\n      this.metrics.localeUsage = Object.keys(this.localeUsageCount).reduce(\n        (acc, locale) => {\n          acc[locale as Locale] =\n            ((this.localeUsageCount[locale] ?? ZERO) / total) * PERCENTAGE_FULL;\n          return acc;\n        },\n        {} as Record<Locale, number>,\n      );\n    }\n  }\n\n  // è·å–æ€»è¯­è¨€ä½¿ç”¨æ¬¡æ•°\n  private getTotalLocaleUsage(): number {\n    return Object.values(this.localeUsageCount).reduce(\n      (sum, count) => sum + count,\n      ZERO,\n    );\n  }\n\n  // è®¡ç®—åŠ è½½æ—¶é—´ç™¾åˆ†ä½æ•°\n  private calculateLoadTimePercentiles() {\n    if (this.loadTimes.length === ZERO) {\n      return { p50: ZERO, p90: ZERO, p95: ZERO, p99: ZERO };\n    }\n\n    const sorted = [...this.loadTimes].sort((a, b) => a - b);\n    const len = sorted.length;\n\n    return {\n      p50: sorted[Math.floor(len * MAGIC_0_5)],\n      p90: sorted[Math.floor(len * MAGIC_0_9)],\n      p95: sorted[Math.floor(len * MAGIC_0_95)],\n      p99: sorted[Math.floor(len * MAGIC_0_99)],\n    };\n  }\n\n  // è·å–è¯­è¨€åˆ†å¸ƒ\n  private getLocaleDistribution() {\n    const total = this.getTotalLocaleUsage();\n    return Object.entries(this.localeUsageCount).map(([locale, count]) => ({\n      locale,\n      count,\n      percentage: total > ZERO ? (count / total) * PERCENTAGE_FULL : ZERO,\n    }));\n  }\n\n  // è®¡ç®—æ€§èƒ½ç­‰çº§\n  private calculatePerformanceGrade(): 'A' | 'B' | 'C' | 'D' | 'F' {\n    const hitRate = this.metrics.cacheHitRate;\n    const {errorRate} = this.metrics;\n    const avgLoadTime = this.metrics.loadTime;\n\n    // åŸºäºå¤šä¸ªæŒ‡æ ‡è®¡ç®—ç»¼åˆè¯„åˆ†\n    let score = ZERO;\n\n    // ç¼“å­˜å‘½ä¸­ç‡è¯„åˆ† (40%)\n    if (hitRate >= MAGIC_95) score += MAGIC_40;\n    else if (hitRate >= ANGLE_90_DEG) score += COUNT_35;\n    else if (hitRate >= MAGIC_80) score += DAYS_PER_MONTH;\n    else if (hitRate >= MAGIC_70) score += MAGIC_20;\n    else score += COUNT_TEN;\n\n    // é”™è¯¯ç‡è¯„åˆ† (30%)\n    if (errorRate <= MAGIC_0_1) score += DAYS_PER_MONTH;\n    else if (errorRate <= MAGIC_0_5) score += PERCENTAGE_QUARTER;\n    else if (errorRate <= ONE) score += MAGIC_20;\n    else if (errorRate <= COUNT_PAIR) score += COUNT_TEN;\n    else score += ZERO;\n\n    // å¹³å‡åŠ è½½æ—¶é—´è¯„åˆ† (30%)\n    if (avgLoadTime <= COUNT_TEN) score += DAYS_PER_MONTH;\n    else if (avgLoadTime <= PERCENTAGE_HALF) score += PERCENTAGE_QUARTER;\n    else if (avgLoadTime <= PERCENTAGE_FULL) score += MAGIC_20;\n    else if (avgLoadTime <= HTTP_OK) score += COUNT_TEN;\n    else score += ZERO;\n\n    // æ ¹æ®æ€»åˆ†ç¡®å®šç­‰çº§\n    if (score >= ANGLE_90_DEG) return 'A';\n    if (score >= MAGIC_80) return 'B';\n    if (score >= MAGIC_70) return 'C';\n    if (score >= SECONDS_PER_MINUTE) return 'D';\n    return 'F';\n  }\n\n  // ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š\n  generatePerformanceReport() {\n    const stats = this.getDetailedStats();\n    const percentiles = this.calculateLoadTimePercentiles();\n    const grade = this.calculatePerformanceGrade();\n\n    return {\n      summary: {\n        grade,\n        uptime: stats.uptime,\n        totalRequests: stats.totalRequests,\n        averageLoadTime: stats.averageLoadTime,\n        cacheHitRate: this.metrics.cacheHitRate,\n        errorRate: this.metrics.errorRate,\n      },\n      performance: {\n        requestsPerMinute: stats.requestsPerMinute,\n        loadTimePercentiles: percentiles,\n        cacheEfficiency: {\n          hits: stats.cacheHits,\n          misses: stats.cacheMisses,\n          hitRate: this.metrics.cacheHitRate,\n        },\n      },\n      usage: {\n        localeDistribution: stats.localeDistribution,\n        totalErrors: stats.errors,\n      },\n      recommendations: this.generateRecommendations(stats, grade),\n    };\n  }\n\n  // ç”Ÿæˆæ€§èƒ½å»ºè®®\n  private generateRecommendations(\n    stats: Record<string, unknown>,\n    grade: string,\n  ): string[] {\n    const recommendations: string[] = [];\n\n    if (this.metrics.cacheHitRate < MAGIC_80) {\n      recommendations.push('è€ƒè™‘å¢åŠ ç¼“å­˜å¤§å°æˆ–è°ƒæ•´ TTL ä»¥æé«˜ç¼“å­˜å‘½ä¸­ç‡');\n    }\n\n    if (this.metrics.errorRate > ONE) {\n      recommendations.push('é”™è¯¯ç‡è¾ƒé«˜ï¼Œå»ºè®®æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œç¿»è¯‘æ–‡ä»¶å®Œæ•´æ€§');\n    }\n\n    if (this.metrics.loadTime > PERCENTAGE_FULL) {\n      recommendations.push(\n        'å¹³å‡åŠ è½½æ—¶é—´è¾ƒé•¿ï¼Œè€ƒè™‘å¯ç”¨é¢„åŠ è½½æˆ–ä¼˜åŒ–ç¿»è¯‘æ–‡ä»¶å¤§å°',\n      );\n    }\n\n    const requestsPerMinute =\n      typeof stats.requestsPerMinute === 'number' ? stats.requestsPerMinute : ZERO;\n    if (requestsPerMinute > PERCENTAGE_FULL) {\n      recommendations.push('è¯·æ±‚é¢‘ç‡è¾ƒé«˜ï¼Œå»ºè®®å¢åŠ ç¼“å­˜å®¹é‡');\n    }\n\n    if (grade === 'D' || grade === 'F') {\n      recommendations.push('æ•´ä½“æ€§èƒ½éœ€è¦æ”¹è¿›ï¼Œå»ºè®®å…¨é¢ä¼˜åŒ–ç¼“å­˜ç­–ç•¥');\n    }\n\n    return recommendations;\n  }\n}\n\n// åˆ›å»ºé»˜è®¤æŒ‡æ ‡æ”¶é›†å™¨å®ä¾‹\nexport const defaultMetricsCollector = new I18nMetricsCollector();\n\n// å¯¼å‡ºå·¥å…·å‡½æ•°\nexport function createMetricsCollector(): I18nMetricsCollector {\n  return new I18nMetricsCollector();\n}\n\nexport function formatMetrics(metrics: I18nMetrics): string {\n  return `\nç¼“å­˜å‘½ä¸­ç‡: ${metrics.cacheHitRate.toFixed(COUNT_PAIR)}%\nå¹³å‡åŠ è½½æ—¶é—´: ${metrics.loadTime.toFixed(COUNT_PAIR)}ms\né”™è¯¯ç‡: ${metrics.errorRate.toFixed(COUNT_PAIR)}%\nç¿»è¯‘è¦†ç›–ç‡: ${metrics.translationCoverage.toFixed(COUNT_PAIR)}%\nè¯­è¨€ä½¿ç”¨åˆ†å¸ƒ: ${Object.entries(metrics.localeUsage)\n    .map(([locale, usage]) => `${locale}: ${usage.toFixed(ONE)}%`)\n    .join(', ')}\n  `.trim();\n}\n\n// å¯¼å‡ºç±»å‹åˆ«å\nexport type { I18nMetricsCollector as MetricsCollector };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-monitor-core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-monitoring-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-monitoring.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-performance-monitor.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/i18n-monitoring-types' import is duplicated.","line":12,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":16,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ä¼ä¸šçº§å›½é™…åŒ–ç›‘æ§å’Œé”™è¯¯è¿½è¸ª - æ€§èƒ½ç›‘æ§å™¨\n * è´Ÿè´£ç›‘æ§ç¿»è¯‘æ€§èƒ½ã€ç¼“å­˜å‘½ä¸­ç‡å’Œé”™è¯¯ç‡\n */\n\nimport { CACHE_LIMITS } from '@/constants/i18n-constants';\nimport { COUNT_PAIR, ONE, ZERO } from '@/constants';\n\nimport type { EventCollector } from '@/lib/i18n-event-collector';\nimport { ErrorLevel } from '@/lib/i18n-monitoring-types';\nimport type { I18nMetrics, Locale, TranslationError } from '@/types/i18n';\nimport type {\n  MonitoringConfig,\n  MonitoringEventType,\n  PerformanceData,\n} from '@/lib/i18n-monitoring-types';\n\n// æ€§èƒ½ç›‘æ§å™¨\nexport class PerformanceMonitor {\n  private config: MonitoringConfig;\n  private eventCollector: EventCollector;\n  private performanceData: PerformanceData = {\n    loadTimes: [],\n    cacheHits: ZERO,\n    cacheMisses: ZERO,\n    errors: ZERO,\n    totalRequests: ZERO,\n  };\n\n  constructor(config: MonitoringConfig, eventCollector: EventCollector) {\n    this.config = config;\n    this.eventCollector = eventCollector;\n  }\n\n  recordLoadTime(time: number, locale: Locale): void {\n    if (!this.config.enablePerformanceTracking) return;\n\n    this.performanceData.loadTimes.push(time);\n    this.performanceData.totalRequests += ONE;\n\n    // Check if load time exceeds threshold\n    if (time > this.config.performanceThresholds.translationLoadTime) {\n      this.eventCollector.addEvent({\n        type: 'performance_issue' as MonitoringEventType,\n        level: 'warning' as ErrorLevel,\n        locale,\n        message: `Translation load time exceeded threshold: ${time}ms`,\n        metadata: {\n          loadTime: time,\n          threshold: this.config.performanceThresholds.translationLoadTime,\n        },\n      });\n    }\n  }\n\n  recordCacheHit(locale: Locale): void {\n    this.performanceData.cacheHits += ONE;\n    this.performanceData.totalRequests += ONE;\n    this.checkCacheHitRate(locale);\n  }\n\n  recordCacheMiss(locale: Locale): void {\n    this.performanceData.cacheMisses += ONE;\n    this.performanceData.totalRequests += ONE;\n    this.checkCacheHitRate(locale);\n\n    this.eventCollector.addEvent({\n      type: 'cache_miss' as MonitoringEventType,\n      level: 'info' as ErrorLevel,\n      locale,\n      message: 'Translation cache miss',\n      metadata: {\n        cacheHitRate: this.getCacheHitRate(),\n        totalRequests: this.performanceData.totalRequests,\n      },\n    });\n  }\n\n  recordError(error: TranslationError, locale: Locale): void {\n    this.performanceData.errors += ONE;\n    this.performanceData.totalRequests += ONE;\n\n    const level: ErrorLevel =\n      error.code === 'MISSING_KEY' ? ErrorLevel.WARNING : ErrorLevel.ERROR;\n\n    this.eventCollector.addEvent({\n      type: 'translation_error' as MonitoringEventType,\n      level,\n      locale,\n      message: error.message,\n      metadata: {\n        errorCode: error.code,\n        key: error.key || '',\n        params: error.params || {},\n        errorRate: this.getErrorRate(),\n      },\n    });\n  }\n\n  private checkCacheHitRate(locale: Locale): void {\n    const hitRate = this.getCacheHitRate();\n    if (hitRate < this.config.performanceThresholds.cacheHitRate) {\n      this.eventCollector.addEvent({\n        type: 'performance_issue' as MonitoringEventType,\n        level: 'warning' as ErrorLevel,\n        locale,\n        message: `Cache hit rate below threshold: ${hitRate.toFixed(COUNT_PAIR)}%`,\n        metadata: {\n          cacheHitRate: hitRate,\n          threshold: this.config.performanceThresholds.cacheHitRate,\n        },\n      });\n    }\n  }\n\n  private getCacheHitRate(): number {\n    const total =\n      this.performanceData.cacheHits + this.performanceData.cacheMisses;\n    return total > ZERO\n      ? (this.performanceData.cacheHits / total) *\n          CACHE_LIMITS.MAX_CACHE_ENTRIES\n      : ZERO;\n  }\n\n  private getErrorRate(): number {\n    return this.performanceData.totalRequests > ZERO\n      ? (this.performanceData.errors / this.performanceData.totalRequests) *\n          CACHE_LIMITS.MAX_CACHE_ENTRIES\n      : ZERO;\n  }\n\n  getMetrics(): I18nMetrics {\n    const avgLoadTime =\n      this.performanceData.loadTimes.length > ZERO\n        ? this.performanceData.loadTimes.reduce((a, b) => a + b, ZERO) /\n          this.performanceData.loadTimes.length\n        : ZERO;\n\n    return {\n      loadTime: avgLoadTime,\n      cacheHitRate: this.getCacheHitRate(),\n      errorRate: this.getErrorRate(),\n      translationCoverage: ZERO, // To be calculated by quality monitor\n      localeUsage: { en: ZERO, zh: ZERO }, // To be calculated by usage tracker\n    };\n  }\n\n  getPerformanceData(): PerformanceData {\n    return { ...this.performanceData };\n  }\n\n  updateConfig(newConfig: Partial<MonitoringConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  reset(): void {\n    this.performanceData = {\n      loadTimes: [],\n      cacheHits: ZERO,\n      cacheMisses: ZERO,\n      errors: ZERO,\n      totalRequests: ZERO,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-performance.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":116,"column":14,"nodeType":"MemberExpression","endLine":116,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  CACHE_DURATIONS,\n  CACHE_LIMITS,\n  PERFORMANCE_THRESHOLDS,\n} from '@/constants/i18n-constants';\nimport { logger } from '@/lib/logger';\nimport { ANIMATION_DURATION_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, HTTP_OK, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, ZERO } from '@/constants';\n\nimport { cache } from 'react';\n\n/**\n * ç¼“å­˜é¡¹æ¥å£\n */\ninterface CacheItem {\n  value: unknown;\n  timestamp: number;\n}\n\n// ç¿»è¯‘ç¼“å­˜ç®¡ç†å™¨\nexport class TranslationCache {\n  private static instance: TranslationCache;\n  private cache = new Map<string, CacheItem>();\n  private readonly maxSize = CACHE_LIMITS.MAX_PERFORMANCE_DATA_POINTS;\n  private readonly ttl = CACHE_DURATIONS.TRANSLATION_CACHE;\n\n  static getInstance(): TranslationCache {\n    if (!TranslationCache.instance) {\n      TranslationCache.instance = new TranslationCache();\n    }\n    return TranslationCache.instance;\n  }\n\n  // ç¼“å­˜ç¿»è¯‘æ¶ˆæ¯\n  set(key: string, value: unknown): void {\n    if (this.cache.size >= this.maxSize) {\n      // LRUæ¸…ç†\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    this.cache.set(key, {\n      value,\n      timestamp: Date.now(),\n    });\n  }\n\n  // è·å–ç¼“å­˜çš„ç¿»è¯‘æ¶ˆæ¯\n  get(key: string): unknown | null {\n    const cached = this.cache.get(key);\n    if (!cached) return null;\n\n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (Date.now() - cached.timestamp > this.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return cached.value;\n  }\n\n  // æ¸…ç†è¿‡æœŸç¼“å­˜\n  cleanup(): void {\n    const now = Date.now();\n    for (const [key, cached] of this.cache.entries()) {\n      if (now - cached.timestamp > this.ttl) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  // è·å–ç¼“å­˜ç»Ÿè®¡\n  getStats() {\n    return {\n      size: this.cache.size,\n      maxSize: this.maxSize,\n      hitRate: this.calculateHitRate(),\n    };\n  }\n\n  private calculateHitRate(): number {\n    // ç®€åŒ–çš„å‘½ä¸­ç‡è®¡ç®—\n    return this.cache.size > ZERO ? PERFORMANCE_THRESHOLDS.EXCELLENT : ZERO;\n  }\n}\n\n// ç¼“å­˜çš„æ¶ˆæ¯åŠ è½½å™¨\nexport const getCachedMessages = cache(async (locale: string) => {\n  const cacheInstance = TranslationCache.getInstance();\n  const cacheKey = `messages-${locale}`;\n\n  // æ£€æŸ¥ç¼“å­˜\n  const cached = cacheInstance.get(cacheKey);\n  if (cached) {\n    return cached;\n  }\n\n  // åŠ è½½æ¶ˆæ¯\n  try {\n    const messages = (await import(`../../messages/${locale}.json`)).default;\n    cacheInstance.set(cacheKey, messages);\n    return messages;\n  } catch (error) {\n    logger.error(`Failed to load messages for locale ${locale}:`, error);\n    return {};\n  }\n});\n\n// Reactç¼“å­˜çš„ç¿»è¯‘å‡½æ•°\nexport const getCachedTranslations = cache(\n  async (locale: string, namespace?: string) => {\n    const messages = await getCachedMessages(locale);\n\n    if (namespace) {\n      return messages[namespace] || {};\n    }\n\n    return messages;\n  },\n);\n\n// é¢„åŠ è½½ç¿»è¯‘æ¶ˆæ¯\nexport async function preloadTranslations(locales: string[]): Promise<void> {\n  const promises = locales.map((locale) => getCachedMessages(locale));\n  await Promise.all(promises);\n}\n\n// æ€§èƒ½ç›‘æ§\nexport class I18nPerformanceMonitor {\n  private static metrics = {\n    loadTime: [] as number[],\n    cacheHits: ZERO,\n    cacheMisses: ZERO,\n    errors: ZERO,\n  };\n\n  static recordLoadTime(time: number): void {\n    this.metrics.loadTime.push(time);\n    // ä¿æŒæœ€è¿‘è®°å½•æ•°é‡é™åˆ¶\n    if (this.metrics.loadTime.length > CACHE_LIMITS.MAX_CACHE_ENTRIES) {\n      this.metrics.loadTime.shift();\n    }\n  }\n\n  static recordCacheHit(): void {\n    this.metrics.cacheHits += ONE;\n  }\n\n  static recordCacheMiss(): void {\n    this.metrics.cacheMisses += ONE;\n  }\n\n  static recordError(): void {\n    this.metrics.errors += ONE;\n  }\n\n  static getMetrics() {\n    const loadTimes = this.metrics.loadTime;\n    const avgLoadTime =\n      loadTimes.length > ZERO\n        ? loadTimes.reduce((a, b) => a + b, ZERO) / loadTimes.length\n        : ZERO;\n\n    const totalRequests = this.metrics.cacheHits + this.metrics.cacheMisses;\n    const cacheHitRate =\n      totalRequests > ZERO\n        ? ((this.metrics.cacheHits / totalRequests) *\n            PERFORMANCE_THRESHOLDS.MAX_RESPONSE_TIME) /\n          COUNT_TEN\n        : ZERO;\n\n    return {\n      averageLoadTime: avgLoadTime,\n      cacheHitRate,\n      totalErrors: this.metrics.errors,\n      totalRequests,\n    };\n  }\n\n  static reset(): void {\n    this.metrics = {\n      loadTime: [],\n      cacheHits: ZERO,\n      cacheMisses: ZERO,\n      errors: ZERO,\n    };\n  }\n}\n\n// æ€§èƒ½åŸºå‡†ç›®æ ‡\nexport const PERFORMANCE_TARGETS = {\n  TRANSLATION_LOAD_TIME: {\n    excellent: PERCENTAGE_HALF, // < 50ms\n    good: PERCENTAGE_FULL, // < 100ms\n    acceptable: HTTP_OK, // < 200ms\n    poor: ANIMATION_DURATION_SLOW, // > 500ms\n  },\n\n  CACHE_HIT_RATE: {\n    excellent: PERFORMANCE_THRESHOLDS.EXCELLENT + COUNT_TRIPLE, // > 98%\n    good: PERFORMANCE_THRESHOLDS.EXCELLENT, // > 95%\n    acceptable: PERFORMANCE_THRESHOLDS.GOOD + COUNT_TEN, // > 90%\n    poor: PERFORMANCE_THRESHOLDS.GOOD, // < 80%\n  },\n};\n\n// æ€§èƒ½è¯„ä¼°å‡½æ•°\nexport function evaluatePerformance(\n  metrics: ReturnType<typeof I18nPerformanceMonitor.getMetrics>,\n) {\n  const loadTimeScore = getPerformanceScore(\n    metrics.averageLoadTime,\n    PERFORMANCE_TARGETS.TRANSLATION_LOAD_TIME,\n  );\n\n  const cacheScore = getPerformanceScore(\n    metrics.cacheHitRate,\n    PERFORMANCE_TARGETS.CACHE_HIT_RATE,\n    true,\n  );\n\n  const overallScore = (loadTimeScore + cacheScore) / COUNT_PAIR;\n\n  return {\n    loadTimeScore,\n    cacheScore,\n    overallScore,\n    grade: getGrade(overallScore),\n  };\n}\n\nfunction getPerformanceScore(\n  value: number,\n  targets: unknown,\n  higherIsBetter = false,\n): number {\n  // ç±»å‹å®ˆå«ï¼šç¡®ä¿targetsæ˜¯ä¸€ä¸ªåŒ…å«æ€§èƒ½é˜ˆå€¼çš„å¯¹è±¡\n  const safeTargets = targets as {\n    excellent: number;\n    good: number;\n    acceptable: number;\n  } | null;\n  if (!safeTargets || typeof safeTargets !== 'object') {\n    return PERFORMANCE_THRESHOLDS.POOR;\n  }\n\n  if (higherIsBetter) {\n    if (value >= safeTargets.excellent) return CACHE_LIMITS.MAX_CACHE_ENTRIES;\n    if (value >= safeTargets.good) return PERFORMANCE_THRESHOLDS.GOOD;\n    if (value >= safeTargets.acceptable) return PERFORMANCE_THRESHOLDS.FAIR;\n    return PERFORMANCE_THRESHOLDS.POOR;\n  }\n\n  if (value <= safeTargets.excellent) return CACHE_LIMITS.MAX_CACHE_ENTRIES;\n  if (value <= safeTargets.good) return PERFORMANCE_THRESHOLDS.GOOD;\n  if (value <= safeTargets.acceptable) return PERFORMANCE_THRESHOLDS.FAIR;\n  return PERFORMANCE_THRESHOLDS.POOR;\n}\n\nfunction getGrade(score: number): string {\n  if (score >= PERFORMANCE_THRESHOLDS.EXCELLENT - COUNT_FIVE) return 'A';\n  if (score >= PERFORMANCE_THRESHOLDS.GOOD) return 'B';\n  if (score >= PERFORMANCE_THRESHOLDS.GOOD - COUNT_TEN) return 'C';\n  if (score >= PERFORMANCE_THRESHOLDS.FAIR) return 'D';\n  return 'F';\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-core.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/i18n-preloader-types' import is duplicated.","line":27,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":31,"endColumn":37},{"ruleId":"max-statements","severity":2,"message":"Async method 'preloadMultipleLocales' has too many statements (22). Maximum allowed is 20.","line":166,"column":31,"nodeType":"FunctionExpression","messageId":"exceed","endLine":224,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":195,"column":23,"nodeType":"MemberExpression","endLine":195,"endColumn":33},{"ruleId":"require-await","severity":2,"message":"Async method 'processBatch' has no 'await' expression.","line":446,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":446,"endColumn":29,"suggestions":[{"messageId":"removeAsync","fix":{"range":[10875,10881],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":488,"column":12,"nodeType":"MemberExpression","endLine":488,"endColumn":30}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘é¢„åŠ è½½å™¨æ ¸å¿ƒå®ç°\n * Translation Preloader Core Implementation\n *\n * æä¾›ç¿»è¯‘é¢„åŠ è½½çš„æ ¸å¿ƒåŠŸèƒ½å’Œä¸»è¦ç±»å®ç°\n */\n\nimport { MAGIC_0_1 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_TRIPLE, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, TEN_SECONDS_MS, ZERO } from '@/constants';\n\nimport { MINUTE_MS } from \"@/constants/time\";\nimport { logger } from '@/lib/logger';\nimport type { Locale, Messages } from '@/types/i18n';\nimport type {\n  CacheOperationResult,\n  CacheStorage,\n  MetricsCollector,\n  Preloader,\n} from '@/lib/i18n-cache-types';\nimport type {\n  IPreloader,\n  PreloaderConfig,\n  PreloadOptions,\n  PreloadState,\n  PreloadStats,\n} from '@/lib/i18n-preloader-types';\nimport {\n  PreloaderError,\n  PreloaderNetworkError,\n  PreloaderTimeoutError,\n} from '@/lib/i18n-preloader-types';\n\n/**\n * ç¿»è¯‘é¢„åŠ è½½å™¨æ ¸å¿ƒå®ç°\n * Translation preloader core implementation\n */\nexport class TranslationPreloader implements Preloader, IPreloader {\n  private cache: CacheStorage<Messages>;\n  private metricsCollector: MetricsCollector;\n  private preloadState: PreloadState = {\n    isPreloading: false,\n    progress: ZERO,\n    totalLocales: ZERO,\n    completedLocales: ZERO,\n    errors: [],\n  };\n  private preloadConfig: PreloaderConfig;\n  private abortController?: AbortController;\n\n  constructor(\n    cache: CacheStorage<Messages>,\n    metricsCollector: MetricsCollector,\n    config?: Partial<PreloaderConfig>,\n  ) {\n    this.cache = cache;\n    this.metricsCollector = metricsCollector;\n    this.preloadConfig = {\n      enablePreload: true,\n      preloadLocales: ['en', 'zh'],\n      batchSize: COUNT_TRIPLE,\n      delayBetweenBatches: PERCENTAGE_FULL,\n      maxConcurrency: COUNT_FIVE,\n      timeout: TEN_SECONDS_MS,\n      retryCount: COUNT_TRIPLE,\n      retryDelay: ANIMATION_DURATION_VERY_SLOW,\n      smartPreload: {\n        enabled: false,\n        maxLocales: COUNT_TRIPLE,\n        minUsageThreshold: MAGIC_0_1,\n        usageWindow: HOURS_PER_DAY,\n        preloadTrigger: 'idle',\n      },\n      memoryLimit: PERCENTAGE_HALF * BYTES_PER_KB * BYTES_PER_KB,\n      networkThrottling: false,\n      priorityQueue: false,\n      cacheStrategy: 'adaptive',\n      cacheTTL: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n      maxCacheSize: PERCENTAGE_FULL,\n      enableMetrics: true,\n      metricsInterval: MINUTE_MS,\n      enableLogging: false,\n      logLevel: 'info',\n      ...config,\n    };\n  }\n\n  /**\n   * é¢„åŠ è½½æŒ‡å®šè¯­è¨€\n   * Preload specific locale\n   */\n  async preloadLocale(\n    locale: Locale,\n    options?: PreloadOptions,\n  ): Promise<Messages> {\n    const startTime = Date.now();\n\n    try {\n      // é¦–å…ˆæ£€æŸ¥ç¼“å­˜\n      const cached = this.cache.get(locale);\n      if (cached) {\n        this.metricsCollector.recordLoadTime(Date.now() - startTime);\n        options?.onSuccess?.(locale, cached);\n        return cached;\n      }\n\n      // ä»æœåŠ¡å™¨åŠ è½½\n      const messages = await this.loadMessagesFromServer(locale, options);\n\n      // å­˜å‚¨åˆ°ç¼“å­˜\n      this.cache.set(locale, messages);\n      this.metricsCollector.recordLoadTime(Date.now() - startTime);\n\n      options?.onSuccess?.(locale, messages);\n      return messages;\n    } catch (error) {\n      const preloaderError =\n        error instanceof Error\n          ? new PreloaderNetworkError(locale, error)\n          : new PreloaderError(`Failed to preload locale ${locale}`, locale);\n\n      options?.onError?.(preloaderError, locale);\n      throw preloaderError;\n    }\n  }\n\n  /**\n   * é¢„çƒ­ç¼“å­˜\n   * Warmup cache\n   */\n  warmupCache(): void {\n    if (!this.preloadConfig.enablePreload || this.preloadState.isPreloading) {\n      return;\n    }\n\n    this.preloadMultipleLocales(this.preloadConfig.preloadLocales);\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æ­£åœ¨é¢„åŠ è½½\n   * Check if preloading\n   */\n  isPreloading(): boolean {\n    return this.preloadState.isPreloading;\n  }\n\n  /**\n   * è·å–é¢„åŠ è½½è¿›åº¦\n   * Get preload progress\n   */\n  getPreloadProgress(): number {\n    return this.preloadState.progress;\n  }\n\n  /**\n   * è·å–é¢„åŠ è½½çŠ¶æ€\n   * Get preload state\n   */\n  getPreloadState(): PreloadState {\n    return { ...this.preloadState };\n  }\n\n  /**\n   * æ‰¹é‡é¢„åŠ è½½å¤šä¸ªè¯­è¨€\n   * Preload multiple locales in batches\n   */\n  async preloadMultipleLocales(\n    locales: Locale[],\n    options?: PreloadOptions,\n  ): Promise<CacheOperationResult<Messages>[]> {\n    if (this.preloadState.isPreloading) {\n      throw new PreloaderError('Preloading is already in progress');\n    }\n\n    this.preloadState = {\n      isPreloading: true,\n      progress: ZERO,\n      totalLocales: locales.length,\n      completedLocales: ZERO,\n      errors: [],\n      startTime: Date.now(),\n    };\n\n    this.abortController = new AbortController();\n    const results: CacheOperationResult<Messages>[] = [];\n\n    try {\n      // åˆ†æ‰¹å¤„ç†\n      const batches = this.createBatches(locales, this.preloadConfig.batchSize);\n\n      for (let i = ZERO; i < batches.length; i++) {\n        if (this.abortController.signal.aborted) {\n          break;\n        }\n\n        const batch = batches[i];\n        if (!batch) continue;\n        const batchResults = await this.processBatch(batch, options);\n        results.push(...batchResults);\n\n        // æ›´æ–°è¿›åº¦\n        this.preloadState.completedLocales += batch.length;\n        this.preloadState.progress =\n          (this.preloadState.completedLocales /\n            this.preloadState.totalLocales) *\n          PERCENTAGE_FULL;\n\n        options?.onProgress?.(this.preloadState.progress);\n\n        // æ‰¹æ¬¡é—´å»¶è¿Ÿ\n        if (\n          i < batches.length - ONE &&\n          this.preloadConfig.delayBetweenBatches > ZERO\n        ) {\n          await this.delay(this.preloadConfig.delayBetweenBatches);\n        }\n      }\n    } catch (error) {\n      logger.error('Preloading failed:', error);\n    } finally {\n      this.preloadState.isPreloading = false;\n    }\n\n    return results;\n  }\n\n  /**\n   * åœæ­¢é¢„åŠ è½½\n   * Stop preloading\n   */\n  stopPreloading(): void {\n    if (this.abortController) {\n      this.abortController.abort();\n    }\n    this.preloadState.isPreloading = false;\n  }\n\n  /**\n   * æš‚åœé¢„åŠ è½½\n   * Pause preloading\n   */\n  pausePreloading(): void {\n    // å®ç°æš‚åœé€»è¾‘\n    this.stopPreloading();\n  }\n\n  /**\n   * æ¢å¤é¢„åŠ è½½\n   * Resume preloading\n   */\n  resumePreloading(): void {\n    // å®ç°æ¢å¤é€»è¾‘\n    if (!this.preloadState.isPreloading) {\n      this.warmupCache();\n    }\n  }\n\n  /**\n   * æ™ºèƒ½é¢„åŠ è½½ï¼ˆåŸºäºä½¿ç”¨æ¨¡å¼ï¼‰\n   * Smart preload based on usage patterns\n   */\n  async smartPreload(): Promise<void> {\n    // è·å–ä½¿ç”¨ç»Ÿè®¡\n    const metrics = this.metricsCollector.getMetrics();\n    const {localeUsage} = metrics;\n\n    // æŒ‰ä½¿ç”¨é¢‘ç‡æ’åº\n    const sortedLocales = Object.entries(localeUsage)\n      .sort(([, a], [, b]) => b - a)\n      .map(([locale]) => locale as Locale)\n      .slice(ZERO, COUNT_TRIPLE); // åªé¢„åŠ è½½å‰3ä¸ªæœ€å¸¸ç”¨çš„è¯­è¨€\n\n    if (sortedLocales.length > ZERO) {\n      await this.preloadMultipleLocales(sortedLocales);\n    }\n  }\n\n  /**\n   * é¢„åŠ è½½ç›¸å…³è¯­è¨€\n   * Preload related locales\n   */\n  async preloadRelatedLocales(currentLocale: Locale): Promise<void> {\n    const relatedLocales = this.getRelatedLocales(currentLocale);\n    if (relatedLocales.length > ZERO) {\n      await this.preloadMultipleLocales(relatedLocales);\n    }\n  }\n\n  /**\n   * é¢„åŠ è½½ç¼ºå¤±çš„ç¿»è¯‘\n   * Preload missing translations\n   */\n  async preloadMissingTranslations(\n    locale: Locale,\n    keys: string[],\n  ): Promise<void> {\n    try {\n      const messages = await this.loadSpecificKeys(locale, keys);\n\n      // åˆå¹¶åˆ°ç°æœ‰ç¼“å­˜\n      const existing = this.cache.get(locale) || {};\n      const merged = { ...existing, ...messages } as Messages;\n      this.cache.set(locale, merged);\n    } catch (error) {\n      logger.error(\n        `Failed to preload missing translations for ${locale}:`,\n        error,\n      );\n    }\n  }\n\n  /**\n   * è·å–é¢„åŠ è½½ç»Ÿè®¡\n   * Get preload statistics\n   */\n  getPreloadStats(): PreloadStats {\n    const state = this.preloadState;\n    const duration = state.startTime ? Date.now() - state.startTime : ZERO;\n\n    return {\n      isActive: state.isPreloading,\n      progress: state.progress,\n      totalLocales: state.totalLocales,\n      completedLocales: state.completedLocales,\n      errorCount: state.errors.length,\n      duration,\n      averageLoadTime: duration / Math.max(state.completedLocales, ONE),\n      successRate:\n        state.totalLocales > ZERO\n          ? (state.completedLocales - state.errors.length) / state.totalLocales\n          : ZERO,\n    };\n  }\n\n  /**\n   * æ¸…é™¤ç¼“å­˜\n   * Clear cache\n   */\n  clearCache(): void {\n    this.cache.clear();\n  }\n\n  /**\n   * è·å–ç¼“å­˜ç»Ÿè®¡\n   * Get cache statistics\n   */\n  getCacheStats(): { size: number; keys: string[] } {\n    return {\n      size: this.cache.size(),\n      keys: Array.from(this.cache.keys()),\n      // å…¶ä»–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯\n    };\n  }\n\n  /**\n   * ä»æœåŠ¡å™¨åŠ è½½æ¶ˆæ¯\n   * Load messages from server\n   */\n  private async loadMessagesFromServer(\n    locale: Locale,\n    options?: PreloadOptions,\n  ): Promise<Messages> {\n    try {\n      // è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„ API è°ƒç”¨\n      const controller = new AbortController();\n      const timeoutId = setTimeout(\n        () => controller.abort(),\n        options?.timeout || this.preloadConfig.timeout,\n      );\n\n      const response = await fetch(`/api/messages/${locale}`, {\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to load messages for ${locale}: ${response.statusText}`,\n        );\n      }\n\n      return await response.json();\n    } catch (error) {\n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          throw new PreloaderTimeoutError(\n            locale,\n            options?.timeout || this.preloadConfig.timeout,\n          );\n        }\n        throw new PreloaderNetworkError(locale, error);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * åŠ è½½ç‰¹å®šé”®çš„ç¿»è¯‘\n   * Load specific translation keys\n   */\n  private async loadSpecificKeys(\n    locale: Locale,\n    keys: string[],\n  ): Promise<Partial<Messages>> {\n    try {\n      const response = await fetch(`/api/messages/${locale}/keys`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ keys }),\n        signal: this.abortController?.signal,\n      } as RequestInit);\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to load specific keys for ${locale}: ${response.statusText}`,\n        );\n      }\n\n      return await response.json();\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new PreloaderError('Load was cancelled', locale);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * åˆ›å»ºæ‰¹æ¬¡\n   * Create batches\n   */\n  private createBatches<T>(items: T[], batchSize: number): T[][] {\n    const batches: T[][] = [];\n    for (let i = ZERO; i < items.length; i += batchSize) {\n      batches.push(items.slice(i, i + batchSize));\n    }\n    return batches;\n  }\n\n  /**\n   * å¤„ç†æ‰¹æ¬¡\n   * Process batch\n   */\n  private async processBatch(\n    batch: Locale[],\n    options?: PreloadOptions,\n  ): Promise<CacheOperationResult<Messages>[]> {\n    const promises = batch.map(\n      async (locale): Promise<CacheOperationResult<Messages>> => {\n        try {\n          const messages = await this.preloadLocale(locale, options);\n          return {\n            success: true,\n            data: messages,\n            fromCache: false,\n            loadTime: Date.now(),\n          };\n        } catch (error) {\n          this.preloadState.errors.push({\n            locale,\n            error: error instanceof Error ? error.message : 'Unknown error',\n          });\n\n          return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Unknown error',\n            fromCache: false,\n          };\n        }\n      },\n    );\n\n    return Promise.all(promises);\n  }\n\n  /**\n   * è·å–ç›¸å…³è¯­è¨€\n   * Get related locales\n   */\n  private getRelatedLocales(locale: Locale): Locale[] {\n    const relatedMap: Record<Locale, Locale[]> = {\n      en: ['zh'],\n      zh: ['en'],\n    };\n\n    return relatedMap[locale] || [];\n  }\n\n  /**\n   * å»¶è¿Ÿå‡½æ•°\n   * Delay function\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * æ¸…ç†èµ„æº\n   * Cleanup resources\n   */\n  cleanup(): void {\n    this.stopPreloading();\n    this.preloadState = {\n      isPreloading: false,\n      progress: ZERO,\n      totalLocales: ZERO,\n      completedLocales: ZERO,\n      errors: [],\n    };\n  }\n\n  /**\n   * è®¾ç½®é¢„åŠ è½½é…ç½®\n   * Set preload configuration\n   */\n  setConfig(config: Partial<PreloaderConfig>): void {\n    this.preloadConfig = { ...this.preloadConfig, ...config };\n  }\n\n  /**\n   * è·å–é¢„åŠ è½½é…ç½®\n   * Get preload configuration\n   */\n  getConfig(): PreloaderConfig {\n    return { ...this.preloadConfig };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/advanced-strategies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/basic-strategies.ts","messages":[{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 500.","line":52,"column":58,"nodeType":"Literal","messageId":"noMagic","endLine":52,"endColumn":61},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":74,"column":23,"nodeType":"MemberExpression","endLine":74,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":75,"column":23,"nodeType":"MemberExpression","endLine":75,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":83,"column":17,"nodeType":"MemberExpression","endLine":83,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":99,"column":35,"nodeType":"MemberExpression","endLine":99,"endColumn":48}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * åŸºç¡€ç¿»è¯‘é¢„åŠ è½½ç­–ç•¥å®ç°\n * Basic Translation Preloader Strategy Implementations\n */\n\nimport type { Locale } from '@/types/i18n';\nimport { COUNT_PAIR, MAGIC_999, ONE, ZERO } from '@/constants';\n\nimport type {\n  IPreloader,\n  PreloadOptions,\n  PreloadStrategy,\n} from '@/lib/i18n-preloader-types';\n\n/**\n * ç«‹å³é¢„åŠ è½½ç­–ç•¥\n * Immediate preload strategy\n */\nexport const immediateStrategy: PreloadStrategy = async (\n  preloader: IPreloader,\n  locales: Locale[],\n  options?: PreloadOptions,\n) => {\n  await preloader.preloadMultipleLocales(locales, options);\n};\n\n/**\n * æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥\n * Smart preload strategy\n */\nexport const smartStrategy: PreloadStrategy = async (\n  preloader: IPreloader,\n  _locales: Locale[],\n  _options?: PreloadOptions,\n) => {\n  await preloader.smartPreload();\n};\n\n/**\n * æ¸è¿›å¼é¢„åŠ è½½ç­–ç•¥\n * Progressive preload strategy\n */\nexport const progressiveStrategy: PreloadStrategy = async (\n  preloader: IPreloader,\n  locales: Locale[],\n  options?: PreloadOptions,\n) => {\n  for (const locale of locales) {\n    if (preloader.isPreloading()) {\n      await preloader.preloadLocale(locale, options);\n      // æ·»åŠ å»¶è¿Ÿä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹\n      await new Promise((resolve) => setTimeout(resolve, 500));\n    }\n  }\n};\n\n/**\n * ä¼˜å…ˆçº§é¢„åŠ è½½ç­–ç•¥\n * Priority preload strategy\n */\nexport const priorityStrategy: PreloadStrategy = async (\n  preloader: IPreloader,\n  locales: Locale[],\n  options?: PreloadOptions,\n) => {\n  // å®šä¹‰è¯­è¨€ä¼˜å…ˆçº§\n  const priorityMap: Record<Locale, number> = {\n    en: ONE,\n    zh: COUNT_PAIR,\n  };\n\n  // æŒ‰ä¼˜å…ˆçº§æ’åº\n  const sortedLocales = locales.sort((a, b) => {\n    const priorityA = priorityMap[a] || MAGIC_999;\n    const priorityB = priorityMap[b] || MAGIC_999;\n    return priorityA - priorityB;\n  });\n\n  // é«˜ä¼˜å…ˆçº§çš„è¯­è¨€å…ˆé¢„åŠ è½½\n  for (const locale of sortedLocales) {\n    await preloader.preloadLocale(locale, {\n      ...options,\n      priority: priorityMap[locale] <= COUNT_PAIR ? 'high' : 'normal',\n    });\n  }\n};\n\n/**\n * æ‡’åŠ è½½ç­–ç•¥\n * Lazy preload strategy\n */\nexport const lazyStrategy: PreloadStrategy = async (\n  preloader: IPreloader,\n  locales: Locale[],\n  options?: PreloadOptions,\n) => {\n  // åªé¢„åŠ è½½å½“å‰æœ€éœ€è¦çš„è¯­è¨€\n  if (locales.length > ZERO) {\n    await preloader.preloadLocale(locales[ZERO]!, options);\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/configs.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TEST_DOM_INTERACTIVE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘é¢„åŠ è½½ç­–ç•¥é…ç½®\n * Translation Preloader Strategy Configurations\n */\n\nimport { COUNT_12000, COUNT_15000, COUNT_4, COUNT_7000, COUNT_800, COUNT_8000, COUNT_9000 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_NORMAL, ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, FIVE_SECONDS_MS, ONE, PERCENTAGE_FULL, TEN_SECONDS_MS, ZERO } from '@/constants';\n\nimport { DEC_0_15, MAGIC_0_1, MAGIC_0_2, MAGIC_0_25, MAGIC_0_3, MAGIC_0_5, MAGIC_0_6, MAGIC_0_7, MAGIC_0_8 } from \"@/constants/decimal\";\nimport type { PreloadStrategyConfig } from '@/lib/i18n-preloader-types';\nimport { WEB_VITALS_CONSTANTS } from \"@/constants/test-web-vitals-constants\";\nconst {TEST_DOM_INTERACTIVE} = WEB_VITALS_CONSTANTS;\n\n/**\n * é¢„åŠ è½½ç­–ç•¥é…ç½®\n * Preload strategy configurations\n */\nexport const strategyConfigs: Record<string, PreloadStrategyConfig> = {\n  immediate: {\n    name: 'immediate',\n    description: 'ç«‹å³é¢„åŠ è½½æ‰€æœ‰è¯­è¨€',\n    priority: ONE,\n    conditions: {\n      minCacheHitRate: MAGIC_0_8,\n      maxErrorRate: MAGIC_0_1,\n      networkCondition: 'fast',\n    },\n    parameters: {\n      batchSize: COUNT_FIVE,\n      delayBetweenBatches: ZERO,\n      maxConcurrency: COUNT_TEN,\n      timeout: FIVE_SECONDS_MS,\n    },\n  },\n  smart: {\n    name: 'smart',\n    description: 'åŸºäºä½¿ç”¨æ¨¡å¼çš„æ™ºèƒ½é¢„åŠ è½½',\n    priority: COUNT_PAIR,\n    conditions: {\n      minCacheHitRate: MAGIC_0_6,\n      maxErrorRate: MAGIC_0_2,\n    },\n    parameters: {\n      batchSize: COUNT_TRIPLE,\n      delayBetweenBatches: PERCENTAGE_FULL,\n      maxConcurrency: COUNT_FIVE,\n      timeout: COUNT_8000,\n    },\n  },\n  progressive: {\n    name: 'progressive',\n    description: 'æ¸è¿›å¼é¢„åŠ è½½',\n    priority: COUNT_TRIPLE,\n    conditions: {\n      maxErrorRate: MAGIC_0_3,\n    },\n    parameters: {\n      batchSize: ONE,\n      delayBetweenBatches: 500,\n      maxConcurrency: COUNT_PAIR,\n      timeout: TEN_SECONDS_MS,\n    },\n  },\n  priority: {\n    name: 'priority',\n    description: 'ä¼˜å…ˆçº§é¢„åŠ è½½',\n    priority: COUNT_PAIR,\n    conditions: {\n      minCacheHitRate: MAGIC_0_7,\n      maxErrorRate: DEC_0_15,\n    },\n    parameters: {\n      batchSize: COUNT_PAIR,\n      delayBetweenBatches: 200,\n      maxConcurrency: COUNT_TRIPLE,\n      timeout: COUNT_7000,\n    },\n  },\n  lazy: {\n    name: 'lazy',\n    description: 'æ‡’åŠ è½½ç­–ç•¥',\n    priority: COUNT_4,\n    conditions: {\n      networkCondition: 'slow',\n    },\n    parameters: {\n      batchSize: ONE,\n      delayBetweenBatches: ANIMATION_DURATION_VERY_SLOW,\n      maxConcurrency: ONE,\n      timeout: COUNT_15000,\n    },\n  },\n  batch: {\n    name: 'batch',\n    description: 'æ‰¹é‡é¢„åŠ è½½ç­–ç•¥',\n    priority: COUNT_TRIPLE,\n    conditions: {\n      maxErrorRate: MAGIC_0_25,\n    },\n    parameters: {\n      batchSize: COUNT_PAIR,\n      delayBetweenBatches: ANIMATION_DURATION_VERY_SLOW,\n      maxConcurrency: COUNT_PAIR,\n      timeout: COUNT_12000,\n    },\n  },\n  adaptive: {\n    name: 'adaptive',\n    description: 'è‡ªé€‚åº”é¢„åŠ è½½ç­–ç•¥',\n    priority: COUNT_PAIR,\n    conditions: {\n      minCacheHitRate: MAGIC_0_5,\n      maxErrorRate: MAGIC_0_3,\n    },\n    parameters: {\n      batchSize: COUNT_TRIPLE,\n      delayBetweenBatches: ANIMATION_DURATION_NORMAL,\n      maxConcurrency: COUNT_4,\n      timeout: COUNT_9000,\n    },\n  },\n  networkAware: {\n    name: 'networkAware',\n    description: 'ç½‘ç»œæ„ŸçŸ¥é¢„åŠ è½½ç­–ç•¥',\n    priority: COUNT_PAIR,\n    conditions: {\n      maxErrorRate: MAGIC_0_2,\n    },\n    parameters: {\n      batchSize: COUNT_PAIR,\n      delayBetweenBatches: 400,\n      maxConcurrency: COUNT_TRIPLE,\n      timeout: COUNT_8000,\n    },\n  },\n  timeAware: {\n    name: 'timeAware',\n    description: 'æ—¶é—´æ„ŸçŸ¥é¢„åŠ è½½ç­–ç•¥',\n    priority: COUNT_TRIPLE,\n    conditions: {\n      maxErrorRate: MAGIC_0_25,\n    },\n    parameters: {\n      batchSize: COUNT_PAIR,\n      delayBetweenBatches: WEB_VITALS_CONSTANTS.TEST_DOM_INTERACTIVE,\n      maxConcurrency: COUNT_TRIPLE,\n      timeout: TEN_SECONDS_MS,\n    },\n  },\n  memoryAware: {\n    name: 'memoryAware',\n    description: 'å†…å­˜æ„ŸçŸ¥é¢„åŠ è½½ç­–ç•¥',\n    priority: COUNT_TRIPLE,\n    conditions: {\n      maxErrorRate: MAGIC_0_3,\n    },\n    parameters: {\n      batchSize: ONE,\n      delayBetweenBatches: COUNT_800,\n      maxConcurrency: COUNT_PAIR,\n      timeout: COUNT_12000,\n    },\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/factory.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":51,"column":20,"nodeType":"MemberExpression","endLine":51,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘é¢„åŠ è½½ç­–ç•¥å·¥å‚å’Œé›†åˆ\n * Translation Preloader Strategy Factory and Collections\n */\n\nimport type { PreloaderMetrics } from '@/lib/i18n-preloader-types';\nimport {\n  adaptiveStrategy,\n  batchStrategy,\n  memoryAwareStrategy,\n  networkAwareStrategy,\n  timeAwareStrategy,\n} from '@/lib/i18n-preloader-strategies/advanced-strategies';\n// å¯¼å…¥æ‰€æœ‰ç­–ç•¥\nimport {\n  immediateStrategy,\n  lazyStrategy,\n  priorityStrategy,\n  progressiveStrategy,\n  smartStrategy,\n} from '@/lib/i18n-preloader-strategies/basic-strategies';\nimport { strategyConfigs } from '@/lib/i18n-preloader-strategies/configs';\nimport { PreloadStrategyManager } from '@/lib/i18n-preloader-strategies/manager';\n\n/**\n * é¢„åŠ è½½ç­–ç•¥é›†åˆ\n * Preload strategies collection\n */\nexport const PreloadStrategies = {\n  immediate: immediateStrategy,\n  smart: smartStrategy,\n  progressive: progressiveStrategy,\n  priority: priorityStrategy,\n  lazy: lazyStrategy,\n  batch: batchStrategy,\n  adaptive: adaptiveStrategy,\n  networkAware: networkAwareStrategy,\n  timeAware: timeAwareStrategy,\n  memoryAware: memoryAwareStrategy,\n};\n\n/**\n * åˆ›å»ºç­–ç•¥ç®¡ç†å™¨\n * Create strategy manager\n */\nexport function createStrategyManager(): PreloadStrategyManager {\n  const manager = new PreloadStrategyManager();\n\n  // æ³¨å†Œæ‰€æœ‰ç­–ç•¥\n  Object.entries(PreloadStrategies).forEach(([name, strategy]) => {\n    const config = strategyConfigs[name];\n    manager.registerStrategy(name, strategy, config);\n  });\n\n  return manager;\n}\n\n/**\n * è·å–æ¨èç­–ç•¥\n * Get recommended strategy\n */\nexport function getRecommendedStrategy(\n  metrics: PreloaderMetrics,\n  networkCondition: 'fast' | 'slow' | 'offline' = 'fast',\n): string {\n  const manager = createStrategyManager();\n  return manager.selectBestStrategy(metrics, networkCondition);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-strategies/utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":77,"column":20,"nodeType":"MemberExpression","endLine":77,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘é¢„åŠ è½½ç­–ç•¥å·¥å…·å‡½æ•°\n * Translation Preloader Strategy Utility Functions\n */\n\nimport { strategyConfigs } from '@/lib/i18n-preloader-strategies/configs';\nimport { COUNT_PAIR, MAGIC_0_5, MAGIC_0_9, MAGIC_9, MAGIC_17, MAGIC_18, MAGIC_22, ONE, ZERO } from '@/constants';\n\nimport type { PreloaderMetrics } from '@/lib/i18n-preloader-types';\n\n/**\n * ç­–ç•¥å·¥å…·å‡½æ•°\n * Strategy utility functions\n */\nexport const StrategyUtils = {\n  /**\n   * æ£€æŸ¥ç½‘ç»œçŠ¶å†µ\n   * Check network condition\n   */\n  getNetworkCondition(): 'fast' | 'slow' | 'offline' {\n    if (!navigator.onLine) {\n      return 'offline';\n    }\n\n    const {connection} = (navigator as {\n        connection?: { effectiveType?: string; downlink?: number };\n      });\n    if (connection) {\n      const { effectiveType, downlink } = connection;\n      if (effectiveType === '4g' && (downlink ?? ZERO) > COUNT_PAIR) {\n        return 'fast';\n      }\n    }\n\n    return 'slow';\n  },\n\n  /**\n   * æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ\n   * Check memory usage\n   */\n  getMemoryUsage(): number {\n    const {memory} = (performance as {\n        memory?: { usedJSHeapSize: number; totalJSHeapSize: number };\n      });\n    if (memory) {\n      const { usedJSHeapSize, totalJSHeapSize } = memory;\n      return usedJSHeapSize / totalJSHeapSize;\n    }\n    return MAGIC_0_5; // é»˜è®¤å€¼\n  },\n\n  /**\n   * è·å–å½“å‰æ—¶é—´æ®µ\n   * Get current time period\n   */\n  getTimePeriod(): 'work' | 'evening' | 'night' {\n    const hour = new Date().getHours();\n    if (hour >= MAGIC_9 && hour <= MAGIC_17) {\n      return 'work';\n    }\n    if (hour >= MAGIC_18 && hour <= MAGIC_22) {\n      return 'evening';\n    }\n    return 'night';\n  },\n\n  /**\n   * è®¡ç®—ç­–ç•¥ä¼˜å…ˆçº§\n   * Calculate strategy priority\n   */\n  calculateStrategyPriority(\n    strategy: string,\n    metrics: PreloaderMetrics,\n    conditions: { network: string; memory: number; time: string },\n  ): number {\n    const config = strategyConfigs[strategy];\n    if (!config) return ZERO;\n\n    let score = config.priority;\n\n    // æ ¹æ®æ¡ä»¶è°ƒæ•´åˆ†æ•°\n    if (conditions.network === 'fast' && strategy === 'immediate') {\n      score += COUNT_PAIR;\n    }\n    if (conditions.memory < MAGIC_0_5 && strategy === 'lazy') {\n      score += ONE;\n    }\n    if (metrics.successRate > MAGIC_0_9 && strategy === 'smart') {\n      score += ONE;\n    }\n\n    return score;\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-types.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Constructor has too many parameters (4). Maximum allowed is 3.","line":371,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":371,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘é¢„åŠ è½½å™¨ç±»å‹å®šä¹‰\n * Translation Preloader Type Definitions\n *\n * æä¾›é¢„åŠ è½½å™¨ç›¸å…³çš„ç±»å‹å®šä¹‰å’Œæ¥å£\n */\n\nimport { COUNT_4 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, TEN_SECONDS_MS } from '@/constants';\n\nimport { MAGIC_0_1, MAGIC_0_8 } from \"@/constants/decimal\";\nimport type { CacheOperationResult } from '@/lib/i18n-cache-types';\nimport type { Locale, Messages } from '@/types/i18n';\n\n/**\n * é¢„åŠ è½½çŠ¶æ€\n * Preload state\n */\nexport interface PreloadState {\n  isPreloading: boolean;\n  currentLocale?: Locale;\n  progress: number;\n  totalLocales: number;\n  completedLocales: number;\n  errors: Array<{ locale: Locale; error: string }>;\n  startTime?: number;\n}\n\n/**\n * é¢„åŠ è½½ç»Ÿè®¡ä¿¡æ¯\n * Preload statistics\n */\nexport interface PreloadStats {\n  isActive: boolean;\n  progress: number;\n  totalLocales: number;\n  completedLocales: number;\n  errorCount: number;\n  duration: number;\n  averageLoadTime: number;\n  successRate: number;\n}\n\n/**\n * é¢„åŠ è½½ç»“æœ\n * Preload result\n */\nexport interface PreloadResult {\n  success: boolean;\n  locale: Locale;\n  messages?: Messages;\n  error?: string;\n  loadTime: number;\n  fromCache: boolean;\n}\n\n/**\n * æ‰¹å¤„ç†ç»“æœ\n * Batch processing result\n */\nexport interface BatchResult {\n  batchIndex: number;\n  results: PreloadResult[];\n  totalTime: number;\n  successCount: number;\n  errorCount: number;\n}\n\n/**\n * é¢„åŠ è½½é€‰é¡¹\n * Preload options\n */\nexport interface PreloadOptions {\n  priority?: 'high' | 'normal' | 'low';\n  timeout?: number;\n  retryCount?: number;\n  retryDelay?: number;\n  signal?: AbortSignal;\n  onProgress?: (progress: number) => void;\n  onError?: (error: Error, locale: Locale) => void;\n  onSuccess?: (locale: Locale, messages: Messages) => void;\n}\n\n/**\n * æ™ºèƒ½é¢„åŠ è½½é…ç½®\n * Smart preload configuration\n */\nexport interface SmartPreloadConfig {\n  enabled: boolean;\n  maxLocales: number;\n  minUsageThreshold: number;\n  usageWindow: number; // ç»Ÿè®¡çª—å£ï¼ˆå°æ—¶ï¼‰\n  preloadTrigger: 'immediate' | 'idle' | 'scheduled';\n  scheduleInterval?: number; // å®šæ—¶é¢„åŠ è½½é—´éš”ï¼ˆåˆ†é’Ÿï¼‰\n}\n\n/**\n * é¢„åŠ è½½ç­–ç•¥é…ç½®\n * Preload strategy configuration\n */\nexport interface PreloadStrategyConfig {\n  name: string;\n  description: string;\n  priority: number;\n  conditions: {\n    minCacheHitRate?: number;\n    maxErrorRate?: number;\n    minAvailableMemory?: number;\n    networkCondition?: 'fast' | 'slow' | 'offline';\n  };\n  parameters: {\n    batchSize?: number;\n    delayBetweenBatches?: number;\n    maxConcurrency?: number;\n    timeout?: number;\n  };\n}\n\n/**\n * é¢„åŠ è½½å™¨æ€§èƒ½æŒ‡æ ‡\n * Preloader performance metrics\n */\nexport interface PreloaderMetrics {\n  totalPreloads: number;\n  successfulPreloads: number;\n  failedPreloads: number;\n  averageLoadTime: number;\n  cacheHitRate: number;\n  successRate: number;\n  memoryUsage: number;\n  networkRequests: number;\n  lastPreloadTime?: number;\n  performanceScore: number;\n}\n\n/**\n * é¢„åŠ è½½å™¨äº‹ä»¶\n * Preloader events\n */\nexport interface PreloaderEvents {\n  onPreloadStart: (locales: Locale[]) => void;\n  onPreloadProgress: (progress: number, currentLocale?: Locale) => void;\n  onPreloadComplete: (results: PreloadResult[]) => void;\n  onPreloadError: (error: Error, locale?: Locale) => void;\n  onPreloadCancel: () => void;\n  onCacheHit: (locale: Locale, messages: Messages) => void;\n  onCacheMiss: (locale: Locale) => void;\n  onBatchComplete: (batchResult: BatchResult) => void;\n}\n\n/**\n * é¢„åŠ è½½å™¨é…ç½®\n * Preloader configuration\n */\nexport interface PreloaderConfig {\n  // åŸºç¡€é…ç½®\n  enablePreload: boolean;\n  preloadLocales: Locale[];\n  batchSize: number;\n  delayBetweenBatches: number;\n  maxConcurrency: number;\n  timeout: number;\n  retryCount: number;\n  retryDelay: number;\n\n  // æ™ºèƒ½é¢„åŠ è½½\n  smartPreload: SmartPreloadConfig;\n\n  // æ€§èƒ½é…ç½®\n  memoryLimit: number;\n  networkThrottling: boolean;\n  priorityQueue: boolean;\n\n  // ç¼“å­˜é…ç½®\n  cacheStrategy: 'aggressive' | 'conservative' | 'adaptive';\n  cacheTTL: number;\n  maxCacheSize: number;\n\n  // ç›‘æ§é…ç½®\n  enableMetrics: boolean;\n  metricsInterval: number;\n  enableLogging: boolean;\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n\n  // äº‹ä»¶å¤„ç†\n  events?: Partial<PreloaderEvents>;\n}\n\n/**\n * é¢„åŠ è½½å™¨çŠ¶æ€ç®¡ç†\n * Preloader state management\n */\nexport interface PreloaderStateManager {\n  getState(): PreloadState;\n  setState(state: Partial<PreloadState>): void;\n  resetState(): void;\n  isPreloading(): boolean;\n  getProgress(): number;\n  getErrors(): Array<{ locale: Locale; error: string }>;\n  addError(locale: Locale, error: string): void;\n  clearErrors(): void;\n}\n\n/**\n * é¢„åŠ è½½å™¨ç¼“å­˜æ¥å£\n * Preloader cache interface\n */\nexport interface PreloaderCache {\n  get(locale: Locale): Messages | undefined;\n  set(locale: Locale, messages: Messages): void;\n  has(locale: Locale): boolean;\n  delete(locale: Locale): boolean;\n  clear(): void;\n  size(): number;\n  keys(): Locale[];\n  getStats(): {\n    hitCount: number;\n    missCount: number;\n    hitRate: number;\n    size: number;\n    memoryUsage: number;\n  };\n}\n\n/**\n * é¢„åŠ è½½å™¨ç½‘ç»œæ¥å£\n * Preloader network interface\n */\nexport interface PreloaderNetwork {\n  loadMessages(locale: Locale, options?: PreloadOptions): Promise<Messages>;\n  loadSpecificKeys(\n    locale: Locale,\n    keys: string[],\n    options?: PreloadOptions,\n  ): Promise<Partial<Messages>>;\n  checkNetworkStatus(): Promise<{\n    online: boolean;\n    speed: 'fast' | 'slow';\n    latency: number;\n  }>;\n  estimateLoadTime(locale: Locale): Promise<number>;\n}\n\n/**\n * é¢„åŠ è½½å™¨è°ƒåº¦å™¨\n * Preloader scheduler\n */\nexport interface PreloaderScheduler {\n  schedule(task: () => Promise<void>, priority?: number): void;\n  cancel(taskId: string): boolean;\n  pause(): void;\n  resume(): void;\n  clear(): void;\n  getQueueSize(): number;\n  isRunning(): boolean;\n}\n\n/**\n * é¢„åŠ è½½å™¨ç›‘æ§å™¨\n * Preloader monitor\n */\nexport interface PreloaderMonitor {\n  startMonitoring(): void;\n  stopMonitoring(): void;\n  getMetrics(): PreloaderMetrics;\n  resetMetrics(): void;\n  recordPreload(result: PreloadResult): void;\n  recordCacheHit(locale: Locale): void;\n  recordCacheMiss(locale: Locale): void;\n  recordError(error: Error, locale?: Locale): void;\n  getPerformanceScore(): number;\n}\n\n/**\n * é¢„åŠ è½½å™¨å·¥å‚é…ç½®\n * Preloader factory configuration\n */\nexport interface PreloaderFactoryConfig {\n  cacheType: 'memory' | 'indexeddb' | 'localstorage';\n  networkAdapter: 'fetch' | 'xhr' | 'custom';\n  schedulerType: 'fifo' | 'priority' | 'adaptive';\n  monitoringEnabled: boolean;\n  debugMode: boolean;\n}\n\n/**\n * é¢„åŠ è½½å™¨å®ä¾‹æ¥å£\n * Preloader instance interface\n */\nexport interface IPreloader {\n  // åŸºç¡€é¢„åŠ è½½æ–¹æ³•\n  preloadLocale(locale: Locale, options?: PreloadOptions): Promise<Messages>;\n  preloadMultipleLocales(\n    locales: Locale[],\n    options?: PreloadOptions,\n  ): Promise<CacheOperationResult<Messages>[]>;\n  preloadMissingTranslations(locale: Locale, keys: string[]): Promise<void>;\n\n  // æ™ºèƒ½é¢„åŠ è½½\n  smartPreload(): Promise<void>;\n  preloadRelatedLocales(currentLocale: Locale): Promise<void>;\n\n  // ç¼“å­˜ç®¡ç†\n  warmupCache(): void;\n  clearCache(): void;\n  getCacheStats(): { size: number; keys: string[] };\n\n  // çŠ¶æ€ç®¡ç†\n  isPreloading(): boolean;\n  getPreloadProgress(): number;\n  getPreloadState(): PreloadState;\n  getPreloadStats(): PreloadStats;\n\n  // æ§åˆ¶æ–¹æ³•\n  stopPreloading(): void;\n  pausePreloading(): void;\n  resumePreloading(): void;\n\n  // é…ç½®ç®¡ç†\n  setConfig(config: Partial<PreloaderConfig>): void;\n  getConfig(): PreloaderConfig;\n\n  // æ¸…ç†èµ„æº\n  cleanup(): void;\n}\n\n/**\n * é¢„åŠ è½½ç­–ç•¥å‡½æ•°ç±»å‹\n * Preload strategy function type\n */\nexport type PreloadStrategy = (\n  preloader: IPreloader,\n  locales: Locale[],\n  options?: PreloadOptions,\n) => Promise<void>;\n\n/**\n * é¢„åŠ è½½å™¨å·¥å‚å‡½æ•°ç±»å‹\n * Preloader factory function type\n */\nexport type PreloaderFactory = (config: PreloaderFactoryConfig) => IPreloader;\n\n/**\n * é¢„åŠ è½½å™¨ä¸­é—´ä»¶ç±»å‹\n * Preloader middleware type\n */\nexport type PreloaderMiddleware = (\n  locale: Locale,\n  next: () => Promise<Messages>,\n) => Promise<Messages>;\n\n/**\n * é¢„åŠ è½½å™¨æ’ä»¶æ¥å£\n * Preloader plugin interface\n */\nexport interface PreloaderPlugin {\n  name: string;\n  version: string;\n  install(preloader: IPreloader): void;\n  uninstall(preloader: IPreloader): void;\n  onPreloadStart?(locales: Locale[]): void;\n  onPreloadComplete?(results: PreloadResult[]): void;\n  onPreloadError?(error: Error, locale?: Locale): void;\n}\n\n/**\n * é¢„åŠ è½½å™¨é”™è¯¯ç±»å‹\n * Preloader error types\n */\nexport class PreloaderError extends Error {\n  constructor(\n    message: string,\n    public locale?: Locale,\n    public code?: string,\n    public retryable: boolean = true,\n  ) {\n    super(message);\n    this.name = 'PreloaderError';\n  }\n}\n\nexport class PreloaderTimeoutError extends PreloaderError {\n  constructor(locale: Locale, timeout: number) {\n    super(\n      `Preload timeout for locale ${locale} after ${timeout}ms`,\n      locale,\n      'TIMEOUT',\n      true,\n    );\n    this.name = 'PreloaderTimeoutError';\n  }\n}\n\nexport class PreloaderNetworkError extends PreloaderError {\n  constructor(locale: Locale, originalError: Error) {\n    super(\n      `Network error while preloading ${locale}: ${originalError.message}`,\n      locale,\n      'NETWORK',\n      true,\n    );\n    this.name = 'PreloaderNetworkError';\n  }\n}\n\nexport class PreloaderCacheError extends PreloaderError {\n  constructor(locale: Locale, operation: string) {\n    super(\n      `Cache error during ${operation} for locale ${locale}`,\n      locale,\n      'CACHE',\n      false,\n    );\n    this.name = 'PreloaderCacheError';\n  }\n}\n\n/**\n * é¢„åŠ è½½å™¨å¸¸é‡\n * Preloader constants\n */\nexport const PRELOADER_CONSTANTS = {\n  DEFAULT_BATCH_SIZE: COUNT_TRIPLE,\n  DEFAULT_DELAY_BETWEEN_BATCHES: PERCENTAGE_FULL,\n  DEFAULT_MAX_CONCURRENCY: COUNT_FIVE,\n  DEFAULT_TIMEOUT: TEN_SECONDS_MS,\n  DEFAULT_RETRY_COUNT: COUNT_TRIPLE,\n  DEFAULT_RETRY_DELAY: ANIMATION_DURATION_VERY_SLOW,\n  DEFAULT_CACHE_TTL: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 24 hours\n  DEFAULT_MEMORY_LIMIT: PERCENTAGE_HALF * BYTES_PER_KB * BYTES_PER_KB, // 50MB\n  MIN_USAGE_THRESHOLD: MAGIC_0_1,\n  MAX_PRELOAD_LOCALES: COUNT_TEN,\n  PERFORMANCE_SCORE_THRESHOLD: MAGIC_0_8,\n} as const;\n\n/**\n * é¢„åŠ è½½å™¨äº‹ä»¶åç§°\n * Preloader event names\n */\nexport const PRELOADER_EVENTS = {\n  PRELOAD_START: 'preload:start',\n  PRELOAD_PROGRESS: 'preload:progress',\n  PRELOAD_COMPLETE: 'preload:complete',\n  PRELOAD_ERROR: 'preload:error',\n  PRELOAD_CANCEL: 'preload:cancel',\n  CACHE_HIT: 'cache:hit',\n  CACHE_MISS: 'cache:miss',\n  BATCH_COMPLETE: 'batch:complete',\n  NETWORK_SLOW: 'network:slow',\n  MEMORY_WARNING: 'memory:warning',\n} as const;\n\n/**\n * é¢„åŠ è½½å™¨çŠ¶æ€æšä¸¾\n * Preloader state enum\n */\nexport enum PreloaderState {\n  IDLE = 'idle',\n  PRELOADING = 'preloading',\n  PAUSED = 'paused',\n  COMPLETED = 'completed',\n  ERROR = 'error',\n  CANCELLED = 'cancelled',\n}\n\n/**\n * é¢„åŠ è½½ä¼˜å…ˆçº§æšä¸¾\n * Preload priority enum\n */\nexport enum PreloadPriority {\n  LOW = ONE,\n  NORMAL = COUNT_PAIR,\n  HIGH = COUNT_TRIPLE,\n  CRITICAL = COUNT_4,\n}\n\n/**\n * ç±»å‹å®ˆå«å‡½æ•°\n * Type guard functions\n */\nexport function isPreloadResult(obj: unknown): obj is PreloadResult {\n  return (\n    Boolean(obj) &&\n    typeof obj === 'object' &&\n    typeof (obj as Record<string, unknown>).success === 'boolean' &&\n    typeof (obj as Record<string, unknown>).locale === 'string' &&\n    typeof (obj as Record<string, unknown>).loadTime === 'number' &&\n    typeof (obj as Record<string, unknown>).fromCache === 'boolean'\n  );\n}\n\nexport function isPreloadState(obj: unknown): obj is PreloadState {\n  return Boolean(\n    obj &&\n      typeof obj === 'object' &&\n      typeof (obj as PreloadState).isPreloading === 'boolean' &&\n      typeof (obj as PreloadState).progress === 'number' &&\n      typeof (obj as PreloadState).totalLocales === 'number' &&\n      typeof (obj as PreloadState).completedLocales === 'number' &&\n      Array.isArray((obj as PreloadState).errors),\n  );\n}\n\nexport function isPreloaderError(error: unknown): error is PreloaderError {\n  return error instanceof PreloaderError;\n}\n\n/**\n * å·¥å…·ç±»å‹\n * Utility types\n */\nexport type PreloadEventHandler<T = Record<string, unknown>> = (\n  data: T,\n) => void;\nexport type PreloadEventMap = {\n  [K in keyof PreloaderEvents]: PreloaderEvents[K];\n};\n\nexport type PreloadConfigKey = keyof PreloaderConfig;\nexport type PreloadStateKey = keyof PreloadState;\nexport type PreloadStatsKey = keyof PreloadStats;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils/factory-functions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils/global-instances.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'setupPreloader' has too many parameters (4). Maximum allowed is 3.","line":28,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":28,"endColumn":31},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":60,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":60,"endColumn":49,"suggestions":[{"messageId":"removeAwait","fix":{"range":[1550,1556],"text":""},"desc":"Remove redundant `await`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å…¨å±€é¢„åŠ è½½å™¨å®ä¾‹å’Œä¾¿æ·å‡½æ•°\n * Global Preloader Instances and Convenience Functions\n */\n\nimport type { Locale, Messages } from '@/types/i18n';\nimport type { CacheStorage, MetricsCollector } from '@/lib/i18n-cache-types';\nimport type { IPreloader, PreloaderConfig } from '@/lib/i18n-preloader-types';\nimport { PreloaderFactory } from '@/lib/i18n-preloader-utils/preloader-factory';\nimport { PreloaderManager } from '@/lib/i18n-preloader-utils/preloader-manager';\n\n/**\n * å…¨å±€é¢„åŠ è½½å™¨ç®¡ç†å™¨å®ä¾‹\n * Global preloader manager instance\n */\nexport const globalPreloaderManager = new PreloaderManager();\n\n/**\n * å…¨å±€é¢„åŠ è½½å™¨å·¥å‚å®ä¾‹\n * Global preloader factory instance\n */\nexport const globalPreloaderFactory = PreloaderFactory.getInstance();\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šåˆ›å»ºå¹¶æ³¨å†Œé¢„åŠ è½½å™¨\n * Convenience function: create and register preloader\n */\nexport function setupPreloader(\n  name: string,\n  cache: CacheStorage<Messages>,\n  metricsCollector: MetricsCollector,\n  config?: Partial<PreloaderConfig>,\n): IPreloader {\n  const preloader = globalPreloaderFactory.createPreloader(\n    cache,\n    metricsCollector,\n    config,\n  );\n  globalPreloaderManager.register(name, preloader);\n  return preloader;\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šè·å–é»˜è®¤é¢„åŠ è½½å™¨\n * Convenience function: get default preloader\n */\nexport function getDefaultPreloader(): IPreloader | undefined {\n  return globalPreloaderManager.get();\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šé¢„åŠ è½½è¯­è¨€\n * Convenience function: preload locale\n */\nexport async function preloadLocale(\n  locale: Locale,\n): Promise<Messages | undefined> {\n  const preloader = getDefaultPreloader();\n  if (preloader) {\n    return await preloader.preloadLocale(locale);\n  }\n  return undefined;\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šæ™ºèƒ½é¢„åŠ è½½\n * Convenience function: smart preload\n */\nexport async function smartPreload(): Promise<void> {\n  const preloader = getDefaultPreloader();\n  if (preloader) {\n    await preloader.smartPreload();\n  }\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šæ¸…ç†æ‰€æœ‰é¢„åŠ è½½å™¨\n * Convenience function: cleanup all preloaders\n */\nexport function cleanupPreloaders(): void {\n  globalPreloaderManager.cleanup();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils/preloader-factory.ts","messages":[{"ruleId":"no-empty-function","severity":2,"message":"Unexpected empty constructor.","line":26,"column":25,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":26,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * é¢„åŠ è½½å™¨å·¥å‚ç±»\n * Preloader Factory Class\n */\n\nimport { ONE } from \"@/constants\";\nimport type { CacheStorage, MetricsCollector } from '@/lib/i18n-cache-types';\nimport { TranslationPreloader } from '@/lib/i18n-preloader-core';\nimport type { Messages } from '@/types/i18n';\nimport type {\n  IPreloader,\n  PreloaderConfig,\n  PreloaderPlugin,\n  PreloadEventHandler,\n} from '@/lib/i18n-preloader-types';\n\n/**\n * é¢„åŠ è½½å™¨å·¥å‚ç±»\n * Preloader factory class\n */\nexport class PreloaderFactory {\n  private static instance: PreloaderFactory;\n  private plugins = new Map<string, PreloaderPlugin>();\n  private eventHandlers = new Map<string, PreloadEventHandler[]>();\n\n  private constructor() {}\n\n  /**\n   * è·å–å·¥å‚å®ä¾‹\n   * Get factory instance\n   */\n  static getInstance(): PreloaderFactory {\n    if (!PreloaderFactory.instance) {\n      PreloaderFactory.instance = new PreloaderFactory();\n    }\n    return PreloaderFactory.instance;\n  }\n\n  /**\n   * åˆ›å»ºé¢„åŠ è½½å™¨\n   * Create preloader\n   */\n  createPreloader(\n    cache: CacheStorage<Messages>,\n    metricsCollector: MetricsCollector,\n    config?: Partial<PreloaderConfig>,\n  ): IPreloader {\n    const preloader = new TranslationPreloader(cache, metricsCollector, config);\n\n    // å®‰è£…æ’ä»¶\n    this.plugins.forEach((plugin) => {\n      plugin.install(preloader);\n    });\n\n    // è®¾ç½®äº‹ä»¶å¤„ç†å™¨\n    this.setupEventHandlers(preloader);\n\n    return preloader;\n  }\n\n  /**\n   * æ³¨å†Œæ’ä»¶\n   * Register plugin\n   */\n  registerPlugin(plugin: PreloaderPlugin): void {\n    this.plugins.set(plugin.name, plugin);\n  }\n\n  /**\n   * å¸è½½æ’ä»¶\n   * Unregister plugin\n   */\n  unregisterPlugin(name: string): boolean {\n    return this.plugins.delete(name);\n  }\n\n  /**\n   * è·å–æ’ä»¶\n   * Get plugin\n   */\n  getPlugin(name: string): PreloaderPlugin | undefined {\n    return this.plugins.get(name);\n  }\n\n  /**\n   * æ³¨å†Œäº‹ä»¶å¤„ç†å™¨\n   * Register event handler\n   */\n  on(event: string, handler: PreloadEventHandler): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, []);\n    }\n    this.eventHandlers.get(event)!.push(handler);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶å¤„ç†å™¨\n   * Remove event handler\n   */\n  off(event: string, handler: PreloadEventHandler): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      const index = handlers.indexOf(handler);\n      if (index > -ONE) {\n        handlers.splice(index, ONE);\n      }\n    }\n  }\n\n  /**\n   * è®¾ç½®äº‹ä»¶å¤„ç†å™¨\n   * Setup event handlers\n   */\n  private setupEventHandlers(_preloader: IPreloader): void {\n    // è¿™é‡Œå¯ä»¥è®¾ç½®é»˜è®¤çš„äº‹ä»¶å¤„ç†é€»è¾‘\n    // å®é™…å®ç°éœ€è¦æ ¹æ®å…·ä½“çš„äº‹ä»¶ç³»ç»Ÿæ¥å®Œæˆ\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils/preloader-manager.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":88,"column":7,"nodeType":"MemberExpression","endLine":88,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * é¢„åŠ è½½å™¨ç®¡ç†å™¨\n * Preloader Manager\n */\n\nimport type { IPreloader, PreloadState } from '@/lib/i18n-preloader-types';\n\n/**\n * é¢„åŠ è½½å™¨ç®¡ç†å™¨\n * Preloader manager\n */\nexport class PreloaderManager {\n  private preloaders = new Map<string, IPreloader>();\n  private defaultPreloader?: IPreloader | undefined;\n\n  /**\n   * æ³¨å†Œé¢„åŠ è½½å™¨\n   * Register preloader\n   */\n  register(name: string, preloader: IPreloader): void {\n    this.preloaders.set(name, preloader);\n    if (!this.defaultPreloader) {\n      this.defaultPreloader = preloader;\n    }\n  }\n\n  /**\n   * è·å–é¢„åŠ è½½å™¨\n   * Get preloader\n   */\n  get(name?: string): IPreloader | undefined {\n    if (name) {\n      return this.preloaders.get(name);\n    }\n    return this.defaultPreloader;\n  }\n\n  /**\n   * è®¾ç½®é»˜è®¤é¢„åŠ è½½å™¨\n   * Set default preloader\n   */\n  setDefault(name: string): boolean {\n    const preloader = this.preloaders.get(name);\n    if (preloader) {\n      this.defaultPreloader = preloader;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * ç§»é™¤é¢„åŠ è½½å™¨\n   * Remove preloader\n   */\n  remove(name: string): boolean {\n    const preloader = this.preloaders.get(name);\n    if (preloader) {\n      preloader.cleanup();\n      this.preloaders.delete(name);\n      if (this.defaultPreloader === preloader) {\n        this.defaultPreloader =\n          this.preloaders.values().next().value || undefined;\n      }\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * æ¸…ç†æ‰€æœ‰é¢„åŠ è½½å™¨\n   * Cleanup all preloaders\n   */\n  cleanup(): void {\n    this.preloaders.forEach((preloader) => {\n      preloader.cleanup();\n    });\n    this.preloaders.clear();\n    this.defaultPreloader = undefined;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰é¢„åŠ è½½å™¨çŠ¶æ€\n   * Get all preloader states\n   */\n  getAllStates(): Record<string, PreloadState> {\n    const states: Record<string, PreloadState> = {};\n    this.preloaders.forEach((preloader, name) => {\n      states[name] = preloader.getPreloadState();\n    });\n    return states;\n  }\n\n  /**\n   * åœæ­¢æ‰€æœ‰é¢„åŠ è½½\n   * Stop all preloading\n   */\n  stopAll(): void {\n    this.preloaders.forEach((preloader) => {\n      preloader.stopPreloading();\n    });\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader-utils/preloader-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-preloader.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Locale' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Messages' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PreloaderFactoryClass' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":44},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":90,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":90,"endColumn":49},{"ruleId":"no-restricted-syntax","severity":2,"message":"ğŸš« æ¶æ„é‡æ„æœŸé—´ç¦æ­¢æ–°å¢ export * é‡æ–°å¯¼å‡ºã€‚è¯·ä½¿ç”¨å‘½åå¯¼å‡ºï¼šexport { specificExport } from \"./module\"","line":91,"column":1,"nodeType":"ExportAllDeclaration","messageId":"restrictedSyntax","endLine":91,"endColumn":44}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å‘åå…¼å®¹çš„é‡æ–°å¯¼å‡º\nimport type { Locale, Messages } from '@/types/i18n';\nimport type { PreloadConfig } from '@/lib/i18n-cache-types';\nimport { TranslationPreloader } from '@/lib/i18n-preloader-core';\nimport {\n  createStrategyManager,\n  getRecommendedStrategy,\n  PreloadStrategies,\n  PreloadStrategyManager,\n  StrategyUtils,\n} from '@/lib/i18n-preloader-strategies';\nimport type {\n  IPreloader,\n  PreloaderConfig,\n  PreloaderEvents,\n  PreloaderFactory,\n  PreloaderMetrics,\n  PreloaderPlugin,\n  PreloadOptions,\n  PreloadResult,\n  PreloadState,\n  PreloadStats,\n  PreloadStrategy,\n} from '@/lib/i18n-preloader-types';\nimport {\n  cleanupPreloaders,\n  createTranslationPreloader,\n  getDefaultPreloader,\n  globalPreloaderFactory,\n  globalPreloaderManager,\n  PreloaderFactory as PreloaderFactoryClass,\n  PreloaderManager,\n  PreloaderUtils,\n  preloadLocale,\n  setupPreloader,\n  smartPreload,\n} from '@/lib/i18n-preloader-utils';\n\n/**\n * ç¿»è¯‘é¢„åŠ è½½å™¨ - ä¸»å…¥å£\n * Translation Preloader - Main Entry Point\n *\n * ç»Ÿä¸€çš„ç¿»è¯‘é¢„åŠ è½½å™¨å…¥å£ï¼Œæ•´åˆæ‰€æœ‰é¢„åŠ è½½ç›¸å…³åŠŸèƒ½\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½\nexport type {\n  PreloadOptions,\n  SmartPreloadConfig,\n  PreloadStrategyConfig,\n  PreloaderConfig,\n  PreloaderFactoryConfig,\n  IPreloader,\n  PreloadConfigKey,\n} from '@/lib/i18n-preloader-types';\nexport {\n  PRELOADER_CONSTANTS,\n  PRELOADER_EVENTS,\n  isPreloadResult,\n  isPreloadState,\n  isPreloaderError,\n} from '@/lib/i18n-preloader-types';\nexport type {\n  PreloaderStateManager,\n  PreloaderCache,\n  PreloaderNetwork,\n  PreloaderScheduler,\n  PreloaderMonitor,\n  PreloadStrategy,\n  PreloaderMiddleware,\n  PreloaderPlugin,\n  PreloaderError,\n  PreloaderTimeoutError,\n  PreloaderNetworkError,\n  PreloaderCacheError,\n} from '@/lib/i18n-preloader-types';\nexport type {\n  PreloadState,\n  PreloadStats,\n  PreloadResult,\n  BatchResult,\n  PreloaderMetrics,\n  PreloaderEvents,\n  PreloadEventHandler,\n  PreloadEventMap,\n  PreloadStateKey,\n  PreloadStatsKey,\n} from '@/lib/i18n-preloader-types';\nexport { TranslationPreloader as CorePreloader } from '@/lib/i18n-preloader-core';\nexport * from '@/lib/i18n-preloader-strategies';\nexport * from '@/lib/i18n-preloader-utils';\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type {\n  // æ ¸å¿ƒç±»å‹\n  TranslationPreloader as Preloader,\n  IPreloader as PreloaderInterface,\n  PreloadState as State,\n  PreloadStats as Stats,\n  PreloadResult as Result,\n  PreloadOptions as Options,\n\n  // é…ç½®ç±»å‹\n  PreloaderConfig as Config,\n  PreloadConfig as LegacyConfig,\n  // PreloaderFactoryConfig as FactoryConfig, // æ³¨é‡Šæ‰ä¸å­˜åœ¨çš„ç±»å‹\n\n  // ç­–ç•¥ç±»å‹\n  PreloadStrategy as Strategy,\n  PreloadStrategyManager as StrategyManager,\n\n  // å·¥å‚ç±»å‹\n  PreloaderFactory as Factory,\n  PreloaderManager as Manager,\n  PreloaderPlugin as Plugin,\n\n  // äº‹ä»¶ç±»å‹\n  PreloaderEvents as Events,\n  PreloaderMetrics as Metrics,\n};\n\n/**\n * å‘åå…¼å®¹çš„å¯¼å‡ºåˆ«å\n * Backward compatible export aliases\n */\nexport {\n  // æ ¸å¿ƒç±»\n  TranslationPreloader,\n\n  // ç­–ç•¥\n  PreloadStrategies,\n  PreloadStrategyManager,\n  createStrategyManager,\n  getRecommendedStrategy,\n  StrategyUtils,\n\n  // å·¥å‚å’Œç®¡ç†å™¨\n  // PreloaderFactoryClass as PreloaderFactory, // æ³¨é‡Šæ‰é‡å¤çš„å¯¼å‡º\n  PreloaderManager,\n  PreloaderUtils,\n\n  // å…¨å±€å®ä¾‹\n  globalPreloaderManager,\n  globalPreloaderFactory,\n\n  // ä¾¿æ·å‡½æ•°\n  createTranslationPreloader,\n  setupPreloader,\n  getDefaultPreloader,\n  preloadLocale,\n  smartPreload,\n  cleanupPreloaders,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/i18n-validation.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":48,"column":7,"nodeType":"MemberExpression","endLine":48,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":49,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":157,"column":13,"nodeType":"MemberExpression","endLine":157,"endColumn":54},{"ruleId":"max-params","severity":2,"message":"Function 'validateTranslationCompleteness' has too many parameters (5). Maximum allowed is 3.","line":208,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":208,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":216,"column":25,"nodeType":"MemberExpression","endLine":216,"endColumn":45},{"ruleId":"max-params","severity":2,"message":"Function 'validateTranslationQuality' has too many parameters (6). Maximum allowed is 3.","line":250,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":250,"endColumn":36},{"ruleId":"max-params","severity":2,"message":"Function 'checkUntranslatedContent' has too many parameters (5). Maximum allowed is 3.","line":283,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":283,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":292,"column":39,"nodeType":"MemberExpression","endLine":292,"endColumn":64},{"ruleId":"max-params","severity":2,"message":"Function 'checkPlaceholderConsistency' has too many parameters (5). Maximum allowed is 3.","line":308,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":308,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":317,"column":18,"nodeType":"MemberExpression","endLine":317,"endColumn":39}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ä¼ä¸šçº§å›½é™…åŒ–éªŒè¯å·¥å…·\n * æä¾›ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥ã€è´¨é‡éªŒè¯å’ŒåŒæ­¥æœºåˆ¶\n */\nimport { routing } from '@/i18n/routing';\nimport { ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nexport interface TranslationValidationResult {\n  isValid: boolean;\n  errors: TranslationError[];\n  warnings: TranslationWarning[];\n  coverage: number;\n  missingKeys: string[];\n  inconsistentKeys: string[];\n}\n\nexport interface TranslationError {\n  type: 'missing_key' | 'type_mismatch' | 'invalid_format' | 'empty_value';\n  key: string;\n  locale: string;\n  message: string;\n  severity: 'critical' | 'high' | 'medium' | 'low';\n}\n\nexport interface TranslationWarning {\n  type:\n    | 'untranslated'\n    | 'length_mismatch'\n    | 'format_inconsistency'\n    | 'placeholder_mismatch';\n  key: string;\n  locale: string;\n  message: string;\n  suggestion?: string;\n}\n\n/**\n * åŠ è½½æ‰€æœ‰è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶\n */\nasync function loadTranslations(\n  errors: TranslationError[],\n): Promise<Record<string, Record<string, unknown>>> {\n  const translations: Record<string, Record<string, unknown>> = {};\n\n  for (const locale of routing.locales) {\n    try {\n      const messages = await import(`../../messages/${locale}.json`);\n      translations[locale] = messages.default;\n    } catch (_error) {\n      errors.push({\n        type: 'missing_key',\n        key: 'translation_file',\n        locale,\n        message: `Translation file for locale ${locale} not found`,\n        severity: 'critical',\n      });\n    }\n  }\n\n  return translations;\n}\n\n/**\n * éªŒè¯ç¿»è¯‘æ–‡ä»¶çš„å®Œæ•´æ€§å’Œè´¨é‡\n */\nexport async function validateTranslations(): Promise<TranslationValidationResult> {\n  const errors: TranslationError[] = [];\n  const warnings: TranslationWarning[] = [];\n  const missingKeys: string[] = [];\n  const inconsistentKeys: string[] = [];\n\n  try {\n    const translations = await loadTranslations(errors);\n\n    // è·å–æ‰€æœ‰ç¿»è¯‘é”®\n    const allKeys = new Set<string>();\n    Object.values(translations).forEach((translation) => {\n      extractKeys(translation).forEach((key) => allKeys.add(key));\n    });\n\n    // éªŒè¯æ¯ä¸ªè¯­è¨€çš„ç¿»è¯‘å®Œæ•´æ€§\n    validateTranslationCompleteness(\n      translations,\n      allKeys,\n      errors,\n      warnings,\n      missingKeys,\n    );\n\n    // è®¡ç®—è¦†ç›–ç‡\n    const totalKeys = allKeys.size * routing.locales.length;\n    const missingCount = missingKeys.length;\n    const coverage =\n      totalKeys > ZERO ? ((totalKeys - missingCount) / totalKeys) * PERCENTAGE_FULL : PERCENTAGE_FULL;\n\n    return {\n      isValid:\n        errors.filter((e) => e.severity === 'critical' || e.severity === 'high')\n          .length === ZERO,\n      errors,\n      warnings,\n      coverage,\n      missingKeys,\n      inconsistentKeys,\n    };\n  } catch (error) {\n    return {\n      isValid: false,\n      errors: [\n        {\n          type: 'invalid_format',\n          key: 'validation',\n          locale: 'all',\n          message: `Validation failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n          severity: 'critical',\n        },\n      ],\n      warnings: [],\n      coverage: ZERO,\n      missingKeys: [],\n      inconsistentKeys: [],\n    };\n  }\n}\n\n/**\n * æå–å¯¹è±¡ä¸­çš„æ‰€æœ‰é”®è·¯å¾„\n */\nfunction extractKeys(obj: Record<string, unknown>, prefix = ''): string[] {\n  const keys: string[] = [];\n\n  for (const [key, value] of Object.entries(obj)) {\n    const fullKey = prefix ? `${prefix}.${key}` : key;\n\n    if (value && typeof value === 'object' && !Array.isArray(value)) {\n      keys.push(...extractKeys(value as Record<string, unknown>, fullKey));\n    } else {\n      keys.push(fullKey);\n    }\n  }\n\n  return keys;\n}\n\n/**\n * è·å–åµŒå¥—å¯¹è±¡çš„å€¼\n */\nfunction getNestedValue(obj: Record<string, unknown>, path: string): unknown {\n  return path\n    .split('.')\n    .reduce(\n      (current: Record<string, unknown> | unknown, key) =>\n        current &&\n        typeof current === 'object' &&\n        current !== null &&\n        !Array.isArray(current)\n          ? (current as Record<string, unknown>)[key]\n          : undefined,\n      obj,\n    );\n}\n\n/**\n * ç”Ÿæˆç¿»è¯‘è´¨é‡æŠ¥å‘Š\n */\nexport function generateTranslationReport(\n  result: TranslationValidationResult,\n): string {\n  const { isValid, errors, warnings, coverage, missingKeys } = result;\n\n  let report = '# ç¿»è¯‘è´¨é‡æŠ¥å‘Š\\n\\n';\n\n  report += `## æ€»ä½“çŠ¶æ€: ${isValid ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}\\n`;\n  report += `## è¦†ç›–ç‡: ${coverage.toFixed(ONE)}%\\n\\n`;\n\n  if (errors.length > ZERO) {\n    report += '## é”™è¯¯\\n\\n';\n    errors.forEach((error) => {\n      report += `- **${error.severity.toUpperCase()}**: ${error.message} (${error.locale}.${error.key})\\n`;\n    });\n    report += '\\n';\n  }\n\n  if (warnings.length > ZERO) {\n    report += '## è­¦å‘Š\\n\\n';\n    warnings.forEach((warning) => {\n      report += `- **${warning.type}**: ${warning.message} (${warning.locale}.${warning.key})\\n`;\n      if (warning.suggestion) {\n        report += `  å»ºè®®: ${warning.suggestion}\\n`;\n      }\n    });\n    report += '\\n';\n  }\n\n  if (missingKeys.length > ZERO) {\n    report += '## ç¼ºå¤±çš„ç¿»è¯‘é”®\\n\\n';\n    missingKeys.forEach((key) => {\n      report += `- ${key}\\n`;\n    });\n  }\n\n  return report;\n}\n\n/**\n * éªŒè¯ç¿»è¯‘å®Œæ•´æ€§\n */\nfunction validateTranslationCompleteness(\n  translations: Record<string, Record<string, unknown>>,\n  allKeys: Set<string>,\n  errors: TranslationError[],\n  warnings: TranslationWarning[],\n  missingKeys: string[],\n): void {\n  for (const locale of routing.locales) {\n    const translation = translations[locale];\n    if (!translation) continue;\n\n    const localeKeys = new Set(extractKeys(translation));\n\n    // æ£€æŸ¥ç¼ºå¤±çš„é”®\n    for (const key of allKeys) {\n      if (!localeKeys.has(key)) {\n        missingKeys.push(`${locale}.${key}`);\n        errors.push({\n          type: 'missing_key',\n          key,\n          locale,\n          message: `Missing translation for key: ${key}`,\n          severity: 'high',\n        });\n      }\n    }\n\n    // æ£€æŸ¥ç¿»è¯‘è´¨é‡\n    validateTranslationQuality(\n      translation,\n      locale,\n      localeKeys,\n      translations,\n      errors,\n      warnings,\n    );\n  }\n}\n\n/**\n * éªŒè¯ç¿»è¯‘è´¨é‡\n */\nfunction validateTranslationQuality(\n  translation: Record<string, unknown>,\n  locale: string,\n  localeKeys: Set<string>,\n  translations: Record<string, Record<string, unknown>>,\n  errors: TranslationError[],\n  warnings: TranslationWarning[],\n): void {\n  for (const key of localeKeys) {\n    const value = getNestedValue(translation, key);\n\n    // æ£€æŸ¥ç©ºå€¼\n    if (!value || (typeof value === 'string' && value.trim() === '')) {\n      errors.push({\n        type: 'empty_value',\n        key,\n        locale,\n        message: `Empty translation value for key: ${key}`,\n        severity: 'medium',\n      });\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æœªç¿»è¯‘ï¼ˆä¸å…¶ä»–è¯­è¨€ç›¸åŒï¼‰\n    if (typeof value === 'string') {\n      checkUntranslatedContent(value, key, locale, translations, warnings);\n      checkPlaceholderConsistency(value, key, locale, translations, warnings);\n    }\n  }\n}\n\n/**\n * æ£€æŸ¥æœªç¿»è¯‘å†…å®¹\n */\nfunction checkUntranslatedContent(\n  value: string,\n  key: string,\n  locale: string,\n  translations: Record<string, Record<string, unknown>>,\n  warnings: TranslationWarning[],\n): void {\n  const otherLocales = routing.locales.filter((l) => l !== locale);\n  for (const otherLocale of otherLocales) {\n    const otherValue = getNestedValue(translations[otherLocale] || {}, key);\n    if (value === otherValue && key !== 'home.title') {\n      warnings.push({\n        type: 'untranslated',\n        key,\n        locale,\n        message: `Possibly untranslated: same value as ${otherLocale}`,\n        suggestion: `Consider translating \"${value}\" to ${locale}`,\n      });\n    }\n  }\n}\n\n/**\n * æ£€æŸ¥å ä½ç¬¦ä¸€è‡´æ€§\n */\nfunction checkPlaceholderConsistency(\n  value: string,\n  key: string,\n  locale: string,\n  translations: Record<string, Record<string, unknown>>,\n  warnings: TranslationWarning[],\n): void {\n  const placeholders = value.match(/\\{[^}]+\\}/g) || [];\n  const referencePlaceholders = getNestedValue(\n    translations[routing.locales[ZERO]] || {},\n    key,\n  );\n  if (typeof referencePlaceholders === 'string') {\n    const refPlaceholders = referencePlaceholders.match(/\\{[^}]+\\}/g) || [];\n    if (placeholders.length !== refPlaceholders.length) {\n      warnings.push({\n        type: 'placeholder_mismatch',\n        key,\n        locale,\n        message: `Placeholder count mismatch: expected ${refPlaceholders.length}, got ${placeholders.length}`,\n        suggestion: `Ensure all placeholders are present: ${refPlaceholders.join(', ')}`,\n      });\n    }\n  }\n}\n\n/**\n * å®æ—¶ç¿»è¯‘åŒæ­¥æ£€æŸ¥\n */\nexport function createTranslationSyncChecker() {\n  let lastValidation: TranslationValidationResult | null = null;\n\n  return {\n    async check(): Promise<TranslationValidationResult> {\n      const result = await validateTranslations();\n      lastValidation = result;\n      return result;\n    },\n\n    getLastResult(): TranslationValidationResult | null {\n      return lastValidation;\n    },\n\n    isHealthy(): boolean {\n      return lastValidation?.isValid ?? false;\n    },\n\n    getCoverage(): number {\n      return lastValidation?.coverage ?? ZERO;\n    },\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detection-hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detection-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detector-base.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":94,"column":29,"nodeType":"MemberExpression","endLine":94,"endColumn":60},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":271,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":273,"endColumn":12},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":279,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":281,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":282,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":282,"endColumn":23}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å™¨åŸºç¡€æ–¹æ³•\n *\n * æä¾›æµè§ˆå™¨æ£€æµ‹ã€åœ°ç†ä½ç½®æ£€æµ‹ã€æ—¶åŒºæ£€æµ‹ç­‰åŸºç¡€æ£€æµ‹æ–¹æ³•\n */\n\nimport { DEFAULT_LOCALE, SUPPORTED_LOCALES } from '@/lib/locale-constants';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type { Locale } from '@/types/i18n';\nimport {\n  COUNTRY_CODE_TO_LOCALE_MAP,\n  DETECTION_TIMEOUTS,\n  GEO_API_CONFIG,\n  LANGUAGE_CODE_TO_LOCALE_MAP,\n  TIMEZONE_TO_LOCALE_MAP,\n} from '@/lib/locale-detector-constants';\n\n/**\n * åŸºç¡€è¯­è¨€æ£€æµ‹å™¨\n * Base locale detector with fundamental detection methods\n */\nexport class BaseLocaleDetector {\n  /**\n   * å®‰å…¨åœ°ä»è¯­è¨€æ˜ å°„ä¸­è·å–è¯­è¨€\n   * Safely get locale from language mapping\n   * ä½¿ç”¨ç™½åå•éªŒè¯ï¼Œé¿å… Object Injection Sink\n   */\n  protected getLocaleFromLanguageCode(\n    normalizedLang: string,\n  ): Locale | undefined {\n    if (!normalizedLang || typeof normalizedLang !== 'string') {\n      return undefined;\n    }\n\n    const locale = LANGUAGE_CODE_TO_LOCALE_MAP.get(\n      normalizedLang.toLowerCase(),\n    );\n    return locale && SUPPORTED_LOCALES.includes(locale) ? locale : undefined;\n  }\n\n  /**\n   * å®‰å…¨åœ°ä»åœ°ç†ä½ç½®æ˜ å°„ä¸­è·å–è¯­è¨€\n   * Safely get locale from geo mapping\n   * ä½¿ç”¨ç™½åå•éªŒè¯ï¼Œé¿å… Object Injection Sink\n   */\n  protected getLocaleFromCountryCode(\n    countryCode: string | undefined,\n  ): Locale | undefined {\n    if (!countryCode || typeof countryCode !== 'string') {\n      return undefined;\n    }\n\n    const locale = COUNTRY_CODE_TO_LOCALE_MAP.get(countryCode.toUpperCase());\n    return locale && SUPPORTED_LOCALES.includes(locale) ? locale : undefined;\n  }\n\n  /**\n   * å®‰å…¨åœ°ä»æ—¶åŒºæ˜ å°„ä¸­è·å–è¯­è¨€\n   * Safely get locale from timezone mapping\n   */\n  protected getLocaleFromTimeZone(\n    timeZone: string | undefined,\n  ): Locale | undefined {\n    if (!timeZone || typeof timeZone !== 'string') {\n      return undefined;\n    }\n\n    const locale = TIMEZONE_TO_LOCALE_MAP.get(timeZone);\n    return locale && SUPPORTED_LOCALES.includes(locale) ? locale : undefined;\n  }\n\n  /**\n   * ä»æµè§ˆå™¨æ£€æµ‹è¯­è¨€\n   * Detect locale from browser\n   */\n  detectFromBrowser(): Locale {\n    try {\n      if (typeof navigator === 'undefined') {\n        return DEFAULT_LOCALE;\n      }\n\n      const languages = navigator.languages || [navigator.language];\n\n      for (const lang of languages) {\n        const normalizedLang = lang.toLowerCase();\n        const detectedLocale = this.getLocaleFromLanguageCode(normalizedLang);\n\n        if (detectedLocale) {\n          return detectedLocale;\n        }\n\n        // å°è¯•æå–ä¸»è¦è¯­è¨€ä»£ç  (ä¾‹å¦‚: 'zh-CN' -> 'zh')\n        const primaryLang = normalizedLang.split('-')[ZERO];\n        const primaryLocale = this.getLocaleFromLanguageCode(primaryLang!);\n\n        if (primaryLocale) {\n          return primaryLocale;\n        }\n      }\n\n      return DEFAULT_LOCALE;\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Browser locale detection failed:', error);\n      }\n      return DEFAULT_LOCALE;\n    }\n  }\n\n  /**\n   * ä»åœ°ç†ä½ç½®æ£€æµ‹è¯­è¨€\n   * Detect locale from geolocation\n   */\n  async detectFromGeolocation(): Promise<Locale> {\n    try {\n      if (typeof navigator === 'undefined' || !navigator.geolocation) {\n        return DEFAULT_LOCALE;\n      }\n\n      return await new Promise<Locale>((resolve) => {\n        const timeoutId = setTimeout(() => {\n          resolve(DEFAULT_LOCALE);\n        }, DETECTION_TIMEOUTS.GEOLOCATION);\n\n        navigator.geolocation.getCurrentPosition(\n          async (position) => {\n            clearTimeout(timeoutId);\n            try {\n              const countryCode = await this.getCountryFromCoordinates(\n                position.coords.latitude,\n                position.coords.longitude,\n              );\n\n              const detectedLocale = this.getLocaleFromCountryCode(countryCode);\n              resolve(detectedLocale || DEFAULT_LOCALE);\n            } catch (error) {\n              if (process.env.NODE_ENV === 'development') {\n                console.warn('Geolocation API failed:', error);\n              }\n              resolve(DEFAULT_LOCALE);\n            }\n          },\n          (error) => {\n            clearTimeout(timeoutId);\n            if (process.env.NODE_ENV === 'development') {\n              console.warn('Geolocation permission denied or failed:', error);\n            }\n            resolve(DEFAULT_LOCALE);\n          },\n          {\n            timeout: DETECTION_TIMEOUTS.GEOLOCATION,\n            enableHighAccuracy: false,\n            maximumAge: COUNT_TEN * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 10åˆ†é’Ÿç¼“å­˜\n          },\n        );\n      });\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Geolocation detection failed:', error);\n      }\n      return DEFAULT_LOCALE;\n    }\n  }\n\n  /**\n   * ä»æ—¶åŒºæ£€æµ‹è¯­è¨€\n   * Detect locale from timezone\n   */\n  detectFromTimeZone(): Locale {\n    try {\n      if (typeof Intl === 'undefined' || !Intl.DateTimeFormat) {\n        return DEFAULT_LOCALE;\n      }\n\n      const { timeZone } = Intl.DateTimeFormat().resolvedOptions();\n      const detectedLocale = this.getLocaleFromTimeZone(timeZone);\n\n      return detectedLocale || DEFAULT_LOCALE;\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Timezone detection failed:', error);\n      }\n      return DEFAULT_LOCALE;\n    }\n  }\n\n  /**\n   * ä»IPåœ°å€æ£€æµ‹è¯­è¨€\n   * Detect locale from IP address\n   */\n  async detectFromIP(): Promise<Locale> {\n    try {\n      const countryCode = await this.getCountryFromIP();\n      const detectedLocale = this.getLocaleFromCountryCode(countryCode);\n\n      return detectedLocale || DEFAULT_LOCALE;\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('IP-based detection failed:', error);\n      }\n      return DEFAULT_LOCALE;\n    }\n  }\n\n  /**\n   * æ ¹æ®åæ ‡è·å–å›½å®¶ä»£ç \n   * Get country code from coordinates\n   */\n  private async getCountryFromCoordinates(\n    lat: number,\n    lng: number,\n  ): Promise<string | undefined> {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(\n      () => controller.abort(),\n      DETECTION_TIMEOUTS.NETWORK_REQUEST,\n    );\n\n    try {\n      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨çœŸå®çš„åœ°ç†ä½ç½®API\n      // ä¾‹å¦‚: Google Geocoding API, OpenStreetMap Nominatim, ç­‰\n      const response = await fetch(\n        `https://api.example.com/geo?lat=${lat}&lng=${lng}`,\n        {\n          signal: controller.signal,\n          headers: {\n            Accept: 'application/json',\n          },\n        },\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data.country || data.country_code || data.countryCode;\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new Error('Geolocation API request timeout');\n      }\n      throw error;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  /**\n   * æ ¹æ®IPåœ°å€è·å–å›½å®¶ä»£ç \n   * Get country code from IP address\n   */\n  private async getCountryFromIP(): Promise<string | undefined> {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(\n      () => controller.abort(),\n      DETECTION_TIMEOUTS.NETWORK_REQUEST,\n    );\n\n    try {\n      // å°è¯•å¤šä¸ªIPåœ°ç†ä½ç½®API\n      for (const endpoint of GEO_API_CONFIG.ENDPOINTS) {\n        try {\n          const response = await fetch(endpoint, {\n            signal: controller.signal,\n            headers: {\n              Accept: 'application/json',\n            },\n          });\n\n          if (!response.ok) {\n            continue; // å°è¯•ä¸‹ä¸€ä¸ªç«¯ç‚¹\n          }\n\n          const data = await response.json();\n          const countryCode =\n            data.country || data.country_code || data.countryCode;\n\n          if (countryCode) {\n            return countryCode;\n          }\n        } catch (error) {\n          // ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªç«¯ç‚¹\n          continue;\n        }\n      }\n\n      throw new Error('All IP geolocation endpoints failed');\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new Error('IP geolocation request timeout');\n      }\n      throw error;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  /**\n   * éªŒè¯æ£€æµ‹åˆ°çš„è¯­è¨€æ˜¯å¦å—æ”¯æŒ\n   * Validate if detected locale is supported\n   */\n  protected validateLocale(locale: Locale | undefined): Locale {\n    return locale && SUPPORTED_LOCALES.includes(locale)\n      ? locale\n      : DEFAULT_LOCALE;\n  }\n\n  /**\n   * è·å–æµè§ˆå™¨æ”¯æŒçš„è¯­è¨€åˆ—è¡¨\n   * Get browser supported languages\n   */\n  getBrowserLanguages(): string[] {\n    try {\n      if (typeof navigator === 'undefined') {\n        return [];\n      }\n\n      return navigator.languages\n        ? Array.from(navigator.languages)\n        : [navigator.language];\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Failed to get browser languages:', error);\n      }\n      return [];\n    }\n  }\n\n  /**\n   * è·å–å½“å‰æ—¶åŒºä¿¡æ¯\n   * Get current timezone info\n   */\n  getTimeZoneInfo(): { timeZone: string; offset: number } | null {\n    try {\n      if (typeof Intl === 'undefined' || !Intl.DateTimeFormat) {\n        return null;\n      }\n\n      const { timeZone } = Intl.DateTimeFormat().resolvedOptions();\n      const offset = new Date().getTimezoneOffset();\n\n      return { timeZone, offset };\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Failed to get timezone info:', error);\n      }\n      return null;\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detector-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detector-smart.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-detector-constants' import is duplicated.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":42},{"ruleId":"max-statements","severity":2,"message":"Method 'analyzeBestLocale' has too many statements (29). Maximum allowed is 20.","line":223,"column":28,"nodeType":"FunctionExpression","messageId":"exceed","endLine":310,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":306,"column":13,"nodeType":"MemberExpression","endLine":306,"endColumn":30},{"ruleId":"max-statements","severity":2,"message":"Method 'getDetectionQuality' has too many statements (22). Maximum allowed is 20.","line":363,"column":22,"nodeType":"FunctionExpression","messageId":"exceed","endLine":405,"endColumn":4}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ™ºèƒ½è¯­è¨€æ£€æµ‹ç®—æ³•\n *\n * æä¾›ç»¼åˆæ£€æµ‹é€»è¾‘ã€ç½®ä¿¡åº¦è®¡ç®—ã€ç»“æœåˆ†æç­‰æ™ºèƒ½æ£€æµ‹åŠŸèƒ½\n */\n\nimport { DEC_0_05, MAGIC_0_1, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { ONE, ZERO  } from '@/constants';\n\nimport { DEFAULT_LOCALE, SUPPORTED_LOCALES } from '@/lib/locale-constants';\nimport type { LocaleDetectionResult } from '@/lib/locale-detection-types';\nimport { BaseLocaleDetector } from '@/lib/locale-detector-base';\nimport type { DetectionSource } from '@/lib/locale-detector-constants';\nimport { LocaleStorageManager } from '@/lib/locale-storage';\nimport { logger } from '@/lib/logger';\nimport type { Locale } from '@/types/i18n';\nimport {\n  CONFIDENCE_WEIGHTS,\n  DETECTION_SOURCES,\n  QUALITY_THRESHOLDS,\n} from '@/lib/locale-detector-constants';\n\n/**\n * æ£€æµ‹ç»“æœæ¥å£\n * Detection result interface\n */\ninterface DetectionResult {\n  locale: Locale;\n  source: DetectionSource;\n  weight: number;\n  confidence: number;\n}\n\n/**\n * æ™ºèƒ½è¯­è¨€æ£€æµ‹å™¨\n * Smart locale detector with advanced algorithms\n */\nexport class SmartLocaleDetector extends BaseLocaleDetector {\n  /**\n   * æ™ºèƒ½æ£€æµ‹ç”¨æˆ·è¯­è¨€åå¥½\n   * Smart detection of user locale preference\n   */\n  async detectSmartLocale(): Promise<LocaleDetectionResult> {\n    // 1. æ£€æŸ¥ç”¨æˆ·æ‰‹åŠ¨è®¾ç½® (æœ€é«˜ä¼˜å…ˆçº§)\n    const userOverride = LocaleStorageManager.getUserOverride();\n    if (userOverride && SUPPORTED_LOCALES.includes(userOverride)) {\n      return {\n        locale: userOverride,\n        source: DETECTION_SOURCES.USER,\n        confidence: CONFIDENCE_WEIGHTS.USER_OVERRIDE,\n        details: { userOverride },\n      };\n    }\n\n    // 2. æ£€æŸ¥å­˜å‚¨çš„ç”¨æˆ·åå¥½\n    const userPreference = LocaleStorageManager.getUserPreference();\n    if (userPreference && SUPPORTED_LOCALES.includes(userPreference.locale)) {\n      return {\n        locale: userPreference.locale,\n        source: DETECTION_SOURCES.STORED,\n        confidence:\n          userPreference.confidence || CONFIDENCE_WEIGHTS.STORED_PREFERENCE,\n        details: { userOverride: userPreference.locale },\n      };\n    }\n\n    // 3. æ”¶é›†æ‰€æœ‰æ£€æµ‹ç»“æœ\n    const detectionResults = await this.collectAllDetectionResults();\n\n    // 4. å¦‚æœæ²¡æœ‰ä»»ä½•æ£€æµ‹ç»“æœï¼Œè¿”å›é»˜è®¤è¯­è¨€\n    if (detectionResults.length === ZERO) {\n      return {\n        locale: DEFAULT_LOCALE,\n        source: DETECTION_SOURCES.DEFAULT,\n        confidence: CONFIDENCE_WEIGHTS.DEFAULT_FALLBACK,\n        details: { fallbackUsed: true },\n      };\n    }\n\n    // 5. åˆ†ææ£€æµ‹ç»“æœå¹¶é€‰æ‹©æœ€ä½³è¯­è¨€\n    const bestResult = this.analyzeBestLocale(detectionResults);\n\n    return bestResult;\n  }\n\n  /**\n   * æ£€æµ‹æœ€ä½³è¯­è¨€åå¥½ (å…¼å®¹æ–¹æ³•å)\n   * Detect best locale preference (compatibility method)\n   */\n  async detectBestLocale(): Promise<LocaleDetectionResult> {\n    // 1. æ£€æŸ¥å­˜å‚¨çš„ç”¨æˆ·åå¥½\n    const userPreference = LocaleStorageManager.getUserPreference();\n    if (userPreference && SUPPORTED_LOCALES.includes(userPreference.locale)) {\n      return {\n        locale: userPreference.locale,\n        source: DETECTION_SOURCES.STORED,\n        confidence:\n          userPreference.confidence || CONFIDENCE_WEIGHTS.STORED_PREFERENCE,\n        details: { userOverride: userPreference.locale },\n      };\n    }\n\n    // 2. æ£€æŸ¥ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®\n    const userOverride = LocaleStorageManager.getUserOverride();\n    if (userOverride && SUPPORTED_LOCALES.includes(userOverride)) {\n      return {\n        locale: userOverride,\n        source: DETECTION_SOURCES.USER,\n        confidence: CONFIDENCE_WEIGHTS.USER_OVERRIDE,\n        details: { userOverride },\n      };\n    }\n\n    // 3. æŒ‰ä¼˜å…ˆçº§é€ä¸ªæ£€æµ‹\n    const geoLocale = await this.detectFromGeolocation();\n    if (geoLocale !== DEFAULT_LOCALE) {\n      return {\n        locale: geoLocale,\n        source: DETECTION_SOURCES.GEO,\n        confidence: CONFIDENCE_WEIGHTS.GEOLOCATION,\n        details: { geoLocale },\n      };\n    }\n\n    const browserLocale = this.detectFromBrowser();\n    if (browserLocale !== DEFAULT_LOCALE) {\n      return {\n        locale: browserLocale,\n        source: DETECTION_SOURCES.BROWSER,\n        confidence: CONFIDENCE_WEIGHTS.BROWSER_LANGUAGE,\n        details: { browserLocale },\n      };\n    }\n\n    // 4. ä½¿ç”¨é»˜è®¤è¯­è¨€\n    return {\n      locale: DEFAULT_LOCALE,\n      source: DETECTION_SOURCES.DEFAULT,\n      confidence: CONFIDENCE_WEIGHTS.DEFAULT_FALLBACK,\n      details: { fallbackUsed: true },\n    };\n  }\n\n  /**\n   * æ”¶é›†æ‰€æœ‰æ£€æµ‹ç»“æœ\n   * Collect all detection results\n   */\n  private async collectAllDetectionResults(): Promise<DetectionResult[]> {\n    const results: DetectionResult[] = [];\n\n    try {\n      // å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰æ£€æµ‹æ–¹æ³•\n      const [geoLocale, browserLocale, timeZoneLocale, ipLocale] =\n        await Promise.allSettled([\n          this.detectFromGeolocation(),\n          Promise.resolve(this.detectFromBrowser()),\n          Promise.resolve(this.detectFromTimeZone()),\n          this.detectFromIP(),\n        ]);\n\n      // å¤„ç†åœ°ç†ä½ç½®æ£€æµ‹ç»“æœ\n      if (\n        geoLocale.status === 'fulfilled' &&\n        geoLocale.value !== DEFAULT_LOCALE\n      ) {\n        results.push({\n          locale: geoLocale.value,\n          source: DETECTION_SOURCES.GEO,\n          weight: CONFIDENCE_WEIGHTS.GEOLOCATION,\n          confidence: CONFIDENCE_WEIGHTS.GEOLOCATION,\n        });\n      }\n\n      // å¤„ç†æµè§ˆå™¨è¯­è¨€æ£€æµ‹ç»“æœ\n      if (\n        browserLocale.status === 'fulfilled' &&\n        browserLocale.value !== DEFAULT_LOCALE\n      ) {\n        results.push({\n          locale: browserLocale.value,\n          source: DETECTION_SOURCES.BROWSER,\n          weight: CONFIDENCE_WEIGHTS.BROWSER_LANGUAGE,\n          confidence: CONFIDENCE_WEIGHTS.BROWSER_LANGUAGE,\n        });\n      }\n\n      // å¤„ç†æ—¶åŒºæ£€æµ‹ç»“æœ\n      if (\n        timeZoneLocale.status === 'fulfilled' &&\n        timeZoneLocale.value !== DEFAULT_LOCALE\n      ) {\n        results.push({\n          locale: timeZoneLocale.value,\n          source: DETECTION_SOURCES.TIMEZONE,\n          weight: CONFIDENCE_WEIGHTS.TIMEZONE,\n          confidence: CONFIDENCE_WEIGHTS.TIMEZONE,\n        });\n      }\n\n      // å¤„ç†IPæ£€æµ‹ç»“æœ\n      if (\n        ipLocale.status === 'fulfilled' &&\n        ipLocale.value !== DEFAULT_LOCALE\n      ) {\n        results.push({\n          locale: ipLocale.value,\n          source: DETECTION_SOURCES.GEO, // IPæ£€æµ‹å½’ç±»ä¸ºåœ°ç†ä½ç½®æ£€æµ‹\n          weight: CONFIDENCE_WEIGHTS.GEOLOCATION * MAGIC_0_8, // IPæ£€æµ‹æƒé‡ç•¥ä½äºGPS\n          confidence: CONFIDENCE_WEIGHTS.GEOLOCATION * MAGIC_0_8,\n        });\n      }\n    } catch (error) {\n      logger.warn('Error collecting detection results:', error);\n    }\n\n    return results;\n  }\n\n  /**\n   * åˆ†ææœ€ä½³è¯­è¨€é€‰æ‹©\n   * Analyze best locale choice\n   */\n  private analyzeBestLocale(\n    detectionResults: DetectionResult[],\n  ): LocaleDetectionResult {\n    // ç»Ÿè®¡æ¯ç§è¯­è¨€çš„å‡ºç°æ¬¡æ•°å’Œæƒé‡\n    const localeStats = new Map<\n      Locale,\n      {\n        count: number;\n        totalWeight: number;\n        sources: DetectionSource[];\n        maxConfidence: number;\n      }\n    >();\n\n    for (const result of detectionResults) {\n      const current = localeStats.get(result.locale) || {\n        count: ZERO,\n        totalWeight: ZERO,\n        sources: [],\n        maxConfidence: ZERO,\n      };\n\n      current.count += ONE;\n      current.totalWeight += result.weight;\n      current.sources.push(result.source);\n      current.maxConfidence = Math.max(\n        current.maxConfidence,\n        result.confidence,\n      );\n\n      localeStats.set(result.locale, current);\n    }\n\n    // è®¡ç®—æ¯ç§è¯­è¨€çš„ç»¼åˆå¾—åˆ†\n    let bestLocale = DEFAULT_LOCALE;\n    let bestScore = ZERO;\n    let bestSources: DetectionSource[] = [];\n    let bestConfidence: number = CONFIDENCE_WEIGHTS.DEFAULT_FALLBACK;\n\n    for (const [locale, stats] of localeStats.entries()) {\n      // ç»¼åˆå¾—åˆ† = æƒé‡æ€»å’Œ + ä¸€è‡´æ€§å¥–åŠ±\n      const consistencyBonus =\n        stats.count > ONE ? QUALITY_THRESHOLDS.CONSISTENCY_BONUS : ZERO;\n      const score = stats.totalWeight + consistencyBonus;\n\n      if (score > bestScore) {\n        bestScore = score;\n        bestLocale = locale;\n        bestSources = stats.sources;\n\n        // è®¡ç®—æœ€ç»ˆç½®ä¿¡åº¦\n        const baseConfidence = Math.min(\n          stats.totalWeight / detectionResults.length,\n          QUALITY_THRESHOLDS.HIGH_CONFIDENCE,\n        );\n        bestConfidence = Math.min(baseConfidence + consistencyBonus, ONE);\n      }\n    }\n\n    // æ„å»ºè¯¦ç»†ä¿¡æ¯\n    const details: Record<string, string | number | boolean> = {};\n    for (const result of detectionResults) {\n      if (result.source === DETECTION_SOURCES.GEO) {\n        details.geoLocale = result.locale;\n      } else if (result.source === DETECTION_SOURCES.BROWSER) {\n        details.browserLocale = result.locale;\n      } else if (result.source === DETECTION_SOURCES.TIMEZONE) {\n        details.timeZoneLocale = result.locale;\n      }\n    }\n\n    // æ·»åŠ ç»Ÿè®¡ä¿¡æ¯\n    details.detectionStats = JSON.stringify({\n      totalSources: detectionResults.length,\n      consistentSources: localeStats.get(bestLocale)?.count || ZERO,\n      score: bestScore,\n    });\n\n    return {\n      locale: bestLocale,\n      source:\n        bestSources.length > QUALITY_THRESHOLDS.MIN_SOURCES_FOR_COMBINED\n          ? DETECTION_SOURCES.COMBINED\n          : bestSources[ZERO] || DETECTION_SOURCES.DEFAULT,\n      confidence: bestConfidence,\n      details,\n    };\n  }\n\n  /**\n   * å¿«é€Ÿæ£€æµ‹è¯­è¨€ (ä»…ä½¿ç”¨æœ¬åœ°æ–¹æ³•)\n   * Quick locale detection (local methods only)\n   */\n  detectQuickLocale(): LocaleDetectionResult {\n    // 1. æ£€æŸ¥ç”¨æˆ·è®¾ç½®\n    const userOverride = LocaleStorageManager.getUserOverride();\n    if (userOverride && SUPPORTED_LOCALES.includes(userOverride)) {\n      return {\n        locale: userOverride,\n        source: DETECTION_SOURCES.USER,\n        confidence: CONFIDENCE_WEIGHTS.USER_OVERRIDE,\n        details: { userOverride },\n      };\n    }\n\n    // 2. æ£€æŸ¥æµè§ˆå™¨è¯­è¨€\n    const browserLocale = this.detectFromBrowser();\n    if (browserLocale !== DEFAULT_LOCALE) {\n      return {\n        locale: browserLocale,\n        source: DETECTION_SOURCES.BROWSER,\n        confidence: CONFIDENCE_WEIGHTS.BROWSER_LANGUAGE,\n        details: { browserLocale },\n      };\n    }\n\n    // 3. æ£€æŸ¥æ—¶åŒº\n    const timeZoneLocale = this.detectFromTimeZone();\n    if (timeZoneLocale !== DEFAULT_LOCALE) {\n      return {\n        locale: timeZoneLocale,\n        source: DETECTION_SOURCES.TIMEZONE,\n        confidence: CONFIDENCE_WEIGHTS.TIMEZONE,\n        details: { timeZoneLocale },\n      };\n    }\n\n    // 4. è¿”å›é»˜è®¤è¯­è¨€\n    return {\n      locale: DEFAULT_LOCALE,\n      source: DETECTION_SOURCES.DEFAULT,\n      confidence: CONFIDENCE_WEIGHTS.DEFAULT_FALLBACK,\n      details: { fallbackUsed: true },\n    };\n  }\n\n  /**\n   * è·å–æ£€æµ‹è´¨é‡è¯„ä¼°\n   * Get detection quality assessment\n   */\n  getDetectionQuality(result: LocaleDetectionResult): {\n    quality: 'high' | 'medium' | 'low';\n    reliability: number;\n    recommendations: string[];\n  } {\n    const { confidence, source, details } = result;\n    const recommendations: string[] = [];\n\n    // è¯„ä¼°è´¨é‡ç­‰çº§\n    let quality: 'high' | 'medium' | 'low';\n    if (confidence >= QUALITY_THRESHOLDS.HIGH_CONFIDENCE) {\n      quality = 'high';\n    } else if (confidence >= QUALITY_THRESHOLDS.MEDIUM_CONFIDENCE) {\n      quality = 'medium';\n    } else {\n      quality = 'low';\n    }\n\n    // è®¡ç®—å¯é æ€§\n    let reliability = confidence;\n    if (source === DETECTION_SOURCES.COMBINED) {\n      reliability += MAGIC_0_1; // ç»„åˆæ£€æµ‹æ›´å¯é \n    }\n    if ((details?.detectionStats?.consistentSources ?? ZERO) > ONE) {\n      reliability += DEC_0_05; // ä¸€è‡´æ€§æ£€æµ‹æ›´å¯é \n    }\n    reliability = Math.min(reliability, ONE);\n\n    // ç”Ÿæˆå»ºè®®\n    if (quality === 'low') {\n      recommendations.push('å»ºè®®ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©è¯­è¨€');\n      recommendations.push('å¯ä»¥å°è¯•å¯ç”¨åœ°ç†ä½ç½®æƒé™ä»¥æé«˜æ£€æµ‹å‡†ç¡®æ€§');\n    }\n    if (source === DETECTION_SOURCES.DEFAULT) {\n      recommendations.push('æ£€æµ‹å¤±è´¥ï¼Œä½¿ç”¨äº†é»˜è®¤è¯­è¨€');\n      recommendations.push('å»ºè®®æ£€æŸ¥æµè§ˆå™¨è¯­è¨€è®¾ç½®');\n    }\n    if (!details?.geoLocale && quality !== 'high') {\n      recommendations.push('åœ°ç†ä½ç½®æ£€æµ‹æœªæˆåŠŸï¼Œå¯èƒ½å½±å“å‡†ç¡®æ€§');\n    }\n\n    return { quality, reliability, recommendations };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-detector.ts","messages":[{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":65,"column":10,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":65,"endColumn":44,"suggestions":[{"messageId":"removeAwait","fix":{"range":[1731,1737],"text":""},"desc":"Remove redundant `await`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å¯¼å…¥ä¸»è¦åŠŸèƒ½ç±»\nimport type { LocaleDetectionResult } from '@/lib/locale-detection-types';\nimport { BaseLocaleDetector } from '@/lib/locale-detector-base';\nimport { SmartLocaleDetector as SmartDetector } from '@/lib/locale-detector-smart';\n\n/**\n * è¯­è¨€æ£€æµ‹å™¨ - ä¸»å…¥å£æ–‡ä»¶\n * Locale Detector - Main Entry Point\n *\n * ç»Ÿä¸€çš„è¯­è¨€æ£€æµ‹ç®¡ç†æ¥å£ï¼Œæ•´åˆæ‰€æœ‰å­æ¨¡å—åŠŸèƒ½\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„ç±»å‹å’ŒåŠŸèƒ½\nexport {\n  CHINESE_LANGUAGE_CODES,\n  ENGLISH_LANGUAGE_CODES,\n  LANGUAGE_CODE_TO_LOCALE_MAP,\n  CHINESE_COUNTRY_CODES,\n  ENGLISH_COUNTRY_CODES,\n  COUNTRY_CODE_TO_LOCALE_MAP,\n  CHINESE_TIME_ZONES,\n  ENGLISH_TIME_ZONES,\n  TIMEZONE_TO_LOCALE_MAP,\n  DETECTION_TIMEOUTS,\n  CONFIDENCE_WEIGHTS,\n  DETECTION_SOURCES,\n  GEO_API_CONFIG,\n  QUALITY_THRESHOLDS,\n} from '@/lib/locale-detector-constants';\nexport type { DetectionSource } from '@/lib/locale-detector-constants';\nexport { BaseLocaleDetector } from '@/lib/locale-detector-base';\nexport { SmartLocaleDetector as SmartDetector } from '@/lib/locale-detector-smart';\n\n/**\n * æ™ºèƒ½è¯­è¨€æ£€æµ‹å™¨ - å‘åå…¼å®¹çš„ä¸»ç±»\n * Smart Locale Detector - Backward compatible main class\n */\nexport class SmartLocaleDetector extends SmartDetector {\n  // å‘åå…¼å®¹çš„æ–¹æ³• - ç»§æ‰¿è‡ªSmartDetectorï¼Œæ— éœ€é‡æ–°å®ç°\n}\n// ==================== ä¾¿æ·å¯¼å‡ºå’Œå·¥å‚å‡½æ•° ====================\n\n/**\n * åˆ›å»ºæ™ºèƒ½è¯­è¨€æ£€æµ‹å™¨å®ä¾‹\n * Create smart locale detector instance\n */\nexport function createSmartLocaleDetector(): SmartLocaleDetector {\n  return new SmartLocaleDetector();\n}\n\n/**\n * åˆ›å»ºåŸºç¡€è¯­è¨€æ£€æµ‹å™¨å®ä¾‹\n * Create base locale detector instance\n */\nexport function createBaseLocaleDetector(): BaseLocaleDetector {\n  return new BaseLocaleDetector();\n}\n\n/**\n * å¿«é€Ÿæ£€æµ‹å½“å‰ç”¨æˆ·è¯­è¨€\n * Quick detection of current user locale\n */\nexport async function detectCurrentLocale(): Promise<LocaleDetectionResult> {\n  const detector = new SmartLocaleDetector();\n  return await detector.detectSmartLocale();\n}\n\n/**\n * å¿«é€Ÿæ£€æµ‹å½“å‰ç”¨æˆ·è¯­è¨€ (ä»…æœ¬åœ°æ–¹æ³•)\n * Quick detection of current user locale (local methods only)\n */\nexport function detectCurrentLocaleSync(): LocaleDetectionResult {\n  const detector = new SmartLocaleDetector();\n  return detector.detectQuickLocale();\n}\n\n// ==================== é»˜è®¤å¯¼å‡º ====================\n\n/**\n * é»˜è®¤å¯¼å‡ºæ™ºèƒ½è¯­è¨€æ£€æµ‹å™¨\n * Default export smart locale detector\n */\nexport default SmartLocaleDetector;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-analytics-core.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":23,"endColumn":37},{"ruleId":"complexity","severity":1,"message":"Function 'calculateStorageStats' has a complexity of 28. Maximum allowed is 20.","line":31,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":88,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1023,1026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1023,1026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1159,1162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1159,1162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1249,1252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1249,1252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1676,1679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1676,1679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":85,"column":20,"nodeType":"MemberExpression","endLine":85,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'calculateLocaleDistribution' is defined but never used. Allowed unused vars must match /^_/u.","line":94,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3146,3149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3146,3149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3179,3182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3179,3182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":106,"column":5,"nodeType":"MemberExpression","endLine":106,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":106,"column":29,"nodeType":"MemberExpression","endLine":106,"endColumn":49},{"ruleId":"max-statements","severity":2,"message":"Function 'calculateHealthCheck' has too many statements (26). Maximum allowed is 20.","line":146,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":242,"endColumn":2},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'generateHealthRecommendations' is defined but never used. Allowed unused vars must match /^_/u.","line":306,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":306,"endColumn":39}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨åˆ†ææ ¸å¿ƒåŠŸèƒ½\n * Locale Storage Analytics Core Functions\n *\n * è´Ÿè´£æ ¸å¿ƒç»Ÿè®¡ä¿¡æ¯æ”¶é›†å’Œå¥åº·æ£€æŸ¥åŠŸèƒ½\n */\n\n'use client';\n\nimport { DEC_0_4, MAGIC_0_1, MAGIC_0_2, MAGIC_0_3, MAGIC_0_5, MAGIC_0_6, MAGIC_0_7, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { estimateStorageSize } from '@/lib/locale-storage-types';\nimport type {\n  ErrorType,\n  LocaleDetectionHistory,\n  PriorityLevel,\n  StorageHealthCheck,\n  StorageOperationResult,\n  StorageStats,\n} from '@/lib/locale-storage-types';\n\n// ==================== æ ¸å¿ƒç»Ÿè®¡åŠŸèƒ½ ====================\n\n/**\n * è®¡ç®—å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯\n * Calculate storage statistics\n */\nexport function calculateStorageStats(): StorageStats {\n  const now = Date.now();\n\n  // è·å–æ‰€æœ‰å­˜å‚¨çš„æ•°æ®\n  const userPreference = LocalStorageManager.get(\n    'user-locale-preference',\n  ) as any;\n  const detectionHistory = (LocalStorageManager.get(\n    'locale-detection-history',\n  ) || { history: [], lastUpdated: ZERO }) as any;\n  const fallbackLocale = (LocalStorageManager.get('fallback-locale') ||\n    'en') as any;\n\n  // è®¡ç®—å­˜å‚¨å¤§å°\n  const userPreferenceSize = estimateStorageSize(userPreference);\n  const historySize = estimateStorageSize(detectionHistory);\n  const fallbackSize = estimateStorageSize(fallbackLocale);\n  const totalSize = userPreferenceSize + historySize + fallbackSize;\n\n  // è®¡ç®—å†å²è®°å½•ç»Ÿè®¡\n  const historyCount = detectionHistory?.history?.length || ZERO;\n  const uniqueLocales = new Set(\n    detectionHistory?.history?.map((h: any) => h.detectedLocale) || [],\n  ).size;\n\n  // è®¡ç®—æœ€è¿‘æ´»åŠ¨\n  const lastActivity = Math.max(\n    userPreference?.lastUpdated || ZERO,\n    detectionHistory?.lastUpdated || ZERO,\n    fallbackLocale?.lastUpdated || ZERO,\n  );\n\n  // è®¡ç®—æ•°æ®æ–°é²œåº¦ (0-1, 1è¡¨ç¤ºæœ€æ–°)\n  const maxAge = DAYS_PER_WEEK * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // 7å¤©\n  const dataAge = now - lastActivity;\n  const freshness = Math.max(ZERO, ONE - dataAge / maxAge);\n\n  return {\n    totalEntries:\n      (userPreference ? ONE : ZERO) +\n      (detectionHistory ? ONE : ZERO) +\n      (fallbackLocale ? ONE : ZERO),\n    totalSize,\n    lastAccessed: lastActivity,\n    lastModified: lastActivity,\n    accessCount: ZERO, // éœ€è¦ä»å…¶ä»–åœ°æ–¹è·å–\n    errorCount: ZERO, // éœ€è¦ä»å…¶ä»–åœ°æ–¹è·å–\n    freshness,\n    hasOverride: userPreference?.source === 'user_override' || false,\n    historyStats: {\n      totalEntries: historyCount,\n      uniqueLocales,\n      oldestEntry:\n        detectionHistory?.history?.[historyCount - ONE]?.timestamp || ZERO,\n      newestEntry: detectionHistory?.history?.[ZERO]?.timestamp || ZERO,\n    },\n  };\n}\n\n/**\n * è®¡ç®—è¯­è¨€åˆ†å¸ƒ\n * Calculate locale distribution\n */\nfunction calculateLocaleDistribution(\n  detectionHistory: LocaleDetectionHistory | null,\n): Record<string, number> {\n  if (!detectionHistory?.history) {\n    return {};\n  }\n\n  const distribution: Record<string, number> = {};\n\n  for (const entry of detectionHistory.history) {\n    const locale =\n      (entry as any).detectedLocale || (entry as any).locale || 'unknown';\n    distribution[locale] = (distribution[locale] || ZERO) + ONE;\n  }\n\n  return distribution;\n}\n\n/**\n * è·å–å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯\n * Get storage statistics\n */\nexport function getStorageStats(): StorageOperationResult<StorageStats> {\n  const startTime = Date.now();\n\n  try {\n    const stats = calculateStorageStats();\n\n    return {\n      success: true,\n      data: stats,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n// ==================== å¥åº·æ£€æŸ¥åŠŸèƒ½ ====================\n\n/**\n * è®¡ç®—å¥åº·æ£€æŸ¥ç»“æœ\n * Calculate health check results\n */\nexport function calculateHealthCheck(): StorageHealthCheck {\n  const stats = calculateStorageStats();\n  const availability = checkStorageAvailability();\n\n  // è®¡ç®—å¥åº·åˆ†æ•° (0-1)\n  let healthScore = ONE;\n  const issues: Array<{\n    type: ErrorType;\n    severity: PriorityLevel;\n    message: string;\n    timestamp: number;\n  }> = [];\n\n  // æ£€æŸ¥å­˜å‚¨å¯ç”¨æ€§\n  if (!availability.localStorageAvailable) {\n    healthScore -= DEC_0_4;\n    issues.push({\n      type: 'access_denied',\n      severity: 'high',\n      message: 'localStorageä¸å¯ç”¨',\n      timestamp: Date.now(),\n    });\n  }\n\n  if (!availability.cookiesAvailable) {\n    healthScore -= MAGIC_0_2;\n    issues.push({\n      type: 'access_denied',\n      severity: 'medium',\n      message: 'Cookiesä¸å¯ç”¨',\n      timestamp: Date.now(),\n    });\n  }\n\n  // æ£€æŸ¥æ•°æ®æ–°é²œåº¦\n  if (stats.freshness < MAGIC_0_5) {\n    healthScore -= MAGIC_0_2;\n    issues.push({\n      type: 'validation_error',\n      severity: 'medium',\n      message: 'æ•°æ®è¿‡æœŸ',\n      timestamp: Date.now(),\n    });\n  }\n\n  // æ£€æŸ¥å­˜å‚¨å¤§å°\n  const maxSize = COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB; // 5MB\n  if (stats.totalSize > maxSize * MAGIC_0_8) {\n    healthScore -= MAGIC_0_1;\n    issues.push({\n      type: 'storage_full',\n      severity: 'medium',\n      message: 'å­˜å‚¨ç©ºé—´ä½¿ç”¨è¿‡å¤š',\n      timestamp: Date.now(),\n    });\n  }\n\n  // æ£€æŸ¥å†å²è®°å½•æ•°é‡\n  if (stats.historyStats.totalEntries > ANIMATION_DURATION_VERY_SLOW) {\n    healthScore -= MAGIC_0_1;\n    issues.push({\n      type: 'validation_error',\n      severity: 'low',\n      message: 'å†å²è®°å½•è¿‡å¤š',\n      timestamp: Date.now(),\n    });\n  }\n\n  // ç¡®å®šå¥åº·çŠ¶æ€\n  let status: 'healthy' | 'warning' | 'error';\n  if (healthScore >= MAGIC_0_8) {\n    status = 'healthy';\n  } else if (healthScore >= MAGIC_0_5) {\n    status = 'warning';\n  } else {\n    status = 'error';\n  }\n\n  return {\n    isHealthy: healthScore >= MAGIC_0_8,\n    status,\n    issues,\n    performance: {\n      readLatency: ZERO, // éœ€è¦å®é™…æµ‹é‡\n      writeLatency: ZERO, // éœ€è¦å®é™…æµ‹é‡\n      errorRate: ZERO, // éœ€è¦ä»é”™è¯¯ç»Ÿè®¡ä¸­è·å–\n      availability: availability.localStorageAvailable ? ONE : ZERO,\n    },\n    storage: {\n      used: stats.totalSize,\n      available: COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB - stats.totalSize, // å‡è®¾5MBé™åˆ¶\n      quota: COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB,\n      utilization: stats.totalSize / (COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB),\n    },\n    lastCheck: Date.now(),\n  };\n}\n\n/**\n * æ£€æŸ¥å­˜å‚¨å¯ç”¨æ€§\n * Check storage availability\n */\nfunction checkStorageAvailability(): {\n  localStorageAvailable: boolean;\n  sessionStorageAvailable: boolean;\n  cookiesAvailable: boolean;\n  indexedDBAvailable: boolean;\n} {\n  const result = {\n    localStorageAvailable: false,\n    sessionStorageAvailable: false,\n    cookiesAvailable: false,\n    indexedDBAvailable: false,\n  };\n\n  // æ£€æŸ¥ localStorage\n  try {\n    const testKey = '__test_localStorage__';\n    localStorage.setItem(testKey, 'test');\n    localStorage.removeItem(testKey);\n    result.localStorageAvailable = true;\n  } catch {\n    // localStorage ä¸å¯ç”¨\n  }\n\n  // æ£€æŸ¥ sessionStorage\n  try {\n    const testKey = '__test_sessionStorage__';\n    sessionStorage.setItem(testKey, 'test');\n    sessionStorage.removeItem(testKey);\n    result.sessionStorageAvailable = true;\n  } catch {\n    // sessionStorage ä¸å¯ç”¨\n  }\n\n  // æ£€æŸ¥ Cookies\n  try {\n    document.cookie = '__test_cookie__=test; path=/';\n    result.cookiesAvailable = document.cookie.includes('__test_cookie__');\n    // æ¸…ç†æµ‹è¯• cookie\n    document.cookie =\n      '__test_cookie__=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';\n  } catch {\n    // Cookies ä¸å¯ç”¨\n  }\n\n  // æ£€æŸ¥ IndexedDB\n  try {\n    result.indexedDBAvailable = 'indexedDB' in window && indexedDB !== null;\n  } catch {\n    // IndexedDB ä¸å¯ç”¨\n  }\n\n  return result;\n}\n\n/**\n * ç”Ÿæˆå¥åº·å»ºè®®\n * Generate health recommendations\n */\nfunction generateHealthRecommendations(\n  healthScore: number,\n  issues: Array<{\n    type: ErrorType;\n    severity: PriorityLevel;\n    message: string;\n    timestamp: number;\n  }>,\n): string[] {\n  const recommendations: string[] = [];\n\n  if (healthScore < MAGIC_0_5) {\n    recommendations.push('å»ºè®®ç«‹å³æ£€æŸ¥å­˜å‚¨ç³»ç»Ÿé…ç½®');\n  }\n\n  if (issues.some((issue) => issue.message === 'localStorageä¸å¯ç”¨')) {\n    recommendations.push('æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ï¼Œç¡®ä¿localStorageå·²å¯ç”¨');\n  }\n\n  if (issues.some((issue) => issue.message === 'Cookiesä¸å¯ç”¨')) {\n    recommendations.push('æ£€æŸ¥æµè§ˆå™¨Cookieè®¾ç½®');\n  }\n\n  if (issues.some((issue) => issue.message === 'æ•°æ®è¿‡æœŸ')) {\n    recommendations.push('è€ƒè™‘æ¸…ç†è¿‡æœŸæ•°æ®æˆ–æ›´æ–°æ•°æ®');\n  }\n\n  if (issues.some((issue) => issue.message === 'å­˜å‚¨ç©ºé—´ä½¿ç”¨è¿‡å¤š')) {\n    recommendations.push('æ¸…ç†ä¸å¿…è¦çš„å†å²è®°å½•');\n  }\n\n  if (issues.some((issue) => issue.message === 'å†å²è®°å½•è¿‡å¤š')) {\n    recommendations.push('å®šæœŸæ¸…ç†æ—§çš„æ£€æµ‹å†å²è®°å½•');\n  }\n\n  if (recommendations.length === ZERO) {\n    recommendations.push('ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œå»ºè®®å®šæœŸç›‘æ§');\n  }\n\n  return recommendations;\n}\n\n/**\n * æ‰§è¡Œå¥åº·æ£€æŸ¥\n * Perform health check\n */\nexport function performHealthCheck(): StorageOperationResult<StorageHealthCheck> {\n  const startTime = Date.now();\n\n  try {\n    const healthCheck = calculateHealthCheck();\n\n    return {\n      success: true,\n      data: healthCheck,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n// ==================== å­˜å‚¨æ•ˆç‡è®¡ç®— ====================\n\n/**\n * è®¡ç®—å­˜å‚¨æ•ˆç‡\n * Calculate storage efficiency\n */\nexport function calculateStorageEfficiency(stats: StorageStats): number {\n  // åŸºäºå¤šä¸ªå› ç´ è®¡ç®—æ•ˆç‡åˆ†æ•° (0-1)\n  let efficiency = ONE;\n\n  // æ•°æ®æ–°é²œåº¦æƒé‡ 40%\n  efficiency *= MAGIC_0_6 + DEC_0_4 * stats.freshness;\n\n  // å­˜å‚¨åˆ©ç”¨ç‡æƒé‡ 30%\n  const maxReasonableSize = BYTES_PER_KB * BYTES_PER_KB; // 1MB\n  const sizeEfficiency = Math.min(\n    ONE,\n    maxReasonableSize / Math.max(stats.totalSize, ONE),\n  );\n  efficiency *= MAGIC_0_7 + MAGIC_0_3 * sizeEfficiency;\n\n  // å†å²è®°å½•è´¨é‡æƒé‡ 30%\n  const maxReasonableEntries = PERCENTAGE_FULL;\n  const historyEfficiency = Math.min(\n    ONE,\n    maxReasonableEntries / Math.max(stats.historyStats.totalEntries, ONE),\n  );\n  efficiency *= MAGIC_0_7 + MAGIC_0_3 * historyEfficiency;\n\n  return Math.max(ZERO, Math.min(ONE, efficiency));\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-analytics-events.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Static method 'logAccess' has too many parameters (5). Maximum allowed is 3.","line":142,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":142,"endColumn":19},{"ruleId":"max-params","severity":2,"message":"Static method 'logError' has too many parameters (4). Maximum allowed is 3.","line":268,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":268,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":381,"column":23,"nodeType":"MemberExpression","endLine":381,"endColumn":58},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":382,"column":7,"nodeType":"MemberExpression","endLine":382,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":388,"column":23,"nodeType":"MemberExpression","endLine":388,"endColumn":58},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":390,"column":9,"nodeType":"MemberExpression","endLine":390,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":390,"column":28,"nodeType":"MemberExpression","endLine":390,"endColumn":43}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨åˆ†æäº‹ä»¶å’Œæ—¥å¿—ç®¡ç†\n * Locale Storage Analytics Events and Logging\n *\n * è´Ÿè´£äº‹ä»¶ç›‘å¬ã€è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ç®¡ç†\n */\n\n'use client';\n\nimport { MAGIC_6 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport { logger } from '@/lib/logger';\nimport type {\n  StorageEvent,\n  StorageEventListener,\n} from '@/lib/locale-storage-types';\n\n// ==================== äº‹ä»¶ç®¡ç† ====================\n\n/**\n * äº‹ä»¶ç›‘å¬å™¨ç®¡ç†\n * Event listener management\n */\nexport class EventManager {\n  private static eventListeners: Map<string, StorageEventListener[]> =\n    new Map();\n\n  /**\n   * æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n   * Add event listener\n   */\n  static addEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, []);\n    }\n    this.eventListeners.get(eventType)!.push(listener);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   * Remove event listener\n   */\n  static removeEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    const listeners = this.eventListeners.get(eventType);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index > -ONE) {\n        listeners.splice(index, ONE);\n      }\n    }\n  }\n\n  /**\n   * ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨\n   * Remove all event listeners\n   */\n  static removeAllListeners(eventType?: string): void {\n    if (eventType) {\n      this.eventListeners.delete(eventType);\n    } else {\n      this.eventListeners.clear();\n    }\n  }\n\n  /**\n   * è§¦å‘äº‹ä»¶\n   * Emit event\n   */\n  static emitEvent(event: StorageEvent): void {\n    const listeners = this.eventListeners.get(event.type);\n    if (listeners) {\n      listeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error('Error in storage event listener:', error);\n        }\n      });\n    }\n  }\n\n  /**\n   * è·å–äº‹ä»¶ç›‘å¬å™¨æ•°é‡\n   * Get event listener count\n   */\n  static getListenerCount(eventType?: string): number {\n    if (eventType) {\n      return this.eventListeners.get(eventType)?.length || ZERO;\n    }\n\n    let total = ZERO;\n    for (const listeners of this.eventListeners.values()) {\n      total += listeners.length;\n    }\n    return total;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰äº‹ä»¶ç±»å‹\n   * Get all event types\n   */\n  static getEventTypes(): string[] {\n    return Array.from(this.eventListeners.keys());\n  }\n}\n\n// ==================== è®¿é—®æ—¥å¿—ç®¡ç† ====================\n\n/**\n * è®¿é—®æ—¥å¿—æ¡ç›®\n * Access log entry\n */\nexport interface AccessLogEntry {\n  key: string;\n  operation: string;\n  timestamp: number;\n  success: boolean;\n  responseTime?: number;\n  error?: string;\n}\n\n/**\n * è®¿é—®æ—¥å¿—ç®¡ç†å™¨\n * Access log manager\n */\nexport class AccessLogger {\n  private static accessLog: AccessLogEntry[] = [];\n  private static readonly MAX_LOG_ENTRIES = ANIMATION_DURATION_VERY_SLOW;\n\n  /**\n   * è®°å½•è®¿é—®æ—¥å¿—\n   * Log access\n   */\n  static logAccess(\n    key: string,\n    operation: string,\n    success: boolean,\n    responseTime?: number,\n    error?: string,\n  ): void {\n    const logEntry: AccessLogEntry = {\n      key,\n      operation,\n      timestamp: Date.now(),\n      success,\n      ...(responseTime !== undefined && { responseTime }),\n      ...(error !== undefined && { error }),\n    };\n\n    this.accessLog.unshift(logEntry);\n\n    // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡\n    if (this.accessLog.length > this.MAX_LOG_ENTRIES) {\n      this.accessLog = this.accessLog.slice(ZERO, this.MAX_LOG_ENTRIES);\n    }\n\n    // è§¦å‘è®¿é—®äº‹ä»¶\n    EventManager.emitEvent({\n      type: 'preference_loaded',\n      timestamp: Date.now(),\n      source: 'analytics-events',\n      data: logEntry,\n    });\n  }\n\n  /**\n   * è·å–è®¿é—®æ—¥å¿—\n   * Get access log\n   */\n  static getAccessLog(limit?: number): AccessLogEntry[] {\n    return limit ? this.accessLog.slice(ZERO, limit) : [...this.accessLog];\n  }\n\n  /**\n   * æ¸…ç†è®¿é—®æ—¥å¿—\n   * Clear access log\n   */\n  static clearAccessLog(): void {\n    this.accessLog = [];\n  }\n\n  /**\n   * è·å–è®¿é—®ç»Ÿè®¡\n   * Get access statistics\n   */\n  static getAccessStats(): {\n    totalOperations: number;\n    successRate: number;\n    averageResponseTime: number;\n    operationCounts: Record<string, number>;\n    keyCounts: Record<string, number>;\n    recentErrors: AccessLogEntry[];\n  } {\n    const total = this.accessLog.length;\n    const successful = this.accessLog.filter((entry) => entry.success).length;\n    const successRate = total > ZERO ? (successful / total) * PERCENTAGE_FULL : PERCENTAGE_FULL;\n\n    // è®¡ç®—å¹³å‡å“åº”æ—¶é—´\n    const responseTimes = this.accessLog\n      .filter((entry) => entry.responseTime !== undefined)\n      .map((entry) => entry.responseTime!);\n    const averageResponseTime =\n      responseTimes.length > ZERO\n        ? responseTimes.reduce((sum, time) => sum + time, ZERO) /\n          responseTimes.length\n        : ZERO;\n\n    // ç»Ÿè®¡æ“ä½œç±»å‹\n    const operationCounts: Record<string, number> = {};\n    const keyCounts: Record<string, number> = {};\n\n    for (const entry of this.accessLog) {\n      operationCounts[entry.operation] =\n        (operationCounts[entry.operation] || ZERO) + ONE;\n      keyCounts[entry.key] = (keyCounts[entry.key] || ZERO) + ONE;\n    }\n\n    // è·å–æœ€è¿‘çš„é”™è¯¯\n    const recentErrors = this.accessLog\n      .filter((entry) => !entry.success)\n      .slice(ZERO, COUNT_TEN);\n\n    return {\n      totalOperations: total,\n      successRate,\n      averageResponseTime,\n      operationCounts,\n      keyCounts,\n      recentErrors,\n    };\n  }\n}\n\n// ==================== é”™è¯¯æ—¥å¿—ç®¡ç† ====================\n\n/**\n * é”™è¯¯æ—¥å¿—æ¡ç›®\n * Error log entry\n */\nexport interface ErrorLogEntry {\n  error: string;\n  timestamp: number;\n  context?: string;\n  stack?: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n}\n\n/**\n * é”™è¯¯æ—¥å¿—ç®¡ç†å™¨\n * Error log manager\n */\nexport class ErrorLogger {\n  private static errorLog: ErrorLogEntry[] = [];\n  private static readonly MAX_ERROR_ENTRIES = 500;\n\n  /**\n   * è®°å½•é”™è¯¯\n   * Log error\n   */\n  static logError(\n    error: string,\n    context?: string,\n    severity: ErrorLogEntry['severity'] = 'medium',\n    stack?: string,\n  ): void {\n    const errorEntry: ErrorLogEntry = {\n      error,\n      timestamp: Date.now(),\n      severity,\n      ...(context !== undefined && { context }),\n      ...(stack !== undefined && { stack }),\n    };\n\n    this.errorLog.unshift(errorEntry);\n\n    // é™åˆ¶é”™è¯¯æ—¥å¿—æ¡ç›®æ•°é‡\n    if (this.errorLog.length > this.MAX_ERROR_ENTRIES) {\n      this.errorLog = this.errorLog.slice(ZERO, this.MAX_ERROR_ENTRIES);\n    }\n\n    // è§¦å‘é”™è¯¯äº‹ä»¶\n    EventManager.emitEvent({\n      type: 'error_occurred',\n      timestamp: Date.now(),\n      source: 'analytics-events',\n      data: errorEntry,\n    });\n\n    // å¯¹äºä¸¥é‡é”™è¯¯ï¼Œé¢å¤–å¤„ç†\n    if (severity === 'critical') {\n      logger.error('Critical storage error:', error, context);\n    }\n  }\n\n  /**\n   * è·å–é”™è¯¯æ—¥å¿—\n   * Get error log\n   */\n  static getErrorLog(limit?: number): ErrorLogEntry[] {\n    return limit ? this.errorLog.slice(ZERO, limit) : [...this.errorLog];\n  }\n\n  /**\n   * æ¸…ç†é”™è¯¯æ—¥å¿—\n   * Clear error log\n   */\n  static clearErrorLog(): void {\n    this.errorLog = [];\n  }\n\n  /**\n   * è·å–é”™è¯¯ç»Ÿè®¡\n   * Get error statistics\n   */\n  static getErrorStats(): {\n    totalErrors: number;\n    errorRate: number;\n    severityDistribution: Record<string, number>;\n    recentErrors: ErrorLogEntry[];\n    errorTrends: Array<{ date: string; count: number }>;\n  } {\n    const total = this.errorLog.length;\n    const {totalOperations} = AccessLogger.getAccessStats();\n    const errorRate = totalOperations > ZERO ? (total / totalOperations) * PERCENTAGE_FULL : ZERO;\n\n    // ç»Ÿè®¡ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ\n    const severityDistribution: Record<string, number> = {\n      low: ZERO,\n      medium: ZERO,\n      high: ZERO,\n      critical: ZERO,\n    };\n\n    for (const entry of this.errorLog) {\n      if (\n        entry.severity &&\n        severityDistribution[entry.severity] !== undefined\n      ) {\n        severityDistribution[entry.severity]! += ONE;\n      }\n    }\n\n    // è·å–æœ€è¿‘é”™è¯¯\n    const recentErrors = this.errorLog.slice(ZERO, COUNT_TEN);\n\n    // è®¡ç®—é”™è¯¯è¶‹åŠ¿ï¼ˆæŒ‰å¤©ï¼‰\n    const errorTrends = this.calculateErrorTrends();\n\n    return {\n      totalErrors: total,\n      errorRate,\n      severityDistribution,\n      recentErrors,\n      errorTrends,\n    };\n  }\n\n  /**\n   * è®¡ç®—é”™è¯¯è¶‹åŠ¿\n   * Calculate error trends\n   */\n  private static calculateErrorTrends(): Array<{\n    date: string;\n    count: number;\n  }> {\n    const trends: Record<string, number> = {};\n    const now = new Date();\n\n    // åˆå§‹åŒ–æœ€è¿‘7å¤©çš„æ•°æ®\n    for (let i = MAGIC_6; i >= ZERO; i--) {\n      const date = new Date(now);\n      date.setDate(date.getDate() - i);\n      const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n      trends[dateStr] = ZERO;\n    }\n\n    // ç»Ÿè®¡é”™è¯¯æ•°é‡\n    for (const entry of this.errorLog) {\n      const date = new Date(entry.timestamp);\n      const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n      if (Object.prototype.hasOwnProperty.call(trends, dateStr)) {\n        trends[dateStr] = (trends[dateStr] || ZERO) + ONE;\n      }\n    }\n\n    return Object.entries(trends).map(([date, count]) => ({ date, count }));\n  }\n}\n\n// ==================== æ•°æ®æ¸…ç† ====================\n\n/**\n * æ¸…ç†åˆ†ææ•°æ®\n * Cleanup analytics data\n */\nexport function cleanupAnalyticsData(\n  maxAge: number = DAYS_PER_WEEK * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n): void {\n  const cutoffTime = Date.now() - maxAge;\n\n  // æ¸…ç†è®¿é—®æ—¥å¿—\n  const accessLog = AccessLogger.getAccessLog();\n  const filteredAccessLog = accessLog.filter(\n    (entry) => entry.timestamp > cutoffTime,\n  );\n  AccessLogger.clearAccessLog();\n  filteredAccessLog.forEach((entry) => {\n    AccessLogger.logAccess(\n      entry.key,\n      entry.operation,\n      entry.success,\n      entry.responseTime,\n      entry.error,\n    );\n  });\n\n  // æ¸…ç†é”™è¯¯æ—¥å¿—\n  const errorLog = ErrorLogger.getErrorLog();\n  const filteredErrorLog = errorLog.filter(\n    (entry) => entry.timestamp > cutoffTime,\n  );\n  ErrorLogger.clearErrorLog();\n  filteredErrorLog.forEach((entry) => {\n    ErrorLogger.logError(\n      entry.error,\n      entry.context,\n      entry.severity,\n      entry.stack,\n    );\n  });\n\n  // è§¦å‘æ¸…ç†äº‹ä»¶\n  EventManager.emitEvent({\n    type: 'cache_cleared',\n    timestamp: Date.now(),\n    source: 'analytics-events',\n    data: {\n      maxAge,\n      cutoffTime,\n      accessLogCleaned: accessLog.length - filteredAccessLog.length,\n      errorLogCleaned: errorLog.length - filteredErrorLog.length,\n    },\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-analytics-performance.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'safeGet' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":59,"column":5,"nodeType":"MemberExpression","endLine":59,"endColumn":22},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":63,"column":38,"nodeType":"CallExpression","messageId":"missingRadix","endLine":63,"endColumn":52,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[2175,2175],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":102,"column":25,"nodeType":"MemberExpression","endLine":102,"endColumn":37},{"ruleId":"max-statements","severity":2,"message":"Function 'generateBehaviorInsights' has too many statements (23). Maximum allowed is 20.","line":125,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":180,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":152,"column":22,"nodeType":"MemberExpression","endLine":152,"endColumn":42},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":358,"column":21,"nodeType":"MemberExpression","endLine":358,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":359,"column":5,"nodeType":"MemberExpression","endLine":359,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":365,"column":21,"nodeType":"MemberExpression","endLine":365,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":367,"column":7,"nodeType":"MemberExpression","endLine":367,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":463,"column":52,"nodeType":"MemberExpression","endLine":463,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":473,"column":7,"nodeType":"MemberExpression","endLine":473,"endColumn":48}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨åˆ†ææ€§èƒ½å’Œè¶‹åŠ¿åˆ†æ\n * Locale Storage Analytics Performance and Trends\n *\n * è´Ÿè´£æ€§èƒ½æŒ‡æ ‡åˆ†æã€ä½¿ç”¨æ¨¡å¼è¯†åˆ«å’Œè¶‹åŠ¿åˆ†æ\n */\n\n'use client';\n\nimport { COUNT_23, MAGIC_12, MAGIC_17, MAGIC_18, MAGIC_6, MAGIC_9, MAGIC_95, MAGIC_99 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, DAYS_PER_MONTH, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { DEC_0_75, MAGIC_0_2, MAGIC_0_25, MAGIC_0_3, MAGIC_0_7, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport { calculateStorageStats } from '@/lib/locale-storage-analytics-core';\nimport { hasOwn, safeGet, safeGetWithDefault } from '@/lib/security/object-guards';\nimport type { StorageStats } from '@/lib/locale-storage-types';\nimport {\n  AccessLogger,\n  ErrorLogger,\n  type AccessLogEntry,\n} from '@/lib/locale-storage-analytics-events';\n\n// ==================== ä½¿ç”¨æ¨¡å¼åˆ†æ ====================\n\n/**\n * ä½¿ç”¨æ¨¡å¼åˆ†æç»“æœ\n * Usage pattern analysis result\n */\nexport interface UsagePatterns {\n  mostAccessedKeys: Array<{ key: string; count: number }>;\n  leastAccessedKeys: Array<{ key: string; count: number }>;\n  peakUsageHours: Array<{ hour: number; count: number }>;\n  operationDistribution: Record<string, number>;\n  averageSessionDuration: number;\n  userBehaviorInsights: string[];\n}\n\n/**\n * è·å–ä½¿ç”¨æ¨¡å¼\n * Get usage patterns\n */\nexport function getUsagePatterns(): UsagePatterns {\n  const accessLog = AccessLogger.getAccessLog();\n  const accessStats = AccessLogger.getAccessStats();\n\n  // åˆ†ææœ€å¸¸è®¿é—®çš„é”®\n  const keyEntries = Object.entries(accessStats.keyCounts)\n    .map(([key, count]) => ({ key, count }))\n    .sort((a, b) => b.count - a.count);\n\n  const mostAccessedKeys = keyEntries.slice(ZERO, COUNT_FIVE);\n  const leastAccessedKeys = keyEntries.slice(-COUNT_FIVE).reverse();\n\n  // åˆ†æå³°å€¼ä½¿ç”¨æ—¶é—´\n  const hourlyUsage: Record<number, number> = {};\n  for (const entry of accessLog) {\n    const hour = new Date(entry.timestamp).getHours();\n    hourlyUsage[hour] = safeGetWithDefault(hourlyUsage, hour, ZERO) + ONE;\n  }\n\n  const peakUsageHours = Object.entries(hourlyUsage)\n    .map(([hour, count]) => ({ hour: parseInt(hour), count }))\n    .sort((a, b) => b.count - a.count)\n    .slice(ZERO, COUNT_FIVE);\n\n  // è®¡ç®—å¹³å‡ä¼šè¯æŒç»­æ—¶é—´\n  const averageSessionDuration = calculateAverageSessionDuration(accessLog);\n\n  // ç”Ÿæˆç”¨æˆ·è¡Œä¸ºæ´å¯Ÿ\n  const userBehaviorInsights = generateBehaviorInsights(\n    accessStats,\n    peakUsageHours,\n    averageSessionDuration,\n  );\n\n  return {\n    mostAccessedKeys,\n    leastAccessedKeys,\n    peakUsageHours,\n    operationDistribution: accessStats.operationCounts,\n    averageSessionDuration,\n    userBehaviorInsights,\n  };\n}\n\n/**\n * è®¡ç®—å¹³å‡ä¼šè¯æŒç»­æ—¶é—´\n * Calculate average session duration\n */\nfunction calculateAverageSessionDuration(accessLog: AccessLogEntry[]): number {\n  if (accessLog.length < COUNT_PAIR) return ZERO;\n\n  const sessions: number[] = [];\n  let sessionStart = accessLog[accessLog.length - ONE]?.timestamp ?? Date.now();\n  let lastActivity = sessionStart;\n\n  // ä¼šè¯é—´éš”é˜ˆå€¼ï¼š30åˆ†é’Ÿ\n  const sessionGap = DAYS_PER_MONTH * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n\n  for (let i = accessLog.length - COUNT_PAIR; i >= ZERO; i--) {\n    const currentTime = accessLog[i]?.timestamp ?? Date.now();\n\n    if (currentTime - lastActivity > sessionGap) {\n      // æ–°ä¼šè¯å¼€å§‹\n      sessions.push(lastActivity - sessionStart);\n      sessionStart = currentTime;\n    }\n\n    lastActivity = currentTime;\n  }\n\n  // æ·»åŠ æœ€åä¸€ä¸ªä¼šè¯\n  sessions.push(lastActivity - sessionStart);\n\n  return sessions.length > ZERO\n    ? sessions.reduce((sum, duration) => sum + duration, ZERO) / sessions.length\n    : ZERO;\n}\n\n/**\n * ç”Ÿæˆè¡Œä¸ºæ´å¯Ÿ\n * Generate behavior insights\n */\nfunction generateBehaviorInsights(\n  accessStats: ReturnType<typeof AccessLogger.getAccessStats>,\n  peakUsageHours: Array<{ hour: number; count: number }>,\n  averageSessionDuration: number,\n): string[] {\n  const insights: string[] = [];\n\n  // æˆåŠŸç‡åˆ†æ\n  if (accessStats.successRate < MAGIC_95) {\n    insights.push(\n      `å­˜å‚¨æ“ä½œæˆåŠŸç‡è¾ƒä½ (${accessStats.successRate.toFixed(ONE)}%)ï¼Œå»ºè®®æ£€æŸ¥å­˜å‚¨é…ç½®`,\n    );\n  } else if (accessStats.successRate > MAGIC_99) {\n    insights.push('å­˜å‚¨æ“ä½œæˆåŠŸç‡ä¼˜ç§€ï¼Œç³»ç»Ÿè¿è¡Œç¨³å®š');\n  }\n\n  // å“åº”æ—¶é—´åˆ†æ\n  if (accessStats.averageResponseTime > PERCENTAGE_FULL) {\n    insights.push(\n      `å¹³å‡å“åº”æ—¶é—´è¾ƒæ…¢ (${accessStats.averageResponseTime.toFixed(ONE)}ms)ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–`,\n    );\n  } else if (accessStats.averageResponseTime < COUNT_TEN) {\n    insights.push('å“åº”æ—¶é—´ä¼˜ç§€ï¼Œå­˜å‚¨æ€§èƒ½è‰¯å¥½');\n  }\n\n  // ä½¿ç”¨æ—¶é—´æ¨¡å¼åˆ†æ\n  if (peakUsageHours.length > ZERO) {\n    const peakHour = peakUsageHours[ZERO]?.hour ?? MAGIC_12;\n    if (peakHour >= MAGIC_9 && peakHour <= MAGIC_17) {\n      insights.push('ä¸»è¦åœ¨å·¥ä½œæ—¶é—´ä½¿ç”¨ï¼Œç¬¦åˆåŠå…¬åœºæ™¯');\n    } else if (peakHour >= MAGIC_18 && peakHour <= COUNT_23) {\n      insights.push('ä¸»è¦åœ¨æ™šé—´ä½¿ç”¨ï¼Œå¯èƒ½ä¸ºä¸ªäººç”¨æˆ·');\n    }\n  }\n\n  // ä¼šè¯æŒç»­æ—¶é—´åˆ†æ\n  const sessionMinutes = averageSessionDuration / (SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n  if (sessionMinutes > SECONDS_PER_MINUTE) {\n    insights.push('ç”¨æˆ·ä¼šè¯æ—¶é—´è¾ƒé•¿ï¼Œè¡¨æ˜æ·±åº¦ä½¿ç”¨');\n  } else if (sessionMinutes < COUNT_FIVE) {\n    insights.push('ç”¨æˆ·ä¼šè¯æ—¶é—´è¾ƒçŸ­ï¼Œå¯èƒ½ä¸ºå¿«é€Ÿè®¿é—®');\n  }\n\n  // æ“ä½œç±»å‹åˆ†æ\n  const operations = Object.entries(accessStats.operationCounts);\n  const totalOps = operations.reduce((sum, [, count]) => sum + count, ZERO);\n\n  for (const [operation, count] of operations) {\n    const percentage = (count / totalOps) * PERCENTAGE_FULL;\n    if (percentage > PERCENTAGE_HALF) {\n      insights.push(`${operation}æ“ä½œå ä¸»å¯¼åœ°ä½ (${percentage.toFixed(ONE)}%)`);\n    }\n  }\n\n  return insights;\n}\n\n// ==================== æ€§èƒ½æŒ‡æ ‡åˆ†æ ====================\n\n/**\n * æ€§èƒ½æŒ‡æ ‡\n * Performance metrics\n */\nexport interface PerformanceMetrics {\n  averageResponseTime: number;\n  successRate: number;\n  errorRate: number;\n  throughput: number;\n  efficiency: number;\n  recommendations: string[];\n}\n\n/**\n * è·å–æ€§èƒ½æŒ‡æ ‡\n * Get performance metrics\n */\nexport function getPerformanceMetrics(): PerformanceMetrics {\n  const accessStats = AccessLogger.getAccessStats();\n  const errorStats = ErrorLogger.getErrorStats();\n  const stats = calculateStorageStats();\n\n  // è®¡ç®—ååé‡ (æ“ä½œæ•°/å°æ—¶)\n  const oneHourAgo = Date.now() - SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n  const recentOperations = AccessLogger.getAccessLog().filter(\n    (entry) => entry.timestamp > oneHourAgo,\n  ).length;\n  const throughput = recentOperations; // æ¯å°æ—¶æ“ä½œæ•°\n\n  // è®¡ç®—æ•ˆç‡åˆ†æ•°\n  const efficiency = calculateEfficiencyScore(accessStats, errorStats, stats);\n\n  // ç”Ÿæˆæ€§èƒ½å»ºè®®\n  const recommendations = generatePerformanceRecommendations({\n    errorRate: errorStats.errorRate,\n    responseTime: accessStats.averageResponseTime,\n    successRate: accessStats.successRate,\n    efficiency,\n  });\n\n  return {\n    averageResponseTime: accessStats.averageResponseTime,\n    successRate: accessStats.successRate,\n    errorRate: errorStats.errorRate,\n    throughput,\n    efficiency,\n    recommendations,\n  };\n}\n\n/**\n * è®¡ç®—æ•ˆç‡åˆ†æ•°\n * Calculate efficiency score\n */\nfunction calculateEfficiencyScore(\n  accessStats: ReturnType<typeof AccessLogger.getAccessStats>,\n  errorStats: ReturnType<typeof ErrorLogger.getErrorStats>,\n  storageStats: StorageStats,\n): number {\n  let score = ONE;\n\n  // æˆåŠŸç‡æƒé‡ 30%\n  score *= MAGIC_0_7 + MAGIC_0_3 * (accessStats.successRate / PERCENTAGE_FULL);\n\n  // å“åº”æ—¶é—´æƒé‡ 25%\n  const responseTimeScore = Math.max(\n    ZERO,\n    ONE - accessStats.averageResponseTime / 1000,\n  );\n  score *= DEC_0_75 + MAGIC_0_25 * responseTimeScore;\n\n  // é”™è¯¯ç‡æƒé‡ 25%\n  const errorRateScore = Math.max(ZERO, ONE - errorStats.errorRate / PERCENTAGE_FULL);\n  score *= DEC_0_75 + MAGIC_0_25 * errorRateScore;\n\n  // æ•°æ®æ–°é²œåº¦æƒé‡ 20%\n  score *= MAGIC_0_8 + MAGIC_0_2 * storageStats.freshness;\n\n  return Math.max(ZERO, Math.min(ONE, score));\n}\n\n/**\n * ç”Ÿæˆæ€§èƒ½å»ºè®®\n * Generate performance recommendations\n */\nfunction generatePerformanceRecommendations(metrics: {\n  errorRate: number;\n  responseTime: number;\n  successRate: number;\n  efficiency: number;\n}): string[] {\n  const recommendations: string[] = [];\n\n  if (metrics.errorRate > COUNT_FIVE) {\n    recommendations.push('é”™è¯¯ç‡è¿‡é«˜ï¼Œå»ºè®®æ£€æŸ¥å­˜å‚¨æ“ä½œé€»è¾‘');\n  }\n\n  if (metrics.responseTime > PERCENTAGE_FULL) {\n    recommendations.push('å“åº”æ—¶é—´è¾ƒæ…¢ï¼Œè€ƒè™‘ä¼˜åŒ–å­˜å‚¨è®¿é—®æ–¹å¼');\n  }\n\n  if (metrics.successRate < MAGIC_95) {\n    recommendations.push('æˆåŠŸç‡åä½ï¼Œå»ºè®®å¢åŠ é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶');\n  }\n\n  if (metrics.efficiency < MAGIC_0_7) {\n    recommendations.push('æ•´ä½“æ•ˆç‡åä½ï¼Œå»ºè®®å…¨é¢ä¼˜åŒ–å­˜å‚¨ç­–ç•¥');\n  }\n\n  if (recommendations.length === ZERO) {\n    recommendations.push('æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œå»ºè®®ç»§ç»­ç›‘æ§');\n  }\n\n  return recommendations;\n}\n\n// ==================== è¶‹åŠ¿åˆ†æ ====================\n\n/**\n * ä½¿ç”¨è¶‹åŠ¿\n * Usage trends\n */\nexport interface UsageTrends {\n  dailyOperations: Array<{ date: string; operations: number }>;\n  weeklyGrowth: number;\n  monthlyGrowth: number;\n  seasonalPatterns: Array<{ period: string; avgOperations: number }>;\n  predictions: Array<{ date: string; predictedOperations: number }>;\n}\n\n/**\n * è·å–ä½¿ç”¨è¶‹åŠ¿\n * Get usage trends\n */\nexport function getUsageTrends(days: number = DAYS_PER_WEEK): UsageTrends {\n  const accessLog = AccessLogger.getAccessLog();\n\n  // è®¡ç®—æ¯æ—¥æ“ä½œæ•°\n  const dailyOperations = calculateDailyOperations(accessLog, days);\n\n  // è®¡ç®—å¢é•¿ç‡\n  const weeklyGrowth = calculateGrowthRate(dailyOperations, DAYS_PER_WEEK);\n  const monthlyGrowth = calculateGrowthRate(dailyOperations, DAYS_PER_MONTH);\n\n  // åˆ†æå­£èŠ‚æ€§æ¨¡å¼\n  const seasonalPatterns = analyzeSeasonalPatterns(accessLog);\n\n  // ç”Ÿæˆé¢„æµ‹\n  const predictions = generatePredictions(dailyOperations, COUNT_TRIPLE);\n\n  return {\n    dailyOperations,\n    weeklyGrowth,\n    monthlyGrowth,\n    seasonalPatterns,\n    predictions,\n  };\n}\n\n/**\n * è®¡ç®—æ¯æ—¥æ“ä½œæ•°\n * Calculate daily operations\n */\nfunction calculateDailyOperations(\n  accessLog: AccessLogEntry[],\n  days: number,\n): Array<{ date: string; operations: number }> {\n  const dailyOps: Record<string, number> = {};\n  const now = new Date();\n\n  // åˆå§‹åŒ–æ—¥æœŸ\n  for (let i = days - ONE; i >= ZERO; i--) {\n    const date = new Date(now);\n    date.setDate(date.getDate() - i);\n    const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n    dailyOps[dateStr] = ZERO;\n  }\n\n  // ç»Ÿè®¡æ“ä½œæ•°\n  for (const entry of accessLog) {\n    const date = new Date(entry.timestamp);\n    const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n    if (hasOwn(dailyOps, dateStr)) {\n      dailyOps[dateStr] = safeGetWithDefault(dailyOps, dateStr, ZERO) + ONE;\n    }\n  }\n\n  return Object.entries(dailyOps).map(([date, operations]) => ({\n    date,\n    operations,\n  }));\n}\n\n/**\n * è®¡ç®—å¢é•¿ç‡\n * Calculate growth rate\n */\nfunction calculateGrowthRate(\n  dailyOperations: Array<{ date: string; operations: number }>,\n  period: number,\n): number {\n  if (dailyOperations.length < period) return ZERO;\n\n  const recent = dailyOperations.slice(-period);\n  const previous = dailyOperations.slice(-period * COUNT_PAIR, -period);\n\n  if (previous.length === ZERO) return ZERO;\n\n  const recentAvg =\n    recent.reduce((sum, day) => sum + day.operations, ZERO) / recent.length;\n  const previousAvg =\n    previous.reduce((sum, day) => sum + day.operations, ZERO) / previous.length;\n\n  return previousAvg > ZERO ? ((recentAvg - previousAvg) / previousAvg) * PERCENTAGE_FULL : ZERO;\n}\n\n/**\n * åˆ†æå­£èŠ‚æ€§æ¨¡å¼\n * Analyze seasonal patterns\n */\nfunction analyzeSeasonalPatterns(\n  accessLog: AccessLogEntry[],\n): Array<{ period: string; avgOperations: number }> {\n  const patterns: Record<string, number[]> = {\n    å·¥ä½œæ—¥: [],\n    å‘¨æœ«: [],\n    ä¸Šåˆ: [],\n    ä¸‹åˆ: [],\n    æ™šä¸Š: [],\n  };\n\n  for (const entry of accessLog) {\n    const date = new Date(entry.timestamp);\n    const dayOfWeek = date.getDay();\n    const hour = date.getHours();\n\n    // å·¥ä½œæ—¥ vs å‘¨æœ«\n    if (dayOfWeek >= ONE && dayOfWeek <= COUNT_FIVE) {\n      patterns['å·¥ä½œæ—¥']?.push(ONE);\n    } else {\n      patterns['å‘¨æœ«']?.push(ONE);\n    }\n\n    // æ—¶é—´æ®µ\n    if (hour >= MAGIC_6 && hour < MAGIC_12) {\n      patterns['ä¸Šåˆ']!.push(ONE);\n    } else if (hour >= MAGIC_12 && hour < MAGIC_18) {\n      patterns['ä¸‹åˆ']!.push(ONE);\n    } else {\n      patterns['æ™šä¸Š']!.push(ONE);\n    }\n  }\n\n  return Object.entries(patterns).map(([period, operations]) => ({\n    period,\n    avgOperations: operations.length,\n  }));\n}\n\n/**\n * ç”Ÿæˆé¢„æµ‹\n * Generate predictions\n */\nfunction generatePredictions(\n  dailyOperations: Array<{ date: string; operations: number }>,\n  futureDays: number,\n): Array<{ date: string; predictedOperations: number }> {\n  if (dailyOperations.length < COUNT_TRIPLE) {\n    return [];\n  }\n\n  // ç®€å•çº¿æ€§è¶‹åŠ¿é¢„æµ‹\n  const recent = dailyOperations.slice(-DAYS_PER_WEEK); // ä½¿ç”¨æœ€è¿‘7å¤©æ•°æ®\n  const avgOperations =\n    recent.reduce((sum, day) => sum + day.operations, ZERO) / recent.length;\n\n  // è®¡ç®—è¶‹åŠ¿æ–œç‡\n  const trend =\n    recent.length > ONE\n      ? (recent[recent.length - ONE]!.operations - recent[ZERO]!.operations) /\n        (recent.length - ONE)\n      : ZERO;\n\n  const predictions: Array<{ date: string; predictedOperations: number }> = [];\n\n  for (let i = ONE; i <= futureDays; i++) {\n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + i);\n    const dateStr =\n      futureDate.toISOString().split('T')[ZERO] || futureDate.toISOString();\n\n    const predictedOperations = Math.max(\n      ZERO,\n      Math.round(avgOperations + trend * i),\n    );\n\n    predictions.push({\n      date: dateStr,\n      predictedOperations,\n    });\n  }\n\n  return predictions;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-analytics-utils.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'validateAnalyticsData' has too many statements (28). Maximum allowed is 20.","line":235,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":297,"endColumn":2},{"ruleId":"max-statements","severity":2,"message":"Function 'optimizeAnalyticsStorage' has too many statements (24). Maximum allowed is 20.","line":333,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":416,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":434,"column":41,"nodeType":"MemberExpression","endLine":434,"endColumn":57}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨åˆ†æå·¥å…·å‡½æ•°å’Œç¼“å­˜ç®¡ç†\n * Locale Storage Analytics Utilities and Cache Management\n *\n * è´Ÿè´£ç¼“å­˜ç®¡ç†ã€æ•°æ®å¯¼å‡ºå’Œé€šç”¨å·¥å…·å‡½æ•°\n */\n\n'use client';\n\nimport { MAGIC_0_1 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { AccessLogger, ErrorLogger } from '@/lib/locale-storage-analytics-events';\nimport type { StorageHealthCheck, StorageStats } from '@/lib/locale-storage-types';\nimport {\n  getStorageStats,\n  performHealthCheck,\n} from '@/lib/locale-storage-analytics-core';\nimport {\n  getPerformanceMetrics,\n  getUsagePatterns,\n  getUsageTrends,\n} from '@/lib/locale-storage-analytics-performance';\n\n// ==================== ç¼“å­˜ç®¡ç† ====================\n\n/**\n * ç¼“å­˜æ¡ç›®\n * Cache entry\n */\ninterface CacheEntry {\n  data: unknown;\n  timestamp: number;\n}\n\n/**\n * ç¼“å­˜ç®¡ç†å™¨\n * Cache manager\n */\nexport class CacheManager {\n  private static metricsCache: Map<string, CacheEntry> = new Map();\n  private static readonly CACHE_TTL = COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // 5 minutes\n\n  /**\n   * è·å–ç¼“å­˜çš„æŒ‡æ ‡\n   * Get cached metrics\n   */\n  static getCachedMetrics(key: string): unknown | null {\n    const cached = this.metricsCache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.CACHE_TTL) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  /**\n   * è®¾ç½®ç¼“å­˜çš„æŒ‡æ ‡\n   * Set cached metrics\n   */\n  static setCachedMetrics(key: string, data: unknown): void {\n    this.metricsCache.set(key, {\n      data,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * ä½¿ç¼“å­˜å¤±æ•ˆ\n   * Invalidate cache\n   */\n  static invalidateCache(key?: string): void {\n    if (key) {\n      this.metricsCache.delete(key);\n    } else {\n      this.metricsCache.clear();\n    }\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸç¼“å­˜\n   * Clean expired cache\n   */\n  static cleanExpiredCache(): void {\n    const now = Date.now();\n    for (const [key, entry] of this.metricsCache.entries()) {\n      if (now - entry.timestamp >= this.CACHE_TTL) {\n        this.metricsCache.delete(key);\n      }\n    }\n  }\n\n  /**\n   * è·å–ç¼“å­˜ç»Ÿè®¡\n   * Get cache statistics\n   */\n  static getCacheStats(): {\n    totalEntries: number;\n    validEntries: number;\n    expiredEntries: number;\n    hitRate: number;\n    memoryUsage: number;\n  } {\n    const now = Date.now();\n    let validEntries = ZERO;\n    let expiredEntries = ZERO;\n    let memoryUsage = ZERO;\n\n    for (const [_key, entry] of this.metricsCache.entries()) {\n      if (now - entry.timestamp < this.CACHE_TTL) {\n        validEntries += ONE;\n      } else {\n        expiredEntries += ONE;\n      }\n\n      // ä¼°ç®—å†…å­˜ä½¿ç”¨é‡\n      memoryUsage += JSON.stringify(entry).length * COUNT_PAIR; // ç²—ç•¥ä¼°ç®—\n    }\n\n    // ç®€å•çš„å‘½ä¸­ç‡è®¡ç®—ï¼ˆåŸºäºæœ‰æ•ˆæ¡ç›®æ¯”ä¾‹ï¼‰\n    const totalEntries = validEntries + expiredEntries;\n    const hitRate = totalEntries > ZERO ? (validEntries / totalEntries) * PERCENTAGE_FULL : ZERO;\n\n    return {\n      totalEntries,\n      validEntries,\n      expiredEntries,\n      hitRate,\n      memoryUsage,\n    };\n  }\n}\n\n// ==================== æ•°æ®å¯¼å‡º ====================\n\n/**\n * å¯¼å‡ºæ•°æ®æ ¼å¼\n * Export data format\n */\nexport interface ExportData {\n  stats: StorageStats;\n  healthCheck: StorageHealthCheck;\n  usagePatterns: ReturnType<typeof getUsagePatterns>;\n  performanceMetrics: ReturnType<typeof getPerformanceMetrics>;\n  usageTrends: ReturnType<typeof getUsageTrends>;\n  accessLog: ReturnType<typeof AccessLogger.getAccessLog>;\n  errorLog: ReturnType<typeof ErrorLogger.getErrorLog>;\n  exportTimestamp: number;\n  exportVersion: string;\n}\n\n/**\n * å¯¼å‡ºåˆ†ææ•°æ®\n * Export analytics data\n */\nexport function exportAnalyticsData(): ExportData {\n  return {\n    stats: getStorageStats().data!,\n    healthCheck: performHealthCheck().data!,\n    usagePatterns: getUsagePatterns(),\n    performanceMetrics: getPerformanceMetrics(),\n    usageTrends: getUsageTrends(),\n    accessLog: AccessLogger.getAccessLog(PERCENTAGE_FULL), // é™åˆ¶ä¸ºæœ€è¿‘100æ¡\n    errorLog: ErrorLogger.getErrorLog(PERCENTAGE_HALF), // é™åˆ¶ä¸ºæœ€è¿‘50æ¡\n    exportTimestamp: Date.now(),\n    exportVersion: '1.0.0',\n  };\n}\n\n/**\n * å¯¼å‡ºä¸ºJSONå­—ç¬¦ä¸²\n * Export as JSON string\n */\nexport function exportAnalyticsDataAsJson(): string {\n  const data = exportAnalyticsData();\n  return JSON.stringify(data, null, COUNT_PAIR);\n}\n\n/**\n * å¯¼å‡ºä¸ºCSVæ ¼å¼\n * Export as CSV format\n */\nexport function exportAnalyticsDataAsCsv(): string {\n  const data = exportAnalyticsData();\n  const lines: string[] = [];\n\n  // è®¿é—®æ—¥å¿—CSV\n  lines.push('=== Access Log ===');\n  lines.push('Timestamp,Key,Operation,Success,Response Time,Error');\n\n  for (const entry of data.accessLog) {\n    lines.push(\n      [\n        new Date(entry.timestamp).toISOString(),\n        entry.key,\n        entry.operation,\n        entry.success.toString(),\n        entry.responseTime?.toString() || '',\n        entry.error || '',\n      ].join(','),\n    );\n  }\n\n  lines.push('');\n  lines.push('=== Error Log ===');\n  lines.push('Timestamp,Error,Context,Severity');\n\n  for (const entry of data.errorLog) {\n    lines.push(\n      [\n        new Date(entry.timestamp).toISOString(),\n        entry.error,\n        entry.context || '',\n        entry.severity,\n      ].join(','),\n    );\n  }\n\n  lines.push('');\n  lines.push('=== Usage Trends ===');\n  lines.push('Date,Operations');\n\n  for (const entry of data.usageTrends.dailyOperations) {\n    lines.push([entry.date, entry.operations.toString()].join(','));\n  }\n\n  return lines.join('\\n');\n}\n\n// ==================== æ•°æ®éªŒè¯ ====================\n\n/**\n * éªŒè¯åˆ†ææ•°æ®å®Œæ•´æ€§\n * Validate analytics data integrity\n */\nexport function validateAnalyticsData(): {\n  isValid: boolean;\n  issues: string[];\n  recommendations: string[];\n} {\n  const issues: string[] = [];\n  const recommendations: string[] = [];\n\n  try {\n    // æ£€æŸ¥åŸºç¡€æ•°æ®\n    const stats = getStorageStats();\n    if (!stats.success) {\n      issues.push('æ— æ³•è·å–å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯');\n    }\n\n    const healthCheck = performHealthCheck();\n    if (!healthCheck.success) {\n      issues.push('æ— æ³•æ‰§è¡Œå¥åº·æ£€æŸ¥');\n    }\n\n    // æ£€æŸ¥æ—¥å¿—æ•°æ®\n    const accessLog = AccessLogger.getAccessLog();\n    const errorLog = ErrorLogger.getErrorLog();\n\n    if (accessLog.length === ZERO) {\n      issues.push('è®¿é—®æ—¥å¿—ä¸ºç©º');\n      recommendations.push('å¼€å§‹è®°å½•å­˜å‚¨æ“ä½œä»¥æ”¶é›†åˆ†ææ•°æ®');\n    }\n\n    if (errorLog.length > accessLog.length * MAGIC_0_1) {\n      issues.push('é”™è¯¯ç‡è¿‡é«˜');\n      recommendations.push('æ£€æŸ¥å­˜å‚¨æ“ä½œé€»è¾‘ï¼Œå‡å°‘é”™è¯¯å‘ç”Ÿ');\n    }\n\n    // æ£€æŸ¥æ•°æ®æ—¶æ•ˆæ€§\n    const now = Date.now();\n    const oneHourAgo = now - SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n    const recentAccess = accessLog.filter(\n      (entry) => entry.timestamp > oneHourAgo,\n    );\n\n    if (recentAccess.length === ZERO && accessLog.length > ZERO) {\n      issues.push('æœ€è¿‘ä¸€å°æ—¶æ— æ´»åŠ¨è®°å½•');\n      recommendations.push('æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ');\n    }\n\n    // æ£€æŸ¥ç¼“å­˜çŠ¶æ€\n    const cacheStats = CacheManager.getCacheStats();\n    if (cacheStats.expiredEntries > cacheStats.validEntries) {\n      recommendations.push('æ¸…ç†è¿‡æœŸç¼“å­˜ä»¥æé«˜æ€§èƒ½');\n    }\n  } catch (error) {\n    issues.push(\n      `æ•°æ®éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n    );\n  }\n\n  return {\n    isValid: issues.length === ZERO,\n    issues,\n    recommendations,\n  };\n}\n\n// ==================== æ•°æ®å‹ç¼©å’Œä¼˜åŒ– ====================\n\n/**\n * å‹ç¼©åˆ†ææ•°æ®\n * Compress analytics data\n */\nexport function compressAnalyticsData(): {\n  originalSize: number;\n  compressedSize: number;\n  compressionRatio: number;\n  compressedData: string;\n} {\n  const originalData = exportAnalyticsDataAsJson();\n  const originalSize = originalData.length;\n\n  // ç®€å•çš„æ•°æ®å‹ç¼©ï¼šç§»é™¤ä¸å¿…è¦çš„ç©ºç™½å’Œé‡å¤ä¿¡æ¯\n  const compressedData = JSON.stringify(exportAnalyticsData());\n  const compressedSize = compressedData.length;\n\n  const compressionRatio =\n    originalSize > ZERO ? (ONE - compressedSize / originalSize) * PERCENTAGE_FULL : ZERO;\n\n  return {\n    originalSize,\n    compressedSize,\n    compressionRatio,\n    compressedData,\n  };\n}\n\n/**\n * ä¼˜åŒ–åˆ†ææ•°æ®å­˜å‚¨\n * Optimize analytics data storage\n */\nexport function optimizeAnalyticsStorage(): {\n  beforeOptimization: {\n    accessLogSize: number;\n    errorLogSize: number;\n    cacheSize: number;\n  };\n  afterOptimization: {\n    accessLogSize: number;\n    errorLogSize: number;\n    cacheSize: number;\n  };\n  optimizationResults: string[];\n} {\n  const results: string[] = [];\n\n  // è®°å½•ä¼˜åŒ–å‰çš„çŠ¶æ€\n  const beforeAccessLog = AccessLogger.getAccessLog();\n  const beforeErrorLog = ErrorLogger.getErrorLog();\n  const beforeCacheStats = CacheManager.getCacheStats();\n\n  const before = {\n    accessLogSize: beforeAccessLog.length,\n    errorLogSize: beforeErrorLog.length,\n    cacheSize: beforeCacheStats.totalEntries,\n  };\n\n  // æ‰§è¡Œä¼˜åŒ–\n\n  // 1. æ¸…ç†è¿‡æœŸç¼“å­˜\n  CacheManager.cleanExpiredCache();\n  results.push('æ¸…ç†äº†è¿‡æœŸç¼“å­˜');\n\n  // 2. å‹ç¼©è®¿é—®æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘1000æ¡ï¼‰\n  if (beforeAccessLog.length > ANIMATION_DURATION_VERY_SLOW) {\n    const recentAccessLog = beforeAccessLog.slice(ZERO, ANIMATION_DURATION_VERY_SLOW);\n    AccessLogger.clearAccessLog();\n    recentAccessLog.forEach((entry) => {\n      AccessLogger.logAccess(\n        entry.key,\n        entry.operation,\n        entry.success,\n        entry.responseTime,\n        entry.error,\n      );\n    });\n    results.push(`å‹ç¼©è®¿é—®æ—¥å¿—ï¼š${beforeAccessLog.length} -> 1000 æ¡`);\n  }\n\n  // 3. å‹ç¼©é”™è¯¯æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘500æ¡ï¼‰\n  if (beforeErrorLog.length > 500) {\n    const recentErrorLog = beforeErrorLog.slice(ZERO, 500);\n    ErrorLogger.clearErrorLog();\n    recentErrorLog.forEach((entry) => {\n      ErrorLogger.logError(\n        entry.error,\n        entry.context,\n        entry.severity,\n        entry.stack,\n      );\n    });\n    results.push(`å‹ç¼©é”™è¯¯æ—¥å¿—ï¼š${beforeErrorLog.length} -> 500 æ¡`);\n  }\n\n  // è®°å½•ä¼˜åŒ–åçš„çŠ¶æ€\n  const afterAccessLog = AccessLogger.getAccessLog();\n  const afterErrorLog = ErrorLogger.getErrorLog();\n  const afterCacheStats = CacheManager.getCacheStats();\n\n  const after = {\n    accessLogSize: afterAccessLog.length,\n    errorLogSize: afterErrorLog.length,\n    cacheSize: afterCacheStats.totalEntries,\n  };\n\n  if (results.length === ZERO) {\n    results.push('æ— éœ€ä¼˜åŒ–ï¼Œæ•°æ®å·²å¤„äºæœ€ä½³çŠ¶æ€');\n  }\n\n  return {\n    beforeOptimization: before,\n    afterOptimization: after,\n    optimizationResults: results,\n  };\n}\n\n// ==================== å·¥å…·å‡½æ•° ====================\n\n/**\n * æ ¼å¼åŒ–å­—èŠ‚å¤§å°\n * Format byte size\n */\nexport function formatByteSize(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB'];\n  let size = bytes;\n  let unitIndex = ZERO;\n\n  while (size >= BYTES_PER_KB && unitIndex < units.length - ONE) {\n    size /= BYTES_PER_KB;\n    unitIndex += ONE;\n  }\n\n  return `${size.toFixed(COUNT_PAIR)} ${units[unitIndex]}`;\n}\n\n/**\n * æ ¼å¼åŒ–æŒç»­æ—¶é—´\n * Format duration\n */\nexport function formatDuration(milliseconds: number): string {\n  const seconds = Math.floor(milliseconds / ANIMATION_DURATION_VERY_SLOW);\n  const minutes = Math.floor(seconds / SECONDS_PER_MINUTE);\n  const hours = Math.floor(minutes / SECONDS_PER_MINUTE);\n  const days = Math.floor(hours / HOURS_PER_DAY);\n\n  if (days > ZERO) {\n    return `${days}å¤© ${hours % HOURS_PER_DAY}å°æ—¶`;\n  }\n  if (hours > ZERO) {\n    return `${hours}å°æ—¶ ${minutes % SECONDS_PER_MINUTE}åˆ†é’Ÿ`;\n  }\n  if (minutes > ZERO) {\n    return `${minutes}åˆ†é’Ÿ ${seconds % SECONDS_PER_MINUTE}ç§’`;\n  }\n  return `${seconds}ç§’`;\n}\n\n/**\n * æ ¼å¼åŒ–ç™¾åˆ†æ¯”\n * Format percentage\n */\nexport function formatPercentage(value: number, decimals: number = ONE): string {\n  return `${value.toFixed(decimals)}%`;\n}\n\n/**\n * ç”Ÿæˆå”¯ä¸€ID\n * Generate unique ID\n */\nexport function generateUniqueId(): string {\n  return `analytics_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-cookie.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":110,"column":9,"nodeType":"MemberExpression","endLine":110,"endColumn":22},{"ruleId":"max-params","severity":2,"message":"Static method 'setWithExpiry' has too many parameters (4). Maximum allowed is 3.","line":139,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":139,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { MAGIC_4096 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, HOURS_PER_DAY, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { MAGIC_0_8 } from \"@/constants/decimal\";\nimport { CACHE_DURATIONS } from '@/constants/i18n-constants';\n/**\n * Cookie é…ç½®å¸¸é‡\n * Cookie configuration constants\n */\nexport const COOKIE_CONFIG = {\n  maxAge: CACHE_DURATIONS.COOKIE_MAX_AGE / ANIMATION_DURATION_VERY_SLOW, // è½¬æ¢ä¸ºç§’\n  sameSite: 'lax' as const,\n  secure:\n    typeof window !== 'undefined' && window.location.protocol === 'https:',\n  path: '/',\n} as const;\n\n/**\n * Cookie æ“ä½œå·¥å…·ç±»\n * Cookie management utility class\n */\nexport class CookieManager {\n  /**\n   * è®¾ç½® Cookie\n   * Set cookie with options\n   */\n  static set(name: string, value: string, options = COOKIE_CONFIG): void {\n    if (typeof document === 'undefined') return;\n\n    const optionsStr = Object.entries(options)\n      .map(([key, val]) => {\n        if (key === 'maxAge') return `max-age=${val}`;\n        if (key === 'sameSite') return `SameSite=${val}`;\n        if (key === 'secure' && val) return 'Secure';\n        if (key === 'path') return `Path=${val}`;\n        return '';\n      })\n      .filter(Boolean)\n      .join('; ');\n\n    document.cookie = `${name}=${encodeURIComponent(value)}; ${optionsStr}`;\n  }\n\n  /**\n   * è·å– Cookie å€¼\n   * Get cookie value by name\n   */\n  static get(name: string): string | null {\n    if (typeof document === 'undefined') return null;\n\n    // ä½¿ç”¨æ›´å®‰å…¨çš„cookieè§£ææ–¹æ³•\n    const cookies = document.cookie.split(';');\n    for (const cookie of cookies) {\n      const [cookieName, ...cookieValueParts] = cookie.trim().split('=');\n      if (cookieName !== name) continue;\n\n      const cookieValue = cookieValueParts.join('=');\n      if (!cookieValue) return null;\n\n      try {\n        return decodeURIComponent(cookieValue);\n      } catch {\n        // é™é»˜å¤„ç†URIè§£ç é”™è¯¯\n        if (process.env.NODE_ENV === 'development') {\n          // console.warn('Failed to decode cookie value:', error);\n        }\n        return null;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * åˆ é™¤ Cookie\n   * Remove cookie by name\n   */\n  static remove(name: string): void {\n    if (typeof document === 'undefined') return;\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  }\n\n  /**\n   * æ£€æŸ¥ Cookie æ˜¯å¦å­˜åœ¨\n   * Check if cookie exists\n   */\n  static exists(name: string): boolean {\n    return this.get(name) !== null;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰ Cookie\n   * Get all cookies as key-value pairs\n   */\n  static getAll(): Record<string, string> {\n    if (typeof document === 'undefined') return {};\n\n    const cookies: Record<string, string> = {};\n    const cookieStrings = document.cookie.split(';');\n\n    for (const cookie of cookieStrings) {\n      const [name, ...valueParts] = cookie.trim().split('=');\n      if (!name) continue;\n\n      const value = valueParts.join('=');\n      if (!value) continue;\n\n      try {\n        cookies[name] = decodeURIComponent(value);\n      } catch {\n        // é™é»˜å¤„ç†è§£ç é”™è¯¯\n        if (process.env.NODE_ENV === 'development') {\n          // console.warn(`Failed to decode cookie ${name}:`, error);\n        }\n      }\n    }\n\n    return cookies;\n  }\n\n  /**\n   * æ¸…é™¤æ‰€æœ‰ Cookie\n   * Clear all cookies\n   */\n  static clearAll(): void {\n    if (typeof document === 'undefined') return;\n\n    const cookies = this.getAll();\n    Object.keys(cookies).forEach((name) => {\n      this.remove(name);\n    });\n  }\n\n  /**\n   * è®¾ç½®å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„ Cookie\n   * Set cookie with expiration date\n   */\n  static setWithExpiry(\n    name: string,\n    value: string,\n    expiryDays: number,\n    options: Partial<typeof COOKIE_CONFIG> = {},\n  ): void {\n    const expiryDate = new Date();\n    expiryDate.setTime(expiryDate.getTime() + expiryDays * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n\n    const cookieOptions = {\n      ...COOKIE_CONFIG,\n      ...options,\n      expires: expiryDate.toUTCString(),\n    };\n\n    const optionsStr = Object.entries(cookieOptions)\n      .map(([key, val]) => {\n        if (key === 'maxAge') return `max-age=${val}`;\n        if (key === 'sameSite') return `SameSite=${val}`;\n        if (key === 'secure' && val) return 'Secure';\n        if (key === 'path') return `Path=${val}`;\n        if (key === 'expires') return `expires=${val}`;\n        return '';\n      })\n      .filter(Boolean)\n      .join('; ');\n\n    document.cookie = `${name}=${encodeURIComponent(value)}; ${optionsStr}`;\n  }\n\n  /**\n   * è·å– Cookie çš„è¿‡æœŸæ—¶é—´\n   * Get cookie expiration time (if available)\n   */\n  static getExpiry(_name: string): Date | null {\n    // Note: JavaScriptæ— æ³•ç›´æ¥è·å–Cookieçš„è¿‡æœŸæ—¶é—´\n    // è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºæ–‡æ¡£å®Œæ•´æ€§ï¼Œå®é™…ä½¿ç”¨ä¸­éœ€è¦åœ¨è®¾ç½®æ—¶è®°å½•\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\n        'Cookie expiry cannot be retrieved directly from JavaScript. ' +\n          'Consider storing expiry information separately if needed.',\n      );\n    }\n    return null;\n  }\n\n  /**\n   * æ£€æŸ¥ Cookie æ˜¯å¦æ”¯æŒ\n   * Check if cookies are supported\n   */\n  static isSupported(): boolean {\n    if (typeof document === 'undefined') return false;\n\n    try {\n      const testKey = '__cookie_test__';\n      const testValue = 'test';\n\n      this.set(testKey, testValue);\n      const retrieved = this.get(testKey);\n      this.remove(testKey);\n\n      return retrieved === testValue;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * è·å– Cookie å¤§å°ï¼ˆå­—èŠ‚ï¼‰\n   * Get cookie size in bytes\n   */\n  static getSize(name: string): number {\n    const value = this.get(name);\n    if (!value) return ZERO;\n\n    // è®¡ç®— Cookie çš„æ€»å¤§å°ï¼ˆåç§° + å€¼ + åˆ†éš”ç¬¦ï¼‰\n    return new Blob([`${name}=${value}`]).size;\n  }\n\n  /**\n   * è·å–æ‰€æœ‰ Cookie çš„æ€»å¤§å°\n   * Get total size of all cookies\n   */\n  static getTotalSize(): number {\n    if (typeof document === 'undefined') return ZERO;\n\n    return new Blob([document.cookie]).size;\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æ¥è¿‘ Cookie å¤§å°é™åˆ¶\n   * Check if approaching cookie size limit\n   */\n  static isNearLimit(threshold: number = MAGIC_0_8): boolean {\n    const maxSize = MAGIC_4096; // æ ‡å‡† Cookie å¤§å°é™åˆ¶\n    const currentSize = this.getTotalSize();\n\n    return currentSize / maxSize > threshold;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-core.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":37},{"ruleId":"max-params","severity":2,"message":"Function 'addDetectionRecord' has too many parameters (4). Maximum allowed is 3.","line":92,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":92,"endColumn":35},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":169,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":178,"endColumn":10},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":339,"column":43,"nodeType":"MemberExpression","endLine":339,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":368,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":368,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8714,8717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8714,8717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²æ ¸å¿ƒç®¡ç†\n * Locale Detection History Core Management\n *\n * è´Ÿè´£å†å²è®°å½•çš„åŸºç¡€æ“ä½œï¼šæ·»åŠ ã€è·å–ã€æ›´æ–°å’Œç¼“å­˜ç®¡ç†\n */\n\n'use client';\n\nimport { CACHE_LIMITS } from '@/constants/i18n-constants';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, DAYS_PER_MONTH, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { isLocaleDetectionHistory } from '@/lib/locale-storage-types';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  LocaleDetectionHistory,\n  LocaleDetectionRecord,\n  LocaleSource,\n  StorageOperationResult,\n} from '@/lib/locale-storage-types';\n\n// ==================== ç¼“å­˜ç®¡ç† ====================\n\n/**\n * å†å²è®°å½•ç¼“å­˜ç®¡ç†å™¨\n * History cache manager\n */\nexport class HistoryCacheManager {\n  private static cache: LocaleDetectionHistory | null = null;\n  private static cacheTimestamp = ZERO;\n  private static readonly CACHE_TTL = COUNT_TEN * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // 10 minutes\n\n  /**\n   * è·å–ç¼“å­˜çš„å†å²è®°å½•\n   * Get cached history\n   */\n  static getCachedHistory(): LocaleDetectionHistory | null {\n    if (Date.now() - this.cacheTimestamp > this.CACHE_TTL) {\n      this.cache = null;\n      return null;\n    }\n    return this.cache;\n  }\n\n  /**\n   * æ›´æ–°ç¼“å­˜\n   * Update cache\n   */\n  static updateCache(history: LocaleDetectionHistory): void {\n    this.cache = history;\n    this.cacheTimestamp = Date.now();\n  }\n\n  /**\n   * æ¸…é™¤ç¼“å­˜\n   * Clear cache\n   */\n  static clearCache(): void {\n    this.cache = null;\n    this.cacheTimestamp = ZERO;\n  }\n\n  /**\n   * è·å–ç¼“å­˜çŠ¶æ€\n   * Get cache status\n   */\n  static getCacheStatus(): {\n    isCached: boolean;\n    cacheAge: number;\n    cacheSize: number;\n  } {\n    const isCached =\n      this.cache !== null && Date.now() - this.cacheTimestamp <= this.CACHE_TTL;\n    const cacheAge = Date.now() - this.cacheTimestamp;\n    const cacheSize = this.cache ? JSON.stringify(this.cache).length : ZERO;\n\n    return {\n      isCached,\n      cacheAge,\n      cacheSize,\n    };\n  }\n}\n\n// ==================== æ ¸å¿ƒå†å²ç®¡ç† ====================\n\n/**\n * æ·»åŠ æ£€æµ‹è®°å½•\n * Add detection record\n */\nexport function addDetectionRecord(\n  locale: Locale,\n  source: LocaleSource,\n  confidence: number,\n  metadata?: Record<string, unknown>,\n): StorageOperationResult<LocaleDetectionHistory> {\n  const startTime = Date.now();\n\n  try {\n    const detection: LocaleDetectionRecord = {\n      locale,\n      source,\n      timestamp: Date.now(),\n      confidence: Math.max(ZERO, Math.min(ONE, confidence)),\n      metadata: metadata || {},\n    };\n\n    const result = updateDetectionHistory(detection);\n\n    if (result.success) {\n      // æ¸…é™¤ç¼“å­˜ä»¥ç¡®ä¿ä¸‹æ¬¡è·å–æœ€æ–°æ•°æ®\n      HistoryCacheManager.clearCache();\n    }\n\n    return {\n      ...result,\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * è·å–æ£€æµ‹å†å²\n * Get detection history\n */\nexport function getDetectionHistory(): StorageOperationResult<LocaleDetectionHistory> {\n  const startTime = Date.now();\n\n  try {\n    // é¦–å…ˆæ£€æŸ¥ç¼“å­˜\n    const cached = HistoryCacheManager.getCachedHistory();\n    if (cached) {\n      return {\n        success: true,\n        data: cached,\n        source: 'memory',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // ä»å­˜å‚¨ä¸­è·å–\n    const stored = LocalStorageManager.get<LocaleDetectionHistory>(\n      'locale_detection_history',\n    );\n\n    if (!stored) {\n      // åˆ›å»ºé»˜è®¤å†å²è®°å½•\n      const defaultHistory: LocaleDetectionHistory = {\n        detections: [],\n        history: [],\n        lastUpdated: Date.now(),\n        totalDetections: ZERO,\n      };\n\n      try {\n        LocalStorageManager.set('locale_detection_history', defaultHistory);\n        const saveResult = { success: true };\n\n        if (saveResult.success) {\n          HistoryCacheManager.updateCache(defaultHistory);\n          return {\n            success: true,\n            data: defaultHistory,\n            source: 'localStorage',\n            timestamp: Date.now(),\n            responseTime: Date.now() - startTime,\n          };\n        }\n      } catch (error) {\n        return {\n          success: false,\n          error:\n            error instanceof Error\n              ? error.message\n              : 'Failed to create default history',\n          source: 'localStorage',\n          timestamp: Date.now(),\n          responseTime: Date.now() - startTime,\n        };\n      }\n    }\n\n    // éªŒè¯æ•°æ®æ ¼å¼\n    if (!validateHistoryData(stored)) {\n      return {\n        success: false,\n        error: 'Invalid history data format',\n        source: 'localStorage',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // æ›´æ–°ç¼“å­˜\n    HistoryCacheManager.updateCache(stored);\n\n    return {\n      success: true,\n      data: stored,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * æ›´æ–°æ£€æµ‹å†å²\n * Update detection history\n */\nexport function updateDetectionHistory(\n  detection: LocaleDetectionRecord,\n): StorageOperationResult<LocaleDetectionHistory> {\n  const existingResult = getDetectionHistory();\n\n  if (!existingResult.success) {\n    return existingResult;\n  }\n\n  const history = existingResult.data!;\n\n  // æ·»åŠ æ–°è®°å½•åˆ°å†å²å¼€å¤´\n  history.history.unshift(detection);\n\n  // é™åˆ¶å†å²è®°å½•æ•°é‡\n  const maxRecords = CACHE_LIMITS.MAX_DETECTION_HISTORY || PERCENTAGE_FULL;\n  if (history.history.length > maxRecords) {\n    history.history = history.history.slice(ZERO, maxRecords);\n  }\n\n  // æ›´æ–°æ—¶é—´æˆ³\n  history.lastUpdated = Date.now();\n\n  // ä¿å­˜åˆ°å­˜å‚¨\n  try {\n    LocalStorageManager.set('locale_detection_history', history);\n    const saveResult = { success: true };\n\n    if (saveResult.success) {\n      // æ›´æ–°ç¼“å­˜\n      HistoryCacheManager.updateCache(history);\n      return {\n        success: true,\n        data: history,\n        source: 'localStorage',\n        timestamp: Date.now(),\n      };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to save history',\n      source: 'localStorage',\n      timestamp: Date.now(),\n    };\n  }\n\n  // é»˜è®¤è¿”å›å¤±è´¥ç»“æœ\n  return {\n    success: false,\n    error: 'Unknown error occurred',\n    source: 'localStorage',\n    timestamp: Date.now(),\n  };\n}\n\n/**\n * éªŒè¯å†å²æ•°æ®æ ¼å¼\n * Validate history data format\n */\nexport function validateHistoryData(\n  history: unknown,\n): history is LocaleDetectionHistory {\n  return isLocaleDetectionHistory(history);\n}\n\n/**\n * åˆ›å»ºé»˜è®¤å†å²è®°å½•\n * Create default history\n */\nexport function createDefaultHistory(): LocaleDetectionHistory {\n  return {\n    detections: [],\n    history: [],\n    lastUpdated: Date.now(),\n    totalDetections: ZERO,\n  };\n}\n\n/**\n * è·å–å†å²è®°å½•æ‘˜è¦\n * Get history summary\n */\nexport function getHistorySummary(): {\n  totalRecords: number;\n  lastUpdated: number;\n  oldestRecord: number;\n  newestRecord: number;\n  cacheStatus: ReturnType<typeof HistoryCacheManager.getCacheStatus>;\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      totalRecords: ZERO,\n      lastUpdated: ZERO,\n      oldestRecord: ZERO,\n      newestRecord: ZERO,\n      cacheStatus: HistoryCacheManager.getCacheStatus(),\n    };\n  }\n\n  const history = historyResult.data;\n  const records = history.history;\n\n  return {\n    totalRecords: records.length,\n    lastUpdated: history.lastUpdated,\n    oldestRecord:\n      records.length > ZERO ? records[records.length - ONE]!.timestamp : ZERO,\n    newestRecord: records.length > ZERO ? records[ZERO]!.timestamp : ZERO,\n    cacheStatus: HistoryCacheManager.getCacheStatus(),\n  };\n}\n\n/**\n * æ£€æŸ¥å†å²è®°å½•æ˜¯å¦éœ€è¦æ¸…ç†\n * Check if history needs cleanup\n */\nexport function needsCleanup(maxAge: number = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW): {\n  needsCleanup: boolean;\n  expiredCount: number;\n  totalCount: number;\n  recommendations: string[];\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      needsCleanup: false,\n      expiredCount: ZERO,\n      totalCount: ZERO,\n      recommendations: ['æ— æ³•è·å–å†å²è®°å½•'],\n    };\n  }\n\n  const history = historyResult.data;\n  const cutoffTime = Date.now() - maxAge;\n  const expiredRecords = history.history.filter(\n    (record: any) => record.timestamp < cutoffTime,\n  );\n  const totalCount = history.history.length;\n  const expiredCount = expiredRecords.length;\n\n  const recommendations: string[] = [];\n\n  if (expiredCount > ZERO) {\n    recommendations.push(`å‘ç° ${expiredCount} æ¡è¿‡æœŸè®°å½•ï¼Œå»ºè®®æ¸…ç†`);\n  }\n\n  if (totalCount > PERCENTAGE_FULL) {\n    recommendations.push(`å†å²è®°å½•è¿‡å¤š (${totalCount} æ¡)ï¼Œå»ºè®®æ¸…ç†æ—§è®°å½•`);\n  }\n\n  const maxRecords = CACHE_LIMITS.MAX_DETECTION_HISTORY || PERCENTAGE_FULL;\n  if (totalCount > maxRecords) {\n    recommendations.push(`è¶…å‡ºæœ€å¤§è®°å½•é™åˆ¶ (${maxRecords})ï¼Œå°†è‡ªåŠ¨æˆªæ–­`);\n  }\n\n  if (recommendations.length === ZERO) {\n    recommendations.push('å†å²è®°å½•çŠ¶æ€è‰¯å¥½ï¼Œæ— éœ€æ¸…ç†');\n  }\n\n  return {\n    needsCleanup: expiredCount > ZERO || totalCount > maxRecords,\n    expiredCount,\n    totalCount,\n    recommendations,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-events.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":154,"column":7,"nodeType":"MemberExpression","endLine":154,"endColumn":33},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":477,"column":49,"nodeType":"MemberExpression","endLine":477,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²äº‹ä»¶ç®¡ç†\n * Locale Detection History Event Management\n *\n * è´Ÿè´£å†å²è®°å½•ç›¸å…³çš„äº‹ä»¶ç›‘å¬ã€å‘å¸ƒå’Œç®¡ç†åŠŸèƒ½\n */\n\n'use client';\n\nimport { logger } from '@/lib/logger';\nimport { COUNT_TEN, ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport type {\n  StorageEvent,\n  StorageEventListener,\n} from '@/lib/locale-storage-types';\n\n// ==================== äº‹ä»¶ç®¡ç†å™¨ ====================\n\n/**\n * å†å²äº‹ä»¶ç®¡ç†å™¨\n * History event manager\n */\nexport class HistoryEventManager {\n  private static eventListeners: Map<string, StorageEventListener[]> =\n    new Map();\n  private static eventHistory: StorageEvent[] = [];\n  private static readonly MAX_EVENT_HISTORY = PERCENTAGE_FULL;\n\n  /**\n   * æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n   * Add event listener\n   */\n  static addEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, []);\n    }\n    this.eventListeners.get(eventType)!.push(listener);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   * Remove event listener\n   */\n  static removeEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    const listeners = this.eventListeners.get(eventType);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index > -ONE) {\n        listeners.splice(index, ONE);\n      }\n    }\n  }\n\n  /**\n   * ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨\n   * Remove all event listeners\n   */\n  static removeAllListeners(eventType?: string): void {\n    if (eventType) {\n      this.eventListeners.delete(eventType);\n    } else {\n      this.eventListeners.clear();\n    }\n  }\n\n  /**\n   * å‘å‡ºäº‹ä»¶\n   * Emit event\n   */\n  static emitEvent(event: StorageEvent): void {\n    // è®°å½•äº‹ä»¶å†å²\n    this.recordEvent(event);\n\n    // å‘é€ç»™ç‰¹å®šç±»å‹çš„ç›‘å¬å™¨\n    const listeners = this.eventListeners.get(event.type);\n    if (listeners) {\n      listeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error(`Error in history event listener for ${event.type}`, {\n            error: error as Error,\n          });\n        }\n      });\n    }\n\n    // å‘é€ç»™é€šç”¨ç›‘å¬å™¨\n    const allListeners = this.eventListeners.get('*');\n    if (allListeners) {\n      allListeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error('Error in universal history event listener', {\n            error: error as Error,\n          });\n        }\n      });\n    }\n  }\n\n  /**\n   * è®°å½•äº‹ä»¶å†å²\n   * Record event history\n   */\n  private static recordEvent(event: StorageEvent): void {\n    this.eventHistory.unshift(event);\n\n    // é™åˆ¶äº‹ä»¶å†å²é•¿åº¦\n    if (this.eventHistory.length > this.MAX_EVENT_HISTORY) {\n      this.eventHistory = this.eventHistory.slice(ZERO, this.MAX_EVENT_HISTORY);\n    }\n  }\n\n  /**\n   * è·å–äº‹ä»¶å†å²\n   * Get event history\n   */\n  static getEventHistory(limit?: number): StorageEvent[] {\n    return limit ? this.eventHistory.slice(ZERO, limit) : [...this.eventHistory];\n  }\n\n  /**\n   * æ¸…é™¤äº‹ä»¶å†å²\n   * Clear event history\n   */\n  static clearEventHistory(): void {\n    this.eventHistory = [];\n  }\n\n  /**\n   * è·å–ç›‘å¬å™¨ç»Ÿè®¡\n   * Get listener statistics\n   */\n  static getListenerStats(): {\n    totalListeners: number;\n    eventTypes: string[];\n    listenersByType: Record<string, number>;\n  } {\n    let totalListeners = ZERO;\n    const listenersByType: Record<string, number> = {};\n\n    for (const [eventType, listeners] of this.eventListeners.entries()) {\n      const count = listeners.length;\n      totalListeners += count;\n      listenersByType[eventType] = count;\n    }\n\n    return {\n      totalListeners,\n      eventTypes: Array.from(this.eventListeners.keys()),\n      listenersByType,\n    };\n  }\n}\n\n// ==================== äº‹ä»¶åˆ›å»ºå·¥å…· ====================\n\n/**\n * åˆ›å»ºå†å²è®°å½•æ·»åŠ äº‹ä»¶\n * Create history record added event\n */\nexport function createRecordAddedEvent(\n  locale: string,\n  source: string,\n  confidence: number,\n): StorageEvent {\n  return {\n    type: 'preference_saved',\n    data: {\n      locale,\n      source,\n      confidence,\n      action: 'add_record',\n    },\n    timestamp: Date.now(),\n    source: 'history_manager',\n  };\n}\n\n/**\n * åˆ›å»ºå†å²è®°å½•æ¸…ç†äº‹ä»¶\n * Create history cleanup event\n */\nexport function createCleanupEvent(\n  cleanupType: 'expired' | 'duplicates' | 'size_limit' | 'all',\n  removedCount: number,\n): StorageEvent {\n  return {\n    type: 'cache_cleared',\n    data: {\n      cleanupType,\n      removedCount,\n      action: 'cleanup',\n    },\n    timestamp: Date.now(),\n    source: 'history_manager',\n  };\n}\n\n/**\n * åˆ›å»ºå†å²è®°å½•å¯¼å‡ºäº‹ä»¶\n * Create history export event\n */\nexport function createExportEvent(\n  format: 'json' | 'backup',\n  recordCount: number,\n): StorageEvent {\n  return {\n    type: 'backup_created',\n    data: {\n      format,\n      recordCount,\n      action: 'export',\n    },\n    timestamp: Date.now(),\n    source: 'history_manager',\n  };\n}\n\n/**\n * åˆ›å»ºå†å²è®°å½•å¯¼å…¥äº‹ä»¶\n * Create history import event\n */\nexport function createImportEvent(\n  format: 'json' | 'backup',\n  recordCount: number,\n  success: boolean,\n): StorageEvent {\n  return {\n    type: 'backup_restored',\n    data: {\n      format,\n      recordCount,\n      success,\n      action: 'import',\n    },\n    timestamp: Date.now(),\n    source: 'history_manager',\n  };\n}\n\n/**\n * åˆ›å»ºå†å²è®°å½•é”™è¯¯äº‹ä»¶\n * Create history error event\n */\nexport function createErrorEvent(\n  operation: string,\n  error: string,\n): StorageEvent {\n  return {\n    type: 'history_error',\n    data: {\n      operation,\n      error,\n      action: 'error',\n    },\n    timestamp: Date.now(),\n    source: 'history_manager',\n  };\n}\n\n// ==================== äº‹ä»¶ç›‘å¬å™¨å·¥å…· ====================\n\n/**\n * åˆ›å»ºè°ƒè¯•äº‹ä»¶ç›‘å¬å™¨\n * Create debug event listener\n */\nexport function createDebugListener(\n  prefix: string = '[History]',\n): StorageEventListener {\n  return (event: StorageEvent) => {\n    logger.info(`${prefix} Event`, {\n      type: event.type,\n      data: event.data,\n      timestamp: new Date(event.timestamp).toISOString(),\n      source: event.source,\n    });\n  };\n}\n\n/**\n * åˆ›å»ºç»Ÿè®¡äº‹ä»¶ç›‘å¬å™¨\n * Create statistics event listener\n */\nexport function createStatsListener(): {\n  listener: StorageEventListener;\n  getStats: () => {\n    totalEvents: number;\n    eventsByType: Record<string, number>;\n    recentEvents: StorageEvent[];\n  };\n} {\n  const stats = {\n    totalEvents: ZERO,\n    eventsByType: {} as Record<string, number>,\n    recentEvents: [] as StorageEvent[],\n  };\n\n  const listener: StorageEventListener = (event: StorageEvent) => {\n    stats.totalEvents += ONE;\n    stats.eventsByType[event.type] = (stats.eventsByType[event.type] || ZERO) + ONE;\n\n    // ä¿ç•™æœ€è¿‘10ä¸ªäº‹ä»¶\n    stats.recentEvents.unshift(event);\n    if (stats.recentEvents.length > COUNT_TEN) {\n      stats.recentEvents = stats.recentEvents.slice(ZERO, COUNT_TEN);\n    }\n  };\n\n  const getStats = () => ({ ...stats });\n\n  return { listener, getStats };\n}\n\n/**\n * åˆ›å»ºé”™è¯¯ç›‘å¬å™¨\n * Create error listener\n */\nexport function createErrorListener(\n  onError: (error: string, operation: string, event: StorageEvent) => void,\n): StorageEventListener {\n  return (event: StorageEvent) => {\n    if (event.type === 'history_error' && event.data) {\n      const { operation, error } = event.data as {\n        operation: string;\n        error: string;\n      };\n      onError(error, operation, event);\n    }\n  };\n}\n\n// ==================== é¢„å®šä¹‰äº‹ä»¶ç›‘å¬å™¨ ====================\n\n/**\n * æ§åˆ¶å°æ—¥å¿—ç›‘å¬å™¨\n * Console log listener\n */\nexport const consoleLogListener: StorageEventListener = (\n  event: StorageEvent,\n) => {\n  const timestamp = new Date(event.timestamp).toLocaleTimeString();\n\n  switch (event.type as string) {\n    case 'history_record_added':\n      logger.info('å†å²è®°å½•å·²æ·»åŠ ', { timestamp, data: event.data });\n      break;\n    case 'history_cleanup':\n      logger.info('å†å²è®°å½•å·²æ¸…ç†', { timestamp, data: event.data });\n      break;\n    case 'history_export':\n      logger.info('å†å²è®°å½•å·²å¯¼å‡º', { timestamp, data: event.data });\n      break;\n    case 'history_import':\n      logger.info('å†å²è®°å½•å·²å¯¼å…¥', { timestamp, data: event.data });\n      break;\n    case 'history_error':\n      logger.error('å†å²è®°å½•é”™è¯¯', { timestamp, data: event.data as unknown });\n      break;\n    default:\n      logger.info(`å†å²è®°å½•äº‹ä»¶ (${event.type})`, {\n        timestamp,\n        data: event.data,\n      });\n  }\n};\n\n/**\n * æ€§èƒ½ç›‘æ§ç›‘å¬å™¨\n * Performance monitoring listener\n */\nexport const performanceListener: StorageEventListener = (\n  event: StorageEvent,\n) => {\n  // è®°å½•æ€§èƒ½ç›¸å…³çš„äº‹ä»¶\n  if ((event.type as string) === 'history_cleanup' && event.data) {\n    const { cleanupType, removedCount } = event.data as {\n      cleanupType: string;\n      removedCount: number;\n    };\n\n    if (removedCount > PERCENTAGE_FULL) {\n      logger.warn('å¤§é‡å†å²è®°å½•æ¸…ç†', { cleanupType, removedCount });\n    }\n  }\n\n  if (event.type === 'history_error') {\n    logger.error('å†å²è®°å½•æ“ä½œå¤±è´¥', { data: event.data as unknown });\n  }\n};\n\n// ==================== äº‹ä»¶ç®¡ç†å·¥å…·å‡½æ•° ====================\n\n/**\n * æ‰¹é‡æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n * Batch add event listeners\n */\nexport function addMultipleListeners(\n  listeners: Array<{\n    eventType: string;\n    listener: StorageEventListener;\n  }>,\n): void {\n  listeners.forEach(({ eventType, listener }) => {\n    HistoryEventManager.addEventListener(eventType, listener);\n  });\n}\n\n/**\n * è®¾ç½®é»˜è®¤äº‹ä»¶ç›‘å¬å™¨\n * Setup default event listeners\n */\nexport function setupDefaultListeners(\n  options: {\n    enableConsoleLog?: boolean;\n    enablePerformanceMonitoring?: boolean;\n    enableDebug?: boolean;\n  } = {},\n): void {\n  const {\n    enableConsoleLog = true,\n    enablePerformanceMonitoring = true,\n    enableDebug = false,\n  } = options;\n\n  if (enableConsoleLog) {\n    HistoryEventManager.addEventListener('*', consoleLogListener);\n  }\n\n  if (enablePerformanceMonitoring) {\n    HistoryEventManager.addEventListener('*', performanceListener);\n  }\n\n  if (enableDebug) {\n    HistoryEventManager.addEventListener(\n      '*',\n      createDebugListener('[HistoryDebug]'),\n    );\n  }\n}\n\n/**\n * æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨å’Œå†å²\n * Cleanup all event listeners and history\n */\nexport function cleanupEventSystem(): void {\n  HistoryEventManager.removeAllListeners();\n  HistoryEventManager.clearEventHistory();\n}\n\n/**\n * è·å–äº‹ä»¶ç³»ç»ŸçŠ¶æ€\n * Get event system status\n */\nexport function getEventSystemStatus(): {\n  isActive: boolean;\n  listenerStats: ReturnType<typeof HistoryEventManager.getListenerStats>;\n  eventHistoryCount: number;\n  lastEventTime: number | null;\n} {\n  const listenerStats = HistoryEventManager.getListenerStats();\n  const eventHistory = HistoryEventManager.getEventHistory(ONE);\n\n  return {\n    isActive: listenerStats.totalListeners > ZERO,\n    listenerStats,\n    eventHistoryCount: HistoryEventManager.getEventHistory().length,\n    lastEventTime: eventHistory.length > ZERO ? eventHistory[ZERO]!.timestamp : null,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-maintenance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-maintenance/backup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-maintenance/cleanup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-maintenance/import-export.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-maintenance/maintenance.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'performMaintenance' has too many statements (21). Maximum allowed is 20.","line":23,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":93,"endColumn":2},{"ruleId":"max-statements","severity":2,"message":"Function 'getMaintenanceRecommendations' has too many statements (31). Maximum allowed is 20.","line":99,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":188,"endColumn":2}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²ç»´æŠ¤å·¥å…·åŠŸèƒ½\n * Locale Detection History Maintenance Tools\n */\n\n'use client';\n\nimport { CACHE_LIMITS } from '@/constants/i18n-constants';\nimport { ANIMATION_DURATION_VERY_SLOW, DAYS_PER_MONTH, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO, MAGIC_1_5 } from '@/constants';\n\nimport { getDetectionHistory } from '@/lib/locale-storage-history-core';\nimport type { StorageOperationResult } from '@/lib/locale-storage-types';\nimport {\n  cleanupDuplicateDetections,\n  cleanupExpiredDetections,\n  limitHistorySize,\n} from '@/lib/locale-storage-history-maintenance/cleanup';\n\n/**\n * æ‰§è¡Œå®Œæ•´çš„å†å²ç»´æŠ¤\n * Perform complete history maintenance\n */\nexport function performMaintenance(options: {\n  cleanupExpired?: boolean;\n  maxAge?: number;\n  removeDuplicates?: boolean;\n  limitSize?: boolean;\n  maxRecords?: number;\n}): StorageOperationResult<{\n  expiredRemoved: number;\n  duplicatesRemoved: number;\n  sizeReduced: number;\n  finalCount: number;\n}> {\n  const startTime = Date.now();\n\n  try {\n    let expiredRemoved = ZERO;\n    let duplicatesRemoved = ZERO;\n    let sizeReduced = ZERO;\n\n    // æ¸…ç†è¿‡æœŸè®°å½•\n    if (options.cleanupExpired !== false) {\n      const expiredResult = cleanupExpiredDetections(options.maxAge);\n      if (expiredResult.success) {\n        expiredRemoved = expiredResult.data || ZERO;\n      }\n    }\n\n    // ç§»é™¤é‡å¤è®°å½•\n    if (options.removeDuplicates !== false) {\n      const duplicateResult = cleanupDuplicateDetections();\n      if (duplicateResult.success) {\n        duplicatesRemoved = duplicateResult.data || ZERO;\n      }\n    }\n\n    // é™åˆ¶å¤§å°\n    if (options.limitSize !== false) {\n      const limitResult = limitHistorySize(options.maxRecords);\n      if (limitResult.success) {\n        sizeReduced = limitResult.data || ZERO;\n      }\n    }\n\n    // è·å–æœ€ç»ˆè®¡æ•°\n    const historyResult = getDetectionHistory();\n    const finalCount = historyResult.success\n      ? historyResult.data!.history.length\n      : ZERO;\n\n    return {\n      success: true,\n      data: {\n        expiredRemoved,\n        duplicatesRemoved,\n        sizeReduced,\n        finalCount,\n      },\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * è·å–ç»´æŠ¤å»ºè®®\n * Get maintenance recommendations\n */\nexport function getMaintenanceRecommendations(): {\n  recommendations: string[];\n  urgency: 'low' | 'medium' | 'high';\n  estimatedBenefit: string;\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      recommendations: ['æ— æ³•è·å–å†å²è®°å½•ï¼Œå»ºè®®æ£€æŸ¥å­˜å‚¨çŠ¶æ€'],\n      urgency: 'high',\n      estimatedBenefit: 'æ¢å¤æ­£å¸¸åŠŸèƒ½',\n    };\n  }\n\n  const history = historyResult.data;\n  const records = history.history;\n  const recommendations: string[] = [];\n  let urgency: 'low' | 'medium' | 'high' = 'low';\n\n  // æ£€æŸ¥è®°å½•æ•°é‡\n  const maxRecords = CACHE_LIMITS.MAX_DETECTION_HISTORY || PERCENTAGE_FULL;\n  if (records.length > maxRecords * MAGIC_1_5) {\n    recommendations.push(`å†å²è®°å½•è¿‡å¤š (${records.length})ï¼Œå»ºè®®æ¸…ç†`);\n    urgency = 'high';\n  } else if (records.length > maxRecords) {\n    recommendations.push(`å†å²è®°å½•è¾ƒå¤š (${records.length})ï¼Œè€ƒè™‘æ¸…ç†`);\n    urgency = urgency === 'low' ? 'medium' : urgency;\n  }\n\n  // æ£€æŸ¥è¿‡æœŸè®°å½•\n  const thirtyDaysAgo = Date.now() - DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n  const expiredCount = records.filter(\n    (r) => r.timestamp < thirtyDaysAgo,\n  ).length;\n\n  if (expiredCount > ZERO) {\n    recommendations.push(`å‘ç° ${expiredCount} æ¡è¿‡æœŸè®°å½•ï¼Œå»ºè®®æ¸…ç†`);\n    urgency = urgency === 'low' ? 'medium' : urgency;\n  }\n\n  // æ£€æŸ¥é‡å¤è®°å½•\n  const uniqueKeys = new Set();\n  let duplicateCount = ZERO;\n\n  records.forEach((record) => {\n    const key = `${record.locale}-${record.source}-${record.timestamp}`;\n    if (uniqueKeys.has(key)) {\n      duplicateCount += ONE;\n    } else {\n      uniqueKeys.add(key);\n    }\n  });\n\n  if (duplicateCount > ZERO) {\n    recommendations.push(`å‘ç° ${duplicateCount} æ¡é‡å¤è®°å½•ï¼Œå»ºè®®æ¸…ç†`);\n  }\n\n  // æ£€æŸ¥æ•°æ®å®Œæ•´æ€§\n  const invalidRecords = records.filter(\n    (record) =>\n      !record.locale ||\n      !record.source ||\n      !record.timestamp ||\n      record.confidence < ZERO ||\n      record.confidence > ONE,\n  );\n\n  if (invalidRecords.length > ZERO) {\n    recommendations.push(`å‘ç° ${invalidRecords.length} æ¡æ— æ•ˆè®°å½•ï¼Œå»ºè®®æ¸…ç†`);\n    urgency = 'high';\n  }\n\n  if (recommendations.length === ZERO) {\n    recommendations.push('å†å²è®°å½•çŠ¶æ€è‰¯å¥½ï¼Œæ— éœ€ç»´æŠ¤');\n  }\n\n  const estimatedBenefit =\n    urgency === 'high'\n      ? 'æ˜¾è‘—æå‡æ€§èƒ½å’Œç¨³å®šæ€§'\n      : urgency === 'medium'\n        ? 'æ”¹å–„å­˜å‚¨æ•ˆç‡'\n        : 'ä¿æŒç³»ç»Ÿæ•´æ´';\n\n  return {\n    recommendations,\n    urgency,\n    estimatedBenefit,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-query.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'queryDetections' has too many statements (24). Maximum allowed is 20.","line":128,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":228,"endColumn":2},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_maxTime'.","line":449,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":449,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²æŸ¥è¯¢å’Œè¿‡æ»¤\n * Locale Detection History Query and Filtering\n *\n * è´Ÿè´£å†å²è®°å½•çš„æŸ¥è¯¢ã€è¿‡æ»¤å’Œæœç´¢åŠŸèƒ½\n */\n\n'use client';\n\nimport { getDetectionHistory } from '@/lib/locale-storage-history-core';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type { LocaleDetectionRecord } from '@/lib/locale-storage-types';\nimport type { Locale } from '@/types/i18n';\n\n// ==================== åŸºç¡€æŸ¥è¯¢åŠŸèƒ½ ====================\n\n/**\n * è·å–æœ€è¿‘çš„æ£€æµ‹è®°å½•\n * Get recent detections\n */\nexport function getRecentDetections(\n  limit: number = COUNT_TEN,\n): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  return historyResult.data.history.slice(ZERO, limit);\n}\n\n/**\n * æŒ‰æ¥æºè·å–æ£€æµ‹è®°å½•\n * Get detections by source\n */\nexport function getDetectionsBySource(source: string): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  return historyResult.data.history.filter(\n    (record) => record.source === source,\n  );\n}\n\n/**\n * æŒ‰è¯­è¨€è·å–æ£€æµ‹è®°å½•\n * Get detections by locale\n */\nexport function getDetectionsByLocale(locale: Locale): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  return historyResult.data.history.filter(\n    (record) => record.locale === locale,\n  );\n}\n\n/**\n * æŒ‰æ—¶é—´èŒƒå›´è·å–æ£€æµ‹è®°å½•\n * Get detections by time range\n */\nexport function getDetectionsByTimeRange(\n  startTime: number,\n  endTime: number,\n): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  return historyResult.data.history.filter(\n    (record) => record.timestamp >= startTime && record.timestamp <= endTime,\n  );\n}\n\n/**\n * æŒ‰ç½®ä¿¡åº¦èŒƒå›´è·å–æ£€æµ‹è®°å½•\n * Get detections by confidence range\n */\nexport function getDetectionsByConfidence(\n  minConfidence: number,\n  maxConfidence: number = ONE,\n): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  return historyResult.data.history.filter(\n    (record) =>\n      record.confidence >= minConfidence && record.confidence <= maxConfidence,\n  );\n}\n\n// ==================== é«˜çº§æŸ¥è¯¢åŠŸèƒ½ ====================\n\n/**\n * æŸ¥è¯¢æ¡ä»¶æ¥å£\n * Query conditions interface\n */\nexport interface QueryConditions {\n  locale?: Locale;\n  source?: string;\n  startTime?: number;\n  endTime?: number;\n  minConfidence?: number;\n  maxConfidence?: number;\n  limit?: number;\n  offset?: number;\n  sortBy?: 'timestamp' | 'confidence' | 'locale' | 'source';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * å¤åˆæŸ¥è¯¢æ£€æµ‹è®°å½•\n * Complex query for detection records\n */\nexport function queryDetections(conditions: QueryConditions): {\n  records: LocaleDetectionRecord[];\n  totalCount: number;\n  hasMore: boolean;\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      records: [],\n      totalCount: ZERO,\n      hasMore: false,\n    };\n  }\n\n  let records = historyResult.data.history;\n\n  // åº”ç”¨è¿‡æ»¤æ¡ä»¶\n  if (conditions.locale) {\n    records = records.filter((record) => record.locale === conditions.locale);\n  }\n\n  if (conditions.source) {\n    records = records.filter((record) => record.source === conditions.source);\n  }\n\n  if (conditions.startTime !== undefined) {\n    records = records.filter(\n      (record) => record.timestamp >= conditions.startTime!,\n    );\n  }\n\n  if (conditions.endTime !== undefined) {\n    records = records.filter(\n      (record) => record.timestamp <= conditions.endTime!,\n    );\n  }\n\n  if (conditions.minConfidence !== undefined) {\n    records = records.filter(\n      (record) => record.confidence >= conditions.minConfidence!,\n    );\n  }\n\n  if (conditions.maxConfidence !== undefined) {\n    records = records.filter(\n      (record) => record.confidence <= conditions.maxConfidence!,\n    );\n  }\n\n  // æ’åº\n  if (conditions.sortBy) {\n    records.sort((a, b) => {\n      let aValue: string | number;\n      let bValue: string | number;\n\n      switch (conditions.sortBy) {\n        case 'timestamp':\n          aValue = a.timestamp;\n          bValue = b.timestamp;\n          break;\n        case 'confidence':\n          aValue = a.confidence;\n          bValue = b.confidence;\n          break;\n        case 'locale':\n          aValue = a.locale;\n          bValue = b.locale;\n          break;\n        case 'source':\n          aValue = a.source;\n          bValue = b.source;\n          break;\n        default:\n          return ZERO;\n      }\n\n      if (aValue < bValue) {\n        return conditions.sortOrder === 'desc' ? ONE : -ONE;\n      }\n      if (aValue > bValue) {\n        return conditions.sortOrder === 'desc' ? -ONE : ONE;\n      }\n      return ZERO;\n    });\n  }\n\n  const totalCount = records.length;\n\n  // åº”ç”¨åˆ†é¡µ\n  const offset = conditions.offset || ZERO;\n  const limit = conditions.limit || totalCount;\n  const paginatedRecords = records.slice(offset, offset + limit);\n  const hasMore = offset + limit < totalCount;\n\n  return {\n    records: paginatedRecords,\n    totalCount,\n    hasMore,\n  };\n}\n\n/**\n * æœç´¢æ£€æµ‹è®°å½•\n * Search detection records\n */\nexport function searchDetections(searchTerm: string): LocaleDetectionRecord[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const term = searchTerm.toLowerCase();\n\n  return historyResult.data.history.filter((record) => {\n    // æœç´¢è¯­è¨€ä»£ç \n    if (record.locale.toLowerCase().includes(term)) {\n      return true;\n    }\n\n    // æœç´¢æ¥æº\n    if (record.source.toLowerCase().includes(term)) {\n      return true;\n    }\n\n    // æœç´¢å…ƒæ•°æ®\n    if (record.metadata) {\n      const metadataStr = JSON.stringify(record.metadata).toLowerCase();\n      if (metadataStr.includes(term)) {\n        return true;\n      }\n    }\n\n    return false;\n  });\n}\n\n// ==================== èšåˆæŸ¥è¯¢åŠŸèƒ½ ====================\n\n/**\n * è·å–å”¯ä¸€çš„è¯­è¨€åˆ—è¡¨\n * Get unique locales\n */\nexport function getUniqueLocales(): Locale[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const locales = new Set<Locale>();\n  historyResult.data.history.forEach((record) => {\n    locales.add(record.locale);\n  });\n\n  return Array.from(locales).sort();\n}\n\n/**\n * è·å–å”¯ä¸€çš„æ¥æºåˆ—è¡¨\n * Get unique sources\n */\nexport function getUniqueSources(): string[] {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const sources = new Set<string>();\n  historyResult.data.history.forEach((record) => {\n    sources.add(record.source);\n  });\n\n  return Array.from(sources).sort();\n}\n\n/**\n * æŒ‰è¯­è¨€åˆ†ç»„ç»Ÿè®¡\n * Group by locale statistics\n */\nexport function getLocaleGroupStats(): Array<{\n  locale: Locale;\n  count: number;\n  percentage: number;\n  avgConfidence: number;\n  lastDetection: number;\n}> {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const records = historyResult.data.history;\n  const totalRecords = records.length;\n\n  if (totalRecords === ZERO) {\n    return [];\n  }\n\n  const localeStats = new Map<\n    Locale,\n    {\n      count: number;\n      totalConfidence: number;\n      lastDetection: number;\n    }\n  >();\n\n  records.forEach((record) => {\n    const existing = localeStats.get(record.locale) || {\n      count: ZERO,\n      totalConfidence: ZERO,\n      lastDetection: ZERO,\n    };\n\n    existing.count += ONE;\n    existing.totalConfidence += record.confidence;\n    existing.lastDetection = Math.max(existing.lastDetection, record.timestamp);\n\n    localeStats.set(record.locale, existing);\n  });\n\n  return Array.from(localeStats.entries())\n    .map(([locale, stats]) => ({\n      locale,\n      count: stats.count,\n      percentage: (stats.count / totalRecords) * PERCENTAGE_FULL,\n      avgConfidence: stats.totalConfidence / stats.count,\n      lastDetection: stats.lastDetection,\n    }))\n    .sort((a, b) => b.count - a.count);\n}\n\n/**\n * æŒ‰æ¥æºåˆ†ç»„ç»Ÿè®¡\n * Group by source statistics\n */\nexport function getSourceGroupStats(): Array<{\n  source: string;\n  count: number;\n  percentage: number;\n  avgConfidence: number;\n  lastDetection: number;\n}> {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const records = historyResult.data.history;\n  const totalRecords = records.length;\n\n  if (totalRecords === ZERO) {\n    return [];\n  }\n\n  const sourceStats = new Map<\n    string,\n    {\n      count: number;\n      totalConfidence: number;\n      lastDetection: number;\n    }\n  >();\n\n  records.forEach((record) => {\n    const existing = sourceStats.get(record.source) || {\n      count: ZERO,\n      totalConfidence: ZERO,\n      lastDetection: ZERO,\n    };\n\n    existing.count += ONE;\n    existing.totalConfidence += record.confidence;\n    existing.lastDetection = Math.max(existing.lastDetection, record.timestamp);\n\n    sourceStats.set(record.source, existing);\n  });\n\n  return Array.from(sourceStats.entries())\n    .map(([source, stats]) => ({\n      source,\n      count: stats.count,\n      percentage: (stats.count / totalRecords) * PERCENTAGE_FULL,\n      avgConfidence: stats.totalConfidence / stats.count,\n      lastDetection: stats.lastDetection,\n    }))\n    .sort((a, b) => b.count - a.count);\n}\n\n/**\n * è·å–æ—¶é—´åˆ†å¸ƒç»Ÿè®¡\n * Get time distribution statistics\n */\nexport function getTimeDistributionStats(\n  bucketSize: number = HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n): Array<{\n  startTime: number;\n  endTime: number;\n  count: number;\n  avgConfidence: number;\n}> {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return [];\n  }\n\n  const records = historyResult.data.history;\n\n  if (records.length === ZERO) {\n    return [];\n  }\n\n  // æ‰¾åˆ°æ—¶é—´èŒƒå›´\n  const timestamps = records.map((r) => r.timestamp);\n  const minTime = Math.min(...timestamps);\n  const _maxTime = Math.max(...timestamps);\n  // æœ€å¤§æ—¶é—´å·²è®¡ç®—ä½†åœ¨æ­¤å¤„æœªç›´æ¥ä½¿ç”¨\n\n  // åˆ›å»ºæ—¶é—´æ¡¶\n  const buckets = new Map<\n    number,\n    {\n      count: number;\n      totalConfidence: number;\n    }\n  >();\n\n  records.forEach((record) => {\n    const bucketStart =\n      Math.floor((record.timestamp - minTime) / bucketSize) * bucketSize +\n      minTime;\n    const existing = buckets.get(bucketStart) || {\n      count: ZERO,\n      totalConfidence: ZERO,\n    };\n\n    existing.count += ONE;\n    existing.totalConfidence += record.confidence;\n\n    buckets.set(bucketStart, existing);\n  });\n\n  return Array.from(buckets.entries())\n    .map(([startTime, stats]) => ({\n      startTime,\n      endTime: startTime + bucketSize,\n      count: stats.count,\n      avgConfidence: stats.totalConfidence / stats.count,\n    }))\n    .sort((a, b) => a.startTime - b.startTime);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history-stats.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'getDetectionStats' has too many statements (31). Maximum allowed is 20.","line":29,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":156,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":205,"column":21,"nodeType":"MemberExpression","endLine":205,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":212,"column":21,"nodeType":"MemberExpression","endLine":212,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":316,"column":47,"nodeType":"MemberExpression","endLine":316,"endColumn":59},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":326,"column":7,"nodeType":"MemberExpression","endLine":326,"endColumn":48},{"ruleId":"max-statements","severity":2,"message":"Function 'generateHistoryInsights' has too many statements (39). Maximum allowed is 20.","line":345,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":438,"endColumn":2},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_localeStats'.","line":352,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":352,"endColumn":45},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sourceStats'.","line":353,"column":9,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":353,"endColumn":45},{"ruleId":"max-statements","severity":2,"message":"Function 'getPerformanceMetrics' has too many statements (27). Maximum allowed is 20.","line":444,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":533,"endColumn":2}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²ç»Ÿè®¡å’Œåˆ†æ\n * Locale Detection History Statistics and Analysis\n *\n * è´Ÿè´£å†å²è®°å½•çš„ç»Ÿè®¡åˆ†æã€è¶‹åŠ¿åˆ†æå’Œæ´å¯Ÿç”Ÿæˆ\n */\n\n'use client';\n\nimport { MAGIC_6 } from \"@/constants/count\";\nimport { ANGLE_90_DEG, ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, DAYS_PER_MONTH, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { MAGIC_0_1, MAGIC_0_5, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport { getDetectionHistory } from '@/lib/locale-storage-history-core';\nimport type { } from '@/lib/locale-storage-types';\nimport type { Locale } from '@/types/i18n';\nimport {\n  getLocaleGroupStats,\n  getSourceGroupStats,\n} from '@/lib/locale-storage-history-query';\n\n// ==================== åŸºç¡€ç»Ÿè®¡åŠŸèƒ½ ====================\n\n/**\n * è·å–æ£€æµ‹ç»Ÿè®¡ä¿¡æ¯\n * Get detection statistics\n */\nexport function getDetectionStats(): {\n  totalDetections: number;\n  uniqueLocales: number;\n  uniqueSources: number;\n  averageConfidence: number;\n  mostDetectedLocale: { locale: Locale; count: number } | null;\n  mostUsedSource: { source: string; count: number } | null;\n  detectionFrequency: number; // detections per day\n  confidenceDistribution: {\n    high: number; // > 0.8\n    medium: number; // 0.5 - 0.8\n    low: number; // < 0.5\n  };\n  timeSpan: {\n    oldest: number;\n    newest: number;\n    spanDays: number;\n  };\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      totalDetections: ZERO,\n      uniqueLocales: ZERO,\n      uniqueSources: ZERO,\n      averageConfidence: ZERO,\n      mostDetectedLocale: null,\n      mostUsedSource: null,\n      detectionFrequency: ZERO,\n      confidenceDistribution: { high: ZERO, medium: ZERO, low: ZERO },\n      timeSpan: { oldest: ZERO, newest: ZERO, spanDays: ZERO },\n    };\n  }\n\n  const records = historyResult.data.history;\n  const totalDetections = records.length;\n\n  if (totalDetections === ZERO) {\n    return {\n      totalDetections: ZERO,\n      uniqueLocales: ZERO,\n      uniqueSources: ZERO,\n      averageConfidence: ZERO,\n      mostDetectedLocale: null,\n      mostUsedSource: null,\n      detectionFrequency: ZERO,\n      confidenceDistribution: { high: ZERO, medium: ZERO, low: ZERO },\n      timeSpan: { oldest: ZERO, newest: ZERO, spanDays: ZERO },\n    };\n  }\n\n  // åŸºç¡€ç»Ÿè®¡\n  const locales = new Set<Locale>();\n  const sources = new Set<string>();\n  let totalConfidence = ZERO;\n  let highConfidence = ZERO;\n  let mediumConfidence = ZERO;\n  let lowConfidence = ZERO;\n\n  const localeCounts = new Map<Locale, number>();\n  const sourceCounts = new Map<string, number>();\n\n  records.forEach((record) => {\n    locales.add(record.locale);\n    sources.add(record.source);\n    totalConfidence += record.confidence;\n\n    // ç½®ä¿¡åº¦åˆ†å¸ƒ\n    if (record.confidence > MAGIC_0_8) {\n      highConfidence += ONE;\n    } else if (record.confidence >= MAGIC_0_5) {\n      mediumConfidence += ONE;\n    } else {\n      lowConfidence += ONE;\n    }\n\n    // è®¡æ•°ç»Ÿè®¡\n    localeCounts.set(record.locale, (localeCounts.get(record.locale) || ZERO) + ONE);\n    sourceCounts.set(record.source, (sourceCounts.get(record.source) || ZERO) + ONE);\n  });\n\n  // æœ€å¸¸æ£€æµ‹çš„è¯­è¨€\n  let mostDetectedLocale: { locale: Locale; count: number } | null = null;\n  for (const [locale, count] of localeCounts.entries()) {\n    if (!mostDetectedLocale || count > mostDetectedLocale.count) {\n      mostDetectedLocale = { locale, count };\n    }\n  }\n\n  // æœ€å¸¸ç”¨çš„æ¥æº\n  let mostUsedSource: { source: string; count: number } | null = null;\n  for (const [source, count] of sourceCounts.entries()) {\n    if (!mostUsedSource || count > mostUsedSource.count) {\n      mostUsedSource = { source, count };\n    }\n  }\n\n  // æ—¶é—´è·¨åº¦\n  const timestamps = records.map((r) => r.timestamp);\n  const oldest = Math.min(...timestamps);\n  const newest = Math.max(...timestamps);\n  const spanMs = newest - oldest;\n  const spanDays = spanMs / (HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n\n  // æ£€æµ‹é¢‘ç‡ï¼ˆæ¯å¤©ï¼‰\n  const detectionFrequency = spanDays > ZERO ? totalDetections / spanDays : ZERO;\n\n  return {\n    totalDetections,\n    uniqueLocales: locales.size,\n    uniqueSources: sources.size,\n    averageConfidence: totalConfidence / totalDetections,\n    mostDetectedLocale,\n    mostUsedSource,\n    detectionFrequency,\n    confidenceDistribution: {\n      high: highConfidence,\n      medium: mediumConfidence,\n      low: lowConfidence,\n    },\n    timeSpan: {\n      oldest,\n      newest,\n      spanDays,\n    },\n  };\n}\n\n// ==================== è¶‹åŠ¿åˆ†æåŠŸèƒ½ ====================\n\n/**\n * è·å–æ£€æµ‹è¶‹åŠ¿\n * Get detection trends\n */\nexport function getDetectionTrends(days: number = DAYS_PER_WEEK): {\n  dailyDetections: Array<{\n    date: string;\n    count: number;\n    avgConfidence: number;\n  }>;\n  weeklyGrowth: number;\n  monthlyGrowth: number;\n  trendDirection: 'increasing' | 'decreasing' | 'stable';\n  predictions: Array<{ date: string; predictedCount: number }>;\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      dailyDetections: [],\n      weeklyGrowth: ZERO,\n      monthlyGrowth: ZERO,\n      trendDirection: 'stable',\n      predictions: [],\n    };\n  }\n\n  const records = historyResult.data.history;\n  const now = Date.now();\n  const startTime = now - days * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n\n  // è¿‡æ»¤æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„è®°å½•\n  const recentRecords = records.filter(\n    (record) => record.timestamp >= startTime,\n  );\n\n  // æŒ‰å¤©åˆ†ç»„\n  const dailyData = new Map<\n    string,\n    { count: number; totalConfidence: number }\n  >();\n\n  // åˆå§‹åŒ–æ‰€æœ‰æ—¥æœŸ\n  for (let i = ZERO; i < days; i++) {\n    const date = new Date(now - i * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n    const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n    dailyData.set(dateStr, { count: ZERO, totalConfidence: ZERO });\n  }\n\n  // å¡«å……å®é™…æ•°æ®\n  recentRecords.forEach((record) => {\n    const date = new Date(record.timestamp);\n    const dateStr = date.toISOString().split('T')[ZERO] || date.toISOString();\n    const existing = dailyData.get(dateStr);\n\n    if (existing) {\n      existing.count += ONE;\n      existing.totalConfidence += record.confidence;\n    }\n  });\n\n  // è½¬æ¢ä¸ºæ•°ç»„å¹¶æ’åº\n  const dailyDetections = Array.from(dailyData.entries())\n    .map(([date, data]) => ({\n      date,\n      count: data.count,\n      avgConfidence: data.count > ZERO ? data.totalConfidence / data.count : ZERO,\n    }))\n    .sort((a, b) => a.date.localeCompare(b.date));\n\n  // è®¡ç®—å¢é•¿ç‡\n  const weeklyGrowth = calculateGrowthRate(dailyDetections, DAYS_PER_WEEK);\n  const monthlyGrowth = calculateGrowthRate(dailyDetections, DAYS_PER_MONTH);\n\n  // ç¡®å®šè¶‹åŠ¿æ–¹å‘\n  const trendDirection = determineTrendDirection(dailyDetections);\n\n  // ç”Ÿæˆé¢„æµ‹\n  const predictions = generatePredictions(dailyDetections, COUNT_TRIPLE);\n\n  return {\n    dailyDetections,\n    weeklyGrowth,\n    monthlyGrowth,\n    trendDirection,\n    predictions,\n  };\n}\n\n/**\n * è®¡ç®—å¢é•¿ç‡\n * Calculate growth rate\n */\nfunction calculateGrowthRate(\n  dailyData: Array<{ date: string; count: number; avgConfidence: number }>,\n  period: number,\n): number {\n  if (dailyData.length < period) return ZERO;\n\n  const recent = dailyData.slice(-period);\n  const previous = dailyData.slice(-period * COUNT_PAIR, -period);\n\n  if (previous.length === ZERO) return ZERO;\n\n  const recentAvg =\n    recent.reduce((sum, day) => sum + day.count, ZERO) / recent.length;\n  const previousAvg =\n    previous.reduce((sum, day) => sum + day.count, ZERO) / previous.length;\n\n  return previousAvg > ZERO ? ((recentAvg - previousAvg) / previousAvg) * PERCENTAGE_FULL : ZERO;\n}\n\n/**\n * ç¡®å®šè¶‹åŠ¿æ–¹å‘\n * Determine trend direction\n */\nfunction determineTrendDirection(\n  dailyData: Array<{ date: string; count: number; avgConfidence: number }>,\n): 'increasing' | 'decreasing' | 'stable' {\n  if (dailyData.length < COUNT_TRIPLE) return 'stable';\n\n  const recent = dailyData.slice(-COUNT_TRIPLE);\n  const counts = recent.map((d) => d.count);\n\n  // ç®€å•çš„çº¿æ€§å›å½’æ–œç‡\n  const n = counts.length;\n  const sumX = (n * (n - ONE)) / COUNT_PAIR;\n  const sumY = counts.reduce((sum, count) => sum + count, ZERO);\n  const sumXY = counts.reduce((sum, count, index) => sum + index * count, ZERO);\n  const sumX2 = (n * (n - ONE) * (COUNT_PAIR * n - ONE)) / MAGIC_6;\n\n  const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n\n  if (slope > MAGIC_0_1) return 'increasing';\n  if (slope < -MAGIC_0_1) return 'decreasing';\n  return 'stable';\n}\n\n/**\n * ç”Ÿæˆé¢„æµ‹\n * Generate predictions\n */\nfunction generatePredictions(\n  dailyData: Array<{ date: string; count: number; avgConfidence: number }>,\n  futureDays: number,\n): Array<{ date: string; predictedCount: number }> {\n  if (dailyData.length < COUNT_TRIPLE) return [];\n\n  // ä½¿ç”¨æœ€è¿‘7å¤©çš„æ•°æ®è¿›è¡Œé¢„æµ‹\n  const recent = dailyData.slice(-Math.min(DAYS_PER_WEEK, dailyData.length));\n  const avgCount =\n    recent.reduce((sum, day) => sum + day.count, ZERO) / recent.length;\n\n  // ç®€å•çš„è¶‹åŠ¿é¢„æµ‹\n  const trend =\n    recent.length > ONE\n      ? (recent[recent.length - ONE]!.count - recent[ZERO]!.count) /\n        (recent.length - ONE)\n      : ZERO;\n\n  const predictions: Array<{ date: string; predictedCount: number }> = [];\n\n  for (let i = ONE; i <= futureDays; i++) {\n    const futureDate = new Date();\n    futureDate.setDate(futureDate.getDate() + i);\n    const dateStr =\n      futureDate.toISOString().split('T')[ZERO] || futureDate.toISOString();\n\n    const predictedCount = Math.max(ZERO, Math.round(avgCount + trend * i));\n\n    predictions.push({\n      date: dateStr,\n      predictedCount,\n    });\n  }\n\n  return predictions;\n}\n\n// ==================== æ´å¯Ÿç”ŸæˆåŠŸèƒ½ ====================\n\n/**\n * ç”Ÿæˆå†å²æ´å¯Ÿ\n * Generate history insights\n */\nexport function generateHistoryInsights(): {\n  insights: string[];\n  recommendations: string[];\n  alerts: string[];\n} {\n  const stats = getDetectionStats();\n  const trends = getDetectionTrends();\n  const _localeStats = getLocaleGroupStats();\n  const _sourceStats = getSourceGroupStats();\n  // ç»Ÿè®¡æ•°æ®å·²è·å–ä½†åœ¨æ­¤å¤„æœªç›´æ¥ä½¿ç”¨\n\n  const insights: string[] = [];\n  const recommendations: string[] = [];\n  const alerts: string[] = [];\n\n  // åŸºç¡€æ´å¯Ÿ\n  if (stats.totalDetections > ZERO) {\n    insights.push(`æ€»å…±è®°å½•äº† ${stats.totalDetections} æ¬¡è¯­è¨€æ£€æµ‹`);\n    insights.push(`æ£€æµ‹åˆ° ${stats.uniqueLocales} ç§ä¸åŒçš„è¯­è¨€`);\n    insights.push(\n      `å¹³å‡ç½®ä¿¡åº¦ä¸º ${(stats.averageConfidence * PERCENTAGE_FULL).toFixed(ONE)}%`,\n    );\n  }\n\n  // è¯­è¨€åå¥½æ´å¯Ÿ\n  if (stats.mostDetectedLocale) {\n    const percentage = (\n      (stats.mostDetectedLocale.count / stats.totalDetections) *\n      PERCENTAGE_FULL\n    ).toFixed(ONE);\n    insights.push(\n      `æœ€å¸¸æ£€æµ‹çš„è¯­è¨€æ˜¯ ${stats.mostDetectedLocale.locale} (${percentage}%)`,\n    );\n  }\n\n  // æ¥æºåˆ†ææ´å¯Ÿ\n  if (stats.mostUsedSource) {\n    const percentage = (\n      (stats.mostUsedSource.count / stats.totalDetections) *\n      PERCENTAGE_FULL\n    ).toFixed(ONE);\n    insights.push(\n      `æœ€å¸¸ç”¨çš„æ£€æµ‹æ¥æºæ˜¯ ${stats.mostUsedSource.source} (${percentage}%)`,\n    );\n  }\n\n  // ç½®ä¿¡åº¦åˆ†æ\n  const { high, medium, low } = stats.confidenceDistribution;\n  const highPercentage = ((high / stats.totalDetections) * PERCENTAGE_FULL).toFixed(ONE);\n  const lowPercentage = ((low / stats.totalDetections) * PERCENTAGE_FULL).toFixed(ONE);\n\n  if (high > medium + low) {\n    insights.push(`æ£€æµ‹è´¨é‡ä¼˜ç§€ï¼Œ${highPercentage}% çš„æ£€æµ‹å…·æœ‰é«˜ç½®ä¿¡åº¦`);\n  } else if (low > high) {\n    alerts.push(`æ£€æµ‹è´¨é‡éœ€è¦æ”¹å–„ï¼Œ${lowPercentage}% çš„æ£€æµ‹ç½®ä¿¡åº¦è¾ƒä½`);\n    recommendations.push('è€ƒè™‘ä¼˜åŒ–è¯­è¨€æ£€æµ‹ç®—æ³•æˆ–æ•°æ®æº');\n  }\n\n  // è¶‹åŠ¿åˆ†æ\n  if (trends.trendDirection === 'increasing') {\n    insights.push('è¯­è¨€æ£€æµ‹æ´»åŠ¨å‘ˆä¸Šå‡è¶‹åŠ¿');\n  } else if (trends.trendDirection === 'decreasing') {\n    insights.push('è¯­è¨€æ£€æµ‹æ´»åŠ¨å‘ˆä¸‹é™è¶‹åŠ¿');\n    recommendations.push('åˆ†æç”¨æˆ·è¡Œä¸ºå˜åŒ–ï¼Œè€ƒè™‘æ”¹è¿›ç”¨æˆ·ä½“éªŒ');\n  }\n\n  // é¢‘ç‡åˆ†æ\n  if (stats.detectionFrequency > COUNT_TEN) {\n    insights.push('ç”¨æˆ·è¯­è¨€æ£€æµ‹æ´»åŠ¨é¢‘ç¹ï¼Œè¡¨æ˜å¤šè¯­è¨€éœ€æ±‚è¾ƒé«˜');\n  } else if (stats.detectionFrequency < ONE) {\n    recommendations.push('è€ƒè™‘å¢åŠ è¯­è¨€æ£€æµ‹çš„è§¦å‘åœºæ™¯');\n  }\n\n  // å¤šæ ·æ€§åˆ†æ\n  if (stats.uniqueLocales > COUNT_FIVE) {\n    insights.push('ç”¨æˆ·ç¾¤ä½“è¯­è¨€å¤šæ ·æ€§è¾ƒé«˜');\n    recommendations.push('ç¡®ä¿æ‰€æœ‰æ£€æµ‹åˆ°çš„è¯­è¨€éƒ½æœ‰è‰¯å¥½çš„æœ¬åœ°åŒ–æ”¯æŒ');\n  }\n\n  // æ•°æ®è´¨é‡æ£€æŸ¥\n  if (stats.totalDetections > ANIMATION_DURATION_VERY_SLOW) {\n    recommendations.push('å†å²è®°å½•è¾ƒå¤šï¼Œå»ºè®®å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®');\n  }\n\n  if (stats.timeSpan.spanDays > ANGLE_90_DEG) {\n    recommendations.push('æ•°æ®è·¨åº¦è¾ƒé•¿ï¼Œå¯ä»¥è¿›è¡Œé•¿æœŸè¶‹åŠ¿åˆ†æ');\n  }\n\n  return {\n    insights,\n    recommendations,\n    alerts,\n  };\n}\n\n/**\n * è·å–æ€§èƒ½æŒ‡æ ‡\n * Get performance metrics\n */\nexport function getPerformanceMetrics(): {\n  averageConfidence: number;\n  confidenceStability: number;\n  sourceReliability: Record<string, number>;\n  detectionAccuracy: number;\n  responseConsistency: number;\n} {\n  const historyResult = getDetectionHistory();\n\n  if (!historyResult.success || !historyResult.data) {\n    return {\n      averageConfidence: ZERO,\n      confidenceStability: ZERO,\n      sourceReliability: {},\n      detectionAccuracy: ZERO,\n      responseConsistency: ZERO,\n    };\n  }\n\n  const records = historyResult.data.history;\n\n  if (records.length === ZERO) {\n    return {\n      averageConfidence: ZERO,\n      confidenceStability: ZERO,\n      sourceReliability: {},\n      detectionAccuracy: ZERO,\n      responseConsistency: ZERO,\n    };\n  }\n\n  // å¹³å‡ç½®ä¿¡åº¦\n  const averageConfidence =\n    records.reduce((sum, r) => sum + r.confidence, ZERO) / records.length;\n\n  // ç½®ä¿¡åº¦ç¨³å®šæ€§ï¼ˆæ ‡å‡†å·®çš„å€’æ•°ï¼‰\n  const confidenceVariance =\n    records.reduce((sum, r) => {\n      const diff = r.confidence - averageConfidence;\n      return sum + diff * diff;\n    }, ZERO) / records.length;\n  const confidenceStability = ONE / (ONE + Math.sqrt(confidenceVariance));\n\n  // æ¥æºå¯é æ€§\n  const sourceStats = getSourceGroupStats();\n  const sourceReliability: Record<string, number> = {};\n  sourceStats.forEach((stat) => {\n    sourceReliability[stat.source] = stat.avgConfidence;\n  });\n\n  // æ£€æµ‹å‡†ç¡®æ€§ï¼ˆé«˜ç½®ä¿¡åº¦æ£€æµ‹çš„æ¯”ä¾‹ï¼‰\n  const highConfidenceCount = records.filter((r) => r.confidence > MAGIC_0_8).length;\n  const detectionAccuracy = highConfidenceCount / records.length;\n\n  // å“åº”ä¸€è‡´æ€§ï¼ˆç›¸åŒè¯­è¨€æ£€æµ‹ç»“æœçš„ä¸€è‡´æ€§ï¼‰\n  const localeConsistency = new Map<Locale, number[]>();\n  records.forEach((record) => {\n    if (!localeConsistency.has(record.locale)) {\n      localeConsistency.set(record.locale, []);\n    }\n    localeConsistency.get(record.locale)!.push(record.confidence);\n  });\n\n  let totalConsistency = ZERO;\n  let localeCount = ZERO;\n\n  for (const [_locale, confidences] of localeConsistency.entries()) {\n    if (confidences.length > ONE) {\n      const avg =\n        confidences.reduce((sum, c) => sum + c, ZERO) / confidences.length;\n      const variance =\n        confidences.reduce((sum, c) => sum + (c - avg) ** COUNT_PAIR, ZERO) /\n        confidences.length;\n      const consistency = ONE / (ONE + Math.sqrt(variance));\n      totalConsistency += consistency;\n      localeCount += ONE;\n    }\n  }\n\n  const responseConsistency =\n    localeCount > ZERO ? totalConsistency / localeCount : ONE;\n\n  return {\n    averageConfidence,\n    confidenceStability,\n    sourceReliability,\n    detectionAccuracy,\n    responseConsistency,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-history.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Static method 'addDetectionRecord' has too many parameters (4). Maximum allowed is 3.","line":92,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":92,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€æ£€æµ‹å†å²ç®¡ç† - ä¸»å…¥å£\n * Locale Detection History Management - Main Entry Point\n *\n * ç»Ÿä¸€çš„è¯­è¨€æ£€æµ‹å†å²ç®¡ç†å…¥å£ï¼Œæ•´åˆæ‰€æœ‰å†å²ç®¡ç†åŠŸèƒ½æ¨¡å—\n */\n\n'use client';\n\n// å¯¼å…¥ä¸»è¦åŠŸèƒ½ç”¨äºå‘åå…¼å®¹\nimport { DAYS_PER_WEEK } from \"@/constants/time\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, DAYS_PER_MONTH, HOURS_PER_DAY, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type { Locale } from '@/types/i18n';\nimport {\n  addDetectionRecord,\n  getDetectionHistory,\n  getHistorySummary\n} from '@/lib/locale-storage-history-core';\nimport {\n  createCleanupEvent,\n  createErrorEvent,\n  createExportEvent,\n  createImportEvent,\n  createRecordAddedEvent,\n  HistoryEventManager\n} from '@/lib/locale-storage-history-events';\nimport {\n  cleanupExpiredDetections,\n  clearAllHistory,\n  exportHistory,\n  getMaintenanceRecommendations,\n  importHistory,\n  performMaintenance\n} from '@/lib/locale-storage-history-maintenance';\nimport {\n  getDetectionsByLocale,\n  getDetectionsBySource,\n  getRecentDetections,\n  queryDetections,\n  searchDetections,\n  type QueryConditions\n} from '@/lib/locale-storage-history-query';\nimport {\n  generateHistoryInsights,\n  getDetectionStats,\n  getDetectionTrends,\n  getPerformanceMetrics,\n} from '@/lib/locale-storage-history-stats';\nimport type {\n  LocaleDetectionHistory,\n  LocaleDetectionRecord,\n  LocaleSource,\n  StorageEventListener,\n  StorageOperationResult,\n} from '@/lib/locale-storage-types';\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½\nexport {\n  addDetectionRecord, createDefaultHistory, getDetectionHistory, getHistorySummary, HistoryCacheManager, needsCleanup, updateDetectionHistory,\n  validateHistoryData\n} from '@/lib/locale-storage-history-core';\nexport {\n  addMultipleListeners, cleanupEventSystem, consoleLogListener, createCleanupEvent, createDebugListener, createErrorEvent, createErrorListener, createExportEvent,\n  createImportEvent, createRecordAddedEvent, createStatsListener, getEventSystemStatus, HistoryEventManager, performanceListener, setupDefaultListeners\n} from '@/lib/locale-storage-history-events';\nexport {\n  cleanupDuplicateDetections, cleanupExpiredDetections, clearAllHistory, createBackup, exportHistory,\n  exportHistoryAsJson, getMaintenanceRecommendations, importHistory,\n  importHistoryFromJson, limitHistorySize, performMaintenance, restoreFromBackup\n} from '@/lib/locale-storage-history-maintenance';\nexport {\n  getDetectionsByConfidence, getDetectionsByLocale, getDetectionsBySource, getDetectionsByTimeRange, getLocaleGroupStats, getRecentDetections, getSourceGroupStats,\n  getTimeDistributionStats, getUniqueLocales,\n  getUniqueSources, queryDetections,\n  searchDetections\n} from '@/lib/locale-storage-history-query';\nexport {\n  generateHistoryInsights, getDetectionStats,\n  getDetectionTrends, getPerformanceMetrics\n} from '@/lib/locale-storage-history-stats';\n\n/**\n * æ£€æµ‹å†å²ç®¡ç†å™¨ - å‘åå…¼å®¹ç±»\n * Detection history manager - Backward compatible class\n */\nexport class LocaleHistoryManager {\n  /**\n   * æ·»åŠ æ£€æµ‹è®°å½•\n   * Add detection record\n   */\n  static addDetectionRecord(\n    locale: Locale,\n    source: LocaleSource,\n    confidence: number,\n    metadata?: Record<string, unknown>,\n  ): StorageOperationResult<LocaleDetectionHistory> {\n    const result = addDetectionRecord(locale, source, confidence, metadata);\n\n    if (result.success) {\n      HistoryEventManager.emitEvent(\n        createRecordAddedEvent(locale, source, confidence),\n      );\n    } else {\n      HistoryEventManager.emitEvent(\n        createErrorEvent('addDetectionRecord', result.error || 'Unknown error'),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * è·å–æ£€æµ‹å†å²\n   * Get detection history\n   */\n  static getDetectionHistory(): StorageOperationResult<LocaleDetectionHistory> {\n    return getDetectionHistory();\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„æ£€æµ‹è®°å½•\n   * Get recent detections\n   */\n  static getRecentDetections(limit: number = COUNT_TEN): LocaleDetectionRecord[] {\n    return getRecentDetections(limit);\n  }\n\n  /**\n   * æŒ‰æ¥æºè·å–æ£€æµ‹è®°å½•\n   * Get detections by source\n   */\n  static getDetectionsBySource(source: string): LocaleDetectionRecord[] {\n    return getDetectionsBySource(source);\n  }\n\n  /**\n   * æŒ‰è¯­è¨€è·å–æ£€æµ‹è®°å½•\n   * Get detections by locale\n   */\n  static getDetectionsByLocale(locale: Locale): LocaleDetectionRecord[] {\n    return getDetectionsByLocale(locale);\n  }\n\n  /**\n   * è·å–æ£€æµ‹ç»Ÿè®¡ä¿¡æ¯\n   * Get detection statistics\n   */\n  static getDetectionStats(): ReturnType<typeof getDetectionStats> {\n    return getDetectionStats();\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸçš„æ£€æµ‹è®°å½•\n   * Cleanup expired detection records\n   */\n  static cleanupExpiredDetections(\n    maxAgeMs: number = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  ): StorageOperationResult<number> {\n    const result = cleanupExpiredDetections(maxAgeMs);\n\n    if (result.success) {\n      HistoryEventManager.emitEvent(\n        createCleanupEvent('expired', result.data || ZERO),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * æ¸…é™¤æ‰€æœ‰å†å²è®°å½•\n   * Clear all history\n   */\n  static clearAllHistory(): StorageOperationResult<void> {\n    const result = clearAllHistory();\n\n    if (result.success) {\n      HistoryEventManager.emitEvent(createCleanupEvent('all', ZERO));\n    }\n\n    return result;\n  }\n\n  /**\n   * å¯¼å‡ºå†å²è®°å½•\n   * Export history\n   */\n  static exportHistory(): StorageOperationResult<LocaleDetectionHistory> {\n    const result = exportHistory();\n\n    if (result.success && result.data) {\n      HistoryEventManager.emitEvent(\n        createExportEvent('backup', result.data.history?.length || ZERO),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * å¯¼å…¥å†å²è®°å½•\n   * Import history\n   */\n  static importHistory(\n    history: LocaleDetectionHistory,\n  ): StorageOperationResult<LocaleDetectionHistory> {\n    const result = importHistory(history);\n\n    if (result.success && result.data) {\n      HistoryEventManager.emitEvent(\n        createImportEvent('backup', result.data.history?.length || ZERO, true),\n      );\n    } else {\n      HistoryEventManager.emitEvent(createImportEvent('backup', ZERO, false));\n    }\n\n    return result;\n  }\n\n  /**\n   * æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n   * Add event listener\n   */\n  static addEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    HistoryEventManager.addEventListener(eventType, listener);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   * Remove event listener\n   */\n  static removeEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    HistoryEventManager.removeEventListener(eventType, listener);\n  }\n\n  /**\n   * ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨\n   * Remove all event listeners\n   */\n  static removeAllListeners(): void {\n    HistoryEventManager.removeAllListeners();\n  }\n\n  /**\n   * è·å–å†å²è®°å½•æ‘˜è¦\n   * Get history summary\n   */\n  static getHistorySummary(): ReturnType<typeof getHistorySummary> {\n    return getHistorySummary();\n  }\n\n  /**\n   * è·å–ç»´æŠ¤å»ºè®®\n   * Get maintenance recommendations\n   */\n  static getMaintenanceRecommendations(): ReturnType<\n    typeof getMaintenanceRecommendations\n  > {\n    return getMaintenanceRecommendations();\n  }\n\n  /**\n   * æ‰§è¡Œå®Œæ•´çš„å†å²ç»´æŠ¤\n   * Perform complete history maintenance\n   */\n  static performMaintenance(\n    options?: Parameters<typeof performMaintenance>[0],\n  ): ReturnType<typeof performMaintenance> {\n    return performMaintenance(options || {});\n  }\n\n  /**\n   * æŸ¥è¯¢æ£€æµ‹è®°å½•\n   * Query detection records\n   */\n  static queryDetections(\n    conditions: QueryConditions,\n  ): ReturnType<typeof queryDetections> {\n    return queryDetections(conditions);\n  }\n\n  /**\n   * æœç´¢æ£€æµ‹è®°å½•\n   * Search detection records\n   */\n  static searchDetections(searchTerm: string): LocaleDetectionRecord[] {\n    return searchDetections(searchTerm);\n  }\n\n  /**\n   * è·å–æ£€æµ‹è¶‹åŠ¿\n   * Get detection trends\n   */\n  static getDetectionTrends(\n    days: number = DAYS_PER_WEEK,\n  ): ReturnType<typeof getDetectionTrends> {\n    return getDetectionTrends(days);\n  }\n\n  /**\n   * ç”Ÿæˆå†å²æ´å¯Ÿ\n   * Generate history insights\n   */\n  static generateHistoryInsights(): ReturnType<typeof generateHistoryInsights> {\n    return generateHistoryInsights();\n  }\n\n  /**\n   * è·å–æ€§èƒ½æŒ‡æ ‡\n   * Get performance metrics\n   */\n  static getPerformanceMetrics(): ReturnType<typeof getPerformanceMetrics> {\n    return getPerformanceMetrics();\n  }\n}\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type { LocaleHistoryManager as HistoryManager, QueryConditions };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-hooks.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-manager' import is duplicated.","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":13,"endColumn":39},{"ruleId":"consistent-return","severity":2,"message":"Arrow function expected no return value.","line":307,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":309,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":327,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":327,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8180,8183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8180,8183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { LocaleStorageManager } from '@/lib/locale-storage-manager';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, DAYS_PER_MONTH, HOURS_PER_DAY, SECONDS_PER_MINUTE } from '@/constants';\n\nimport { STORAGE_KEYS } from '@/lib/locale-storage-types';\nimport { logger } from '@/lib/logger';\nimport type { Locale } from '@/types/i18n';\nimport { useCallback, useEffect, useState } from 'react';\nimport type {\n  LocaleDetectionHistory,\n  UserLocalePreference,\n} from '@/lib/locale-storage-manager';\n\n/**\n * React Hook: ä½¿ç”¨è¯­è¨€åå¥½å­˜å‚¨\n * React Hook: Use locale preference storage\n */\nexport function useLocaleStorage() {\n  const savePreference = useCallback((preference: UserLocalePreference) => {\n    LocaleStorageManager.saveUserPreference(preference);\n  }, []);\n\n  const getUserPreference = useCallback(() => {\n    return LocaleStorageManager.getUserPreference();\n  }, []);\n\n  const setUserOverride = useCallback((locale: Locale) => {\n    LocaleStorageManager.setUserOverride(locale);\n  }, []);\n\n  const getUserOverride = useCallback(() => {\n    return LocaleStorageManager.getUserOverride();\n  }, []);\n\n  const clearUserOverride = useCallback(() => {\n    LocaleStorageManager.clearUserOverride();\n  }, []);\n\n  const getStats = useCallback(() => {\n    return LocaleStorageManager.getStorageStats();\n  }, []);\n\n  return {\n    savePreference,\n    getUserPreference,\n    setUserOverride,\n    getUserOverride,\n    clearUserOverride,\n    getStats,\n  };\n}\n\n/**\n * React Hook: å“åº”å¼è¯­è¨€åå¥½çŠ¶æ€\n * React Hook: Reactive locale preference state\n */\nexport function useLocalePreference() {\n  const [preference, setPreference] = useState<UserLocalePreference | null>(\n    null,\n  );\n  const [override, setOverride] = useState<Locale | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // åˆå§‹åŒ–åŠ è½½\n  useEffect(() => {\n    const loadPreferences = () => {\n      try {\n        const userPreference = LocaleStorageManager.getUserPreference();\n        const userOverride = LocaleStorageManager.getUserOverride();\n\n        setPreference(userPreference);\n        setOverride(userOverride);\n      } catch (error) {\n        logger.warn('Failed to load locale preferences:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadPreferences();\n  }, []);\n\n  const updatePreference = useCallback(\n    (newPreference: UserLocalePreference) => {\n      LocaleStorageManager.saveUserPreference(newPreference);\n      setPreference(newPreference);\n    },\n    [],\n  );\n\n  const updateOverride = useCallback((locale: Locale) => {\n    LocaleStorageManager.setUserOverride(locale);\n    setOverride(locale);\n  }, []);\n\n  const clearOverride = useCallback(() => {\n    LocaleStorageManager.clearUserOverride();\n    setOverride(null);\n  }, []);\n\n  const currentLocale = override || preference?.locale || null;\n\n  return {\n    preference,\n    override,\n    currentLocale,\n    isLoading,\n    updatePreference,\n    updateOverride,\n    clearOverride,\n  };\n}\n\n/**\n * React Hook: æ£€æµ‹å†å²çŠ¶æ€\n * React Hook: Detection history state\n */\nexport function useDetectionHistory() {\n  const [history, setHistory] = useState<LocaleDetectionHistory | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // åˆå§‹åŒ–åŠ è½½\n  useEffect(() => {\n    const loadHistory = () => {\n      try {\n        const detectionHistory = LocaleStorageManager.getDetectionHistory();\n        setHistory(detectionHistory);\n      } catch (error) {\n        logger.warn('Failed to load detection history:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadHistory();\n  }, []);\n\n  const addDetection = useCallback(\n    (detection: {\n      locale: Locale;\n      source: string;\n      timestamp: number;\n      confidence: number;\n    }) => {\n      LocaleStorageManager.addDetectionRecord(detection);\n\n      // é‡æ–°åŠ è½½å†å²è®°å½•\n      const updatedHistory = LocaleStorageManager.getDetectionHistory();\n      setHistory(updatedHistory);\n    },\n    [],\n  );\n\n  const getRecentDetections = useCallback((limit: number = COUNT_FIVE) => {\n    return LocaleStorageManager.getRecentDetections(limit);\n  }, []);\n\n  const cleanupExpired = useCallback((maxAgeMs?: number) => {\n    LocaleStorageManager.cleanupExpiredDetections(maxAgeMs);\n\n    // é‡æ–°åŠ è½½å†å²è®°å½•\n    const updatedHistory = LocaleStorageManager.getDetectionHistory();\n    setHistory(updatedHistory);\n  }, []);\n\n  return {\n    history,\n    isLoading,\n    addDetection,\n    getRecentDetections,\n    cleanupExpired,\n  };\n}\n\n/**\n * React Hook: å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯\n * React Hook: Storage statistics\n */\nexport function useStorageStats() {\n  const [stats, setStats] = useState<ReturnType<\n    typeof LocaleStorageManager.getStorageStats\n  > | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const refreshStats = useCallback(() => {\n    try {\n      const currentStats = LocaleStorageManager.getStorageStats();\n      setStats(currentStats);\n    } catch (error) {\n      logger.warn('Failed to get storage stats:', error);\n    }\n  }, []);\n\n  // åˆå§‹åŒ–åŠ è½½\n  useEffect(() => {\n    refreshStats();\n    setIsLoading(false);\n  }, [refreshStats]);\n\n  return {\n    stats,\n    isLoading,\n    refreshStats,\n  };\n}\n\n/**\n * React Hook: å­˜å‚¨æ•°æ®å¯¼å…¥å¯¼å‡º\n * React Hook: Storage data import/export\n */\nexport function useStorageDataManager() {\n  const exportData = useCallback(() => {\n    return LocaleStorageManager.exportData();\n  }, []);\n\n  const importData = useCallback(\n    (data: Parameters<typeof LocaleStorageManager.importData>[0]) => {\n      LocaleStorageManager.importData(data);\n    },\n    [],\n  );\n\n  const clearAllData = useCallback(() => {\n    LocaleStorageManager.clearAll();\n  }, []);\n\n  return {\n    exportData,\n    importData,\n    clearAllData,\n  };\n}\n\n/**\n * React Hook: å­˜å‚¨å¯ç”¨æ€§æ£€æŸ¥\n * React Hook: Storage availability check\n */\nexport function useStorageAvailability() {\n  const [isLocalStorageAvailable, setIsLocalStorageAvailable] = useState(false);\n  const [isCookieAvailable, setIsCookieAvailable] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAvailability = async () => {\n      try {\n        // åŠ¨æ€å¯¼å…¥ä»¥é¿å… SSR é—®é¢˜\n        const { LocalStorageManager } = await import('@/lib/locale-storage-local');\n        const { CookieManager } = await import('@/lib/locale-storage-cookie');\n\n        setIsLocalStorageAvailable(LocalStorageManager.isAvailable());\n        setIsCookieAvailable(CookieManager.isSupported());\n      } catch (error) {\n        logger.warn('Failed to check storage availability:', error);\n        setIsLocalStorageAvailable(false);\n        setIsCookieAvailable(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAvailability();\n  }, []);\n\n  return {\n    isLocalStorageAvailable,\n    isCookieAvailable,\n    isAnyStorageAvailable: isLocalStorageAvailable || isCookieAvailable,\n    isLoading,\n  };\n}\n\n/**\n * React Hook: è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®\n * React Hook: Auto cleanup expired data\n */\nexport function useAutoCleanup(\n  options: {\n    enabled?: boolean;\n    intervalMs?: number;\n    maxAgeMs?: number;\n  } = {},\n) {\n  const {\n    enabled = true,\n    intervalMs = SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 1 hour\n    maxAgeMs = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 30 days\n  } = options;\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    const cleanup = () => {\n      try {\n        LocaleStorageManager.cleanupExpiredDetections(maxAgeMs);\n      } catch (error) {\n        logger.warn('Auto cleanup failed:', error);\n      }\n    };\n\n    // ç«‹å³æ‰§è¡Œä¸€æ¬¡æ¸…ç†\n    cleanup();\n\n    // è®¾ç½®å®šæœŸæ¸…ç†\n    const intervalId = setInterval(cleanup, intervalMs);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [enabled, intervalMs, maxAgeMs]);\n}\n\n/**\n * React Hook: å­˜å‚¨äº‹ä»¶ç›‘å¬\n * React Hook: Storage event listener\n */\nexport function useStorageEvents() {\n  const [lastStorageEvent, setLastStorageEvent] = useState<{\n    key: string;\n    newValue: string | null;\n    oldValue: string | null;\n    timestamp: number;\n  } | null>(null);\n\n  useEffect(() => {\n    const handleStorageChange = (event: StorageEvent) => {\n      if (event.key && Object.values(STORAGE_KEYS).includes(event.key as any)) {\n        setLastStorageEvent({\n          key: event.key,\n          newValue: event.newValue,\n          oldValue: event.oldValue,\n          timestamp: Date.now(),\n        });\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, []);\n\n  return {\n    lastStorageEvent,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-local.ts","messages":[{"ruleId":"no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":4,"column":1,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":4,"column":1,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":4,"endColumn":14},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":91,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":93,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":92,"column":13,"nodeType":"MemberExpression","endLine":92,"endColumn":23},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":134,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":136,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":261,"column":7,"nodeType":"MemberExpression","endLine":261,"endColumn":18},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":291,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":293,"endColumn":12},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":292,"column":13,"nodeType":"MemberExpression","endLine":292,"endColumn":23}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_0_8 } from \"@/constants/decimal\";\nimport { BYTES_PER_KB, COUNT_FIVE, ZERO } from '@/constants';\n\n'use client';\n\n/**\n * LocalStorage æ“ä½œå·¥å…·ç±»\n * LocalStorage management utility class\n */\nexport class LocalStorageManager {\n  /**\n   * è®¾ç½® LocalStorage é¡¹\n   * Set item in localStorage\n   */\n  static set(key: string, value: unknown): void {\n    if (typeof window === 'undefined') return;\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n    } catch {\n      // é™é»˜å¤„ç†localStorageé”™è¯¯ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¾“å‡ºæ—¥å¿—\n      if (process.env.NODE_ENV === 'development') {\n        // åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨æˆ–å…¶ä»–æ—¥å¿—æ–¹æ¡ˆ\n        // console.warn('Failed to save to localStorage:', error);\n      }\n    }\n  }\n\n  /**\n   * è·å– LocalStorage é¡¹\n   * Get item from localStorage\n   */\n  static get<T>(key: string): T | null {\n    if (typeof window === 'undefined') return null;\n    try {\n      const item = localStorage.getItem(key);\n      return item ? JSON.parse(item) : null;\n    } catch {\n      // é™é»˜å¤„ç†localStorageé”™è¯¯ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¾“å‡ºæ—¥å¿—\n      if (process.env.NODE_ENV === 'development') {\n        // åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨æˆ–å…¶ä»–æ—¥å¿—æ–¹æ¡ˆ\n        // console.warn('Failed to read from localStorage:', error);\n      }\n      return null;\n    }\n  }\n\n  /**\n   * åˆ é™¤ LocalStorage é¡¹\n   * Remove item from localStorage\n   */\n  static remove(key: string): void {\n    if (typeof window === 'undefined') return;\n    try {\n      localStorage.removeItem(key);\n    } catch {\n      // é™é»˜å¤„ç†localStorageé”™è¯¯ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¾“å‡ºæ—¥å¿—\n      if (process.env.NODE_ENV === 'development') {\n        // åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨æˆ–å…¶ä»–æ—¥å¿—æ–¹æ¡ˆ\n        // console.warn('Failed to remove from localStorage:', error);\n      }\n    }\n  }\n\n  /**\n   * æ£€æŸ¥ LocalStorage é¡¹æ˜¯å¦å­˜åœ¨\n   * Check if item exists in localStorage\n   */\n  static exists(key: string): boolean {\n    if (typeof window === 'undefined') return false;\n    try {\n      return localStorage.getItem(key) !== null;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * è·å–æ‰€æœ‰ LocalStorage é¡¹\n   * Get all localStorage items\n   */\n  static getAll(): Record<string, unknown> {\n    if (typeof window === 'undefined') return {};\n\n    const items: Record<string, unknown> = {};\n\n    try {\n      for (let i = ZERO; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key) {\n          const value = this.get(key);\n          if (value !== null) {\n            items[key] = value;\n          }\n        }\n      }\n    } catch {\n      if (process.env.NODE_ENV === 'development') {\n        // console.warn('Failed to get all localStorage items:', error);\n      }\n    }\n\n    return items;\n  }\n\n  /**\n   * æ¸…é™¤æ‰€æœ‰ LocalStorage é¡¹\n   * Clear all localStorage items\n   */\n  static clear(): void {\n    if (typeof window === 'undefined') return;\n    try {\n      localStorage.clear();\n    } catch {\n      if (process.env.NODE_ENV === 'development') {\n        // console.warn('Failed to clear localStorage:', error);\n      }\n    }\n  }\n\n  /**\n   * è·å– LocalStorage ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°\n   * Get localStorage usage size in bytes\n   */\n  static getUsageSize(): number {\n    if (typeof window === 'undefined') return ZERO;\n\n    let totalSize = ZERO;\n\n    try {\n      for (let i = ZERO; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key) {\n          const value = localStorage.getItem(key);\n          if (value) {\n            totalSize += new Blob([key + value]).size;\n          }\n        }\n      }\n    } catch {\n      if (process.env.NODE_ENV === 'development') {\n        // console.warn('Failed to calculate localStorage usage:', error);\n      }\n    }\n\n    return totalSize;\n  }\n\n  /**\n   * è·å–ç‰¹å®šé¡¹çš„å¤§å°\n   * Get size of specific item in bytes\n   */\n  static getItemSize(key: string): number {\n    if (typeof window === 'undefined') return ZERO;\n\n    try {\n      const value = localStorage.getItem(key);\n      if (!value) return ZERO;\n\n      return new Blob([key + value]).size;\n    } catch {\n      return ZERO;\n    }\n  }\n\n  /**\n   * æ£€æŸ¥ LocalStorage æ˜¯å¦å¯ç”¨\n   * Check if localStorage is available\n   */\n  static isAvailable(): boolean {\n    if (typeof window === 'undefined') return false;\n\n    try {\n      const testKey = '__localStorage_test__';\n      const testValue = 'test';\n\n      localStorage.setItem(testKey, testValue);\n      const retrieved = localStorage.getItem(testKey);\n      localStorage.removeItem(testKey);\n\n      return retrieved === testValue;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * è·å– LocalStorage å‰©ä½™ç©ºé—´ï¼ˆä¼°ç®—ï¼‰\n   * Get estimated remaining localStorage space\n   */\n  static getRemainingSpace(): number {\n    if (!this.isAvailable()) return ZERO;\n\n    const maxSize = COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB; // 5MB ä¼°ç®—é™åˆ¶\n    const usedSize = this.getUsageSize();\n\n    return Math.max(ZERO, maxSize - usedSize);\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æ¥è¿‘å­˜å‚¨é™åˆ¶\n   * Check if approaching storage limit\n   */\n  static isNearLimit(threshold: number = MAGIC_0_8): boolean {\n    if (!this.isAvailable()) return true;\n\n    const maxSize = COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB; // 5MB ä¼°ç®—é™åˆ¶\n    const usedSize = this.getUsageSize();\n\n    return usedSize / maxSize > threshold;\n  }\n\n  /**\n   * è®¾ç½®å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„é¡¹\n   * Set item with expiration time\n   */\n  static setWithExpiry(key: string, value: unknown, expiryMs: number): void {\n    const item = {\n      value,\n      expiry: Date.now() + expiryMs,\n    };\n\n    this.set(key, item);\n  }\n\n  /**\n   * è·å–å¸¦æœ‰è¿‡æœŸæ—¶é—´æ£€æŸ¥çš„é¡¹\n   * Get item with expiry check\n   */\n  static getWithExpiry<T>(key: string): T | null {\n    const item = this.get<{ value: T; expiry: number }>(key);\n\n    if (!item) return null;\n\n    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\n    if (Date.now() > item.expiry) {\n      this.remove(key);\n      return null;\n    }\n\n    return item.value;\n  }\n\n  /**\n   * æ‰¹é‡è®¾ç½®å¤šä¸ªé¡¹\n   * Set multiple items in batch\n   */\n  static setMultiple(items: Record<string, unknown>): void {\n    Object.entries(items).forEach(([key, value]) => {\n      this.set(key, value);\n    });\n  }\n\n  /**\n   * æ‰¹é‡è·å–å¤šä¸ªé¡¹\n   * Get multiple items in batch\n   */\n  static getMultiple<T>(keys: string[]): Record<string, T | null> {\n    const result: Record<string, T | null> = {};\n\n    keys.forEach((key) => {\n      result[key] = this.get<T>(key);\n    });\n\n    return result;\n  }\n\n  /**\n   * æ‰¹é‡åˆ é™¤å¤šä¸ªé¡¹\n   * Remove multiple items in batch\n   */\n  static removeMultiple(keys: string[]): void {\n    keys.forEach((key) => {\n      this.remove(key);\n    });\n  }\n\n  /**\n   * æŒ‰å‰ç¼€è·å–é¡¹\n   * Get items by key prefix\n   */\n  static getByPrefix<T>(prefix: string): Record<string, T> {\n    const items: Record<string, T> = {};\n\n    if (typeof window === 'undefined') return items;\n\n    try {\n      for (let i = ZERO; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith(prefix)) {\n          const value = this.get<T>(key);\n          if (value !== null) {\n            items[key] = value;\n          }\n        }\n      }\n    } catch {\n      if (process.env.NODE_ENV === 'development') {\n        // console.warn('Failed to get items by prefix:', error);\n      }\n    }\n\n    return items;\n  }\n\n  /**\n   * æŒ‰å‰ç¼€åˆ é™¤é¡¹\n   * Remove items by key prefix\n   */\n  static removeByPrefix(prefix: string): void {\n    if (typeof window === 'undefined') return;\n\n    const keysToRemove: string[] = [];\n\n    try {\n      for (let i = ZERO; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith(prefix)) {\n          keysToRemove.push(key);\n        }\n      }\n\n      keysToRemove.forEach((key) => {\n        this.remove(key);\n      });\n    } catch {\n      if (process.env.NODE_ENV === 'development') {\n        // console.warn('Failed to remove items by prefix:', error);\n      }\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-maintenance-cleanup.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":128,"column":19,"nodeType":"MemberExpression","endLine":128,"endColumn":41},{"ruleId":"max-statements","severity":2,"message":"Static method 'cleanupInvalidPreferences' has too many statements (21). Maximum allowed is 20.","line":152,"column":35,"nodeType":"FunctionExpression","messageId":"exceed","endLine":199,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":175,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":179,"endColumn":12},{"ruleId":"max-statements","severity":2,"message":"Static method 'getCleanupStats' has too many statements (25). Maximum allowed is 20.","line":297,"column":25,"nodeType":"FunctionExpression","messageId":"exceed","endLine":369,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":352,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":354,"endColumn":12}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨æ¸…ç†æ“ä½œ\n * Locale Storage Cleanup Operations\n *\n * è´Ÿè´£å­˜å‚¨æ•°æ®çš„æ¸…ç†å’Œè¿‡æœŸæ•°æ®å¤„ç†\n */\n\n'use client';\n\nimport { MINUTE_MS } from \"@/constants/time\";\nimport { ANIMATION_DURATION_VERY_SLOW, DAYS_PER_MONTH, HOURS_PER_DAY, ONE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { STORAGE_KEYS } from '@/lib/locale-storage-types';\nimport { logger } from '@/lib/logger';\nimport type {\n  LocaleDetectionHistory,\n  StorageOperationResult,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\n/**\n * è¯­è¨€å­˜å‚¨æ¸…ç†ç®¡ç†å™¨\n * Locale storage cleanup manager\n */\nexport class LocaleCleanupManager {\n  /**\n   * æ¸…é™¤æ‰€æœ‰å­˜å‚¨æ•°æ®\n   * Clear all storage data\n   */\n  static clearAll(): StorageOperationResult {\n    try {\n      // æ¸…é™¤ Cookies\n      Object.values(STORAGE_KEYS).forEach((key) => {\n        CookieManager.remove(key);\n      });\n\n      // æ¸…é™¤ localStorage\n      Object.values(STORAGE_KEYS).forEach((key) => {\n        LocalStorageManager.remove(key);\n      });\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸçš„æ£€æµ‹è®°å½•\n   * Clean up expired detection records\n   */\n  static cleanupExpiredDetections(\n    maxAgeMs: number = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  ): StorageOperationResult {\n    try {\n      const historyData = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n\n      if (!historyData || !Array.isArray(historyData.detections)) {\n        return {\n          success: true,\n          timestamp: Date.now(),\n        };\n      }\n\n      const now = Date.now();\n      const originalCount = historyData.detections.length;\n\n      // è¿‡æ»¤æ‰è¿‡æœŸçš„æ£€æµ‹è®°å½•\n      const validDetections = historyData.detections.filter(\n        (detection) => now - detection.timestamp <= maxAgeMs,\n      );\n\n      const cleanedCount = originalCount - validDetections.length;\n\n      if (cleanedCount > ZERO) {\n        const updatedHistory: LocaleDetectionHistory = {\n          detections: validDetections,\n          history: validDetections,\n          lastUpdated: now,\n          totalDetections: validDetections.length,\n        };\n\n        LocalStorageManager.set(\n          STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n          updatedHistory,\n        );\n\n        return {\n          success: true,\n          timestamp: Date.now(),\n          data: { cleanedCount, remainingCount: validDetections.length },\n        };\n      }\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { cleanedCount: ZERO, remainingCount: originalCount },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¸…ç†ç‰¹å®šç±»å‹çš„å­˜å‚¨æ•°æ®\n   * Clean up specific type of storage data\n   */\n  static clearSpecificData(\n    dataType: keyof typeof STORAGE_KEYS,\n  ): StorageOperationResult {\n    try {\n      const key = STORAGE_KEYS[dataType];\n\n      // ä»ä¸¤ä¸ªå­˜å‚¨ä¸­ç§»é™¤\n      CookieManager.remove(key);\n      LocalStorageManager.remove(key);\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { dataType, key },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¸…ç†æ— æ•ˆçš„ç”¨æˆ·åå¥½æ•°æ®\n   * Clean up invalid user preference data\n   */\n  static cleanupInvalidPreferences(): StorageOperationResult {\n    try {\n      let cleanedItems = ZERO;\n      const issues: string[] = [];\n\n      // æ£€æŸ¥å¹¶æ¸…ç†localStorageä¸­çš„åå¥½æ•°æ®\n      const localPreference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n\n      if (localPreference && !this.isValidPreferenceData(localPreference)) {\n        LocalStorageManager.remove(STORAGE_KEYS.LOCALE_PREFERENCE);\n        cleanedItems += ONE;\n        issues.push('å·²æ¸…ç†localStorageä¸­çš„æ— æ•ˆåå¥½æ•°æ®');\n      }\n\n      // æ£€æŸ¥å¹¶æ¸…ç†Cookieä¸­çš„åå¥½æ•°æ®\n      const cookiePreference = CookieManager.get(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      if (cookiePreference) {\n        try {\n          const parsed = JSON.parse(cookiePreference) as UserLocalePreference;\n          if (!this.isValidPreferenceData(parsed)) {\n            CookieManager.remove(STORAGE_KEYS.LOCALE_PREFERENCE);\n            cleanedItems += ONE;\n            issues.push('å·²æ¸…ç†Cookieä¸­çš„æ— æ•ˆåå¥½æ•°æ®');\n          }\n        } catch {\n          CookieManager.remove(STORAGE_KEYS.LOCALE_PREFERENCE);\n          cleanedItems += ONE;\n          issues.push('å·²æ¸…ç†Cookieä¸­çš„æ ¼å¼é”™è¯¯åå¥½æ•°æ®');\n        }\n      }\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { cleanedItems, issues },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¸…ç†é‡å¤çš„æ£€æµ‹è®°å½•\n   * Clean up duplicate detection records\n   */\n  static cleanupDuplicateDetections(): StorageOperationResult {\n    try {\n      const historyData = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n\n      if (!historyData || !Array.isArray(historyData.detections)) {\n        return {\n          success: true,\n          timestamp: Date.now(),\n        };\n      }\n\n      const originalCount = historyData.detections.length;\n      const seen = new Set<string>();\n      const uniqueDetections = historyData.detections.filter((detection) => {\n        const key = `${detection.locale}-${detection.source}-${Math.floor(detection.timestamp / MINUTE_MS)}`; // æŒ‰åˆ†é’Ÿåˆ†ç»„\n        if (seen.has(key)) {\n          return false;\n        }\n        seen.add(key);\n        return true;\n      });\n\n      const duplicateCount = originalCount - uniqueDetections.length;\n\n      if (duplicateCount > ZERO) {\n        const updatedHistory: LocaleDetectionHistory = {\n          detections: uniqueDetections,\n          history: uniqueDetections,\n          lastUpdated: Date.now(),\n          totalDetections: uniqueDetections.length,\n        };\n\n        LocalStorageManager.set(\n          STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n          updatedHistory,\n        );\n\n        return {\n          success: true,\n          timestamp: Date.now(),\n          data: { duplicateCount, remainingCount: uniqueDetections.length },\n        };\n      }\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { duplicateCount: ZERO, remainingCount: originalCount },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * éªŒè¯åå¥½æ•°æ®æ˜¯å¦æœ‰æ•ˆ\n   * Validate if preference data is valid\n   */\n  private static isValidPreferenceData(\n    preference: UserLocalePreference,\n  ): boolean {\n    if (!preference || typeof preference !== 'object') return false;\n\n    const requiredFields = ['locale', 'source', 'timestamp', 'confidence'];\n    const hasAllFields = requiredFields.every((field) => field in preference);\n\n    if (!hasAllFields) return false;\n\n    // éªŒè¯å­—æ®µç±»å‹\n    if (typeof preference.locale !== 'string') return false;\n    if (typeof preference.source !== 'string') return false;\n    if (typeof preference.timestamp !== 'number') return false;\n    if (typeof preference.confidence !== 'number') return false;\n\n    // éªŒè¯å€¼çš„åˆç†æ€§\n    if (preference.confidence < ZERO || preference.confidence > ONE) return false;\n    if (preference.timestamp > Date.now() || preference.timestamp < ZERO)\n      return false;\n\n    return true;\n  }\n\n  /**\n   * è·å–æ¸…ç†ç»Ÿè®¡ä¿¡æ¯\n   * Get cleanup statistics\n   */\n  static getCleanupStats(): {\n    totalItems: number;\n    expiredDetections: number;\n    invalidPreferences: number;\n    duplicateDetections: number;\n  } {\n    let totalItems = ZERO;\n    let expiredDetections = ZERO;\n    let invalidPreferences = ZERO;\n    let duplicateDetections = ZERO;\n\n    try {\n      // ç»Ÿè®¡æ€»é¡¹ç›®æ•°\n      Object.values(STORAGE_KEYS).forEach((key) => {\n        if (LocalStorageManager.get(key) !== null) totalItems += ONE;\n        if (CookieManager.get(key) !== null) totalItems += ONE;\n      });\n\n      // ç»Ÿè®¡è¿‡æœŸæ£€æµ‹è®°å½•\n      const historyData = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n      if (historyData?.detections) {\n        const now = Date.now();\n        const maxAge = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // 30å¤©\n        expiredDetections = historyData.detections.filter(\n          (detection) => now - detection.timestamp > maxAge,\n        ).length;\n\n        // ç»Ÿè®¡é‡å¤æ£€æµ‹è®°å½•\n        const seen = new Set<string>();\n        historyData.detections.forEach((detection) => {\n          const key = `${detection.locale}-${detection.source}-${Math.floor(detection.timestamp / MINUTE_MS)}`;\n          if (seen.has(key)) {\n            duplicateDetections += ONE;\n          } else {\n            seen.add(key);\n          }\n        });\n      }\n\n      // ç»Ÿè®¡æ— æ•ˆåå¥½æ•°æ®\n      const localPreference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      if (localPreference && !this.isValidPreferenceData(localPreference)) {\n        invalidPreferences += ONE;\n      }\n\n      const cookiePreference = CookieManager.get(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      if (cookiePreference) {\n        try {\n          const parsed = JSON.parse(cookiePreference) as UserLocalePreference;\n          if (!this.isValidPreferenceData(parsed)) {\n            invalidPreferences += ONE;\n          }\n        } catch {\n          invalidPreferences += ONE;\n        }\n      }\n    } catch (error) {\n      logger.warn('è·å–æ¸…ç†ç»Ÿè®¡ä¿¡æ¯æ—¶å‡ºé”™', { error: error as Error });\n    }\n\n    return {\n      totalItems,\n      expiredDetections,\n      invalidPreferences,\n      duplicateDetections,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-maintenance-import-export.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":18,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":22,"endColumn":37},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":45,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":45,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1007,1049],"text":"type ImportData = ExportData"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"max-statements","severity":2,"message":"Static method 'importData' has too many statements (24). Maximum allowed is 20.","line":90,"column":20,"nodeType":"FunctionExpression","messageId":"exceed","endLine":163,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":273,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":294,"endColumn":12},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (5). Maximum allowed is 3.","line":274,"column":13,"nodeType":"TryStatement","messageId":"tooDeeply","endLine":293,"endColumn":14},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (6). Maximum allowed is 3.","line":276,"column":15,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":284,"endColumn":16}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨å¯¼å…¥å¯¼å‡ºæ“ä½œ\n * Locale Storage Import/Export Operations\n *\n * è´Ÿè´£å­˜å‚¨æ•°æ®çš„å¯¼å…¥ã€å¯¼å‡ºå’Œå¤‡ä»½æ¢å¤\n */\n\n'use client';\n\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { COUNT_FIVE, COUNT_PAIR, ONE, ZERO } from '@/constants';\n\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { LocaleValidationManager } from '@/lib/locale-storage-maintenance-validation';\nimport { STORAGE_KEYS } from '@/lib/locale-storage-types';\nimport { logger } from '@/lib/logger';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  LocaleDetectionHistory,\n  StorageOperationResult,\n  UserLocalePreference\n} from '@/lib/locale-storage-types';\n\n/**\n * å¯¼å‡ºæ•°æ®æ¥å£\n * Export data interface\n */\nexport interface ExportData {\n  preference?: UserLocalePreference;\n  override?: Locale;\n  history?: LocaleDetectionHistory;\n  version: string;\n  timestamp: number;\n  metadata: {\n    userAgent: string;\n    exportedBy: string;\n    dataIntegrity: string;\n  };\n}\n\n/**\n * å¯¼å…¥æ•°æ®æ¥å£\n * Import data interface\n */\nexport interface ImportData extends ExportData {}\n\n/**\n * è¯­è¨€å­˜å‚¨å¯¼å…¥å¯¼å‡ºç®¡ç†å™¨\n * Locale storage import/export manager\n */\nexport class LocaleImportExportManager {\n  /**\n   * å¯¼å‡ºæ‰€æœ‰å­˜å‚¨æ•°æ®\n   * Export all storage data\n   */\n  static exportData(): ExportData {\n    const preference = LocalStorageManager.get<UserLocalePreference>(\n      STORAGE_KEYS.LOCALE_PREFERENCE,\n    );\n    const override = LocalStorageManager.get<Locale>(\n      STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n    );\n    const history = LocalStorageManager.get<LocaleDetectionHistory>(\n      STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n    );\n\n    const result: ExportData = {\n      version: '1.0.0',\n      timestamp: Date.now(),\n      metadata: {\n        userAgent:\n          typeof navigator !== 'undefined' ? navigator.userAgent : 'Unknown',\n        exportedBy: 'LocaleMaintenanceManager',\n        dataIntegrity: this.calculateDataChecksum(),\n      },\n    };\n\n    // åªæœ‰å½“å€¼å­˜åœ¨æ—¶æ‰è®¾ç½®å¯é€‰å±æ€§\n    if (preference) result.preference = preference;\n    if (override) result.override = override;\n    if (history) result.history = history;\n\n    return result;\n  }\n\n  /**\n   * å¯¼å…¥å­˜å‚¨æ•°æ®\n   * Import storage data\n   */\n  static importData(data: ImportData): StorageOperationResult {\n    try {\n      let importedItems = ZERO;\n      const errors: string[] = [];\n\n      // éªŒè¯å¯¼å…¥æ•°æ®ç‰ˆæœ¬\n      if (data.version && data.version !== '1.0.0') {\n        return {\n          success: false,\n          timestamp: Date.now(),\n          error: `ä¸æ”¯æŒçš„æ•°æ®ç‰ˆæœ¬: ${data.version}`,\n        };\n      }\n\n      // å¯¼å…¥ç”¨æˆ·åå¥½æ•°æ®\n      if (data.preference) {\n        if (LocaleValidationManager.validatePreferenceData(data.preference)) {\n          LocalStorageManager.set(\n            STORAGE_KEYS.LOCALE_PREFERENCE,\n            data.preference,\n          );\n          CookieManager.set(\n            STORAGE_KEYS.LOCALE_PREFERENCE,\n            JSON.stringify(data.preference),\n          );\n          importedItems += ONE;\n        } else {\n          errors.push('ç”¨æˆ·åå¥½æ•°æ®æ ¼å¼æ— æ•ˆ');\n        }\n      }\n\n      // å¯¼å…¥ç”¨æˆ·è¦†ç›–è®¾ç½®\n      if (data.override) {\n        if (typeof data.override === 'string') {\n          LocalStorageManager.set(\n            STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n            data.override,\n          );\n          CookieManager.set(STORAGE_KEYS.USER_LOCALE_OVERRIDE, data.override);\n          importedItems += ONE;\n        } else {\n          errors.push('ç”¨æˆ·è¦†ç›–è®¾ç½®æ ¼å¼æ— æ•ˆ');\n        }\n      }\n\n      // å¯¼å…¥æ£€æµ‹å†å²æ•°æ®\n      if (data.history) {\n        if (LocaleValidationManager.validateHistoryData(data.history)) {\n          LocalStorageManager.set(\n            STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n            data.history,\n          );\n          importedItems += ONE;\n        } else {\n          errors.push('æ£€æµ‹å†å²æ•°æ®æ ¼å¼æ— æ•ˆ');\n        }\n      }\n\n      return {\n        success: errors.length === ZERO,\n        timestamp: Date.now(),\n        data: { importedItems, errors },\n        ...(errors.length > ZERO && {\n          error: `å¯¼å…¥å®Œæˆï¼Œä½†æœ‰ ${errors.length} ä¸ªé”™è¯¯`,\n        }),\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * å¯¼å‡ºä¸ºJSONå­—ç¬¦ä¸²\n   * Export as JSON string\n   */\n  static exportAsJson(): string {\n    const data = this.exportData();\n    return JSON.stringify(data, null, COUNT_PAIR);\n  }\n\n  /**\n   * ä»JSONå­—ç¬¦ä¸²å¯¼å…¥\n   * Import from JSON string\n   */\n  static importFromJson(jsonString: string): StorageOperationResult {\n    try {\n      const data = JSON.parse(jsonString) as ImportData;\n      return this.importData(data);\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'JSONè§£æé”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * åˆ›å»ºå¤‡ä»½\n   * Create backup\n   */\n  static createBackup(): StorageOperationResult {\n    try {\n      const exportData = this.exportData();\n      const backupKey = `locale_backup_${Date.now()}`;\n\n      // å°†å¤‡ä»½å­˜å‚¨åˆ°localStorageï¼ˆä½¿ç”¨ç‰¹æ®Šå‰ç¼€ï¼‰\n      LocalStorageManager.set(backupKey, exportData);\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { backupKey, backupData: exportData },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¢å¤å¤‡ä»½\n   * Restore backup\n   */\n  static restoreBackup(backupKey: string): StorageOperationResult {\n    try {\n      const backupData = LocalStorageManager.get<ExportData>(backupKey);\n\n      if (!backupData) {\n        return {\n          success: false,\n          timestamp: Date.now(),\n          error: 'å¤‡ä»½æ•°æ®ä¸å­˜åœ¨',\n        };\n      }\n\n      const importResult = this.importData(backupData);\n      if (importResult.success) {\n        return {\n          success: true,\n          timestamp: Date.now(),\n          data: importResult.data,\n        };\n      }\n      return importResult;\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * åˆ—å‡ºæ‰€æœ‰å¤‡ä»½\n   * List all backups\n   */\n  static listBackups(): Array<{\n    key: string;\n    timestamp: number;\n    size: number;\n    isValid: boolean;\n  }> {\n    const backups: Array<{\n      key: string;\n      timestamp: number;\n      size: number;\n      isValid: boolean;\n    }> = [];\n\n    try {\n      // éå†localStorageæŸ¥æ‰¾å¤‡ä»½\n      if (typeof localStorage !== 'undefined') {\n        for (let i = ZERO; i < localStorage.length; i++) {\n          const key = localStorage.key(i);\n          if (key && key.startsWith('locale_backup_')) {\n            try {\n              const data = localStorage.getItem(key);\n              if (data) {\n                const parsed = JSON.parse(data) as ExportData;\n                backups.push({\n                  key,\n                  timestamp: parsed.timestamp || ZERO,\n                  size: data.length,\n                  isValid: this.validateExportData(parsed),\n                });\n              }\n            } catch {\n              // å¿½ç•¥æ— æ•ˆçš„å¤‡ä»½æ•°æ®\n              backups.push({\n                key,\n                timestamp: ZERO,\n                size: ZERO,\n                isValid: false,\n              });\n            }\n          }\n        }\n      }\n    } catch (error) {\n      logger.warn('åˆ—å‡ºå¤‡ä»½æ—¶å‡ºé”™', { error: error as Error });\n    }\n\n    // æŒ‰æ—¶é—´æˆ³æ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰\n    return backups.sort((a, b) => b.timestamp - a.timestamp);\n  }\n\n  /**\n   * åˆ é™¤å¤‡ä»½\n   * Delete backup\n   */\n  static deleteBackup(backupKey: string): StorageOperationResult {\n    try {\n      if (!backupKey.startsWith('locale_backup_')) {\n        return {\n          success: false,\n          timestamp: Date.now(),\n          error: 'æ— æ•ˆçš„å¤‡ä»½é”®å',\n        };\n      }\n\n      LocalStorageManager.remove(backupKey);\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { deletedKey: backupKey },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        timestamp: Date.now(),\n        error: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n      };\n    }\n  }\n\n  /**\n   * æ¸…ç†æ—§å¤‡ä»½\n   * Clean up old backups\n   */\n  static cleanupOldBackups(maxBackups: number = COUNT_FIVE): StorageOperationResult {\n    try {\n      const backups = this.listBackups();\n\n      if (backups.length <= maxBackups) {\n        return {\n          success: true,\n          error: 'æ²¡æœ‰éœ€è¦æ¸…ç†çš„æ—§å¤‡ä»½',\n          timestamp: Date.now(),\n          data: { totalBackups: backups.length, maxBackups },\n        };\n      }\n\n      const backupsToDelete = backups.slice(maxBackups);\n      let deletedCount = ZERO;\n\n      backupsToDelete.forEach((backup) => {\n        try {\n          LocalStorageManager.remove(backup.key);\n          deletedCount += ONE;\n        } catch {\n          // å¿½ç•¥åˆ é™¤å¤±è´¥çš„å¤‡ä»½\n        }\n      });\n\n      return {\n        success: true,\n        error: `å·²æ¸…ç† ${deletedCount} ä¸ªæ—§å¤‡ä»½`,\n        timestamp: Date.now(),\n        data: { deletedCount, remainingBackups: backups.length - deletedCount },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `æ¸…ç†æ—§å¤‡ä»½å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * éªŒè¯å¯¼å‡ºæ•°æ®\n   * Validate export data\n   */\n  private static validateExportData(data: ExportData): boolean {\n    try {\n      // æ£€æŸ¥åŸºæœ¬ç»“æ„\n      if (!data || typeof data !== 'object') return false;\n      if (typeof data.timestamp !== 'number') return false;\n\n      // éªŒè¯åå¥½æ•°æ®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰\n      if (\n        data.preference &&\n        !LocaleValidationManager.validatePreferenceData(data.preference)\n      ) {\n        return false;\n      }\n\n      // éªŒè¯å†å²æ•°æ®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰\n      if (\n        data.history &&\n        !LocaleValidationManager.validateHistoryData(data.history)\n      ) {\n        return false;\n      }\n\n      // éªŒè¯è¦†ç›–è®¾ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰\n      if (data.override && typeof data.override !== 'string') {\n        return false;\n      }\n\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * è®¡ç®—æ•°æ®æ ¡éªŒå’Œ\n   * Calculate data checksum\n   */\n  private static calculateDataChecksum(): string {\n    try {\n      const preference = LocalStorageManager.get(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      const override = LocalStorageManager.get(\n        STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n      );\n      const history = LocalStorageManager.get(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n\n      const dataString = JSON.stringify({ preference, override, history });\n\n      // ç®€å•çš„æ ¡éªŒå’Œè®¡ç®—ï¼ˆå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´å¼ºçš„ç®—æ³•ï¼‰\n      let hash = ZERO;\n      for (let i = ZERO; i < dataString.length; i++) {\n        const char = dataString.charCodeAt(i);\n        hash = (hash << COUNT_FIVE) - hash + char;\n        hash = hash & hash; // è½¬æ¢ä¸º32ä½æ•´æ•°\n      }\n\n      return Math.abs(hash).toString(16);\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  /**\n   * è·å–å¯¼å‡ºç»Ÿè®¡ä¿¡æ¯\n   * Get export statistics\n   */\n  static getExportStats(): {\n    totalItems: number;\n    hasPreference: boolean;\n    hasOverride: boolean;\n    hasHistory: boolean;\n    historyRecords: number;\n    dataSize: number;\n    lastModified: number;\n  } {\n    const preference = LocalStorageManager.get<UserLocalePreference>(\n      STORAGE_KEYS.LOCALE_PREFERENCE,\n    );\n    const override = LocalStorageManager.get<Locale>(\n      STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n    );\n    const history = LocalStorageManager.get<LocaleDetectionHistory>(\n      STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n    );\n\n    const exportData = this.exportData();\n    const dataSize = JSON.stringify(exportData).length;\n\n    let lastModified = ZERO;\n    if (preference?.timestamp)\n      lastModified = Math.max(lastModified, preference.timestamp);\n    if (history?.lastUpdated)\n      lastModified = Math.max(lastModified, history.lastUpdated);\n\n    return {\n      totalItems: [preference, override, history].filter(Boolean).length,\n      hasPreference: Boolean(preference),\n      hasOverride: Boolean(override),\n      hasHistory: Boolean(history),\n      historyRecords: history?.detections?.length || ZERO,\n      dataSize,\n      lastModified,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-maintenance-operations.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":37},{"ruleId":"max-statements","severity":2,"message":"Static method 'performMaintenance' has too many statements (49). Maximum allowed is 20.","line":32,"column":28,"nodeType":"FunctionExpression","messageId":"exceed","endLine":155,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Static method 'performMaintenance' has a complexity of 32. Maximum allowed is 20.","line":32,"column":28,"nodeType":"FunctionExpression","messageId":"complex","endLine":155,"endColumn":4},{"ruleId":"max-statements","severity":2,"message":"Static method 'performDeepMaintenance' has too many statements (24). Maximum allowed is 20.","line":334,"column":32,"nodeType":"FunctionExpression","messageId":"exceed","endLine":394,"endColumn":4},{"ruleId":"max-statements","severity":2,"message":"Static method 'getMaintenanceRecommendations' has too many statements (33). Maximum allowed is 20.","line":400,"column":39,"nodeType":"FunctionExpression","messageId":"exceed","endLine":482,"endColumn":4},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":475,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":475,"endColumn":19}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç»´æŠ¤æ“ä½œ\n * Locale Storage Maintenance Operations\n *\n * è´Ÿè´£å­˜å‚¨æ•°æ®çš„ç»´æŠ¤ã€å‹ç¼©å’Œä¼˜åŒ–æ“ä½œ\n */\n\n'use client';\n\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, COUNT_TRIPLE, DAYS_PER_MONTH, HOURS_PER_DAY, HTTP_OK, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { LocaleCleanupManager } from '@/lib/locale-storage-maintenance-cleanup';\nimport { LocaleValidationManager } from '@/lib/locale-storage-maintenance-validation';\nimport { STORAGE_KEYS } from '@/lib/locale-storage-types';\nimport type {\n  LocaleDetectionHistory,\n  MaintenanceOptions,\n  StorageOperationResult,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\n/**\n * è¯­è¨€å­˜å‚¨ç»´æŠ¤æ“ä½œç®¡ç†å™¨\n * Locale storage maintenance operations manager\n */\nexport class LocaleMaintenanceOperationsManager {\n  /**\n   * æ‰§è¡Œå­˜å‚¨ç»´æŠ¤\n   * Perform storage maintenance\n   */\n  static performMaintenance(\n    options: MaintenanceOptions = {},\n  ): StorageOperationResult {\n    const {\n      cleanupExpired = true,\n      maxDetectionAge = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 30å¤©\n      validateData = true,\n      compactStorage = true,\n      fixSyncIssues = true,\n      cleanupDuplicates = true,\n      cleanupInvalid = true,\n    } = options;\n\n    try {\n      const results: string[] = [];\n      let totalOperations = ZERO;\n      let successfulOperations = ZERO;\n\n      // æ¸…ç†è¿‡æœŸæ£€æµ‹è®°å½•\n      if (cleanupExpired) {\n        totalOperations += ONE;\n        const cleanupResult =\n          LocaleCleanupManager.cleanupExpiredDetections(maxDetectionAge);\n        if (cleanupResult.success) {\n          successfulOperations += ONE;\n          results.push(\n            `æ¸…ç†è¿‡æœŸè®°å½•æˆåŠŸï¼Œåˆ é™¤äº† ${cleanupResult.data || ZERO} æ¡è®°å½•`,\n          );\n        } else {\n          results.push(\n            `æ¸…ç†è¿‡æœŸè®°å½•å¤±è´¥: ${cleanupResult.error || 'æœªçŸ¥é”™è¯¯'}`,\n          );\n        }\n      }\n\n      // æ¸…ç†é‡å¤è®°å½•\n      if (cleanupDuplicates) {\n        totalOperations += ONE;\n        const duplicateResult =\n          LocaleCleanupManager.cleanupDuplicateDetections();\n        if (duplicateResult.success) {\n          successfulOperations += ONE;\n          results.push(\n            `æ¸…ç†é‡å¤è®°å½•æˆåŠŸï¼Œåˆ é™¤äº† ${duplicateResult.data || ZERO} æ¡è®°å½•`,\n          );\n        } else {\n          results.push(\n            `æ¸…ç†é‡å¤è®°å½•å¤±è´¥: ${duplicateResult.error || 'æœªçŸ¥é”™è¯¯'}`,\n          );\n        }\n      }\n\n      // æ¸…ç†æ— æ•ˆæ•°æ®\n      if (cleanupInvalid) {\n        totalOperations += ONE;\n        const invalidResult = LocaleCleanupManager.cleanupInvalidPreferences();\n        if (invalidResult.success) {\n          successfulOperations += ONE;\n          results.push(\n            `æ¸…ç†æ— æ•ˆæ•°æ®æˆåŠŸï¼Œåˆ é™¤äº† ${invalidResult.data || ZERO} æ¡è®°å½•`,\n          );\n        } else {\n          results.push(\n            `æ¸…ç†æ— æ•ˆæ•°æ®å¤±è´¥: ${invalidResult.error || 'æœªçŸ¥é”™è¯¯'}`,\n          );\n        }\n      }\n\n      // éªŒè¯æ•°æ®å®Œæ•´æ€§\n      if (validateData) {\n        totalOperations += ONE;\n        const validationResult =\n          LocaleValidationManager.validateStorageIntegrity();\n        if (validationResult.success) {\n          successfulOperations += ONE;\n          results.push(`æ•°æ®éªŒè¯æˆåŠŸ`);\n        } else {\n          results.push(`æ•°æ®éªŒè¯å¤±è´¥: ${validationResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n        }\n      }\n\n      // ä¿®å¤åŒæ­¥é—®é¢˜\n      if (fixSyncIssues) {\n        totalOperations += ONE;\n        const syncResult = LocaleValidationManager.fixSyncIssues();\n        if (syncResult.success) {\n          successfulOperations += ONE;\n          results.push(`ä¿®å¤åŒæ­¥é—®é¢˜æˆåŠŸ`);\n        } else {\n          results.push(`ä¿®å¤åŒæ­¥é—®é¢˜å¤±è´¥: ${syncResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n        }\n      }\n\n      // å‹ç¼©å­˜å‚¨ç©ºé—´\n      if (compactStorage) {\n        totalOperations += ONE;\n        const compactResult = this.compactStorage();\n        if (compactResult.success) {\n          successfulOperations += ONE;\n          results.push(`å‹ç¼©å­˜å‚¨æˆåŠŸ`);\n        } else {\n          results.push(`å‹ç¼©å­˜å‚¨å¤±è´¥: ${compactResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n        }\n      }\n\n      return {\n        success: successfulOperations === totalOperations,\n        error: `ç»´æŠ¤å®Œæˆ: ${successfulOperations}/${totalOperations} æ“ä½œæˆåŠŸ`,\n        timestamp: Date.now(),\n        data: {\n          totalOperations,\n          successfulOperations,\n          results,\n          options,\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `æ‰§è¡Œç»´æŠ¤å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * å‹ç¼©å­˜å‚¨ç©ºé—´\n   * Compact storage space\n   */\n  static compactStorage(): StorageOperationResult {\n    try {\n      let compactedItems = ZERO;\n\n      // é‡æ–°åºåˆ—åŒ–æ‰€æœ‰æ•°æ®ä»¥ç§»é™¤å¤šä½™ç©ºæ ¼\n      Object.values(STORAGE_KEYS).forEach((key) => {\n        const data = LocalStorageManager.get(key);\n        if (data !== null) {\n          // é‡æ–°è®¾ç½®æ•°æ®ï¼Œè¿™ä¼šè§¦å‘é‡æ–°åºåˆ—åŒ–\n          LocalStorageManager.set(key, data);\n          compactedItems += ONE;\n        }\n      });\n\n      return {\n        success: true,\n        error: `å·²å‹ç¼© ${compactedItems} é¡¹å­˜å‚¨æ•°æ®`,\n        timestamp: Date.now(),\n        data: { compactedItems },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `å‹ç¼©å­˜å‚¨å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * ä¼˜åŒ–æ£€æµ‹å†å²æ•°æ®\n   * Optimize detection history data\n   */\n  static optimizeDetectionHistory(): StorageOperationResult {\n    try {\n      const historyData = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n\n      if (!historyData || !Array.isArray(historyData.detections)) {\n        return {\n          success: true,\n          error: 'æ²¡æœ‰æ£€æµ‹å†å²æ•°æ®éœ€è¦ä¼˜åŒ–',\n          timestamp: Date.now(),\n        };\n      }\n\n      const originalCount = historyData.detections.length;\n\n      // æŒ‰æ—¶é—´æ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰\n      const sortedDetections = historyData.detections.sort(\n        (a, b) => b.timestamp - a.timestamp,\n      );\n\n      // ä¿ç•™æœ€è¿‘çš„100æ¡è®°å½•\n      const maxRecords = PERCENTAGE_FULL;\n      const optimizedDetections = sortedDetections.slice(ZERO, maxRecords);\n\n      const removedCount = originalCount - optimizedDetections.length;\n\n      if (removedCount > ZERO) {\n        const updatedHistory: LocaleDetectionHistory = {\n          detections: optimizedDetections,\n          history: optimizedDetections,\n          lastUpdated: Date.now(),\n          totalDetections: optimizedDetections.length,\n        };\n\n        LocalStorageManager.set(\n          STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n          updatedHistory,\n        );\n\n        return {\n          success: true,\n          error: `å·²ä¼˜åŒ–æ£€æµ‹å†å²ï¼Œç§»é™¤ ${removedCount} æ¡æ—§è®°å½•`,\n          timestamp: Date.now(),\n          data: { removedCount, remainingCount: optimizedDetections.length },\n        };\n      }\n\n      return {\n        success: true,\n        error: 'æ£€æµ‹å†å²æ•°æ®å·²æ˜¯æœ€ä¼˜çŠ¶æ€',\n        timestamp: Date.now(),\n        data: { removedCount: ZERO, remainingCount: originalCount },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `ä¼˜åŒ–æ£€æµ‹å†å²å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * é‡å»ºå­˜å‚¨ç´¢å¼•\n   * Rebuild storage index\n   */\n  static rebuildStorageIndex(): StorageOperationResult {\n    try {\n      let rebuiltItems = ZERO;\n      const actions: string[] = [];\n\n      // é‡å»ºåå¥½æ•°æ®ç´¢å¼•\n      const preference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      if (preference) {\n        // ç¡®ä¿æ•°æ®ç»“æ„å®Œæ•´\n        const rebuiltPreference: UserLocalePreference = {\n          locale: preference.locale,\n          source: preference.source,\n          timestamp: preference.timestamp,\n          confidence: preference.confidence,\n          ...(preference.metadata && { metadata: preference.metadata }),\n        };\n\n        LocalStorageManager.set(\n          STORAGE_KEYS.LOCALE_PREFERENCE,\n          rebuiltPreference,\n        );\n        rebuiltItems += ONE;\n        actions.push('é‡å»ºåå¥½æ•°æ®ç´¢å¼•');\n      }\n\n      // é‡å»ºå†å²æ•°æ®ç´¢å¼•\n      const history = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n      if (history) {\n        // ç¡®ä¿æ•°æ®ç»“æ„å®Œæ•´å¹¶æŒ‰æ—¶é—´æ’åº\n        const filteredDetections = history.detections\n          .filter(\n            (detection) => detection && detection.locale && detection.source,\n          )\n          .sort((a, b) => b.timestamp - a.timestamp);\n\n        const rebuiltHistory: LocaleDetectionHistory = {\n          detections: filteredDetections,\n          history: filteredDetections,\n          lastUpdated: Date.now(),\n          totalDetections: filteredDetections.length,\n        };\n\n        LocalStorageManager.set(\n          STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n          rebuiltHistory,\n        );\n        rebuiltItems += ONE;\n        actions.push('é‡å»ºå†å²æ•°æ®ç´¢å¼•');\n      }\n\n      return {\n        success: true,\n        error: `å·²é‡å»º ${rebuiltItems} é¡¹å­˜å‚¨ç´¢å¼•`,\n        timestamp: Date.now(),\n        data: { rebuiltItems, actions },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `é‡å»ºå­˜å‚¨ç´¢å¼•å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * æ‰§è¡Œæ·±åº¦ç»´æŠ¤\n   * Perform deep maintenance\n   */\n  static performDeepMaintenance(): StorageOperationResult {\n    try {\n      const results: string[] = [];\n      let totalOperations = ZERO;\n      let successfulOperations = ZERO;\n\n      // æ‰§è¡Œæ ‡å‡†ç»´æŠ¤\n      totalOperations += ONE;\n      const standardResult = this.performMaintenance({\n        cleanupExpired: true,\n        validateData: true,\n        compactStorage: true,\n        fixSyncIssues: true,\n        cleanupDuplicates: true,\n        cleanupInvalid: true,\n      });\n      if (standardResult.success) {\n        successfulOperations += ONE;\n        results.push('æ ‡å‡†ç»´æŠ¤å®Œæˆ');\n      } else {\n        results.push(`æ ‡å‡†ç»´æŠ¤å¤±è´¥: ${standardResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n      }\n\n      // ä¼˜åŒ–æ£€æµ‹å†å²\n      totalOperations += ONE;\n      const optimizeResult = this.optimizeDetectionHistory();\n      if (optimizeResult.success) {\n        successfulOperations += ONE;\n        results.push(`ä¼˜åŒ–å†å²æˆåŠŸ`);\n      } else {\n        results.push(`ä¼˜åŒ–å†å²å¤±è´¥: ${optimizeResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n      }\n\n      // é‡å»ºå­˜å‚¨ç´¢å¼•\n      totalOperations += ONE;\n      const rebuildResult = this.rebuildStorageIndex();\n      if (rebuildResult.success) {\n        successfulOperations += ONE;\n        results.push(`é‡å»ºç´¢å¼•æˆåŠŸ`);\n      } else {\n        results.push(`é‡å»ºç´¢å¼•å¤±è´¥: ${rebuildResult.error || 'æœªçŸ¥é”™è¯¯'}`);\n      }\n\n      return {\n        success: successfulOperations === totalOperations,\n        error: `æ·±åº¦ç»´æŠ¤å®Œæˆ: ${successfulOperations}/${totalOperations} æ“ä½œæˆåŠŸ`,\n        timestamp: Date.now(),\n        data: {\n          totalOperations,\n          successfulOperations,\n          results,\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `æ‰§è¡Œæ·±åº¦ç»´æŠ¤å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * è·å–ç»´æŠ¤å»ºè®®\n   * Get maintenance recommendations\n   */\n  static getMaintenanceRecommendations(): {\n    recommendations: string[];\n    priority: 'low' | 'medium' | 'high';\n    estimatedTime: string;\n  } {\n    const recommendations: string[] = [];\n    let priority: 'low' | 'medium' | 'high' = 'low';\n\n    try {\n      // æ£€æŸ¥æ¸…ç†ç»Ÿè®¡\n      const cleanupStats = LocaleCleanupManager.getCleanupStats();\n\n      if (cleanupStats.expiredDetections > PERCENTAGE_HALF) {\n        recommendations.push(\n          `æ¸…ç† ${cleanupStats.expiredDetections} æ¡è¿‡æœŸæ£€æµ‹è®°å½•`,\n        );\n        priority = 'medium';\n      }\n\n      if (cleanupStats.duplicateDetections > COUNT_TEN) {\n        recommendations.push(\n          `æ¸…ç† ${cleanupStats.duplicateDetections} æ¡é‡å¤æ£€æµ‹è®°å½•`,\n        );\n        priority = 'medium';\n      }\n\n      if (cleanupStats.invalidPreferences > ZERO) {\n        recommendations.push(\n          `ä¿®å¤ ${cleanupStats.invalidPreferences} é¡¹æ— æ•ˆåå¥½æ•°æ®`,\n        );\n        priority = 'high';\n      }\n\n      // æ£€æŸ¥éªŒè¯ç»Ÿè®¡\n      const validationSummary = LocaleValidationManager.getValidationSummary();\n\n      if (validationSummary.invalidKeys > ZERO) {\n        recommendations.push(\n          `ä¿®å¤ ${validationSummary.invalidKeys} é¡¹æ— æ•ˆæ•°æ®`,\n        );\n        priority = 'high';\n      }\n\n      if (validationSummary.syncIssues > ZERO) {\n        recommendations.push(`ä¿®å¤ ${validationSummary.syncIssues} ä¸ªåŒæ­¥é—®é¢˜`);\n        priority = 'medium';\n      }\n\n      // æ£€æŸ¥å†å²æ•°æ®å¤§å°\n      const historyData = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n      if (historyData?.detections && historyData.detections.length > HTTP_OK) {\n        recommendations.push('ä¼˜åŒ–æ£€æµ‹å†å²æ•°æ®ï¼ˆè®°å½•è¿‡å¤šï¼‰');\n        if (priority === 'low') priority = 'medium';\n      }\n\n      if (recommendations.length === ZERO) {\n        recommendations.push('å­˜å‚¨çŠ¶æ€è‰¯å¥½ï¼Œæ— éœ€ç‰¹æ®Šç»´æŠ¤');\n      }\n\n      // ä¼°ç®—ç»´æŠ¤æ—¶é—´\n      let estimatedTime = '< 1åˆ†é’Ÿ';\n      if (recommendations.length > COUNT_TRIPLE) {\n        estimatedTime = '1-2åˆ†é’Ÿ';\n      }\n      if (priority === 'high') {\n        estimatedTime = '2-5åˆ†é’Ÿ';\n      }\n\n      return {\n        recommendations,\n        priority,\n        estimatedTime,\n      };\n    } catch (error) {\n      return {\n        recommendations: ['è·å–ç»´æŠ¤å»ºè®®æ—¶å‡ºé”™ï¼Œå»ºè®®æ‰§è¡ŒåŸºç¡€ç»´æŠ¤'],\n        priority: 'medium',\n        estimatedTime: '1-2åˆ†é’Ÿ',\n      };\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-maintenance-validation.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":37},{"ruleId":"max-statements","severity":2,"message":"Static method 'validateSpecificData' has too many statements (34). Maximum allowed is 20.","line":169,"column":30,"nodeType":"FunctionExpression","messageId":"exceed","endLine":254,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":173,"column":26,"nodeType":"MemberExpression","endLine":173,"endColumn":43},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":196,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":199,"endColumn":12},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":205,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":208,"endColumn":12},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":219,"column":13,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":222,"endColumn":14},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":264,"column":7,"nodeType":"MemberExpression","endLine":264,"endColumn":19},{"ruleId":"max-statements","severity":2,"message":"Static method 'checkDataConsistency' has too many statements (21). Maximum allowed is 20.","line":276,"column":30,"nodeType":"FunctionExpression","messageId":"exceed","endLine":344,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":295,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":297,"endColumn":12},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":299,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":305,"endColumn":12}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨éªŒè¯æ“ä½œ\n * Locale Storage Validation Operations\n *\n * è´Ÿè´£å­˜å‚¨æ•°æ®çš„å®Œæ•´æ€§éªŒè¯å’ŒåŒæ­¥çŠ¶æ€æ£€æŸ¥\n */\n\n'use client';\n\nimport { ONE, ZERO } from \"@/constants\";\nimport { MINUTE_MS } from \"@/constants/time\";\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { STORAGE_KEYS } from '@/lib/locale-storage-types';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  LocaleDetectionHistory,\n  StorageOperationResult,\n  UserLocalePreference,\n  ValidationResult,\n} from '@/lib/locale-storage-types';\n\n/**\n * å­˜å‚¨éªŒè¯æ•°æ®ç»“æ„\n * Storage validation data structure\n */\ninterface StorageValidationData {\n  hasLocalData: boolean;\n  hasCookieData: boolean;\n  localDataValid: boolean;\n  cookieDataValid: boolean;\n}\n\n/**\n * è¯­è¨€å­˜å‚¨éªŒè¯ç®¡ç†å™¨\n * Locale storage validation manager\n */\nexport class LocaleValidationManager {\n  /**\n   * éªŒè¯å­˜å‚¨æ•°æ®å®Œæ•´æ€§\n   * Validate storage data integrity\n   */\n  static validateStorageIntegrity(): StorageOperationResult {\n    const issues: string[] = [];\n\n    try {\n      // éªŒè¯ç”¨æˆ·åå¥½æ•°æ®\n      const preference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      if (preference && !this.validatePreferenceData(preference)) {\n        issues.push('ç”¨æˆ·åå¥½æ•°æ®æ ¼å¼æ— æ•ˆ');\n      }\n\n      // éªŒè¯æ£€æµ‹å†å²æ•°æ®\n      const history = LocalStorageManager.get<LocaleDetectionHistory>(\n        STORAGE_KEYS.LOCALE_DETECTION_HISTORY,\n      );\n      if (history && !this.validateHistoryData(history)) {\n        issues.push('æ£€æµ‹å†å²æ•°æ®æ ¼å¼æ— æ•ˆ');\n      }\n\n      // éªŒè¯å­˜å‚¨åŒæ­¥çŠ¶æ€\n      const syncIssues = this.validateStorageSync();\n      issues.push(...syncIssues);\n\n      if (issues.length === ZERO) {\n        return {\n          success: true,\n          timestamp: Date.now(),\n          data: { issues },\n        };\n      }\n        return {\n          success: false,\n          error: `å‘ç° ${issues.length} ä¸ªé—®é¢˜`,\n          timestamp: Date.now(),\n          data: { issues },\n        };\n\n    } catch (error) {\n      return {\n        success: false,\n        error: `éªŒè¯å­˜å‚¨å®Œæ•´æ€§å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * éªŒè¯ç”¨æˆ·åå¥½æ•°æ®\n   * Validate user preference data\n   */\n  static validatePreferenceData(preference: UserLocalePreference): boolean {\n    if (!preference || typeof preference !== 'object') return false;\n\n    const requiredFields = ['locale', 'source', 'timestamp', 'confidence'];\n    const hasAllFields = requiredFields.every((field) => field in preference);\n\n    if (!hasAllFields) return false;\n\n    // éªŒè¯å­—æ®µç±»å‹\n    if (typeof preference.locale !== 'string') return false;\n    if (typeof preference.source !== 'string') return false;\n    if (typeof preference.timestamp !== 'number') return false;\n    if (typeof preference.confidence !== 'number') return false;\n\n    // éªŒè¯å€¼çš„åˆç†æ€§\n    if (preference.confidence < ZERO || preference.confidence > ONE) return false;\n    if (preference.timestamp > Date.now() || preference.timestamp < ZERO)\n      return false;\n\n    return true;\n  }\n\n  /**\n   * éªŒè¯æ£€æµ‹å†å²æ•°æ®\n   * Validate detection history data\n   */\n  static validateHistoryData(history: LocaleDetectionHistory): boolean {\n    if (!history || typeof history !== 'object') return false;\n    if (!Array.isArray(history.detections)) return false;\n    if (typeof history.lastUpdated !== 'number') return false;\n\n    return history.detections.every(\n      (detection) =>\n        typeof detection.locale === 'string' &&\n        typeof detection.source === 'string' &&\n        typeof detection.timestamp === 'number' &&\n        typeof detection.confidence === 'number' &&\n        detection.confidence >= ZERO &&\n        detection.confidence <= ONE,\n    );\n  }\n\n  /**\n   * éªŒè¯å­˜å‚¨åŒæ­¥çŠ¶æ€\n   * Validate storage synchronization\n   */\n  static validateStorageSync(): string[] {\n    const issues: string[] = [];\n\n    // æ£€æŸ¥å…³é”®æ•°æ®çš„åŒæ­¥çŠ¶æ€\n    const localPreference = LocalStorageManager.get<UserLocalePreference>(\n      STORAGE_KEYS.LOCALE_PREFERENCE,\n    );\n    const cookiePreference = CookieManager.get(STORAGE_KEYS.LOCALE_PREFERENCE);\n\n    if (localPreference && !cookiePreference) {\n      issues.push('ç”¨æˆ·åå¥½åœ¨localStorageä¸­å­˜åœ¨ä½†Cookieä¸­ç¼ºå¤±');\n    }\n\n    const localOverride = LocalStorageManager.get<Locale>(\n      STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n    );\n    const cookieOverride = CookieManager.get(STORAGE_KEYS.USER_LOCALE_OVERRIDE);\n\n    if (localOverride && !cookieOverride) {\n      issues.push('ç”¨æˆ·è¦†ç›–è®¾ç½®åœ¨localStorageä¸­å­˜åœ¨ä½†Cookieä¸­ç¼ºå¤±');\n    }\n\n    return issues;\n  }\n\n  /**\n   * éªŒè¯ç‰¹å®šå­˜å‚¨é”®çš„æ•°æ®\n   * Validate data for specific storage key\n   */\n  static validateSpecificData(\n    key: keyof typeof STORAGE_KEYS,\n  ): ValidationResult<StorageValidationData> {\n    try {\n      const storageKey = STORAGE_KEYS[key];\n      const localData = LocalStorageManager.get(storageKey);\n      const cookieData = CookieManager.get(storageKey);\n\n      const result: ValidationResult<StorageValidationData> = {\n        isValid: true,\n        errors: [],\n        warnings: [],\n        data: {\n          hasLocalData: localData !== null,\n          hasCookieData: cookieData !== null,\n          localDataValid: true,\n          cookieDataValid: true,\n        },\n      };\n\n      // éªŒè¯localStorageæ•°æ®\n      if (localData !== null) {\n        if (key === 'LOCALE_PREFERENCE') {\n          const isValid = this.validatePreferenceData(\n            localData as UserLocalePreference,\n          );\n          result.data!.localDataValid = isValid;\n          if (!isValid) {\n            result.isValid = false;\n            result.errors.push('localStorageä¸­çš„åå¥½æ•°æ®æ ¼å¼æ— æ•ˆ');\n          }\n        } else if (key === 'LOCALE_DETECTION_HISTORY') {\n          const isValid = this.validateHistoryData(\n            localData as LocaleDetectionHistory,\n          );\n          result.data!.localDataValid = isValid;\n          if (!isValid) {\n            result.isValid = false;\n            result.errors.push('localStorageä¸­çš„å†å²æ•°æ®æ ¼å¼æ— æ•ˆ');\n          }\n        }\n      }\n\n      // éªŒè¯Cookieæ•°æ®\n      if (cookieData !== null) {\n        try {\n          if (key === 'LOCALE_PREFERENCE') {\n            const parsed = JSON.parse(cookieData) as UserLocalePreference;\n            const isValid = this.validatePreferenceData(parsed);\n            result.data!.cookieDataValid = isValid;\n            if (!isValid) {\n              result.isValid = false;\n              result.errors.push('Cookieä¸­çš„åå¥½æ•°æ®æ ¼å¼æ— æ•ˆ');\n            }\n          }\n        } catch {\n          result.isValid = false;\n          result.data!.cookieDataValid = false;\n          result.errors.push('Cookieæ•°æ®JSONæ ¼å¼é”™è¯¯');\n        }\n      }\n\n      // æ£€æŸ¥åŒæ­¥çŠ¶æ€\n      if (localData !== null && cookieData === null) {\n        result.warnings.push('æ•°æ®ä»…å­˜åœ¨äºlocalStorageä¸­ï¼ŒCookieä¸­ç¼ºå¤±');\n      } else if (localData === null && cookieData !== null) {\n        result.warnings.push('æ•°æ®ä»…å­˜åœ¨äºCookieä¸­ï¼ŒlocalStorageä¸­ç¼ºå¤±');\n      }\n\n      return result;\n    } catch (error) {\n      return {\n        isValid: false,\n        errors: [\n          `éªŒè¯å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        ],\n        warnings: [],\n        data: {\n          hasLocalData: false,\n          hasCookieData: false,\n          localDataValid: false,\n          cookieDataValid: false,\n        },\n      };\n    }\n  }\n\n  /**\n   * éªŒè¯æ‰€æœ‰å­˜å‚¨æ•°æ®\n   * Validate all storage data\n   */\n  static validateAllData(): Record<string, ValidationResult> {\n    const results: Record<string, ValidationResult> = {};\n\n    Object.keys(STORAGE_KEYS).forEach((key) => {\n      results[key] = this.validateSpecificData(\n        key as keyof typeof STORAGE_KEYS,\n      );\n    });\n\n    return results;\n  }\n\n  /**\n   * æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§\n   * Check data consistency\n   */\n  static checkDataConsistency(): StorageOperationResult {\n    try {\n      const issues: string[] = [];\n      const warnings: string[] = [];\n\n      // æ£€æŸ¥åå¥½æ•°æ®ä¸€è‡´æ€§\n      const localPreference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      const cookiePreferenceStr = CookieManager.get(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n\n      if (localPreference && cookiePreferenceStr) {\n        try {\n          const cookiePreference = JSON.parse(\n            cookiePreferenceStr,\n          ) as UserLocalePreference;\n\n          if (localPreference.locale !== cookiePreference.locale) {\n            issues.push('localStorageå’ŒCookieä¸­çš„è¯­è¨€åå¥½ä¸ä¸€è‡´');\n          }\n\n          if (\n            Math.abs(localPreference.timestamp - cookiePreference.timestamp) >\n            MINUTE_MS\n          ) {\n            // 1åˆ†é’Ÿå·®å¼‚\n            warnings.push('localStorageå’ŒCookieä¸­çš„åå¥½æ—¶é—´æˆ³å·®å¼‚è¾ƒå¤§');\n          }\n        } catch {\n          issues.push('Cookieä¸­çš„åå¥½æ•°æ®æ ¼å¼é”™è¯¯');\n        }\n      }\n\n      // æ£€æŸ¥è¦†ç›–è®¾ç½®ä¸€è‡´æ€§\n      const localOverride = LocalStorageManager.get<Locale>(\n        STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n      );\n      const cookieOverride = CookieManager.get(\n        STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n      );\n\n      if (localOverride && cookieOverride && localOverride !== cookieOverride) {\n        issues.push('localStorageå’ŒCookieä¸­çš„è¯­è¨€è¦†ç›–è®¾ç½®ä¸ä¸€è‡´');\n      }\n\n      if (issues.length === ZERO) {\n        return {\n          success: true,\n          timestamp: Date.now(),\n          data: { issues, warnings },\n        };\n      }\n        return {\n          success: false,\n          error: `å‘ç° ${issues.length} ä¸ªä¸€è‡´æ€§é—®é¢˜`,\n          timestamp: Date.now(),\n          data: { issues, warnings },\n        };\n\n    } catch (error) {\n      return {\n        success: false,\n        error: `æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n\n  /**\n   * è·å–éªŒè¯æ‘˜è¦\n   * Get validation summary\n   */\n  static getValidationSummary(): {\n    totalKeys: number;\n    validKeys: number;\n    invalidKeys: number;\n    warningKeys: number;\n    syncIssues: number;\n  } {\n    const allResults = this.validateAllData();\n    const syncIssues = this.validateStorageSync();\n\n    let validKeys = ZERO;\n    let invalidKeys = ZERO;\n    let warningKeys = ZERO;\n\n    Object.values(allResults).forEach((result) => {\n      if (result.isValid) {\n        validKeys += ONE;\n      } else {\n        invalidKeys += ONE;\n      }\n      if (result.warnings.length > ZERO) {\n        warningKeys += ONE;\n      }\n    });\n\n    return {\n      totalKeys: Object.keys(STORAGE_KEYS).length,\n      validKeys,\n      invalidKeys,\n      warningKeys,\n      syncIssues: syncIssues.length,\n    };\n  }\n\n  /**\n   * ä¿®å¤åŒæ­¥é—®é¢˜\n   * Fix synchronization issues\n   */\n  static fixSyncIssues(): StorageOperationResult {\n    try {\n      let fixedIssues = ZERO;\n      const actions: string[] = [];\n\n      // ä¿®å¤åå¥½æ•°æ®åŒæ­¥\n      const localPreference = LocalStorageManager.get<UserLocalePreference>(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n      const cookiePreference = CookieManager.get(\n        STORAGE_KEYS.LOCALE_PREFERENCE,\n      );\n\n      if (localPreference && !cookiePreference) {\n        CookieManager.set(\n          STORAGE_KEYS.LOCALE_PREFERENCE,\n          JSON.stringify(localPreference),\n        );\n        fixedIssues += ONE;\n        actions.push('å·²åŒæ­¥åå¥½æ•°æ®åˆ°Cookie');\n      }\n\n      // ä¿®å¤è¦†ç›–è®¾ç½®åŒæ­¥\n      const localOverride = LocalStorageManager.get<Locale>(\n        STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n      );\n      const cookieOverride = CookieManager.get(\n        STORAGE_KEYS.USER_LOCALE_OVERRIDE,\n      );\n\n      if (localOverride && !cookieOverride) {\n        CookieManager.set(STORAGE_KEYS.USER_LOCALE_OVERRIDE, localOverride);\n        fixedIssues += ONE;\n        actions.push('å·²åŒæ­¥è¦†ç›–è®¾ç½®åˆ°Cookie');\n      }\n\n      return {\n        success: true,\n        timestamp: Date.now(),\n        data: { fixedIssues, actions },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `ä¿®å¤åŒæ­¥é—®é¢˜å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`,\n        timestamp: Date.now(),\n      };\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-maintenance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-manager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":79,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":117,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5968,5971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5968,5971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":171,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":171,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":199,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7514,7517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7514,7517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":226,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":226,"endColumn":17}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç®¡ç†å™¨ - ä¸»å…¥å£æ–‡ä»¶\n * Locale Storage Manager - Main Entry Point\n *\n * ç»Ÿä¸€çš„è¯­è¨€åå¥½å­˜å‚¨ç®¡ç†æ¥å£ï¼Œæ•´åˆæ‰€æœ‰å­æ¨¡å—åŠŸèƒ½\n */\n\n'use client';\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„ç±»å‹å’ŒåŠŸèƒ½\n// å¯¼å‡ºå¸¸é‡å’Œæšä¸¾\n// å¯¼å…¥ä¸»è¦åŠŸèƒ½ç±»\nimport { LocaleStorageAnalytics as LocaleAnalyticsManager } from '@/lib/locale-storage-analytics';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, DAYS_PER_MONTH, HOURS_PER_DAY, SECONDS_PER_MINUTE } from '@/constants';\n\nimport { LocaleHistoryManager } from '@/lib/locale-storage-history';\nimport { LocaleMaintenanceManager } from '@/lib/locale-storage-maintenance';\nimport { LocalePreferenceManager } from '@/lib/locale-storage-preference';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  LocaleDetectionHistory,\n  MaintenanceOptions,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\nexport {\n  BROWSER_TYPES, COMPRESSION_ALGORITHMS, CONFIG_MIGRATIONS, CONFIG_PRESETS,\n  CONFIG_VALIDATION_RULES, DEFAULT_STORAGE_CONFIG, DEVICE_TYPES, ENCRYPTION_ALGORITHMS, ENVIRONMENT_TYPES, ERROR_TYPES, HEALTH_STATUS, MIGRATION_STATUS, OS_TYPES, PRIORITY_LEVELS, STORAGE_CONSTANTS, STORAGE_KEYS, STORAGE_TYPES, SYNC_STATUS\n} from '@/lib/locale-storage-types';\n// å¯¼å‡ºå·¥å…·å‡½æ•°\nexport {\n  compareObjects, createStorageKey, debounce, deepClone, estimateStorageSize, formatByteSize,\n  formatDuration, generateChecksum, generateUniqueId, isLocaleDetectionHistory,\n  isStorageSyncConfig, isUserLocalePreference, mergeObjects, parseStorageKey, retry,\n  safeJsonParse,\n  safeJsonStringify, throttle, validateDetectionHistory, validatePreference\n} from '@/lib/locale-storage-types';\n// å¯¼å‡ºç±»å‹å®šä¹‰\nexport type {\n  AuditLogEntry, BaseValidators, BrowserType, CompressionAlgorithm, Config, ConfigFactory, ConfigMigration, ConfigSnapshot, ConfigValidationRules, DataExport,\n  DataImportResult, DefaultConfig, DetectionHistory, DetectionRecord, DeviceInfo, DeviceType, EncryptionAlgorithm, EnvironmentConfig, EnvironmentType, ErrorInfo, ErrorType, Event,\n  EventListener, EventType, GeolocationInfo, HealthStatus, LocaleDetectionHistory, LocaleDetectionRecord, LocaleSource, MigrationStatus, NetworkInfo, OperationResult, OSType, PerformanceMetrics, Preference, PriorityLevel, SessionInfo, Source, StorageBackupData, StorageCompressionConfig, StorageConfig, StorageEncryptionConfig, StorageEvent,\n  StorageEventListener, StorageEventType, StorageHealthCheck, StorageKey, StorageMigrationConfig, StorageOperationResult, StorageStats, StorageSyncConfig, StorageType, SyncStatus, TimestampUtils, UserLocalePreference, Validation, ValidationResult, VersionInfo\n} from '@/lib/locale-storage-types';\n// å¯¼å‡ºåå¥½ç®¡ç†åŠŸèƒ½\nexport {\n  checkDataConsistency, cleanupEventSystem, clearOverrideHistory, clearPreferenceHistory, clearUserOverride, clearUserPreference, comparePreferences, consoleLogListener, createDefaultPreference, createOverrideClearedEvent, createOverrideSetEvent, createPreferenceErrorEvent, createPreferenceLoadedEvent, createPreferenceSavedEvent, createSyncEvent, exportOverrideData, fixDataInconsistency, getEventSystemStatus, getOverrideHistory, getOverrideStats, getPreferenceChangeStats, getPreferenceHistory, getPreferenceSourcePriority, getPreferenceSummary, getStorageUsage, getUserOverride, getUserPreference, hasUserOverride, hasUserPreference, historyRecordingListener, importOverrideData, LocalePreferenceManager, normalizePreference, optimizeStoragePerformance, PreferenceCacheManager, PreferenceEventManager, recordOverrideOperation, recordPreferenceHistory, saveUserPreference, setupDefaultListeners, setUserOverride, syncPreferenceData, updatePreferenceConfidence, validatePreferenceData, type PreferenceManager\n} from '@/lib/locale-storage-preference';\n// å¯¼å‡ºå†å²ç®¡ç†åŠŸèƒ½\nexport type { QueryConditions } from '@/lib/locale-storage-history';\nexport {\n  LocaleHistoryManager,\n  type HistoryManager\n} from '@/lib/locale-storage-history';\n// å¯¼å‡ºåˆ†æåŠŸèƒ½\nexport {\n  LocaleStorageAnalytics,\n  type Analytics\n} from '@/lib/locale-storage-analytics';\nexport type {\n  ExportData, UsagePatterns,\n  UsageTrends\n} from '@/lib/locale-storage-analytics';\n// å¯¼å‡ºç»´æŠ¤åŠŸèƒ½\nexport { LocaleMaintenanceManager } from '@/lib/locale-storage-maintenance';\n\n/**\n * ç»Ÿä¸€çš„è¯­è¨€å­˜å‚¨ç®¡ç†å™¨\n * Unified locale storage manager\n *\n * æä¾›å‘åå…¼å®¹çš„APIï¼Œæ•´åˆæ‰€æœ‰å­æ¨¡å—åŠŸèƒ½\n */\nexport class LocaleStorageManager {\n  /**\n   * ä¿å­˜ç”¨æˆ·è¯­è¨€åå¥½\n   * Save user locale preference\n   */\n  static saveUserPreference(preference: UserLocalePreference): void {\n    const result = LocalePreferenceManager.saveUserPreference(preference);\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * è·å–ç”¨æˆ·è¯­è¨€åå¥½\n   * Get user locale preference\n   */\n  static getUserPreference(): UserLocalePreference | null {\n    const result = LocalePreferenceManager.getUserPreference();\n    return result.success ? (result.data ?? null) : null;\n  }\n\n  /**\n   * è®¾ç½®ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„è¯­è¨€\n   * Set user manually selected locale\n   */\n  static setUserOverride(locale: Locale): void {\n    const result = LocalePreferenceManager.setUserOverride(locale);\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * è·å–ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„è¯­è¨€\n   * Get user manually selected locale\n   */\n  static getUserOverride(): Locale | null {\n    const result = LocalePreferenceManager.getUserOverride();\n    return result.success ? (result.data ?? null) : null;\n  }\n\n  /**\n   * æ¸…é™¤ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©\n   * Clear user manual selection\n   */\n  static clearUserOverride(): void {\n    const result = LocalePreferenceManager.clearUserOverride();\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * è·å–æ£€æµ‹å†å²\n   * Get detection history\n   */\n  static getDetectionHistory(): LocaleDetectionHistory | null {\n    const result = LocaleHistoryManager.getDetectionHistory();\n    return result.success ? result.data || null : null;\n  }\n\n  /**\n   * è·å–å›é€€è¯­è¨€\n   * Get fallback locale\n   */\n  static getFallbackLocale(): Locale | null {\n    // è¿”å›é»˜è®¤è¯­è¨€ä½œä¸ºå›é€€\n    return 'en';\n  }\n\n  /**\n   * æ·»åŠ æ£€æµ‹è®°å½•\n   * Add detection record\n   */\n  static addDetectionRecord(detection: {\n    locale: Locale;\n    source: string;\n    timestamp: number;\n    confidence: number;\n  }): void {\n    return (LocaleHistoryManager.addDetectionRecord as any)(detection);\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„æ£€æµ‹è®°å½•\n   * Get recent detection records\n   */\n  static getRecentDetections(limit: number = COUNT_FIVE): Array<{\n    locale: Locale;\n    source: string;\n    timestamp: number;\n    confidence: number;\n  }> {\n    return LocaleHistoryManager.getRecentDetections(limit);\n  }\n\n  /**\n   * æ¸…é™¤æ‰€æœ‰å­˜å‚¨æ•°æ®\n   * Clear all storage data\n   */\n  static clearAll(): void {\n    const result = LocaleMaintenanceManager.clearAll();\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * è·å–å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯\n   * Get storage statistics\n   */\n  static getStorageStats() {\n    return LocaleAnalyticsManager.getStorageStats();\n  }\n\n  /**\n   * éªŒè¯åå¥½æ•°æ®çš„æœ‰æ•ˆæ€§\n   * Validate preference data integrity\n   */\n  static validatePreference(preference: UserLocalePreference): boolean {\n    return LocalePreferenceManager.validatePreference(preference);\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸçš„æ£€æµ‹è®°å½•\n   * Clean up expired detection records\n   */\n  static cleanupExpiredDetections(\n    maxAgeMs: number = DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  ): void {\n    const result = LocaleMaintenanceManager.cleanupExpiredDetections(maxAgeMs);\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * å¯¼å‡ºæ‰€æœ‰å­˜å‚¨æ•°æ®\n   * Export all storage data\n   */\n  static exportData() {\n    return LocaleMaintenanceManager.exportData();\n  }\n\n  /**\n   * å¯¼å…¥å­˜å‚¨æ•°æ®\n   * Import storage data\n   */\n  static importData(data: {\n    preference?: UserLocalePreference;\n    override?: Locale;\n    history?: LocaleDetectionHistory;\n  }): void {\n    const importData: any = {};\n    if (data.preference) importData.preference = data.preference;\n    if (data.override) importData.override = data.override;\n    if (data.history) importData.history = data.history;\n\n    const result = LocaleMaintenanceManager.importData(importData);\n    // å¿½ç•¥è¿”å›å€¼ï¼Œä¿æŒå‘åå…¼å®¹çš„voidè¿”å›ç±»å‹\n    \n  }\n\n  /**\n   * æ‰§è¡Œå­˜å‚¨ç»´æŠ¤\n   * Perform storage maintenance\n   */\n  static performMaintenance(options?: MaintenanceOptions) {\n    return LocaleMaintenanceManager.performMaintenance(options);\n  }\n\n  /**\n   * éªŒè¯å­˜å‚¨æ•°æ®å®Œæ•´æ€§\n   * Validate storage data integrity\n   */\n  static validateStorageIntegrity() {\n    return LocaleMaintenanceManager.validateStorageIntegrity();\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-cache.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'checkDataConsistency' has too many statements (23). Maximum allowed is 20.","line":183,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":247,"endColumn":2},{"ruleId":"max-statements","severity":2,"message":"Function 'fixDataInconsistency' has too many statements (24). Maximum allowed is 20.","line":253,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":336,"endColumn":2},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":385,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":387,"endColumn":10},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":385,"column":26,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":385,"endColumn":40,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[9414,9442],"text":"Object.prototype.hasOwnProperty.call(localStorage, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":386,"column":24,"nodeType":"MemberExpression","endLine":386,"endColumn":41}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç”¨æˆ·è¯­è¨€åå¥½ç¼“å­˜å’ŒåŒæ­¥\n * User Locale Preference Cache and Sync\n *\n * è´Ÿè´£åå¥½æ•°æ®çš„ç¼“å­˜ç®¡ç†ã€æ•°æ®åŒæ­¥å’Œæ€§èƒ½ä¼˜åŒ–\n */\n\n'use client';\n\nimport { MAGIC_0_5, MAGIC_0_6, MAGIC_0_7 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport type { Locale } from '@/types/i18n';\nimport {\n  getUserPreference,\n  saveUserPreference,\n  validatePreferenceData,\n} from '@/lib/locale-storage-preference-core';\nimport type {\n  StorageOperationResult,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\n// ==================== ç¼“å­˜ç®¡ç†å™¨ ====================\n\n/**\n * åå¥½ç¼“å­˜ç®¡ç†å™¨\n * Preference cache manager\n */\nexport class PreferenceCacheManager {\n  private static cache: Map<string, UserLocalePreference> = new Map();\n  private static cacheTimestamp = ZERO;\n  private static readonly CACHE_TTL = COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // 5 minutes\n\n  /**\n   * è·å–ç¼“å­˜çš„åå¥½\n   * Get cached preference\n   */\n  static getCachedPreference(key: string): UserLocalePreference | null {\n    if (Date.now() - this.cacheTimestamp > this.CACHE_TTL) {\n      this.cache.clear();\n      return null;\n    }\n\n    return this.cache.get(key) || null;\n  }\n\n  /**\n   * æ›´æ–°ç¼“å­˜\n   * Update cache\n   */\n  static updateCache(key: string, preference: UserLocalePreference): void {\n    this.cache.set(key, preference);\n    this.cacheTimestamp = Date.now();\n  }\n\n  /**\n   * æ¸…é™¤ç¼“å­˜\n   * Clear cache\n   */\n  static clearCache(key?: string): void {\n    if (key) {\n      this.cache.delete(key);\n    } else {\n      this.cache.clear();\n      this.cacheTimestamp = ZERO;\n    }\n  }\n\n  /**\n   * è·å–ç¼“å­˜çŠ¶æ€\n   * Get cache status\n   */\n  static getCacheStatus(): {\n    size: number;\n    age: number;\n    isExpired: boolean;\n    keys: string[];\n  } {\n    const age = Date.now() - this.cacheTimestamp;\n    const isExpired = age > this.CACHE_TTL;\n\n    return {\n      size: this.cache.size,\n      age,\n      isExpired,\n      keys: Array.from(this.cache.keys()),\n    };\n  }\n\n  /**\n   * é¢„çƒ­ç¼“å­˜\n   * Warm up cache\n   */\n  static warmUpCache(): void {\n    const preference = getUserPreference();\n    if (preference.success && preference.data) {\n      this.updateCache('locale_preference', preference.data);\n    }\n  }\n}\n\n// ==================== æ•°æ®åŒæ­¥åŠŸèƒ½ ====================\n\n/**\n * åŒæ­¥åå¥½æ•°æ®\n * Sync preference data\n */\nexport function syncPreferenceData(): StorageOperationResult<{\n  localStorage: UserLocalePreference | null;\n  cookies: Locale | null;\n  synced: boolean;\n}> {\n  const startTime = Date.now();\n\n  try {\n    // è·å–å„å­˜å‚¨æºçš„æ•°æ®\n    const localPreference =\n      LocalStorageManager.get<UserLocalePreference>('locale_preference');\n    const cookieLocale = CookieManager.get('locale_preference');\n\n    let synced = false;\n    let primaryPreference: UserLocalePreference | null = null;\n\n    // ç¡®å®šä¸»è¦æ•°æ®æº\n    if (localPreference && validatePreferenceData(localPreference).isValid) {\n      primaryPreference = localPreference;\n\n      // åŒæ­¥åˆ° cookies\n      if (cookieLocale !== localPreference.locale) {\n        CookieManager.set('locale_preference', localPreference.locale);\n        synced = true;\n      }\n    } else if (cookieLocale) {\n      // ä» cookies åˆ›å»ºåå¥½å¹¶åŒæ­¥åˆ° localStorage\n      primaryPreference = {\n        locale: cookieLocale as Locale,\n        source: 'browser',\n        confidence: MAGIC_0_7,\n        timestamp: Date.now(),\n        metadata: { syncedFrom: 'cookies' },\n      };\n\n      const saveResult = saveUserPreference(primaryPreference);\n      synced = saveResult.success;\n    }\n\n    // æ›´æ–°ç¼“å­˜\n    if (primaryPreference) {\n      PreferenceCacheManager.updateCache(\n        'locale_preference',\n        primaryPreference,\n      );\n    }\n\n    return {\n      success: true,\n      data: {\n        localStorage: localPreference,\n        cookies: cookieLocale as Locale | null,\n        synced,\n      },\n      source: 'sync',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§\n * Check data consistency\n */\nexport function checkDataConsistency(): {\n  isConsistent: boolean;\n  issues: string[];\n  recommendations: string[];\n} {\n  const issues: string[] = [];\n  const recommendations: string[] = [];\n\n  try {\n    const localPreference =\n      LocalStorageManager.get<UserLocalePreference>('locale_preference');\n    const cookieLocale = CookieManager.get('locale_preference');\n\n    // æ£€æŸ¥ localStorage æ•°æ®æœ‰æ•ˆæ€§\n    if (localPreference) {\n      const validation = validatePreferenceData(localPreference);\n      if (!validation.isValid) {\n        issues.push(\n          `Invalid localStorage data: ${validation.errors.join(', ')}`,\n        );\n        recommendations.push('Clear and recreate localStorage preference data');\n      }\n    }\n\n    // æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§\n    if (localPreference && cookieLocale) {\n      if (localPreference.locale !== cookieLocale) {\n        issues.push(\n          `Locale mismatch: localStorage(${localPreference.locale}) vs cookies(${cookieLocale})`,\n        );\n        recommendations.push('Sync data between localStorage and cookies');\n      }\n    } else if (!localPreference && !cookieLocale) {\n      issues.push('No preference data found in any storage');\n      recommendations.push('Initialize default preference data');\n    }\n\n    // æ£€æŸ¥ç¼“å­˜ä¸€è‡´æ€§\n    const cachedPreference =\n      PreferenceCacheManager.getCachedPreference('locale_preference');\n    if (cachedPreference && localPreference) {\n      if (\n        cachedPreference.locale !== localPreference.locale ||\n        Math.abs(cachedPreference.timestamp - localPreference.timestamp) > ANIMATION_DURATION_VERY_SLOW\n      ) {\n        issues.push('Cache data is inconsistent with localStorage');\n        recommendations.push('Clear and refresh cache');\n      }\n    }\n\n    return {\n      isConsistent: issues.length === ZERO,\n      issues,\n      recommendations,\n    };\n  } catch (error) {\n    return {\n      isConsistent: false,\n      issues: [\n        `Error checking consistency: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      ],\n      recommendations: ['Investigate storage access issues'],\n    };\n  }\n}\n\n/**\n * ä¿®å¤æ•°æ®ä¸ä¸€è‡´\n * Fix data inconsistency\n */\nexport function fixDataInconsistency(): StorageOperationResult<{\n  fixed: boolean;\n  actions: string[];\n}> {\n  const startTime = Date.now();\n  const actions: string[] = [];\n\n  try {\n    const consistency = checkDataConsistency();\n\n    if (consistency.isConsistent) {\n      return {\n        success: true,\n        data: {\n          fixed: false,\n          actions: ['No issues found'],\n        },\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // æ¸…é™¤æ— æ•ˆçš„ç¼“å­˜\n    PreferenceCacheManager.clearCache();\n    actions.push('Cleared cache');\n\n    // è·å–æœ€å¯é çš„æ•°æ®æº\n    const localPreference =\n      LocalStorageManager.get<UserLocalePreference>('locale_preference');\n    const cookieLocale = CookieManager.get('locale_preference');\n\n    let authoritative: UserLocalePreference | null = null;\n\n    // ç¡®å®šæƒå¨æ•°æ®æº\n    if (localPreference && validatePreferenceData(localPreference).isValid) {\n      authoritative = localPreference;\n      actions.push('Using localStorage as authoritative source');\n    } else if (cookieLocale) {\n      authoritative = {\n        locale: cookieLocale as Locale,\n        source: 'browser',\n        confidence: MAGIC_0_6,\n        timestamp: Date.now(),\n        metadata: { recoveredFrom: 'cookies' },\n      };\n      actions.push('Recovered from cookies');\n    } else {\n      // åˆ›å»ºé»˜è®¤åå¥½\n      authoritative = {\n        locale: 'en',\n        source: 'default',\n        confidence: MAGIC_0_5,\n        timestamp: Date.now(),\n        metadata: { createdBy: 'recovery' },\n      };\n      actions.push('Created default preference');\n    }\n\n    // åŒæ­¥åˆ°æ‰€æœ‰å­˜å‚¨\n    if (authoritative) {\n      const saveResult = saveUserPreference(authoritative);\n      if (saveResult.success) {\n        actions.push('Synced to all storage locations');\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        fixed: true,\n        actions,\n      },\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * è·å–å­˜å‚¨ä½¿ç”¨æƒ…å†µ\n * Get storage usage\n */\nexport function getStorageUsage(): {\n  localStorage: {\n    available: boolean;\n    size: number;\n    quota: number;\n  };\n  cookies: {\n    available: boolean;\n    size: number;\n    count: number;\n  };\n  cache: {\n    size: number;\n    age: number;\n    isExpired: boolean;\n  };\n} {\n  const usage = {\n    localStorage: {\n      available: false,\n      size: ZERO,\n      quota: ZERO,\n    },\n    cookies: {\n      available: false,\n      size: ZERO,\n      count: ZERO,\n    },\n    cache: {\n      size: ZERO,\n      age: ZERO,\n      isExpired: false,\n    },\n  };\n\n  // æ£€æŸ¥ localStorage\n  try {\n    if (typeof localStorage !== 'undefined') {\n      usage.localStorage.available = true;\n\n      // ä¼°ç®—ä½¿ç”¨å¤§å°\n      let totalSize = ZERO;\n      for (const key in localStorage) {\n        if (localStorage.hasOwnProperty(key)) {\n          totalSize += localStorage[key].length + key.length;\n        }\n      }\n      usage.localStorage.size = totalSize;\n\n      // å°è¯•è·å–é…é¢ä¿¡æ¯\n      if ('storage' in navigator && 'estimate' in navigator.storage) {\n        navigator.storage\n          .estimate()\n          .then((estimate) => {\n            usage.localStorage.quota = estimate.quota || ZERO;\n          })\n          .catch(() => {\n            // å¿½ç•¥é”™è¯¯\n          });\n      }\n    }\n  } catch {\n    // localStorage ä¸å¯ç”¨\n  }\n\n  // æ£€æŸ¥ cookies\n  try {\n    if (typeof document !== 'undefined') {\n      usage.cookies.available = true;\n      usage.cookies.size = document.cookie.length;\n      usage.cookies.count = document.cookie.split(';').length;\n    }\n  } catch {\n    // cookies ä¸å¯ç”¨\n  }\n\n  // æ£€æŸ¥ç¼“å­˜\n  const cacheStatus = PreferenceCacheManager.getCacheStatus();\n  usage.cache = {\n    size: cacheStatus.size,\n    age: cacheStatus.age,\n    isExpired: cacheStatus.isExpired,\n  };\n\n  return usage;\n}\n\n/**\n * ä¼˜åŒ–å­˜å‚¨æ€§èƒ½\n * Optimize storage performance\n */\nexport function optimizeStoragePerformance(): StorageOperationResult<{\n  optimized: boolean;\n  actions: string[];\n  performance: {\n    before: number;\n    after: number;\n    improvement: number;\n  };\n}> {\n  const startTime = Date.now();\n  const actions: string[] = [];\n\n  try {\n    const beforeTime = Date.now();\n\n    // æ¸…ç†è¿‡æœŸç¼“å­˜\n    const cacheStatus = PreferenceCacheManager.getCacheStatus();\n    if (cacheStatus.isExpired) {\n      PreferenceCacheManager.clearCache();\n      actions.push('Cleared expired cache');\n    }\n\n    // é¢„çƒ­ç¼“å­˜\n    PreferenceCacheManager.warmUpCache();\n    actions.push('Warmed up cache');\n\n    // åŒæ­¥æ•°æ®\n    const syncResult = syncPreferenceData();\n    if (syncResult.success && syncResult.data?.synced) {\n      actions.push('Synced storage data');\n    }\n\n    const afterTime = Date.now();\n    const improvement = beforeTime - afterTime;\n\n    return {\n      success: true,\n      data: {\n        optimized: actions.length > ZERO,\n        actions,\n        performance: {\n          before: beforeTime,\n          after: afterTime,\n          improvement,\n        },\n      },\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-core.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/locale-storage-types' import is duplicated.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":21,"endColumn":37},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_syncResult'.","line":194,"column":13,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":194,"endColumn":63},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_localResult'.","line":381,"column":11,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":381,"endColumn":73},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_cookieResult'.","line":384,"column":11,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":384,"endColumn":68}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç”¨æˆ·è¯­è¨€åå¥½æ ¸å¿ƒç®¡ç†\n * User Locale Preference Core Management\n *\n * è´Ÿè´£ç”¨æˆ·åå¥½çš„åŸºç¡€æ“ä½œï¼šä¿å­˜ã€è·å–ã€éªŒè¯å’Œæ ¸å¿ƒæ•°æ®ç®¡ç†\n */\n\n'use client';\n\nimport { DEC_0_01, MAGIC_0_5, MAGIC_0_7 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, COUNT_TRIPLE, ONE, ZERO } from '@/constants';\n\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport { isUserLocalePreference } from '@/lib/locale-storage-types';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  StorageOperationResult,\n  UserLocalePreference,\n  ValidationResult,\n} from '@/lib/locale-storage-types';\n\n// ==================== æ•°æ®éªŒè¯åŠŸèƒ½ ====================\n\n/**\n * éªŒè¯åå¥½æ•°æ®\n * Validate preference data\n */\nexport function validatePreferenceData(preference: unknown): ValidationResult {\n  if (!isUserLocalePreference(preference)) {\n    return {\n      isValid: false,\n      errors: ['Invalid preference data structure'],\n      warnings: [],\n    };\n  }\n\n  const errors: string[] = [];\n\n  // éªŒè¯è¯­è¨€ä»£ç \n  if (!preference.locale || typeof preference.locale !== 'string') {\n    errors.push('Invalid locale');\n  }\n\n  // éªŒè¯æ¥æº\n  if (!preference.source || typeof preference.source !== 'string') {\n    errors.push('Invalid source');\n  }\n\n  // éªŒè¯ç½®ä¿¡åº¦\n  if (\n    typeof preference.confidence !== 'number' ||\n    preference.confidence < ZERO ||\n    preference.confidence > ONE\n  ) {\n    errors.push('Invalid confidence value (must be between 0 and 1)');\n  }\n\n  // éªŒè¯æ—¶é—´æˆ³\n  if (typeof preference.timestamp !== 'number' || preference.timestamp <= ZERO) {\n    errors.push('Invalid timestamp');\n  }\n\n  // éªŒè¯å…ƒæ•°æ®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰\n  if (preference.metadata && typeof preference.metadata !== 'object') {\n    errors.push('Invalid metadata');\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings: [],\n  };\n}\n\n/**\n * åˆ›å»ºé»˜è®¤åå¥½\n * Create default preference\n */\nexport function createDefaultPreference(\n  locale: Locale = 'en',\n): UserLocalePreference {\n  return {\n    locale,\n    source: 'default',\n    confidence: MAGIC_0_5,\n    timestamp: Date.now(),\n    metadata: {},\n  };\n}\n\n/**\n * è§„èŒƒåŒ–åå¥½æ•°æ®\n * Normalize preference data\n */\nexport function normalizePreference(\n  preference: UserLocalePreference,\n): UserLocalePreference {\n  return {\n    locale: preference.locale,\n    source: preference.source,\n    confidence: Math.max(ZERO, Math.min(ONE, preference.confidence)),\n    timestamp: preference.timestamp || Date.now(),\n    metadata: preference.metadata || {},\n  };\n}\n\n// ==================== æ ¸å¿ƒåå¥½ç®¡ç† ====================\n\n/**\n * ä¿å­˜ç”¨æˆ·è¯­è¨€åå¥½\n * Save user locale preference\n */\nexport function saveUserPreference(\n  preference: UserLocalePreference,\n): StorageOperationResult<UserLocalePreference> {\n  const startTime = Date.now();\n\n  try {\n    // éªŒè¯åå¥½æ•°æ®\n    const validation = validatePreferenceData(preference);\n    if (!validation.isValid) {\n      return {\n        success: false,\n        error: `Invalid preference data: ${validation.errors.join(', ')}`,\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // è§„èŒƒåŒ–æ•°æ®\n    const normalizedPreference = normalizePreference(preference);\n\n    // ä¿å­˜åˆ° localStorage\n    LocalStorageManager.set('locale_preference', normalizedPreference);\n\n    // ä¿å­˜åˆ° cookiesï¼ˆç”¨äº SSRï¼‰\n    CookieManager.set('locale_preference', normalizedPreference.locale);\n\n    // ä¸¤ä¸ªå­˜å‚¨æ“ä½œéƒ½è¿”å›voidï¼Œæˆ‘ä»¬å‡è®¾æˆåŠŸ\n    // å¦‚æœæœ‰é”™è¯¯ï¼Œä¼šåœ¨try-catchä¸­æ•è·\n    return {\n      success: true,\n      data: normalizedPreference,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * è·å–ç”¨æˆ·è¯­è¨€åå¥½\n * Get user locale preference\n */\nexport function getUserPreference(): StorageOperationResult<UserLocalePreference> {\n  const startTime = Date.now();\n\n  try {\n    // é¦–å…ˆå°è¯•ä» localStorage è·å–\n    const localPreference =\n      LocalStorageManager.get<UserLocalePreference>('locale_preference');\n\n    if (localPreference && validatePreferenceData(localPreference).isValid) {\n      return {\n        success: true,\n        data: localPreference,\n        source: 'localStorage',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // å¦‚æœ localStorage æ²¡æœ‰ï¼Œå°è¯•ä» cookies è·å–\n    const cookieLocale = CookieManager.get('locale_preference');\n\n    if (cookieLocale) {\n      const cookiePreference: UserLocalePreference = {\n        locale: cookieLocale as Locale,\n        source: 'fallback',\n        confidence: MAGIC_0_7,\n        timestamp: Date.now(),\n        metadata: { source: 'cookie_fallback' },\n      };\n\n      // åŒæ­¥åˆ° localStorage\n      const _syncResult = saveUserPreference(cookiePreference);\n      // åŒæ­¥ç»“æœå·²ä¿å­˜ä½†åœ¨æ­¤å¤„æœªç›´æ¥ä½¿ç”¨\n\n      return {\n        success: true,\n        data: cookiePreference,\n        source: 'cookies',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // å¦‚æœéƒ½æ²¡æœ‰ï¼Œè¿”å›é»˜è®¤åå¥½\n    const defaultPreference = createDefaultPreference();\n\n    return {\n      success: true,\n      data: defaultPreference,\n      source: 'default',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * æ›´æ–°åå¥½ç½®ä¿¡åº¦\n * Update preference confidence\n */\nexport function updatePreferenceConfidence(\n  confidence: number,\n): StorageOperationResult<UserLocalePreference> {\n  const currentResult = getUserPreference();\n\n  if (!currentResult.success || !currentResult.data) {\n    return {\n      success: false,\n      error: 'Failed to get current preference',\n      timestamp: Date.now(),\n    };\n  }\n\n  const updatedPreference: UserLocalePreference = {\n    ...currentResult.data,\n    confidence: Math.max(ZERO, Math.min(ONE, confidence)),\n    timestamp: Date.now(),\n  };\n\n  return saveUserPreference(updatedPreference);\n}\n\n/**\n * æ£€æŸ¥åå¥½æ˜¯å¦å­˜åœ¨\n * Check if preference exists\n */\nexport function hasUserPreference(): boolean {\n  const localPreference =\n    LocalStorageManager.get<UserLocalePreference>('locale_preference');\n  const cookieLocale = CookieManager.get('locale_preference');\n\n  return (\n    (localPreference && validatePreferenceData(localPreference).isValid) ||\n    Boolean(cookieLocale)\n  );\n}\n\n/**\n * è·å–åå¥½æ¥æºä¼˜å…ˆçº§\n * Get preference source priority\n */\nexport function getPreferenceSourcePriority(): Array<{\n  source: string;\n  available: boolean;\n  priority: number;\n}> {\n  const localPreference =\n    LocalStorageManager.get<UserLocalePreference>('locale_preference');\n  const cookieLocale = CookieManager.get('locale_preference');\n\n  return [\n    {\n      source: 'localStorage',\n      available: Boolean(localPreference && validatePreferenceData(localPreference).isValid),\n      priority: ONE,\n    },\n    {\n      source: 'cookies',\n      available: Boolean(cookieLocale),\n      priority: COUNT_PAIR,\n    },\n    {\n      source: 'default',\n      available: true,\n      priority: COUNT_TRIPLE,\n    },\n  ];\n}\n\n/**\n * æ¯”è¾ƒä¸¤ä¸ªåå¥½\n * Compare two preferences\n */\nexport function comparePreferences(\n  pref1: UserLocalePreference,\n  pref2: UserLocalePreference,\n): {\n  isEqual: boolean;\n  differences: string[];\n} {\n  const differences: string[] = [];\n\n  if (pref1.locale !== pref2.locale) {\n    differences.push(`locale: ${pref1.locale} vs ${pref2.locale}`);\n  }\n\n  if (pref1.source !== pref2.source) {\n    differences.push(`source: ${pref1.source} vs ${pref2.source}`);\n  }\n\n  if (Math.abs(pref1.confidence - pref2.confidence) > DEC_0_01) {\n    differences.push(`confidence: ${pref1.confidence} vs ${pref2.confidence}`);\n  }\n\n  if (Math.abs(pref1.timestamp - pref2.timestamp) > ANIMATION_DURATION_VERY_SLOW) {\n    differences.push(`timestamp: ${pref1.timestamp} vs ${pref2.timestamp}`);\n  }\n\n  return {\n    isEqual: differences.length === ZERO,\n    differences,\n  };\n}\n\n/**\n * è·å–åå¥½æ‘˜è¦\n * Get preference summary\n */\nexport function getPreferenceSummary(): {\n  hasPreference: boolean;\n  locale: Locale | null;\n  source: string | null;\n  confidence: number | null;\n  age: number | null;\n  isValid: boolean;\n} {\n  const result = getUserPreference();\n\n  if (!result.success || !result.data) {\n    return {\n      hasPreference: false,\n      locale: null,\n      source: null,\n      confidence: null,\n      age: null,\n      isValid: false,\n    };\n  }\n\n  const preference = result.data;\n  const age = Date.now() - preference.timestamp;\n\n  return {\n    hasPreference: true,\n    locale: preference.locale,\n    source: preference.source,\n    confidence: preference.confidence,\n    age,\n    isValid: validatePreferenceData(preference).isValid,\n  };\n}\n\n/**\n * æ¸…é™¤ç”¨æˆ·åå¥½\n * Clear user preference\n */\nexport function clearUserPreference(): StorageOperationResult<void> {\n  const startTime = Date.now();\n\n  try {\n    // æ¸…é™¤ localStorage\n    const _localResult = LocalStorageManager.remove('locale_preference');\n\n    // æ¸…é™¤ cookies\n    const _cookieResult = CookieManager.remove('locale_preference');\n    // æ¸…é™¤ç»“æœå·²ä¿å­˜ä½†åœ¨æ­¤å¤„æœªç›´æ¥ä½¿ç”¨\n\n    return {\n      success: true,\n      data: undefined,\n      source: 'both',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/event-creators.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/event-listeners.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/event-manager.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":150,"column":7,"nodeType":"MemberExpression","endLine":150,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * åå¥½äº‹ä»¶ç®¡ç†å™¨\n * Preference Event Manager\n */\n\n'use client';\n\nimport { logger } from '@/lib/logger';\nimport { ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport type {\n  StorageEvent,\n  StorageEventListener,\n} from '@/lib/locale-storage-types';\n\n/**\n * åå¥½äº‹ä»¶ç®¡ç†å™¨\n * Preference event manager\n */\nexport class PreferenceEventManager {\n  private static eventListeners: Map<string, StorageEventListener[]> =\n    new Map();\n  private static eventHistory: StorageEvent[] = [];\n  private static readonly MAX_EVENT_HISTORY = PERCENTAGE_FULL;\n\n  /**\n   * æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n   * Add event listener\n   */\n  static addEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, []);\n    }\n    this.eventListeners.get(eventType)!.push(listener);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   * Remove event listener\n   */\n  static removeEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    const listeners = this.eventListeners.get(eventType);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index > -ONE) {\n        listeners.splice(index, ONE);\n      }\n    }\n  }\n\n  /**\n   * ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨\n   * Remove all event listeners\n   */\n  static removeAllListeners(eventType?: string): void {\n    if (eventType) {\n      this.eventListeners.delete(eventType);\n    } else {\n      this.eventListeners.clear();\n    }\n  }\n\n  /**\n   * å‘å‡ºäº‹ä»¶\n   * Emit event\n   */\n  static emitEvent(event: StorageEvent): void {\n    // è®°å½•äº‹ä»¶å†å²\n    this.recordEvent(event);\n\n    // å‘é€ç»™ç‰¹å®šç±»å‹çš„ç›‘å¬å™¨\n    const listeners = this.eventListeners.get(event.type);\n    if (listeners) {\n      listeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error(`Error in preference event listener for ${event.type}`, {\n            error: error as Error,\n          });\n        }\n      });\n    }\n\n    // å‘é€ç»™é€šç”¨ç›‘å¬å™¨\n    const allListeners = this.eventListeners.get('*');\n    if (allListeners) {\n      allListeners.forEach((listener) => {\n        try {\n          listener(event);\n        } catch (error) {\n          logger.error('Error in universal preference event listener', {\n            error: error as Error,\n          });\n        }\n      });\n    }\n  }\n\n  /**\n   * è®°å½•äº‹ä»¶å†å²\n   * Record event history\n   */\n  private static recordEvent(event: StorageEvent): void {\n    this.eventHistory.unshift(event);\n\n    // é™åˆ¶äº‹ä»¶å†å²é•¿åº¦\n    if (this.eventHistory.length > this.MAX_EVENT_HISTORY) {\n      this.eventHistory = this.eventHistory.slice(ZERO, this.MAX_EVENT_HISTORY);\n    }\n  }\n\n  /**\n   * è·å–äº‹ä»¶å†å²\n   * Get event history\n   */\n  static getEventHistory(limit?: number): StorageEvent[] {\n    return limit ? this.eventHistory.slice(ZERO, limit) : [...this.eventHistory];\n  }\n\n  /**\n   * æ¸…é™¤äº‹ä»¶å†å²\n   * Clear event history\n   */\n  static clearEventHistory(): void {\n    this.eventHistory = [];\n  }\n\n  /**\n   * è·å–ç›‘å¬å™¨ç»Ÿè®¡\n   * Get listener statistics\n   */\n  static getListenerStats(): {\n    totalListeners: number;\n    eventTypes: string[];\n    listenersByType: Record<string, number>;\n  } {\n    let totalListeners = ZERO;\n    const listenersByType: Record<string, number> = {};\n\n    for (const [eventType, listeners] of this.eventListeners.entries()) {\n      const count = listeners.length;\n      totalListeners += count;\n      listenersByType[eventType] = count;\n    }\n\n    return {\n      totalListeners,\n      eventTypes: Array.from(this.eventListeners.keys()),\n      listenersByType,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/history-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/stats-analyzer.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":56,"column":22,"nodeType":"MemberExpression","endLine":56,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":61,"column":8,"nodeType":"MemberExpression","endLine":61,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * åå¥½ç»Ÿè®¡åˆ†æ\n * Preference Statistics Analyzer\n */\n\n'use client';\n\nimport { getPreferenceHistory } from '@/lib/locale-storage-preference-events/history-manager';\nimport { ANIMATION_DURATION_VERY_SLOW, HOURS_PER_DAY, ONE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type { Locale } from '@/types/i18n';\n\n/**\n * è·å–åå¥½å˜åŒ–ç»Ÿè®¡\n * Get preference change statistics\n */\nexport function getPreferenceChangeStats(): {\n  totalChanges: number;\n  localeChanges: Record<Locale, number>;\n  sourceChanges: Record<string, number>;\n  averageConfidence: number;\n  lastChange: number | null;\n  changeFrequency: number; // changes per day\n} {\n  const history = getPreferenceHistory();\n\n  const stats = {\n    totalChanges: history.length,\n    localeChanges: {} as Record<Locale, number>,\n    sourceChanges: {} as Record<string, number>,\n    averageConfidence: ZERO,\n    lastChange: null as number | null,\n    changeFrequency: ZERO,\n  };\n\n  if (history.length === ZERO) {\n    return stats;\n  }\n\n  let totalConfidence = ZERO;\n\n  history.forEach((pref) => {\n    // ç»Ÿè®¡è¯­è¨€å˜åŒ–\n    stats.localeChanges[pref.locale] =\n      (stats.localeChanges[pref.locale] || ZERO) + ONE;\n\n    // ç»Ÿè®¡æ¥æºå˜åŒ–\n    stats.sourceChanges[pref.source] =\n      (stats.sourceChanges[pref.source] || ZERO) + ONE;\n\n    // ç´¯è®¡ç½®ä¿¡åº¦\n    totalConfidence += pref.confidence;\n  });\n\n  stats.averageConfidence = totalConfidence / history.length;\n  stats.lastChange = history[ZERO]?.timestamp || ZERO;\n\n  // è®¡ç®—å˜åŒ–é¢‘ç‡\n  if (history.length > ONE) {\n    const timeSpan =\n      (history[ZERO]?.timestamp || ZERO) -\n      (history[history.length - ONE]?.timestamp || ZERO);\n    const days = timeSpan / (HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n    stats.changeFrequency = days > ZERO ? history.length / days : ZERO;\n  }\n\n  return stats;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-events/system-manager.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":71,"column":36,"nodeType":"MemberExpression","endLine":71,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * äº‹ä»¶ç³»ç»Ÿç®¡ç†\n * Event System Management\n */\n\n'use client';\n\nimport { ONE, ZERO } from \"@/constants\";\nimport { PreferenceEventManager } from '@/lib/locale-storage-preference-events/event-manager';\nimport {\n  consoleLogListener,\n  historyRecordingListener,\n} from '@/lib/locale-storage-preference-events/event-listeners';\n\n/**\n * äº‹ä»¶ç®¡ç†å·¥å…·å‡½æ•°\n * Event management utility functions\n */\n\n/**\n * è®¾ç½®é»˜è®¤äº‹ä»¶ç›‘å¬å™¨\n * Setup default event listeners\n */\nexport function setupDefaultListeners(\n  options: {\n    enableConsoleLog?: boolean;\n    enableHistoryRecording?: boolean;\n  } = {},\n): void {\n  const { enableConsoleLog = true, enableHistoryRecording = true } = options;\n\n  if (enableConsoleLog) {\n    PreferenceEventManager.addEventListener('*', consoleLogListener);\n  }\n\n  if (enableHistoryRecording) {\n    PreferenceEventManager.addEventListener(\n      'preference_saved',\n      historyRecordingListener,\n    );\n  }\n}\n\n/**\n * æ¸…ç†äº‹ä»¶ç³»ç»Ÿ\n * Cleanup event system\n */\nexport function cleanupEventSystem(): void {\n  PreferenceEventManager.removeAllListeners();\n  PreferenceEventManager.clearEventHistory();\n}\n\n/**\n * è·å–äº‹ä»¶ç³»ç»ŸçŠ¶æ€\n * Get event system status\n */\nexport function getEventSystemStatus(): {\n  isActive: boolean;\n  listenerStats: ReturnType<typeof PreferenceEventManager.getListenerStats>;\n  eventHistoryCount: number;\n  lastEventTime: number | null;\n} {\n  const listenerStats = PreferenceEventManager.getListenerStats();\n  const eventHistory = PreferenceEventManager.getEventHistory(ONE);\n\n  return {\n    isActive: listenerStats.totalListeners > ZERO,\n    listenerStats,\n    eventHistoryCount: PreferenceEventManager.getEventHistory().length,\n    lastEventTime:\n      eventHistory.length > ZERO ? eventHistory[ZERO]?.timestamp || null : null,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference-override.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":302,"column":30,"nodeType":"MemberExpression","endLine":302,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç”¨æˆ·è¯­è¨€åå¥½è¦†ç›–ç®¡ç†\n * User Locale Preference Override Management\n *\n * è´Ÿè´£ç”¨æˆ·æ‰‹åŠ¨è¦†ç›–è¯­è¨€è®¾ç½®çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è®¾ç½®ã€è·å–ã€æ¸…é™¤è¦†ç›–\n */\n\n'use client';\n\nimport { MAGIC_0_8 } from \"@/constants/decimal\";\nimport { ONE, PERCENTAGE_HALF, ZERO } from '@/constants';\n\nimport { CookieManager } from '@/lib/locale-storage-cookie';\nimport { LocalStorageManager } from '@/lib/locale-storage-local';\nimport type { Locale } from '@/types/i18n';\nimport {\n  getUserPreference,\n  saveUserPreference,\n} from '@/lib/locale-storage-preference-core';\nimport type {\n  StorageOperationResult,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\n// ==================== ç”¨æˆ·è¦†ç›–ç®¡ç† ====================\n\n/**\n * è®¾ç½®ç”¨æˆ·è¯­è¨€è¦†ç›–\n * Set user locale override\n */\nexport function setUserOverride(\n  locale: Locale,\n  metadata?: Record<string, unknown>,\n): StorageOperationResult<UserLocalePreference> {\n  const preference: UserLocalePreference = {\n    locale,\n    source: 'user',\n    confidence: ONE, // ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼Œç½®ä¿¡åº¦æœ€é«˜\n    timestamp: Date.now(),\n    metadata: {\n      ...metadata,\n      isOverride: true,\n      originalSource: 'user_manual',\n    },\n  };\n\n  // ä¿å­˜åå¥½\n  const saveResult = saveUserPreference(preference);\n\n  if (saveResult.success) {\n    // åŒæ—¶ä¿å­˜è¦†ç›–æ ‡è®°åˆ°å•ç‹¬çš„å­˜å‚¨é”®\n    LocalStorageManager.set('user_locale_override', locale);\n    CookieManager.set('user_locale_override', locale);\n  }\n\n  return saveResult;\n}\n\n/**\n * è·å–ç”¨æˆ·è¯­è¨€è¦†ç›–\n * Get user locale override\n */\nexport function getUserOverride(): StorageOperationResult<Locale> {\n  const startTime = Date.now();\n\n  try {\n    // é¦–å…ˆæ£€æŸ¥ä¸“é—¨çš„è¦†ç›–å­˜å‚¨\n    const localOverride = LocalStorageManager.get<Locale>(\n      'user_locale_override',\n    );\n\n    if (localOverride) {\n      return {\n        success: true,\n        data: localOverride,\n        source: 'localStorage',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // æ£€æŸ¥ cookies ä¸­çš„è¦†ç›–\n    const cookieOverride = CookieManager.get('user_locale_override');\n\n    if (cookieOverride) {\n      // åŒæ­¥åˆ° localStorage\n      LocalStorageManager.set('user_locale_override', cookieOverride);\n\n      return {\n        success: true,\n        data: cookieOverride as Locale,\n        source: 'cookies',\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n      };\n    }\n\n    // æ£€æŸ¥ä¸»åå¥½æ˜¯å¦ä¸ºç”¨æˆ·è¦†ç›–\n    const preferenceResult = getUserPreference();\n\n    if (\n      preferenceResult.success &&\n      preferenceResult.data &&\n      preferenceResult.data.source === 'user_override'\n    ) {\n      return {\n        success: true,\n        data: preferenceResult.data.locale,\n        timestamp: Date.now(),\n        responseTime: Date.now() - startTime,\n        ...(preferenceResult.source && { source: preferenceResult.source }),\n      };\n    }\n\n    // æ²¡æœ‰æ‰¾åˆ°è¦†ç›–\n    return {\n      success: false,\n      error: 'No user override found',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * æ¸…é™¤ç”¨æˆ·è¯­è¨€è¦†ç›–\n * Clear user locale override\n */\nexport function clearUserOverride(): StorageOperationResult<void> {\n  const startTime = Date.now();\n\n  try {\n    // æ¸…é™¤ä¸“é—¨çš„è¦†ç›–å­˜å‚¨\n    LocalStorageManager.remove('user_locale_override');\n    CookieManager.remove('user_locale_override');\n\n    // æ£€æŸ¥ä¸»åå¥½æ˜¯å¦ä¸ºè¦†ç›–ï¼Œå¦‚æœæ˜¯åˆ™æ¸…é™¤\n    const preferenceResult = getUserPreference();\n\n    if (\n      preferenceResult.success &&\n      preferenceResult.data &&\n      preferenceResult.data.source === 'user_override'\n    ) {\n      // åˆ›å»ºä¸€ä¸ªæ–°çš„éè¦†ç›–åå¥½\n      const newPreference: UserLocalePreference = {\n        ...preferenceResult.data,\n        source: 'auto',\n        confidence: MAGIC_0_8,\n        timestamp: Date.now(),\n        metadata: {\n          ...preferenceResult.data.metadata,\n          isOverride: false,\n          clearedAt: Date.now(),\n        },\n      };\n\n      saveUserPreference(newPreference);\n    }\n\n    return {\n      success: true,\n      data: undefined,\n      source: 'both',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·è¦†ç›–\n * Check if user override exists\n */\nexport function hasUserOverride(): boolean {\n  const localOverride = LocalStorageManager.get<Locale>('user_locale_override');\n  const cookieOverride = CookieManager.get('user_locale_override');\n\n  if (localOverride || cookieOverride) {\n    return true;\n  }\n\n  // æ£€æŸ¥ä¸»åå¥½\n  const preferenceResult = getUserPreference();\n  return (\n    preferenceResult.success &&\n    preferenceResult.data?.source === 'user_override'\n  );\n}\n\n/**\n * è·å–è¦†ç›–å†å²\n * Get override history\n */\nexport function getOverrideHistory(): Array<{\n  locale: Locale;\n  timestamp: number;\n  action: 'set' | 'clear';\n  metadata?: Record<string, unknown>;\n}> {\n  const history: Array<{\n    locale: Locale;\n    timestamp: number;\n    action: 'set' | 'clear';\n    metadata?: Record<string, unknown>;\n  }> = [];\n\n  // ä» localStorage è·å–å†å²è®°å½•\n  const storedHistory = LocalStorageManager.get<\n    Array<{\n      locale: Locale;\n      timestamp: number;\n      action: 'set' | 'clear';\n      metadata?: Record<string, unknown>;\n    }>\n  >('override_history');\n\n  if (storedHistory && Array.isArray(storedHistory)) {\n    history.push(...storedHistory);\n  }\n\n  return history.sort((a, b) => b.timestamp - a.timestamp);\n}\n\n/**\n * è®°å½•è¦†ç›–æ“ä½œ\n * Record override operation\n */\nexport function recordOverrideOperation(\n  locale: Locale,\n  action: 'set' | 'clear',\n  metadata?: Record<string, unknown>,\n): void {\n  const history = getOverrideHistory();\n\n  const newEntry = {\n    locale,\n    timestamp: Date.now(),\n    action,\n    ...(metadata && { metadata }),\n  };\n\n  history.unshift(newEntry);\n\n  // é™åˆ¶å†å²è®°å½•æ•°é‡\n  const maxHistory = PERCENTAGE_HALF;\n  if (history.length > maxHistory) {\n    history.splice(maxHistory);\n  }\n\n  LocalStorageManager.set('override_history', history);\n}\n\n/**\n * è·å–è¦†ç›–ç»Ÿè®¡\n * Get override statistics\n */\nexport function getOverrideStats(): {\n  totalOverrides: number;\n  currentOverride: Locale | null;\n  lastOverrideTime: number | null;\n  mostUsedLocale: Locale | null;\n  overrideFrequency: Record<Locale, number>;\n} {\n  const history = getOverrideHistory();\n  const currentOverride = getUserOverride();\n\n  const stats = {\n    totalOverrides: ZERO,\n    currentOverride:\n      currentOverride.success && currentOverride.data\n        ? currentOverride.data\n        : null,\n    lastOverrideTime: null as number | null,\n    mostUsedLocale: null as Locale | null,\n    overrideFrequency: {} as Record<Locale, number>,\n  };\n\n  if (history.length === ZERO) {\n    return stats;\n  }\n\n  // ç»Ÿè®¡è¦†ç›–æ“ä½œ\n  const setOperations = history.filter((entry) => entry.action === 'set');\n  stats.totalOverrides = setOperations.length;\n\n  if (setOperations.length > ZERO) {\n    stats.lastOverrideTime = setOperations[ZERO]?.timestamp || null;\n\n    // ç»Ÿè®¡è¯­è¨€ä½¿ç”¨é¢‘ç‡\n    setOperations.forEach((entry) => {\n      stats.overrideFrequency[entry.locale] =\n        (stats.overrideFrequency[entry.locale] || ZERO) + ONE;\n    });\n\n    // æ‰¾å‡ºæœ€å¸¸ç”¨çš„è¯­è¨€\n    let maxCount = ZERO;\n    for (const [locale, count] of Object.entries(stats.overrideFrequency)) {\n      if (count > maxCount) {\n        maxCount = count;\n        stats.mostUsedLocale = locale as Locale;\n      }\n    }\n  }\n\n  return stats;\n}\n\n/**\n * æ¸…é™¤è¦†ç›–å†å²\n * Clear override history\n */\nexport function clearOverrideHistory(): StorageOperationResult<void> {\n  const startTime = Date.now();\n\n  try {\n    LocalStorageManager.remove('override_history');\n\n    return {\n      success: true,\n      data: undefined,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n\n/**\n * å¯¼å‡ºè¦†ç›–æ•°æ®\n * Export override data\n */\nexport function exportOverrideData(): {\n  currentOverride: Locale | null;\n  history: ReturnType<typeof getOverrideHistory>;\n  stats: ReturnType<typeof getOverrideStats>;\n  exportTime: number;\n} {\n  const currentOverride = getUserOverride();\n\n  return {\n    currentOverride:\n      currentOverride.success && currentOverride.data\n        ? currentOverride.data\n        : null,\n    history: getOverrideHistory(),\n    stats: getOverrideStats(),\n    exportTime: Date.now(),\n  };\n}\n\n/**\n * å¯¼å…¥è¦†ç›–æ•°æ®\n * Import override data\n */\nexport function importOverrideData(data: {\n  currentOverride?: Locale | null;\n  history?: ReturnType<typeof getOverrideHistory>;\n}): StorageOperationResult<void> {\n  const startTime = Date.now();\n\n  try {\n    // å¯¼å…¥å†å²è®°å½•\n    if (data.history && Array.isArray(data.history)) {\n      LocalStorageManager.set('override_history', data.history);\n    }\n\n    // è®¾ç½®å½“å‰è¦†ç›–\n    if (data.currentOverride) {\n      const setResult = setUserOverride(data.currentOverride, {\n        importedAt: Date.now(),\n      });\n\n      if (!setResult.success) {\n        return {\n          success: false,\n          error: `Failed to set imported override: ${setResult.error}`,\n          timestamp: Date.now(),\n          responseTime: Date.now() - startTime,\n        };\n      }\n    }\n\n    return {\n      success: true,\n      data: undefined,\n      source: 'localStorage',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: Date.now(),\n      responseTime: Date.now() - startTime,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-preference.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PreferenceCacheManager' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearUserPreference' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'comparePreferences' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'createDefaultPreference' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'normalizePreference' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cleanupEventSystem' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearPreferenceHistory' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getEventSystemStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setupDefaultListeners' is defined but never used. Allowed unused vars must match /^_/u.","line":47,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportOverrideData' is defined but never used. Allowed unused vars must match /^_/u.","line":51,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getOverrideHistory' is defined but never used. Allowed unused vars must match /^_/u.","line":52,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'importOverrideData' is defined but never used. Allowed unused vars must match /^_/u.","line":56,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":21}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç”¨æˆ·è¯­è¨€åå¥½ç®¡ç† - ä¸»å…¥å£\n * User Locale Preference Management - Main Entry Point\n *\n * ç»Ÿä¸€çš„ç”¨æˆ·è¯­è¨€åå¥½ç®¡ç†å…¥å£ï¼Œæ•´åˆæ‰€æœ‰åå¥½ç®¡ç†åŠŸèƒ½æ¨¡å—\n */\n\n'use client';\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½\n// å¯¼å…¥ä¸»è¦åŠŸèƒ½ç”¨äºå‘åå…¼å®¹\nimport type { Locale } from '@/types/i18n';\nimport {\n  checkDataConsistency,\n  fixDataInconsistency,\n  getStorageUsage,\n  optimizeStoragePerformance,\n  PreferenceCacheManager,\n  syncPreferenceData,\n} from '@/lib/locale-storage-preference-cache';\nimport {\n  clearUserPreference,\n  comparePreferences,\n  createDefaultPreference,\n  getPreferenceSummary,\n  getUserPreference,\n  hasUserPreference,\n  normalizePreference,\n  saveUserPreference,\n  updatePreferenceConfidence,\n  validatePreferenceData,\n} from '@/lib/locale-storage-preference-core';\nimport {\n  cleanupEventSystem,\n  clearPreferenceHistory,\n  createOverrideClearedEvent,\n  createOverrideSetEvent,\n  createPreferenceErrorEvent,\n  createPreferenceLoadedEvent,\n  createPreferenceSavedEvent,\n  createSyncEvent,\n  getEventSystemStatus,\n  getPreferenceChangeStats,\n  getPreferenceHistory,\n  PreferenceEventManager,\n  recordPreferenceHistory,\n  setupDefaultListeners,\n} from '@/lib/locale-storage-preference-events';\nimport {\n  clearUserOverride,\n  exportOverrideData,\n  getOverrideHistory,\n  getOverrideStats,\n  getUserOverride,\n  hasUserOverride,\n  importOverrideData,\n  setUserOverride,\n} from '@/lib/locale-storage-preference-override';\nimport type {\n  StorageEventListener,\n  StorageOperationResult,\n  UserLocalePreference,\n} from '@/lib/locale-storage-types';\n\nexport {\n  validatePreferenceData,\n  createDefaultPreference,\n  normalizePreference,\n  saveUserPreference,\n  getUserPreference,\n  updatePreferenceConfidence,\n  hasUserPreference,\n  getPreferenceSourcePriority,\n  comparePreferences,\n  getPreferenceSummary,\n  clearUserPreference,\n} from '@/lib/locale-storage-preference-core';\nexport {\n  setUserOverride,\n  getUserOverride,\n  clearUserOverride,\n  hasUserOverride,\n  getOverrideHistory,\n  recordOverrideOperation,\n  getOverrideStats,\n  clearOverrideHistory,\n  exportOverrideData,\n  importOverrideData,\n} from '@/lib/locale-storage-preference-override';\nexport {\n  PreferenceCacheManager,\n  syncPreferenceData,\n  checkDataConsistency,\n  fixDataInconsistency,\n  getStorageUsage,\n  optimizeStoragePerformance,\n} from '@/lib/locale-storage-preference-cache';\nexport {\n  PreferenceEventManager,\n  createPreferenceSavedEvent,\n  createPreferenceLoadedEvent,\n  createOverrideSetEvent,\n  createOverrideClearedEvent,\n  createSyncEvent,\n  createPreferenceErrorEvent,\n  getPreferenceHistory,\n  recordPreferenceHistory,\n  clearPreferenceHistory,\n  getPreferenceChangeStats,\n  consoleLogListener,\n  historyRecordingListener,\n  setupDefaultListeners,\n  cleanupEventSystem,\n  getEventSystemStatus,\n} from '@/lib/locale-storage-preference-events';\n\n/**\n * ç”¨æˆ·åå¥½ç®¡ç†å™¨ - å‘åå…¼å®¹ç±»\n * User preference manager - Backward compatible class\n */\nexport class LocalePreferenceManager {\n  /**\n   * ä¿å­˜ç”¨æˆ·è¯­è¨€åå¥½\n   * Save user locale preference\n   */\n  static saveUserPreference(\n    preference: UserLocalePreference,\n  ): StorageOperationResult<UserLocalePreference> {\n    const result = saveUserPreference(preference);\n\n    if (result.success && result.data) {\n      PreferenceEventManager.emitEvent(\n        createPreferenceSavedEvent(result.data, result.source || 'unknown'),\n      );\n      recordPreferenceHistory(result.data);\n    } else {\n      PreferenceEventManager.emitEvent(\n        createPreferenceErrorEvent(\n          'saveUserPreference',\n          result.error || 'Unknown error',\n        ),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * è·å–ç”¨æˆ·è¯­è¨€åå¥½\n   * Get user locale preference\n   */\n  static getUserPreference(): StorageOperationResult<UserLocalePreference> {\n    const result = getUserPreference();\n\n    if (result.success && result.data) {\n      PreferenceEventManager.emitEvent(\n        createPreferenceLoadedEvent(result.data, result.source || 'unknown'),\n      );\n    } else {\n      PreferenceEventManager.emitEvent(\n        createPreferenceErrorEvent(\n          'getUserPreference',\n          result.error || 'Unknown error',\n        ),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * è®¾ç½®ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„è¯­è¨€\n   * Set user manually selected locale\n   */\n  static setUserOverride(\n    locale: Locale,\n    metadata?: Record<string, unknown>,\n  ): StorageOperationResult<UserLocalePreference> {\n    const result = setUserOverride(locale, metadata);\n\n    if (result.success) {\n      PreferenceEventManager.emitEvent(\n        createOverrideSetEvent(locale, metadata),\n      );\n    } else {\n      PreferenceEventManager.emitEvent(\n        createPreferenceErrorEvent(\n          'setUserOverride',\n          result.error || 'Unknown error',\n        ),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * è·å–ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„è¯­è¨€\n   * Get user manually selected locale\n   */\n  static getUserOverride(): StorageOperationResult<Locale> {\n    return getUserOverride();\n  }\n\n  /**\n   * æ¸…é™¤ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©\n   * Clear user manual selection\n   */\n  static clearUserOverride(): StorageOperationResult<void> {\n    const result = clearUserOverride();\n\n    if (result.success) {\n      PreferenceEventManager.emitEvent(createOverrideClearedEvent());\n    } else {\n      PreferenceEventManager.emitEvent(\n        createPreferenceErrorEvent(\n          'clearUserOverride',\n          result.error || 'Unknown error',\n        ),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * æ›´æ–°åå¥½çš„ç½®ä¿¡åº¦\n   * Update preference confidence\n   */\n  static updatePreferenceConfidence(\n    confidence: number,\n  ): StorageOperationResult<UserLocalePreference> {\n    return updatePreferenceConfidence(confidence);\n  }\n\n  /**\n   * è·å–åå¥½å†å²\n   * Get preference history\n   */\n  static getPreferenceHistory(): UserLocalePreference[] {\n    return getPreferenceHistory();\n  }\n\n  /**\n   * æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n   * Add event listener\n   */\n  static addEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    PreferenceEventManager.addEventListener(eventType, listener);\n  }\n\n  /**\n   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n   * Remove event listener\n   */\n  static removeEventListener(\n    eventType: string,\n    listener: StorageEventListener,\n  ): void {\n    PreferenceEventManager.removeEventListener(eventType, listener);\n  }\n\n  /**\n   * ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨\n   * Remove all event listeners\n   */\n  static removeAllListeners(): void {\n    PreferenceEventManager.removeAllListeners();\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·åå¥½\n   * Check if user preference exists\n   */\n  static hasUserPreference(): boolean {\n    return hasUserPreference();\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·è¦†ç›–\n   * Check if user override exists\n   */\n  static hasUserOverride(): boolean {\n    return hasUserOverride();\n  }\n\n  /**\n   * è·å–åå¥½æ‘˜è¦\n   * Get preference summary\n   */\n  static getPreferenceSummary(): ReturnType<typeof getPreferenceSummary> {\n    return getPreferenceSummary();\n  }\n\n  /**\n   * åŒæ­¥åå¥½æ•°æ®\n   * Sync preference data\n   */\n  static syncPreferenceData(): ReturnType<typeof syncPreferenceData> {\n    const result = syncPreferenceData();\n\n    if (result.success && result.data) {\n      PreferenceEventManager.emitEvent(\n        createSyncEvent(result.data.synced, result.data),\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§\n   * Check data consistency\n   */\n  static checkDataConsistency(): ReturnType<typeof checkDataConsistency> {\n    return checkDataConsistency();\n  }\n\n  /**\n   * ä¿®å¤æ•°æ®ä¸ä¸€è‡´\n   * Fix data inconsistency\n   */\n  static fixDataInconsistency(): ReturnType<typeof fixDataInconsistency> {\n    return fixDataInconsistency();\n  }\n\n  /**\n   * è·å–å­˜å‚¨ä½¿ç”¨æƒ…å†µ\n   * Get storage usage\n   */\n  static getStorageUsage(): ReturnType<typeof getStorageUsage> {\n    return getStorageUsage();\n  }\n\n  /**\n   * ä¼˜åŒ–å­˜å‚¨æ€§èƒ½\n   * Optimize storage performance\n   */\n  static optimizeStoragePerformance(): ReturnType<\n    typeof optimizeStoragePerformance\n  > {\n    return optimizeStoragePerformance();\n  }\n\n  /**\n   * è·å–è¦†ç›–ç»Ÿè®¡\n   * Get override statistics\n   */\n  static getOverrideStats(): ReturnType<typeof getOverrideStats> {\n    return getOverrideStats();\n  }\n\n  /**\n   * è·å–åå¥½å˜åŒ–ç»Ÿè®¡\n   * Get preference change statistics\n   */\n  static getPreferenceChangeStats(): ReturnType<\n    typeof getPreferenceChangeStats\n  > {\n    return getPreferenceChangeStats();\n  }\n\n  /**\n   * éªŒè¯åå¥½æ•°æ®\n   * Validate preference data\n   */\n  static validatePreference(preference: UserLocalePreference): boolean {\n    const result = validatePreferenceData(preference);\n    return result.isValid;\n  }\n}\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type { LocalePreferenceManager as PreferenceManager };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-base.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FILENAME_MAX_LENGTH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç³»ç»ŸåŸºç¡€ç±»å‹å’Œå¸¸é‡\n * Locale Storage System Base Types and Constants\n *\n * æä¾›è¯­è¨€åå¥½å­˜å‚¨ç³»ç»Ÿæ‰€éœ€çš„åŸºç¡€ç±»å‹å®šä¹‰å’Œå¸¸é‡\n */\n\nimport { MAGIC_32, MAGIC_4096 } from \"@/constants/count\";\nimport { ANGLE_90_DEG, ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_TEN, COUNT_TRIPLE, DAYS_PER_MONTH, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { MAGIC_0_5 } from \"@/constants/decimal\";\nimport type { Locale } from '@/types/i18n';\nimport { FILE_SECURITY_CONSTANTS } from \"@/constants/security-constants\";\nconst {FILENAME_MAX_LENGTH} = FILE_SECURITY_CONSTANTS;\n\n/**\n * å­˜å‚¨é”®åå¸¸é‡\n * Storage key constants\n */\nexport const STORAGE_KEYS = {\n  LOCALE_PREFERENCE: 'locale_preference',\n  LOCALE_DETECTION_HISTORY: 'locale_detection_history',\n  USER_LOCALE_OVERRIDE: 'user_locale_override',\n  LOCALE_ANALYTICS: 'locale_analytics',\n  LOCALE_CACHE: 'locale_cache',\n  LOCALE_SETTINGS: 'locale_settings',\n} as const;\n\n/**\n * å­˜å‚¨é”®åç±»å‹\n */\nexport type StorageKey = (typeof STORAGE_KEYS)[keyof typeof STORAGE_KEYS];\n\n/**\n * è¯­è¨€æ¥æºç±»å‹\n * Locale source types\n */\nexport type LocaleSource =\n  | 'user'\n  | 'geo'\n  | 'browser'\n  | 'default'\n  | 'auto'\n  | 'fallback'\n  | 'user_override';\n\n/**\n * å­˜å‚¨äº‹ä»¶ç±»å‹\n * Storage event types\n */\nexport type StorageEventType =\n  | 'preference_saved'\n  | 'preference_loaded'\n  | 'preference_updated'\n  | 'preference_deleted'\n  | 'cache_hit'\n  | 'cache_miss'\n  | 'cache_cleared'\n  | 'error_occurred'\n  | 'storage_full'\n  | 'migration_started'\n  | 'migration_completed'\n  | 'backup_created'\n  | 'backup_restored'\n  | 'history_error'\n  | 'override_set'\n  | 'override_cleared'\n  | 'preference_sync'\n  | 'preference_error';\n\n/**\n * å­˜å‚¨å¸¸é‡\n * Storage constants\n */\nexport const STORAGE_CONSTANTS = {\n  MAX_COOKIE_SIZE: MAGIC_4096, // 4KB\n  MAX_LOCALSTORAGE_SIZE: COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB, // 5MB\n  MAX_SESSIONSTORAGE_SIZE: COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB, // 5MB\n  MAX_INDEXEDDB_SIZE: PERCENTAGE_HALF * BYTES_PER_KB * BYTES_PER_KB, // 50MB\n\n  // æ•°æ®ä¿ç•™æ—¶é—´\n  DEFAULT_RETENTION_TIME: DAYS_PER_MONTH * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 30å¤©\n  CACHE_RETENTION_TIME: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 24å°æ—¶\n  ANALYTICS_RETENTION_TIME: ANGLE_90_DEG * HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 90å¤©\n\n  // æ€§èƒ½é™åˆ¶\n  MAX_HISTORY_ENTRIES: PERCENTAGE_FULL,\n  MAX_ANALYTICS_ENTRIES: ANIMATION_DURATION_VERY_SLOW,\n  MAX_CACHE_ENTRIES: PERCENTAGE_HALF,\n\n  // å‹ç¼©å’ŒåŠ å¯†\n  COMPRESSION_THRESHOLD: BYTES_PER_KB, // 1KB\n  ENCRYPTION_KEY_LENGTH: MAGIC_32,\n\n  // åŒæ­¥é…ç½®\n  SYNC_INTERVAL: COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 5åˆ†é’Ÿ\n  SYNC_RETRY_ATTEMPTS: COUNT_TRIPLE,\n  SYNC_TIMEOUT: COUNT_TEN * ANIMATION_DURATION_VERY_SLOW, // 10ç§’\n\n  // éªŒè¯é…ç½®\n  MIN_CONFIDENCE: ZERO,\n  MAX_CONFIDENCE: ONE,\n  DEFAULT_CONFIDENCE: MAGIC_0_5,\n\n  // å¤‡ä»½é…ç½®\n  MAX_BACKUP_FILES: COUNT_FIVE,\n  BACKUP_INTERVAL: HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 24å°æ—¶\n\n  // é”™è¯¯é‡è¯•\n  MAX_RETRY_ATTEMPTS: COUNT_TRIPLE,\n  RETRY_DELAY: ANIMATION_DURATION_VERY_SLOW, // 1ç§’\n\n  // å¥åº·æ£€æŸ¥\n  HEALTH_CHECK_INTERVAL: SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // 1åˆ†é’Ÿ\n  HEALTH_CHECK_TIMEOUT: COUNT_FIVE * ANIMATION_DURATION_VERY_SLOW, // 5ç§’\n} as const;\n\n/**\n * å­˜å‚¨ç±»å‹æšä¸¾\n * Storage type enumeration\n */\nexport const STORAGE_TYPES = {\n  COOKIE: 'cookie',\n  LOCAL_STORAGE: 'localStorage',\n  SESSION_STORAGE: 'sessionStorage',\n  INDEXED_DB: 'indexedDB',\n  MEMORY: 'memory',\n} as const;\n\nexport type StorageType = (typeof STORAGE_TYPES)[keyof typeof STORAGE_TYPES];\n\n/**\n * å‹ç¼©ç®—æ³•ç±»å‹\n * Compression algorithm types\n */\nexport const COMPRESSION_ALGORITHMS = {\n  NONE: 'none',\n  GZIP: 'gzip',\n  LZ4: 'lz4',\n  BROTLI: 'brotli',\n} as const;\n\nexport type CompressionAlgorithm =\n  (typeof COMPRESSION_ALGORITHMS)[keyof typeof COMPRESSION_ALGORITHMS];\n\n/**\n * åŠ å¯†ç®—æ³•ç±»å‹\n * Encryption algorithm types\n */\nexport const ENCRYPTION_ALGORITHMS = {\n  NONE: 'none',\n  AES_256_GCM: 'aes-256-gcm',\n  CHACHA20_POLY1305: 'chacha20-poly1305',\n} as const;\n\nexport type EncryptionAlgorithm =\n  (typeof ENCRYPTION_ALGORITHMS)[keyof typeof ENCRYPTION_ALGORITHMS];\n\n/**\n * åŒæ­¥çŠ¶æ€ç±»å‹\n * Sync status types\n */\nexport const SYNC_STATUS = {\n  IDLE: 'idle',\n  SYNCING: 'syncing',\n  SUCCESS: 'success',\n  ERROR: 'error',\n  CONFLICT: 'conflict',\n} as const;\n\nexport type SyncStatus = (typeof SYNC_STATUS)[keyof typeof SYNC_STATUS];\n\n/**\n * è¿ç§»çŠ¶æ€ç±»å‹\n * Migration status types\n */\nexport const MIGRATION_STATUS = {\n  NOT_STARTED: 'not_started',\n  IN_PROGRESS: 'in_progress',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n  ROLLED_BACK: 'rolled_back',\n} as const;\n\nexport type MigrationStatus =\n  (typeof MIGRATION_STATUS)[keyof typeof MIGRATION_STATUS];\n\n/**\n * å¥åº·çŠ¶æ€ç±»å‹\n * Health status types\n */\nexport const HEALTH_STATUS = {\n  HEALTHY: 'healthy',\n  WARNING: 'warning',\n  ERROR: 'error',\n  CRITICAL: 'critical',\n} as const;\n\nexport type HealthStatus = (typeof HEALTH_STATUS)[keyof typeof HEALTH_STATUS];\n\n/**\n * é”™è¯¯ç±»å‹\n * Error types\n */\nexport const ERROR_TYPES = {\n  STORAGE_FULL: 'storage_full',\n  QUOTA_EXCEEDED: 'quota_exceeded',\n  ACCESS_DENIED: 'access_denied',\n  NETWORK_ERROR: 'network_error',\n  PARSE_ERROR: 'parse_error',\n  VALIDATION_ERROR: 'validation_error',\n  ENCRYPTION_ERROR: 'encryption_error',\n  COMPRESSION_ERROR: 'compression_error',\n  SYNC_ERROR: 'sync_error',\n  MIGRATION_ERROR: 'migration_error',\n  UNKNOWN_ERROR: 'unknown_error',\n} as const;\n\nexport type ErrorType = (typeof ERROR_TYPES)[keyof typeof ERROR_TYPES];\n\n/**\n * ä¼˜å…ˆçº§ç±»å‹\n * Priority types\n */\nexport const PRIORITY_LEVELS = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  CRITICAL: 'critical',\n} as const;\n\nexport type PriorityLevel =\n  (typeof PRIORITY_LEVELS)[keyof typeof PRIORITY_LEVELS];\n\n/**\n * ç¯å¢ƒç±»å‹\n * Environment types\n */\nexport const ENVIRONMENT_TYPES = {\n  DEVELOPMENT: 'development',\n  STAGING: 'staging',\n  PRODUCTION: 'production',\n  TEST: 'test',\n} as const;\n\nexport type EnvironmentType =\n  (typeof ENVIRONMENT_TYPES)[keyof typeof ENVIRONMENT_TYPES];\n\n/**\n * æµè§ˆå™¨ç±»å‹\n * Browser types\n */\nexport const BROWSER_TYPES = {\n  CHROME: 'chrome',\n  FIREFOX: 'firefox',\n  SAFARI: 'safari',\n  EDGE: 'edge',\n  OPERA: 'opera',\n  IE: 'ie',\n  UNKNOWN: 'unknown',\n} as const;\n\nexport type BrowserType = (typeof BROWSER_TYPES)[keyof typeof BROWSER_TYPES];\n\n/**\n * è®¾å¤‡ç±»å‹\n * Device types\n */\nexport const DEVICE_TYPES = {\n  DESKTOP: 'desktop',\n  MOBILE: 'mobile',\n  TABLET: 'tablet',\n  UNKNOWN: 'unknown',\n} as const;\n\nexport type DeviceType = (typeof DEVICE_TYPES)[keyof typeof DEVICE_TYPES];\n\n/**\n * æ“ä½œç³»ç»Ÿç±»å‹\n * Operating system types\n */\nexport const OS_TYPES = {\n  WINDOWS: 'windows',\n  MACOS: 'macos',\n  LINUX: 'linux',\n  IOS: 'ios',\n  ANDROID: 'android',\n  UNKNOWN: 'unknown',\n} as const;\n\nexport type OSType = (typeof OS_TYPES)[keyof typeof OS_TYPES];\n\n/**\n * ç‰ˆæœ¬ä¿¡æ¯æ¥å£\n * Version information interface\n */\nexport interface VersionInfo {\n  major: number;\n  minor: number;\n  patch: number;\n  build?: string;\n  prerelease?: string;\n}\n\n/**\n * æ—¶é—´æˆ³å·¥å…·å‡½æ•°\n * Timestamp utility functions\n */\nexport const TimestampUtils = {\n  /**\n   * è·å–å½“å‰æ—¶é—´æˆ³\n   * Get current timestamp\n   */\n  now(): number {\n    return Date.now();\n  },\n\n  /**\n   * æ£€æŸ¥æ—¶é—´æˆ³æ˜¯å¦è¿‡æœŸ\n   * Check if timestamp is expired\n   */\n  isExpired(timestamp: number, maxAge: number): boolean {\n    return Date.now() - timestamp > maxAge;\n  },\n\n  /**\n   * æ ¼å¼åŒ–æ—¶é—´æˆ³\n   * Format timestamp\n   */\n  format(timestamp: number, locale = 'en-US'): string {\n    return new Date(timestamp).toLocaleString(locale);\n  },\n\n  /**\n   * è®¡ç®—æ—¶é—´å·®\n   * Calculate time difference\n   */\n  diff(start: number, end: number): number {\n    return Math.abs(end - start);\n  },\n\n  /**\n   * æ·»åŠ æ—¶é—´\n   * Add time\n   */\n  add(timestamp: number, milliseconds: number): number {\n    return timestamp + milliseconds;\n  },\n\n  /**\n   * å‡å»æ—¶é—´\n   * Subtract time\n   */\n  subtract(timestamp: number, milliseconds: number): number {\n    return timestamp - milliseconds;\n  },\n} as const;\n\n/**\n * åŸºç¡€éªŒè¯å‡½æ•°\n * Basic validation functions\n */\nexport const BaseValidators = {\n  /**\n   * éªŒè¯è¯­è¨€ä»£ç \n   * Validate locale code\n   */\n  isValidLocale(locale: string): locale is Locale {\n    return ['en', 'zh'].includes(locale);\n  },\n\n  /**\n   * éªŒè¯æ¥æºç±»å‹\n   * Validate source type\n   */\n  isValidSource(source: string): source is LocaleSource {\n    return ['user', 'geo', 'browser', 'default', 'auto', 'fallback'].includes(\n      source,\n    );\n  },\n\n  /**\n   * éªŒè¯ç½®ä¿¡åº¦\n   * Validate confidence\n   */\n  isValidConfidence(confidence: number): boolean {\n    return (\n      typeof confidence === 'number' &&\n      confidence >= STORAGE_CONSTANTS.MIN_CONFIDENCE &&\n      confidence <= STORAGE_CONSTANTS.MAX_CONFIDENCE\n    );\n  },\n\n  /**\n   * éªŒè¯æ—¶é—´æˆ³\n   * Validate timestamp\n   */\n  isValidTimestamp(timestamp: number): boolean {\n    return (\n      typeof timestamp === 'number' && timestamp > ZERO && timestamp <= Date.now()\n    );\n  },\n\n  /**\n   * éªŒè¯å­˜å‚¨é”®\n   * Validate storage key\n   */\n  isValidStorageKey(key: string): boolean {\n    return typeof key === 'string' && key.length > ZERO && key.length <= FILE_SECURITY_CONSTANTS.FILENAME_MAX_LENGTH;\n  },\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/defaults.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/factory.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":33,"column":20,"nodeType":"MemberExpression","endLine":33,"endColumn":47},{"ruleId":"max-statements","severity":2,"message":"Method 'validate' has too many statements (29). Maximum allowed is 20.","line":65,"column":11,"nodeType":"FunctionExpression","messageId":"exceed","endLine":135,"endColumn":4},{"ruleId":"complexity","severity":2,"message":"Method 'validate' has a complexity of 20. Maximum allowed is 15.","line":65,"column":11,"nodeType":"FunctionExpression","messageId":"complex","endLine":135,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":144,"column":11,"nodeType":"MemberExpression","endLine":144,"endColumn":52}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç³»ç»Ÿé…ç½®å·¥å‚\n * Locale Storage System Configuration Factory\n */\n\nimport { ZERO } from \"@/constants\";\nimport type { EnvironmentType } from '@/lib/locale-storage-types-base';\nimport { DEFAULT_STORAGE_CONFIG } from '@/lib/locale-storage-types-config/defaults';\nimport type { StorageConfig } from '@/lib/locale-storage-types-config/interfaces';\nimport { CONFIG_PRESETS } from '@/lib/locale-storage-types-config/presets';\nimport { CONFIG_VALIDATION_RULES } from '@/lib/locale-storage-types-config/validation';\nimport type { ValidationResult } from '@/lib/locale-storage-types-data';\n\n/**\n * é…ç½®å·¥å‚å‡½æ•°\n * Configuration factory functions\n */\nexport const ConfigFactory = {\n  /**\n   * åˆ›å»ºé»˜è®¤é…ç½®\n   * Create default configuration\n   */\n  createDefault(): StorageConfig {\n    return { ...DEFAULT_STORAGE_CONFIG };\n  },\n\n  /**\n   * åˆ›å»ºç¯å¢ƒé…ç½®\n   * Create environment configuration\n   */\n  createForEnvironment(environment: EnvironmentType): StorageConfig {\n    const baseConfig = this.createDefault();\n    const preset = CONFIG_PRESETS[environment];\n\n    if (preset) {\n      return this.merge(baseConfig, preset);\n    }\n\n    return baseConfig;\n  },\n\n  /**\n   * åˆå¹¶é…ç½®\n   * Merge configurations\n   */\n  merge(base: StorageConfig, override: Partial<StorageConfig>): StorageConfig {\n    return {\n      ...base,\n      ...override,\n      retention: { ...base.retention, ...override.retention },\n      performance: { ...base.performance, ...override.performance },\n      compression: { ...base.compression, ...override.compression },\n      encryption: { ...base.encryption, ...override.encryption },\n      sync: { ...base.sync, ...override.sync },\n      healthCheck: { ...base.healthCheck, ...override.healthCheck },\n      errorHandling: { ...base.errorHandling, ...override.errorHandling },\n      debug: { ...base.debug, ...override.debug },\n    };\n  },\n\n  /**\n   * éªŒè¯é…ç½®\n   * Validate configuration\n   */\n  validate(config: unknown): ValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    if (!config || typeof config !== 'object') {\n      errors.push('Configuration must be an object');\n      return { isValid: false, errors, warnings };\n    }\n\n    const cfg = config as Record<string, unknown>;\n\n    // éªŒè¯å¿…éœ€å­—æ®µ\n    for (const field of CONFIG_VALIDATION_RULES.required) {\n      if (this.getNestedValue(cfg, field) === undefined) {\n        errors.push(`Required field '${field}' is missing`);\n      }\n    }\n\n    // éªŒè¯ç±»å‹\n    for (const [field, expectedType] of Object.entries(\n      CONFIG_VALIDATION_RULES.types,\n    )) {\n      const value = this.getNestedValue(cfg, field);\n      if (value !== undefined && typeof value !== expectedType) {\n        errors.push(`Field '${field}' must be of type ${expectedType}`);\n      }\n    }\n\n    // éªŒè¯èŒƒå›´\n    for (const [field, range] of Object.entries(\n      CONFIG_VALIDATION_RULES.ranges,\n    )) {\n      const value = this.getNestedValue(cfg, field) as number;\n      if (typeof value === 'number') {\n        if (range.min !== undefined && value < range.min) {\n          errors.push(`Field '${field}' must be >= ${range.min}`);\n        }\n        if (range.max !== undefined && value > range.max) {\n          errors.push(`Field '${field}' must be <= ${range.max}`);\n        }\n      }\n    }\n\n    // éªŒè¯æšä¸¾\n    for (const [field, allowedValues] of Object.entries(\n      CONFIG_VALIDATION_RULES.enums,\n    )) {\n      const value = this.getNestedValue(cfg, field) as string;\n      if (typeof value === 'string' && !allowedValues.includes(value)) {\n        errors.push(\n          `Field '${field}' must be one of: ${allowedValues.join(', ')}`,\n        );\n      }\n    }\n\n    // è‡ªå®šä¹‰éªŒè¯\n    for (const [field, validator] of Object.entries(\n      CONFIG_VALIDATION_RULES.custom,\n    )) {\n      const value = this.getNestedValue(cfg, field);\n      if (value !== undefined && !validator(value)) {\n        errors.push(`Field '${field}' failed custom validation`);\n      }\n    }\n\n    return {\n      isValid: errors.length === ZERO,\n      errors,\n      warnings,\n    };\n  },\n\n  /**\n   * è·å–åµŒå¥—å€¼\n   * Get nested value\n   */\n  getNestedValue(obj: Record<string, unknown>, path: string): unknown {\n    return path.split('.').reduce((current: unknown, key: string) => {\n      return current && typeof current === 'object'\n        ? (current as Record<string, unknown>)[key]\n        : undefined;\n    }, obj as unknown);\n  },\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/interfaces.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/migrations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/presets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-config/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/async-utils.ts","messages":[{"ruleId":"no-throw-literal","severity":2,"message":"Expected an error object to be thrown.","line":84,"column":3,"nodeType":"ThrowStatement","messageId":"object","endLine":84,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç³»ç»Ÿå¼‚æ­¥å·¥å…·å‡½æ•°\n * Locale Storage System Async Utility Functions\n */\n\nimport { ONE, ZERO } from \"@/constants\";\nimport { STORAGE_CONSTANTS } from '@/lib/locale-storage-types-base';\n\n/**\n * èŠ‚æµå‡½æ•°\n * Throttle function\n */\nexport function throttle<T extends (...args: unknown[]) => unknown>(\n  func: T,\n  delay: number,\n): (...args: Parameters<T>) => void {\n  let timeoutId: NodeJS.Timeout | null = null;\n  let lastExecTime = ZERO;\n\n  return (...args: Parameters<T>) => {\n    const currentTime = Date.now();\n\n    if (currentTime - lastExecTime > delay) {\n      func(...args);\n      lastExecTime = currentTime;\n    } else {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      timeoutId = setTimeout(\n        () => {\n          func(...args);\n          lastExecTime = Date.now();\n        },\n        delay - (currentTime - lastExecTime),\n      );\n    }\n  };\n}\n\n/**\n * é˜²æŠ–å‡½æ•°\n * Debounce function\n */\nexport function debounce<T extends (...args: unknown[]) => unknown>(\n  func: T,\n  delay: number,\n): (...args: Parameters<T>) => void {\n  let timeoutId: NodeJS.Timeout | null = null;\n\n  return (...args: Parameters<T>) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => func(...args), delay);\n  };\n}\n\n/**\n * é‡è¯•å‡½æ•°\n * Retry function\n */\nexport async function retry<T>(\n  func: () => Promise<T>,\n  maxAttempts: number = STORAGE_CONSTANTS.MAX_RETRY_ATTEMPTS,\n  delay: number = STORAGE_CONSTANTS.RETRY_DELAY,\n): Promise<T> {\n  let lastError: Error;\n\n  for (let attempt = ONE; attempt <= maxAttempts; attempt++) {\n    try {\n      return await func();\n    } catch (error) {\n      lastError = error instanceof Error ? error : new Error(String(error));\n\n      if (attempt === maxAttempts) {\n        throw lastError;\n      }\n\n      await new Promise((resolve) => setTimeout(resolve, delay * attempt));\n    }\n  }\n\n  throw lastError!;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/format-utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":22,"column":41,"nodeType":"MemberExpression","endLine":22,"endColumn":57}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_PAIR, HOURS_PER_DAY, MAGIC_36, MAGIC_9, ONE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\n/**\n * è¯­è¨€å­˜å‚¨ç³»ç»Ÿæ ¼å¼åŒ–å·¥å…·å‡½æ•°\n * Locale Storage System Format Utility Functions\n */\n\n/**\n * æ ¼å¼åŒ–å­—èŠ‚å¤§å°\n * Format byte size\n */\nexport function formatByteSize(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  let size = bytes;\n  let unitIndex = ZERO;\n\n  while (size >= BYTES_PER_KB && unitIndex < units.length - ONE) {\n    size /= BYTES_PER_KB;\n    unitIndex += ONE;\n  }\n\n  return `${size.toFixed(COUNT_PAIR)} ${units[unitIndex]}`;\n}\n\n/**\n * æ ¼å¼åŒ–æ—¶é—´é—´éš”\n * Format time duration\n */\nexport function formatDuration(milliseconds: number): string {\n  const seconds = Math.floor(milliseconds / ANIMATION_DURATION_VERY_SLOW);\n  const minutes = Math.floor(seconds / SECONDS_PER_MINUTE);\n  const hours = Math.floor(minutes / SECONDS_PER_MINUTE);\n  const days = Math.floor(hours / HOURS_PER_DAY);\n\n  if (days > ZERO) {\n    return `${days}d ${hours % HOURS_PER_DAY}h`;\n  }\n  if (hours > ZERO) {\n    return `${hours}h ${minutes % SECONDS_PER_MINUTE}m`;\n  }\n  if (minutes > ZERO) {\n    return `${minutes}m ${seconds % SECONDS_PER_MINUTE}s`;\n  }\n  return `${seconds}s`;\n}\n\n/**\n * ç”Ÿæˆå”¯ä¸€ID\n * Generate unique ID\n */\nexport function generateUniqueId(): string {\n  return `${Date.now()}_${Math.random().toString(MAGIC_36).substr(COUNT_PAIR, MAGIC_9)}`;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/json-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/object-utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":29,"column":9,"nodeType":"MemberExpression","endLine":29,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":2,"message":"Function Call Object Injection Sink","line":29,"column":33,"nodeType":"MemberExpression","endLine":29,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":50,"column":27,"nodeType":"MemberExpression","endLine":50,"endColumn":38},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":51,"column":27,"nodeType":"MemberExpression","endLine":51,"endColumn":38},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":54,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":68,"endColumn":10},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":62,"column":11,"nodeType":"MemberExpression","endLine":62,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":67,"column":11,"nodeType":"MemberExpression","endLine":67,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":2,"message":"Function Call Object Injection Sink","line":101,"column":61,"nodeType":"MemberExpression","endLine":101,"endColumn":72},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":112,"column":18,"nodeType":"MemberExpression","endLine":112,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":113,"column":18,"nodeType":"MemberExpression","endLine":113,"endColumn":56}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç³»ç»Ÿå¯¹è±¡æ“ä½œå·¥å…·å‡½æ•°\n * Locale Storage System Object Utility Functions\n */\n\nimport { hasOwn } from '@/lib/security/object-guards';\n\n/**\n * æ·±åº¦å…‹éš†å¯¹è±¡\n * Deep clone object\n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n\n  if (obj instanceof Date) {\n    return new Date(obj.getTime()) as unknown as T;\n  }\n\n  if (obj instanceof Array) {\n    return obj.map((item) => deepClone(item)) as unknown as T;\n  }\n\n  if (typeof obj === 'object') {\n    const cloned = {} as T;\n    for (const key in obj) {\n      if (hasOwn(obj, key)) {\n        cloned[key] = deepClone(obj[key]);\n      }\n    }\n    return cloned;\n  }\n\n  return obj;\n}\n\n/**\n * åˆå¹¶å¯¹è±¡\n * Merge objects\n */\nexport function mergeObjects<T extends Record<string, unknown>>(\n  target: T,\n  source: Partial<T>,\n): T {\n  const result = { ...target };\n\n  for (const key in source) {\n    if (hasOwn(source, key)) {\n      const sourceValue = source[key];\n      const targetValue = result[key];\n\n      if (sourceValue !== undefined) {\n        if (\n          typeof sourceValue === 'object' &&\n          sourceValue !== null &&\n          !Array.isArray(sourceValue) &&\n          typeof targetValue === 'object' &&\n          targetValue !== null &&\n          !Array.isArray(targetValue)\n        ) {\n          result[key] = mergeObjects(\n            targetValue as Record<string, unknown>,\n            sourceValue as Record<string, unknown>,\n          ) as T[Extract<keyof T, string>];\n        } else {\n          result[key] = sourceValue as T[Extract<keyof T, string>];\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * æ¯”è¾ƒå¯¹è±¡\n * Compare objects\n */\nexport function compareObjects(obj1: unknown, obj2: unknown): boolean {\n  if (obj1 === obj2) {\n    return true;\n  }\n\n  if (obj1 === null || obj2 === null || typeof obj1 !== typeof obj2) {\n    return false;\n  }\n\n  if (typeof obj1 !== 'object') {\n    return obj1 === obj2;\n  }\n\n  if (Array.isArray(obj1) !== Array.isArray(obj2)) {\n    return false;\n  }\n\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\n    if (obj1.length !== obj2.length) {\n      return false;\n    }\n    return obj1.every((item, index) => compareObjects(item, obj2[index]));\n  }\n\n  const keys1 = Object.keys(obj1 as Record<string, unknown>);\n  const keys2 = Object.keys(obj2 as Record<string, unknown>);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  return keys1.every((key) => {\n    const val1 = (obj1 as Record<string, unknown>)[key];\n    const val2 = (obj2 as Record<string, unknown>)[key];\n    return compareObjects(val1, val2);\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/storage-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/type-guards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types-utils/validators.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'validatePreference' has too many statements (26). Maximum allowed is 20.","line":24,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":100,"endColumn":2},{"ruleId":"complexity","severity":2,"message":"Function 'validatePreference' has a complexity of 19. Maximum allowed is 15.","line":24,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":100,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":142,"column":23,"nodeType":"MemberExpression","endLine":142,"endColumn":44}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * è¯­è¨€å­˜å‚¨ç³»ç»ŸéªŒè¯å‡½æ•°\n * Locale Storage System Validation Functions\n */\n\nimport { BaseValidators } from '@/lib/locale-storage-types-base';\nimport { MAGIC_0_3, MAGIC_0_9, ONE, ZERO } from '@/constants';\n\nimport type {\n  LocaleDetectionHistory,\n  UserLocalePreference,\n  ValidationResult,\n} from '@/lib/locale-storage-types-data';\n\n/**\n * éªŒè¯å‡½æ•°\n * Validation functions\n */\n\n/**\n * éªŒè¯ç”¨æˆ·åå¥½\n * Validate user preference\n */\nexport function validatePreference(\n  preference: UserLocalePreference,\n): ValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // éªŒè¯å¿…éœ€å­—æ®µ\n  if (!BaseValidators.isValidLocale(preference.locale)) {\n    errors.push('Invalid locale');\n  }\n\n  if (!BaseValidators.isValidSource(preference.source)) {\n    errors.push('Invalid source');\n  }\n\n  if (!BaseValidators.isValidTimestamp(preference.timestamp)) {\n    errors.push('Invalid timestamp');\n  }\n\n  if (!BaseValidators.isValidConfidence(preference.confidence)) {\n    errors.push('Invalid confidence value');\n  }\n\n  // éªŒè¯å…ƒæ•°æ®\n  if (preference.metadata) {\n    if (typeof preference.metadata !== 'object') {\n      errors.push('Metadata must be an object');\n    } else {\n      // éªŒè¯ç”¨æˆ·ä»£ç†\n      if (\n        preference.metadata.userAgent &&\n        typeof preference.metadata.userAgent !== 'string'\n      ) {\n        warnings.push('User agent should be a string');\n      }\n\n      // éªŒè¯IPå›½å®¶\n      if (\n        preference.metadata.ipCountry &&\n        typeof preference.metadata.ipCountry !== 'string'\n      ) {\n        warnings.push('IP country should be a string');\n      }\n\n      // éªŒè¯æµè§ˆå™¨è¯­è¨€\n      if (\n        preference.metadata.browserLanguages &&\n        !Array.isArray(preference.metadata.browserLanguages)\n      ) {\n        warnings.push('Browser languages should be an array');\n      }\n\n      // éªŒè¯æ—¶åŒº\n      if (\n        preference.metadata.timezone &&\n        typeof preference.metadata.timezone !== 'string'\n      ) {\n        warnings.push('Timezone should be a string');\n      }\n    }\n  }\n\n  // éªŒè¯ç½®ä¿¡åº¦ä¸æ¥æºçš„ä¸€è‡´æ€§\n  if (preference.source === 'user' && preference.confidence < MAGIC_0_9) {\n    warnings.push('User-selected preferences should have high confidence');\n  }\n\n  if (preference.source === 'fallback' && preference.confidence > MAGIC_0_3) {\n    warnings.push('Fallback preferences should have low confidence');\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\n/**\n * éªŒè¯æ£€æµ‹å†å²\n * Validate detection history\n */\nexport function validateDetectionHistory(\n  history: LocaleDetectionHistory,\n): ValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // éªŒè¯æ£€æµ‹è®°å½•æ•°ç»„\n  if (!Array.isArray(history.detections)) {\n    errors.push('Detections must be an array');\n  } else {\n    // éªŒè¯æ¯ä¸ªæ£€æµ‹è®°å½•\n    history.detections.forEach((detection, index) => {\n      if (!BaseValidators.isValidLocale(detection.locale)) {\n        errors.push(`Invalid locale in detection ${index}`);\n      }\n\n      if (!BaseValidators.isValidSource(detection.source)) {\n        errors.push(`Invalid source in detection ${index}`);\n      }\n\n      if (!BaseValidators.isValidTimestamp(detection.timestamp)) {\n        errors.push(`Invalid timestamp in detection ${index}`);\n      }\n\n      if (!BaseValidators.isValidConfidence(detection.confidence)) {\n        errors.push(`Invalid confidence in detection ${index}`);\n      }\n    });\n\n    // éªŒè¯æ•°é‡ä¸€è‡´æ€§\n    if (history.detections.length !== history.totalDetections) {\n      warnings.push('Detection count mismatch');\n    }\n\n    // éªŒè¯æ—¶é—´é¡ºåº\n    for (let i = ONE; i < history.detections.length; i++) {\n      const current = history.detections[i];\n      const previous = history.detections[i - ONE];\n      if (current && previous && current.timestamp < previous.timestamp) {\n        warnings.push('Detections are not in chronological order');\n        break;\n      }\n    }\n  }\n\n  // éªŒè¯æœ€åæ›´æ–°æ—¶é—´\n  if (!BaseValidators.isValidTimestamp(history.lastUpdated)) {\n    errors.push('Invalid lastUpdated timestamp');\n  }\n\n  // éªŒè¯æ€»æ£€æµ‹æ•°\n  if (\n    typeof history.totalDetections !== 'number' ||\n    history.totalDetections < ZERO\n  ) {\n    errors.push('Invalid totalDetections');\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/locale-storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/logger.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":23,"column":40,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":53,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":24,"column":39,"nodeType":"MemberExpression","messageId":"unexpected","endLine":24,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":25,"column":38,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":26,"column":39,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":2,"message":"Unexpected console statement.","line":27,"column":40,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":53,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/metadata.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/seo-metadata' import is duplicated.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":3,"endColumn":85}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from 'next';\nimport type { Locale, PageType } from '@/lib/seo-metadata';\nimport { createPageSEOConfig, generateLocalizedMetadata } from '@/lib/seo-metadata';\n\n/**\n * ç”Ÿæˆé¡µé¢å…ƒæ•°æ®çš„ä¾¿æ·å‡½æ•°\n * è¿™æ˜¯ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œç”¨äºç®€åŒ–é¡µé¢å…ƒæ•°æ®çš„ç”Ÿæˆ\n */\nexport function generatePageMetadata({\n  locale,\n  page,\n  customConfig = {},\n}: {\n  locale: Locale;\n  page: PageType;\n  customConfig?: Record<string, string | number | boolean>;\n}): Promise<Metadata> {\n  const seoConfig = createPageSEOConfig(page, customConfig);\n  return generateLocalizedMetadata(locale, page, seoConfig);\n}\n\n// é‡æ–°å¯¼å‡ºç›¸å…³ç±»å‹å’Œå‡½æ•°ä»¥ä¿æŒå…¼å®¹æ€§\nexport { createPageSEOConfig, generateLocalizedMetadata } from '@/lib/seo-metadata';\nexport type { Locale, PageType } from '@/lib/seo-metadata';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/navigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-coordinator.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-types' import is duplicated.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":5,"endColumn":80},{"ruleId":"max-params","severity":2,"message":"Method 'recordNetworkRequest' has too many parameters (4). Maximum allowed is 3.","line":125,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":125,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å¯¼å…¥æ ¸å¿ƒåŠŸèƒ½\nimport { ZERO } from \"@/constants\";\nimport { PerformanceMonitoringCore } from '@/lib/performance-monitoring-core';\nimport type { PerformanceConfig } from '@/lib/performance-monitoring-types';\nimport { generateEnvironmentConfig } from '@/lib/performance-monitoring-types';\n\n/**\n * æ€§èƒ½ç›‘æ§åè°ƒå™¨ - ä¸»å…¥å£æ–‡ä»¶\n * Performance Monitoring Coordinator - Main Entry Point\n *\n * ç»Ÿä¸€ç®¡ç†å¤šä¸ªæ€§èƒ½ç›‘æ§å·¥å…·çš„åè°ƒè¿ä½œï¼š\n * - React Scan: å®æ—¶ç»„ä»¶æ€§èƒ½ç›‘æ§\n * - Web Eval Agent: ç«¯åˆ°ç«¯ç”¨æˆ·ä½“éªŒæµ‹è¯•\n * - Bundle Analyzer: æ„å»ºäº§ç‰©åˆ†æ\n * - Size Limit: åŒ…å¤§å°ç›‘æ§\n * - Web Vitals: æ ¸å¿ƒç½‘é¡µæŒ‡æ ‡ç›‘æ§\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„ç±»å‹å’ŒåŠŸèƒ½\nexport {\n  createConfigManager, createConflictChecker, createMetricsManager, createReportGenerator, getDefaultConfig, PerformanceConfigManager, PerformanceCoordinator, PerformanceMetricsManager, PerformanceMonitoringCore, PerformanceReport,\n  PerformanceReportGenerator, PerformanceToolConflictChecker, quickConflictCheck, ToolConflictResult, validatePerformanceConfig\n} from '@/lib/performance-monitoring-core';\nexport {\n  BundleAnalyzer, BundleAnalyzerAnalyzer, BundleAnalyzerIntegration, BundleAnalyzerUtils, checkEnvironmentCompatibility, EnvironmentCheck, EnvironmentCompatibilityResult, performHealthCheck, ReactScan, ReactScanAnalyzer, ReactScanIntegration, ReactScanUtils, useBundleAnalyzerIntegration, useReactScanIntegration, useWebEvalAgentIntegration, useWebVitalsIntegration, validateBundleAnalyzerConfig, validateReactScanConfig, validateWebEvalAgentConfig, validateWebVitalsConfig, WebEvalAgent, WebEvalAgentAnalyzer, WebEvalAgentIntegration, WebVitals, WebVitalsAnalyzer, WebVitalsIntegration\n} from '@/lib/performance-monitoring-integrations';\nexport {\n  BundleAnalyzerConfig, Environment, generateEnvironmentConfig, getCurrentEnvironment, isDevelopmentEnvironment,\n  isProductionEnvironment, isTestEnvironment, PerformanceConfig, PerformanceMetrics, PerformanceMetricSource,\n  PerformanceMetricType, ReactScanConfig, SizeLimitConfig, validateConfig, WebEvalAgentConfig, WebVitalsConfig\n} from '@/lib/performance-monitoring-types';\n\n/**\n * æ€§èƒ½ç›‘æ§åè°ƒå™¨ - å‘åå…¼å®¹çš„ä¸»ç±»\n * Performance Monitoring Coordinator - Backward compatible main class\n */\nexport class PerformanceMonitoringCoordinator extends PerformanceMonitoringCore {\n  constructor(customConfig?: Partial<PerformanceConfig>) {\n    super(customConfig);\n  }\n}\n\n// ==================== å…¨å±€å®ä¾‹å’Œä¾¿æ·å¯¼å‡º ====================\n\n/**\n * å…¨å±€æ€§èƒ½ç›‘æ§åè°ƒå™¨å®ä¾‹\n * Global performance monitoring coordinator instance\n */\nexport const performanceCoordinator = new PerformanceMonitoringCoordinator();\n\n// ==================== ä¾¿æ·å·¥å‚å‡½æ•° ====================\n\n/**\n * åˆ›å»ºæ€§èƒ½ç›‘æ§åè°ƒå™¨å®ä¾‹\n * Create performance monitoring coordinator instance\n */\nexport function createPerformanceCoordinator(\n  customConfig?: Partial<PerformanceConfig>,\n): PerformanceMonitoringCoordinator {\n  return new PerformanceMonitoringCoordinator(customConfig);\n}\n\n/**\n * è·å–é»˜è®¤ç¯å¢ƒé…ç½®\n * Get default environment configuration\n */\nexport function getDefaultConfig(): PerformanceConfig {\n  return generateEnvironmentConfig();\n}\n\n// ==================== ä¾¿æ·é›†æˆé’©å­ ====================\n\n/**\n * React Scan é›†æˆé’©å­ (å‘åå…¼å®¹)\n * React Scan integration hook (backward compatible)\n */\nexport function useReactScanIntegration() {\n  const config = performanceCoordinator.getConfig();\n\n  return {\n    enabled: config.reactScan.enabled,\n    recordRender: (componentName: string, renderCount: number) => {\n      if (config.reactScan.enabled) {\n        performanceCoordinator.recordMetric({\n          source: 'react-scan',\n          type: 'component',\n          data: {\n            componentName,\n            renderCount,\n            timestamp: Date.now(),\n          },\n        });\n      }\n    },\n  };\n}\n\n/**\n * Web Eval Agent é›†æˆé’©å­ (å‘åå…¼å®¹)\n * Web Eval Agent integration hook (backward compatible)\n */\nexport function useWebEvalAgentIntegration() {\n  const config = performanceCoordinator.getConfig();\n\n  return {\n    enabled: config.webEvalAgent.enabled,\n    recordUserInteraction: (\n      action: string,\n      timing: number,\n      success: boolean,\n    ) => {\n      if (config.webEvalAgent.enabled) {\n        performanceCoordinator.recordMetric({\n          source: 'web-eval-agent',\n          type: 'user-interaction',\n          data: {\n            action,\n            timing,\n            success,\n            timestamp: Date.now(),\n          },\n        });\n      }\n    },\n    recordNetworkRequest: (\n      url: string,\n      method: string,\n      status: number,\n      timing: number,\n    ) => {\n      if (config.webEvalAgent.enabled && config.webEvalAgent.captureNetwork) {\n        performanceCoordinator.recordMetric({\n          source: 'web-eval-agent',\n          type: 'network',\n          data: {\n            url,\n            method,\n            status,\n            timing,\n            timestamp: Date.now(),\n          },\n        });\n      }\n    },\n  };\n}\n\n/**\n * ç¯å¢ƒæ£€æŸ¥å·¥å…· (å‘åå…¼å®¹)\n * Environment check tool (backward compatible)\n */\nexport function checkEnvironmentCompatibility(): {\n  isCompatible: boolean;\n  issues: string[];\n  recommendations: string[];\n} {\n  const issues: string[] = [];\n  const recommendations: string[] = [];\n\n  // æ£€æŸ¥æµ‹è¯•ç¯å¢ƒé…ç½®\n  if (process.env.PLAYWRIGHT_TEST === 'true') {\n    if (process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN !== 'true') {\n      issues.push('æµ‹è¯•ç¯å¢ƒä¸­ React Scan æœªè¢«ç¦ç”¨');\n      recommendations.push('è®¾ç½® NEXT_PUBLIC_DISABLE_REACT_SCAN=true');\n    }\n  }\n\n  // æ£€æŸ¥å¼€å‘ç¯å¢ƒé…ç½®\n  if (process.env.NODE_ENV === 'development') {\n    if (process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN === 'true') {\n      recommendations.push(\n        'å¼€å‘ç¯å¢ƒä¸­ React Scan è¢«ç¦ç”¨ï¼Œè€ƒè™‘å¯ç”¨ä»¥è·å¾—æ€§èƒ½ç›‘æ§',\n      );\n    }\n  }\n\n  return {\n    isCompatible: issues.length === ZERO,\n    issues,\n    recommendations,\n  };\n}\n\n// ==================== é»˜è®¤å¯¼å‡º ====================\n\n/**\n * é»˜è®¤å¯¼å‡ºå…¨å±€åè°ƒå™¨å®ä¾‹\n * Default export global coordinator instance\n */\nexport default performanceCoordinator;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-core-config.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-types' import is duplicated.","line":14,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":17,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":194,"column":26,"nodeType":"MemberExpression","endLine":194,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":208,"column":27,"nodeType":"MemberExpression","endLine":208,"endColumn":46},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":209,"column":5,"nodeType":"MemberExpression","endLine":209,"endColumn":24},{"ruleId":"complexity","severity":2,"message":"Method 'getConfigSummary' has a complexity of 22. Maximum allowed is 15.","line":260,"column":19,"nodeType":"FunctionExpression","messageId":"complex","endLine":291,"endColumn":4},{"ruleId":"max-statements","severity":2,"message":"Method 'compareConfigs' has too many statements (21). Maximum allowed is 20.","line":297,"column":17,"nodeType":"FunctionExpression","messageId":"exceed","endLine":354,"endColumn":4},{"ruleId":"complexity","severity":2,"message":"Method 'compareConfigs' has a complexity of 34. Maximum allowed is 15.","line":297,"column":17,"nodeType":"FunctionExpression","messageId":"complex","endLine":354,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":402,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":402,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10045,10048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10045,10048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":405,"column":23,"nodeType":"MemberExpression","endLine":405,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":405,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":405,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10191,10194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10191,10194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":407,"column":11,"nodeType":"MemberExpression","endLine":407,"endColumn":25}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ€§èƒ½ç›‘æ§æ ¸å¿ƒé…ç½®ç®¡ç†\n * Performance Monitoring Core Configuration Management\n *\n * è´Ÿè´£æ€§èƒ½ç›‘æ§çš„é…ç½®ç®¡ç†ã€éªŒè¯å’Œåˆå¹¶åŠŸèƒ½\n */\n\nimport { PERFORMANCE_CONSTANTS } from '@/constants/performance';\nimport { COUNT_PAIR, COUNT_TEN, ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { MB } from '@/constants/units';\nimport { logger } from '@/lib/logger';\nimport type { PerformanceConfig } from '@/lib/performance-monitoring-types';\nimport {\n  generateEnvironmentConfig,\n  validateConfig,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * é…ç½®ç®¡ç†å™¨\n * Configuration manager\n */\nexport class PerformanceConfigManager {\n  private config: PerformanceConfig;\n  private isInitialized = false;\n\n  constructor(customConfig?: Partial<PerformanceConfig>) {\n    this.config = this.initializeConfig(customConfig);\n    this.isInitialized = true;\n  }\n\n  /**\n   * åˆå§‹åŒ–é…ç½®\n   * Initialize configuration\n   */\n  private initializeConfig(\n    customConfig?: Partial<PerformanceConfig>,\n  ): PerformanceConfig {\n    // ç”Ÿæˆé»˜è®¤é…ç½®\n    const defaultConfig = generateEnvironmentConfig();\n\n    // åˆå¹¶è‡ªå®šä¹‰é…ç½®\n    const mergedConfig = customConfig\n      ? this.mergeConfig(defaultConfig, customConfig)\n      : defaultConfig;\n\n    // éªŒè¯é…ç½®\n    const validation = validateConfig(mergedConfig);\n    if (!validation.isValid) {\n      logger.warn('Performance monitoring config validation failed', {\n        errors: validation.errors,\n      });\n      // ä½¿ç”¨é»˜è®¤é…ç½®ä½œä¸ºåå¤‡\n      return defaultConfig;\n    }\n\n    return mergedConfig;\n  }\n\n  /**\n   * åˆå¹¶é…ç½®\n   * Merge configuration\n   */\n  mergeConfig(\n    defaultConfig: PerformanceConfig,\n    customConfig: Partial<PerformanceConfig>,\n  ): PerformanceConfig {\n    const merged: PerformanceConfig = {\n      reactScan: {\n        ...defaultConfig.reactScan,\n        ...customConfig.reactScan,\n      },\n      webEvalAgent: {\n        ...defaultConfig.webEvalAgent,\n        ...customConfig.webEvalAgent,\n      },\n      bundleAnalyzer: {\n        ...defaultConfig.bundleAnalyzer,\n        ...customConfig.bundleAnalyzer,\n      },\n      sizeLimit: {\n        ...defaultConfig.sizeLimit,\n        ...customConfig.sizeLimit,\n      },\n      ...(defaultConfig.webVitals && {\n        webVitals: customConfig.webVitals\n          ? {\n              ...defaultConfig.webVitals,\n              ...customConfig.webVitals,\n            }\n          : defaultConfig.webVitals,\n      }),\n      ...(defaultConfig.component && {\n        component: customConfig.component\n          ? {\n              ...defaultConfig.component,\n              ...customConfig.component,\n            }\n          : defaultConfig.component,\n      }),\n      ...(defaultConfig.network && {\n        network: customConfig.network\n          ? {\n              ...defaultConfig.network,\n              ...customConfig.network,\n            }\n          : defaultConfig.network,\n      }),\n      ...(defaultConfig.bundle && {\n        bundle: customConfig.bundle\n          ? {\n              ...defaultConfig.bundle,\n              ...customConfig.bundle,\n            }\n          : defaultConfig.bundle,\n      }),\n      ...(defaultConfig.global && {\n        global: customConfig.global\n          ? {\n              ...defaultConfig.global,\n              ...customConfig.global,\n            }\n          : defaultConfig.global,\n      }),\n    };\n\n    return merged;\n  }\n\n  /**\n   * è·å–é…ç½®\n   * Get configuration\n   */\n  getConfig(): PerformanceConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   * Update configuration\n   */\n  updateConfig(newConfig: Partial<PerformanceConfig>): void {\n    this.config = this.mergeConfig(this.config, newConfig);\n\n    // é‡æ–°éªŒè¯é…ç½®\n    const validation = validateConfig(this.config);\n    if (!validation.isValid) {\n      logger.warn('Updated performance config validation failed', {\n        errors: validation.errors,\n      });\n    }\n  }\n\n  /**\n   * é‡ç½®é…ç½®ä¸ºé»˜è®¤å€¼\n   * Reset configuration to defaults\n   */\n  resetConfig(): void {\n    this.config = generateEnvironmentConfig();\n  }\n\n  /**\n   * æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰æ•ˆ\n   * Check if configuration is valid\n   */\n  isConfigValid(): boolean {\n    const validation = validateConfig(this.config);\n    return validation.isValid;\n  }\n\n  /**\n   * è·å–é…ç½®éªŒè¯ç»“æœ\n   * Get configuration validation result\n   */\n  validateCurrentConfig(): ReturnType<typeof validateConfig> {\n    return validateConfig(this.config);\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–\n   * Check if initialized\n   */\n  isConfigInitialized(): boolean {\n    return this.isInitialized;\n  }\n\n  /**\n   * è·å–ç‰¹å®šæ¨¡å—çš„é…ç½®\n   * Get specific module configuration\n   */\n  getModuleConfig<T extends keyof PerformanceConfig>(\n    module: T,\n  ): PerformanceConfig[T] {\n    const moduleConfig = this.config[module];\n    return typeof moduleConfig === 'object' && moduleConfig !== null\n      ? ({ ...moduleConfig } as PerformanceConfig[T])\n      : moduleConfig;\n  }\n\n  /**\n   * æ›´æ–°ç‰¹å®šæ¨¡å—çš„é…ç½®\n   * Update specific module configuration\n   */\n  updateModuleConfig<T extends keyof PerformanceConfig>(\n    module: T,\n    config: Partial<PerformanceConfig[T]>,\n  ): void {\n    const currentConfig = this.config[module];\n    this.config[module] =\n      typeof currentConfig === 'object' && currentConfig !== null\n        ? ({ ...currentConfig, ...config } as PerformanceConfig[T])\n        : (config as PerformanceConfig[T]);\n\n    // éªŒè¯æ›´æ–°åçš„é…ç½®\n    const validation = validateConfig(this.config);\n    if (!validation.isValid) {\n      logger.warn(`Updated ${module} config validation failed`, {\n        errors: validation.errors,\n      });\n    }\n  }\n\n  /**\n   * å¯¼å‡ºé…ç½®ä¸ºJSON\n   * Export configuration as JSON\n   */\n  exportConfig(): string {\n    return JSON.stringify(this.config, null, COUNT_PAIR);\n  }\n\n  /**\n   * ä»JSONå¯¼å…¥é…ç½®\n   * Import configuration from JSON\n   */\n  importConfig(configJson: string): boolean {\n    try {\n      const importedConfig = JSON.parse(configJson) as PerformanceConfig;\n\n      // éªŒè¯å¯¼å…¥çš„é…ç½®\n      const validation = validateConfig(importedConfig);\n      if (!validation.isValid) {\n        logger.error('Imported config validation failed', {\n          errors: validation.errors,\n        });\n        return false;\n      }\n\n      this.config = importedConfig;\n      return true;\n    } catch (error) {\n      logger.error('Failed to import config', { error: error as Error });\n      return false;\n    }\n  }\n\n  /**\n   * è·å–é…ç½®æ‘˜è¦\n   * Get configuration summary\n   */\n  getConfigSummary(): {\n    isEnabled: boolean;\n    enabledModules: string[];\n    dataRetentionTime: number;\n    maxMetrics: number;\n    thresholds: Record<string, number>;\n  } {\n    const {global} = this.config;\n    const {component} = this.config;\n    const {network} = this.config;\n    const {bundle} = this.config;\n\n    const enabledModules: string[] = [];\n    if (component?.enabled) enabledModules.push('component');\n    if (network?.enabled) enabledModules.push('network');\n    if (bundle?.enabled) enabledModules.push('bundle');\n\n    return {\n      isEnabled: global?.enabled || false,\n      enabledModules,\n      dataRetentionTime:\n        global?.dataRetentionTime ||\n        PERFORMANCE_CONSTANTS.DEFAULT_RETENTION_TIME,\n      maxMetrics:\n        global?.maxMetrics || PERFORMANCE_CONSTANTS.DEFAULT_MAX_METRICS,\n      thresholds: {\n        componentRenderTime: component?.thresholds?.renderTime || PERCENTAGE_FULL,\n        networkResponseTime: network?.thresholds?.responseTime || 1000,\n        bundleSize: bundle?.thresholds?.size || MB, // 1MB\n      },\n    };\n  }\n\n  /**\n   * æ¯”è¾ƒä¸¤ä¸ªé…ç½®\n   * Compare two configurations\n   */\n  compareConfigs(otherConfig: PerformanceConfig): {\n    isDifferent: boolean;\n    differences: string[];\n  } {\n    const differences: string[] = [];\n    const current = this.config;\n\n    // æ¯”è¾ƒå…¨å±€é…ç½®\n    if (current.global?.enabled !== otherConfig.global?.enabled) {\n      differences.push('global.enabled');\n    }\n    if (\n      current.global?.dataRetentionTime !==\n      otherConfig.global?.dataRetentionTime\n    ) {\n      differences.push('global.dataRetentionTime');\n    }\n    if (current.global?.maxMetrics !== otherConfig.global?.maxMetrics) {\n      differences.push('global.maxMetrics');\n    }\n\n    // æ¯”è¾ƒç»„ä»¶é…ç½®\n    if (current.component?.enabled !== otherConfig.component?.enabled) {\n      differences.push('component.enabled');\n    }\n    if (\n      current.component?.thresholds?.renderTime !==\n      otherConfig.component?.thresholds?.renderTime\n    ) {\n      differences.push('component.thresholds.renderTime');\n    }\n\n    // æ¯”è¾ƒç½‘ç»œé…ç½®\n    if (current.network?.enabled !== otherConfig.network?.enabled) {\n      differences.push('network.enabled');\n    }\n    if (\n      current.network?.thresholds?.responseTime !==\n      otherConfig.network?.thresholds?.responseTime\n    ) {\n      differences.push('network.thresholds.responseTime');\n    }\n\n    // æ¯”è¾ƒæ‰“åŒ…é…ç½®\n    if (current.bundle?.enabled !== otherConfig.bundle?.enabled) {\n      differences.push('bundle.enabled');\n    }\n    if (\n      current.bundle?.thresholds?.size !== otherConfig.bundle?.thresholds?.size\n    ) {\n      differences.push('bundle.thresholds.size');\n    }\n\n    return {\n      isDifferent: differences.length > ZERO,\n      differences,\n    };\n  }\n\n  /**\n   * è·å–é…ç½®å˜æ›´å†å²\n   * Get configuration change history\n   */\n  private configHistory: Array<{\n    timestamp: number;\n    config: PerformanceConfig;\n    reason?: string;\n  }> = [];\n\n  /**\n   * è®°å½•é…ç½®å˜æ›´\n   * Record configuration change\n   */\n  private recordConfigChange(reason?: string): void {\n    this.configHistory.push({\n      timestamp: Date.now(),\n      config: { ...this.config },\n      ...(reason !== undefined && { reason }),\n    });\n\n    // é™åˆ¶å†å²è®°å½•æ•°é‡\n    if (this.configHistory.length > COUNT_TEN) {\n      this.configHistory = this.configHistory.slice(-COUNT_TEN);\n    }\n  }\n\n  /**\n   * è·å–é…ç½®å˜æ›´å†å²\n   * Get configuration change history\n   */\n  getConfigHistory(): typeof this.configHistory {\n    return [...this.configHistory];\n  }\n\n  /**\n   * å›æ»šåˆ°ä¹‹å‰çš„é…ç½®\n   * Rollback to previous configuration\n   */\n  rollbackConfig(steps = ONE): boolean {\n    if (this.configHistory.length < steps + ONE) {\n      return false;\n    }\n\n    const targetConfig =\n      this.configHistory[this.configHistory.length - steps - ONE];\n    const newConfig: any = {};\n    if (targetConfig?.config) {\n      Object.keys(targetConfig.config).forEach((key) => {\n        const value = (targetConfig.config as any)[key];\n        if (value !== undefined) {\n          newConfig[key] = value;\n        }\n      });\n    }\n    this.config = newConfig;\n    this.recordConfigChange(`Rollback ${steps} steps`);\n\n    return true;\n  }\n}\n\n/**\n * åˆ›å»ºé…ç½®ç®¡ç†å™¨å®ä¾‹\n * Create configuration manager instance\n */\nexport function createConfigManager(\n  customConfig?: Partial<PerformanceConfig>,\n): PerformanceConfigManager {\n  return new PerformanceConfigManager(customConfig);\n}\n\n/**\n * è·å–é»˜è®¤é…ç½®\n * Get default configuration\n */\nexport function getDefaultConfig(): PerformanceConfig {\n  return generateEnvironmentConfig();\n}\n\n/**\n * éªŒè¯é…ç½®å¯¹è±¡\n * Validate configuration object\n */\nexport function validatePerformanceConfig(\n  config: unknown,\n): ReturnType<typeof validateConfig> {\n  return validateConfig(config as PerformanceConfig);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-core-conflicts.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Method 'detectGlobalTools' has too many statements (23). Maximum allowed is 20.","line":100,"column":28,"nodeType":"FunctionExpression","messageId":"exceed","endLine":170,"endColumn":4},{"ruleId":"complexity","severity":2,"message":"Method 'detectGlobalTools' has a complexity of 16. Maximum allowed is 15.","line":100,"column":28,"nodeType":"FunctionExpression","messageId":"complex","endLine":170,"endColumn":4},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REACT_DEVTOOLS_GLOBAL_HOOK__'.","line":105,"column":7,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":106,"endColumn":40},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REDUX_DEVTOOLS_EXTENSION__'.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":114,"endColumn":38},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__VUE_DEVTOOLS_GLOBAL_HOOK__'.","line":121,"column":7,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":122,"endColumn":38},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__SENTRY__'.","line":135,"column":7,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":135,"endColumn":72},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REACT_DEVTOOLS_GLOBAL_HOOK__'.","line":225,"column":9,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":226,"endColumn":42},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REDUX_DEVTOOLS_EXTENSION__'.","line":230,"column":9,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":231,"endColumn":40},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__VUE_DEVTOOLS_GLOBAL_HOOK__'.","line":235,"column":9,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":236,"endColumn":40},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REACT_DEVTOOLS_GLOBAL_HOOK__'.","line":252,"column":9,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":253,"endColumn":42},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REDUX_DEVTOOLS_EXTENSION__'.","line":257,"column":9,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":258,"endColumn":40},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__PERFORMANCE_OBSERVERS__'.","line":379,"column":7,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":380,"endColumn":35},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__PERFORMANCE_OBSERVERS__'.","line":382,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":383,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":413,"column":25,"nodeType":"MemberExpression","endLine":417,"endColumn":49},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REACT_DEVTOOLS_GLOBAL_HOOK__'.","line":439,"column":27,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":440,"endColumn":42},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__REDUX_DEVTOOLS_EXTENSION__'.","line":445,"column":27,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":446,"endColumn":40}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_FIVE, COUNT_PAIR, COUNT_TRIPLE, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, ZERO } from '@/constants';\n\n/**\n * æ€§èƒ½ç›‘æ§æ ¸å¿ƒå·¥å…·å†²çªæ£€æŸ¥\n * Performance Monitoring Core Tool Conflict Detection\n *\n * è´Ÿè´£æ£€æµ‹å’Œè§£å†³æ€§èƒ½ç›‘æ§å·¥å…·ä¹‹é—´çš„å†²çªé—®é¢˜\n */\n\n/**\n * å·¥å…·å†²çªæ£€æŸ¥ç»“æœ\n * Tool conflict check result\n */\nexport interface ToolConflictResult {\n  hasConflicts: boolean;\n  conflicts: string[];\n  warnings: string[];\n  recommendations: string[];\n  detectedTools: string[];\n}\n\n/**\n * å·¥å…·å†²çªæ£€æŸ¥å™¨\n * Tool conflict checker\n */\nexport class PerformanceToolConflictChecker {\n  private _knownTools = [\n    'React DevTools',\n    'Redux DevTools',\n    'Vue DevTools',\n    'Angular DevTools',\n    'Lighthouse',\n    'Web Vitals',\n    'Performance Observer',\n    'User Timing API',\n    'Navigation Timing API',\n    'Resource Timing API',\n    'Paint Timing API',\n    'Long Tasks API',\n    'Intersection Observer',\n    'Mutation Observer',\n    'ResizeObserver',\n    'PerformanceObserver',\n    'Chrome DevTools',\n    'Firefox DevTools',\n    'Safari DevTools',\n    'Edge DevTools',\n    'Sentry',\n    'LogRocket',\n    'FullStory',\n    'Hotjar',\n    'Google Analytics',\n    'Adobe Analytics',\n    'Mixpanel',\n    'Amplitude',\n    'New Relic',\n    'DataDog',\n    'AppDynamics',\n    'Dynatrace',\n  ];\n\n  /**\n   * æ£€æŸ¥å·¥å…·å†²çª\n   * Check tool conflicts\n   */\n  checkToolConflicts(): ToolConflictResult {\n    const conflicts: string[] = [];\n    const warnings: string[] = [];\n    const recommendations: string[] = [];\n    const detectedTools: string[] = [];\n\n    // æ£€æŸ¥å…¨å±€å¯¹è±¡ä¸­çš„å·¥å…·\n    this.detectGlobalTools(detectedTools);\n\n    // æ£€æŸ¥æ€§èƒ½APIå†²çª\n    this.checkPerformanceAPIConflicts(conflicts, warnings);\n\n    // æ£€æŸ¥å¼€å‘è€…å·¥å…·å†²çª\n    this.checkDevToolsConflicts(conflicts, warnings);\n\n    // æ£€æŸ¥ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·å†²çª\n    this.checkThirdPartyToolConflicts(detectedTools, conflicts, warnings);\n\n    // ç”Ÿæˆå»ºè®®\n    this.generateRecommendations(detectedTools, conflicts, recommendations);\n\n    return {\n      hasConflicts: conflicts.length > ZERO,\n      conflicts,\n      warnings,\n      recommendations,\n      detectedTools,\n    };\n  }\n\n  /**\n   * æ£€æµ‹å…¨å±€å·¥å…·\n   * Detect global tools\n   */\n  private detectGlobalTools(detectedTools: string[]): void {\n    if (typeof window === 'undefined') return;\n\n    // æ£€æŸ¥React DevTools\n    if (\n      (window as { __REACT_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n        .__REACT_DEVTOOLS_GLOBAL_HOOK__\n    ) {\n      detectedTools.push('React DevTools');\n    }\n\n    // æ£€æŸ¥Redux DevTools\n    if (\n      (window as { __REDUX_DEVTOOLS_EXTENSION__?: unknown })\n        .__REDUX_DEVTOOLS_EXTENSION__\n    ) {\n      detectedTools.push('Redux DevTools');\n    }\n\n    // æ£€æŸ¥Vue DevTools\n    if (\n      (window as { __VUE_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n        .__VUE_DEVTOOLS_GLOBAL_HOOK__\n    ) {\n      detectedTools.push('Vue DevTools');\n    }\n\n    // æ£€æŸ¥Angular DevTools\n    if ((window as { ng?: unknown }).ng) {\n      detectedTools.push('Angular DevTools');\n    }\n\n    // æ£€æŸ¥Sentry\n    if (\n      (window as { Sentry?: unknown; __SENTRY__?: unknown }).Sentry ||\n      (window as { Sentry?: unknown; __SENTRY__?: unknown }).__SENTRY__\n    ) {\n      detectedTools.push('Sentry');\n    }\n\n    // æ£€æŸ¥Google Analytics\n    if (\n      (window as { gtag?: unknown; ga?: unknown; dataLayer?: unknown }).gtag ||\n      (window as { gtag?: unknown; ga?: unknown; dataLayer?: unknown }).ga ||\n      (window as { gtag?: unknown; ga?: unknown; dataLayer?: unknown })\n        .dataLayer\n    ) {\n      detectedTools.push('Google Analytics');\n    }\n\n    // æ£€æŸ¥å…¶ä»–ç›‘æ§å·¥å…·\n    if ((window as { LogRocket?: unknown }).LogRocket) {\n      detectedTools.push('LogRocket');\n    }\n\n    if ((window as { FS?: unknown }).FS) {\n      detectedTools.push('FullStory');\n    }\n\n    if ((window as { hj?: unknown }).hj) {\n      detectedTools.push('Hotjar');\n    }\n\n    if ((window as { mixpanel?: unknown }).mixpanel) {\n      detectedTools.push('Mixpanel');\n    }\n\n    if ((window as { amplitude?: unknown }).amplitude) {\n      detectedTools.push('Amplitude');\n    }\n  }\n\n  /**\n   * æ£€æŸ¥æ€§èƒ½APIå†²çª\n   * Check Performance API conflicts\n   */\n  private checkPerformanceAPIConflicts(\n    conflicts: string[],\n    warnings: string[],\n  ): void {\n    if (typeof window === 'undefined' || !window.performance) return;\n\n    // æ£€æŸ¥PerformanceObserveræ˜¯å¦è¢«å¤šæ¬¡ä½¿ç”¨\n    const performanceObserverCount = this.countPerformanceObservers();\n    if (performanceObserverCount > COUNT_TRIPLE) {\n      warnings.push(\n        `æ£€æµ‹åˆ° ${performanceObserverCount} ä¸ª PerformanceObserver å®ä¾‹ï¼Œå¯èƒ½å½±å“æ€§èƒ½`,\n      );\n    }\n\n    // æ£€æŸ¥User Timing APIä½¿ç”¨æƒ…å†µ\n    const userTimingMarks = performance.getEntriesByType('mark').length;\n    const userTimingMeasures = performance.getEntriesByType('measure').length;\n\n    if (userTimingMarks > PERCENTAGE_FULL) {\n      warnings.push(`æ£€æµ‹åˆ° ${userTimingMarks} ä¸ªæ€§èƒ½æ ‡è®°ï¼Œå»ºè®®å®šæœŸæ¸…ç†`);\n    }\n\n    if (userTimingMeasures > PERCENTAGE_HALF) {\n      warnings.push(`æ£€æµ‹åˆ° ${userTimingMeasures} ä¸ªæ€§èƒ½æµ‹é‡ï¼Œå»ºè®®å®šæœŸæ¸…ç†`);\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–å·¥å…·åœ¨ç›‘å¬æ€§èƒ½äº‹ä»¶\n    if (this.hasMultiplePerformanceListeners()) {\n      conflicts.push('æ£€æµ‹åˆ°å¤šä¸ªå·¥å…·åœ¨ç›‘å¬æ€§èƒ½äº‹ä»¶ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®é‡å¤æˆ–å†²çª');\n    }\n  }\n\n  /**\n   * æ£€æŸ¥å¼€å‘è€…å·¥å…·å†²çª\n   * Check DevTools conflicts\n   */\n  private checkDevToolsConflicts(\n    conflicts: string[],\n    warnings: string[],\n  ): void {\n    if (typeof window === 'undefined') return;\n\n    // æ£€æŸ¥æ˜¯å¦åœ¨å¼€å‘æ¨¡å¼\n    const isDevelopment = process.env.NODE_ENV === 'development';\n\n    if (isDevelopment) {\n      let devToolsCount = ZERO;\n\n      if (\n        (window as { __REACT_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n          .__REACT_DEVTOOLS_GLOBAL_HOOK__\n      )\n        devToolsCount += ONE;\n      if (\n        (window as { __REDUX_DEVTOOLS_EXTENSION__?: unknown })\n          .__REDUX_DEVTOOLS_EXTENSION__\n      )\n        devToolsCount += ONE;\n      if (\n        (window as { __VUE_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n          .__VUE_DEVTOOLS_GLOBAL_HOOK__\n      )\n        devToolsCount += ONE;\n\n      if (devToolsCount > COUNT_PAIR) {\n        warnings.push(\n          `å¼€å‘ç¯å¢ƒä¸­æ£€æµ‹åˆ° ${devToolsCount} ä¸ªå¼€å‘è€…å·¥å…·ï¼Œå¯èƒ½å½±å“æ€§èƒ½æµ‹è¯•å‡†ç¡®æ€§`,\n        );\n      }\n    }\n\n    // æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒä¸­çš„å¼€å‘å·¥å…·\n    if (!isDevelopment) {\n      const prodDevTools: string[] = [];\n\n      if (\n        (window as { __REACT_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n          .__REACT_DEVTOOLS_GLOBAL_HOOK__\n      )\n        prodDevTools.push('React DevTools');\n      if (\n        (window as { __REDUX_DEVTOOLS_EXTENSION__?: unknown })\n          .__REDUX_DEVTOOLS_EXTENSION__\n      )\n        prodDevTools.push('Redux DevTools');\n\n      if (prodDevTools.length > ZERO) {\n        conflicts.push(`ç”Ÿäº§ç¯å¢ƒä¸­æ£€æµ‹åˆ°å¼€å‘å·¥å…·: ${prodDevTools.join(', ')}`);\n      }\n    }\n  }\n\n  /**\n   * æ£€æŸ¥ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·å†²çª\n   * Check third-party monitoring tool conflicts\n   */\n  private checkThirdPartyToolConflicts(\n    detectedTools: string[],\n    conflicts: string[],\n    warnings: string[],\n  ): void {\n    const monitoringTools = detectedTools.filter((tool) =>\n      ['Sentry', 'LogRocket', 'FullStory', 'New Relic', 'DataDog'].includes(\n        tool,\n      ),\n    );\n\n    if (monitoringTools.length > COUNT_PAIR) {\n      warnings.push(\n        `æ£€æµ‹åˆ°å¤šä¸ªç›‘æ§å·¥å…·: ${monitoringTools.join(', ')}ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½å¼€é”€`,\n      );\n    }\n\n    const analyticsTools = detectedTools.filter((tool) =>\n      ['Google Analytics', 'Adobe Analytics', 'Mixpanel', 'Amplitude'].includes(\n        tool,\n      ),\n    );\n\n    if (analyticsTools.length > COUNT_PAIR) {\n      warnings.push(\n        `æ£€æµ‹åˆ°å¤šä¸ªåˆ†æå·¥å…·: ${analyticsTools.join(', ')}ï¼Œå»ºè®®æ•´åˆæ•°æ®æ”¶é›†`,\n      );\n    }\n\n    // æ£€æŸ¥å·¥å…·é—´çš„å·²çŸ¥å†²çª\n    this.checkKnownConflicts(detectedTools, conflicts);\n  }\n\n  /**\n   * æ£€æŸ¥å·²çŸ¥å†²çª\n   * Check known conflicts\n   */\n  private checkKnownConflicts(\n    detectedTools: string[],\n    conflicts: string[],\n  ): void {\n    // LogRocket å’Œ FullStory å¯èƒ½å†²çª\n    if (\n      detectedTools.includes('LogRocket') &&\n      detectedTools.includes('FullStory')\n    ) {\n      conflicts.push('LogRocket å’Œ FullStory åŒæ—¶ä½¿ç”¨å¯èƒ½å¯¼è‡´ä¼šè¯å½•åˆ¶å†²çª');\n    }\n\n    // å¤šä¸ªæ€§èƒ½ç›‘æ§å·¥å…·å¯èƒ½å†²çª\n    const performanceTools = detectedTools.filter((tool) =>\n      ['New Relic', 'DataDog', 'AppDynamics', 'Dynatrace'].includes(tool),\n    );\n\n    if (performanceTools.length > ONE) {\n      conflicts.push(`å¤šä¸ªAPMå·¥å…·å¯èƒ½å†²çª: ${performanceTools.join(', ')}`);\n    }\n  }\n\n  /**\n   * ç”Ÿæˆå»ºè®®\n   * Generate recommendations\n   */\n  private generateRecommendations(\n    detectedTools: string[],\n    conflicts: string[],\n    recommendations: string[],\n  ): void {\n    if (conflicts.length > ZERO) {\n      recommendations.push('å»ºè®®å®¡æŸ¥å’Œæ•´åˆç›‘æ§å·¥å…·ï¼Œé¿å…åŠŸèƒ½é‡å¤');\n      recommendations.push('è€ƒè™‘ä½¿ç”¨ç»Ÿä¸€çš„ç›‘æ§å¹³å°æ¥å‡å°‘å·¥å…·å†²çª');\n    }\n\n    if (detectedTools.length > COUNT_FIVE) {\n      recommendations.push('æ£€æµ‹åˆ°è¾ƒå¤šç›‘æ§å·¥å…·ï¼Œå»ºè®®è¯„ä¼°æ¯ä¸ªå·¥å…·çš„å¿…è¦æ€§');\n      recommendations.push('è€ƒè™‘ä½¿ç”¨æ¡ä»¶åŠ è½½æ¥å‡å°‘ç”Ÿäº§ç¯å¢ƒçš„å·¥å…·æ•°é‡');\n    }\n\n    const isDevelopment = process.env.NODE_ENV === 'development';\n    if (\n      !isDevelopment &&\n      detectedTools.some((tool) => tool.includes('DevTools'))\n    ) {\n      recommendations.push('ç”Ÿäº§ç¯å¢ƒä¸­åº”ç§»é™¤å¼€å‘è€…å·¥å…·ä»¥æé«˜æ€§èƒ½');\n    }\n\n    if (detectedTools.length === ZERO) {\n      recommendations.push('æœªæ£€æµ‹åˆ°æ˜æ˜¾çš„å·¥å…·å†²çªï¼Œå½“å‰é…ç½®è‰¯å¥½');\n    }\n  }\n\n  /**\n   * è®¡ç®—PerformanceObserveræ•°é‡\n   * Count PerformanceObserver instances\n   */\n  private countPerformanceObservers(): number {\n    // è¿™æ˜¯ä¸€ä¸ªä¼°ç®—ï¼Œå®é™…å®ç°å¯èƒ½éœ€è¦æ›´å¤æ‚çš„æ£€æµ‹é€»è¾‘\n    if (typeof window === 'undefined' || !window.PerformanceObserver) return ZERO;\n\n    // æ£€æŸ¥å¸¸è§çš„æ€§èƒ½ç›‘æ§åº“æ˜¯å¦åœ¨ä½¿ç”¨PerformanceObserver\n    let count = ZERO;\n\n    // æ£€æŸ¥Web Vitals\n    if ((window as { webVitals?: unknown }).webVitals) count += ONE;\n\n    // æ£€æŸ¥å…¶ä»–å¯èƒ½çš„ç›‘æ§å·¥å…·\n    if (\n      (window as { __PERFORMANCE_OBSERVERS__?: unknown[] })\n        .__PERFORMANCE_OBSERVERS__\n    ) {\n      count += (window as { __PERFORMANCE_OBSERVERS__?: unknown[] })\n        .__PERFORMANCE_OBSERVERS__!.length;\n    }\n\n    return count;\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ªæ€§èƒ½ç›‘å¬å™¨\n   * Check if there are multiple performance listeners\n   */\n  private hasMultiplePerformanceListeners(): boolean {\n    if (typeof window === 'undefined') return false;\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ªå·¥å…·åœ¨ç›‘å¬loadäº‹ä»¶\n    const loadListeners = this.getEventListenerCount('load');\n    const performanceListeners = this.getEventListenerCount('DOMContentLoaded');\n\n    return loadListeners > COUNT_PAIR || performanceListeners > COUNT_PAIR;\n  }\n\n  /**\n   * è·å–äº‹ä»¶ç›‘å¬å™¨æ•°é‡\n   * Get event listener count\n   */\n  private getEventListenerCount(eventType: string): number {\n    // è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®ç°ï¼Œå®é™…å¯èƒ½éœ€è¦æ›´å¤æ‚çš„æ£€æµ‹\n    if (typeof window === 'undefined') return ZERO;\n\n    try {\n      // å°è¯•è·å–äº‹ä»¶ç›‘å¬å™¨ä¿¡æ¯ï¼ˆä»…åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ï¼‰\n      const listeners = (\n        window as {\n          getEventListeners?: (target: unknown) => Record<string, unknown[]>;\n        }\n      ).getEventListeners?.(window)?.[eventType];\n      return listeners ? listeners.length : ZERO;\n    } catch {\n      return ZERO;\n    }\n  }\n\n  /**\n   * è·å–å·¥å…·è¯¦ç»†ä¿¡æ¯\n   * Get tool details\n   */\n  getToolDetails(toolName: string): {\n    name: string;\n    detected: boolean;\n    version?: string;\n    impact: 'low' | 'medium' | 'high';\n    description: string;\n  } | null {\n    if (typeof window === 'undefined') return null;\n\n    const toolDetails = {\n      'React DevTools': {\n        detected: Boolean((window as { __REACT_DEVTOOLS_GLOBAL_HOOK__?: unknown })\n          .__REACT_DEVTOOLS_GLOBAL_HOOK__),\n        impact: 'low' as const,\n        description: 'React å¼€å‘è€…å·¥å…·ï¼Œç”¨äºè°ƒè¯• React ç»„ä»¶',\n      },\n      'Redux DevTools': {\n        detected: Boolean((window as { __REDUX_DEVTOOLS_EXTENSION__?: unknown })\n          .__REDUX_DEVTOOLS_EXTENSION__),\n        impact: 'low' as const,\n        description: 'Redux å¼€å‘è€…å·¥å…·ï¼Œç”¨äºè°ƒè¯•çŠ¶æ€ç®¡ç†',\n      },\n      'Sentry': {\n        detected: Boolean((window as { Sentry?: unknown }).Sentry),\n        impact: 'medium' as const,\n        description: 'é”™è¯¯ç›‘æ§å’Œæ€§èƒ½ç›‘æ§å¹³å°',\n      },\n      'Google Analytics': {\n        detected:\n          Boolean((window as { gtag?: unknown; ga?: unknown }).gtag) ||\n          Boolean((window as { gtag?: unknown; ga?: unknown }).ga),\n        impact: 'medium' as const,\n        description: 'ç½‘ç«™åˆ†æå’Œç”¨æˆ·è¡Œä¸ºè·Ÿè¸ªå·¥å…·',\n      },\n    };\n\n    const tool = toolDetails[toolName as keyof typeof toolDetails];\n    if (!tool) return null;\n\n    return {\n      name: toolName,\n      ...tool,\n    };\n  }\n\n  /**\n   * ç”Ÿæˆå†²çªè§£å†³æ–¹æ¡ˆ\n   * Generate conflict resolution\n   */\n  generateResolutionPlan(conflicts: string[]): {\n    priority: 'high' | 'medium' | 'low';\n    actions: string[];\n    timeline: string;\n  }[] {\n    return conflicts.map((conflict) => {\n      if (conflict.includes('ç”Ÿäº§ç¯å¢ƒ') || conflict.includes('APMå·¥å…·')) {\n        return {\n          priority: 'high' as const,\n          actions: [\n            'ç«‹å³å®¡æŸ¥ç”Ÿäº§ç¯å¢ƒé…ç½®',\n            'ç§»é™¤ä¸å¿…è¦çš„å¼€å‘å·¥å…·',\n            'æ•´åˆç›‘æ§å·¥å…·åŠŸèƒ½',\n          ],\n          timeline: '1-COUNT_PAIR å¤©å†…å®Œæˆ',\n        };\n      }\n\n      if (conflict.includes('å¤šä¸ªå·¥å…·') || conflict.includes('æ€§èƒ½äº‹ä»¶')) {\n        return {\n          priority: 'medium' as const,\n          actions: ['è¯„ä¼°å·¥å…·çš„å¿…è¦æ€§', 'å®æ–½æ¡ä»¶åŠ è½½ç­–ç•¥', 'ä¼˜åŒ–å·¥å…·é…ç½®'],\n          timeline: '1 å‘¨å†…å®Œæˆ',\n        };\n      }\n\n      return {\n        priority: 'low' as const,\n        actions: ['ç›‘æ§å·¥å…·ä½¿ç”¨æƒ…å†µ', 'å®šæœŸæ£€æŸ¥å·¥å…·å†²çª', 'ä¼˜åŒ–å·¥å…·é…ç½®'],\n        timeline: 'COUNT_PAIR å‘¨å†…å®Œæˆ',\n      };\n    });\n  }\n}\n\n/**\n * åˆ›å»ºå·¥å…·å†²çªæ£€æŸ¥å™¨\n * Create tool conflict checker\n */\nexport function createConflictChecker(): PerformanceToolConflictChecker {\n  return new PerformanceToolConflictChecker();\n}\n\n/**\n * å¿«é€Ÿæ£€æŸ¥å·¥å…·å†²çª\n * Quick check for tool conflicts\n */\nexport function quickConflictCheck(): ToolConflictResult {\n  const checker = new PerformanceToolConflictChecker();\n  return checker.checkToolConflicts();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-core-metrics.ts","messages":[{"ruleId":"complexity","severity":2,"message":"Method 'analyzeRealtimeMetric' has a complexity of 25. Maximum allowed is 15.","line":159,"column":32,"nodeType":"FunctionExpression","messageId":"complex","endLine":213,"endColumn":4},{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":164,"column":5,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":190,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":385,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9878,9881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9878,9881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ€§èƒ½ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡ç®¡ç†\n * Performance Monitoring Core Metrics Management\n *\n * è´Ÿè´£æ€§èƒ½æŒ‡æ ‡çš„è®°å½•ã€å­˜å‚¨ã€æ¸…ç†å’Œå®æ—¶åˆ†æåŠŸèƒ½\n */\n\nimport { MB } from '@/constants/units';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, MAGIC_36, MAGIC_9, MAGIC_1_1, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport type {\n  BundlePerformanceData,\n  ComponentPerformanceData,\n  NetworkPerformanceData,\n  PerformanceConfig,\n  PerformanceMetrics,\n  PerformanceMetricSource,\n  PerformanceMetricType,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * æŒ‡æ ‡ç®¡ç†å™¨\n * Metrics manager\n */\nexport class PerformanceMetricsManager {\n  private metrics: PerformanceMetrics[] = [];\n  private cleanupInterval: NodeJS.Timeout | null = null;\n  private config: PerformanceConfig;\n\n  constructor(config: PerformanceConfig) {\n    this.config = config;\n    this.setupPeriodicCleanup();\n  }\n\n  /**\n   * è®¾ç½®å®šæœŸæ¸…ç†\n   * Setup periodic cleanup\n   */\n  private setupPeriodicCleanup(): void {\n    const cleanupInterval =\n      this.config.global?.dataRetentionTime || COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW; // COUNT_FIVEåˆ†é’Ÿ\n\n    this.cleanupInterval = setInterval(() => {\n      this.cleanupOldMetrics();\n    }, cleanupInterval);\n  }\n\n  /**\n   * æ¸…ç†æ—§æŒ‡æ ‡\n   * Cleanup old metrics\n   */\n  private cleanupOldMetrics(): void {\n    const now = Date.now();\n    const retentionTime =\n      this.config.global?.dataRetentionTime || COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW;\n    const maxMetrics = this.config.global?.maxMetrics || ANIMATION_DURATION_VERY_SLOW;\n\n    // æŒ‰æ—¶é—´æ¸…ç†\n    this.metrics = this.metrics.filter(\n      (metric) => now - metric.timestamp < retentionTime,\n    );\n\n    // æŒ‰æ•°é‡æ¸…ç†ï¼ˆä¿ç•™æœ€æ–°çš„ï¼‰\n    if (this.metrics.length > maxMetrics) {\n      this.metrics = this.metrics\n        .sort((a, b) => b.timestamp - a.timestamp)\n        .slice(ZERO, maxMetrics);\n    }\n  }\n\n  /**\n   * ç”ŸæˆæŒ‡æ ‡ID\n   * Generate metric ID\n   */\n  private generateMetricId(): string {\n    return `metric_${Date.now()}_${Math.random().toString(MAGIC_36).substr(COUNT_PAIR, MAGIC_9)}`;\n  }\n\n  /**\n   * è®°å½•æ€§èƒ½æŒ‡æ ‡\n   * Record performance metric\n   */\n  recordMetric(metric: Omit<PerformanceMetrics, 'timestamp'>): void {\n    if (!this.config.global?.enabled) {\n      return;\n    }\n\n    // æ£€æŸ¥ç‰¹å®šç±»å‹æ˜¯å¦å¯ç”¨\n    const moduleConfig = this.getModuleConfig(metric.type);\n    if (!moduleConfig?.enabled) {\n      return;\n    }\n\n    const fullMetric: PerformanceMetrics = {\n      ...metric,\n      id: metric.id || this.generateMetricId(),\n      timestamp: Date.now(),\n    };\n\n    this.metrics.push(fullMetric);\n\n    // å®æ—¶åˆ†æ\n    this.analyzeRealtimeMetric(fullMetric);\n\n    // ç«‹å³æ¸…ç†å¦‚æœè¶…å‡ºé™åˆ¶\n    const maxMetrics = this.config.global?.maxMetrics || ANIMATION_DURATION_VERY_SLOW;\n    if (this.metrics.length > maxMetrics * MAGIC_1_1) {\n      // 10%ç¼“å†²\n      this.cleanupOldMetrics();\n    }\n  }\n\n  /**\n   * è·å–æ¨¡å—é…ç½®\n   * Get module configuration\n   */\n  private getModuleConfig(type: PerformanceMetricType) {\n    switch (type) {\n      case 'component':\n        return this.config.component;\n      case 'network':\n        return this.config.network;\n      case 'bundle':\n        return this.config.bundle;\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºç»„ä»¶æ€§èƒ½æ•°æ®\n   * Type guard: check if data is component performance data\n   */\n  private isComponentData(data: unknown): data is ComponentPerformanceData {\n    return typeof data === 'object' && data !== null && 'renderTime' in data;\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œæ€§èƒ½æ•°æ®\n   * Type guard: check if data is network performance data\n   */\n  private isNetworkData(data: unknown): data is NetworkPerformanceData {\n    return typeof data === 'object' && data !== null && 'responseTime' in data;\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºæ‰“åŒ…æ€§èƒ½æ•°æ®\n   * Type guard: check if data is bundle performance data\n   */\n  private isBundleData(data: unknown): data is BundlePerformanceData {\n    return typeof data === 'object' && data !== null && 'size' in data;\n  }\n\n  /**\n   * å®æ—¶åˆ†ææŒ‡æ ‡\n   * Analyze realtime metric\n   */\n  private analyzeRealtimeMetric(metric: PerformanceMetrics): void {\n    // æ£€æŸ¥æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜éœ€è¦ç«‹å³å…³æ³¨\n    let isSlowPerformance = false;\n    let threshold = ZERO;\n\n    switch (metric.type) {\n      case 'component':\n        if (\n          this.isComponentData(metric.data) &&\n          this.config.component?.thresholds\n        ) {\n          threshold = this.config.component.thresholds.renderTime || PERCENTAGE_FULL;\n          isSlowPerformance = (Number(metric.data.renderTime) || ZERO) > threshold;\n        }\n        break;\n      case 'network':\n        if (\n          this.isNetworkData(metric.data) &&\n          this.config.network?.thresholds\n        ) {\n          threshold = this.config.network.thresholds.responseTime || 1000;\n          isSlowPerformance =\n            (Number(metric.data.responseTime) || ZERO) > threshold;\n        }\n        break;\n      case 'bundle':\n        if (this.isBundleData(metric.data) && this.config.bundle?.thresholds) {\n          threshold = this.config.bundle.thresholds.size || MB; // 1MB\n          isSlowPerformance = (Number(metric.data.size) || ZERO) > threshold;\n        }\n        break;\n    }\n\n    if (isSlowPerformance) {\n      // å®‰å…¨è·å–å€¼ç”¨äºæ—¥å¿—è®°å½•\n      let value: number | undefined;\n      if (this.isComponentData(metric.data)) {\n        value = metric.data.renderTime;\n      } else if (this.isNetworkData(metric.data)) {\n        value = metric.data.responseTime;\n      } else if (this.isBundleData(metric.data)) {\n        value = metric.data.size;\n      }\n\n      logger.warn(\n        `Performance warning: ${metric.type} metric exceeded threshold`,\n        {\n          metric: metric.id || metric.type,\n          value: value || ZERO,\n          threshold,\n          source: metric.source,\n        },\n      );\n    }\n  }\n\n  /**\n   * è·å–æ‰€æœ‰æŒ‡æ ‡\n   * Get all metrics\n   */\n  getAllMetrics(): PerformanceMetrics[] {\n    return [...this.metrics];\n  }\n\n  /**\n   * è·å–æŒ‡å®šæ—¶é—´çª—å£å†…çš„æŒ‡æ ‡\n   * Get metrics within time window\n   */\n  getMetricsInTimeWindow(timeWindow: number): PerformanceMetrics[] {\n    const now = Date.now();\n    return this.metrics.filter(\n      (metric) => now - metric.timestamp <= timeWindow,\n    );\n  }\n\n  /**\n   * æŒ‰ç±»å‹è·å–æŒ‡æ ‡\n   * Get metrics by type\n   */\n  getMetricsByType(type: PerformanceMetricType): PerformanceMetrics[] {\n    return this.metrics.filter((metric) => metric.type === type);\n  }\n\n  /**\n   * æŒ‰æ¥æºè·å–æŒ‡æ ‡\n   * Get metrics by source\n   */\n  getMetricsBySource(source: PerformanceMetricSource): PerformanceMetrics[] {\n    return this.metrics.filter((metric) => metric.source === source);\n  }\n\n  /**\n   * è·å–æŒ‡æ ‡ç»Ÿè®¡\n   * Get metrics statistics\n   */\n  getMetricsStats(): {\n    total: number;\n    byType: Record<PerformanceMetricType, number>;\n    bySource: Record<PerformanceMetricSource, number>;\n    timeRange: {\n      oldest: number;\n      newest: number;\n      span: number;\n    };\n    averageValue: number;\n  } {\n    const stats = {\n      total: this.metrics.length,\n      byType: {} as Record<PerformanceMetricType, number>,\n      bySource: {} as Record<PerformanceMetricSource, number>,\n      timeRange: {\n        oldest: ZERO,\n        newest: ZERO,\n        span: ZERO,\n      },\n      averageValue: ZERO,\n    };\n\n    if (this.metrics.length === ZERO) {\n      return stats;\n    }\n\n    // ç»Ÿè®¡ç±»å‹åˆ†å¸ƒ\n    this.metrics.forEach((metric) => {\n      stats.byType[metric.type] = (stats.byType[metric.type] || ZERO) + ONE;\n      stats.bySource[metric.source] = (stats.bySource[metric.source] || ZERO) + ONE;\n    });\n\n    // è®¡ç®—æ—¶é—´èŒƒå›´\n    const timestamps = this.metrics.map((m) => m.timestamp);\n    stats.timeRange.oldest = Math.min(...timestamps);\n    stats.timeRange.newest = Math.max(...timestamps);\n    stats.timeRange.span = stats.timeRange.newest - stats.timeRange.oldest;\n\n    // è®¡ç®—å¹³å‡å€¼\n    const totalValue = this.metrics.reduce((sum, metric) => {\n      let value = ZERO;\n      if (this.isComponentData(metric.data)) {\n        value = Number(metric.data.renderTime) || ZERO;\n      } else if (this.isNetworkData(metric.data)) {\n        value = Number(metric.data.responseTime) || ZERO;\n      } else if (this.isBundleData(metric.data)) {\n        value = Number(metric.data.size) || ZERO;\n      }\n      return sum + value;\n    }, ZERO);\n    stats.averageValue = totalValue / this.metrics.length;\n\n    return stats;\n  }\n\n  /**\n   * è®¡ç®—æ¯åˆ†é’Ÿå¹³å‡æŒ‡æ ‡æ•°\n   * Calculate average metrics per minute\n   */\n  calculateAverageMetricsPerMinute(): number {\n    if (this.metrics.length === ZERO) {\n      return ZERO;\n    }\n\n    const stats = this.getMetricsStats();\n    const timeSpanMinutes = stats.timeRange.span / (SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n\n    return timeSpanMinutes > ZERO ? this.metrics.length / timeSpanMinutes : ZERO;\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„æŒ‡æ ‡\n   * Get recent metrics\n   */\n  getRecentMetrics(count = COUNT_TEN): PerformanceMetrics[] {\n    return this.metrics\n      .sort((a, b) => b.timestamp - a.timestamp)\n      .slice(ZERO, count);\n  }\n\n  /**\n   * æŸ¥æ‰¾ç‰¹å®šæŒ‡æ ‡\n   * Find specific metric\n   */\n  findMetric(id: string): PerformanceMetrics | undefined {\n    return this.metrics.find((metric) => metric.id === id);\n  }\n\n  /**\n   * åˆ é™¤æŒ‡æ ‡\n   * Remove metric\n   */\n  removeMetric(id: string): boolean {\n    const index = this.metrics.findIndex((metric) => metric.id === id);\n    if (index > -ONE) {\n      this.metrics.splice(index, ONE);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * æ¸…ç©ºæ‰€æœ‰æŒ‡æ ‡\n   * Clear all metrics\n   */\n  clearAllMetrics(): void {\n    this.metrics = [];\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   * Update configuration\n   */\n  updateConfig(newConfig: PerformanceConfig): void {\n    this.config = newConfig;\n\n    // é‡æ–°è®¾ç½®æ¸…ç†é—´éš”\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n    }\n    this.setupPeriodicCleanup();\n  }\n\n  /**\n   * å¯¼å‡ºæŒ‡æ ‡æ•°æ®\n   * Export metrics data\n   */\n  exportMetrics(): {\n    metrics: PerformanceMetrics[];\n    exportTime: number;\n    stats: any;\n  } {\n    return {\n      metrics: [...this.metrics],\n      exportTime: Date.now(),\n      stats: this.getMetricsStats(),\n    };\n  }\n\n  /**\n   * å¯¼å…¥æŒ‡æ ‡æ•°æ®\n   * Import metrics data\n   */\n  importMetrics(data: PerformanceMetrics[], replace = false): number {\n    if (replace) {\n      this.metrics = [];\n    }\n\n    let importedCount = ZERO;\n    data.forEach((metric) => {\n      // éªŒè¯æŒ‡æ ‡æ•°æ®\n      if (this.isValidMetric(metric)) {\n        this.metrics.push(metric);\n        importedCount += ONE;\n      }\n    });\n\n    // æ¸…ç†é‡å¤å’Œè¿‡æœŸæ•°æ®\n    this.cleanupOldMetrics();\n\n    return importedCount;\n  }\n\n  /**\n   * éªŒè¯æŒ‡æ ‡æ•°æ®\n   * Validate metric data\n   */\n  private isValidMetric(metric: unknown): metric is PerformanceMetrics {\n    if (!metric || typeof metric !== 'object') {\n      return false;\n    }\n\n    const m = metric as PerformanceMetrics;\n    return Boolean(m.type &&\n      m.source &&\n      typeof m.timestamp === 'number' &&\n      m.timestamp > ZERO &&\n      m.data &&\n      typeof m.data === 'object');\n  }\n\n  /**\n   * é”€æ¯ç®¡ç†å™¨\n   * Destroy manager\n   */\n  destroy(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n    this.metrics = [];\n  }\n}\n\n/**\n * åˆ›å»ºæŒ‡æ ‡ç®¡ç†å™¨\n * Create metrics manager\n */\nexport function createMetricsManager(\n  config: PerformanceConfig,\n): PerformanceMetricsManager {\n  return new PerformanceMetricsManager(config);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-core-reports.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Method 'generateRecommendations' has too many statements (30). Maximum allowed is 20.","line":151,"column":34,"nodeType":"FunctionExpression","messageId":"exceed","endLine":259,"endColumn":4},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 500.","line":213,"column":29,"nodeType":"Literal","messageId":"noMagic","endLine":213,"endColumn":32},{"ruleId":"max-lines-per-function","severity":2,"message":"Method 'generateDetailedReport' has too many lines (150). Maximum allowed is 120.","line":365,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":521,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":534,"column":7,"nodeType":"MemberExpression","endLine":534,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":534,"column":28,"nodeType":"MemberExpression","endLine":534,"endColumn":45}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n/**\n * æ€§èƒ½ç›‘æ§æ ¸å¿ƒæŠ¥å‘Šç”Ÿæˆ\n * Performance Monitoring Core Report Generation\n *\n * è´Ÿè´£æ€§èƒ½æŠ¥å‘Šçš„ç”Ÿæˆã€è¯„åˆ†è®¡ç®—å’Œå»ºè®®æä¾›åŠŸèƒ½\n */\n\nimport { DEC_0_4, MAGIC_0_2 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, COUNT_TRIPLE, MAGIC_20, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO, MAGIC_0_5, MAGIC_80, MAGIC_40, MAGIC_0_3, MAGIC_0_6, MAGIC_1_5 } from '@/constants';\n\nimport type {\n  BundlePerformanceData,\n  ComponentPerformanceData,\n  NetworkPerformanceData,\n  PerformanceConfig,\n  PerformanceMetrics,\n  PerformanceMetricSource,\n  PerformanceMetricType,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * æ€§èƒ½æŠ¥å‘Šæ¥å£\n * Performance report interface\n */\nexport interface PerformanceReport {\n  /** æŠ¥å‘Šæ‘˜è¦ */\n  summary: {\n    totalMetrics: number;\n    recentMetrics: number;\n    sources: PerformanceMetricSource[];\n    types: PerformanceMetricType[];\n    timeRange: {\n      start: number;\n      end: number;\n    };\n    averageMetricsPerMinute: number;\n  };\n  /** è¯¦ç»†æŒ‡æ ‡ */\n  details: PerformanceMetrics[];\n  /** æ€§èƒ½å»ºè®® */\n  recommendations: string[];\n  /** æ€§èƒ½è¯„åˆ† */\n  score?: {\n    overall: number;\n    component: number;\n    network: number;\n    bundle: number;\n  };\n}\n\n/**\n * æŠ¥å‘Šç”Ÿæˆå™¨\n * Report generator\n */\nexport class PerformanceReportGenerator {\n  private config: PerformanceConfig;\n\n  constructor(config: PerformanceConfig) {\n    this.config = config;\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºç»„ä»¶æ€§èƒ½æ•°æ®\n   */\n  private isComponentData(data: unknown): data is ComponentPerformanceData {\n    return typeof data === 'object' && data !== null && 'renderTime' in data;\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œæ€§èƒ½æ•°æ®\n   */\n  private isNetworkData(data: unknown): data is NetworkPerformanceData {\n    return typeof data === 'object' && data !== null && 'responseTime' in data;\n  }\n\n  /**\n   * ç±»å‹å®ˆå«ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºæ‰“åŒ…æ€§èƒ½æ•°æ®\n   */\n  private isBundleData(data: unknown): data is BundlePerformanceData {\n    return typeof data === 'object' && data !== null && 'size' in data;\n  }\n\n  /**\n   * ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š\n   * Generate performance report\n   */\n  generateReport(\n    metrics: PerformanceMetrics[],\n    timeWindow = SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  ): PerformanceReport {\n    const now = Date.now();\n    const windowStart = now - timeWindow;\n\n    // è¿‡æ»¤æ—¶é—´çª—å£å†…çš„æŒ‡æ ‡\n    const windowMetrics = metrics.filter(\n      (metric) => metric.timestamp >= windowStart,\n    );\n\n    // ç”ŸæˆæŠ¥å‘Šæ‘˜è¦\n    const summary = this.generateSummary(windowMetrics, windowStart, now);\n\n    // ç”Ÿæˆå»ºè®®\n    const recommendations = this.generateRecommendations(windowMetrics);\n\n    // è®¡ç®—æ€§èƒ½è¯„åˆ†\n    const score = this.calculatePerformanceScore(windowMetrics);\n\n    return {\n      summary,\n      details: windowMetrics,\n      recommendations,\n      ...(score !== undefined && { score }),\n    };\n  }\n\n  /**\n   * ç”ŸæˆæŠ¥å‘Šæ‘˜è¦\n   * Generate report summary\n   */\n  private generateSummary(\n    metrics: PerformanceMetrics[],\n    windowStart: number,\n    windowEnd: number,\n  ): PerformanceReport['summary'] {\n    const sources = [...new Set(metrics.map((m) => m.source))];\n    const types = [...new Set(metrics.map((m) => m.type))];\n\n    const timeSpanMinutes = (windowEnd - windowStart) / (SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW);\n    const averageMetricsPerMinute =\n      timeSpanMinutes > ZERO ? metrics.length / timeSpanMinutes : ZERO;\n\n    return {\n      totalMetrics: metrics.length,\n      recentMetrics: metrics.filter((m) => windowEnd - m.timestamp < SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW)\n        .length, // æœ€è¿‘1åˆ†é’Ÿ\n      sources,\n      types,\n      timeRange: {\n        start: windowStart,\n        end: windowEnd,\n      },\n      averageMetricsPerMinute,\n    };\n  }\n\n  /**\n   * ç”Ÿæˆæ€§èƒ½å»ºè®®\n   * Generate performance recommendations\n   */\n  private generateRecommendations(metrics: PerformanceMetrics[]): string[] {\n    const recommendations: string[] = [];\n\n    // ç»„ä»¶æ€§èƒ½å»ºè®®\n    const componentMetrics = metrics.filter((m) => m.type === 'component');\n    if (componentMetrics.length > ZERO) {\n      const slowComponents = componentMetrics.filter((m) => {\n        if (this.isComponentData(m.data)) {\n          return (\n            (Number(m.data.renderTime) || ZERO) >\n            (this.config.component?.thresholds?.renderTime || PERCENTAGE_FULL)\n          );\n        }\n        return false;\n      });\n\n      if (slowComponents.length > ZERO) {\n        recommendations.push(\n          `å‘ç° ${slowComponents.length} ä¸ªç»„ä»¶æ¸²æŸ“æ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼Œå»ºè®®ä¼˜åŒ–ç»„ä»¶æ€§èƒ½`,\n        );\n      }\n\n      const avgRenderTime =\n        componentMetrics.reduce((sum, m) => {\n          if (this.isComponentData(m.data)) {\n            return sum + (Number(m.data.renderTime) || ZERO);\n          }\n          return sum;\n        }, ZERO) / componentMetrics.length;\n      if (avgRenderTime > PERCENTAGE_HALF) {\n        recommendations.push(\n          'ç»„ä»¶å¹³å‡æ¸²æŸ“æ—¶é—´è¾ƒé«˜ï¼Œè€ƒè™‘ä½¿ç”¨ React.memo æˆ– useMemo ä¼˜åŒ–',\n        );\n      }\n    }\n\n    // ç½‘ç»œæ€§èƒ½å»ºè®®\n    const networkMetrics = metrics.filter((m) => m.type === 'network');\n    if (networkMetrics.length > ZERO) {\n      const slowRequests = networkMetrics.filter((m) => {\n        if (this.isNetworkData(m.data)) {\n          return (\n            (Number(m.data.responseTime) || ZERO) >\n            (this.config.network?.thresholds?.responseTime || 1000)\n          );\n        }\n        return false;\n      });\n\n      if (slowRequests.length > ZERO) {\n        recommendations.push(\n          `å‘ç° ${slowRequests.length} ä¸ªç½‘ç»œè¯·æ±‚å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼Œå»ºè®®ä¼˜åŒ–APIæ€§èƒ½`,\n        );\n      }\n\n      const avgResponseTime =\n        networkMetrics.reduce((sum, m) => {\n          if (this.isNetworkData(m.data)) {\n            return sum + (Number(m.data.responseTime) || ZERO);\n          }\n          return sum;\n        }, ZERO) / networkMetrics.length;\n      if (avgResponseTime > 500) {\n        recommendations.push('ç½‘ç»œè¯·æ±‚å¹³å‡å“åº”æ—¶é—´è¾ƒé«˜ï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å­˜æˆ–CDNä¼˜åŒ–');\n      }\n    }\n\n    // æ‰“åŒ…å¤§å°å»ºè®®\n    const bundleMetrics = metrics.filter((m) => m.type === 'bundle');\n    if (bundleMetrics.length > ZERO) {\n      const largeBundles = bundleMetrics.filter((m) => {\n        if (this.isBundleData(m.data)) {\n          return (\n            (Number(m.data.size) || ZERO) >\n            (this.config.bundle?.thresholds?.size || BYTES_PER_KB * BYTES_PER_KB)\n          );\n        }\n        return false;\n      });\n\n      if (largeBundles.length > ZERO) {\n        recommendations.push(\n          `å‘ç° ${largeBundles.length} ä¸ªæ‰“åŒ…æ–‡ä»¶å¤§å°è¶…è¿‡é˜ˆå€¼ï¼Œå»ºè®®è¿›è¡Œä»£ç åˆ†å‰²`,\n        );\n      }\n\n      const totalBundleSize = bundleMetrics.reduce((sum, m) => {\n        if (this.isBundleData(m.data)) {\n          return sum + (Number(m.data.size) || ZERO);\n        }\n        return sum;\n      }, ZERO);\n      if (totalBundleSize > COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB) {\n        // 5MB\n        recommendations.push('æ€»æ‰“åŒ…å¤§å°è¾ƒå¤§ï¼Œå»ºè®®ä½¿ç”¨åŠ¨æ€å¯¼å…¥å’Œæ‡’åŠ è½½ä¼˜åŒ–');\n      }\n    }\n\n    // é€šç”¨å»ºè®®\n    if (metrics.length > PERCENTAGE_FULL) {\n      recommendations.push('æ€§èƒ½æŒ‡æ ‡æ•°é‡è¾ƒå¤šï¼Œå»ºè®®è°ƒæ•´ç›‘æ§é¢‘ç‡æˆ–å¢åŠ æ•°æ®æ¸…ç†');\n    }\n\n    if (recommendations.length === ZERO) {\n      recommendations.push('å½“å‰æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œç»§ç»­ä¿æŒï¼');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * è®¡ç®—æ€§èƒ½è¯„åˆ†\n   * Calculate performance score\n   */\n  private calculatePerformanceScore(\n    metrics: PerformanceMetrics[],\n  ): PerformanceReport['score'] {\n    const componentScore = this.calculateComponentScore(metrics);\n    const networkScore = this.calculateNetworkScore(metrics);\n    const bundleScore = this.calculateBundleScore(metrics);\n\n    // è®¡ç®—æ€»ä½“è¯„åˆ†ï¼ˆåŠ æƒå¹³å‡ï¼‰\n    const weights = { component: DEC_0_4, network: DEC_0_4, bundle: MAGIC_0_2 };\n    const overall =\n      componentScore * weights.component +\n      networkScore * weights.network +\n      bundleScore * weights.bundle;\n\n    return {\n      overall: Math.round(overall),\n      component: componentScore,\n      network: networkScore,\n      bundle: bundleScore,\n    };\n  }\n\n  /**\n   * è®¡ç®—ç»„ä»¶æ€§èƒ½è¯„åˆ†\n   * Calculate component performance score\n   */\n  private calculateComponentScore(metrics: PerformanceMetrics[]): number {\n    const componentMetrics = metrics.filter((m) => m.type === 'component');\n    if (componentMetrics.length === ZERO) return PERCENTAGE_FULL;\n\n    const threshold = this.config.component?.thresholds?.renderTime || PERCENTAGE_FULL;\n    const avgRenderTime =\n      componentMetrics.reduce((sum, m) => {\n        if (this.isComponentData(m.data)) {\n          return sum + (Number(m.data.renderTime) || ZERO);\n        }\n        return sum;\n      }, ZERO) / componentMetrics.length;\n\n    // è¯„åˆ†ç®—æ³•ï¼šåŸºäºå¹³å‡æ¸²æŸ“æ—¶é—´ä¸é˜ˆå€¼çš„æ¯”è¾ƒ\n    if (avgRenderTime <= threshold * MAGIC_0_5) return PERCENTAGE_FULL;\n    if (avgRenderTime <= threshold) return MAGIC_80;\n    if (avgRenderTime <= threshold * MAGIC_1_5) return SECONDS_PER_MINUTE;\n    if (avgRenderTime <= threshold * COUNT_PAIR) return MAGIC_40;\n    return MAGIC_20;\n  }\n\n  /**\n   * è®¡ç®—ç½‘ç»œæ€§èƒ½è¯„åˆ†\n   * Calculate network performance score\n   */\n  private calculateNetworkScore(metrics: PerformanceMetrics[]): number {\n    const networkMetrics = metrics.filter((m) => m.type === 'network');\n    if (networkMetrics.length === ZERO) return PERCENTAGE_FULL;\n\n    const threshold = this.config.network?.thresholds?.responseTime || 1000;\n    const avgResponseTime =\n      networkMetrics.reduce((sum, m) => {\n        if (this.isNetworkData(m.data)) {\n          return sum + (Number(m.data.responseTime) || ZERO);\n        }\n        return sum;\n      }, ZERO) / networkMetrics.length;\n\n    // è¯„åˆ†ç®—æ³•ï¼šåŸºäºå¹³å‡å“åº”æ—¶é—´ä¸é˜ˆå€¼çš„æ¯”è¾ƒ\n    if (avgResponseTime <= threshold * MAGIC_0_3) return PERCENTAGE_FULL;\n    if (avgResponseTime <= threshold * MAGIC_0_6) return MAGIC_80;\n    if (avgResponseTime <= threshold) return SECONDS_PER_MINUTE;\n    if (avgResponseTime <= threshold * MAGIC_1_5) return MAGIC_40;\n    return MAGIC_20;\n  }\n\n  /**\n   * è®¡ç®—æ‰“åŒ…æ€§èƒ½è¯„åˆ†\n   * Calculate bundle performance score\n   */\n  private calculateBundleScore(metrics: PerformanceMetrics[]): number {\n    const bundleMetrics = metrics.filter((m) => m.type === 'bundle');\n    if (bundleMetrics.length === ZERO) return PERCENTAGE_FULL;\n\n    const threshold = this.config.bundle?.thresholds?.size || BYTES_PER_KB * BYTES_PER_KB; // 1MB\n    const totalSize = bundleMetrics.reduce((sum, m) => {\n      if (this.isBundleData(m.data)) {\n        return sum + (Number(m.data.size) || ZERO);\n      }\n      return sum;\n    }, ZERO);\n\n    // è¯„åˆ†ç®—æ³•ï¼šåŸºäºæ€»æ‰“åŒ…å¤§å°ä¸é˜ˆå€¼çš„æ¯”è¾ƒ\n    if (totalSize <= threshold * MAGIC_0_5) return PERCENTAGE_FULL;\n    if (totalSize <= threshold) return MAGIC_80;\n    if (totalSize <= threshold * COUNT_PAIR) return SECONDS_PER_MINUTE;\n    if (totalSize <= threshold * COUNT_TRIPLE) return MAGIC_40;\n    return MAGIC_20;\n  }\n\n  /**\n   * ç”Ÿæˆè¯¦ç»†çš„æ€§èƒ½åˆ†ææŠ¥å‘Š\n   * Generate detailed performance analysis report\n   */\n  generateDetailedReport(metrics: PerformanceMetrics[]): {\n    overview: PerformanceReport;\n    analysis: {\n      componentAnalysis: {\n        slowestComponents: Array<{\n          name: string;\n          value: number;\n          threshold: number;\n        }>;\n        renderTimeDistribution: Record<string, number>;\n        averageRenderTime: number;\n      };\n      networkAnalysis: {\n        slowestRequests: Array<{\n          name: string;\n          value: number;\n          threshold: number;\n        }>;\n        responseTimeDistribution: Record<string, number>;\n        averageResponseTime: number;\n      };\n      bundleAnalysis: {\n        largestBundles: Array<{\n          name: string;\n          value: number;\n          threshold: number;\n        }>;\n        sizeDistribution: Record<string, number>;\n        totalSize: number;\n      };\n    };\n    trends: {\n      componentTrend: 'improving' | 'stable' | 'degrading';\n      networkTrend: 'improving' | 'stable' | 'degrading';\n      bundleTrend: 'improving' | 'stable' | 'degrading';\n    };\n  } {\n    const overview = this.generateReport(metrics);\n\n    // ç»„ä»¶åˆ†æ\n    const componentMetrics = metrics.filter((m) => m.type === 'component');\n    const componentThreshold =\n      this.config.component?.thresholds?.renderTime || PERCENTAGE_FULL;\n    const slowestComponents = componentMetrics\n      .filter((m) => {\n        if (this.isComponentData(m.data)) {\n          return (Number(m.data.renderTime) || ZERO) > componentThreshold;\n        }\n        return false;\n      })\n      .map((m) => {\n        if (this.isComponentData(m.data)) {\n          return {\n            name: m.id || m.type,\n            value: Number(m.data.renderTime) || ZERO,\n            threshold: componentThreshold,\n          };\n        }\n        return {\n          name: m.id || m.type,\n          value: ZERO,\n          threshold: componentThreshold,\n        };\n      })\n      .sort((a, b) => b.value - a.value)\n      .slice(ZERO, COUNT_FIVE);\n\n    // ç½‘ç»œåˆ†æ\n    const networkMetrics = metrics.filter((m) => m.type === 'network');\n    const networkThreshold =\n      this.config.network?.thresholds?.responseTime || 1000;\n    const slowestRequests = networkMetrics\n      .filter((m) => {\n        if (this.isNetworkData(m.data)) {\n          return (Number(m.data.responseTime) || ZERO) > networkThreshold;\n        }\n        return false;\n      })\n      .map((m) => {\n        if (this.isNetworkData(m.data)) {\n          return {\n            name: m.id || m.type,\n            value: Number(m.data.responseTime) || ZERO,\n            threshold: networkThreshold,\n          };\n        }\n        return { name: m.id || m.type, value: ZERO, threshold: networkThreshold };\n      })\n      .sort((a, b) => b.value - a.value)\n      .slice(ZERO, COUNT_FIVE);\n\n    // æ‰“åŒ…åˆ†æ\n    const bundleMetrics = metrics.filter((m) => m.type === 'bundle');\n    const bundleThreshold = this.config.bundle?.thresholds?.size || BYTES_PER_KB * BYTES_PER_KB;\n    const largestBundles = bundleMetrics\n      .filter((m) => {\n        if (this.isBundleData(m.data)) {\n          return (Number(m.data.size) || ZERO) > bundleThreshold;\n        }\n        return false;\n      })\n      .map((m) => {\n        if (this.isBundleData(m.data)) {\n          return {\n            name: m.id || m.type,\n            value: Number(m.data.size) || ZERO,\n            threshold: bundleThreshold,\n          };\n        }\n        return { name: m.id || m.type, value: ZERO, threshold: bundleThreshold };\n      })\n      .sort((a, b) => b.value - a.value)\n      .slice(ZERO, COUNT_FIVE);\n\n    return {\n      overview,\n      analysis: {\n        componentAnalysis: {\n          slowestComponents,\n          renderTimeDistribution: this.calculateDistribution(componentMetrics),\n          averageRenderTime:\n            componentMetrics.reduce((sum, m) => {\n              if (this.isComponentData(m.data)) {\n                return sum + (Number(m.data.renderTime) || ZERO);\n              }\n              return sum;\n            }, ZERO) / componentMetrics.length || ZERO,\n        },\n        networkAnalysis: {\n          slowestRequests,\n          responseTimeDistribution: this.calculateDistribution(networkMetrics),\n          averageResponseTime:\n            networkMetrics.reduce((sum, m) => {\n              if (this.isNetworkData(m.data)) {\n                return sum + (Number(m.data.responseTime) || ZERO);\n              }\n              return sum;\n            }, ZERO) / networkMetrics.length || ZERO,\n        },\n        bundleAnalysis: {\n          largestBundles,\n          sizeDistribution: this.calculateDistribution(bundleMetrics),\n          totalSize: bundleMetrics.reduce((sum, m) => {\n            if (this.isBundleData(m.data)) {\n              return sum + (Number(m.data.size) || ZERO);\n            }\n            return sum;\n          }, ZERO),\n        },\n      },\n      trends: {\n        componentTrend: this.calculateTrend(componentMetrics),\n        networkTrend: this.calculateTrend(networkMetrics),\n        bundleTrend: this.calculateTrend(bundleMetrics),\n      },\n    };\n  }\n\n  /**\n   * è®¡ç®—åˆ†å¸ƒ\n   * Calculate distribution\n   */\n  private calculateDistribution(\n    metrics: PerformanceMetrics[],\n  ): Record<string, number> {\n    const distribution: Record<string, number> = {};\n\n    metrics.forEach((metric) => {\n      const key = metric.id || metric.type;\n      distribution[key] = (distribution[key] || ZERO) + ONE;\n    });\n\n    return distribution;\n  }\n\n  /**\n   * è®¡ç®—è¶‹åŠ¿\n   * Calculate trend\n   */\n  private calculateTrend(\n    metrics: PerformanceMetrics[],\n  ): 'improving' | 'stable' | 'degrading' {\n    if (metrics.length < COUNT_PAIR) return 'stable';\n\n    // æŒ‰æ—¶é—´æ’åº\n    const sortedMetrics = metrics.sort((a, b) => a.timestamp - b.timestamp);\n    const midPoint = Math.floor(sortedMetrics.length / COUNT_PAIR);\n\n    const firstHalf = sortedMetrics.slice(ZERO, midPoint);\n    const secondHalf = sortedMetrics.slice(midPoint);\n\n    const firstAvg =\n      firstHalf.reduce((sum, m) => {\n        if (this.isComponentData(m.data)) {\n          return sum + (Number(m.data.renderTime) || ZERO);\n        } else if (this.isNetworkData(m.data)) {\n          return sum + (Number(m.data.responseTime) || ZERO);\n        } else if (this.isBundleData(m.data)) {\n          return sum + (Number(m.data.size) || ZERO);\n        }\n        return sum;\n      }, ZERO) / firstHalf.length;\n\n    const secondAvg =\n      secondHalf.reduce((sum, m) => {\n        if (this.isComponentData(m.data)) {\n          return sum + (Number(m.data.renderTime) || ZERO);\n        } else if (this.isNetworkData(m.data)) {\n          return sum + (Number(m.data.responseTime) || ZERO);\n        } else if (this.isBundleData(m.data)) {\n          return sum + (Number(m.data.size) || ZERO);\n        }\n        return sum;\n      }, ZERO) / secondHalf.length;\n\n    const changePercent = ((secondAvg - firstAvg) / firstAvg) * PERCENTAGE_FULL;\n\n    if (changePercent < -COUNT_FIVE) return 'improving'; // æ€§èƒ½æå‡\n    if (changePercent > COUNT_FIVE) return 'degrading'; // æ€§èƒ½ä¸‹é™\n    return 'stable'; // æ€§èƒ½ç¨³å®š\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   * Update configuration\n   */\n  updateConfig(newConfig: PerformanceConfig): void {\n    this.config = newConfig;\n  }\n}\n\n/**\n * åˆ›å»ºæŠ¥å‘Šç”Ÿæˆå™¨\n * Create report generator\n */\nexport function createReportGenerator(\n  config: PerformanceConfig,\n): PerformanceReportGenerator {\n  return new PerformanceReportGenerator(config);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-integrations-bundle.ts","messages":[{"ruleId":"no-shadow","severity":2,"message":"'chunks' is already declared in the upper scope on line 300 column 11.","line":325,"column":19,"nodeType":"Identifier","messageId":"noShadow","endLine":325,"endColumn":25},{"ruleId":"no-shadow","severity":2,"message":"'chunks' is already declared in the upper scope on line 300 column 11.","line":326,"column":22,"nodeType":"Identifier","messageId":"noShadow","endLine":326,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":356,"column":43,"nodeType":"MemberExpression","endLine":356,"endColumn":59},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":376,"column":23,"nodeType":"MemberExpression","endLine":376,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":451,"column":20,"nodeType":"MemberExpression","endLine":451,"endColumn":43}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Bundle Analyzer æ€§èƒ½ç›‘æ§é›†æˆ\n * Bundle Analyzer Performance Monitoring Integration\n *\n * æä¾›ä¸Bundle Analyzerå·¥å…·çš„é›†æˆé’©å­ï¼Œç”¨äºç›‘æ§æ‰“åŒ…å¤§å°å’Œä¼˜åŒ–\n */\n\nimport { KB, MB } from '@/constants/units';\nimport { ANIMATION_DURATION_SLOW, ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, MAGIC_0_8, MAGIC_8, MAGIC_512, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, PERCENTAGE_QUARTER, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport type {\n  PerformanceConfig,\n  PerformanceMetrics,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * Bundle Analyzer é›†æˆé’©å­è¿”å›ç±»å‹\n * Bundle Analyzer integration hook return type\n */\nexport interface BundleAnalyzerIntegration {\n  enabled: boolean;\n  recordBundleSize: (\n    bundleName: string,\n    size: number,\n    gzipSize?: number,\n  ) => void;\n  recordChunkInfo: (chunkName: string, size: number, modules: string[]) => void;\n  generateSizeReport: () => Record<string, unknown>;\n}\n\n/**\n * Bundle Analyzer é›†æˆé’©å­\n * Bundle Analyzer integration hook\n */\nexport function useBundleAnalyzerIntegration(\n  config: PerformanceConfig,\n  recordMetric: (metric: Omit<PerformanceMetrics, 'timestamp'>) => void,\n): BundleAnalyzerIntegration {\n  const bundleData = new Map<string, { size: number; gzipSize?: number }>();\n\n  return {\n    enabled: config.bundleAnalyzer.enabled,\n\n    recordBundleSize: (bundleName: string, size: number, gzipSize?: number) => {\n      if (!config.bundleAnalyzer.enabled) return;\n\n      bundleData.set(bundleName, {\n        size,\n        ...(gzipSize !== undefined && { gzipSize }),\n      });\n\n      recordMetric({\n        source: 'bundle-analyzer',\n        type: 'bundle',\n        data: {\n          bundleName,\n          size,\n          gzipSize,\n          timestamp: Date.now(),\n        },\n        tags: ['bundle-analyzer', 'bundle-size'],\n        priority: 'medium',\n      });\n    },\n\n    recordChunkInfo: (chunkName: string, size: number, modules: string[]) => {\n      if (!config.bundleAnalyzer.enabled) return;\n\n      recordMetric({\n        source: 'bundle-analyzer',\n        type: 'bundle',\n        data: {\n          chunkName,\n          size,\n          moduleCount: modules.length,\n          modules: modules.slice(ZERO, COUNT_TEN), // åªè®°å½•å‰COUNT_TENä¸ªæ¨¡å—\n          timestamp: Date.now(),\n        },\n        tags: ['bundle-analyzer', 'chunk-info'],\n        priority: 'low',\n      });\n    },\n\n    generateSizeReport: () => {\n      return Object.fromEntries(bundleData);\n    },\n  };\n}\n\n/**\n * Bundle Analyzer é…ç½®éªŒè¯\n * Bundle Analyzer configuration validation\n */\nexport function validateBundleAnalyzerConfig(config: PerformanceConfig): {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n} {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!config.bundleAnalyzer) {\n    errors.push('Bundle Analyzer configuration is missing');\n    return { isValid: false, errors, warnings };\n  }\n\n  if (typeof config.bundleAnalyzer.enabled !== 'boolean') {\n    errors.push('Bundle Analyzer enabled must be a boolean');\n  }\n\n  if (config.bundleAnalyzer.enabled) {\n    if (\n      config.bundleAnalyzer.port &&\n      (typeof config.bundleAnalyzer.port !== 'number' ||\n        config.bundleAnalyzer.port <= ZERO)\n    ) {\n      warnings.push('Bundle Analyzer port should be a positive number');\n    }\n\n    if (\n      config.bundleAnalyzer.reportDir &&\n      typeof config.bundleAnalyzer.reportDir !== 'string'\n    ) {\n      warnings.push('Bundle Analyzer reportDir should be a string');\n    }\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\n/**\n * Bundle Analyzer æ€§èƒ½åˆ†æå™¨\n * Bundle Analyzer performance analyzer\n */\nexport class BundleAnalyzerAnalyzer {\n  private bundles = new Map<\n    string,\n    {\n      size: number;\n      gzipSize?: number;\n      timestamp: number;\n    }\n  >();\n\n  private chunks = new Map<\n    string,\n    {\n      size: number;\n      modules: string[];\n      timestamp: number;\n    }\n  >();\n\n  private config: PerformanceConfig;\n\n  constructor(config: PerformanceConfig) {\n    this.config = config;\n  }\n\n  /**\n   * è®°å½•Bundleå¤§å°\n   * Record bundle size\n   */\n  recordBundleSize(bundleName: string, size: number, gzipSize?: number): void {\n    if (!this.config.bundleAnalyzer.enabled) return;\n\n    this.bundles.set(bundleName, {\n      size,\n      ...(gzipSize !== undefined && { gzipSize }),\n      timestamp: Date.now(),\n    });\n\n    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡å¤§å°é™åˆ¶ (ä½¿ç”¨bundleé…ç½®çš„é˜ˆå€¼)\n    const maxSize = this.config.bundle?.thresholds?.size || MB; // 1MB\n    if (size > maxSize) {\n      logger.warn(`Bundle ${bundleName} exceeds size limit`, {\n        size: this.formatSize(size),\n        maxSize: this.formatSize(maxSize),\n      });\n    }\n  }\n\n  /**\n   * è®°å½•Chunkä¿¡æ¯\n   * Record chunk information\n   */\n  recordChunkInfo(chunkName: string, size: number, modules: string[]): void {\n    if (!this.config.bundleAnalyzer.enabled) return;\n\n    this.chunks.set(chunkName, {\n      size,\n      modules,\n      timestamp: Date.now(),\n    });\n\n    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡å¤§å°é™åˆ¶ (ä½¿ç”¨bundleé…ç½®çš„é˜ˆå€¼)\n    const maxSize = this.config.bundle?.thresholds?.size || MAGIC_512 * KB; // 512KB\n    if (size > maxSize) {\n      logger.warn(`Chunk ${chunkName} exceeds size limit`, {\n        size: this.formatSize(size),\n        maxSize: this.formatSize(maxSize),\n      });\n    }\n  }\n\n  /**\n   * ç”ŸæˆBundleåˆ†ææŠ¥å‘Š\n   * Generate bundle analysis report\n   */\n  generateBundleReport(): {\n    totalBundles: number;\n    totalSize: number;\n    totalGzipSize: number;\n    largestBundles: Array<{\n      name: string;\n      size: number;\n      gzipSize?: number;\n      compressionRatio?: number;\n    }>;\n    recommendations: string[];\n  } {\n    const bundles = Array.from(this.bundles.entries());\n    const totalSize = bundles.reduce((sum, [, bundle]) => sum + bundle.size, ZERO);\n    const totalGzipSize = bundles.reduce(\n      (sum, [, bundle]) => sum + (bundle.gzipSize || ZERO),\n      ZERO,\n    );\n\n    const largestBundles = bundles\n      .map(([name, bundle]) => ({\n        name,\n        size: bundle.size,\n        ...(bundle.gzipSize !== undefined && { gzipSize: bundle.gzipSize }),\n        ...(bundle.gzipSize !== undefined && {\n          compressionRatio: bundle.gzipSize / bundle.size,\n        }),\n      }))\n      .sort((a, b) => b.size - a.size)\n      .slice(ZERO, COUNT_TEN);\n\n    const recommendations: string[] = [];\n\n    // ç”Ÿæˆä¼˜åŒ–å»ºè®®\n    if (totalSize > COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB) {\n      // 5MB\n      recommendations.push(\n        'Total bundle size is large. Consider code splitting and lazy loading.',\n      );\n    }\n\n    const largeBundles = largestBundles.filter((b) => b.size > BYTES_PER_KB * BYTES_PER_KB); // 1MB\n    if (largeBundles.length > ZERO) {\n      recommendations.push(\n        `${largeBundles.length} bundles are larger than 1MB. Consider splitting them.`,\n      );\n    }\n\n    const poorCompressionBundles = largestBundles.filter(\n      (b) => b.compressionRatio && b.compressionRatio > MAGIC_0_8,\n    );\n    if (poorCompressionBundles.length > ZERO) {\n      recommendations.push(\n        `${poorCompressionBundles.length} bundles have poor compression ratios. Check for duplicate code.`,\n      );\n    }\n\n    return {\n      totalBundles: bundles.length,\n      totalSize,\n      totalGzipSize,\n      largestBundles,\n      recommendations,\n    };\n  }\n\n  /**\n   * ç”ŸæˆChunkåˆ†ææŠ¥å‘Š\n   * Generate chunk analysis report\n   */\n  generateChunkReport(): {\n    totalChunks: number;\n    totalSize: number;\n    largestChunks: Array<{\n      name: string;\n      size: number;\n      moduleCount: number;\n      topModules: string[];\n    }>;\n    duplicateModules: Array<{\n      module: string;\n      chunks: string[];\n      totalSize: number;\n    }>;\n  } {\n    const chunks = Array.from(this.chunks.entries());\n    const totalSize = chunks.reduce((sum, [, chunk]) => sum + chunk.size, ZERO);\n\n    const largestChunks = chunks\n      .map(([name, chunk]) => ({\n        name,\n        size: chunk.size,\n        moduleCount: chunk.modules.length,\n        topModules: chunk.modules.slice(ZERO, COUNT_FIVE),\n      }))\n      .sort((a, b) => b.size - a.size)\n      .slice(ZERO, COUNT_TEN);\n\n    // æŸ¥æ‰¾é‡å¤æ¨¡å—\n    const moduleChunkMap = new Map<string, string[]>();\n    chunks.forEach(([chunkName, chunk]) => {\n      chunk.modules.forEach((module) => {\n        if (!moduleChunkMap.has(module)) {\n          moduleChunkMap.set(module, []);\n        }\n        moduleChunkMap.get(module)!.push(chunkName);\n      });\n    });\n\n    const duplicateModules = Array.from(moduleChunkMap.entries())\n      .filter(([, chunks]) => chunks.length > ONE)\n      .map(([module, chunks]) => ({\n        module,\n        chunks,\n        totalSize: chunks.length * ANIMATION_DURATION_VERY_SLOW, // ä¼°ç®—å¤§å°\n      }))\n      .sort((a, b) => b.totalSize - a.totalSize)\n      .slice(ZERO, COUNT_TEN);\n\n    return {\n      totalChunks: chunks.length,\n      totalSize,\n      largestChunks,\n      duplicateModules,\n    };\n  }\n\n  /**\n   * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n   * Format file size\n   */\n  private formatSize(bytes: number): string {\n    const units = ['B', 'KB', 'MB', 'GB'];\n    let size = bytes;\n    let unitIndex = ZERO;\n\n    while (size >= BYTES_PER_KB && unitIndex < units.length - ONE) {\n      size /= BYTES_PER_KB;\n      unitIndex += ONE;\n    }\n\n    return `${size.toFixed(COUNT_PAIR)} ${units[unitIndex]}`;\n  }\n\n  /**\n   * è·å–ä¼˜åŒ–å»ºè®®\n   * Get optimization suggestions\n   */\n  getOptimizationSuggestions(): string[] {\n    const suggestions: string[] = [];\n    const bundleReport = this.generateBundleReport();\n    const chunkReport = this.generateChunkReport();\n\n    // Bundleä¼˜åŒ–å»ºè®®\n    if (bundleReport.totalSize > COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB) {\n      suggestions.push(\n        'Consider implementing code splitting to reduce initial bundle size',\n      );\n    }\n\n    if (bundleReport.largestBundles.length > ZERO) {\n      const largest = bundleReport.largestBundles[ZERO];\n      if (largest && largest.size > COUNT_PAIR * BYTES_PER_KB * BYTES_PER_KB) {\n        suggestions.push(\n          `Bundle \"${largest.name}\" is very large (${this.formatSize(largest.size)}). Consider splitting it.`,\n        );\n      }\n    }\n\n    // Chunkä¼˜åŒ–å»ºè®®\n    if (chunkReport.duplicateModules.length > ZERO) {\n      suggestions.push(\n        `Found ${chunkReport.duplicateModules.length} duplicate modules. Consider creating shared chunks.`,\n      );\n    }\n\n    if (chunkReport.totalChunks > PERCENTAGE_HALF) {\n      suggestions.push(\n        'Large number of chunks detected. Consider consolidating smaller chunks.',\n      );\n    }\n\n    return suggestions;\n  }\n\n  /**\n   * é‡ç½®æ‰€æœ‰æ•°æ®\n   * Reset all data\n   */\n  reset(): void {\n    this.bundles.clear();\n    this.chunks.clear();\n  }\n}\n\n/**\n * Bundle Analyzer å·¥å…·å‡½æ•°\n * Bundle Analyzer utility functions\n */\nexport const BundleAnalyzerUtils = {\n  /**\n   * è®¡ç®—å‹ç¼©æ¯”\n   * Calculate compression ratio\n   */\n  calculateCompressionRatio(\n    originalSize: number,\n    compressedSize: number,\n  ): number {\n    return compressedSize / originalSize;\n  },\n\n  /**\n   * è·å–å¤§å°ç­‰çº§\n   * Get size rating\n   */\n  getSizeRating(size: number): 'small' | 'medium' | 'large' | 'huge' {\n    if (size < PERCENTAGE_FULL * BYTES_PER_KB) return 'small'; // < 100KB\n    if (size < ANIMATION_DURATION_SLOW * BYTES_PER_KB) return 'medium'; // < 500KB\n    if (size < BYTES_PER_KB * BYTES_PER_KB) return 'large'; // < 1MB\n    return 'huge'; // >= 1MB\n  },\n\n  /**\n   * ä¼°ç®—åŠ è½½æ—¶é—´\n   * Estimate loading time\n   */\n  estimateLoadingTime(\n    size: number,\n    connectionSpeed: 'slow' | 'fast' | 'average' = 'average',\n  ): number {\n    const speeds = {\n      slow: (BYTES_PER_KB * BYTES_PER_KB) / MAGIC_8, // 1 Mbps in bytes per second\n      average: (COUNT_FIVE * BYTES_PER_KB * BYTES_PER_KB) / MAGIC_8, // COUNT_FIVE Mbps\n      fast: (PERCENTAGE_QUARTER * BYTES_PER_KB * BYTES_PER_KB) / MAGIC_8, // PERCENTAGE_QUARTER Mbps\n    };\n\n    return (size / speeds[connectionSpeed]) * ANIMATION_DURATION_VERY_SLOW; // Return in milliseconds\n  },\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-integrations-react-scan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-integrations-vitals.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-types' import is duplicated.","line":14,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":17,"endColumn":45},{"ruleId":"max-statements","severity":2,"message":"Function 'checkEnvironmentCompatibility' has too many statements (30). Maximum allowed is 20.","line":100,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":164,"endColumn":2},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":151,"column":10,"nodeType":"MemberExpression","endLine":151,"endColumn":29},{"ruleId":"max-statements","severity":2,"message":"Function 'performHealthCheck' has too many statements (26). Maximum allowed is 20.","line":170,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":231,"endColumn":2},{"ruleId":"complexity","severity":2,"message":"Function 'validateWebVitalsConfig' has a complexity of 16. Maximum allowed is 15.","line":237,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":290,"endColumn":2},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":261,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":266,"endColumn":10},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":268,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":273,"endColumn":10},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":275,"column":9,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":280,"endColumn":10},{"ruleId":"max-statements","severity":2,"message":"Method 'getWebVitalsReport' has too many statements (28). Maximum allowed is 20.","line":379,"column":21,"nodeType":"FunctionExpression","messageId":"exceed","endLine":466,"endColumn":4},{"ruleId":"complexity","severity":2,"message":"Method 'getWebVitalsReport' has a complexity of 16. Maximum allowed is 15.","line":379,"column":21,"nodeType":"FunctionExpression","messageId":"complex","endLine":466,"endColumn":4},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":423,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":424,"endColumn":74},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":428,"column":7,"nodeType":"MemberExpression","endLine":428,"endColumn":19}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_PAIR, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, ZERO, MAGIC_0_9, MAGIC_1_1, OFFSET_NEGATIVE_MEDIUM, OFFSET_NEGATIVE_LARGE, OFFSET_NEGATIVE_EXTRA_LARGE } from '@/constants';\n\n/**\n * Web Vitals å’Œç¯å¢ƒæ£€æŸ¥æ€§èƒ½ç›‘æ§é›†æˆ\n * Web Vitals and Environment Check Performance Monitoring Integration\n *\n * æä¾›ä¸Web Vitalså·¥å…·çš„é›†æˆé’©å­å’Œç¯å¢ƒå…¼å®¹æ€§æ£€æŸ¥åŠŸèƒ½\n */\n\nimport type {\n  PerformanceConfig,\n  PerformanceMetrics,\n} from '@/lib/performance-monitoring-types';\nimport {\n  isDevelopmentEnvironment,\n  isTestEnvironment,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * Web Vitals é›†æˆé’©å­è¿”å›ç±»å‹\n * Web Vitals integration hook return type\n */\nexport interface WebVitalsIntegration {\n  enabled: boolean;\n  recordWebVital: (\n    name: string,\n    value: number,\n    rating: 'good' | 'needs-improvement' | 'poor',\n  ) => void;\n  recordCustomMetric: (name: string, value: number, unit?: string) => void;\n}\n\n/**\n * Web Vitals é›†æˆé’©å­\n * Web Vitals integration hook\n */\nexport function useWebVitalsIntegration(\n  config: PerformanceConfig,\n  recordMetric: (metric: Omit<PerformanceMetrics, 'timestamp'>) => void,\n): WebVitalsIntegration {\n  return {\n    enabled: config.webVitals?.enabled || false,\n\n    recordWebVital: (\n      name: string,\n      value: number,\n      rating: 'good' | 'needs-improvement' | 'poor',\n    ) => {\n      if (!config.webVitals?.enabled) return;\n\n      recordMetric({\n        source: 'web-vitals',\n        type: 'page',\n        data: {\n          name,\n          value,\n          rating,\n          timestamp: Date.now(),\n        },\n        tags: ['web-vitals', name.toLowerCase()],\n        priority: rating === 'poor' ? 'high' : 'medium',\n      });\n    },\n\n    recordCustomMetric: (name: string, value: number, unit = 'ms') => {\n      if (!config.webVitals?.enabled) return;\n\n      recordMetric({\n        source: 'custom',\n        type: 'page',\n        data: {\n          name,\n          value,\n          unit,\n          timestamp: Date.now(),\n        },\n        tags: ['custom-metric'],\n        priority: 'low',\n      });\n    },\n  };\n}\n\n/**\n * ç¯å¢ƒå…¼å®¹æ€§æ£€æŸ¥ç»“æœ\n * Environment compatibility check result\n */\nexport interface EnvironmentCompatibilityResult {\n  isCompatible: boolean;\n  issues: string[];\n  recommendations: string[];\n  environment: string;\n  warnings: string[];\n}\n\n/**\n * ç¯å¢ƒå…¼å®¹æ€§æ£€æŸ¥\n * Environment compatibility check\n */\nexport function checkEnvironmentCompatibility(): EnvironmentCompatibilityResult {\n  const issues: string[] = [];\n  const recommendations: string[] = [];\n  const warnings: string[] = [];\n  const environment = process.env.NODE_ENV || 'development';\n\n  // æ£€æŸ¥æµ‹è¯•ç¯å¢ƒé…ç½®\n  if (isTestEnvironment()) {\n    if (process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN !== 'true') {\n      issues.push('æµ‹è¯•ç¯å¢ƒä¸­ React Scan æœªè¢«ç¦ç”¨');\n      recommendations.push('è®¾ç½® NEXT_PUBLIC_DISABLE_REACT_SCAN=true');\n    }\n\n    if (process.env.NEXT_PUBLIC_ENABLE_WEB_EVAL_AGENT !== 'true') {\n      warnings.push('æµ‹è¯•ç¯å¢ƒä¸­ Web Eval Agent æœªå¯ç”¨');\n      recommendations.push('è€ƒè™‘è®¾ç½® NEXT_PUBLIC_ENABLE_WEB_EVAL_AGENT=true');\n    }\n  }\n\n  // æ£€æŸ¥å¼€å‘ç¯å¢ƒé…ç½®\n  if (isDevelopmentEnvironment()) {\n    if (process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN === 'true') {\n      warnings.push('å¼€å‘ç¯å¢ƒä¸­ React Scan è¢«ç¦ç”¨');\n      recommendations.push('è€ƒè™‘å¯ç”¨ React Scan ä»¥è·å¾—æ€§èƒ½ç›‘æ§');\n    }\n\n    if (!process.env.ANALYZE && process.env.NODE_ENV === 'development') {\n      recommendations.push(\n        'è€ƒè™‘å®šæœŸè¿è¡Œ ANALYZE=true npm run build æ¥åˆ†æåŒ…å¤§å°',\n      );\n    }\n  }\n\n  // æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒé…ç½®\n  if (environment === 'production') {\n    if (process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN !== 'true') {\n      issues.push('ç”Ÿäº§ç¯å¢ƒä¸­ React Scan æœªè¢«ç¦ç”¨');\n      recommendations.push(\n        'åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½® NEXT_PUBLIC_DISABLE_REACT_SCAN=true',\n      );\n    }\n\n    if (process.env.ANALYZE === 'true') {\n      warnings.push('ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨äº† Bundle Analyzer');\n      recommendations.push('ç”Ÿäº§ç¯å¢ƒä¸­åº”ç¦ç”¨ Bundle Analyzer');\n    }\n  }\n\n  // æ£€æŸ¥å¿…è¦çš„ç¯å¢ƒå˜é‡\n  const requiredEnvVars = ['NODE_ENV'];\n  for (const envVar of requiredEnvVars) {\n    if (!process.env[envVar]) {\n      issues.push(`ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡: ${envVar}`);\n      recommendations.push(`è®¾ç½®ç¯å¢ƒå˜é‡ ${envVar}`);\n    }\n  }\n\n  return {\n    isCompatible: issues.length === ZERO,\n    issues,\n    recommendations,\n    environment,\n    warnings,\n  };\n}\n\n/**\n * æ€§èƒ½ç›‘æ§å¥åº·æ£€æŸ¥\n * Performance monitoring health check\n */\nexport function performHealthCheck(config: PerformanceConfig): {\n  isHealthy: boolean;\n  status: Record<string, 'healthy' | 'warning' | 'error'>;\n  details: Record<string, string>;\n} {\n  const status: Record<string, 'healthy' | 'warning' | 'error'> = {};\n  const details: Record<string, string> = {};\n\n  // æ£€æŸ¥ React Scan çŠ¶æ€\n  if (config.reactScan.enabled) {\n    if (isTestEnvironment()) {\n      status.reactScan = 'error';\n      details.reactScan = 'React Scan should be disabled in test environment';\n    } else if (isDevelopmentEnvironment()) {\n      status.reactScan = 'healthy';\n      details.reactScan = 'React Scan is properly configured for development';\n    } else {\n      status.reactScan = 'warning';\n      details.reactScan =\n        'React Scan is enabled in non-development environment';\n    }\n  } else {\n    status.reactScan = 'healthy';\n    details.reactScan = 'React Scan is disabled';\n  }\n\n  // æ£€æŸ¥ Web Eval Agent çŠ¶æ€\n  if (config.webEvalAgent.enabled) {\n    if (isTestEnvironment()) {\n      status.webEvalAgent = 'healthy';\n      details.webEvalAgent =\n        'Web Eval Agent is properly configured for testing';\n    } else {\n      status.webEvalAgent = 'warning';\n      details.webEvalAgent =\n        'Web Eval Agent is enabled outside test environment';\n    }\n  } else {\n    status.webEvalAgent = 'healthy';\n    details.webEvalAgent = 'Web Eval Agent is disabled';\n  }\n\n  // æ£€æŸ¥ Bundle Analyzer çŠ¶æ€\n  status.bundleAnalyzer = config.bundleAnalyzer.enabled ? 'healthy' : 'healthy';\n  details.bundleAnalyzer = config.bundleAnalyzer.enabled\n    ? 'Bundle Analyzer is enabled'\n    : 'Bundle Analyzer is disabled';\n\n  // æ£€æŸ¥ Size Limit çŠ¶æ€\n  status.sizeLimit = config.sizeLimit.enabled ? 'healthy' : 'warning';\n  details.sizeLimit = config.sizeLimit.enabled\n    ? 'Size Limit monitoring is active'\n    : 'Size Limit monitoring is disabled';\n\n  const isHealthy = Object.values(status).every((s) => s !== 'error');\n\n  return {\n    isHealthy,\n    status,\n    details,\n  };\n}\n\n/**\n * Web Vitals é…ç½®éªŒè¯\n * Web Vitals configuration validation\n */\nexport function validateWebVitalsConfig(config: PerformanceConfig): {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n} {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (config.webVitals) {\n    if (typeof config.webVitals.enabled !== 'boolean') {\n      errors.push('Web Vitals enabled must be a boolean');\n    }\n\n    if (config.webVitals.enabled) {\n      if (\n        config.webVitals.reportAllChanges &&\n        typeof config.webVitals.reportAllChanges !== 'boolean'\n      ) {\n        warnings.push('Web Vitals reportAllChanges should be a boolean');\n      }\n\n      if (config.webVitals.thresholds) {\n        const {thresholds} = config.webVitals;\n\n        if (\n          thresholds.lcp &&\n          (typeof thresholds.lcp !== 'number' || thresholds.lcp <= ZERO)\n        ) {\n          warnings.push('Web Vitals LCP threshold should be a positive number');\n        }\n\n        if (\n          thresholds.fid &&\n          (typeof thresholds.fid !== 'number' || thresholds.fid <= ZERO)\n        ) {\n          warnings.push('Web Vitals FID threshold should be a positive number');\n        }\n\n        if (\n          thresholds.cls &&\n          (typeof thresholds.cls !== 'number' || thresholds.cls <= ZERO)\n        ) {\n          warnings.push('Web Vitals CLS threshold should be a positive number');\n        }\n      }\n    }\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\n/**\n * Web Vitals æ€§èƒ½åˆ†æå™¨\n * Web Vitals performance analyzer\n */\nexport class WebVitalsAnalyzer {\n  private vitals = new Map<\n    string,\n    {\n      values: number[];\n      ratings: Array<'good' | 'needs-improvement' | 'poor'>;\n      lastUpdated: number;\n    }\n  >();\n\n  private customMetrics = new Map<\n    string,\n    {\n      values: number[];\n      unit: string;\n      lastUpdated: number;\n    }\n  >();\n\n  private config: PerformanceConfig;\n\n  constructor(config: PerformanceConfig) {\n    this.config = config;\n  }\n\n  /**\n   * è®°å½•Web VitalæŒ‡æ ‡\n   * Record Web Vital metric\n   */\n  recordWebVital(\n    name: string,\n    value: number,\n    rating: 'good' | 'needs-improvement' | 'poor',\n  ): void {\n    if (!this.config.webVitals?.enabled) return;\n\n    const current = this.vitals.get(name) || {\n      values: [],\n      ratings: [],\n      lastUpdated: ZERO,\n    };\n\n    current.values.push(value);\n    current.ratings.push(rating);\n    current.lastUpdated = Date.now();\n\n    this.vitals.set(name, current);\n\n    // ä¿æŒæ•°ç»„å¤§å°åœ¨åˆç†èŒƒå›´å†…\n    if (current.values.length > PERCENTAGE_FULL) {\n      current.values = current.values.slice(OFFSET_NEGATIVE_EXTRA_LARGE);\n      current.ratings = current.ratings.slice(OFFSET_NEGATIVE_EXTRA_LARGE);\n    }\n  }\n\n  /**\n   * è®°å½•è‡ªå®šä¹‰æŒ‡æ ‡\n   * Record custom metric\n   */\n  recordCustomMetric(name: string, value: number, unit = 'ms'): void {\n    if (!this.config.webVitals?.enabled) return;\n\n    const current = this.customMetrics.get(name) || {\n      values: [],\n      unit,\n      lastUpdated: ZERO,\n    };\n\n    current.values.push(value);\n    current.lastUpdated = Date.now();\n\n    this.customMetrics.set(name, current);\n\n    // ä¿æŒæ•°ç»„å¤§å°åœ¨åˆç†èŒƒå›´å†…\n    if (current.values.length > PERCENTAGE_FULL) {\n      current.values = current.values.slice(OFFSET_NEGATIVE_EXTRA_LARGE);\n    }\n  }\n\n  /**\n   * è·å–Web VitalsæŠ¥å‘Š\n   * Get Web Vitals report\n   */\n  getWebVitalsReport(): {\n    vitals: Record<\n      string,\n      {\n        average: number;\n        latest: number;\n        trend: 'improving' | 'stable' | 'degrading';\n        rating: 'good' | 'needs-improvement' | 'poor';\n      }\n    >;\n    score: number;\n    recommendations: string[];\n  } {\n    const vitals: Record<\n      string,\n      {\n        average: number;\n        latest: number;\n        trend: 'improving' | 'stable' | 'degrading';\n        rating: 'good' | 'needs-improvement' | 'poor';\n      }\n    > = {};\n    let totalScore = ZERO;\n    let vitalCount = ZERO;\n\n    for (const [name, data] of this.vitals.entries()) {\n      if (data.values.length === ZERO) continue;\n\n      const average =\n        data.values.reduce((sum, val) => sum + val, ZERO) / data.values.length;\n      const latest = data.values[data.values.length - ONE] ?? ZERO;\n      const latestRating = data.ratings[data.ratings.length - ONE] ?? 'poor';\n\n      // è®¡ç®—è¶‹åŠ¿\n      let trend: 'improving' | 'stable' | 'degrading' = 'stable';\n      if (data.values.length >= COUNT_PAIR) {\n        const recent = data.values.slice(OFFSET_NEGATIVE_MEDIUM);\n        const older = data.values.slice(OFFSET_NEGATIVE_LARGE, OFFSET_NEGATIVE_MEDIUM);\n        if (recent.length > ZERO && older.length > ZERO) {\n          const recentAvg =\n            recent.reduce((sum, val) => sum + val, ZERO) / recent.length;\n          const olderAvg =\n            older.reduce((sum, val) => sum + val, ZERO) / older.length;\n\n          if (recentAvg < olderAvg * MAGIC_0_9) trend = 'improving';\n          else if (recentAvg > olderAvg * MAGIC_1_1) trend = 'degrading';\n        }\n      }\n\n      vitals[name] = {\n        average,\n        latest,\n        trend,\n        rating: latestRating,\n      };\n\n      // è®¡ç®—åˆ†æ•°\n      const ratingScore =\n        latestRating === 'good'\n          ? PERCENTAGE_FULL\n          : latestRating === 'needs-improvement'\n            ? PERCENTAGE_HALF\n            : ZERO;\n      totalScore += ratingScore;\n      vitalCount += ONE;\n    }\n\n    const score = vitalCount > ZERO ? totalScore / vitalCount : ZERO;\n\n    // ç”Ÿæˆå»ºè®®\n    const recommendations: string[] = [];\n    for (const [name, data] of Object.entries(vitals)) {\n      if (data.rating === 'poor') {\n        recommendations.push(\n          `${name} needs improvement (current: ${data.latest.toFixed(COUNT_PAIR)})`,\n        );\n      }\n      if (data.trend === 'degrading') {\n        recommendations.push(`${name} performance is degrading over time`);\n      }\n    }\n\n    return {\n      vitals,\n      score,\n      recommendations,\n    };\n  }\n\n  /**\n   * é‡ç½®æ‰€æœ‰æ•°æ®\n   * Reset all data\n   */\n  reset(): void {\n    this.vitals.clear();\n    this.customMetrics.clear();\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-integrations-web-eval.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function has too many parameters (4). Maximum allowed is 3.","line":15,"column":26,"nodeType":"TSFunctionType","messageId":"exceed","endLine":15,"endColumn":26},{"ruleId":"max-params","severity":2,"message":"Function has too many parameters (5). Maximum allowed is 3.","line":21,"column":25,"nodeType":"TSFunctionType","messageId":"exceed","endLine":21,"endColumn":25},{"ruleId":"max-params","severity":2,"message":"Method 'recordUserInteraction' has too many parameters (4). Maximum allowed is 3.","line":43,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":43,"endColumn":28},{"ruleId":"max-params","severity":2,"message":"Method 'recordNetworkRequest' has too many parameters (5). Maximum allowed is 3.","line":66,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":66,"endColumn":27},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 200.","line":85,"column":32,"nodeType":"Literal","messageId":"noMagic","endLine":85,"endColumn":35},{"ruleId":"max-params","severity":2,"message":"Method 'recordInteraction' has too many parameters (4). Maximum allowed is 3.","line":226,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":226,"endColumn":20},{"ruleId":"max-params","severity":2,"message":"Method 'recordNetworkRequest' has too many parameters (5). Maximum allowed is 3.","line":262,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":262,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":377,"column":29,"nodeType":"MemberExpression","endLine":377,"endColumn":49}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { logger } from '@/lib/logger';\nimport { ANIMATION_DURATION_NORMAL, ANIMATION_DURATION_VERY_SLOW, COUNT_TEN, HTTP_BAD_REQUEST_CONST, HTTP_OK_CONST, ONE, PERCENTAGE_FULL, ZERO, OFFSET_NEGATIVE_EXTRA_LARGE, OFFSET_NEGATIVE_MASSIVE, MAGIC_0_9 } from '@/constants';\n\nimport type {\n  PerformanceConfig,\n  PerformanceMetrics,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * Web Eval Agent é›†æˆé’©å­è¿”å›ç±»å‹\n * Web Eval Agent integration hook return type\n */\nexport interface WebEvalAgentIntegration {\n  enabled: boolean;\n  recordUserInteraction: (\n    action: string,\n    timing: number,\n    success: boolean,\n    details?: Record<string, unknown>,\n  ) => void;\n  recordNetworkRequest: (\n    url: string,\n    method: string,\n    status: number,\n    timing: number,\n    size?: number,\n  ) => void;\n  recordPageLoad: (url: string, timing: Record<string, number>) => void;\n  recordError: (error: Error, context?: Record<string, unknown>) => void;\n}\n\n/**\n * Web Eval Agent é›†æˆé’©å­\n * Web Eval Agent integration hook\n */\nexport function useWebEvalAgentIntegration(\n  config: PerformanceConfig,\n  recordMetric: (metric: Omit<PerformanceMetrics, 'timestamp'>) => void,\n): WebEvalAgentIntegration {\n  return {\n    enabled: config.webEvalAgent.enabled,\n\n    recordUserInteraction: (\n      action: string,\n      timing: number,\n      success: boolean,\n      details = {},\n    ) => {\n      if (!config.webEvalAgent.enabled) return;\n\n      recordMetric({\n        source: 'web-eval-agent',\n        type: 'user-interaction',\n        data: {\n          action,\n          timing,\n          success,\n          ...details,\n          timestamp: Date.now(),\n        },\n        tags: ['web-eval-agent', 'user-interaction'],\n        priority: success ? 'medium' : 'high',\n      });\n    },\n\n    recordNetworkRequest: (\n      url: string,\n      method: string,\n      status: number,\n      timing: number,\n      size = ZERO,\n    ) => {\n      if (!config.webEvalAgent.enabled || !config.webEvalAgent.captureNetwork)\n        return;\n\n      recordMetric({\n        source: 'web-eval-agent',\n        type: 'network',\n        data: {\n          url,\n          method,\n          status,\n          timing,\n          size,\n          isSuccess: status >= 200 && status < ANIMATION_DURATION_NORMAL,\n          timestamp: Date.now(),\n        },\n        tags: ['web-eval-agent', 'network-request'],\n        priority: timing > 1000 ? 'high' : 'medium',\n      });\n    },\n\n    recordPageLoad: (url: string, timing: Record<string, number>) => {\n      if (!config.webEvalAgent.enabled) return;\n\n      recordMetric({\n        source: 'web-eval-agent',\n        type: 'page',\n        data: {\n          url,\n          ...timing,\n          timestamp: Date.now(),\n        },\n        tags: ['web-eval-agent', 'page-load'],\n        priority: 'medium',\n      });\n    },\n\n    recordError: (error: Error, context = {}) => {\n      if (!config.webEvalAgent.enabled || !config.webEvalAgent.captureLogs)\n        return;\n\n      recordMetric({\n        source: 'web-eval-agent',\n        type: 'user-interaction',\n        data: {\n          error: {\n            name: error.name,\n            message: error.message,\n            stack: error.stack,\n          },\n          context,\n          timestamp: Date.now(),\n        },\n        tags: ['web-eval-agent', 'error'],\n        priority: 'critical',\n      });\n    },\n  };\n}\n\n/**\n * Web Eval Agent é…ç½®éªŒè¯\n * Web Eval Agent configuration validation\n */\nexport function validateWebEvalAgentConfig(config: PerformanceConfig): {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n} {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!config.webEvalAgent) {\n    errors.push('Web Eval Agent configuration is missing');\n    return { isValid: false, errors, warnings };\n  }\n\n  if (typeof config.webEvalAgent.enabled !== 'boolean') {\n    errors.push('Web Eval Agent enabled must be a boolean');\n  }\n\n  if (config.webEvalAgent.enabled) {\n    if (typeof config.webEvalAgent.captureNetwork !== 'boolean') {\n      warnings.push('Web Eval Agent captureNetwork should be a boolean');\n    }\n\n    if (typeof config.webEvalAgent.captureLogs !== 'boolean') {\n      warnings.push('Web Eval Agent captureLogs should be a boolean');\n    }\n\n    if (\n      config.webEvalAgent.maxInteractionsPerSession &&\n      (typeof config.webEvalAgent.maxInteractionsPerSession !== 'number' ||\n        config.webEvalAgent.maxInteractionsPerSession <= ZERO)\n    ) {\n      warnings.push(\n        'Web Eval Agent maxInteractionsPerSession should be a positive number',\n      );\n    }\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\n/**\n * Web Eval Agent æ€§èƒ½åˆ†æå™¨\n * Web Eval Agent performance analyzer\n */\nexport class WebEvalAgentAnalyzer {\n  private interactions = new Map<\n    string,\n    {\n      count: number;\n      totalTime: number;\n      successCount: number;\n      lastInteraction: number;\n    }\n  >();\n\n  private networkRequests: Array<{\n    url: string;\n    method: string;\n    status: number;\n    timing: number;\n    size: number;\n    timestamp: number;\n  }> = [];\n\n  private pageLoads: Array<{\n    url: string;\n    timing: Record<string, number>;\n    timestamp: number;\n  }> = [];\n\n  private errors: Array<{\n    error: Error;\n    context: Record<string, unknown>;\n    timestamp: number;\n  }> = [];\n\n  private config: PerformanceConfig;\n\n  constructor(config: PerformanceConfig) {\n    this.config = config;\n  }\n\n  /**\n   * è®°å½•ç”¨æˆ·äº¤äº’\n   * Record user interaction\n   */\n  recordInteraction(\n    action: string,\n    timing: number,\n    success: boolean,\n    _details?: Record<string, unknown>,\n  ): void {\n    if (!this.config.webEvalAgent.enabled) return;\n\n    const current = this.interactions.get(action) || {\n      count: ZERO,\n      totalTime: ZERO,\n      successCount: ZERO,\n      lastInteraction: ZERO,\n    };\n\n    current.count += ONE;\n    current.totalTime += timing;\n    if (success) current.successCount += ONE;\n    current.lastInteraction = Date.now();\n\n    this.interactions.set(action, current);\n\n    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¼šè¯é™åˆ¶\n    const maxInteractions =\n      this.config.webEvalAgent.maxInteractionsPerSession || ANIMATION_DURATION_VERY_SLOW;\n    if (current.count > maxInteractions) {\n      logger.warn(`Interaction ${action} has exceeded session limit`, {\n        maxInteractions,\n      });\n    }\n  }\n\n  /**\n   * è®°å½•ç½‘ç»œè¯·æ±‚\n   * Record network request\n   */\n  recordNetworkRequest(\n    url: string,\n    method: string,\n    status: number,\n    timing: number,\n    size = ZERO,\n  ): void {\n    if (\n      !this.config.webEvalAgent.enabled ||\n      !this.config.webEvalAgent.captureNetwork\n    )\n      return;\n\n    this.networkRequests.push({\n      url,\n      method,\n      status,\n      timing,\n      size,\n      timestamp: Date.now(),\n    });\n\n    // ä¿æŒæ•°ç»„å¤§å°åœ¨åˆç†èŒƒå›´å†…\n    if (this.networkRequests.length > 1000) {\n      this.networkRequests = this.networkRequests.slice(OFFSET_NEGATIVE_MASSIVE);\n    }\n  }\n\n  /**\n   * è®°å½•é¡µé¢åŠ è½½\n   * Record page load\n   */\n  recordPageLoad(url: string, timing: Record<string, number>): void {\n    if (!this.config.webEvalAgent.enabled) return;\n\n    this.pageLoads.push({\n      url,\n      timing,\n      timestamp: Date.now(),\n    });\n\n    // ä¿æŒæ•°ç»„å¤§å°åœ¨åˆç†èŒƒå›´å†…\n    if (this.pageLoads.length > PERCENTAGE_FULL) {\n      this.pageLoads = this.pageLoads.slice(OFFSET_NEGATIVE_EXTRA_LARGE);\n    }\n  }\n\n  /**\n   * è®°å½•é”™è¯¯\n   * Record error\n   */\n  recordError(error: Error, context: Record<string, unknown> = {}): void {\n    if (\n      !this.config.webEvalAgent.enabled ||\n      !this.config.webEvalAgent.captureLogs\n    )\n      return;\n\n    this.errors.push({\n      error,\n      context,\n      timestamp: Date.now(),\n    });\n\n    // ä¿æŒæ•°ç»„å¤§å°åœ¨åˆç†èŒƒå›´å†…\n    if (this.errors.length > PERCENTAGE_FULL) {\n      this.errors = this.errors.slice(OFFSET_NEGATIVE_EXTRA_LARGE);\n    }\n  }\n\n  /**\n   * è·å–ç”¨æˆ·äº¤äº’æŠ¥å‘Š\n   * Get user interaction report\n   */\n  getInteractionReport(): {\n    totalInteractions: number;\n    uniqueActions: number;\n    averageResponseTime: number;\n    successRate: number;\n    topSlowActions: Array<{\n      action: string;\n      averageTime: number;\n      count: number;\n      successRate: number;\n    }>;\n    recommendations: string[];\n  } {\n    const interactions = Array.from(this.interactions.entries());\n    const totalInteractions = interactions.reduce(\n      (sum, [, metrics]) => sum + metrics.count,\n      ZERO,\n    );\n    const totalTime = interactions.reduce(\n      (sum, [, metrics]) => sum + metrics.totalTime,\n      ZERO,\n    );\n    const totalSuccesses = interactions.reduce(\n      (sum, [, metrics]) => sum + metrics.successCount,\n      ZERO,\n    );\n\n    const topSlowActions = interactions\n      .map(([action, metrics]) => ({\n        action,\n        averageTime: metrics.totalTime / metrics.count,\n        count: metrics.count,\n        successRate: metrics.successCount / metrics.count,\n      }))\n      .sort((a, b) => b.averageTime - a.averageTime)\n      .slice(ZERO, COUNT_TEN);\n\n    const recommendations: string[] = [];\n\n    // ç”Ÿæˆå»ºè®®\n    if (topSlowActions.length > ZERO) {\n      const slowestAction = topSlowActions[ZERO];\n      if (slowestAction && slowestAction.averageTime > ANIMATION_DURATION_VERY_SLOW) {\n        recommendations.push(\n          `Action \"${slowestAction.action}\" is slow (${slowestAction.averageTime.toFixed(ZERO)}ms average)`,\n        );\n      }\n    }\n\n    const lowSuccessActions = topSlowActions.filter((a) => a.successRate < MAGIC_0_9);\n    if (lowSuccessActions.length > ZERO) {\n      recommendations.push(\n        `${lowSuccessActions.length} actions have low success rates. Consider improving error handling.`,\n      );\n    }\n\n    return {\n      totalInteractions,\n      uniqueActions: interactions.length,\n      averageResponseTime: totalTime / totalInteractions || ZERO,\n      successRate: totalSuccesses / totalInteractions || ZERO,\n      topSlowActions,\n      recommendations,\n    };\n  }\n\n  /**\n   * è·å–ç½‘ç»œæ€§èƒ½æŠ¥å‘Š\n   * Get network performance report\n   */\n  getNetworkReport(): {\n    totalRequests: number;\n    averageResponseTime: number;\n    successRate: number;\n    totalDataTransferred: number;\n    slowestRequests: Array<{\n      url: string;\n      method: string;\n      timing: number;\n      status: number;\n    }>;\n    errorRequests: Array<{\n      url: string;\n      method: string;\n      status: number;\n      timing: number;\n    }>;\n  } {\n    const totalRequests = this.networkRequests.length;\n    const totalTime = this.networkRequests.reduce(\n      (sum, req) => sum + req.timing,\n      ZERO,\n    );\n    const successfulRequests = this.networkRequests.filter(\n      (req) => req.status >= HTTP_OK_CONST && req.status < ANIMATION_DURATION_NORMAL,\n    );\n    const totalDataTransferred = this.networkRequests.reduce(\n      (sum, req) => sum + req.size,\n      ZERO,\n    );\n\n    const slowestRequests = [...this.networkRequests]\n      .sort((a, b) => b.timing - a.timing)\n      .slice(ZERO, COUNT_TEN)\n      .map((req) => ({\n        url: req.url,\n        method: req.method,\n        timing: req.timing,\n        status: req.status,\n      }));\n\n    const errorRequests = this.networkRequests\n      .filter((req) => req.status >= HTTP_BAD_REQUEST_CONST)\n      .map((req) => ({\n        url: req.url,\n        method: req.method,\n        status: req.status,\n        timing: req.timing,\n      }));\n\n    return {\n      totalRequests,\n      averageResponseTime: totalTime / totalRequests || ZERO,\n      successRate: successfulRequests.length / totalRequests || ZERO,\n      totalDataTransferred,\n      slowestRequests,\n      errorRequests,\n    };\n  }\n\n  /**\n   * è·å–é¡µé¢åŠ è½½æŠ¥å‘Š\n   * Get page load report\n   */\n  getPageLoadReport(): {\n    totalPageLoads: number;\n    averageLoadTime: number;\n    slowestPages: Array<{\n      url: string;\n      loadTime: number;\n      timestamp: number;\n    }>;\n  } {\n    const totalPageLoads = this.pageLoads.length;\n    const totalLoadTime = this.pageLoads.reduce((sum, page) => {\n      return (\n        sum + (page.timing.loadComplete || page.timing.domContentLoaded || ZERO)\n      );\n    }, ZERO);\n\n    const slowestPages = this.pageLoads\n      .map((page) => ({\n        url: page.url,\n        loadTime: page.timing.loadComplete || page.timing.domContentLoaded || ZERO,\n        timestamp: page.timestamp,\n      }))\n      .sort((a, b) => b.loadTime - a.loadTime)\n      .slice(ZERO, COUNT_TEN);\n\n    return {\n      totalPageLoads,\n      averageLoadTime: totalLoadTime / totalPageLoads || ZERO,\n      slowestPages,\n    };\n  }\n\n  /**\n   * é‡ç½®æ‰€æœ‰æ•°æ®\n   * Reset all data\n   */\n  reset(): void {\n    this.interactions.clear();\n    this.networkRequests.length = ZERO;\n    this.pageLoads.length = ZERO;\n    this.errors.length = ZERO;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-integrations.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-integrations-bundle' import is duplicated.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":8,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BundleAnalyzerAnalyzer' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BundleAnalyzerUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useBundleAnalyzerIntegration' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateBundleAnalyzerConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":31},{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-integrations-react-scan' import is duplicated.","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":15,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ReactScanAnalyzer' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ReactScanUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useReactScanIntegration' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateReactScanConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":26},{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-integrations-vitals' import is duplicated.","line":20,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":26,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'checkEnvironmentCompatibility' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'performHealthCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useWebVitalsIntegration' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateWebVitalsConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WebVitalsAnalyzer' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":20},{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/performance-monitoring-integrations-web-eval' import is duplicated.","line":28,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":32,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useWebEvalAgentIntegration' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateWebEvalAgentConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WebEvalAgentAnalyzer' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PerformanceConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PerformanceMetrics' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å‘åå…¼å®¹çš„é‡æ–°å¯¼å‡º\nimport type { BundleAnalyzerIntegration } from '@/lib/performance-monitoring-integrations-bundle';\nimport {\n  BundleAnalyzerAnalyzer,\n  BundleAnalyzerUtils,\n  useBundleAnalyzerIntegration,\n  validateBundleAnalyzerConfig,\n} from '@/lib/performance-monitoring-integrations-bundle';\nimport type { ReactScanIntegration } from '@/lib/performance-monitoring-integrations-react-scan';\nimport {\n  ReactScanAnalyzer,\n  ReactScanUtils,\n  useReactScanIntegration,\n  validateReactScanConfig,\n} from '@/lib/performance-monitoring-integrations-react-scan';\nimport type {\n  EnvironmentCompatibilityResult,\n  WebVitalsIntegration,\n} from '@/lib/performance-monitoring-integrations-vitals';\nimport {\n  checkEnvironmentCompatibility,\n  performHealthCheck,\n  useWebVitalsIntegration,\n  validateWebVitalsConfig,\n  WebVitalsAnalyzer,\n} from '@/lib/performance-monitoring-integrations-vitals';\nimport type { WebEvalAgentIntegration } from '@/lib/performance-monitoring-integrations-web-eval';\nimport {\n  useWebEvalAgentIntegration,\n  validateWebEvalAgentConfig,\n  WebEvalAgentAnalyzer,\n} from '@/lib/performance-monitoring-integrations-web-eval';\nimport type {\n  PerformanceConfig,\n  PerformanceMetrics,\n} from '@/lib/performance-monitoring-types';\n\n/**\n * æ€§èƒ½ç›‘æ§é›†æˆé’©å­å’Œå·¥å…· - ä¸»å…¥å£\n * Performance Monitoring Integrations - Main Entry Point\n *\n * ç»Ÿä¸€çš„æ€§èƒ½ç›‘æ§é›†æˆå…¥å£ï¼Œæ•´åˆæ‰€æœ‰é›†æˆæ¨¡å—\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½\nexport type { ReactScanIntegration } from '@/lib/performance-monitoring-integrations-react-scan';\nexport {\n  useReactScanIntegration,\n  validateReactScanConfig,\n  ReactScanAnalyzer,\n  ReactScanUtils,\n} from '@/lib/performance-monitoring-integrations-react-scan';\nexport type { WebEvalAgentIntegration } from '@/lib/performance-monitoring-integrations-web-eval';\nexport {\n  useWebEvalAgentIntegration,\n  validateWebEvalAgentConfig,\n  WebEvalAgentAnalyzer,\n} from '@/lib/performance-monitoring-integrations-web-eval';\nexport type { BundleAnalyzerIntegration } from '@/lib/performance-monitoring-integrations-bundle';\nexport {\n  useBundleAnalyzerIntegration,\n  validateBundleAnalyzerConfig,\n  BundleAnalyzerAnalyzer,\n  BundleAnalyzerUtils,\n} from '@/lib/performance-monitoring-integrations-bundle';\nexport type {\n  WebVitalsIntegration,\n  EnvironmentCompatibilityResult,\n} from '@/lib/performance-monitoring-integrations-vitals';\nexport {\n  useWebVitalsIntegration,\n  checkEnvironmentCompatibility,\n  performHealthCheck,\n  validateWebVitalsConfig,\n  WebVitalsAnalyzer,\n} from '@/lib/performance-monitoring-integrations-vitals';\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type {\n  // React Scan é›†æˆ\n  ReactScanIntegration as ReactScan,\n\n  // Web Eval Agent é›†æˆ\n  WebEvalAgentIntegration as WebEvalAgent,\n\n  // Bundle Analyzer é›†æˆ\n  BundleAnalyzerIntegration as BundleAnalyzer,\n\n  // Web Vitals é›†æˆ\n  WebVitalsIntegration as WebVitals,\n\n  // ç¯å¢ƒæ£€æŸ¥\n  EnvironmentCompatibilityResult as EnvironmentCheck,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/performance-monitoring-types.ts","messages":[{"ruleId":"complexity","severity":2,"message":"Function 'validateConfig' has a complexity of 16. Maximum allowed is 15.","line":478,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":533,"endColumn":2}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ€§èƒ½ç›‘æ§ç±»å‹å®šä¹‰å’Œé…ç½®\n *\n * åŒ…å«æ€§èƒ½ç›‘æ§ç›¸å…³çš„æ¥å£å®šä¹‰ã€é…ç½®ç±»å‹å’Œç¯å¢ƒé…ç½®é€»è¾‘\n */\n\nimport { MAGIC_2500 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, BYTES_PER_KB, COUNT_FIVE, MAGIC_0_1, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, TEN_SECONDS_MS, THIRTY_SECONDS_MS, THREE_SECONDS_MS, ZERO } from '@/constants';\n\nimport { MAGIC_0_9 } from \"@/constants/decimal\";\nimport { PERFORMANCE_CONSTANTS } from '@/constants/performance';\n\n// ==================== åŸºç¡€ç±»å‹å®šä¹‰ ====================\n\n/**\n * æ€§èƒ½æŒ‡æ ‡æ•°æ®æºç±»å‹\n * Performance metrics source types\n */\nexport type PerformanceMetricSource =\n  | 'react-scan'\n  | 'web-eval-agent'\n  | 'bundle-analyzer'\n  | 'size-limit'\n  | 'custom'\n  | 'web-vitals'\n  | 'lighthouse'\n  | 'user-timing';\n\n/**\n * æ€§èƒ½æŒ‡æ ‡ç±»å‹\n * Performance metrics types\n */\nexport type PerformanceMetricType =\n  | 'component'\n  | 'page'\n  | 'bundle'\n  | 'network'\n  | 'user-interaction'\n  | 'memory'\n  | 'cpu'\n  | 'rendering'\n  | 'loading';\n\n/**\n * ç»„ä»¶æ€§èƒ½æ•°æ®\n * Component performance data\n */\nexport interface ComponentPerformanceData {\n  /** æ¸²æŸ“æ—¶é—´ (æ¯«ç§’) */\n  renderTime: number;\n  /** å†…å­˜ä½¿ç”¨ (å­—èŠ‚) */\n  memoryUsage?: number;\n}\n\n/**\n * ç½‘ç»œæ€§èƒ½æ•°æ®\n * Network performance data\n */\nexport interface NetworkPerformanceData {\n  /** å“åº”æ—¶é—´ (æ¯«ç§’) */\n  responseTime: number;\n  /** è¶…æ—¶æ—¶é—´ (æ¯«ç§’) */\n  timeout?: number;\n}\n\n/**\n * æ‰“åŒ…æ€§èƒ½æ•°æ®\n * Bundle performance data\n */\nexport interface BundlePerformanceData {\n  /** åŒ…å¤§å° (å­—èŠ‚) */\n  size: number;\n  /** åŠ è½½æ—¶é—´ (æ¯«ç§’) */\n  loadTime?: number;\n}\n\n/**\n * æ€§èƒ½æŒ‡æ ‡æ•°æ®è”åˆç±»å‹\n * Performance metrics data union type\n */\nexport type PerformanceMetricData =\n  | ComponentPerformanceData\n  | NetworkPerformanceData\n  | BundlePerformanceData\n  | Record<string, unknown>;\n\n/**\n * æ€§èƒ½æŒ‡æ ‡æ¥å£\n * Performance metrics interface\n */\nexport interface PerformanceMetrics {\n  /** æ—¶é—´æˆ³ */\n  timestamp: number;\n  /** æ•°æ®æº */\n  source: PerformanceMetricSource;\n  /** æŒ‡æ ‡ç±»å‹ */\n  type: PerformanceMetricType;\n  /** æŒ‡æ ‡æ•°æ® */\n  data: PerformanceMetricData;\n  /** æŒ‡æ ‡ID (å¯é€‰) */\n  id?: string;\n  /** æŒ‡æ ‡æ ‡ç­¾ (å¯é€‰) */\n  tags?: string[];\n  /** æŒ‡æ ‡ä¼˜å…ˆçº§ (å¯é€‰) */\n  priority?: 'low' | 'medium' | 'high' | 'critical';\n}\n\n// ==================== é…ç½®æ¥å£å®šä¹‰ ====================\n\n/**\n * React Scan é…ç½®\n * React Scan configuration\n */\nexport interface ReactScanConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ˜¯å¦æ˜¾ç¤ºå·¥å…·æ  */\n  showToolbar: boolean;\n  /** æ˜¯å¦è·Ÿè¸ªä¸å¿…è¦çš„æ¸²æŸ“ */\n  trackUnnecessaryRenders: boolean;\n  /** æ˜¯å¦æ˜¾ç¤ºæ¸²æŸ“æ—¶é—´ */\n  showRenderTime?: boolean;\n  /** æ˜¯å¦æ˜¾ç¤ºç»„ä»¶åç§° */\n  showComponentNames?: boolean;\n  /** æœ€å¤§è·Ÿè¸ªç»„ä»¶æ•°é‡ */\n  maxTrackedComponents?: number;\n  /** æ¸²æŸ“æ—¶é—´é˜ˆå€¼ (æ¯«ç§’) */\n  renderThreshold?: number;\n}\n\n/**\n * Web Eval Agent é…ç½®\n * Web Eval Agent configuration\n */\nexport interface WebEvalAgentConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ˜¯å¦æ•è·ç½‘ç»œè¯·æ±‚ */\n  captureNetwork: boolean;\n  /** æ˜¯å¦æ•è·æ—¥å¿— */\n  captureLogs: boolean;\n  /** æ˜¯å¦æ•è·æˆªå›¾ */\n  captureScreenshots?: boolean;\n  /** æ˜¯å¦æ•è·æ€§èƒ½æŒ‡æ ‡ */\n  capturePerformance?: boolean;\n  /** æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’) */\n  timeout?: number;\n  /** æ¯ä¸ªä¼šè¯æœ€å¤§äº¤äº’æ¬¡æ•° */\n  maxInteractionsPerSession?: number;\n}\n\n/**\n * Bundle Analyzer é…ç½®\n * Bundle Analyzer configuration\n */\nexport interface BundleAnalyzerConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ˜¯å¦è‡ªåŠ¨æ‰“å¼€åˆ†æå™¨ */\n  openAnalyzer: boolean;\n  /** åˆ†æå™¨ç«¯å£ */\n  port?: number;\n  /** æ˜¯å¦ç”Ÿæˆé™æ€æŠ¥å‘Š */\n  generateStaticReport?: boolean;\n  /** æŠ¥å‘Šè¾“å‡ºç›®å½• */\n  reportDir?: string;\n}\n\n/**\n * Size Limit é…ç½®\n * Size Limit configuration\n */\nexport interface SizeLimitConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** å¤§å°é™åˆ¶ (å­—èŠ‚) */\n  limits: Record<string, number>;\n  /** æ˜¯å¦å¯ç”¨ gzip å‹ç¼©æ£€æŸ¥ */\n  gzip?: boolean;\n  /** æ˜¯å¦å¯ç”¨ brotli å‹ç¼©æ£€æŸ¥ */\n  brotli?: boolean;\n  /** è­¦å‘Šé˜ˆå€¼ (ç™¾åˆ†æ¯”) */\n  warningThreshold?: number;\n}\n\n/**\n * Web Vitals é…ç½®\n * Web Vitals configuration\n */\nexport interface WebVitalsConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ˜¯å¦ä¸ŠæŠ¥åˆ°åˆ†ææœåŠ¡ */\n  reportToAnalytics: boolean;\n  /** é‡‡æ ·ç‡ (0-1) */\n  sampleRate?: number;\n  /** æ˜¯å¦åœ¨æ§åˆ¶å°è¾“å‡º */\n  debug?: boolean;\n  /** æ˜¯å¦æŠ¥å‘Šæ‰€æœ‰å˜åŒ– */\n  reportAllChanges?: boolean;\n  /** æ€§èƒ½é˜ˆå€¼é…ç½® */\n  thresholds?: {\n    /** CLS é˜ˆå€¼ */\n    cls?: number;\n    /** FID é˜ˆå€¼ */\n    fid?: number;\n    /** LCP é˜ˆå€¼ */\n    lcp?: number;\n  };\n}\n\n/**\n * ç»„ä»¶æ€§èƒ½ç›‘æ§é…ç½®\n * Component performance monitoring configuration\n */\nexport interface ComponentConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ€§èƒ½é˜ˆå€¼ */\n  thresholds?: {\n    /** æ¸²æŸ“æ—¶é—´é˜ˆå€¼ (æ¯«ç§’) */\n    renderTime: number;\n    /** å†…å­˜ä½¿ç”¨é˜ˆå€¼ (å­—èŠ‚) */\n    memoryUsage?: number;\n  };\n  /** æ˜¯å¦è·Ÿè¸ªé‡æ–°æ¸²æŸ“ */\n  trackRerenders?: boolean;\n  /** æœ€å¤§è·Ÿè¸ªç»„ä»¶æ•° */\n  maxTrackedComponents?: number;\n}\n\n/**\n * ç½‘ç»œæ€§èƒ½ç›‘æ§é…ç½®\n * Network performance monitoring configuration\n */\nexport interface NetworkConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ€§èƒ½é˜ˆå€¼ */\n  thresholds?: {\n    /** å“åº”æ—¶é—´é˜ˆå€¼ (æ¯«ç§’) */\n    responseTime: number;\n    /** è¶…æ—¶æ—¶é—´ (æ¯«ç§’) */\n    timeout?: number;\n  };\n  /** æ˜¯å¦ç›‘æ§æ‰€æœ‰è¯·æ±‚ */\n  monitorAllRequests?: boolean;\n  /** é‡‡æ ·ç‡ (0-1) */\n  sampleRate?: number;\n}\n\n/**\n * æ‰“åŒ…æ€§èƒ½ç›‘æ§é…ç½®\n * Bundle performance monitoring configuration\n */\nexport interface BundleConfig {\n  /** æ˜¯å¦å¯ç”¨ */\n  enabled: boolean;\n  /** æ€§èƒ½é˜ˆå€¼ */\n  thresholds?: {\n    /** åŒ…å¤§å°é˜ˆå€¼ (å­—èŠ‚) */\n    size: number;\n    /** åŠ è½½æ—¶é—´é˜ˆå€¼ (æ¯«ç§’) */\n    loadTime?: number;\n  };\n  /** æ˜¯å¦åˆ†æä¾èµ– */\n  analyzeDependencies?: boolean;\n  /** æ˜¯å¦ç”ŸæˆæŠ¥å‘Š */\n  generateReports?: boolean;\n}\n\n/**\n * æ€§èƒ½ç›‘æ§æ€»é…ç½®\n * Performance monitoring configuration\n */\nexport interface PerformanceConfig {\n  /** React Scan é…ç½® */\n  reactScan: ReactScanConfig;\n  /** Web Eval Agent é…ç½® */\n  webEvalAgent: WebEvalAgentConfig;\n  /** Bundle Analyzer é…ç½® */\n  bundleAnalyzer: BundleAnalyzerConfig;\n  /** Size Limit é…ç½® */\n  sizeLimit: SizeLimitConfig;\n  /** Web Vitals é…ç½® */\n  webVitals?: WebVitalsConfig;\n  /** ç»„ä»¶æ€§èƒ½ç›‘æ§é…ç½® */\n  component?: ComponentConfig;\n  /** ç½‘ç»œæ€§èƒ½ç›‘æ§é…ç½® */\n  network?: NetworkConfig;\n  /** æ‰“åŒ…æ€§èƒ½ç›‘æ§é…ç½® */\n  bundle?: BundleConfig;\n  /** æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ */\n  debug?: boolean;\n  /** å…¨å±€é…ç½® */\n  global?: {\n    /** æ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘æ§ */\n    enabled: boolean;\n    /** æ•°æ®ä¿ç•™æ—¶é—´ (æ¯«ç§’) */\n    dataRetentionTime: number;\n    /** æœ€å¤§æŒ‡æ ‡æ•°é‡ */\n    maxMetrics: number;\n    /** æ˜¯å¦åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨ */\n    enableInProduction: boolean;\n  };\n}\n\n// ==================== ç¯å¢ƒæ£€æµ‹å’Œé…ç½®ç”Ÿæˆ ====================\n\n/**\n * ç¯å¢ƒç±»å‹\n * Environment types\n */\nexport type Environment = 'development' | 'production' | 'test' | 'staging';\n\n/**\n * è·å–å½“å‰ç¯å¢ƒ\n * Get current environment\n */\nexport function getCurrentEnvironment(): Environment {\n  if (\n    process.env.NODE_ENV === 'test' ||\n    process.env.PLAYWRIGHT_TEST === 'true'\n  ) {\n    return 'test';\n  }\n  if (process.env.NODE_ENV === 'production') {\n    return 'production';\n  }\n  if (process.env.NODE_ENV === 'development') {\n    return 'development';\n  }\n  if (\n    process.env.VERCEL_ENV === 'preview' ||\n    process.env.NODE_ENV === 'staging'\n  ) {\n    return 'staging';\n  }\n  return 'development';\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºæµ‹è¯•ç¯å¢ƒ\n * Check if in test environment\n */\nexport function isTestEnvironment(): boolean {\n  return getCurrentEnvironment() === 'test';\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ\n * Check if in development environment\n */\nexport function isDevelopmentEnvironment(): boolean {\n  return getCurrentEnvironment() === 'development';\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ\n * Check if in production environment\n */\nexport function isProductionEnvironment(): boolean {\n  return getCurrentEnvironment() === 'production';\n}\n\n/**\n * æ ¹æ®ç¯å¢ƒç”Ÿæˆé»˜è®¤é…ç½®\n * Generate default configuration based on environment\n */\nexport function generateEnvironmentConfig(): PerformanceConfig {\n  const environment = getCurrentEnvironment();\n  const isProduction = environment === 'production';\n  const isTest = environment === 'test';\n  const isDevelopment = environment === 'development';\n\n  return {\n    reactScan: {\n      enabled:\n        isDevelopment &&\n        !isTest &&\n        process.env.NEXT_PUBLIC_DISABLE_REACT_SCAN !== 'true',\n      showToolbar: isDevelopment && !isTest,\n      trackUnnecessaryRenders: isDevelopment,\n      showRenderTime: isDevelopment,\n      showComponentNames: isDevelopment,\n      maxTrackedComponents: PERCENTAGE_FULL,\n      renderThreshold: PERCENTAGE_FULL, // 100ms\n    },\n    webEvalAgent: {\n      enabled:\n        isTest || process.env.NEXT_PUBLIC_ENABLE_WEB_EVAL_AGENT === 'true',\n      captureNetwork: true,\n      captureLogs: true,\n      captureScreenshots: isTest,\n      capturePerformance: true,\n      timeout: THIRTY_SECONDS_MS,\n      maxInteractionsPerSession: PERCENTAGE_HALF,\n    },\n    bundleAnalyzer: {\n      enabled: process.env.ANALYZE === 'true',\n      openAnalyzer: !isProduction,\n      port: 8888,\n      generateStaticReport: isProduction,\n      reportDir: './bundle-analysis',\n    },\n    sizeLimit: {\n      enabled: true,\n      limits: {\n        main:\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.MAIN_BUNDLE *\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.KB_TO_BYTES,\n        framework:\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.FRAMEWORK_BUNDLE *\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.KB_TO_BYTES,\n        css:\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.CSS_BUNDLE *\n          PERFORMANCE_CONSTANTS.BUNDLE_LIMITS.KB_TO_BYTES,\n      },\n      gzip: true,\n      brotli: true,\n      warningThreshold: MAGIC_0_9, // 90%\n    },\n    webVitals: {\n      enabled: true,\n      reportToAnalytics: isProduction,\n      sampleRate: isProduction ? MAGIC_0_1 : ONE, // ç”Ÿäº§ç¯å¢ƒ10%é‡‡æ ·\n      debug: isDevelopment,\n      reportAllChanges: isDevelopment,\n      thresholds: {\n        cls: MAGIC_0_1,\n        fid: PERCENTAGE_FULL,\n        lcp: MAGIC_2500,\n      },\n    },\n    component: {\n      enabled: isDevelopment,\n      thresholds: {\n        renderTime: PERCENTAGE_FULL, // 100ms\n        memoryUsage: PERCENTAGE_HALF * BYTES_PER_KB * BYTES_PER_KB, // 50MB\n      },\n      trackRerenders: isDevelopment,\n      maxTrackedComponents: PERCENTAGE_FULL,\n    },\n    network: {\n      enabled: true,\n      thresholds: {\n        responseTime: 1000, // 1s\n        timeout: TEN_SECONDS_MS, // 10s\n      },\n      monitorAllRequests: isDevelopment,\n      sampleRate: isProduction ? MAGIC_0_1 : ONE,\n    },\n    bundle: {\n      enabled: true,\n      thresholds: {\n        size: BYTES_PER_KB * BYTES_PER_KB, // 1MB\n        loadTime: THREE_SECONDS_MS, // 3s\n      },\n      analyzeDependencies: isDevelopment,\n      generateReports: !isProduction,\n    },\n    debug: isDevelopment,\n    global: {\n      enabled: true,\n      dataRetentionTime: COUNT_FIVE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // COUNT_FIVEåˆ†é’Ÿ\n      maxMetrics: ANIMATION_DURATION_VERY_SLOW,\n      enableInProduction: false,\n    },\n  };\n}\n\n// ==================== é…ç½®éªŒè¯ ====================\n\n/**\n * éªŒè¯é…ç½®çš„æœ‰æ•ˆæ€§\n * Validate configuration\n */\nexport function validateConfig(config: PerformanceConfig): {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n} {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // éªŒè¯ Size Limit é…ç½®\n  if (config.sizeLimit.enabled) {\n    Object.entries(config.sizeLimit.limits).forEach(([key, limit]) => {\n      if (typeof limit !== 'number' || limit <= ZERO) {\n        errors.push(`Size limit for \"${key}\" must be a positive number`);\n      }\n    });\n  }\n\n  // éªŒè¯ Web Vitals é…ç½®\n  if (config.webVitals?.enabled) {\n    if (\n      config.webVitals.sampleRate &&\n      (config.webVitals.sampleRate < ZERO || config.webVitals.sampleRate > ONE)\n    ) {\n      errors.push('Web Vitals sample rate must be between 0 and 1');\n    }\n  }\n\n  // éªŒè¯å…¨å±€é…ç½®\n  if (config.global?.enabled) {\n    if (config.global.dataRetentionTime <= ZERO) {\n      errors.push('Data retention time must be positive');\n    }\n    if (config.global.maxMetrics <= ZERO) {\n      errors.push('Max metrics must be positive');\n    }\n  }\n\n  // ç”Ÿæˆè­¦å‘Š\n  if (config.reactScan.enabled && isProductionEnvironment()) {\n    warnings.push('React Scan is enabled in production environment');\n  }\n\n  if (\n    config.bundleAnalyzer.enabled &&\n    config.bundleAnalyzer.openAnalyzer &&\n    isProductionEnvironment()\n  ) {\n    warnings.push('Bundle analyzer auto-open is enabled in production');\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/react-scan-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/resend-core.ts","messages":[{"ruleId":"require-await","severity":2,"message":"Async method 'checkConnection' has no 'await' expression.","line":204,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":204,"endColumn":31,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5469,5475],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unreachable","severity":2,"message":"Unreachable code.","line":213,"column":13,"nodeType":"BlockStatement","messageId":"unreachableCode","endLine":215,"endColumn":6}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Resendé‚®ä»¶æœåŠ¡æ ¸å¿ƒç±»\n * Resend email service core class\n */\n\nimport { env } from '@/../env.mjs';\nimport { ZERO } from \"@/constants\";\nimport { logger } from '@/lib/logger';\nimport { ResendTemplates } from '@/lib/resend-templates';\nimport { EMAIL_CONFIG, ResendUtils } from '@/lib/resend-utils';\nimport type { EmailTemplateData } from '@/lib/validations';\nimport { Resend } from 'resend';\n\n/**\n * Resendé‚®ä»¶æœåŠ¡é…ç½®\n * Resend email service configuration\n */\nexport class ResendService {\n  private resend: Resend | null = null;\n  private isConfigured: boolean = false;\n  private emailConfig: {\n    from: string;\n    replyTo: string;\n    supportEmail: string;\n  };\n\n  constructor() {\n    this.emailConfig = {\n      from: env.EMAIL_FROM || EMAIL_CONFIG.from,\n      replyTo: env.EMAIL_REPLY_TO || EMAIL_CONFIG.replyTo,\n      supportEmail: env.EMAIL_REPLY_TO || EMAIL_CONFIG.supportEmail,\n    };\n\n    this.initializeResend();\n  }\n\n  /**\n   * åˆå§‹åŒ–ResendæœåŠ¡\n   * Initialize Resend service\n   */\n  private initializeResend(): void {\n    try {\n      if (!env.RESEND_API_KEY) {\n        logger.warn('Resend API key missing - email service will be disabled');\n        return;\n      }\n\n      this.resend = new Resend(env.RESEND_API_KEY);\n      this.isConfigured = true;\n\n      logger.info('Resend email service initialized successfully', {\n        from: this.emailConfig.from,\n        replyTo: this.emailConfig.replyTo,\n      });\n    } catch (error) {\n      logger.error('Failed to initialize Resend service', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n      });\n    }\n  }\n\n  /**\n   * æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²é…ç½®\n   * Check if service is configured\n   */\n  public isReady(): boolean {\n    return this.isConfigured && this.resend !== null;\n  }\n\n  /**\n   * å‘é€è”ç³»è¡¨å•é‚®ä»¶ç»™ç®¡ç†å‘˜\n   * Send contact form email to admin\n   */\n  public async sendContactFormEmail(data: EmailTemplateData): Promise<string> {\n    if (!this.isReady()) {\n      throw new Error('Resend service is not configured');\n    }\n\n    try {\n      // éªŒè¯å’Œæ¸…ç†é‚®ä»¶æ•°æ®\n      const validatedData = ResendUtils.validateEmailData(data);\n      const sanitizedData = ResendUtils.sanitizeEmailData(validatedData);\n\n      // æ„å»ºé‚®ä»¶å†…å®¹\n      const subject = ResendUtils.generateContactSubject(sanitizedData);\n      const htmlContent =\n        ResendTemplates.generateContactEmailHtml(sanitizedData);\n      const textContent =\n        ResendTemplates.generateContactEmailText(sanitizedData);\n\n      // å‘é€é‚®ä»¶\n      const result = await this.resend!.emails.send({\n        from: this.emailConfig.from,\n        to: [this.emailConfig.replyTo],\n        replyTo: sanitizedData.email,\n        subject,\n        html: htmlContent,\n        text: textContent,\n        tags: ResendUtils.getContactFormTags(),\n      });\n\n      if (result.error) {\n        throw new Error(`Resend API error: ${result.error.message}`);\n      }\n\n      logger.info('Contact form email sent successfully', {\n        messageId: result.data?.id,\n        to: this.emailConfig.replyTo,\n        from: sanitizedData.email,\n        subject,\n      });\n\n      return result.data?.id || 'unknown';\n    } catch (error) {\n      logger.error('Failed to send contact form email', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n        email: data.email,\n      });\n      throw new Error('Failed to send email');\n    }\n  }\n\n  /**\n   * å‘é€ç¡®è®¤é‚®ä»¶ç»™ç”¨æˆ·\n   * Send confirmation email to user\n   */\n  public async sendConfirmationEmail(data: EmailTemplateData): Promise<string> {\n    if (!this.isReady()) {\n      throw new Error('Resend service is not configured');\n    }\n\n    try {\n      const validatedData = ResendUtils.validateEmailData(data);\n      const sanitizedData = ResendUtils.sanitizeEmailData(validatedData);\n\n      const subject = ResendUtils.generateConfirmationSubject();\n      const htmlContent =\n        ResendTemplates.generateConfirmationEmailHtml(sanitizedData);\n      const textContent =\n        ResendTemplates.generateConfirmationEmailText(sanitizedData);\n\n      const result = await this.resend!.emails.send({\n        from: this.emailConfig.from,\n        to: [sanitizedData.email],\n        replyTo: this.emailConfig.supportEmail,\n        subject,\n        html: htmlContent,\n        text: textContent,\n        tags: ResendUtils.getConfirmationTags(),\n      });\n\n      if (result.error) {\n        throw new Error(`Resend API error: ${result.error.message}`);\n      }\n\n      logger.info('Confirmation email sent successfully', {\n        messageId: result.data?.id,\n        to: sanitizedData.email,\n        subject,\n      });\n\n      return result.data?.id || 'unknown';\n    } catch (error) {\n      logger.error('Failed to send confirmation email', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n        email: data.email,\n      });\n      throw new Error('Failed to send confirmation email');\n    }\n  }\n\n  /**\n   * è·å–é‚®ä»¶å‘é€ç»Ÿè®¡\n   * Get email sending statistics\n   */\n  public getEmailStats(): {\n    sent: number;\n    delivered: number;\n    bounced: number;\n    complained: number;\n  } {\n    // Note: Resend doesn't provide built-in analytics API\n    // This would need to be implemented with webhook tracking\n    return {\n      sent: ZERO,\n      delivered: ZERO,\n      bounced: ZERO,\n      complained: ZERO,\n    };\n  }\n\n  /**\n   * è·å–é‚®ä»¶é…ç½®\n   * Get email configuration\n   */\n  public getEmailConfig(): typeof this.emailConfig {\n    return { ...this.emailConfig };\n  }\n\n  /**\n   * æ£€æŸ¥APIè¿æ¥çŠ¶æ€\n   * Check API connection status\n   */\n  public async checkConnection(): Promise<boolean> {\n    if (!this.isReady()) {\n      return false;\n    }\n\n    try {\n      // å°è¯•è·å–åŸŸåä¿¡æ¯æ¥æµ‹è¯•è¿æ¥\n      // Note: This is a placeholder - Resend doesn't have a ping endpoint\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/resend-templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/resend-utils.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/lib/validations' import is duplicated.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":7,"endColumn":80}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Resendé‚®ä»¶æœåŠ¡å·¥å…·å‡½æ•°\n * Resend email service utilities\n */\n\nimport type { EmailTemplateData } from '@/lib/validations';\nimport { emailTemplateDataSchema, validationHelpers } from '@/lib/validations';\n\n/**\n * é‚®ä»¶é…ç½®å¸¸é‡\n * Email configuration constants\n */\nexport const EMAIL_CONFIG = {\n  from: 'noreply@tucsenberg.com',\n  replyTo: 'contact@tucsenberg.com',\n  supportEmail: 'support@tucsenberg.com',\n} as const;\n\n/**\n * é‚®ä»¶å·¥å…·ç±»\n * Email utilities class\n */\nexport class ResendUtils {\n  /**\n   * éªŒè¯é‚®ä»¶æ•°æ®\n   * Validate email data\n   */\n  static validateEmailData(data: EmailTemplateData): EmailTemplateData {\n    return emailTemplateDataSchema.parse(data);\n  }\n\n  /**\n   * æ¸…ç†é‚®ä»¶æ•°æ®\n   * Sanitize email data\n   */\n  static sanitizeEmailData(data: EmailTemplateData): EmailTemplateData {\n    return {\n      firstName: validationHelpers.sanitizeInput(data.firstName),\n      lastName: validationHelpers.sanitizeInput(data.lastName),\n      email: data.email.toLowerCase().trim(),\n      company: validationHelpers.sanitizeInput(data.company),\n      message: validationHelpers.sanitizeInput(data.message),\n      phone: data.phone\n        ? validationHelpers.sanitizeInput(data.phone)\n        : undefined,\n      subject: data.subject\n        ? validationHelpers.sanitizeInput(data.subject)\n        : undefined,\n      submittedAt: data.submittedAt,\n      marketingConsent: data.marketingConsent,\n    };\n  }\n\n  /**\n   * ç”Ÿæˆé‚®ä»¶ä¸»é¢˜\n   * Generate email subject\n   */\n  static generateContactSubject(data: EmailTemplateData): string {\n    return data.subject\n      ? `Contact Form: ${data.subject}`\n      : `New Contact from ${data.firstName} ${data.lastName}`;\n  }\n\n  /**\n   * ç”Ÿæˆç¡®è®¤é‚®ä»¶ä¸»é¢˜\n   * Generate confirmation email subject\n   */\n  static generateConfirmationSubject(): string {\n    return 'Thank you for contacting us - Tucsenberg';\n  }\n\n  /**\n   * è·å–é‚®ä»¶æ ‡ç­¾\n   * Get email tags\n   */\n  static getContactFormTags(): Array<{ name: string; value: string }> {\n    return [\n      { name: 'type', value: 'contact-form' },\n      { name: 'source', value: 'website' },\n    ];\n  }\n\n  /**\n   * è·å–ç¡®è®¤é‚®ä»¶æ ‡ç­¾\n   * Get confirmation email tags\n   */\n  static getConfirmationTags(): Array<{ name: string; value: string }> {\n    return [\n      { name: 'type', value: 'confirmation' },\n      { name: 'source', value: 'website' },\n    ];\n  }\n\n  /**\n   * æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´\n   * Format date time\n   */\n  static formatDateTime(date: Date | string): string {\n    return new Date(date).toLocaleString();\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/resend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-crypto.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HEX_MASK_6_BITS' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HEX_MASK_BIT_6' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HEX_MASK_HIGH_BIT' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HEX_MASK_LOW_NIBBLE' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_8' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_20' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_32' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_48' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_64' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_HEX_3' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MAGIC_HEX_8' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"max-params","severity":2,"message":"Async function 'verifyHMAC' has too many parameters (4). Maximum allowed is 3.","line":190,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":190,"endColumn":33},{"ruleId":"max-params","severity":2,"message":"Async function 'decryptData' has too many parameters (4). Maximum allowed is 3.","line":263,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":263,"endColumn":34},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":318,"column":10,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":322,"endColumn":4,"suggestions":[{"messageId":"removeAwait","fix":{"range":[7356,7362],"text":""},"desc":"Remove redundant `await`."}]},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":343,"column":10,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":349,"endColumn":4,"suggestions":[{"messageId":"removeAwait","fix":{"range":[8035,8041],"text":""},"desc":"Remove redundant `await`."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_100000, COUNT_256 } from \"@/constants/count\";\nimport {\n  COUNT_PAIR,\n  HEX_MASK_6_BITS,\n  HEX_MASK_BIT_6,\n  HEX_MASK_HIGH_BIT,\n  HEX_MASK_LOW_NIBBLE,\n  MAGIC_8,\n  MAGIC_12,\n  MAGIC_16,\n  MAGIC_20,\n  MAGIC_32,\n  MAGIC_48,\n  MAGIC_64,\n  MAGIC_HEX_3,\n  MAGIC_HEX_8,\n  ZERO,\n} from '@/constants';\n\n/**\n * åŠ å¯†å’Œå¯†ç å“ˆå¸Œå·¥å…·\n * Cryptography and password hashing utilities\n */\n\n/**\n * Crypto constants\n */\nconst CRYPTO_CONSTANTS = {\n  SALT_BYTE_LENGTH: MAGIC_16,\n  HEX_CHARS_PER_BYTE: COUNT_PAIR,\n  HEX_BASE: MAGIC_16,\n  HEX_PAD_LENGTH: COUNT_PAIR,\n} as const;\n\n/**\n * Hash password using Web Crypto API\n */\nexport async function hashPassword(\n  password: string,\n  salt?: string,\n): Promise<string> {\n  const encoder = new TextEncoder();\n  const saltBytes = salt\n    ? encoder.encode(salt)\n    : crypto.getRandomValues(new Uint8Array(CRYPTO_CONSTANTS.SALT_BYTE_LENGTH));\n  const passwordBytes = encoder.encode(password);\n\n  const combined = new Uint8Array(saltBytes.length + passwordBytes.length);\n  combined.set(saltBytes);\n  combined.set(passwordBytes, saltBytes.length);\n\n  const hashBuffer = await crypto.subtle.digest('SHA-256', combined);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n\n  const saltHex = Array.from(saltBytes)\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n\n  return `${saltHex}:${hashHex}`;\n}\n\n/**\n * Verify password against hash\n */\nexport async function verifyPassword(\n  password: string,\n  hash: string,\n): Promise<boolean> {\n  try {\n    const [saltHex, expectedHash] = hash.split(':');\n    if (!saltHex || !expectedHash) {\n      return false;\n    }\n\n    const salt = saltHex.match(/.{COUNT_PAIR}/g)?.map((byte) => parseInt(byte, MAGIC_16));\n    if (!salt) {\n      return false;\n    }\n\n    const saltBytes = new Uint8Array(salt);\n    const actualHash = await hashPassword(\n      password,\n      new TextDecoder().decode(saltBytes),\n    );\n\n    return actualHash === hash;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Generate a cryptographically secure random salt\n */\nexport function generateSalt(\n  length: number = CRYPTO_CONSTANTS.SALT_BYTE_LENGTH,\n): string {\n  const saltBytes = crypto.getRandomValues(new Uint8Array(length));\n  return Array.from(saltBytes)\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n}\n\n/**\n * Hash data using SHA-256\n */\nexport async function sha256Hash(data: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const dataBytes = encoder.encode(data);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', dataBytes);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n\n  return hashArray\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n}\n\n/**\n * Hash data using SHA-512\n */\nexport async function sha512Hash(data: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const dataBytes = encoder.encode(data);\n  const hashBuffer = await crypto.subtle.digest('SHA-512', dataBytes);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n\n  return hashArray\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n}\n\n/**\n * Generate HMAC signature\n */\nexport async function generateHMAC(\n  data: string,\n  secret: string,\n  algorithm: 'SHA-256' | 'SHA-512' = 'SHA-256',\n): Promise<string> {\n  const encoder = new TextEncoder();\n  const keyData = encoder.encode(secret);\n  const messageData = encoder.encode(data);\n\n  const key = await crypto.subtle.importKey(\n    'raw',\n    keyData,\n    { name: 'HMAC', hash: algorithm },\n    false,\n    ['sign'],\n  );\n\n  const signature = await crypto.subtle.sign('HMAC', key, messageData);\n  const signatureArray = Array.from(new Uint8Array(signature));\n\n  return signatureArray\n    .map((b) =>\n      b\n        .toString(CRYPTO_CONSTANTS.HEX_BASE)\n        .padStart(CRYPTO_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    )\n    .join('');\n}\n\n/**\n * Verify HMAC signature\n */\nexport async function verifyHMAC(\n  data: string,\n  signature: string,\n  secret: string,\n  algorithm: 'SHA-256' | 'SHA-512' = 'SHA-256',\n): Promise<boolean> {\n  try {\n    const expectedSignature = await generateHMAC(data, secret, algorithm);\n    return expectedSignature === signature;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Encrypt data using AES-GCM\n */\nexport async function encryptData(\n  data: string,\n  password: string,\n): Promise<{ encrypted: string; iv: string; salt: string }> {\n  const encoder = new TextEncoder();\n  const dataBytes = encoder.encode(data);\n\n  // Generate salt and IV\n  const salt = crypto.getRandomValues(new Uint8Array(MAGIC_16));\n  const iv = crypto.getRandomValues(new Uint8Array(MAGIC_12));\n\n  // Derive key from password\n  const passwordKey = await crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey'],\n  );\n\n  const key = await crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt,\n      iterations: COUNT_100000,\n      hash: 'SHA-256',\n    },\n    passwordKey,\n    { name: 'AES-GCM', length: COUNT_256 },\n    false,\n    ['encrypt'],\n  );\n\n  // Encrypt data\n  const encrypted = await crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv },\n    key,\n    dataBytes,\n  );\n\n  return {\n    encrypted: Array.from(new Uint8Array(encrypted))\n      .map((b) => b.toString(MAGIC_16).padStart(COUNT_PAIR, '0'))\n      .join(''),\n    iv: Array.from(iv)\n      .map((b) => b.toString(MAGIC_16).padStart(COUNT_PAIR, '0'))\n      .join(''),\n    salt: Array.from(salt)\n      .map((b) => b.toString(MAGIC_16).padStart(COUNT_PAIR, '0'))\n      .join(''),\n  };\n}\n\n/**\n * Decrypt data using AES-GCM\n */\nexport async function decryptData(\n  encryptedHex: string,\n  ivHex: string,\n  saltHex: string,\n  password: string,\n): Promise<string> {\n  const encoder = new TextEncoder();\n\n  // Convert hex strings back to bytes\n  const encrypted = new Uint8Array(\n    encryptedHex.match(/.{COUNT_PAIR}/g)?.map((byte) => parseInt(byte, MAGIC_16)) || [],\n  );\n  const iv = new Uint8Array(\n    ivHex.match(/.{COUNT_PAIR}/g)?.map((byte) => parseInt(byte, MAGIC_16)) || [],\n  );\n  const salt = new Uint8Array(\n    saltHex.match(/.{COUNT_PAIR}/g)?.map((byte) => parseInt(byte, MAGIC_16)) || [],\n  );\n\n  // Derive key from password\n  const passwordKey = await crypto.subtle.importKey(\n    'raw',\n    encoder.encode(password),\n    'PBKDF2',\n    false,\n    ['deriveKey'],\n  );\n\n  const key = await crypto.subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt,\n      iterations: COUNT_100000,\n      hash: 'SHA-256',\n    },\n    passwordKey,\n    { name: 'AES-GCM', length: COUNT_256 },\n    false,\n    ['decrypt'],\n  );\n\n  // Decrypt data\n  const decrypted = await crypto.subtle.decrypt(\n    { name: 'AES-GCM', iv },\n    key,\n    encrypted,\n  );\n\n  return new TextDecoder().decode(decrypted);\n}\n\n/**\n * Generate a secure random key for encryption\n */\nexport async function generateEncryptionKey(): Promise<CryptoKey> {\n  return await crypto.subtle.generateKey(\n    { name: 'AES-GCM', length: COUNT_256 },\n    true,\n    ['encrypt', 'decrypt'],\n  );\n}\n\n/**\n * Export encryption key to raw format\n */\nexport async function exportKey(key: CryptoKey): Promise<string> {\n  const exported = await crypto.subtle.exportKey('raw', key);\n  return Array.from(new Uint8Array(exported))\n    .map((b) => b.toString(MAGIC_16).padStart(COUNT_PAIR, '0'))\n    .join('');\n}\n\n/**\n * Import encryption key from raw format\n */\nexport async function importKey(keyHex: string): Promise<CryptoKey> {\n  const keyBytes = new Uint8Array(\n    keyHex.match(/.{COUNT_PAIR}/g)?.map((byte) => parseInt(byte, MAGIC_16)) || [],\n  );\n\n  return await crypto.subtle.importKey(\n    'raw',\n    keyBytes,\n    { name: 'AES-GCM' },\n    true,\n    ['encrypt', 'decrypt'],\n  );\n}\n\n/**\n * Constant-time string comparison to prevent timing attacks\n */\nexport function constantTimeCompare(a: string, b: string): boolean {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  let result = ZERO;\n  for (let i = ZERO; i < a.length; i++) {\n    result |= a.charCodeAt(i) ^ b.charCodeAt(i);\n  }\n\n  return result === ZERO;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-file-upload.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Function 'validateFileUpload' has too many statements (31). Maximum allowed is 20.","line":104,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":215,"endColumn":2},{"ruleId":"complexity","severity":2,"message":"Function 'validateFileUpload' has a complexity of 18. Maximum allowed is 15.","line":104,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":215,"endColumn":2},{"ruleId":"prefer-destructuring","severity":2,"message":"Use object destructuring.","line":131,"column":5,"nodeType":"AssignmentExpression","messageId":"preferDestructuring","endLine":131,"endColumn":40},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":134,"column":21,"nodeType":"MemberExpression","endLine":134,"endColumn":49},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":168,"column":23,"nodeType":"MemberExpression","endLine":168,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3571,3574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3571,3574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":246,"column":35,"nodeType":"MemberExpression","endLine":246,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":258,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":258,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7059,7062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7059,7062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":305,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7221,7224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7221,7224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":314,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7409,7412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7409,7412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7499,7502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7499,7502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":320,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7591,7594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7591,7594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":367,"column":18,"nodeType":"MemberExpression","endLine":367,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":373,"column":36,"nodeType":"MemberExpression","endLine":373,"endColumn":48}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  BYTES_PER_KB,\n  COUNT_PAIR,\n  COUNT_TEN,\n  HEX_BYTE_MAX,\n  HEX_JPEG_MARKER_1,\n  HEX_PDF_MARKER,\n  HEX_PDF_SIGNATURE_1,\n  HEX_PNG_SIGNATURE_1,\n  HEX_PNG_SIGNATURE_2,\n  HEX_PNG_SIGNATURE_3,\n  HEX_PNG_SIGNATURE_4,\n  HEX_PNG_SIGNATURE_5,\n  HEX_PNG_SIGNATURE_6,\n  HEX_ZIP_SIGNATURE,\n  MAGIC_255,\n  MAGIC_HEX_03,\n  MAGIC_HEX_04,\n  ONE,\n  ZERO,\n} from '@/constants';\n\n/**\n * æ–‡ä»¶ä¸Šä¼ å®‰å…¨éªŒè¯å·¥å…·\n * File upload security validation utilities\n */\n\n/**\n * File upload constants\n */\nconst FILE_UPLOAD_CONSTANTS = {\n  MAX_FILE_SIZE_MB: COUNT_TEN,\n  BYTES_PER_MB: BYTES_PER_KB,\n  KB_TO_BYTES: BYTES_PER_KB,\n} as const;\n\n/**\n * File validation result interface\n */\nexport interface FileValidationResult {\n  valid: boolean;\n  error?: string;\n  warnings?: string[];\n}\n\n/**\n * Allowed file types configuration\n */\nexport const ALLOWED_FILE_TYPES = {\n  images: [\n    'image/jpeg',\n    'image/png',\n    'image/gif',\n    'image/webp',\n    'image/svg+xml',\n  ],\n  documents: [\n    'application/pdf',\n    'text/plain',\n    'text/csv',\n    'application/msword',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'application/vnd.ms-excel',\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  ],\n  archives: [\n    'application/zip',\n    'application/x-rar-compressed',\n    'application/x-7z-compressed',\n  ],\n} as const;\n\n/**\n * Dangerous file extensions that should never be allowed\n */\nconst DANGEROUS_EXTENSIONS = [\n  '.exe',\n  '.bat',\n  '.cmd',\n  '.scr',\n  '.pif',\n  '.js',\n  '.vbs',\n  '.jar',\n  '.com',\n  '.msi',\n  '.dll',\n  '.app',\n  '.deb',\n  '.rpm',\n  '.dmg',\n  '.pkg',\n  '.sh',\n  '.ps1',\n  '.php',\n  '.asp',\n  '.aspx',\n  '.jsp',\n] as const;\n\n/**\n * Validate file upload security\n */\nexport function validateFileUpload(\n  file: File,\n  options: {\n    maxSizeMB?: number;\n    allowedTypes?: string[];\n    allowedCategories?: Array<keyof typeof ALLOWED_FILE_TYPES>;\n  } = {},\n): FileValidationResult {\n  const warnings: string[] = [];\n\n  // Check file size\n  const maxSize =\n    (options.maxSizeMB || FILE_UPLOAD_CONSTANTS.MAX_FILE_SIZE_MB) *\n    FILE_UPLOAD_CONSTANTS.BYTES_PER_MB *\n    FILE_UPLOAD_CONSTANTS.KB_TO_BYTES;\n\n  if (file.size > maxSize) {\n    return {\n      valid: false,\n      error: `File size exceeds ${options.maxSizeMB || FILE_UPLOAD_CONSTANTS.MAX_FILE_SIZE_MB}MB limit`,\n    };\n  }\n\n  // Determine allowed types\n  let allowedTypes: string[] = [];\n\n  if (options.allowedTypes) {\n    allowedTypes = options.allowedTypes;\n  } else if (options.allowedCategories) {\n    allowedTypes = options.allowedCategories.flatMap(\n      (category) => ALLOWED_FILE_TYPES[category] || [],\n    );\n  } else {\n    // Default: allow images and documents\n    allowedTypes = [\n      ...ALLOWED_FILE_TYPES.images,\n      ...ALLOWED_FILE_TYPES.documents,\n    ];\n  }\n\n  // Check file type\n  if (!allowedTypes.includes(file.type)) {\n    return {\n      valid: false,\n      error: `File type '${file.type}' is not allowed. Allowed types: ${allowedTypes.join(', ')}`,\n    };\n  }\n\n  // Check file name for dangerous extensions\n  const fileName = file.name.toLowerCase();\n\n  for (const ext of DANGEROUS_EXTENSIONS) {\n    if (fileName.endsWith(ext)) {\n      return {\n        valid: false,\n        error: `File extension '${ext}' is not allowed for security reasons`,\n      };\n    }\n  }\n\n  // Check for double extensions (e.g., file.pdf.exe)\n  const parts = fileName.split('.');\n  if (parts.length > COUNT_PAIR) {\n    for (let i = ONE; i < parts.length - ONE; i++) {\n      const ext = `.${parts[i]}`;\n      if (DANGEROUS_EXTENSIONS.includes(ext as any)) {\n        return {\n          valid: false,\n          error: `File contains dangerous extension '${ext}' in filename`,\n        };\n      }\n    }\n  }\n\n  // Check for suspicious file names\n  const suspiciousPatterns = [\n    /^con\\./i,\n    /^prn\\./i,\n    /^aux\\./i,\n    /^nul\\./i,\n    /^com[1-9]\\./i,\n    /^lpt[1-9]\\./i,\n  ];\n\n  for (const pattern of suspiciousPatterns) {\n    if (pattern.test(fileName)) {\n      warnings.push('File name matches a reserved system name pattern');\n      break;\n    }\n  }\n\n  // Check file name length\n  if (fileName.length > MAGIC_255) {\n    return {\n      valid: false,\n      error: 'File name is too long (maximum MAGIC_255 characters)',\n    };\n  }\n\n  // Check for null bytes in filename\n  if (fileName.includes('\\0')) {\n    return {\n      valid: false,\n      error: 'File name contains invalid characters',\n    };\n  }\n\n  return {\n    valid: true,\n    ...(warnings.length > ZERO && { warnings }),\n  };\n}\n\n/**\n * Validate file content based on file signature (magic numbers)\n */\nexport async function validateFileSignature(\n  file: File,\n): Promise<FileValidationResult> {\n  try {\n    const buffer = await file.arrayBuffer();\n    const bytes = new Uint8Array(buffer);\n\n    // Check for common file signatures\n    const signatures = {\n      'image/jpeg': [HEX_BYTE_MAX, HEX_JPEG_MARKER_1, HEX_BYTE_MAX],\n      'image/png': [HEX_PNG_SIGNATURE_1, HEX_PNG_SIGNATURE_2, HEX_PNG_SIGNATURE_3, HEX_PNG_SIGNATURE_4],\n      'image/gif': [HEX_PNG_SIGNATURE_4, HEX_PNG_SIGNATURE_5, HEX_PNG_SIGNATURE_6],\n      'application/pdf': [HEX_PDF_MARKER, HEX_PNG_SIGNATURE_2, HEX_PDF_SIGNATURE_1, HEX_PNG_SIGNATURE_6],\n      'application/zip': [HEX_PNG_SIGNATURE_2, HEX_ZIP_SIGNATURE, MAGIC_HEX_03, MAGIC_HEX_04],\n    };\n\n    // Get the declared MIME type\n    const declaredType = file.type;\n    const expectedSignature =\n      signatures[declaredType as keyof typeof signatures];\n\n    if (expectedSignature) {\n      const actualSignature = Array.from(\n        bytes.slice(ZERO, expectedSignature.length),\n      );\n      const matches = expectedSignature.every(\n        (byte, index) => byte === actualSignature[index],\n      );\n\n      if (!matches) {\n        return {\n          valid: false,\n          error: `File signature does not match declared type '${declaredType}'`,\n        };\n      }\n    }\n\n    return { valid: true };\n  } catch (error) {\n    return {\n      valid: false,\n      error: 'Failed to validate file signature',\n    };\n  }\n}\n\n/**\n * Sanitize file name for safe storage\n */\nexport function sanitizeFileName(fileName: string): string {\n  return fileName\n    .replace(/[^a-zA-Z0-9._-]/g, '_') // Replace special chars with underscore\n    .replace(/_{COUNT_PAIR,}/g, '_') // Replace multiple underscores with single\n    .replace(/^_+|_+$/g, '') // Remove leading/trailing underscores\n    .substring(ZERO, MAGIC_255); // Limit length\n}\n\n/**\n * Generate safe file name with timestamp\n */\nexport function generateSafeFileName(\n  originalName: string,\n  prefix?: string,\n): string {\n  const timestamp = Date.now();\n  const extension = originalName.split('.').pop() || '';\n  const baseName = originalName.replace(/\\.[^/.]+$/, ''); // Remove extension\n  const sanitizedBase = sanitizeFileName(baseName);\n\n  const parts = [prefix, sanitizedBase, timestamp].filter(Boolean);\n\n  return `${parts.join('_')}.${extension}`;\n}\n\n/**\n * Check if file is an image\n */\nexport function isImageFile(file: File): boolean {\n  return ALLOWED_FILE_TYPES.images.includes(file.type as any);\n}\n\n/**\n * Check if file is a document\n */\nexport function isDocumentFile(file: File): boolean {\n  return ALLOWED_FILE_TYPES.documents.includes(file.type as any);\n}\n\n/**\n * Get file category\n */\nexport function getFileCategory(\n  file: File,\n): keyof typeof ALLOWED_FILE_TYPES | 'unknown' {\n  if (ALLOWED_FILE_TYPES.images.includes(file.type as any)) {\n    return 'images';\n  }\n  if (ALLOWED_FILE_TYPES.documents.includes(file.type as any)) {\n    return 'documents';\n  }\n  if (ALLOWED_FILE_TYPES.archives.includes(file.type as any)) {\n    return 'archives';\n  }\n  return 'unknown';\n}\n\n/**\n * Validate multiple files\n */\nexport function validateMultipleFiles(\n  files: FileList | File[],\n  options: {\n    maxFiles?: number;\n    maxTotalSizeMB?: number;\n    maxSizeMB?: number;\n    allowedTypes?: string[];\n    allowedCategories?: Array<keyof typeof ALLOWED_FILE_TYPES>;\n  } = {},\n): FileValidationResult {\n  const fileArray = Array.from(files);\n\n  // Check file count\n  if (options.maxFiles && fileArray.length > options.maxFiles) {\n    return {\n      valid: false,\n      error: `Too many files. Maximum allowed: ${options.maxFiles}`,\n    };\n  }\n\n  // Check total size\n  if (options.maxTotalSizeMB) {\n    const totalSize = fileArray.reduce((sum, file) => sum + file.size, ZERO);\n    const maxTotalSize =\n      options.maxTotalSizeMB *\n      FILE_UPLOAD_CONSTANTS.BYTES_PER_MB *\n      FILE_UPLOAD_CONSTANTS.KB_TO_BYTES;\n\n    if (totalSize > maxTotalSize) {\n      return {\n        valid: false,\n        error: `Total file size exceeds ${options.maxTotalSizeMB}MB limit`,\n      };\n    }\n  }\n\n  // Validate each file\n  for (let i = ZERO; i < fileArray.length; i++) {\n    const file = fileArray[i];\n    if (!file) continue;\n    const result = validateFileUpload(file, options);\n    if (!result.valid) {\n      return {\n        valid: false,\n        error: `File ${i + ONE} (${fileArray[i]?.name}): ${result.error}`,\n      };\n    }\n  }\n\n  return { valid: true };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-headers.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":68,"column":7,"nodeType":"MemberExpression","endLine":68,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":280,"column":55,"nodeType":"MemberExpression","endLine":280,"endColumn":70},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":282,"column":18,"nodeType":"MemberExpression","endLine":282,"endColumn":33}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å®‰å…¨å¤´éƒ¨å’Œé…ç½®å·¥å…·\n * Security headers and configuration utilities\n */\n\nimport { env } from '@/../env.mjs';\nimport { ONE, ZERO } from \"@/constants\";\nimport { logger } from '@/lib/logger';\n\n/**\n * Security headers for API responses\n */\nexport function getApiSecurityHeaders(): Record<string, string> {\n  return {\n    'X-Content-Type-Options': 'nosniff',\n    'X-Frame-Options': 'DENY',\n    'X-XSS-Protection': '1; mode=block',\n    'Referrer-Policy': 'strict-origin-when-cross-origin',\n    'Cache-Control': 'no-store, no-cache, must-revalidate, proxy-revalidate',\n    'Pragma': 'no-cache',\n    'Expires': '0',\n  };\n}\n\n/**\n * Security headers for web pages\n */\nexport function getWebSecurityHeaders(nonce?: string): Record<string, string> {\n  const headers: Record<string, string> = {\n    'X-Content-Type-Options': 'nosniff',\n    'X-Frame-Options': 'SAMEORIGIN',\n    'X-XSS-Protection': '1; mode=block',\n    'Referrer-Policy': 'strict-origin-when-cross-origin',\n    'Permissions-Policy': 'camera=(), microphone=(), geolocation=()',\n  };\n\n  // Add CSP header with nonce if provided\n  if (nonce) {\n    headers['Content-Security-Policy'] = generateCSP(nonce);\n  }\n\n  return headers;\n}\n\n/**\n * Generate Content Security Policy\n */\nexport function generateCSP(nonce?: string): string {\n  const policies = [\n    \"default-src 'self'\",\n    \"script-src 'self' 'unsafe-inline' 'unsafe-eval' https://challenges.cloudflare.com\",\n    \"style-src 'self' 'unsafe-inline' https://fonts.googleapis.com\",\n    \"font-src 'self' https://fonts.gstatic.com\",\n    \"img-src 'self' data: https: blob:\",\n    \"connect-src 'self' https://api.resend.com https://api.airtable.com https://challenges.cloudflare.com\",\n    \"frame-src 'self' https://challenges.cloudflare.com\",\n    \"object-src 'none'\",\n    \"base-uri 'self'\",\n    \"form-action 'self'\",\n    \"frame-ancestors 'self'\",\n    'upgrade-insecure-requests',\n  ];\n\n  if (nonce) {\n    // Replace 'unsafe-inline' with nonce for scripts\n    const scriptIndex = policies.findIndex((p) => p.startsWith('script-src'));\n    if (scriptIndex !== -ONE) {\n      policies[scriptIndex] =\n        `script-src 'self' 'nonce-${nonce}' https://challenges.cloudflare.com`;\n    }\n  }\n\n  return policies.join('; ');\n}\n\n/**\n * Generate strict CSP for production\n */\nexport function generateStrictCSP(nonce: string): string {\n  return [\n    \"default-src 'none'\",\n    `script-src 'self' 'nonce-${nonce}' https://challenges.cloudflare.com`,\n    \"style-src 'self' https://fonts.googleapis.com\",\n    \"font-src 'self' https://fonts.gstatic.com\",\n    \"img-src 'self' data: https:\",\n    \"connect-src 'self' https://api.resend.com https://api.airtable.com https://challenges.cloudflare.com\",\n    'frame-src https://challenges.cloudflare.com',\n    \"object-src 'none'\",\n    \"base-uri 'self'\",\n    \"form-action 'self'\",\n    \"frame-ancestors 'none'\",\n    'upgrade-insecure-requests',\n  ].join('; ');\n}\n\n/**\n * CORS headers configuration\n */\nexport function getCORSHeaders(origin?: string): Record<string, string> {\n  const allowedOrigins = [\n    'http://localhost:3000',\n    'http://localhost:3001',\n    'https://tucsenberg.com',\n    'https://www.tucsenberg.com',\n  ];\n\n  const headers: Record<string, string> = {\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers':\n      'Content-Type, Authorization, X-Requested-With',\n    'Access-Control-Max-Age': '86400', // 24 hours\n  };\n\n  if (origin && allowedOrigins.includes(origin)) {\n    headers['Access-Control-Allow-Origin'] = origin;\n    headers['Access-Control-Allow-Credentials'] = 'true';\n  } else if (process.env.NODE_ENV === 'development') {\n    headers['Access-Control-Allow-Origin'] = '*';\n  }\n\n  return headers;\n}\n\n/**\n * Verify Turnstile token\n */\nexport async function verifyTurnstileToken(\n  token: string,\n  remoteip?: string,\n): Promise<boolean> {\n  try {\n    const response = await fetch('/api/verify-turnstile', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ token, remoteip }),\n    });\n\n    const result = await response.json();\n    return result.success === true;\n  } catch (error) {\n    logger.error('Error verifying Turnstile token', { error: error as Error });\n    return false;\n  }\n}\n\n/**\n * Security configuration check\n */\nexport function checkSecurityConfig(testMode = false): {\n  configured: boolean;\n  issues: string[];\n  recommendations: string[];\n} {\n  const issues: string[] = [];\n  const recommendations: string[] = [];\n\n  // Use process.env directly in tests to avoid env validation issues\n  const nodeEnv = process.env.NODE_ENV;\n  const turnstileKey =\n    testMode || process.env.NODE_ENV === 'test'\n      ? process.env.TURNSTILE_SECRET_KEY\n      : env.TURNSTILE_SECRET_KEY;\n  const sentryDsn =\n    testMode || process.env.NODE_ENV === 'test'\n      ? process.env.SENTRY_DSN\n      : env.SENTRY_DSN;\n  const securityMode =\n    testMode || process.env.NODE_ENV === 'test'\n      ? process.env.NEXT_PUBLIC_SECURITY_MODE\n      : env.NEXT_PUBLIC_SECURITY_MODE;\n\n  // Check environment variables\n  if (!turnstileKey && nodeEnv === 'production') {\n    issues.push('Turnstile secret key not configured in production');\n  }\n\n  if (!sentryDsn && nodeEnv === 'production') {\n    recommendations.push('Consider configuring Sentry for error monitoring');\n  }\n\n  if (securityMode === 'relaxed' && nodeEnv === 'production') {\n    issues.push('Security mode is set to relaxed in production');\n  }\n\n  return {\n    configured: issues.length === ZERO,\n    issues,\n    recommendations,\n  };\n}\n\n/**\n * Security middleware configuration\n */\nexport interface SecurityMiddlewareConfig {\n  enableCSP: boolean;\n  enableHSTS: boolean;\n  enableXSSProtection: boolean;\n  enableFrameOptions: boolean;\n  enableContentTypeOptions: boolean;\n  enableReferrerPolicy: boolean;\n  enablePermissionsPolicy: boolean;\n}\n\n/**\n * Get security middleware headers\n */\nexport function getSecurityMiddlewareHeaders(\n  config: Partial<SecurityMiddlewareConfig> = {},\n  nonce?: string,\n): Record<string, string> {\n  const defaultConfig: SecurityMiddlewareConfig = {\n    enableCSP: true,\n    enableHSTS: true,\n    enableXSSProtection: true,\n    enableFrameOptions: true,\n    enableContentTypeOptions: true,\n    enableReferrerPolicy: true,\n    enablePermissionsPolicy: true,\n  };\n\n  const finalConfig = { ...defaultConfig, ...config };\n  const headers: Record<string, string> = {};\n\n  if (finalConfig.enableCSP) {\n    headers['Content-Security-Policy'] = generateCSP(nonce);\n  }\n\n  if (finalConfig.enableHSTS) {\n    headers['Strict-Transport-Security'] =\n      'max-age=31536000; includeSubDomains; preload';\n  }\n\n  if (finalConfig.enableXSSProtection) {\n    headers['X-XSS-Protection'] = '1; mode=block';\n  }\n\n  if (finalConfig.enableFrameOptions) {\n    headers['X-Frame-Options'] = 'SAMEORIGIN';\n  }\n\n  if (finalConfig.enableContentTypeOptions) {\n    headers['X-Content-Type-Options'] = 'nosniff';\n  }\n\n  if (finalConfig.enableReferrerPolicy) {\n    headers['Referrer-Policy'] = 'strict-origin-when-cross-origin';\n  }\n\n  if (finalConfig.enablePermissionsPolicy) {\n    headers['Permissions-Policy'] = 'camera=(), microphone=(), geolocation=()';\n  }\n\n  return headers;\n}\n\n/**\n * Validate security headers in response\n */\nexport function validateSecurityHeaders(headers: Record<string, string>): {\n  valid: boolean;\n  missing: string[];\n  recommendations: string[];\n} {\n  const requiredHeaders = [\n    'X-Content-Type-Options',\n    'X-Frame-Options',\n    'X-XSS-Protection',\n    'Referrer-Policy',\n  ];\n\n  const recommendedHeaders = [\n    'Content-Security-Policy',\n    'Strict-Transport-Security',\n    'Permissions-Policy',\n  ];\n\n  const missing = requiredHeaders.filter((header) => !headers[header]);\n  const recommendations = recommendedHeaders.filter(\n    (header) => !headers[header],\n  );\n\n  return {\n    valid: missing.length === ZERO,\n    missing,\n    recommendations,\n  };\n}\n\n/**\n * Generate security report\n */\nexport function generateSecurityReport(): {\n  timestamp: string;\n  environment: string;\n  config: ReturnType<typeof checkSecurityConfig>;\n  headers: ReturnType<typeof validateSecurityHeaders>;\n} {\n  const mockHeaders = getSecurityMiddlewareHeaders();\n\n  return {\n    timestamp: new Date().toISOString(),\n    environment: process.env.NODE_ENV || 'unknown',\n    config: checkSecurityConfig(),\n    headers: validateSecurityHeaders(mockHeaders),\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-object-access.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Function 'safeSetProperty' has too many parameters (4). Maximum allowed is 3.","line":49,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":49,"endColumn":50}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ZERO } from \"@/constants\";\n\n/**\n * å®‰å…¨å¯¹è±¡è®¿é—®å·¥å…·åº“\n * Security Object Access Utilities\n *\n * é˜²æ­¢å¯¹è±¡æ³¨å…¥æ”»å‡»çš„ç»Ÿä¸€å·¥å…·å‡½æ•°é›†åˆ\n * Unified utility functions to prevent object injection attacks\n */\n\n// æ­¤æ–‡ä»¶ä¸“é—¨ç”¨äºå®‰å…¨å¯¹è±¡è®¿é—®ï¼Œå†…éƒ¨çš„åŠ¨æ€è®¿é—®æ˜¯ç»è¿‡å®‰å…¨éªŒè¯çš„\n\n/**\n * é€šç”¨å®‰å…¨å¯¹è±¡å±æ€§è®¿é—®å‡½æ•°\n * Generic safe object property access function\n *\n * @param obj - è¦è®¿é—®çš„å¯¹è±¡\n * @param key - å±æ€§é”®\n * @param allowedKeys - å…è®¸çš„é”®ç™½åå•ï¼ˆå¯é€‰ï¼‰\n * @returns å±æ€§å€¼æˆ–undefined\n */\nexport function safeGetProperty<T extends object>(\n  obj: T,\n  key: string | number | symbol,\n  allowedKeys?: readonly (string | number | symbol)[],\n): T[keyof T] | undefined {\n  // å¦‚æœæä¾›äº†ç™½åå•ï¼Œè¿›è¡ŒéªŒè¯\n  if (allowedKeys && !allowedKeys.includes(key)) {\n    return undefined;\n  }\n\n  // å®‰å…¨çš„å±æ€§è®¿é—®\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key as keyof T];\n  }\n  return undefined;\n}\n\n/**\n * é€šç”¨å®‰å…¨å¯¹è±¡å±æ€§è®¾ç½®å‡½æ•°\n * Generic safe object property setter function\n *\n * @param obj - è¦è®¾ç½®å±æ€§çš„å¯¹è±¡\n * @param key - å±æ€§é”®\n * @param value - è¦è®¾ç½®çš„å€¼\n * @param allowedKeys - å…è®¸çš„é”®ç™½åå•ï¼ˆå¯é€‰ï¼‰\n * @returns æ˜¯å¦è®¾ç½®æˆåŠŸ\n */\nexport function safeSetProperty<T extends object>(\n  obj: T,\n  key: string | number | symbol,\n  value: unknown,\n  allowedKeys?: readonly (string | number | symbol)[],\n): boolean {\n  // å¦‚æœæä¾›äº†ç™½åå•ï¼Œè¿›è¡ŒéªŒè¯\n  if (allowedKeys && !allowedKeys.includes(key)) {\n    return false;\n  }\n\n  // å®‰å…¨çš„å±æ€§è®¾ç½®\n  try {\n    Object.defineProperty(obj, key, {\n      value,\n      writable: true,\n      enumerable: true,\n      configurable: true,\n    });\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * å®‰å…¨çš„è¯­è¨€é…ç½®è®¿é—®ï¼ˆä¸“ç”¨äºi18nï¼‰\n * Safe language config access (specific for i18n)\n */\nexport function safeGetLanguageConfig(\n  languageConfig: Record<string, unknown>,\n  locale: string,\n) {\n  // ç™½åå•éªŒè¯ - åªå…è®¸å·²çŸ¥çš„localeå€¼\n  const allowedLocales = ['en', 'zh'] as const;\n  type AllowedLocale = (typeof allowedLocales)[number];\n\n  if (!allowedLocales.includes(locale as AllowedLocale)) {\n    // è¿”å›é»˜è®¤é…ç½®ï¼ˆè‹±æ–‡ï¼‰\n    return safeGetProperty(languageConfig, 'en');\n  }\n\n  return safeGetProperty(languageConfig, locale);\n}\n\n/**\n * å®‰å…¨çš„è·¯å¾„æ˜ å°„è®¿é—®\n * Safe path mapping access\n */\nexport function safeGetPathMapping<T>(\n  pathMap: Record<string, T>,\n  path: string,\n  defaultValue: T,\n): T {\n  // å®‰å…¨çš„å±æ€§è®¿é—®\n  if (Object.prototype.hasOwnProperty.call(pathMap, path)) {\n    return pathMap[path as keyof typeof pathMap] ?? defaultValue;\n  }\n  return defaultValue;\n}\n\n/**\n * å®‰å…¨çš„é…ç½®å¯¹è±¡è®¿é—®\n * Safe config object access\n */\nexport function safeGetConfig<T extends Record<string, unknown>>(\n  config: T,\n  key: string,\n  allowedKeys: readonly string[],\n): T[keyof T] | undefined {\n  return safeGetProperty(config, key, allowedKeys);\n}\n\n/**\n * å®‰å…¨çš„åµŒå¥—å¯¹è±¡è®¿é—®\n * Safe nested object access\n */\nexport function safeGetNestedProperty(\n  obj: Record<string, unknown>,\n  path: string[],\n  allowedKeys?: readonly string[],\n): unknown {\n  let current: unknown = obj;\n\n  for (const key of path) {\n    if (current && typeof current === 'object') {\n      // å¦‚æœæä¾›äº†ç™½åå•ï¼Œè¿›è¡ŒéªŒè¯\n      if (allowedKeys && !allowedKeys.includes(key)) {\n        return undefined;\n      }\n\n      const currentObj = current as Record<string, unknown>;\n      if (Object.prototype.hasOwnProperty.call(currentObj, key)) {\n        current = currentObj[key as keyof typeof currentObj];\n      } else {\n        return undefined;\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  return current;\n}\n\n/**\n * å®‰å…¨çš„æ•°ç»„ç´¢å¼•è®¿é—®\n * Safe array index access\n */\nexport function safeGetArrayItem<T>(\n  array: readonly T[],\n  index: number,\n): T | undefined {\n  if (Array.isArray(array) && index >= ZERO && index < array.length) {\n    // ä½¿ç”¨ Object.getOwnPropertyDescriptor è¿›è¡Œå®‰å…¨è®¿é—®\n    const descriptor = Object.getOwnPropertyDescriptor(array, index);\n    return descriptor ? descriptor.value : undefined;\n  }\n  return undefined;\n}\n\n/**\n * å®‰å…¨çš„å¯¹è±¡é”®éå†\n * Safe object key iteration\n */\nexport function safeIterateObject<T extends Record<string, unknown>>(\n  obj: T,\n  callback: (key: string, value: T[keyof T]) => void,\n  allowedKeys?: readonly string[],\n): void {\n  for (const key of Object.keys(obj)) {\n    // å¦‚æœæä¾›äº†ç™½åå•ï¼Œè¿›è¡ŒéªŒè¯\n    if (allowedKeys && !allowedKeys.includes(key)) {\n      continue;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      callback(key, obj[key as keyof T]);\n    }\n  }\n}\n\n/**\n * åˆ›å»ºå®‰å…¨çš„å¯¹è±¡è®¿é—®å™¨\n * Create safe object accessor\n */\nexport function createSafeAccessor<T extends Record<string, unknown>>(\n  obj: T,\n  allowedKeys: readonly string[],\n) {\n  return {\n    get: (key: string) => safeGetProperty(obj, key, allowedKeys),\n    has: (key: string) =>\n      allowedKeys.includes(key) &&\n      Object.prototype.hasOwnProperty.call(obj, key),\n    keys: () => Object.keys(obj).filter((key) => allowedKeys.includes(key)),\n  };\n}\n\n/**\n * éªŒè¯å¯¹è±¡é”®çš„å®‰å…¨æ€§\n * Validate object key safety\n */\nexport function isKeySafe(\n  key: string,\n  allowedKeys: readonly string[],\n): boolean {\n  return allowedKeys.includes(key);\n}\n\n/**\n * å®‰å…¨çš„å¯¹è±¡åˆå¹¶\n * Safe object merge\n */\nexport function safeMergeObjects<T extends Record<string, unknown>>(\n  target: T,\n  source: Record<string, unknown>,\n  allowedKeys: readonly string[],\n): T {\n  const result = { ...target };\n\n  for (const key of Object.keys(source)) {\n    if (\n      allowedKeys.includes(key) &&\n      Object.prototype.hasOwnProperty.call(source, key)\n    ) {\n      // ä½¿ç”¨ Object.defineProperty è¿›è¡Œå®‰å…¨è®¾ç½®\n      const sourceValue = Object.getOwnPropertyDescriptor(source, key)?.value;\n      if (sourceValue !== undefined) {\n        Object.defineProperty(result, key, {\n          value: sourceValue,\n          writable: true,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * å¸¸ç”¨çš„ç™½åå•é…ç½®\n * Common whitelist configurations\n */\nexport const COMMON_WHITELISTS = {\n  LOCALES: ['en', 'zh'] as const,\n  PAGE_TYPES: [\n    'home',\n    'about',\n    'contact',\n    'blog',\n    'products',\n    'diagnostics',\n    'services',\n    'pricing',\n    'support',\n    'privacy',\n    'terms',\n  ] as const,\n  THEME_MODES: ['light', 'dark', 'system'] as const,\n  DETECTION_SOURCES: ['user', 'geo', 'browser'] as const,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-rate-limit.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":188,"column":16,"nodeType":"MemberExpression","endLine":188,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_20 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { MINUTE_MS } from \"@/constants/time\";\n\n/**\n * é€Ÿç‡é™åˆ¶å·¥å…·\n * Rate limiting utilities\n */\n\n/**\n * Rate limiting constants\n */\nconst RATE_LIMIT_CONSTANTS = {\n  DEFAULT_MAX_REQUESTS: COUNT_TEN,\n  DEFAULT_WINDOW_MS: MINUTE_MS, // 1 minute\n  CLEANUP_INTERVAL_MINUTES: COUNT_FIVE,\n  MINUTES_TO_MS: SECONDS_PER_MINUTE,\n  SECONDS_TO_MS: ANIMATION_DURATION_VERY_SLOW,\n} as const;\n\n/**\n * Rate limit entry interface\n */\ninterface RateLimitEntry {\n  count: number;\n  resetTime: number;\n}\n\n/**\n * Rate limit store\n */\nconst rateLimitStore = new Map<string, RateLimitEntry>();\n\n/**\n * Rate limiting utility\n */\nexport function rateLimit(\n  identifier: string,\n  maxRequests: number = RATE_LIMIT_CONSTANTS.DEFAULT_MAX_REQUESTS,\n  windowMs: number = RATE_LIMIT_CONSTANTS.DEFAULT_WINDOW_MS,\n): boolean {\n  const now = Date.now();\n  const entry = rateLimitStore.get(identifier);\n\n  if (!entry || now > entry.resetTime) {\n    // First request or window expired\n    rateLimitStore.set(identifier, {\n      count: ONE,\n      resetTime: now + windowMs,\n    });\n    return true;\n  }\n\n  if (entry.count >= maxRequests) {\n    // Rate limit exceeded\n    return false;\n  }\n\n  // Increment count\n  entry.count += ONE;\n  rateLimitStore.set(identifier, entry);\n  return true;\n}\n\n/**\n * Get rate limit status for an identifier\n */\nexport function getRateLimitStatus(identifier: string): {\n  remaining: number;\n  resetTime: number;\n  isLimited: boolean;\n} {\n  const now = Date.now();\n  const entry = rateLimitStore.get(identifier);\n\n  if (!entry || now > entry.resetTime) {\n    return {\n      remaining: RATE_LIMIT_CONSTANTS.DEFAULT_MAX_REQUESTS - ONE,\n      resetTime: now + RATE_LIMIT_CONSTANTS.DEFAULT_WINDOW_MS,\n      isLimited: false,\n    };\n  }\n\n  const remaining = Math.max(\n    ZERO,\n    RATE_LIMIT_CONSTANTS.DEFAULT_MAX_REQUESTS - entry.count,\n  );\n  return {\n    remaining,\n    resetTime: entry.resetTime,\n    isLimited: remaining === ZERO,\n  };\n}\n\n/**\n * Clean up expired rate limit entries\n */\nexport function cleanupRateLimit(): void {\n  const now = Date.now();\n  for (const [key, entry] of rateLimitStore.entries()) {\n    if (now > entry.resetTime) {\n      rateLimitStore.delete(key);\n    }\n  }\n}\n\n/**\n * Reset rate limit for a specific identifier\n */\nexport function resetRateLimit(identifier: string): void {\n  rateLimitStore.delete(identifier);\n}\n\n/**\n * Get all active rate limit entries (for debugging)\n */\nexport function getActiveLimits(): Array<{\n  identifier: string;\n  count: number;\n  resetTime: number;\n  remaining: number;\n}> {\n  const now = Date.now();\n  const active: Array<{\n    identifier: string;\n    count: number;\n    resetTime: number;\n    remaining: number;\n  }> = [];\n\n  for (const [identifier, entry] of rateLimitStore.entries()) {\n    if (now <= entry.resetTime) {\n      active.push({\n        identifier,\n        count: entry.count,\n        resetTime: entry.resetTime,\n        remaining: Math.max(\n          ZERO,\n          RATE_LIMIT_CONSTANTS.DEFAULT_MAX_REQUESTS - entry.count,\n        ),\n      });\n    }\n  }\n\n  return active;\n}\n\n/**\n * Advanced rate limiting with different tiers\n */\nexport interface RateLimitTier {\n  name: string;\n  maxRequests: number;\n  windowMs: number;\n}\n\nconst defaultTiers: Record<string, RateLimitTier> = {\n  strict: {\n    name: 'strict',\n    maxRequests: COUNT_FIVE,\n    windowMs: MINUTE_MS, // 1 minute\n  },\n  normal: {\n    name: 'normal',\n    maxRequests: COUNT_TEN,\n    windowMs: MINUTE_MS, // 1 minute\n  },\n  relaxed: {\n    name: 'relaxed',\n    maxRequests: MAGIC_20,\n    windowMs: MINUTE_MS, // 1 minute\n  },\n  premium: {\n    name: 'premium',\n    maxRequests: PERCENTAGE_FULL,\n    windowMs: MINUTE_MS, // 1 minute\n  },\n};\n\n/**\n * Rate limit with tier support\n */\nexport function rateLimitWithTier(\n  identifier: string,\n  tierName: keyof typeof defaultTiers = 'normal',\n): boolean {\n  const tier = defaultTiers[tierName];\n  if (!tier) {\n    throw new Error(`Unknown rate limit tier: ${tierName}`);\n  }\n\n  return rateLimit(identifier, tier.maxRequests, tier.windowMs);\n}\n\n/**\n * Create custom rate limit tier\n */\nexport function createRateLimitTier(\n  name: string,\n  maxRequests: number,\n  windowMs: number,\n): RateLimitTier {\n  return { name, maxRequests, windowMs };\n}\n\n/**\n * Sliding window rate limiter\n */\ninterface SlidingWindowEntry {\n  timestamps: number[];\n}\n\nconst slidingWindowStore = new Map<string, SlidingWindowEntry>();\n\n/**\n * Sliding window rate limiting\n */\nexport function slidingWindowRateLimit(\n  identifier: string,\n  maxRequests: number = RATE_LIMIT_CONSTANTS.DEFAULT_MAX_REQUESTS,\n  windowMs: number = RATE_LIMIT_CONSTANTS.DEFAULT_WINDOW_MS,\n): boolean {\n  const now = Date.now();\n  const windowStart = now - windowMs;\n\n  let entry = slidingWindowStore.get(identifier);\n  if (!entry) {\n    entry = { timestamps: [] };\n    slidingWindowStore.set(identifier, entry);\n  }\n\n  // Remove old timestamps outside the window\n  entry.timestamps = entry.timestamps.filter(\n    (timestamp) => timestamp > windowStart,\n  );\n\n  // Check if we're within the limit\n  if (entry.timestamps.length >= maxRequests) {\n    return false;\n  }\n\n  // Add current timestamp\n  entry.timestamps.push(now);\n  return true;\n}\n\n/**\n * Clean up sliding window entries\n */\nexport function cleanupSlidingWindow(): void {\n  const now = Date.now();\n  const maxAge = RATE_LIMIT_CONSTANTS.DEFAULT_WINDOW_MS * COUNT_PAIR; // Keep entries for 2x window size\n\n  for (const [key, entry] of slidingWindowStore.entries()) {\n    const oldestTimestamp = Math.min(...entry.timestamps);\n    if (now - oldestTimestamp > maxAge) {\n      slidingWindowStore.delete(key);\n    }\n  }\n}\n\n// Clean up rate limit entries every 5 minutes\nif (typeof setInterval !== 'undefined') {\n  setInterval(\n    () => {\n      cleanupRateLimit();\n      cleanupSlidingWindow();\n    },\n    RATE_LIMIT_CONSTANTS.CLEANUP_INTERVAL_MINUTES *\n      RATE_LIMIT_CONSTANTS.MINUTES_TO_MS *\n      RATE_LIMIT_CONSTANTS.SECONDS_TO_MS,\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-tokens.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":76,"column":5,"nodeType":"MemberExpression","endLine":76,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":76,"column":23,"nodeType":"MemberExpression","endLine":76,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":77,"column":5,"nodeType":"MemberExpression","endLine":77,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":77,"column":23,"nodeType":"MemberExpression","endLine":77,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":141,"column":24,"nodeType":"MemberExpression","endLine":141,"endColumn":32},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":165,"column":23,"nodeType":"MemberExpression","endLine":165,"endColumn":31}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_6 } from \"@/constants/count\";\nimport {\n  ANIMATION_DURATION_VERY_SLOW,\n  COUNT_PAIR,\n  HEX_MASK_6_BITS,\n  HEX_MASK_BIT_6,\n  HEX_MASK_HIGH_BIT,\n  HEX_MASK_LOW_NIBBLE,\n  MAGIC_8,\n  MAGIC_12,\n  MAGIC_16,\n  MAGIC_20,\n  MAGIC_32,\n  MAGIC_48,\n  MAGIC_64,\n  MAGIC_HEX_3,\n  MAGIC_HEX_8,\n  SECONDS_PER_MINUTE,\n  ZERO,\n} from '@/constants';\n\n/**\n * å®‰å…¨ä»¤ç‰Œç”Ÿæˆå·¥å…·\n * Security token generation utilities\n */\n\n/**\n * Token generation constants\n */\nconst TOKEN_CONSTANTS = {\n  // Token generation\n  DEFAULT_TOKEN_LENGTH: MAGIC_32,\n  HEX_RADIX: COUNT_PAIR,\n  HEX_PAD_LENGTH: COUNT_PAIR,\n  HEX_BASE: MAGIC_16,\n} as const;\n\n/**\n * Generate a secure random string\n */\nexport function generateSecureToken(\n  length: number = TOKEN_CONSTANTS.DEFAULT_TOKEN_LENGTH,\n): string {\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    // Generate half the length in bytes since each byte becomes COUNT_PAIR hex characters\n    const byteLength = Math.ceil(length / TOKEN_CONSTANTS.HEX_RADIX);\n    const array = new Uint8Array(byteLength);\n    crypto.getRandomValues(array);\n    const hex = Array.from(array, (byte) =>\n      byte\n        .toString(TOKEN_CONSTANTS.HEX_BASE)\n        .padStart(TOKEN_CONSTANTS.HEX_PAD_LENGTH, '0'),\n    ).join('');\n    return hex.substring(ZERO, length);\n  }\n\n  // Fallback for environments without crypto.getRandomValues\n  const chars =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  for (let i = ZERO; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}\n\n/**\n * Generate a secure random UUID v4\n */\nexport function generateUUID(): string {\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    const array = new Uint8Array(MAGIC_16);\n    crypto.getRandomValues(array);\n\n    // Set version (4) and variant bits\n    array[MAGIC_6] = (array[MAGIC_6]! & HEX_MASK_LOW_NIBBLE) | HEX_MASK_BIT_6;\n    array[MAGIC_8] = (array[MAGIC_8]! & HEX_MASK_6_BITS) | HEX_MASK_HIGH_BIT;\n\n    const hex = Array.from(array, (byte) =>\n      byte.toString(MAGIC_16).padStart(COUNT_PAIR, '0'),\n    ).join('');\n\n    return [\n      hex.substring(ZERO, MAGIC_8),\n      hex.substring(MAGIC_8, MAGIC_12),\n      hex.substring(MAGIC_12, MAGIC_16),\n      hex.substring(MAGIC_16, MAGIC_20),\n      hex.substring(MAGIC_20, MAGIC_32),\n    ].join('-');\n  }\n\n  // Fallback UUID generation\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * MAGIC_16) | 0;\n    const v = c === 'x' ? r : (r & MAGIC_HEX_3) | MAGIC_HEX_8;\n    return v.toString(MAGIC_16);\n  });\n}\n\n/**\n * Generate a secure random API key\n */\nexport function generateApiKey(prefix: string = 'sk'): string {\n  const randomPart = generateSecureToken(MAGIC_48);\n  return `${prefix}_${randomPart}`;\n}\n\n/**\n * Generate a secure session token\n */\nexport function generateSessionToken(): string {\n  return generateSecureToken(MAGIC_64);\n}\n\n/**\n * Generate a secure CSRF token\n */\nexport function generateCsrfToken(): string {\n  return generateSecureToken(MAGIC_32);\n}\n\n/**\n * Generate a secure nonce for CSP\n */\nexport function generateNonce(): string {\n  return generateSecureToken(MAGIC_16);\n}\n\n/**\n * Generate a secure one-time password (OTP)\n */\nexport function generateOTP(length: number = MAGIC_6): string {\n  const digits = '0123456789';\n  let result = '';\n\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    const array = new Uint8Array(length);\n    crypto.getRandomValues(array);\n\n    for (let i = ZERO; i < length; i++) {\n      result += digits[array[i]! % digits.length];\n    }\n  } else {\n    // Fallback\n    for (let i = ZERO; i < length; i++) {\n      result += digits[Math.floor(Math.random() * digits.length)];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Generate a secure verification code (alphanumeric)\n */\nexport function generateVerificationCode(length: number = MAGIC_8): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  let result = '';\n\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    const array = new Uint8Array(length);\n    crypto.getRandomValues(array);\n\n    for (let i = ZERO; i < length; i++) {\n      result += chars[array[i]! % chars.length];\n    }\n  } else {\n    // Fallback\n    for (let i = ZERO; i < length; i++) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Validate token format\n */\nexport function isValidToken(token: string, expectedLength?: number): boolean {\n  if (typeof token !== 'string' || token.length === ZERO) {\n    return false;\n  }\n\n  // Check if token contains only valid characters (alphanumeric and some special chars)\n  const validTokenRegex = /^[a-zA-Z0-9_-]+$/;\n  if (!validTokenRegex.test(token)) {\n    return false;\n  }\n\n  // Check length if specified\n  if (expectedLength && token.length !== expectedLength) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Validate UUID format\n */\nexport function isValidUUID(uuid: string): boolean {\n  const uuidRegex =\n    /^[0-9a-f]{MAGIC_8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{MAGIC_12}$/i;\n  return uuidRegex.test(uuid);\n}\n\n/**\n * Generate a secure random salt for password hashing\n */\nexport function generateSalt(length: number = MAGIC_16): string {\n  return generateSecureToken(length * COUNT_PAIR); // Double length for hex representation\n}\n\n/**\n * Token expiration utilities\n */\nexport interface TokenWithExpiry {\n  token: string;\n  expiresAt: number;\n}\n\n/**\n * Create a token with expiration\n */\nexport function createTokenWithExpiry(\n  tokenLength: number = MAGIC_32,\n  expiryMinutes: number = SECONDS_PER_MINUTE,\n): TokenWithExpiry {\n  return {\n    token: generateSecureToken(tokenLength),\n    expiresAt: Date.now() + expiryMinutes * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW,\n  };\n}\n\n/**\n * Check if token is expired\n */\nexport function isTokenExpired(tokenWithExpiry: TokenWithExpiry): boolean {\n  return Date.now() > tokenWithExpiry.expiresAt;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security-validation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EMAIL_MAX_LENGTH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":24},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":143,"column":14,"nodeType":"Literal","endLine":143,"endColumn":67},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":144,"column":14,"nodeType":"Literal","endLine":144,"endColumn":67}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { INPUT_VALIDATION_CONSTANTS } from \"@/constants/security-constants\";\nimport { ANIMATION_DURATION_VERY_SLOW, ZERO  } from '@/constants';\n\nconst {EMAIL_MAX_LENGTH} = INPUT_VALIDATION_CONSTANTS;\n/**\n * å®‰å…¨éªŒè¯å·¥å…·\n * Security validation utilities\n */\n\n/**\n * Security constants for validation\n */\nconst VALIDATION_CONSTANTS = {\n  // Email validation\n  MAX_EMAIL_LENGTH: INPUT_VALIDATION_CONSTANTS.EMAIL_MAX_LENGTH,\n} as const;\n\n/**\n * Sanitize user input to prevent XSS attacks\n */\nexport function sanitizeInput(input: string): string {\n  if (typeof input !== 'string') {\n    return '';\n  }\n\n  return input\n    .replace(/[<>]/g, '') // Remove angle brackets\n    .replace(/javascript:/gi, '') // Remove javascript: protocol\n    .replace(/on\\w+=/gi, '') // Remove event handlers\n    .replace(/data:/gi, '') // Remove data: protocol\n    .trim();\n}\n\n/**\n * Validate email address format\n */\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return (\n    emailRegex.test(email) &&\n    email.length <= VALIDATION_CONSTANTS.MAX_EMAIL_LENGTH\n  );\n}\n\n/**\n * Validate URL format and protocol\n */\nexport function isValidUrl(\n  url: string,\n  allowedProtocols: string[] = ['http:', 'https:'],\n): boolean {\n  try {\n    const urlObj = new URL(url);\n    return allowedProtocols.includes(urlObj.protocol);\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Validate and sanitize file path to prevent path traversal attacks\n */\nexport function sanitizeFilePath(filePath: string): string {\n  if (typeof filePath !== 'string') {\n    return '';\n  }\n\n  // Remove dangerous path components\n  return filePath\n    .replace(/\\.\\./g, '') // Remove parent directory references\n    .replace(/[<>:\"|?*]/g, '') // Remove invalid filename characters\n    .replace(/^\\/+/, '') // Remove leading slashes\n    .trim();\n}\n\n/**\n * Validate input length\n */\nexport function validateInputLength(\n  input: string,\n  minLength: number = ZERO,\n  maxLength: number = ANIMATION_DURATION_VERY_SLOW,\n): { valid: boolean; error?: string } {\n  if (typeof input !== 'string') {\n    return { valid: false, error: 'Input must be a string' };\n  }\n\n  if (input.length < minLength) {\n    return {\n      valid: false,\n      error: `Input must be at least ${minLength} characters`,\n    };\n  }\n\n  if (input.length > maxLength) {\n    return {\n      valid: false,\n      error: `Input must be no more than ${maxLength} characters`,\n    };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Check if string contains only allowed characters\n */\nexport function validateCharacters(\n  input: string,\n  allowedPattern: RegExp,\n): { valid: boolean; error?: string } {\n  if (typeof input !== 'string') {\n    return { valid: false, error: 'Input must be a string' };\n  }\n\n  if (!allowedPattern.test(input)) {\n    return { valid: false, error: 'Input contains invalid characters' };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate phone number format\n */\nexport function isValidPhoneNumber(phone: string): boolean {\n  // International phone number validation\n  const phoneRegex = /^[+]?[1-9][\\d]{0,15}$/;\n  const cleanPhone = phone.replace(/[\\s\\-()]/g, '');\n  return phoneRegex.test(cleanPhone);\n}\n\n/**\n * Validate and sanitize HTML content\n */\nexport function sanitizeHtml(html: string): string {\n  if (typeof html !== 'string') {\n    return '';\n  }\n\n  // Basic HTML sanitization - remove script tags and dangerous attributes\n  return html\n    .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n    .replace(/<iframe\\b[^<]*(?:(?!<\\/iframe>)<[^<]*)*<\\/iframe>/gi, '')\n    .replace(/on\\w+\\s*=\\s*[\"'][^\"']*[\"']/gi, '')\n    .replace(/javascript:/gi, '')\n    .replace(/data:/gi, '')\n    .trim();\n}\n\n/**\n * Validate JSON string\n */\nexport function isValidJson(jsonString: string): boolean {\n  try {\n    JSON.parse(jsonString);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Validate and sanitize user input for database queries\n */\nexport function sanitizeForDatabase(input: string): string {\n  if (typeof input !== 'string') {\n    return '';\n  }\n\n  // Basic SQL injection prevention\n  return input\n    .replace(/['\";\\\\]/g, '') // Remove quotes and backslashes\n    .replace(/--/g, '') // Remove SQL comments\n    .replace(/\\/\\*/g, '') // Remove block comment start\n    .replace(/\\*\\//g, '') // Remove block comment end\n    .trim();\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/security/object-guards.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1426,1429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1426,1429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2907,2910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2907,2910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3157,3160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3157,3160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3865,3868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3865,3868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5401,5404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5401,5404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":287,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5821,5824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5821,5824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":30,"column":12,"nodeType":"MemberExpression","endLine":30,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":44,"column":12,"nodeType":"MemberExpression","endLine":44,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":59,"column":5,"nodeType":"MemberExpression","endLine":59,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":73,"column":12,"nodeType":"MemberExpression","endLine":73,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":91,"column":16,"nodeType":"MemberExpression","endLine":91,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":98,"column":9,"nodeType":"MemberExpression","endLine":98,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":122,"column":35,"nodeType":"MemberExpression","endLine":122,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":131,"column":41,"nodeType":"MemberExpression","endLine":131,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":146,"column":7,"nodeType":"MemberExpression","endLine":146,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":146,"column":30,"nodeType":"MemberExpression","endLine":146,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":170,"column":17,"nodeType":"MemberExpression","endLine":170,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":270,"column":34,"nodeType":"MemberExpression","endLine":270,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":277,"column":47,"nodeType":"MemberExpression","endLine":277,"endColumn":57,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":295,"column":19,"nodeType":"MemberExpression","endLine":295,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å®‰å…¨å¯¹è±¡å±æ€§è®¿é—®å®ˆå«å·¥å…·\n * è§£å†³ security/detect-object-injection ESLint é”™è¯¯\n * æä¾›ç±»å‹å®‰å…¨çš„å¯¹è±¡å±æ€§è®¿é—®æ–¹æ³•\n */\n\n/* eslint-disable security/detect-object-injection */\n// æ­¤æ–‡ä»¶æ˜¯å®‰å…¨å®ˆå«å·¥å…·ï¼Œå†…éƒ¨ä½¿ç”¨å—æ§çš„åŠ¨æ€å±æ€§è®¿é—®æ˜¯å®‰å…¨çš„\n\n/**\n * å®‰å…¨æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ‹¥æœ‰æŒ‡å®šå±æ€§\n * æ›¿ä»£ç›´æ¥çš„ obj[key] è®¿é—®ï¼Œé¿å…å¯¹è±¡æ³¨å…¥é£é™©\n */\nexport const hasOwn = <T extends object>(\n  obj: T,\n  key: PropertyKey\n): key is keyof T => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\n/**\n * å®‰å…¨è·å–å¯¹è±¡å±æ€§å€¼\n * å¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œè¿”å› undefined\n */\nexport const safeGet = <T extends object, K extends PropertyKey>(\n  obj: T,\n  key: K\n): K extends keyof T ? T[K] : undefined => {\n  if (hasOwn(obj, key)) {\n    return obj[key] as K extends keyof T ? T[K] : undefined;\n  }\n  return undefined as K extends keyof T ? T[K] : undefined;\n};\n\n/**\n * å®‰å…¨è·å–å¯¹è±¡å±æ€§å€¼ï¼Œå¸¦é»˜è®¤å€¼\n */\nexport const safeGetWithDefault = <T extends object, K extends PropertyKey, D>(\n  obj: T,\n  key: K,\n  defaultValue: D\n): (K extends keyof T ? T[K] : never) | D => {\n  if (hasOwn(obj, key)) {\n    return obj[key] as (K extends keyof T ? T[K] : never) | D;\n  }\n  return defaultValue;\n};\n\n/**\n * å®‰å…¨è®¾ç½®å¯¹è±¡å±æ€§å€¼\n * åªæœ‰å½“å±æ€§å·²å­˜åœ¨æ—¶æ‰è®¾ç½®\n */\nexport const safeSet = <T extends object, K extends keyof T>(\n  obj: T,\n  key: K,\n  value: T[K]\n): boolean => {\n  if (hasOwn(obj, key)) {\n    obj[key] = value;\n    return true;\n  }\n  return false;\n};\n\n/**\n * å®‰å…¨åˆ é™¤å¯¹è±¡å±æ€§\n */\nexport const safeDelete = <T extends object>(\n  obj: T,\n  key: PropertyKey\n): boolean => {\n  if (hasOwn(obj, key)) {\n    delete (obj as any)[key];\n    return true;\n  }\n  return false;\n};\n\n/**\n * åˆ›å»ºå±æ€§ç™½åå•è®¿é—®å™¨\n * åªå…è®¸è®¿é—®é¢„å®šä¹‰çš„å±æ€§åˆ—è¡¨\n */\nexport const createWhitelistAccessor = <T extends object, K extends keyof T>(\n  allowedKeys: readonly K[]\n) => {\n  const keySet = new Set(allowedKeys);\n\n  return {\n    get: (obj: T, key: K): T[K] | undefined => {\n      if (keySet.has(key) && hasOwn(obj, key)) {\n        return obj[key];\n      }\n      return undefined;\n    },\n\n    set: (obj: T, key: K, value: T[K]): boolean => {\n      if (keySet.has(key) && hasOwn(obj, key)) {\n        obj[key] = value;\n        return true;\n      }\n      return false;\n    },\n\n    has: (obj: T, key: K): boolean => {\n      return keySet.has(key) && hasOwn(obj, key);\n    }\n  };\n};\n\n/**\n * å®‰å…¨çš„å¯¹è±¡é”®éå†\n * åªéå†å¯¹è±¡è‡ªæœ‰å±æ€§\n */\nexport const safeKeys = <T extends object>(obj: T): (keyof T)[] => {\n  return Object.keys(obj).filter(key => hasOwn(obj, key)) as (keyof T)[];\n};\n\n/**\n * å®‰å…¨çš„å¯¹è±¡å€¼éå†\n */\nexport const safeValues = <T extends object>(obj: T): T[keyof T][] => {\n  return safeKeys(obj).map(key => obj[key]);\n};\n\n/**\n * å®‰å…¨çš„å¯¹è±¡æ¡ç›®éå†\n */\nexport const safeEntries = <T extends object>(\n  obj: T\n): [keyof T, T[keyof T]][] => {\n  return safeKeys(obj).map(key => [key, obj[key]]);\n};\n\n/**\n * ç±»å‹å®‰å…¨çš„å¯¹è±¡åˆå¹¶\n * åªåˆå¹¶æºå¯¹è±¡ä¸­å­˜åœ¨çš„å±æ€§\n */\nexport const safeMerge = <T extends object, U extends object>(\n  target: T,\n  source: U\n): T & Partial<U> => {\n  const result = { ...target } as T & Partial<U>;\n\n  for (const key of safeKeys(source)) {\n    if (hasOwn(source, key)) {\n      (result as any)[key] = source[key];\n    }\n  }\n\n  return result;\n};\n\n/**\n * å®‰å…¨çš„æ·±åº¦å±æ€§è®¿é—®\n * æ”¯æŒç‚¹å·åˆ†éš”çš„å±æ€§è·¯å¾„ï¼Œå¦‚ 'user.profile.name'\n */\nexport const safeDeepGet = <T extends object>(\n  obj: T,\n  path: string\n): unknown => {\n  const keys = path.split('.');\n  let current: any = obj;\n\n  for (const key of keys) {\n    if (current === null || current === undefined) {\n      return undefined;\n    }\n\n    if (typeof current === 'object' && hasOwn(current, key)) {\n      current = current[key];\n    } else {\n      return undefined;\n    }\n  }\n\n  return current;\n};\n\n/**\n * éªŒè¯å¯¹è±¡ç»“æ„æ˜¯å¦ç¬¦åˆé¢„æœŸ\n * æ£€æŸ¥å¿…éœ€å±æ€§æ˜¯å¦å­˜åœ¨\n */\nexport const validateObjectStructure = <T extends object>(\n  obj: T,\n  requiredKeys: (keyof T)[]\n): boolean => {\n  return requiredKeys.every(key => hasOwn(obj, key));\n};\n\n/**\n * åˆ›å»ºç±»å‹å®‰å…¨çš„å¯¹è±¡è®¿é—®ä»£ç†\n * æä¾›è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥å’Œå±æ€§è®¿é—®æ§åˆ¶\n */\nexport const createSafeProxy = <T extends object>(\n  obj: T,\n  options: {\n    allowedKeys?: (keyof T)[];\n    readOnly?: boolean;\n    validator?: (key: keyof T, value: any) => boolean;\n  } = {}\n): T => {\n  const { allowedKeys, readOnly = false, validator } = options;\n  const keySet = allowedKeys ? new Set(allowedKeys) : null;\n\n  return new Proxy(obj, {\n    get(target, prop) {\n      if (typeof prop === 'string' || typeof prop === 'symbol') {\n        if (keySet && !keySet.has(prop as keyof T)) {\n          return undefined;\n        }\n\n        if (hasOwn(target, prop)) {\n          return target[prop as keyof T];\n        }\n      }\n      return undefined;\n    },\n\n    set(target, prop, value) {\n      if (readOnly) {\n        return false;\n      }\n\n      if (typeof prop === 'string' || typeof prop === 'symbol') {\n        if (keySet && !keySet.has(prop as keyof T)) {\n          return false;\n        }\n\n        if (validator && !validator(prop as keyof T, value)) {\n          return false;\n        }\n\n        if (hasOwn(target, prop)) {\n          target[prop as keyof T] = value;\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    has(target, prop) {\n      if (typeof prop === 'string' || typeof prop === 'symbol') {\n        if (keySet && !keySet.has(prop as keyof T)) {\n          return false;\n        }\n        return hasOwn(target, prop);\n      }\n      return false;\n    },\n\n    ownKeys(target) {\n      const keys = Object.keys(target).filter(key => hasOwn(target, key));\n      return keySet ? keys.filter(key => keySet.has(key as keyof T)) : keys;\n    }\n  });\n};\n\n/**\n * å¸¸ç”¨çš„å®‰å…¨è®¿é—®æ¨¡å¼\n */\nexport const SafeAccess = {\n  /**\n   * å®‰å…¨è®¿é—®é…ç½®å¯¹è±¡\n   */\n  config: <T extends Record<string, any>>(\n    config: T,\n    key: string\n  ): T[keyof T] | undefined => {\n    return hasOwn(config, key) ? config[key] : undefined;\n  },\n\n  /**\n   * å®‰å…¨è®¿é—®æ•°ç»„å…ƒç´ \n   */\n  array: <T>(arr: T[], index: number): T | undefined => {\n    return index >= 0 && index < arr.length ? arr[index] : undefined;\n  },\n\n  /**\n   * å®‰å…¨è®¿é—®åµŒå¥—å¯¹è±¡\n   */\n  nested: <T extends object>(\n    obj: T,\n    ...keys: string[]\n  ): unknown => {\n    let current: any = obj;\n\n    for (const key of keys) {\n      if (current === null || current === undefined) {\n        return undefined;\n      }\n\n      if (typeof current === 'object' && hasOwn(current, key)) {\n        current = current[key];\n      } else {\n        return undefined;\n      }\n    }\n\n    return current;\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/seo-metadata.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/config/paths' import is duplicated.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":3,"endColumn":61}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":166,"column":7,"nodeType":"MemberExpression","endLine":166,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable security/detect-object-injection */\nimport type { Locale } from '@/config/paths';\nimport { SITE_CONFIG, type PageType } from '@/config/paths';\nimport { ONE } from \"@/constants\";\nimport {\n  generateCanonicalURL,\n  generateLanguageAlternates,\n} from '@/services/url-generator';\nimport type { Metadata } from 'next';\nimport { getTranslations } from 'next-intl/server';\n\n// é‡æ–°å¯¼å‡ºç±»å‹ä»¥ä¿æŒå‘åå…¼å®¹\nexport type { Locale, PageType } from '@/config/paths';\n\ninterface SEOConfig {\n  title?: string;\n  description?: string;\n  keywords?: string[];\n  image?: string;\n  type?: 'website' | 'article' | 'product';\n  publishedTime?: string;\n  modifiedTime?: string;\n  authors?: string[];\n  section?: string;\n}\n\n/**\n * ç”Ÿæˆæœ¬åœ°åŒ–å…ƒæ•°æ®\n */\nexport async function generateLocalizedMetadata(\n  locale: Locale,\n  pageType: PageType,\n  config: SEOConfig = {},\n): Promise<Metadata> {\n  // ä½¿ç”¨åŸå§‹çš„getTranslationsï¼Œç¼“å­˜å·²åœ¨åº•å±‚å®ç°\n  const t = await getTranslations({ locale, namespace: 'seo' });\n\n  const title =\n    config.title || t('title', { defaultValue: SITE_CONFIG.seo.defaultTitle });\n  const description =\n    config.description ||\n    t('description', {\n      defaultValue: SITE_CONFIG.seo.defaultDescription,\n    });\n  const siteName = t('siteName', { defaultValue: SITE_CONFIG.name });\n\n  const metadata: Metadata = {\n    title,\n    description,\n    keywords: config.keywords,\n\n    // Open Graphæœ¬åœ°åŒ–\n    openGraph: {\n      title,\n      description,\n      siteName,\n      locale,\n      type: (config.type === 'product' ? 'website' : config.type) || 'website',\n      images: config.image ? [{ url: config.image }] : undefined,\n      publishedTime: config.publishedTime,\n      modifiedTime: config.modifiedTime,\n      authors: config.authors,\n      section: config.section,\n    },\n\n    // Twitter Card\n    twitter: {\n      card: 'summary_large_image',\n      title,\n      description,\n      images: config.image ? [config.image] : undefined,\n    },\n\n    // hreflangå’Œcanonicalé“¾æ¥\n    alternates: {\n      canonical: generateCanonicalURL(pageType, locale),\n      languages: generateLanguageAlternates(pageType),\n    },\n\n    // å…¶ä»–å…ƒæ•°æ®\n    robots: {\n      index: true,\n      follow: true,\n      googleBot: {\n        'index': true,\n        'follow': true,\n        'max-video-preview': -ONE,\n        'max-image-preview': 'large',\n        'max-snippet': -ONE,\n      },\n    },\n\n    // éªŒè¯æ ‡ç­¾\n    verification: {\n      google: process.env['GOOGLE_SITE_VERIFICATION'],\n      yandex: process.env['YANDEX_VERIFICATION'],\n    },\n  };\n\n  return metadata;\n}\n\n/**\n * ç”Ÿæˆé¡µé¢ç‰¹å®šçš„SEOé…ç½®\n */\nexport function createPageSEOConfig(\n  pageType: PageType,\n  customConfig: Partial<SEOConfig> = {},\n): SEOConfig {\n  const baseConfigs: Record<PageType, SEOConfig> = {\n    home: {\n      type: 'website' as const,\n      keywords: [\n        ...SITE_CONFIG.seo.keywords,\n        'shadcn/ui',\n        'Radix UI',\n        'Modern Web',\n        'Enterprise Platform',\n        'B2B Solution',\n      ],\n      image: '/images/og-image.jpg',\n    },\n    about: {\n      type: 'website' as const,\n      keywords: ['About', 'Company', 'Team', 'Enterprise'],\n    },\n    contact: {\n      type: 'website' as const,\n      keywords: ['Contact', 'Support', 'Business'],\n    },\n    blog: {\n      type: 'article' as const,\n      keywords: ['Blog', 'Articles', 'Technology', 'Insights'],\n    },\n    products: {\n      type: 'website' as const,\n      keywords: ['Products', 'Solutions', 'Enterprise', 'B2B'],\n    },\n    diagnostics: {\n      type: 'website' as const,\n      keywords: ['Diagnostics', 'Tools', 'Development', 'Debug'],\n    },\n    services: {\n      type: 'website' as const,\n      keywords: ['Services', 'Solutions', 'Enterprise', 'B2B'],\n    },\n    pricing: {\n      type: 'website' as const,\n      keywords: ['Pricing', 'Plans', 'Enterprise', 'B2B'],\n    },\n    support: {\n      type: 'website' as const,\n      keywords: ['Support', 'Help', 'Documentation', 'Service'],\n    },\n    privacy: {\n      type: 'website' as const,\n      keywords: ['Privacy', 'Policy', 'Data Protection'],\n    },\n    terms: {\n      type: 'website' as const,\n      keywords: ['Terms', 'Conditions', 'Legal'],\n    },\n  };\n\n  const baseConfig = Object.prototype.hasOwnProperty.call(baseConfigs, pageType)\n    ? baseConfigs[pageType]\n    : baseConfigs.home;\n\n  return {\n    ...baseConfig,\n    ...customConfig,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/site-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/structured-data-generators.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/structured-data-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/structured-data-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/structured-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/tech-stack-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/theme-analytics-core.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Method 'recordThemeSwitch' has too many parameters (5). Maximum allowed is 3.","line":59,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":59,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * ä¸»é¢˜åˆ†ææ ¸å¿ƒç±»\n * Theme analytics core class\n */\nimport { MAGIC_0_1 } from \"@/constants/decimal\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_TRIPLE, DAYS_PER_MONTH, HOURS_PER_DAY, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { ThemeAnalyticsUtils } from '@/lib/theme-analytics-utils';\nimport * as Sentry from '@sentry/nextjs';\nimport type {\n  ThemeAnalyticsConfig,\n  ThemePerformanceMetrics,\n  ThemePerformanceSummary,\n  ThemeSwitchPattern,\n  ThemeUsageStats,\n} from '@/lib/theme-analytics-types';\n\n/**\n * ä¸»é¢˜åˆ†æç®¡ç†å™¨\n * è´Ÿè´£æ”¶é›†ã€åˆ†æå’ŒæŠ¥å‘Šä¸»é¢˜ç›¸å…³çš„æ€§èƒ½å’Œä½¿ç”¨æ•°æ®\n */\nexport class ThemeAnalytics {\n  private config: ThemeAnalyticsConfig;\n  private performanceMetrics: ThemePerformanceMetrics[] = [];\n  private usageStats: Map<string, ThemeUsageStats> = new Map();\n  private switchPatterns: ThemeSwitchPattern[] = [];\n  private currentTheme: string = 'system';\n  private sessionStartTime: number = Date.now();\n  private lastSwitchTime: number = ZERO;\n\n  /**\n   * è·å–å½“å‰ä¸»é¢˜\n   */\n  getCurrentTheme(): string {\n    return this.currentTheme;\n  }\n\n  constructor(config?: Partial<ThemeAnalyticsConfig>) {\n    this.config = {\n      enabled: process.env.NODE_ENV === 'production',\n      performanceThreshold: PERCENTAGE_FULL, // 100ms\n      sampleRate: MAGIC_0_1, // 10% é‡‡æ ·\n      enableDetailedTracking: true,\n      enableUserBehaviorAnalysis: true,\n      ...config,\n    };\n\n    // åˆå§‹åŒ–Sentryè‡ªå®šä¹‰æ ‡ç­¾\n    if (this.config.enabled) {\n      Sentry.setTag('feature', 'theme-analytics');\n    }\n  }\n\n  /**\n   * è®°å½•ä¸»é¢˜åˆ‡æ¢æ€§èƒ½\n   */\n  recordThemeSwitch(\n    fromTheme: string,\n    toTheme: string,\n    startTime: number,\n    endTime: number,\n    supportsViewTransitions: boolean = false,\n  ): void {\n    if (\n      !this.config.enabled ||\n      !ThemeAnalyticsUtils.shouldSample(this.config.sampleRate)\n    ) {\n      return;\n    }\n\n    const switchDuration = endTime - startTime;\n    const now = Date.now();\n\n    const metrics: ThemePerformanceMetrics = {\n      switchDuration,\n      fromTheme,\n      toTheme,\n      timestamp: now,\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n      viewportSize: ThemeAnalyticsUtils.getViewportSize(),\n      supportsViewTransitions,\n    };\n\n    // å­˜å‚¨æ€§èƒ½æŒ‡æ ‡\n    this.performanceMetrics.push(metrics);\n    this.lastSwitchTime = now;\n\n    // æ›´æ–°ä½¿ç”¨ç»Ÿè®¡\n    ThemeAnalyticsUtils.updateUsageStats(\n      this.usageStats,\n      toTheme,\n      now,\n      this.lastSwitchTime,\n    );\n\n    // å‘é€åˆ°Sentry\n    ThemeAnalyticsUtils.sendPerformanceMetrics(metrics);\n\n    // æ£€æŸ¥æ€§èƒ½é˜ˆå€¼\n    if (switchDuration > this.config.performanceThreshold) {\n      ThemeAnalyticsUtils.reportPerformanceIssue(metrics);\n    }\n\n    // åˆ†æåˆ‡æ¢æ¨¡å¼\n    if (this.config.enableUserBehaviorAnalysis) {\n      ThemeAnalyticsUtils.analyzeSwitchPattern(\n        this.switchPatterns,\n        fromTheme,\n        toTheme,\n        switchDuration,\n      );\n    }\n\n    // æ¸…ç†æ—§æ•°æ®\n    this.cleanupOldData();\n  }\n\n  /**\n   * è®°å½•ä¸»é¢˜åå¥½\n   */\n  recordThemePreference(theme: string): void {\n    if (!this.config.enabled) return;\n\n    this.currentTheme = theme;\n\n    // å‘é€ç”¨æˆ·åå¥½æ•°æ®åˆ°Sentry\n    Sentry.setUser({\n      themePreference: theme,\n    });\n\n    Sentry.addBreadcrumb({\n      category: 'theme',\n      message: `User selected theme: ${theme}`,\n      level: 'info',\n      data: {\n        theme,\n        timestamp: Date.now(),\n      },\n    });\n\n    // è®°å½•ä¸»é¢˜åå¥½äº‹ä»¶\n    Sentry.addBreadcrumb({\n      category: 'user-preference',\n      message: `Theme preference set to ${theme}`,\n      level: 'info',\n      data: {\n        theme,\n        sessionDuration: Date.now() - this.sessionStartTime,\n      },\n    });\n  }\n\n  /**\n   * è·å–æ€§èƒ½æ‘˜è¦\n   */\n  getPerformanceSummary(): ThemePerformanceSummary {\n    return ThemeAnalyticsUtils.generatePerformanceSummary(\n      this.performanceMetrics,\n      this.usageStats,\n    );\n  }\n\n  /**\n   * è·å–ä¸»é¢˜ä½¿ç”¨ç»Ÿè®¡\n   */\n  getUsageStatistics(): ThemeUsageStats[] {\n    return Array.from(this.usageStats.values()).sort(\n      (a, b) => b.count - a.count,\n    );\n  }\n\n  /**\n   * å‘é€æ€§èƒ½æŠ¥å‘Šåˆ°Sentry\n   */\n  sendPerformanceReport(): void {\n    if (!this.config.enabled) return;\n\n    const summary = this.getPerformanceSummary();\n    const usageStats = this.getUsageStatistics();\n\n    // å‘é€æ€§èƒ½æ‘˜è¦\n    Sentry.addBreadcrumb({\n      category: 'theme-analytics',\n      message: 'Theme performance report',\n      level: 'info',\n      data: ThemeAnalyticsUtils.formatPerformanceData(summary),\n    });\n\n    // å‘é€ä½¿ç”¨ç»Ÿè®¡\n    Sentry.setContext('theme-usage', {\n      statistics: usageStats.slice(ZERO, COUNT_FIVE), // åªå‘é€å‰COUNT_FIVEä¸ªæœ€å¸¸ç”¨çš„ä¸»é¢˜\n      totalThemes: usageStats.length,\n      sessionDuration: Date.now() - this.sessionStartTime,\n    });\n\n    // å‘é€åˆ‡æ¢æ¨¡å¼åˆ†æ\n    if (\n      this.config.enableUserBehaviorAnalysis &&\n      this.switchPatterns.length > ZERO\n    ) {\n      const topPatterns = this.switchPatterns\n        .sort((a, b) => b.frequency - a.frequency)\n        .slice(ZERO, COUNT_TRIPLE);\n\n      Sentry.setContext('theme-patterns', {\n        topPatterns: topPatterns.map((p) => ({\n          sequence: p.sequence.join(' â†’ '),\n          frequency: p.frequency,\n          avgDuration: Math.round(p.avgDuration),\n        })),\n      });\n    }\n\n    // å‘é€è‡ªå®šä¹‰äº‹ä»¶\n    Sentry.captureMessage('Theme Analytics Report', 'info');\n  }\n\n  /**\n   * é‡ç½®åˆ†ææ•°æ®\n   */\n  reset(): void {\n    this.performanceMetrics = [];\n    this.usageStats.clear();\n    this.switchPatterns = [];\n    this.sessionStartTime = Date.now();\n    this.lastSwitchTime = ZERO;\n  }\n\n  /**\n   * è·å–é…ç½®\n   */\n  getConfig(): ThemeAnalyticsConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * æ›´æ–°é…ç½®\n   */\n  updateConfig(newConfig: Partial<ThemeAnalyticsConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  /**\n   * æ¸…ç†æ—§æ•°æ®\n   */\n  private cleanupOldData(): void {\n    const hoursInDay = HOURS_PER_DAY;\n    const minutesInHour = SECONDS_PER_MINUTE;\n    const secondsInMinute = SECONDS_PER_MINUTE;\n    const millisecondsInSecond = ANIMATION_DURATION_VERY_SLOW;\n    const maxAge =\n      hoursInDay * minutesInHour * secondsInMinute * millisecondsInSecond; // 24å°æ—¶\n\n    ThemeAnalyticsUtils.cleanupOldData(this.performanceMetrics, maxAge);\n\n    // æ¸…ç†ä½¿ç”¨ç»Ÿè®¡ä¸­çš„è¿‡æœŸæ•°æ®\n    const cutoffTime = Date.now() - maxAge;\n    for (const [theme, stats] of this.usageStats.entries()) {\n      if (stats.lastUsed < cutoffTime) {\n        this.usageStats.delete(theme);\n      }\n    }\n\n    // æ¸…ç†åˆ‡æ¢æ¨¡å¼æ•°æ®ï¼ˆä¿ç•™æœ€è¿‘çš„æ¨¡å¼ï¼‰\n    if (this.switchPatterns.length > PERCENTAGE_HALF) {\n      this.switchPatterns = this.switchPatterns\n        .sort((a, b) => b.frequency - a.frequency)\n        .slice(ZERO, DAYS_PER_MONTH);\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/theme-analytics-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/theme-analytics-utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":29,"column":28,"nodeType":"MemberExpression","endLine":29,"endColumn":39},{"ruleId":"max-params","severity":2,"message":"Static method 'updateUsageStats' has too many parameters (4). Maximum allowed is 3.","line":86,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":86,"endColumn":26},{"ruleId":"max-params","severity":2,"message":"Static method 'analyzeSwitchPattern' has too many parameters (4). Maximum allowed is 3.","line":110,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":110,"endColumn":30}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ä¸»é¢˜åˆ†æå·¥å…·å‡½æ•°\n * Theme analytics utility functions\n */\n\nimport * as Sentry from '@sentry/nextjs';\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, HOURS_PER_DAY, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport type {\n  ThemePerformanceMetrics,\n  ThemePerformanceSummary,\n  ThemeSwitchPattern,\n  ThemeUsageStats,\n} from '@/lib/theme-analytics-types';\n\n/**\n * ä¸»é¢˜åˆ†æå·¥å…·ç±»\n */\nexport class ThemeAnalyticsUtils {\n  /**\n   * æ£€æŸ¥æ˜¯å¦åº”è¯¥é‡‡æ ·\n   */\n  static shouldSample(sampleRate: number): boolean {\n    // ä½¿ç”¨crypto.getRandomValues()æ›¿ä»£Math.random()ä»¥æé«˜å®‰å…¨æ€§\n    if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n      const array = new Uint32Array(ONE);\n      crypto.getRandomValues(array);\n      const maxUint32 = ZERO;\n      const randomValue = (array[ZERO] || ZERO) / maxUint32;\n      return randomValue < sampleRate;\n    }\n\n    // é™çº§åˆ°Math.random()\n    return Math.random() < sampleRate;\n  }\n\n  /**\n   * è·å–è§†å£å¤§å°\n   */\n  static getViewportSize(): { width: number; height: number } {\n    if (typeof window !== 'undefined') {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n      };\n    }\n    return { width: ZERO, height: ZERO };\n  }\n\n  /**\n   * å‘é€æ€§èƒ½æŒ‡æ ‡åˆ°Sentry\n   */\n  static sendPerformanceMetrics(metrics: ThemePerformanceMetrics): void {\n    Sentry.addBreadcrumb({\n      category: 'theme-performance',\n      message: `Theme switched from ${metrics.fromTheme} to ${metrics.toTheme}`,\n      level: 'info',\n      data: {\n        duration: metrics.switchDuration,\n        supportsViewTransitions: metrics.supportsViewTransitions,\n      },\n    });\n  }\n\n  /**\n   * æŠ¥å‘Šæ€§èƒ½é—®é¢˜\n   */\n  static reportPerformanceIssue(metrics: ThemePerformanceMetrics): void {\n    Sentry.captureMessage(\n      `Slow theme switch detected: ${metrics.switchDuration}ms`,\n      'warning',\n    );\n\n    Sentry.setContext('theme-performance', {\n      fromTheme: metrics.fromTheme,\n      toTheme: metrics.toTheme,\n      duration: metrics.switchDuration,\n      viewportSize: metrics.viewportSize,\n      supportsViewTransitions: metrics.supportsViewTransitions,\n    });\n  }\n\n  /**\n   * æ›´æ–°ä½¿ç”¨ç»Ÿè®¡\n   */\n  static updateUsageStats(\n    usageStats: Map<string, ThemeUsageStats>,\n    theme: string,\n    timestamp: number,\n    lastSwitchTime: number,\n  ): void {\n    const existing = usageStats.get(theme);\n    if (existing) {\n      existing.count += ONE;\n      existing.lastUsed = timestamp;\n      existing.sessionDuration += timestamp - lastSwitchTime;\n    } else {\n      usageStats.set(theme, {\n        theme,\n        count: ONE,\n        lastUsed: timestamp,\n        sessionDuration: ZERO,\n      });\n    }\n  }\n\n  /**\n   * åˆ†æåˆ‡æ¢æ¨¡å¼\n   */\n  static analyzeSwitchPattern(\n    switchPatterns: ThemeSwitchPattern[],\n    fromTheme: string,\n    toTheme: string,\n    duration: number,\n  ): void {\n    const sequence = [fromTheme, toTheme];\n    const sequenceKey = sequence.join('-');\n\n    const existing = switchPatterns.find(\n      (p) => p.sequence.join('-') === sequenceKey,\n    );\n\n    if (existing) {\n      existing.frequency += ONE;\n      existing.avgDuration = (existing.avgDuration + duration) / COUNT_PAIR;\n    } else {\n      switchPatterns.push({\n        sequence,\n        frequency: ONE,\n        avgDuration: duration,\n        timeOfDay: new Date().getHours(),\n      });\n    }\n  }\n\n  /**\n   * æ¸…ç†æ—§æ•°æ®\n   */\n  static cleanupOldData(\n    performanceMetrics: ThemePerformanceMetrics[],\n    maxAge: number = HOURS_PER_DAY * SECONDS_PER_MINUTE * SECONDS_PER_MINUTE * ANIMATION_DURATION_VERY_SLOW, // HOURS_PER_DAYå°æ—¶\n  ): void {\n    const cutoffTime = Date.now() - maxAge;\n\n    // æ¸…ç†æ€§èƒ½æŒ‡æ ‡\n    const validMetrics = performanceMetrics.filter(\n      (metric) => metric.timestamp > cutoffTime,\n    );\n\n    // æ¸…ç©ºåŸæ•°ç»„å¹¶æ·»åŠ æœ‰æ•ˆæ•°æ®\n    performanceMetrics.length = ZERO;\n    performanceMetrics.push(...validMetrics);\n  }\n\n  /**\n   * ç”Ÿæˆæ€§èƒ½æ‘˜è¦\n   */\n  static generatePerformanceSummary(\n    performanceMetrics: ThemePerformanceMetrics[],\n    usageStats: Map<string, ThemeUsageStats>,\n  ): ThemePerformanceSummary {\n    if (performanceMetrics.length === ZERO) {\n      return {\n        totalSwitches: ZERO,\n        averageDuration: ZERO,\n        slowSwitches: ZERO,\n        fastestSwitch: ZERO,\n        slowestSwitch: ZERO,\n        mostUsedTheme: 'system',\n        viewTransitionSupport: false,\n      };\n    }\n\n    const durations = performanceMetrics.map((m) => m.switchDuration);\n    const averageDuration =\n      durations.reduce((a, b) => a + b, ZERO) / durations.length;\n    const slowSwitches = durations.filter((d) => d > PERCENTAGE_FULL).length; // è¶…è¿‡100msçš„åˆ‡æ¢\n    const fastestSwitch = Math.min(...durations);\n    const slowestSwitch = Math.max(...durations);\n\n    // æ‰¾å‡ºæœ€å¸¸ç”¨çš„ä¸»é¢˜\n    const usageArray = Array.from(usageStats.values());\n    const mostUsedTheme =\n      usageArray.length > ZERO\n        ? usageArray.reduce((a, b) => (a.count > b.count ? a : b)).theme\n        : 'system';\n\n    // æ£€æŸ¥View Transitionsæ”¯æŒ\n    const viewTransitionSupport = performanceMetrics.some(\n      (m) => m.supportsViewTransitions,\n    );\n\n    return {\n      totalSwitches: performanceMetrics.length,\n      averageDuration,\n      slowSwitches,\n      fastestSwitch,\n      slowestSwitch,\n      mostUsedTheme,\n      viewTransitionSupport,\n    };\n  }\n\n  /**\n   * æ ¼å¼åŒ–æ€§èƒ½æ•°æ®ç”¨äºæŠ¥å‘Š\n   */\n  static formatPerformanceData(\n    summary: ThemePerformanceSummary,\n  ): Record<string, unknown> {\n    return {\n      total_switches: summary.totalSwitches,\n      avg_duration_ms: Math.round(summary.averageDuration),\n      slow_switches: summary.slowSwitches,\n      fastest_switch_ms: summary.fastestSwitch,\n      slowest_switch_ms: summary.slowestSwitch,\n      most_used_theme: summary.mostUsedTheme,\n      view_transition_support: summary.viewTransitionSupport,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/theme-analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-benchmarks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-manager-core.ts","messages":[{"ruleId":"require-await","severity":2,"message":"Async method 'validateTranslations' has no 'await' expression.","line":95,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":95,"endColumn":29,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2566,2572],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'checkLingoTranslation' has no 'await' expression.","line":102,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":102,"endColumn":30,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2732,2738],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'validateTranslationConsistency' has no 'await' expression.","line":120,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":120,"endColumn":39,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3046,3052],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'generateQualityReport' has no 'await' expression.","line":130,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":130,"endColumn":30,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3275,3281],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":242,"column":12,"nodeType":"MemberExpression","endLine":242,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":273,"column":7,"nodeType":"MemberExpression","endLine":273,"endColumn":20}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_85 } from \"@/constants/count\";\nimport { MAGIC_0_8 } from \"@/constants/decimal\";\nimport { logger } from '@/lib/logger';\nimport { TranslationQualityManager } from '@/lib/translation-manager-quality';\nimport { TranslationManagerSecurity } from '@/lib/translation-manager-security';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  QualityReport,\n  QualityScore,\n  TranslationManagerConfig,\n  TranslationQualityCheck,\n  ValidationReport,\n} from '@/types/translation-manager';\n\n/**\n * ç¿»è¯‘ç®¡ç†å™¨æ ¸å¿ƒç±»\n */\nexport class TranslationManagerCore implements TranslationQualityCheck {\n  private config: TranslationManagerConfig;\n  private translations: Partial<Record<Locale, Record<string, unknown>>> = {};\n  private qualityManager: TranslationQualityManager;\n\n  constructor(config: TranslationManagerConfig) {\n    this.config = config;\n    this.qualityManager = new TranslationQualityManager(config);\n  }\n\n  /**\n   * åŠ è½½ç¿»è¯‘æ–‡ä»¶\n   */\n  private async loadTranslations(): Promise<void> {\n    const fs = await import('fs');\n    const path = await import('path');\n\n    for (const locale of this.config.locales) {\n      const filePath = path.join(this.config.messagesDir, `${locale}.json`);\n\n      try {\n        const content = await fs.promises.readFile(filePath, 'utf-8');\n        const translations = JSON.parse(content) as Record<string, unknown>;\n        TranslationManagerSecurity.setTranslationsForLocale(\n          this.translations,\n          locale,\n          translations,\n        );\n      } catch (error) {\n        logger.warn(`Failed to load translations for ${locale}`, {\n          error: error as Error,\n        });\n        TranslationManagerSecurity.setTranslationsForLocale(\n          this.translations,\n          locale,\n          {},\n        );\n      }\n    }\n  }\n\n  /**\n   * åˆå§‹åŒ–Lingo.devé›†æˆ\n   */\n  private initializeLingoIntegration(): void {\n    if (!this.config.lingo.apiKey || !this.config.lingo.projectId) {\n      logger.warn(\n        'Lingo.dev integration enabled but missing API key or project ID',\n      );\n    } else {\n      logger.info('Lingo.dev integration initialized');\n    }\n  }\n\n  /**\n   * åˆå§‹åŒ–ç¿»è¯‘ç®¡ç†å™¨\n   */\n  async initialize(): Promise<void> {\n    try {\n      await this.loadTranslations();\n\n      if (this.config.lingo.enabled) {\n        this.initializeLingoIntegration();\n      }\n\n      logger.info('Translation manager initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize translation manager', {\n        error: error as Error,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * éªŒè¯ç¿»è¯‘\n   */\n  async validateTranslations(): Promise<ValidationReport> {\n    return this.qualityManager.validateTranslations(this.translations);\n  }\n\n  /**\n   * æ£€æŸ¥Lingoç¿»è¯‘è´¨é‡\n   */\n  async checkLingoTranslation(\n    _key: string,\n    _aiTranslation: string,\n    _humanTranslation?: string,\n  ): Promise<QualityScore> {\n    // å§”æ‰˜ç»™è´¨é‡ç®¡ç†å™¨\n    // ç®€å•çš„è´¨é‡æ£€æŸ¥å®ç°\n    return {\n      score: MAGIC_85,\n      confidence: MAGIC_0_8,\n      issues: [],\n      suggestions: [],\n    };\n  }\n\n  /**\n   * éªŒè¯ç¿»è¯‘ä¸€è‡´æ€§\n   */\n  async validateTranslationConsistency(\n    _translations: Record<string, string>,\n  ): Promise<ValidationReport> {\n    // å§”æ‰˜ç»™è´¨é‡ç®¡ç†å™¨\n    return this.qualityManager.validateTranslations(_translations);\n  }\n\n  /**\n   * ç”Ÿæˆè´¨é‡æŠ¥å‘Š\n   */\n  async generateQualityReport(): Promise<QualityReport> {\n    return this.qualityManager.generateQualityReport(this.translations);\n  }\n\n  /**\n   * è·å–æŒ‡å®šè¯­è¨€çš„ç¿»è¯‘æ•°æ®\n   */\n  getTranslations(locale: Locale): Record<string, unknown> {\n    return TranslationManagerSecurity.getTranslationsForLocale(\n      this.translations,\n      locale,\n    );\n  }\n\n  /**\n   * è®¾ç½®æŒ‡å®šè¯­è¨€çš„ç¿»è¯‘æ•°æ®\n   */\n  setTranslations(locale: Locale, translations: Record<string, unknown>): void {\n    TranslationManagerSecurity.setTranslationsForLocale(\n      this.translations,\n      locale,\n      translations,\n    );\n  }\n\n  /**\n   * è·å–æ‰€æœ‰ç¿»è¯‘æ•°æ®\n   */\n  getAllTranslations(): Partial<Record<Locale, Record<string, unknown>>> {\n    return { ...this.translations };\n  }\n\n  /**\n   * é‡æ–°åŠ è½½ç¿»è¯‘æ–‡ä»¶\n   */\n  async reload(): Promise<void> {\n    this.translations = {};\n    await this.loadTranslations();\n  }\n\n  /**\n   * è·å–é…ç½®ä¿¡æ¯\n   */\n  getConfig(): TranslationManagerConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * æ›´æ–°é…ç½®ä¿¡æ¯\n   */\n  updateConfig(newConfig: Partial<TranslationManagerConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    this.qualityManager = new TranslationQualityManager(this.config);\n  }\n\n  /**\n   * æ£€æŸ¥ç¿»è¯‘é”®æ˜¯å¦å­˜åœ¨\n   */\n  hasTranslation(locale: Locale, key: string): boolean {\n    if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n      return false;\n    }\n\n    const translations = this.getTranslations(locale);\n    return (\n      TranslationManagerSecurity.getNestedValue(translations, key) !== undefined\n    );\n  }\n\n  /**\n   * è·å–ç¿»è¯‘å€¼\n   */\n  getTranslation(locale: Locale, key: string): unknown {\n    if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n      return undefined;\n    }\n\n    const translations = this.getTranslations(locale);\n    return TranslationManagerSecurity.getNestedValue(translations, key);\n  }\n\n  /**\n   * è®¾ç½®ç¿»è¯‘å€¼\n   */\n  setTranslation(locale: Locale, key: string, value: unknown): void {\n    if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n      logger.warn(`Invalid translation key: ${key}`);\n      return;\n    }\n\n    const translations = this.getTranslations(locale);\n    const updatedTranslations = TranslationManagerSecurity.mergeTranslations(\n      translations,\n      {\n        [key]: value,\n      },\n    );\n\n    this.setTranslations(locale, updatedTranslations);\n  }\n\n  /**\n   * åˆ é™¤ç¿»è¯‘é”®\n   */\n  deleteTranslation(locale: Locale, key: string): void {\n    if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n      logger.warn(`Invalid translation key: ${key}`);\n      return;\n    }\n\n    const translations = this.getTranslations(locale);\n    const updatedTranslations = { ...translations };\n    delete updatedTranslations[key];\n\n    this.setTranslations(locale, updatedTranslations);\n  }\n\n  /**\n   * è·å–ç¿»è¯‘ç»Ÿè®¡ä¿¡æ¯\n   */\n  getStatistics(): Record<\n    Locale,\n    { total: number; translated: number; missing: number }\n  > {\n    const stats: Record<\n      Locale,\n      { total: number; translated: number; missing: number }\n    > = {} as Record<\n      Locale,\n      { total: number; translated: number; missing: number }\n    >;\n\n    for (const locale of this.config.locales) {\n      const translations = this.getTranslations(locale);\n      const keys = Object.keys(translations);\n      const translatedKeys = keys.filter((key) => {\n        const value = TranslationManagerSecurity.getNestedValue(\n          translations,\n          key,\n        );\n        return value !== undefined && value !== null && value !== '';\n      });\n\n      stats[locale] = {\n        total: keys.length,\n        translated: translatedKeys.length,\n        missing: keys.length - translatedKeys.length,\n      };\n    }\n\n    return stats;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-manager-quality.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Async method 'validateTranslations' has too many statements (22). Maximum allowed is 20.","line":41,"column":29,"nodeType":"FunctionExpression","messageId":"exceed","endLine":138,"endColumn":4},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'localeReport' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":25},{"ruleId":"require-await","severity":2,"message":"Async method 'getQualityTrends' has no 'await' expression.","line":323,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":323,"endColumn":33,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9166,9172],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_0_8 } from \"@/constants/decimal\";\nimport { COUNT_FIVE, COUNT_TRIPLE, PERCENTAGE_FULL, PERCENTAGE_HALF, ZERO } from '@/constants';\n\nimport { QUALITY_SCORING } from '@/constants/i18n-constants';\nimport { TranslationManagerSecurity } from '@/lib/translation-manager-security';\nimport { TranslationQualityChecker } from '@/lib/translation-quality-checker';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  LocaleQualityReport,\n  QualityIssue,\n  QualityReport,\n  QualityScore,\n  QualityTrend,\n  TranslationManagerConfig,\n  ValidationReport,\n} from '@/types/translation-manager';\nimport {\n  calculateConfidence,\n  flattenTranslations,\n  generateRecommendations,\n  generateSuggestions,\n  isEmptyTranslation,\n} from '@/lib/translation-utils';\n\n/**\n * ç¿»è¯‘è´¨é‡ç®¡ç†å™¨\n * è´Ÿè´£ç¿»è¯‘è´¨é‡æ£€æŸ¥ã€è¯„åˆ†å’ŒæŠ¥å‘Šç”Ÿæˆ\n */\nexport class TranslationQualityManager {\n  private config: TranslationManagerConfig;\n  private qualityChecker: TranslationQualityChecker;\n\n  constructor(config: TranslationManagerConfig) {\n    this.config = config;\n    this.qualityChecker = new TranslationQualityChecker(config, {});\n  }\n\n  /**\n   * éªŒè¯ç¿»è¯‘\n   */\n  async validateTranslations(\n    translations: Partial<Record<Locale, Record<string, unknown>>>,\n  ): Promise<ValidationReport> {\n    const issues: QualityIssue[] = [];\n    const byLocale: Record<Locale, LocaleQualityReport> = {} as Record<\n      Locale,\n      LocaleQualityReport\n    >;\n\n    for (const locale of this.config.locales) {\n      const localeTranslations =\n        TranslationManagerSecurity.getTranslationsForLocale(\n          translations,\n          locale,\n        );\n      const flatTranslations = flattenTranslations(localeTranslations);\n\n      // æ£€æŸ¥ç¼ºå¤±çš„ç¿»è¯‘\n      const missingKeys = this.findMissingTranslations(\n        flatTranslations,\n        locale,\n      );\n      issues.push(...missingKeys);\n\n      // æ£€æŸ¥ç©ºç¿»è¯‘\n      const emptyKeys = this.findEmptyTranslations(flatTranslations, locale);\n      issues.push(...emptyKeys);\n\n      // è´¨é‡æ£€æŸ¥ - å¯¹æ¯ä¸ªç¿»è¯‘é”®è¿›è¡Œæ£€æŸ¥\n      const qualityIssues: QualityIssue[] = [];\n      for (const [key, translation] of Object.entries(flatTranslations)) {\n        if (translation && typeof translation === 'string') {\n          const qualityResult = await this.qualityChecker.checkLingoTranslation(\n            key,\n            translation,\n          );\n          qualityIssues.push(...qualityResult.issues);\n        }\n      }\n      issues.push(...qualityIssues);\n\n      // ç”Ÿæˆæœ¬åœ°åŒ–æŠ¥å‘Š\n      const qualityScore = this.calculateQualityScore(\n        flatTranslations,\n        qualityIssues,\n      );\n      const totalKeys = Object.keys(flatTranslations).length;\n      const translatedKeysCount = Object.keys(flatTranslations).filter(\n        (key) =>\n          !isEmptyTranslation(\n            TranslationManagerSecurity.getTranslationValue(\n              flatTranslations,\n              key,\n            ) || '',\n          ),\n      ).length;\n\n      const localeReport: LocaleQualityReport = {\n        locale,\n        totalKeys,\n        validKeys: translatedKeysCount,\n        translatedKeys: translatedKeysCount,\n        missingKeys: missingKeys.length,\n        emptyKeys: emptyKeys.length,\n        issues: qualityIssues,\n        score: qualityScore.score,\n        timestamp: new Date().toISOString(),\n        confidence: qualityScore.confidence,\n        suggestions: generateSuggestions(qualityIssues),\n      };\n\n      TranslationManagerSecurity.setQualityScoreForLocale(\n        byLocale,\n        locale,\n        qualityScore,\n      );\n    }\n\n    const overallScore =\n      issues.length === ZERO ? PERCENTAGE_FULL : Math.max(ZERO, PERCENTAGE_FULL - issues.length * COUNT_FIVE);\n\n    return {\n      isValid: issues.length === ZERO,\n      score: overallScore,\n      issues,\n      recommendations: generateRecommendations(issues),\n      timestamp: new Date().toISOString(),\n      byLocale,\n      summary: {\n        totalIssues: issues.length,\n        criticalIssues: issues.filter((issue) => issue.severity === 'critical')\n          .length,\n        warningIssues: issues.filter((issue) => issue.severity === 'warning')\n          .length,\n        infoIssues: issues.filter((issue) => issue.severity === 'info').length,\n      },\n    };\n  }\n\n  /**\n   * ç”Ÿæˆè´¨é‡æŠ¥å‘Š\n   */\n  async generateQualityReport(\n    translations: Partial<Record<Locale, Record<string, unknown>>>,\n  ): Promise<QualityReport> {\n    const validation = await this.validateTranslations(translations);\n    const trends = await this.getQualityTrends();\n\n    // è®¡ç®—æ•´ä½“è´¨é‡åˆ†æ•°\n    const overall: QualityScore = {\n      score: validation.score,\n      confidence: MAGIC_0_8,\n      issues: validation.issues,\n      suggestions: generateSuggestions(validation.issues),\n    };\n\n    // ä»éªŒè¯æŠ¥å‘Šä¸­æå–byLocaleæ•°æ®\n    const byLocale = {} as Record<Locale, QualityScore>;\n    Object.entries(validation.byLocale).forEach(([locale, report]) => {\n      byLocale[locale as Locale] = {\n        score: report.score,\n        confidence: report.confidence,\n        issues: report.issues,\n        suggestions: report.suggestions,\n      };\n    });\n\n    return {\n      overall,\n      byLocale,\n      timestamp: new Date().toISOString(),\n      validation,\n      trends,\n      recommendations: generateRecommendations(validation.issues),\n      suggestions: generateSuggestions(validation.issues),\n    };\n  }\n\n  /**\n   * æŸ¥æ‰¾ç¼ºå¤±çš„ç¿»è¯‘\n   */\n  private findMissingTranslations(\n    flatTranslations: Record<string, string>,\n    locale: Locale,\n  ): QualityIssue[] {\n    const issues: QualityIssue[] = [];\n    const requiredKeys = this.config.requiredKeys || [];\n\n    for (const key of requiredKeys) {\n      if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n        continue;\n      }\n\n      const value = TranslationManagerSecurity.getTranslationValue(\n        flatTranslations,\n        key,\n      );\n      if (!value) {\n        issues.push({\n          type: 'missing',\n          severity: 'critical',\n          locale,\n          key,\n          message: `Missing translation for key: ${key}`,\n          suggestion: `Add translation for key \"${key}\" in ${locale} locale`,\n        });\n      }\n    }\n\n    return issues;\n  }\n\n  /**\n   * æŸ¥æ‰¾ç©ºç¿»è¯‘\n   */\n  private findEmptyTranslations(\n    flatTranslations: Record<string, string>,\n    locale: Locale,\n  ): QualityIssue[] {\n    const issues: QualityIssue[] = [];\n\n    for (const key in flatTranslations) {\n      if (!Object.prototype.hasOwnProperty.call(flatTranslations, key)) {\n        continue;\n      }\n\n      if (!TranslationManagerSecurity.isValidTranslationKey(key)) {\n        continue;\n      }\n\n      const value = TranslationManagerSecurity.getTranslationValue(\n        flatTranslations,\n        key,\n      );\n      if (value && isEmptyTranslation(value)) {\n        issues.push({\n          type: 'missing',\n          severity: 'medium',\n          locale,\n          key,\n          message: `Empty translation for key: ${key}`,\n          suggestion: `Provide content for key \"${key}\" in ${locale} locale`,\n        });\n      }\n    }\n\n    return issues;\n  }\n\n  /**\n   * è®¡ç®—è´¨é‡è¯„åˆ†\n   */\n  private calculateQualityScore(\n    flatTranslations: Record<string, string>,\n    qualityIssues: QualityIssue[],\n  ): QualityScore {\n    const totalKeys = Object.keys(flatTranslations).length;\n    const translatedKeys = Object.keys(flatTranslations).filter((key) => {\n      const value = TranslationManagerSecurity.getTranslationValue(\n        flatTranslations,\n        key,\n      );\n      return value && !isEmptyTranslation(value);\n    }).length;\n\n    const completeness = totalKeys > ZERO ? (translatedKeys / totalKeys) * PERCENTAGE_FULL : ZERO;\n    const accuracy = this.calculateAccuracy(qualityIssues);\n    const consistency = this.calculateConsistency(flatTranslations);\n\n    const overall = (completeness + accuracy + consistency) / COUNT_TRIPLE;\n\n    return {\n      score: Math.round(overall * PERCENTAGE_FULL) / PERCENTAGE_FULL,\n      confidence: calculateConfidence(qualityIssues),\n      issues: qualityIssues,\n      suggestions: generateSuggestions(qualityIssues),\n      grammar: Math.round(accuracy * PERCENTAGE_FULL) / PERCENTAGE_FULL,\n      consistency: Math.round(consistency * PERCENTAGE_FULL) / PERCENTAGE_FULL,\n    };\n  }\n\n  /**\n   * è®¡ç®—å‡†ç¡®æ€§è¯„åˆ†\n   */\n  private calculateAccuracy(qualityIssues: QualityIssue[]): number {\n    const criticalIssues = qualityIssues.filter(\n      (issue) => issue.severity === 'critical',\n    ).length;\n    const warningIssues = qualityIssues.filter(\n      (issue) => issue.severity === 'warning',\n    ).length;\n\n    // åŸºç¡€åˆ†æ•°\n    let score = PERCENTAGE_FULL;\n\n    // æ‰£åˆ†è§„åˆ™\n    score -= criticalIssues * QUALITY_SCORING.CRITICAL_PENALTY;\n    score -= warningIssues * QUALITY_SCORING.WARNING_PENALTY;\n\n    return Math.max(ZERO, score);\n  }\n\n  /**\n   * è®¡ç®—ä¸€è‡´æ€§è¯„åˆ†\n   */\n  private calculateConsistency(\n    flatTranslations: Record<string, string>,\n  ): number {\n    // ç®€åŒ–çš„ä¸€è‡´æ€§æ£€æŸ¥\n    // å®é™…å®ç°å¯ä»¥åŒ…æ‹¬æœ¯è¯­ä¸€è‡´æ€§ã€æ ¼å¼ä¸€è‡´æ€§ç­‰\n    const values = Object.values(flatTranslations);\n    const uniqueValues = new Set(values);\n\n    // å¦‚æœæœ‰é‡å¤çš„ç¿»è¯‘å€¼ï¼Œå¯èƒ½å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜\n    const duplicateRatio = (values.length - uniqueValues.size) / values.length;\n\n    return Math.max(ZERO, PERCENTAGE_FULL - duplicateRatio * PERCENTAGE_HALF);\n  }\n\n  /**\n   * è·å–è´¨é‡è¶‹åŠ¿\n   */\n  private async getQualityTrends(): Promise<QualityTrend[]> {\n    // è¿™é‡Œå¯ä»¥å®ç°è´¨é‡è¶‹åŠ¿åˆ†æ\n    // ä¾‹å¦‚ä»å†å²æ•°æ®ä¸­è·å–è´¨é‡å˜åŒ–è¶‹åŠ¿\n    return Promise.resolve([]);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-manager-security.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":96,"column":5,"nodeType":"MemberExpression","endLine":96,"endColumn":16},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":120,"column":14,"nodeType":"MemberExpression","endLine":120,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":160,"column":11,"nodeType":"MemberExpression","endLine":160,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":160,"column":25,"nodeType":"MemberExpression","endLine":160,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":187,"column":19,"nodeType":"MemberExpression","endLine":187,"endColumn":31}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { HTTP_OK, ZERO } from \"@/constants\";\nimport { logger } from '@/lib/logger';\nimport type { Locale } from '@/types/i18n';\nimport type { QualityScore } from '@/types/translation-manager';\n\n/**\n * ç¿»è¯‘ç®¡ç†å™¨å®‰å…¨å·¥å…·ç±»\n * æä¾›å®‰å…¨çš„æ•°æ®è®¿é—®å’Œè®¾ç½®æ–¹æ³•ï¼Œé˜²æ­¢ Object Injection Sink\n */\nexport class TranslationManagerSecurity {\n  /**\n   * å®‰å…¨åœ°è·å–æŒ‡å®šè¯­è¨€çš„ç¿»è¯‘æ•°æ®\n   * ä½¿ç”¨ç±»å‹å®‰å…¨çš„æ–¹å¼é¿å… Object Injection Sink\n   */\n  static getTranslationsForLocale(\n    translations: Partial<Record<Locale, Record<string, unknown>>>,\n    locale: Locale,\n  ): Record<string, unknown> {\n    // ä½¿ç”¨ switch è¯­å¥æ›¿ä»£åŠ¨æ€å±æ€§è®¿é—®\n    switch (locale) {\n      case 'en':\n        return translations.en || {};\n      case 'zh':\n        return translations.zh || {};\n      default:\n        return {};\n    }\n  }\n\n  /**\n   * å®‰å…¨åœ°è®¾ç½®æŒ‡å®šè¯­è¨€çš„ç¿»è¯‘æ•°æ®\n   */\n  static setTranslationsForLocale(\n    translations: Partial<Record<Locale, Record<string, unknown>>>,\n    locale: Locale,\n    data: Record<string, unknown>,\n  ): void {\n    // ä½¿ç”¨ switch è¯­å¥æ›¿ä»£åŠ¨æ€å±æ€§è®¿é—®\n    switch (locale) {\n      case 'en':\n        translations.en = data;\n        break;\n      case 'zh':\n        translations.zh = data;\n        break;\n      default:\n        // å¿½ç•¥ä¸æ”¯æŒçš„è¯­è¨€\n        break;\n    }\n  }\n\n  /**\n   * å®‰å…¨åœ°è®¾ç½®è´¨é‡è¯„åˆ†æ•°æ®\n   */\n  static setQualityScoreForLocale(\n    byLocale: Record<Locale, QualityScore>,\n    locale: Locale,\n    score: QualityScore,\n  ): void {\n    // ä½¿ç”¨ switch è¯­å¥æ›¿ä»£åŠ¨æ€å±æ€§è®¿é—®\n    switch (locale) {\n      case 'en':\n        byLocale.en = score;\n        break;\n      case 'zh':\n        byLocale.zh = score;\n        break;\n      default:\n        // å¿½ç•¥ä¸æ”¯æŒçš„è¯­è¨€\n        break;\n    }\n  }\n\n  /**\n   * å®‰å…¨åœ°è®¾ç½®ç¿»è¯‘ç»“æœ\n   * éªŒè¯é”®åä»¥é˜²æ­¢ Object Injection Sink\n   */\n  static setTranslationResult(\n    result: Record<string, string>,\n    key: string,\n    translation: string,\n  ): void {\n    // éªŒè¯é”®åæ ¼å¼ï¼Œåªå…è®¸å­—æ¯ã€æ•°å­—ã€ç‚¹ã€ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦\n    if (!/^[a-zA-Z0-9._-]+$/.test(key)) {\n      logger.warn(`Invalid translation key format: ${key}`);\n      return;\n    }\n\n    // éªŒè¯é”®åé•¿åº¦\n    if (key.length > HTTP_OK) {\n      logger.warn(`Translation key too long: ${key}`);\n      return;\n    }\n\n    // å®‰å…¨åœ°è®¾ç½®å€¼\n    result[key] = translation;\n  }\n\n  /**\n   * å®‰å…¨åœ°è·å–æ‰å¹³åŒ–ç¿»è¯‘å€¼\n   */\n  static getTranslationValue(\n    flatTranslations: Record<string, string>,\n    key: string,\n  ): string | undefined {\n    // éªŒè¯é”®åæ ¼å¼\n    if (!/^[a-zA-Z0-9._-]+$/.test(key)) {\n      logger.warn(`Invalid translation key format: ${key}`);\n      return undefined;\n    }\n\n    // éªŒè¯é”®åé•¿åº¦\n    if (key.length > HTTP_OK) {\n      logger.warn(`Translation key too long: ${key}`);\n      return undefined;\n    }\n\n    // ä½¿ç”¨ Object.prototype.hasOwnProperty å®‰å…¨æ£€æŸ¥\n    if (Object.prototype.hasOwnProperty.call(flatTranslations, key)) {\n      return flatTranslations[key];\n    }\n\n    return undefined;\n  }\n\n  /**\n   * éªŒè¯ç¿»è¯‘é”®åæ˜¯å¦å®‰å…¨\n   */\n  static isValidTranslationKey(key: string): boolean {\n    // æ£€æŸ¥æ ¼å¼\n    if (!/^[a-zA-Z0-9._-]+$/.test(key)) {\n      return false;\n    }\n\n    // æ£€æŸ¥é•¿åº¦\n    if (key.length > HTTP_OK) {\n      return false;\n    }\n\n    // æ£€æŸ¥æ˜¯å¦ä¸ºç©º\n    if (key.trim().length === ZERO) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * å®‰å…¨åœ°åˆå¹¶ç¿»è¯‘å¯¹è±¡\n   */\n  static mergeTranslations(\n    target: Record<string, unknown>,\n    source: Record<string, unknown>,\n  ): Record<string, unknown> {\n    const result = { ...target };\n\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        if (this.isValidTranslationKey(key)) {\n          result[key] = source[key];\n        } else {\n          logger.warn(`Skipping invalid translation key: ${key}`);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * å®‰å…¨åœ°è·å–åµŒå¥—å¯¹è±¡å€¼\n   */\n  static getNestedValue(obj: Record<string, unknown>, path: string): unknown {\n    const keys = path.split('.');\n    let current = obj;\n\n    for (const key of keys) {\n      if (!this.isValidTranslationKey(key)) {\n        return undefined;\n      }\n\n      if (\n        current &&\n        typeof current === 'object' &&\n        Object.prototype.hasOwnProperty.call(current, key)\n      ) {\n        current = current[key] as Record<string, unknown>;\n      } else {\n        return undefined;\n      }\n    }\n\n    return current;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-quality-checker.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/translation-manager' import is duplicated.","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":16,"endColumn":38},{"ruleId":"max-statements","severity":2,"message":"Async method 'checkLingoTranslation' has too many statements (25). Maximum allowed is 20.","line":47,"column":30,"nodeType":"FunctionExpression","messageId":"exceed","endLine":129,"endColumn":4}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  PERFORMANCE_THRESHOLDS,\n  QUALITY_WEIGHTS,\n  VALIDATION_THRESHOLDS,\n} from '@/constants/i18n-constants';\nimport type { Locale } from '@/types/i18n';\nimport { ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport '@/types/translation-manager';\nimport type {\n  LocaleQualityReport,\n  QualityIssue,\n  QualityScore,\n  TranslationManagerConfig,\n  ValidationReport,\n} from '@/types/translation-manager';\nimport {\n  calculateConfidence,\n  checkTerminologyConsistency,\n  extractPlaceholders,\n  flattenTranslations,\n  generateRecommendations,\n  generateSuggestions,\n  getNestedValue,\n} from '@/lib/translation-utils';\n\n/**\n * ç¿»è¯‘è´¨é‡æ£€æŸ¥å™¨\n */\nexport class TranslationQualityChecker {\n  private config: TranslationManagerConfig;\n  private translations: Partial<Record<Locale, Record<string, unknown>>> = {};\n  private qualityCache: Map<string, QualityScore> = new Map();\n  private terminologyMap: Map<string, string> = new Map();\n\n  constructor(\n    config: TranslationManagerConfig,\n    translations: Partial<Record<Locale, Record<string, unknown>>>,\n  ) {\n    this.config = config;\n    this.translations = translations;\n  }\n\n  /**\n   * æ£€æŸ¥Lingo.devç¿»è¯‘è´¨é‡\n   */\n  async checkLingoTranslation(\n    key: string,\n    aiTranslation: string,\n    humanTranslation?: string,\n  ): Promise<QualityScore> {\n    const cacheKey = `${key}:${aiTranslation}`;\n\n    // æ£€æŸ¥ç¼“å­˜\n    if (this.qualityCache.has(cacheKey)) {\n      return this.qualityCache.get(cacheKey)!;\n    }\n\n    const issues: QualityIssue[] = [];\n    let score = PERCENTAGE_FULL;\n\n    // åŸºç¡€è´¨é‡æ£€æŸ¥\n    if (aiTranslation.trim().length === ZERO) {\n      issues.push({\n        type: 'length',\n        severity: 'critical',\n        message: 'Translation is empty',\n        suggestion: 'Provide a non-empty translation',\n      });\n      score -= VALIDATION_THRESHOLDS.EMPTY_TRANSLATION_PENALTY;\n    }\n\n    // å ä½ç¬¦æ£€æŸ¥\n    const aiPlaceholders = extractPlaceholders(aiTranslation);\n    if (humanTranslation) {\n      const humanPlaceholders = extractPlaceholders(humanTranslation);\n\n      if (\n        JSON.stringify(aiPlaceholders.sort()) !==\n        JSON.stringify(humanPlaceholders.sort())\n      ) {\n        issues.push({\n          type: 'placeholder',\n          severity: 'high',\n          message: 'Placeholder mismatch between AI and human translation',\n          suggestion: 'Ensure all placeholders are preserved',\n        });\n        score -= VALIDATION_THRESHOLDS.PLACEHOLDER_MISMATCH_PENALTY;\n      }\n    }\n\n    // é•¿åº¦æ¯”ä¾‹æ£€æŸ¥\n    if (humanTranslation) {\n      const lengthRatio = aiTranslation.length / humanTranslation.length;\n      if (\n        lengthRatio > VALIDATION_THRESHOLDS.MAX_LENGTH_RATIO ||\n        lengthRatio < VALIDATION_THRESHOLDS.MIN_LENGTH_RATIO\n      ) {\n        issues.push({\n          type: 'length',\n          severity: 'medium',\n          message: `Translation length ratio is unusual: ${lengthRatio.toFixed(QUALITY_WEIGHTS.LENGTH_PENALTY / QUALITY_WEIGHTS.LENGTH_PENALTY)}`,\n          suggestion: 'Review translation for completeness and accuracy',\n        });\n        score -= QUALITY_WEIGHTS.GRAMMAR_PENALTY;\n      }\n    }\n\n    // æœ¯è¯­ä¸€è‡´æ€§æ£€æŸ¥\n    const terminologyIssues = await checkTerminologyConsistency(\n      key,\n      aiTranslation,\n      this.terminologyMap,\n    );\n    issues.push(...terminologyIssues);\n    score -= terminologyIssues.length * QUALITY_WEIGHTS.LENGTH_PENALTY;\n\n    const qualityScore: QualityScore = {\n      score: Math.max(ZERO, score),\n      confidence: calculateConfidence(issues),\n      issues,\n      suggestions: generateSuggestions(issues),\n    };\n\n    // ç¼“å­˜ç»“æœ\n    this.qualityCache.set(cacheKey, qualityScore);\n\n    return qualityScore;\n  }\n\n  /**\n   * éªŒè¯ç¿»è¯‘ä¸€è‡´æ€§\n   */\n  validateTranslationConsistency(\n    translations: Record<string, string>,\n  ): Promise<ValidationReport> {\n    const issues: QualityIssue[] = [];\n    let totalScore = ZERO;\n    let validTranslations = ZERO;\n\n    for (const [key, translation] of Object.entries(translations)) {\n      if (!translation || translation.trim().length === ZERO) {\n        issues.push({\n          type: 'consistency',\n          severity: 'high',\n          message: `Missing translation for key: ${key}`,\n        });\n        continue;\n      }\n\n      // æ£€æŸ¥å ä½ç¬¦ä¸€è‡´æ€§\n      const placeholders = extractPlaceholders(translation);\n      const expectedPlaceholders = this.getExpectedPlaceholders(key);\n\n      if (\n        JSON.stringify(placeholders.sort()) !==\n        JSON.stringify(expectedPlaceholders.sort())\n      ) {\n        issues.push({\n          type: 'placeholder',\n          severity: 'medium',\n          message: `Placeholder inconsistency in key: ${key}`,\n        });\n      }\n\n      validTranslations += ONE;\n      totalScore += PERFORMANCE_THRESHOLDS.MAX_MEMORY_USAGE; // åŸºç¡€åˆ†æ•°\n    }\n\n    const averageScore =\n      validTranslations > ZERO ? totalScore / validTranslations : ZERO;\n    const finalScore = Math.max(\n      ZERO,\n      averageScore - issues.length * QUALITY_WEIGHTS.LENGTH_PENALTY,\n    );\n\n    return Promise.resolve({\n      isValid:\n        issues.filter(\n          (issue) => issue.severity === 'critical' || issue.severity === 'high',\n        ).length === ZERO,\n      score: finalScore,\n      issues,\n      recommendations: generateRecommendations(issues),\n      timestamp: new Date().toISOString(),\n      byLocale: {} as Record<Locale, LocaleQualityReport>,\n      summary: {\n        totalIssues: issues.length,\n        criticalIssues: issues.filter((issue) => issue.severity === 'critical')\n          .length,\n        warningIssues: issues.filter((issue) => issue.severity === 'warning')\n          .length,\n        infoIssues: issues.filter((issue) => issue.severity === 'info').length,\n      },\n    });\n  }\n\n  /**\n   * è·å–é¢„æœŸå ä½ç¬¦\n   */\n  private getExpectedPlaceholders(key: string): string[] {\n    // ä»é»˜è®¤è¯­è¨€è·å–é¢„æœŸå ä½ç¬¦\n    const defaultTranslation = getNestedValue(\n      this.translations[this.config.defaultLocale] || {},\n      key,\n    );\n\n    if (!defaultTranslation) {\n      return [];\n    }\n\n    return extractPlaceholders(defaultTranslation);\n  }\n\n  /**\n   * è·å–ç¿»è¯‘é”®æ€»æ•°\n   */\n  getTotalTranslationKeys(): number {\n    const defaultTranslations =\n      this.translations[this.config.defaultLocale] || {};\n    return Object.keys(flattenTranslations(defaultTranslations)).length;\n  }\n\n  /**\n   * è®¾ç½®æœ¯è¯­æ˜ å°„\n   */\n  setTerminologyMap(terminologyMap: Map<string, string>): void {\n    this.terminologyMap = terminologyMap;\n  }\n\n  /**\n   * æ¸…é™¤è´¨é‡ç¼“å­˜\n   */\n  clearQualityCache(): void {\n    this.qualityCache.clear();\n  }\n\n  /**\n   * è·å–ç¼“å­˜ç»Ÿè®¡\n   */\n  getCacheStats(): { size: number; hitRate: number } {\n    return {\n      size: this.qualityCache.size,\n      hitRate: ZERO, // éœ€è¦å®ç°å‘½ä¸­ç‡ç»Ÿè®¡\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-quality-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-quality.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Async method 'validateAITranslation' has too many parameters (5). Maximum allowed is 3.","line":52,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":52,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4337,4340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4337,4340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4488,4491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4488,4491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4553,4556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4553,4556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4614,4617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4614,4617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4679,4682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4679,4682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'generateQualityReport' has no 'await' expression.","line":184,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":184,"endColumn":30,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4746,4752],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'validateContextConsistency' has no 'await' expression.","line":191,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":191,"endColumn":43,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4921,4927],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘è´¨é‡æ£€æŸ¥å’ŒAIç¿»è¯‘éªŒè¯å·¥å…·\n * æä¾›ç¿»è¯‘è´¨é‡è¯„ä¼°ã€AIç¿»è¯‘éªŒè¯å’Œè´¨é‡åŸºå‡†å¯¹æ¯”åŠŸèƒ½\n */\nimport { MAGIC_12, MAGIC_15, MAGIC_8 } from \"@/constants/count\";\nimport { COUNT_FIVE, ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { DEC_0_05, MAGIC_0_1, MAGIC_0_2, MAGIC_0_8 } from \"@/constants/decimal\";\nimport { TranslationBenchmarks } from '@/lib/translation-benchmarks';\nimport { TranslationManager } from '@/lib/translation-manager';\nimport { TranslationValidators } from '@/lib/translation-validators';\nimport type { Locale } from '@/types/i18n';\nimport type {\n  BatchTranslationInput,\n  QualityComparison,\n  QualityIssue,\n  QualityScore,\n  TranslationManagerConfig,\n  ValidationReport,\n} from '@/types/translation-manager';\n\n// å¯¼å…¥æ‹†åˆ†çš„æ¨¡å—\nexport type {\n  AITranslationService, BatchTranslationInput, QualityBenchmark,\n  QualityComparison,\n  ValidationResult\n} from '@/lib/translation-quality-types';\n\n/**\n * ç¿»è¯‘è´¨é‡åˆ†æå™¨\n */\nexport class TranslationQualityAnalyzer {\n  private translationManager: TranslationManager;\n  private benchmarks: TranslationBenchmarks;\n\n  constructor(config: TranslationManagerConfig) {\n    this.translationManager = new TranslationManager(config);\n    this.benchmarks = new TranslationBenchmarks();\n  }\n\n  /**\n   * åˆå§‹åŒ–è´¨é‡åˆ†æå™¨\n   */\n  async initialize(): Promise<void> {\n    await this.translationManager.initialize();\n    this.benchmarks.initialize();\n  }\n\n  /**\n   * éªŒè¯AIç¿»è¯‘è´¨é‡\n   */\n  async validateAITranslation(\n    key: string,\n    originalText: string,\n    aiTranslation: string,\n    targetLocale: Locale,\n    humanTranslation?: string,\n  ): Promise<QualityScore> {\n    const issues: QualityIssue[] = [];\n    let totalPenalty = ZERO;\n\n    // åŸºç¡€éªŒè¯\n    const basicResult = TranslationValidators.performBasicValidation(\n      originalText,\n      aiTranslation,\n    );\n    issues.push(...basicResult.issues);\n    totalPenalty += basicResult.penalty;\n\n    // è¯­è¨€ç‰¹å®šéªŒè¯\n    const languageResult =\n      TranslationValidators.performLanguageSpecificValidation(\n        aiTranslation,\n        targetLocale,\n      );\n    issues.push(...languageResult.issues);\n    totalPenalty += languageResult.penalty;\n\n    // ä¸Šä¸‹æ–‡ä¸€è‡´æ€§éªŒè¯\n    const contextResult = await this.validateContextConsistency(\n      key,\n      aiTranslation,\n      targetLocale,\n    );\n    issues.push(...contextResult.issues);\n    totalPenalty += contextResult.penalty;\n\n    // ä¸äººå·¥ç¿»è¯‘å¯¹æ¯”ï¼ˆå¦‚æœæä¾›ï¼‰\n    if (humanTranslation) {\n      const humanResult = TranslationValidators.compareWithHumanTranslation(\n        aiTranslation,\n        humanTranslation,\n      );\n      issues.push(...humanResult.issues);\n      totalPenalty += humanResult.penalty;\n    }\n\n    // è®¡ç®—æœ€ç»ˆåˆ†æ•°\n    const baseScore = PERCENTAGE_FULL;\n    const finalScore = Math.max(ZERO, baseScore - totalPenalty);\n\n    const confidence = this.calculateConfidence(\n      issues,\n      Boolean(humanTranslation),\n    );\n    const suggestions = this.generateImprovementSuggestions(issues);\n\n    return {\n      score: finalScore,\n      confidence,\n      issues,\n      suggestions,\n      // åˆ†ç±»åˆ†æ•°\n      grammar: Math.max(\n        ZERO,\n        PERCENTAGE_FULL - issues.filter((i) => i.type === 'grammar').length * 10,\n      ),\n      consistency: Math.max(\n        ZERO,\n        PERCENTAGE_FULL - issues.filter((i) => i.type === 'consistency').length * MAGIC_15,\n      ),\n      terminology: Math.max(\n        ZERO,\n        PERCENTAGE_FULL - issues.filter((i) => i.type === 'terminology').length * MAGIC_12,\n      ),\n      fluency: Math.max(\n        ZERO,\n        PERCENTAGE_FULL - issues.filter((i) => i.type === 'fluency').length * MAGIC_8,\n      ),\n    };\n  }\n\n  /**\n   * æ‰¹é‡éªŒè¯ç¿»è¯‘è´¨é‡\n   */\n  async batchValidateTranslations(\n    translations: BatchTranslationInput[],\n  ): Promise<QualityScore[]> {\n    const results: QualityScore[] = [];\n\n    for (const translation of translations) {\n      const result = await this.validateAITranslation(\n        translation.key,\n        translation.original,\n        translation.translated,\n        translation.locale,\n        translation.humanReference,\n      );\n      results.push(result);\n    }\n\n    return results;\n  }\n\n  /**\n   * ä¸è´¨é‡åŸºå‡†å¯¹æ¯”\n   */\n  compareWithBenchmark(\n    currentScore: QualityScore,\n    locale: Locale,\n  ): QualityComparison {\n    const comparison = this.benchmarks.compareWithBenchmark(\n      currentScore,\n      locale,\n    );\n    // ç¡®ä¿åŒ…å«æ‰€æœ‰å¿…éœ€å±æ€§\n    return {\n      baseline: (comparison as any)?.baseline || {\n        score: ZERO,\n        confidence: ZERO,\n        issues: [],\n        suggestions: [],\n      },\n      current: (comparison as any)?.current || currentScore,\n      improvement: (comparison as any)?.improvement || ZERO,\n      degradation: (comparison as any)?.degradation || ZERO,\n      recommendations: (comparison as any)?.recommendations || [],\n    };\n  }\n\n  /**\n   * ç”Ÿæˆè´¨é‡æŠ¥å‘Š\n   */\n  async generateQualityReport(_locale?: Locale): Promise<ValidationReport> {\n    return this.translationManager.validateTranslations();\n  }\n\n  /**\n   * éªŒè¯ä¸Šä¸‹æ–‡ä¸€è‡´æ€§\n   */\n  private async validateContextConsistency(\n    key: string,\n    translation: string,\n    locale: Locale,\n  ): Promise<{ issues: QualityIssue[]; penalty: number }> {\n    const issues: QualityIssue[] = [];\n    let penalty = ZERO;\n\n    // æ£€æŸ¥æœ¯è¯­ä¸€è‡´æ€§\n    const terminologyIssues = this.checkTerminologyConsistency(\n      key,\n      translation,\n      locale,\n    );\n    issues.push(...terminologyIssues);\n    penalty += terminologyIssues.length * COUNT_FIVE;\n\n    // æ£€æŸ¥ä¸Šä¸‹æ–‡ç›¸å…³æ€§\n    const contextIssues = TranslationValidators.checkContextRelevance(\n      key,\n      translation,\n    );\n    issues.push(...contextIssues);\n    penalty += contextIssues.length * MAGIC_8;\n\n    return { issues, penalty };\n  }\n\n  /**\n   * æ£€æŸ¥æœ¯è¯­ä¸€è‡´æ€§\n   */\n  private checkTerminologyConsistency(\n    _key: string,\n    _translation: string,\n    _locale: Locale,\n  ): QualityIssue[] {\n    // è¿™é‡Œå¯ä»¥å®ç°æœ¯è¯­è¯å…¸æ£€æŸ¥\n    return [];\n  }\n\n  /**\n   * è®¡ç®—ç½®ä¿¡åº¦\n   */\n  private calculateConfidence(\n    issues: QualityIssue[],\n    hasHumanReference: boolean,\n  ): number {\n    let confidence = MAGIC_0_8; // åŸºç¡€ç½®ä¿¡åº¦\n\n    if (hasHumanReference) {\n      confidence += MAGIC_0_2; // æœ‰äººå·¥å‚è€ƒæé«˜ç½®ä¿¡åº¦\n    }\n\n    // æ ¹æ®é—®é¢˜ä¸¥é‡ç¨‹åº¦è°ƒæ•´ç½®ä¿¡åº¦\n    const highSeverityIssues = issues.filter(\n      (i) => i.severity === 'high',\n    ).length;\n    const mediumSeverityIssues = issues.filter(\n      (i) => i.severity === 'medium',\n    ).length;\n\n    confidence -= highSeverityIssues * MAGIC_0_1;\n    confidence -= mediumSeverityIssues * DEC_0_05;\n\n    return Math.max(MAGIC_0_1, Math.min(ONE, confidence));\n  }\n\n  /**\n   * ç”Ÿæˆæ”¹è¿›å»ºè®®\n   */\n  private generateImprovementSuggestions(issues: QualityIssue[]): string[] {\n    const suggestions = new Set<string>();\n\n    issues.forEach((issue) => {\n      if (issue.suggestion) {\n        suggestions.add(issue.suggestion);\n      }\n    });\n\n    return Array.from(suggestions);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/translation-validators.ts","messages":[{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":93,"column":5,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":119,"endColumn":6}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ç¿»è¯‘éªŒè¯å™¨å·¥å…·ç±»\n */\nimport { MAGIC_15, MAGIC_8 } from \"@/constants/count\";\nimport { COUNT_FIVE, COUNT_TEN, COUNT_TRIPLE, ONE, ZERO, PERCENTAGE_QUARTER } from '@/constants';\n\nimport { MAGIC_0_3, MAGIC_0_6 } from \"@/constants/decimal\";\nimport { VALIDATION_THRESHOLDS } from '@/constants/i18n-constants';\nimport type { ValidationResult } from '@/lib/translation-quality-types';\nimport type { Locale } from '@/types/i18n';\nimport type { QualityIssue } from '@/types/translation-manager';\n\nexport class TranslationValidators {\n  /**\n   * åŸºç¡€éªŒè¯\n   */\n  static performBasicValidation(\n    original: string,\n    translation: string,\n  ): ValidationResult {\n    const issues: QualityIssue[] = [];\n    let penalty = ZERO;\n\n    // æ£€æŸ¥ç©ºç¿»è¯‘\n    if (!translation.trim()) {\n      issues.push({\n        type: 'missing',\n        severity: 'high',\n        message: 'Translation is empty',\n        suggestion: 'Provide a translation for this text',\n      });\n      penalty += VALIDATION_THRESHOLDS.EMPTY_TRANSLATION_PENALTY;\n    }\n\n    // æ£€æŸ¥å ä½ç¬¦\n    const originalPlaceholders = this.extractPlaceholders(original);\n    const translatedPlaceholders = this.extractPlaceholders(translation);\n\n    if (originalPlaceholders.length !== translatedPlaceholders.length) {\n      issues.push({\n        type: 'placeholder',\n        severity: 'high',\n        message: 'Placeholder count mismatch',\n        suggestion: 'Ensure all placeholders are preserved in translation',\n      });\n      penalty += VALIDATION_THRESHOLDS.PLACEHOLDER_MISMATCH_PENALTY;\n    }\n\n    // æ£€æŸ¥ç¼ºå¤±çš„å ä½ç¬¦\n    const missingPlaceholders = originalPlaceholders.filter(\n      (ph) => !translatedPlaceholders.includes(ph),\n    );\n    if (missingPlaceholders.length > ZERO) {\n      issues.push({\n        type: 'placeholder',\n        severity: 'high',\n        message: `Missing placeholders: ${missingPlaceholders.join(', ')}`,\n        suggestion: 'Add missing placeholders to translation',\n      });\n      penalty +=\n        VALIDATION_THRESHOLDS.LENGTH_DIFFERENCE_THRESHOLD *\n        missingPlaceholders.length;\n    }\n\n    // æ£€æŸ¥é•¿åº¦å·®å¼‚\n    const lengthRatio = translation.length / original.length;\n    if (\n      lengthRatio > VALIDATION_THRESHOLDS.MAX_LENGTH_RATIO ||\n      lengthRatio < VALIDATION_THRESHOLDS.MIN_LENGTH_RATIO\n    ) {\n      issues.push({\n        type: 'length',\n        severity: 'medium',\n        message: 'Translation length significantly different from original',\n        suggestion: 'Review translation for completeness and conciseness',\n      });\n      penalty += COUNT_TEN;\n    }\n\n    return { issues, penalty };\n  }\n\n  /**\n   * è¯­è¨€ç‰¹å®šéªŒè¯\n   */\n  static performLanguageSpecificValidation(\n    translation: string,\n    locale: Locale,\n  ): ValidationResult {\n    const issues: QualityIssue[] = [];\n    let penalty = ZERO;\n\n    switch (locale) {\n      case 'zh':\n        // ä¸­æ–‡ç‰¹å®šæ£€æŸ¥\n        if (this.containsTraditionalChinese(translation)) {\n          issues.push({\n            type: 'language',\n            severity: 'medium',\n            message: 'Contains traditional Chinese characters',\n            suggestion: 'Use simplified Chinese for zh locale',\n          });\n          penalty += COUNT_FIVE;\n        }\n        break;\n\n      case 'en':\n        // è‹±æ–‡ç‰¹å®šæ£€æŸ¥\n        if (this.hasGrammarIssues(translation)) {\n          issues.push({\n            type: 'grammar',\n            severity: 'medium',\n            message: 'Potential grammar issues detected',\n            suggestion: 'Review grammar and sentence structure',\n          });\n          penalty += MAGIC_8;\n        }\n        break;\n    }\n\n    return { issues, penalty };\n  }\n\n  /**\n   * ä¸äººå·¥ç¿»è¯‘å¯¹æ¯”\n   */\n  static compareWithHumanTranslation(\n    aiTranslation: string,\n    humanTranslation: string,\n  ): ValidationResult {\n    const issues: QualityIssue[] = [];\n    let penalty = ZERO;\n\n    const similarity = this.calculateSimilarity(\n      aiTranslation,\n      humanTranslation,\n    );\n\n    if (similarity < MAGIC_0_3) {\n      issues.push({\n        type: 'accuracy',\n        severity: 'high',\n        message: 'AI translation significantly differs from human reference',\n        suggestion: 'Review translation accuracy and meaning preservation',\n      });\n      penalty += PERCENTAGE_QUARTER;\n    } else if (similarity < MAGIC_0_6) {\n      issues.push({\n        type: 'accuracy',\n        severity: 'medium',\n        message: 'AI translation moderately differs from human reference',\n        suggestion: 'Consider adjusting translation for better accuracy',\n      });\n      penalty += MAGIC_15;\n    }\n\n    // æ£€æŸ¥å…³é”®æœ¯è¯­\n    const humanTerms = this.extractKeyTerms(humanTranslation);\n    const aiTerms = this.extractKeyTerms(aiTranslation);\n    const missingTerms = humanTerms.filter((term) => !aiTerms.includes(term));\n\n    if (missingTerms.length > ZERO) {\n      issues.push({\n        type: 'terminology',\n        severity: 'medium',\n        message: `Missing key terms: ${missingTerms.slice(ZERO, COUNT_TRIPLE).join(', ')}`,\n        suggestion: 'Include important terminology from reference translation',\n      });\n      penalty += COUNT_TEN;\n    }\n\n    return { issues, penalty };\n  }\n\n  /**\n   * æ£€æŸ¥ä¸Šä¸‹æ–‡ç›¸å…³æ€§\n   */\n  static checkContextRelevance(\n    key: string,\n    translation: string,\n  ): QualityIssue[] {\n    const issues: QualityIssue[] = [];\n\n    // æ ¹æ®é”®åæ£€æŸ¥ä¸Šä¸‹æ–‡ç›¸å…³æ€§\n    if (key.includes('error') && !this.containsErrorTerms(translation)) {\n      issues.push({\n        type: 'context',\n        severity: 'medium',\n        message: 'Error context not reflected in translation',\n        suggestion: 'Include error-related terminology',\n      });\n    }\n\n    return issues;\n  }\n\n  // å·¥å…·æ–¹æ³•\n  private static extractPlaceholders(text: string): string[] {\n    const matches = text.match(/\\{[^}]+\\}/g) || [];\n    return matches.map((match) => match.slice(ONE, -ONE));\n  }\n\n  private static containsTraditionalChinese(text: string): boolean {\n    // ç®€å•çš„ç¹ä½“å­—æ£€æµ‹\n    const traditionalChars = /[ç¹é«”å­—æª¢æ¸¬]/;\n    return traditionalChars.test(text);\n  }\n\n  private static hasGrammarIssues(text: string): boolean {\n    // ç®€å•çš„è¯­æ³•æ£€æŸ¥\n    const commonIssues = /\\b(a a|the the|and and|or or)\\b/i;\n    return commonIssues.test(text);\n  }\n\n  private static containsErrorTerms(text: string): boolean {\n    const errorTerms = ['error', 'failed', 'invalid', 'é”™è¯¯', 'å¤±è´¥', 'æ— æ•ˆ'];\n    return errorTerms.some((term) =>\n      text.toLowerCase().includes(term.toLowerCase()),\n    );\n  }\n\n  private static calculateSimilarity(text1: string, text2: string): number {\n    const words1 = text1.toLowerCase().split(/\\s+/);\n    const words2 = text2.toLowerCase().split(/\\s+/);\n\n    const intersection = words1.filter((word) => words2.includes(word));\n    const union = [...new Set([...words1, ...words2])];\n\n    return intersection.length / union.length;\n  }\n\n  private static extractKeyTerms(text: string): string[] {\n    return text.split(/\\s+/).filter((word) => word.length > COUNT_TRIPLE);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/units.ts","messages":[{"ruleId":"no-shadow","severity":2,"message":"'seconds' is already declared in the upper scope on line 38 column 14.","line":38,"column":25,"nodeType":"Identifier","messageId":"noShadow","endLine":38,"endColumn":40},{"ruleId":"no-shadow","severity":2,"message":"'minutes' is already declared in the upper scope on line 51 column 14.","line":51,"column":25,"nodeType":"Identifier","messageId":"noShadow","endLine":51,"endColumn":40},{"ruleId":"no-shadow","severity":2,"message":"'hours' is already declared in the upper scope on line 64 column 14.","line":64,"column":23,"nodeType":"Identifier","messageId":"noShadow","endLine":64,"endColumn":36},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 3_600_000.","line":64,"column":57,"nodeType":"Literal","messageId":"noMagic","endLine":64,"endColumn":66},{"ruleId":"no-shadow","severity":2,"message":"'days' is already declared in the upper scope on line 77 column 14.","line":77,"column":22,"nodeType":"Identifier","messageId":"noShadow","endLine":77,"endColumn":34},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 86_400_000.","line":77,"column":54,"nodeType":"Literal","messageId":"noMagic","endLine":77,"endColumn":64},{"ruleId":"no-shadow","severity":2,"message":"'rem' is already declared in the upper scope on line 152 column 14.","line":152,"column":21,"nodeType":"Identifier","messageId":"noShadow","endLine":152,"endColumn":32},{"ruleId":"no-shadow","severity":2,"message":"'em' is already declared in the upper scope on line 165 column 14.","line":165,"column":20,"nodeType":"Identifier","messageId":"noShadow","endLine":165,"endColumn":30},{"ruleId":"no-shadow","severity":2,"message":"'degrees' is already declared in the upper scope on line 182 column 14.","line":182,"column":25,"nodeType":"Identifier","messageId":"noShadow","endLine":182,"endColumn":40},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 180.","line":196,"column":14,"nodeType":"Literal","messageId":"noMagic","endLine":196,"endColumn":17},{"ruleId":"no-shadow","severity":2,"message":"'degrees' is already declared in the upper scope on line 182 column 14.","line":209,"column":34,"nodeType":"Identifier","messageId":"noShadow","endLine":209,"endColumn":49},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 180.","line":210,"column":24,"nodeType":"Literal","messageId":"noMagic","endLine":210,"endColumn":27},{"ruleId":"no-shadow","severity":2,"message":"'bytes' is already declared in the upper scope on line 221 column 14.","line":221,"column":23,"nodeType":"Identifier","messageId":"noShadow","endLine":221,"endColumn":36},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 1_048_576.","line":235,"column":55,"nodeType":"Literal","messageId":"noMagic","endLine":235,"endColumn":64},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 1_073_741_824.","line":242,"column":55,"nodeType":"Literal","messageId":"noMagic","endLine":242,"endColumn":68},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 21.","line":264,"column":14,"nodeType":"Literal","messageId":"noMagic","endLine":264,"endColumn":16}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å•ä½è½¬æ¢å·¥å…·åº“\n * \n * ç”¨äºæ›¿ä»£ç¡¬ç¼–ç çš„æ—¶é—´ã€å°ºå¯¸ã€ç™¾åˆ†æ¯”ç­‰æ•°å€¼å¸¸é‡\n * æä¾›è¯­ä¹‰åŒ–çš„å•ä½è½¬æ¢å‡½æ•°ï¼Œæå‡ä»£ç å¯è¯»æ€§\n * \n * @example\n * ```typescript\n * // æ—¶é—´ç›¸å…³\n * setTimeout(callback, seconds(5)); // æ›¿ä»£ 5000\n * setInterval(poll, minutes(2));    // æ›¿ä»£ 120000\n * \n * // ç™¾åˆ†æ¯”ç›¸å…³\n * opacity: percent(85);             // æ›¿ä»£ 0.85\n * width: `${percent(50) * 100}%`;   // æ›¿ä»£ 50\n * \n * // å°ºå¯¸ç›¸å…³\n * padding: pixels(16);              // æ›¿ä»£ 16\n * margin: rem(2);                   // æ›¿ä»£ 2\n * ```\n */\n\n// ============================================================================\n// æ—¶é—´å•ä½è½¬æ¢\n// ============================================================================\n\n/**\n * å°†ç§’è½¬æ¢ä¸ºæ¯«ç§’\n * @param seconds ç§’æ•°\n * @returns æ¯«ç§’æ•°\n * \n * @example\n * ```typescript\n * setTimeout(callback, seconds(5));     // 5000ms\n * delay(seconds(2.5));                  // 2500ms\n * ```\n */\nexport const seconds = (seconds: number): number => seconds * 1_000;\n\n/**\n * å°†åˆ†é’Ÿè½¬æ¢ä¸ºæ¯«ç§’\n * @param minutes åˆ†é’Ÿæ•°\n * @returns æ¯«ç§’æ•°\n * \n * @example\n * ```typescript\n * setInterval(poll, minutes(2));        // 120000ms\n * setTimeout(cleanup, minutes(0.5));    // 30000ms\n * ```\n */\nexport const minutes = (minutes: number): number => minutes * 60_000;\n\n/**\n * å°†å°æ—¶è½¬æ¢ä¸ºæ¯«ç§’\n * @param hours å°æ—¶æ•°\n * @returns æ¯«ç§’æ•°\n * \n * @example\n * ```typescript\n * const cacheExpiry = hours(24);        // 86400000ms\n * const sessionTimeout = hours(2);      // 7200000ms\n * ```\n */\nexport const hours = (hours: number): number => hours * 3_600_000;\n\n/**\n * å°†å¤©è½¬æ¢ä¸ºæ¯«ç§’\n * @param days å¤©æ•°\n * @returns æ¯«ç§’æ•°\n * \n * @example\n * ```typescript\n * const weekInMs = days(7);             // 604800000ms\n * const monthInMs = days(30);           // 2592000000ms\n * ```\n */\nexport const days = (days: number): number => days * 86_400_000;\n\n// ============================================================================\n// ç™¾åˆ†æ¯”å’Œæ¯”ä¾‹è½¬æ¢\n// ============================================================================\n\n/**\n * å°†ç™¾åˆ†æ¯”è½¬æ¢ä¸ºå°æ•°ï¼ˆ0-1ä¹‹é—´ï¼‰\n * @param percentage ç™¾åˆ†æ¯”æ•°å€¼ï¼ˆ0-100ï¼‰\n * @returns å°æ•°å€¼ï¼ˆ0-1ï¼‰\n * \n * @example\n * ```typescript\n * opacity: percent(85);                 // 0.85\n * transform: `scale(${percent(120)})`;  // 1.2\n * ```\n */\nexport const percent = (percentage: number): number => percentage / 100;\n\n/**\n * å°†å°æ•°è½¬æ¢ä¸ºç™¾åˆ†æ¯”\n * @param decimal å°æ•°å€¼ï¼ˆ0-1ï¼‰\n * @returns ç™¾åˆ†æ¯”æ•°å€¼ï¼ˆ0-100ï¼‰\n * \n * @example\n * ```typescript\n * const progress = toPercent(0.75);     // 75\n * const completion = toPercent(0.95);   // 95\n * ```\n */\nexport const toPercent = (decimal: number): number => decimal * 100;\n\n/**\n * å°†åˆ†æ•°è½¬æ¢ä¸ºå°æ•°\n * @param numerator åˆ†å­\n * @param denominator åˆ†æ¯\n * @returns å°æ•°å€¼\n * \n * @example\n * ```typescript\n * const ratio = fraction(3, 4);         // 0.75\n * const portion = fraction(1, 3);       // 0.333...\n * ```\n */\nexport const fraction = (numerator: number, denominator: number): number => \n  numerator / denominator;\n\n// ============================================================================\n// å°ºå¯¸å•ä½è½¬æ¢\n// ============================================================================\n\n/**\n * åƒç´ å€¼ï¼ˆè¯­ä¹‰åŒ–æ ‡è¯†ï¼‰\n * @param px åƒç´ æ•°å€¼\n * @returns åƒç´ æ•°å€¼ï¼ˆåŸæ ·è¿”å›ï¼Œç”¨äºè¯­ä¹‰æ ‡è¯†ï¼‰\n * \n * @example\n * ```typescript\n * padding: pixels(16);                  // 16\n * margin: pixels(8);                    // 8\n * ```\n */\nexport const pixels = (px: number): number => px;\n\n/**\n * remå•ä½å€¼ï¼ˆè¯­ä¹‰åŒ–æ ‡è¯†ï¼‰\n * @param rem remæ•°å€¼\n * @returns remæ•°å€¼ï¼ˆåŸæ ·è¿”å›ï¼Œç”¨äºè¯­ä¹‰æ ‡è¯†ï¼‰\n * \n * @example\n * ```typescript\n * fontSize: rem(1.5);                   // 1.5\n * lineHeight: rem(1.2);                 // 1.2\n * ```\n */\nexport const rem = (rem: number): number => rem;\n\n/**\n * emå•ä½å€¼ï¼ˆè¯­ä¹‰åŒ–æ ‡è¯†ï¼‰\n * @param em emæ•°å€¼\n * @returns emæ•°å€¼ï¼ˆåŸæ ·è¿”å›ï¼Œç”¨äºè¯­ä¹‰æ ‡è¯†ï¼‰\n * \n * @example\n * ```typescript\n * padding: em(0.5);                     // 0.5\n * margin: em(1);                        // 1\n * ```\n */\nexport const em = (em: number): number => em;\n\n// ============================================================================\n// è§’åº¦å•ä½è½¬æ¢\n// ============================================================================\n\n/**\n * è§’åº¦å€¼ï¼ˆè¯­ä¹‰åŒ–æ ‡è¯†ï¼‰\n * @param degrees è§’åº¦æ•°å€¼\n * @returns è§’åº¦æ•°å€¼ï¼ˆåŸæ ·è¿”å›ï¼Œç”¨äºè¯­ä¹‰æ ‡è¯†ï¼‰\n * \n * @example\n * ```typescript\n * transform: `rotate(${degrees(45)}deg)`;   // rotate(45deg)\n * transform: `rotate(${degrees(90)}deg)`;   // rotate(90deg)\n * ```\n */\nexport const degrees = (degrees: number): number => degrees;\n\n/**\n * å¼§åº¦è½¬è§’åº¦\n * @param radians å¼§åº¦å€¼\n * @returns è§’åº¦å€¼\n * \n * @example\n * ```typescript\n * const angle = radiansToDegrees(Math.PI);  // 180\n * const rotation = radiansToDegrees(Math.PI / 2); // 90\n * ```\n */\nexport const radiansToDegrees = (radians: number): number => \n  radians * (180 / Math.PI);\n\n/**\n * è§’åº¦è½¬å¼§åº¦\n * @param degrees è§’åº¦å€¼\n * @returns å¼§åº¦å€¼\n * \n * @example\n * ```typescript\n * const radians = degreesToRadians(180);    // Math.PI\n * const halfPi = degreesToRadians(90);      // Math.PI / 2\n * ```\n */\nexport const degreesToRadians = (degrees: number): number => \n  degrees * (Math.PI / 180);\n\n// ============================================================================\n// æ•°æ®å¤§å°å•ä½è½¬æ¢\n// ============================================================================\n\n/**\n * å­—èŠ‚å€¼ï¼ˆè¯­ä¹‰åŒ–æ ‡è¯†ï¼‰\n * @param bytes å­—èŠ‚æ•°\n * @returns å­—èŠ‚æ•°ï¼ˆåŸæ ·è¿”å›ï¼Œç”¨äºè¯­ä¹‰æ ‡è¯†ï¼‰\n */\nexport const bytes = (bytes: number): number => bytes;\n\n/**\n * KBè½¬å­—èŠ‚\n * @param kb KBæ•°å€¼\n * @returns å­—èŠ‚æ•°\n */\nexport const kilobytes = (kb: number): number => kb * 1_024;\n\n/**\n * MBè½¬å­—èŠ‚\n * @param mb MBæ•°å€¼\n * @returns å­—èŠ‚æ•°\n */\nexport const megabytes = (mb: number): number => mb * 1_048_576;\n\n/**\n * GBè½¬å­—èŠ‚\n * @param gb GBæ•°å€¼\n * @returns å­—èŠ‚æ•°\n */\nexport const gigabytes = (gb: number): number => gb * 1_073_741_824;\n\n// ============================================================================\n// å¸¸ç”¨æ•°å­¦å¸¸é‡å’Œæ¯”ä¾‹\n// ============================================================================\n\n/**\n * é»„é‡‘æ¯”ä¾‹\n */\nexport const GOLDEN_RATIO = 1.618033988749;\n\n/**\n * å¸¸ç”¨æ¯”ä¾‹\n */\nexport const RATIOS = {\n  /** 1:1 æ­£æ–¹å½¢æ¯”ä¾‹ */\n  SQUARE: 1,\n  /** 4:3 ä¼ ç»Ÿå±å¹•æ¯”ä¾‹ */\n  TRADITIONAL: 4 / 3,\n  /** 16:9 å®½å±æ¯”ä¾‹ */\n  WIDESCREEN: 16 / 9,\n  /** 21:9 è¶…å®½å±æ¯”ä¾‹ */\n  ULTRAWIDE: 21 / 9,\n  /** é»„é‡‘æ¯”ä¾‹ */\n  GOLDEN: GOLDEN_RATIO,\n} as const;\n\n/**\n * å¸¸ç”¨é€æ˜åº¦å€¼\n */\nexport const OPACITY = {\n  /** å®Œå…¨é€æ˜ */\n  TRANSPARENT: 0,\n  /** å‡ ä¹é€æ˜ */\n  BARELY_VISIBLE: percent(5),\n  /** è½»å¾®é€æ˜ */\n  LIGHT: percent(25),\n  /** åŠé€æ˜ */\n  SEMI: percent(50),\n  /** å¤§éƒ¨åˆ†ä¸é€æ˜ */\n  MOSTLY_OPAQUE: percent(75),\n  /** å‡ ä¹ä¸é€æ˜ */\n  NEARLY_OPAQUE: percent(95),\n  /** å®Œå…¨ä¸é€æ˜ */\n  OPAQUE: 1,\n} as const;\n\n/**\n * å¸¸ç”¨åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n */\nexport const DURATION = {\n  /** æå¿«åŠ¨ç”» */\n  INSTANT: 0,\n  /** å¿«é€ŸåŠ¨ç”» */\n  FAST: 150,\n  /** æ­£å¸¸åŠ¨ç”» */\n  NORMAL: 300,\n  /** æ…¢é€ŸåŠ¨ç”» */\n  SLOW: 500,\n  /** å¾ˆæ…¢åŠ¨ç”» */\n  VERY_SLOW: 1000,\n} as const;\n\n// ============================================================================\n// ç±»å‹å®šä¹‰\n// ============================================================================\n\n/**\n * æ—¶é—´å•ä½ç±»å‹\n */\nexport type TimeUnit = 'ms' | 's' | 'm' | 'h' | 'd';\n\n/**\n * å°ºå¯¸å•ä½ç±»å‹\n */\nexport type SizeUnit = 'px' | 'rem' | 'em' | '%' | 'vh' | 'vw';\n\n/**\n * è§’åº¦å•ä½ç±»å‹\n */\nexport type AngleUnit = 'deg' | 'rad' | 'grad' | 'turn';\n\n/**\n * æ•°æ®å¤§å°å•ä½ç±»å‹\n */\nexport type DataSizeUnit = 'B' | 'KB' | 'MB' | 'GB' | 'TB';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/validations.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":240,"column":20,"nodeType":"MemberExpression","endLine":240,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_15 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_VERY_SLOW, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, ONE, PERCENTAGE_FULL, PERCENTAGE_HALF, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { z } from 'zod';\n\n/**\n * éªŒè¯å¸¸é‡å®šä¹‰\n * Validation constants to avoid magic numbers\n */\nconst VALIDATION_CONSTANTS = {\n  // Name field constraints\n  NAME_MIN_LENGTH: COUNT_PAIR,\n  NAME_MAX_LENGTH: PERCENTAGE_HALF,\n\n  // Email constraints\n  EMAIL_MAX_LENGTH: PERCENTAGE_FULL,\n\n  // Company constraints\n  COMPANY_MIN_LENGTH: COUNT_PAIR,\n  COMPANY_MAX_LENGTH: PERCENTAGE_FULL,\n\n  // Message constraints\n  MESSAGE_MIN_LENGTH: COUNT_TEN,\n  MESSAGE_MAX_LENGTH: ANIMATION_DURATION_VERY_SLOW,\n\n  // Subject constraints\n  SUBJECT_MIN_LENGTH: COUNT_FIVE,\n  SUBJECT_MAX_LENGTH: PERCENTAGE_FULL,\n\n  // Phone constraints\n  PHONE_MAX_DIGITS: MAGIC_15,\n\n  // Honeypot constraint\n  HONEYPOT_MAX_LENGTH: ZERO,\n\n  // Rate limiting\n  DEFAULT_COOLDOWN_MINUTES: COUNT_FIVE,\n  COOLDOWN_TO_MS_MULTIPLIER: SECONDS_PER_MINUTE,\n  MS_PER_SECOND: ANIMATION_DURATION_VERY_SLOW,\n} as const;\n\n/**\n * è”ç³»è¡¨å•éªŒè¯æ¨¡å¼\n * Contact form validation schema with comprehensive validation rules\n */\nexport const contactFormSchema = z.object({\n  firstName: z\n    .string()\n    .min(\n      VALIDATION_CONSTANTS.NAME_MIN_LENGTH,\n      `First name must be at least ${VALIDATION_CONSTANTS.NAME_MIN_LENGTH} characters`,\n    )\n    .max(\n      VALIDATION_CONSTANTS.NAME_MAX_LENGTH,\n      `First name must be less than ${VALIDATION_CONSTANTS.NAME_MAX_LENGTH} characters`,\n    )\n    .regex(\n      /^[a-zA-Z\\s\\u4e00-\\u9fff]+$/,\n      'First name can only contain letters and spaces',\n    ),\n\n  lastName: z\n    .string()\n    .min(\n      VALIDATION_CONSTANTS.NAME_MIN_LENGTH,\n      `Last name must be at least ${VALIDATION_CONSTANTS.NAME_MIN_LENGTH} characters`,\n    )\n    .max(\n      VALIDATION_CONSTANTS.NAME_MAX_LENGTH,\n      `Last name must be less than ${VALIDATION_CONSTANTS.NAME_MAX_LENGTH} characters`,\n    )\n    .regex(\n      /^[a-zA-Z\\s\\u4e00-\\u9fff]+$/,\n      'Last name can only contain letters and spaces',\n    ),\n\n  email: z\n    .string()\n    .email('Please enter a valid email address')\n    .max(\n      VALIDATION_CONSTANTS.EMAIL_MAX_LENGTH,\n      `Email must be less than ${VALIDATION_CONSTANTS.EMAIL_MAX_LENGTH} characters`,\n    )\n    .toLowerCase(),\n\n  company: z\n    .string()\n    .min(\n      VALIDATION_CONSTANTS.COMPANY_MIN_LENGTH,\n      `Company name must be at least ${VALIDATION_CONSTANTS.COMPANY_MIN_LENGTH} characters`,\n    )\n    .max(\n      VALIDATION_CONSTANTS.COMPANY_MAX_LENGTH,\n      `Company name must be less than ${VALIDATION_CONSTANTS.COMPANY_MAX_LENGTH} characters`,\n    )\n    .regex(\n      /^[a-zA-Z0-9\\s\\u4e00-\\u9fff&.,'-]+$/,\n      'Company name contains invalid characters',\n    ),\n\n  message: z\n    .string()\n    .min(\n      VALIDATION_CONSTANTS.MESSAGE_MIN_LENGTH,\n      `Message must be at least ${VALIDATION_CONSTANTS.MESSAGE_MIN_LENGTH} characters`,\n    )\n    .max(\n      VALIDATION_CONSTANTS.MESSAGE_MAX_LENGTH,\n      `Message must be less than ${VALIDATION_CONSTANTS.MESSAGE_MAX_LENGTH} characters`,\n    )\n    .trim(),\n\n  // Optional fields for enhanced form functionality\n  phone: z\n    .string()\n    .optional()\n    .refine((val) => {\n      if (!val) return true;\n      // International phone number validation - using safe static regex\n      return /^[+]?[1-9][\\d]{0,15}$/.test(val.replace(/[\\s\\-()]/g, ''));\n    }, 'Please enter a valid phone number'),\n\n  subject: z\n    .string()\n    .optional()\n    .refine((val) => {\n      if (!val) return true;\n      return (\n        val.length >= VALIDATION_CONSTANTS.SUBJECT_MIN_LENGTH &&\n        val.length <= VALIDATION_CONSTANTS.SUBJECT_MAX_LENGTH\n      );\n    }, `Subject must be between ${VALIDATION_CONSTANTS.SUBJECT_MIN_LENGTH} and ${VALIDATION_CONSTANTS.SUBJECT_MAX_LENGTH} characters`),\n\n  // Privacy and terms acceptance\n  acceptPrivacy: z\n    .boolean()\n    .refine((val) => val === true, 'You must accept the privacy policy'),\n\n  // Marketing consent (optional)\n  marketingConsent: z.boolean().optional(),\n\n  // Honeypot field for bot detection\n  website: z\n    .string()\n    .max(VALIDATION_CONSTANTS.HONEYPOT_MAX_LENGTH, 'This field should be empty')\n    .optional(),\n});\n\n/**\n * è”ç³»è¡¨å•æ•°æ®ç±»å‹\n * Contact form data type derived from schema\n */\nexport type ContactFormData = z.infer<typeof contactFormSchema>;\n\n/**\n * APIå“åº”éªŒè¯æ¨¡å¼\n * API response validation schemas\n */\nexport const apiResponseSchema = z.object({\n  success: z.boolean(),\n  message: z.string().optional(),\n  data: z.unknown().optional(),\n  error: z.string().optional(),\n  messageId: z.string().optional(),\n});\n\nexport type ApiResponse = z.infer<typeof apiResponseSchema>;\n\n/**\n * Airtableè®°å½•éªŒè¯æ¨¡å¼\n * Airtable record validation schema\n */\nexport const airtableRecordSchema = z.object({\n  id: z.string().optional(),\n  fields: z.object({\n    'First Name': z.string(),\n    'Last Name': z.string(),\n    'Email': z.string().email(),\n    'Company': z.string(),\n    'Message': z.string(),\n    'Phone': z.string().optional(),\n    'Subject': z.string().optional(),\n    'Submitted At': z.string(),\n    'Status': z\n      .enum(['New', 'In Progress', 'Completed', 'Archived'])\n      .default('New'),\n    'Source': z.string().default('Website Contact Form'),\n    'Marketing Consent': z.boolean().optional(),\n  }),\n  createdTime: z.string().optional(),\n});\n\nexport type AirtableRecord = z.infer<typeof airtableRecordSchema>;\n\n/**\n * é‚®ä»¶æ¨¡æ¿æ•°æ®éªŒè¯æ¨¡å¼\n * Email template data validation schema\n */\nexport const emailTemplateDataSchema = z.object({\n  firstName: z.string(),\n  lastName: z.string(),\n  email: z.string().email(),\n  company: z.string(),\n  message: z.string(),\n  phone: z.string().optional(),\n  subject: z.string().optional(),\n  submittedAt: z.string(),\n  marketingConsent: z.boolean().optional(),\n});\n\nexport type EmailTemplateData = z.infer<typeof emailTemplateDataSchema>;\n\n/**\n * è¡¨å•éªŒè¯é”™è¯¯ç±»å‹\n * Form validation error types\n */\nexport interface FormValidationError {\n  field: keyof ContactFormData;\n  message: string;\n}\n\n/**\n * è¡¨å•æäº¤çŠ¶æ€ç±»å‹\n * Form submission status types\n */\nexport type FormSubmissionStatus = 'idle' | 'submitting' | 'success' | 'error';\n\n/**\n * éªŒè¯è¾…åŠ©å‡½æ•°\n * Validation helper functions\n */\nexport const validationHelpers = {\n  /**\n   * éªŒè¯é‚®ç®±åŸŸåæ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­\n   * Validate if email domain is in allowed list\n   */\n  isEmailDomainAllowed: (email: string, allowedDomains?: string[]): boolean => {\n    if (!allowedDomains || allowedDomains.length === ZERO) return true;\n\n    const domain = email.split('@')[ONE]?.toLowerCase();\n    return allowedDomains.some((allowed) => domain === allowed.toLowerCase());\n  },\n\n  /**\n   * æ¸…ç†å’Œæ ‡å‡†åŒ–è¾“å…¥æ•°æ®\n   * Sanitize and normalize input data\n   */\n  sanitizeInput: (input: string): string => {\n    return input\n      .trim()\n      .replace(/\\s+/g, ' ') // Replace multiple spaces with single space\n      .replace(/[<>]/g, ''); // Remove potential HTML tags\n  },\n\n  /**\n   * éªŒè¯æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶\n   * Basic spam detection\n   */\n  isSpamContent: (message: string): boolean => {\n    const spamKeywords = [\n      'viagra',\n      'casino',\n      'lottery',\n      'winner',\n      'congratulations',\n      'click here',\n      'free money',\n      'make money fast',\n      'work from home',\n    ];\n\n    const lowerMessage = message.toLowerCase();\n    return spamKeywords.some((keyword) => lowerMessage.includes(keyword));\n  },\n\n  /**\n   * éªŒè¯æäº¤é¢‘ç‡é™åˆ¶\n   * Validate submission rate limiting\n   */\n  isSubmissionRateLimited: (\n    lastSubmission: Date | null,\n    cooldownMinutes = VALIDATION_CONSTANTS.DEFAULT_COOLDOWN_MINUTES,\n  ): boolean => {\n    if (!lastSubmission) return false;\n\n    const now = new Date();\n    const timeDiff = now.getTime() - lastSubmission.getTime();\n    const cooldownMs =\n      cooldownMinutes *\n      VALIDATION_CONSTANTS.COOLDOWN_TO_MS_MULTIPLIER *\n      VALIDATION_CONSTANTS.MS_PER_SECOND;\n\n    return timeDiff < cooldownMs;\n  },\n};\n\n/**\n * è¡¨å•éªŒè¯é…ç½®\n * Form validation configuration\n */\nexport const validationConfig = {\n  // Rate limiting\n  submissionCooldownMinutes: COUNT_FIVE,\n  maxSubmissionsPerHour: COUNT_TEN,\n\n  // Content filtering\n  enableSpamDetection: true,\n  allowedEmailDomains: [], // Empty array means all domains allowed\n\n  // Field requirements\n  requiredFields: [\n    'firstName',\n    'lastName',\n    'email',\n    'company',\n    'message',\n    'acceptPrivacy',\n  ] as const,\n  optionalFields: ['phone', 'subject', 'marketingConsent', 'website'] as const,\n\n  // Security settings\n  enableHoneypot: true,\n  enableCsrfProtection: true,\n  enableTurnstile: true,\n} as const;\n\n/**\n * å¯¼å‡ºé»˜è®¤éªŒè¯æ¨¡å¼\n * Export default validation schema\n */\nexport default contactFormSchema;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals-monitor.ts","messages":[{"ruleId":"max-statements","severity":2,"message":"Method 'setupPerformanceObservers' has too many statements (21). Maximum allowed is 20.","line":108,"column":36,"nodeType":"FunctionExpression","messageId":"exceed","endLine":183,"endColumn":4}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { COUNT_800, MAGIC_1800, MAGIC_2500, MAGIC_4000 } from \"@/constants/count\";\nimport { ANIMATION_DURATION_NORMAL, ANIMATION_DURATION_SLOW, HTTP_OK, ONE, PERCENTAGE_FULL, THREE_SECONDS_MS, ZERO } from '@/constants';\n\nimport { MAGIC_0_1, MAGIC_0_25 } from \"@/constants/decimal\";\nimport { logger } from '@/lib/logger';\n\n/**\n * æ‰©å±•çš„PerformanceEntryæ¥å£ï¼ŒåŒ…å«Layout Shiftç‰¹å®šå±æ€§\n */\ninterface LayoutShiftEntry extends PerformanceEntry {\n  hadRecentInput: boolean;\n  value: number;\n}\n\n/**\n * æ‰©å±•çš„PerformanceEntryæ¥å£ï¼ŒåŒ…å«First Input Delayç‰¹å®šå±æ€§\n */\ninterface FirstInputEntry extends PerformanceEntry {\n  processingStart: number;\n}\n\n/**\n * Web Vitals æ€§èƒ½æŒ‡æ ‡æ¥å£\n */\nexport interface WebVitalsMetrics {\n  /** ç´¯ç§¯å¸ƒå±€åç§» (Cumulative Layout Shift) */\n  cls: number;\n  /** é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (First Input Delay) */\n  fid: number;\n  /** æœ€å¤§å†…å®¹ç»˜åˆ¶ (Largest Contentful Paint) */\n  lcp: number;\n  /** é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (First Contentful Paint) */\n  fcp?: number;\n  /** é¦–å­—èŠ‚æ—¶é—´ (Time to First Byte) */\n  ttfb?: number;\n  /** äº¤äº’åˆ°ä¸‹æ¬¡ç»˜åˆ¶ (Interaction to Next Paint) */\n  inp?: number;\n}\n\n/**\n * æ€§èƒ½æŒ‡æ ‡è¯„çº§\n */\nexport interface MetricRating {\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n}\n\n/**\n * Web Vitals æ€§èƒ½ç›‘æ§ç±»\n *\n * åŸºäºç°æœ‰æ€§èƒ½ç›‘æ§ç»„ä»¶æ¨¡å¼ï¼Œæä¾›æ ¸å¿ƒWeb VitalsæŒ‡æ ‡çš„æ”¶é›†å’Œåˆ†æã€‚\n * æ”¯æŒå¼€å‘ç¯å¢ƒæ˜¾ç¤ºå’Œç”Ÿäº§ç¯å¢ƒé™é»˜æ”¶é›†ã€‚\n */\nexport class WebVitalsMonitor {\n  private static instance: WebVitalsMonitor;\n  private metrics: Partial<WebVitalsMetrics> = {};\n  private observers: PerformanceObserver[] = [];\n  private isInitialized = false;\n\n  // Web Vitals é˜ˆå€¼é…ç½®\n  private static readonly THRESHOLDS = {\n    CLS: { good: MAGIC_0_1, poor: MAGIC_0_25 },\n    FID: { good: PERCENTAGE_FULL, poor: ANIMATION_DURATION_NORMAL },\n    LCP: { good: MAGIC_2500, poor: MAGIC_4000 },\n    FCP: { good: MAGIC_1800, poor: THREE_SECONDS_MS },\n    TTFB: { good: COUNT_800, poor: MAGIC_1800 },\n    INP: { good: HTTP_OK, poor: ANIMATION_DURATION_SLOW },\n  } as const;\n\n  private constructor() {\n    this.initialize();\n  }\n\n  /**\n   * è·å–å•ä¾‹å®ä¾‹\n   */\n  static getInstance(): WebVitalsMonitor {\n    if (!WebVitalsMonitor.instance) {\n      WebVitalsMonitor.instance = new WebVitalsMonitor();\n    }\n    return WebVitalsMonitor.instance;\n  }\n\n  /**\n   * åˆå§‹åŒ–ç›‘æ§\n   */\n  private initialize(): void {\n    if (this.isInitialized || typeof window === 'undefined') {\n      return;\n    }\n\n    try {\n      this.setupPerformanceObservers();\n      this.setupNavigationTiming();\n      this.isInitialized = true;\n    } catch (error) {\n      logger.warn('Web Vitals monitoring initialization failed', {\n        error: error instanceof Error ? error.message : String(error),\n      });\n    }\n  }\n\n  /**\n   * è®¾ç½®æ€§èƒ½è§‚å¯Ÿå™¨\n   */\n  private setupPerformanceObservers(): void {\n    // CLS (Cumulative Layout Shift)\n    if ('PerformanceObserver' in window) {\n      try {\n        const clsObserver = new PerformanceObserver((list) => {\n          let clsValue = ZERO;\n          for (const entry of list.getEntries()) {\n            const layoutShiftEntry = entry as LayoutShiftEntry;\n            if (!layoutShiftEntry.hadRecentInput) {\n              clsValue += layoutShiftEntry.value;\n            }\n          }\n          this.recordCLS(clsValue);\n        });\n        clsObserver.observe({ type: 'layout-shift', buffered: true });\n        this.observers.push(clsObserver);\n      } catch (error) {\n        logger.warn('CLS observer setup failed', {\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n\n      // LCP (Largest Contentful Paint)\n      try {\n        const lcpObserver = new PerformanceObserver((list) => {\n          const entries = list.getEntries();\n          const lastEntry = entries[entries.length - ONE];\n          if (lastEntry) {\n            this.recordLCP(lastEntry.startTime);\n          }\n        });\n        lcpObserver.observe({\n          type: 'largest-contentful-paint',\n          buffered: true,\n        });\n        this.observers.push(lcpObserver);\n      } catch (error) {\n        logger.warn('LCP observer setup failed', {\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n\n      // FID (First Input Delay)\n      try {\n        const fidObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            const firstInputEntry = entry as FirstInputEntry;\n            this.recordFID(firstInputEntry.processingStart - entry.startTime);\n          }\n        });\n        fidObserver.observe({ type: 'first-input', buffered: true });\n        this.observers.push(fidObserver);\n      } catch (error) {\n        logger.warn('FID observer setup failed', {\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n\n      // FCP (First Contentful Paint)\n      try {\n        const fcpObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            if (entry.name === 'first-contentful-paint') {\n              this.recordFCP(entry.startTime);\n            }\n          }\n        });\n        fcpObserver.observe({ type: 'paint', buffered: true });\n        this.observers.push(fcpObserver);\n      } catch (error) {\n        logger.warn('FCP observer setup failed', {\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n    }\n  }\n\n  /**\n   * è®¾ç½®å¯¼èˆªæ—¶é—´ç›‘æ§\n   */\n  private setupNavigationTiming(): void {\n    if ('performance' in window && 'getEntriesByType' in performance) {\n      // ä½¿ç”¨ setTimeout ç¡®ä¿å¯¼èˆªæ—¶é—´æ•°æ®å¯ç”¨\n      setTimeout(() => {\n        const navigationEntries = performance.getEntriesByType(\n          'navigation',\n        ) as PerformanceNavigationTiming[];\n        if (navigationEntries.length > ZERO) {\n          const [navigation] = navigationEntries;\n          if (\n            navigation &&\n            navigation.responseStart &&\n            navigation.requestStart\n          ) {\n            const ttfb = navigation.responseStart - navigation.requestStart;\n            this.recordTTFB(ttfb);\n          }\n        }\n      }, ZERO);\n    }\n  }\n\n  /**\n   * è®°å½• CLS æŒ‡æ ‡\n   */\n  recordCLS(value: number): void {\n    this.metrics.cls = (this.metrics.cls || ZERO) + value;\n  }\n\n  /**\n   * è®°å½• FID æŒ‡æ ‡\n   */\n  recordFID(value: number): void {\n    if (!this.metrics.fid || value > this.metrics.fid) {\n      this.metrics.fid = value;\n    }\n  }\n\n  /**\n   * è®°å½• LCP æŒ‡æ ‡\n   */\n  recordLCP(value: number): void {\n    this.metrics.lcp = value;\n  }\n\n  /**\n   * è®°å½• FCP æŒ‡æ ‡\n   */\n  recordFCP(value: number): void {\n    this.metrics.fcp = value;\n  }\n\n  /**\n   * è®°å½• TTFB æŒ‡æ ‡\n   */\n  recordTTFB(value: number): void {\n    this.metrics.ttfb = value;\n  }\n\n  /**\n   * è·å–æ€§èƒ½æŒ‡æ ‡è¯„çº§\n   */\n  private getMetricRating(\n    metric: keyof typeof WebVitalsMonitor.THRESHOLDS,\n    value: number,\n  ): MetricRating {\n    // å®‰å…¨çš„å±æ€§è®¿é—®ï¼Œé˜²æ­¢å¯¹è±¡æ³¨å…¥æ”»å‡»\n    const allowedMetrics = ['CLS', 'FID', 'LCP', 'FCP', 'TTFB', 'INP'] as const;\n    if (!allowedMetrics.includes(metric as (typeof allowedMetrics)[number])) {\n      throw new Error(`Invalid metric: ${metric}`);\n    }\n    const safeThresholds = new Map(Object.entries(WebVitalsMonitor.THRESHOLDS));\n    const thresholds = safeThresholds.get(metric) || { good: ZERO, poor: ZERO };\n    let rating: 'good' | 'needs-improvement' | 'poor';\n\n    if (value <= thresholds.good) {\n      rating = 'good';\n    } else if (value <= thresholds.poor) {\n      rating = 'needs-improvement';\n    } else {\n      rating = 'poor';\n    }\n\n    return { value, rating };\n  }\n\n  /**\n   * è·å–æ€§èƒ½æ‘˜è¦\n   */\n  getPerformanceSummary(): {\n    metrics: WebVitalsMetrics;\n    ratings: Record<string, MetricRating>;\n    score: number;\n  } {\n    const metrics: WebVitalsMetrics = {\n      cls: this.metrics.cls || ZERO,\n      fid: this.metrics.fid || ZERO,\n      lcp: this.metrics.lcp || ZERO,\n      ...(this.metrics.fcp !== undefined && { fcp: this.metrics.fcp }),\n      ...(this.metrics.ttfb !== undefined && { ttfb: this.metrics.ttfb }),\n      ...(this.metrics.inp !== undefined && { inp: this.metrics.inp }),\n    };\n\n    const ratings = {\n      cls: this.getMetricRating('CLS', metrics.cls),\n      fid: this.getMetricRating('FID', metrics.fid),\n      lcp: this.getMetricRating('LCP', metrics.lcp),\n      ...(metrics.fcp && { fcp: this.getMetricRating('FCP', metrics.fcp) }),\n      ...(metrics.ttfb && { ttfb: this.getMetricRating('TTFB', metrics.ttfb) }),\n    };\n\n    // è®¡ç®—æ€»ä½“æ€§èƒ½è¯„åˆ†\n    const ratingValues = Object.values(ratings);\n    const goodCount = ratingValues.filter((r) => r.rating === 'good').length;\n    const score = Math.round((goodCount / ratingValues.length) * PERCENTAGE_FULL);\n\n    return { metrics, ratings, score };\n  }\n\n  /**\n   * å‘é€æ€§èƒ½æŠ¥å‘Š\n   */\n  sendReport(): void {\n    const summary = this.getPerformanceSummary();\n\n    // å¼€å‘ç¯å¢ƒè¾“å‡ºåˆ°æ—¥å¿—\n    if (process.env.NODE_ENV === 'development') {\n      logger.info('Web Vitals Performance Report', {\n        ratings: summary.ratings,\n        score: summary.score,\n        metrics: summary.metrics,\n      });\n    }\n\n    // ç”Ÿäº§ç¯å¢ƒå¯ä»¥å‘é€åˆ°åˆ†ææœåŠ¡\n    // è¿™é‡Œå¯ä»¥é›†æˆ Google Analyticsã€Vercel Analytics ç­‰\n  }\n\n  /**\n   * é‡ç½®ç›‘æ§å™¨çŠ¶æ€\n   */\n  reset(): void {\n    this.metrics = {};\n    this.cleanup();\n    this.initialize();\n  }\n\n  /**\n   * æ¸…ç†ç›‘æ§å™¨\n   */\n  cleanup(): void {\n    this.observers.forEach((observer) => {\n      try {\n        observer.disconnect();\n      } catch (error) {\n        logger.warn('Failed to disconnect performance observer', {\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n    });\n    this.observers = [];\n    this.isInitialized = false;\n  }\n}\n\n/**\n * è·å– Web Vitals ç›‘æ§å®ä¾‹\n */\nexport const webVitalsMonitor = WebVitalsMonitor.getInstance();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-notifications.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RANDOM_ID_BASE' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { logger } from '@/lib/logger';\nimport { COUNT_PAIR, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport { formatMetricValue } from '@/lib/web-vitals/alert-helpers';\nimport { ALERT_SYSTEM_CONSTANTS } from \"@/constants/performance-constants\";\nconst {RANDOM_ID_BASE} = ALERT_SYSTEM_CONSTANTS;\nimport { MAGIC_9 } from \"@/constants/count\";\n\n// å¸¸é‡å®šä¹‰\nconst ALERT_ID_CONSTANTS = {\n  BASE_36: ALERT_SYSTEM_CONSTANTS.RANDOM_ID_BASE,\n  SUBSTR_START: COUNT_PAIR,\n  SUBSTR_LENGTH: MAGIC_9,\n} as const;\n\n/**\n * è­¦æŠ¥é€šçŸ¥å¤„ç†å™¨\n * è´Ÿè´£å‘é€å„ç§ç±»å‹çš„è­¦æŠ¥é€šçŸ¥\n */\n\nexport interface AlertData {\n  type: 'metric' | 'regression';\n  severity: 'warning' | 'critical';\n  message: string;\n  metric?: string;\n  value?: number;\n  threshold?: number;\n}\n\n/**\n * å‘é€æ§åˆ¶å°é¢„è­¦\n */\nexport function sendConsoleAlerts(alerts: AlertData[]): void {\n  alerts.forEach((alert) => {\n    const emoji = alert.severity === 'critical' ? 'ğŸ”´' : 'ğŸŸ¡';\n    const prefix = `[${alert.type.toUpperCase()}] ${emoji}`;\n\n    if (alert.severity === 'critical') {\n      logger.error(`${prefix} ${alert.message}`, {\n        metric: alert.metric,\n        value: alert.value,\n        threshold: alert.threshold,\n      });\n    } else {\n      logger.warn(`${prefix} ${alert.message}`, {\n        metric: alert.metric,\n        value: alert.value,\n        threshold: alert.threshold,\n      });\n    }\n  });\n}\n\n/**\n * å‘é€Webhooké€šçŸ¥\n */\nexport async function sendWebhookNotification(\n  alert: AlertData,\n  webhookUrl: string,\n): Promise<void> {\n  try {\n    const payload = {\n      type: 'performance_alert',\n      severity: alert.severity,\n      message: alert.message,\n      timestamp: new Date().toISOString(),\n      data: {\n        metric: alert.metric,\n        value: alert.value\n          ? formatMetricValue(alert.metric || '', alert.value)\n          : undefined,\n        threshold: alert.threshold\n          ? formatMetricValue(alert.metric || '', alert.threshold)\n          : undefined,\n      },\n    };\n\n    const response = await fetch(webhookUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(payload),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Webhook request failed: ${response.status}`);\n    }\n\n    logger.info('Webhook notification sent successfully', {\n      url: webhookUrl,\n      severity: alert.severity,\n    });\n  } catch (error) {\n    logger.error('Failed to send webhook notification', {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      url: webhookUrl,\n      alert: alert.message,\n    });\n  }\n}\n\n/**\n * å­˜å‚¨é¢„è­¦åˆ°æœ¬åœ°å­˜å‚¨\n */\nexport function storeAlerts(alerts: AlertData[]): void {\n  if (typeof localStorage === 'undefined') return;\n\n  try {\n    const existingAlerts = JSON.parse(\n      localStorage.getItem('performance_alerts') || '[]',\n    );\n    const newAlerts = alerts.map((alert) => ({\n      ...alert,\n      id: `alert-${Date.now()}-${Math.random().toString(ALERT_ID_CONSTANTS.BASE_36).substr(ALERT_ID_CONSTANTS.SUBSTR_START, ALERT_ID_CONSTANTS.SUBSTR_LENGTH)}`,\n      timestamp: Date.now(),\n    }));\n\n    const allAlerts = [...existingAlerts, ...newAlerts];\n\n    // é™åˆ¶å­˜å‚¨çš„è­¦æŠ¥æ•°é‡\n    const maxAlerts = PERCENTAGE_FULL;\n    if (allAlerts.length > maxAlerts) {\n      allAlerts.splice(ZERO, allAlerts.length - maxAlerts);\n    }\n\n    localStorage.setItem('performance_alerts', JSON.stringify(allAlerts));\n  } catch (error) {\n    logger.error('Failed to store alerts to localStorage', {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      alertCount: alerts.length,\n    });\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-system-checker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-system-core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-system-sender.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Async method 'sendAlert' has too many parameters (4). Maximum allowed is 3.","line":79,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":79,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ€§èƒ½é¢„è­¦ç³»ç»Ÿ - é¢„è­¦å‘é€å™¨\n * Performance Alert System - Alert Sender\n */\n\nimport { ALERT_SYSTEM_CONSTANTS } from '@/constants/performance-constants';\nimport { ONE, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport type { AlertInfo } from '@/lib/web-vitals/alert-system-checker';\nimport type { PerformanceAlert, PerformanceAlertConfig } from '@/lib/web-vitals/types';\nimport {\n  sendConsoleAlerts,\n  sendWebhookNotification,\n  storeAlerts,\n} from '@/lib/web-vitals/alert-notifications';\n\n/**\n * é¢„è­¦å†å²è®°å½•æ¥å£\n */\nexport interface AlertHistoryEntry {\n  id: string;\n  timestamp: number;\n  severity: 'warning' | 'critical';\n  message: string;\n  metric?: string;\n  value?: number;\n  threshold?: number;\n  level?: 'warning' | 'critical'; // ä¸ºäº†å…¼å®¹æµ‹è¯•\n}\n\n/**\n * æ€§èƒ½é¢„è­¦å‘é€å™¨ç±»\n * Performance alert sender class\n */\nexport class AlertSystemSender {\n  private alertHistory: AlertHistoryEntry[] = [];\n\n  /**\n   * å‘é€é¢„è­¦\n   */\n  sendAlerts(alerts: AlertInfo[], config: PerformanceAlertConfig): void {\n    // æ·»åŠ åˆ°å†å²è®°å½•\n    alerts.forEach((alert) => {\n      const historyEntry: AlertHistoryEntry = {\n        id: this.generateAlertId(),\n        timestamp: Date.now(),\n        severity: alert.severity,\n        message: alert.message,\n        level: alert.severity, // ä¸ºäº†å…¼å®¹æµ‹è¯•\n        ...(alert.metric && { metric: alert.metric }),\n        ...(alert.value !== undefined && { value: alert.value }),\n        ...(alert.threshold !== undefined && { threshold: alert.threshold }),\n      };\n      this.alertHistory.push(historyEntry);\n    });\n\n    // é™åˆ¶å†å²è®°å½•å¤§å°\n    this.limitHistorySize();\n\n    // æ§åˆ¶å°é€šçŸ¥\n    if (config.channels.console) {\n      sendConsoleAlerts(alerts);\n    }\n\n    // å­˜å‚¨é€šçŸ¥\n    if (config.channels.storage) {\n      storeAlerts(alerts);\n    }\n\n    // å›è°ƒé€šçŸ¥\n    if (config.channels.callback) {\n      this.sendCallbackAlerts(alerts, config.channels.callback);\n    }\n  }\n\n  /**\n   * å‘é€å•ä¸ªè­¦æŠ¥ (æµ‹è¯•æ–¹æ³•)\n   */\n  async sendAlert(\n    severity: 'warning' | 'critical',\n    message: string,\n    config: PerformanceAlertConfig,\n    data?: Record<string, unknown>,\n  ): Promise<void> {\n    const alert: AlertInfo = {\n      type: 'metric',\n      severity,\n      message,\n      ...data,\n    };\n\n    // ç›´æ¥æ·»åŠ åˆ°å†å²è®°å½•ï¼Œä¸é€šè¿‡sendAlertsé¿å…é‡å¤\n    const alertId = this.generateAlertId();\n    const historyEntry: AlertHistoryEntry = {\n      id: alertId,\n      timestamp: Date.now(),\n      severity,\n      message,\n      level: severity, // ä¸ºäº†å…¼å®¹æµ‹è¯•\n      ...data,\n    };\n    this.alertHistory.push(historyEntry);\n\n    // é™åˆ¶å†å²è®°å½•å¤§å°\n    this.limitHistorySize();\n\n    // ç›´æ¥å‘é€é€šçŸ¥ï¼Œä¸é€šè¿‡sendAlertsé¿å…é‡å¤æ·»åŠ å†å²\n    if (config.channels.console) {\n      sendConsoleAlerts([alert]);\n    }\n\n    // å¤„ç†webhooké€šçŸ¥\n    if (config.channels?.webhook) {\n      await sendWebhookNotification(alert, config.channels.webhook);\n    }\n  }\n\n  /**\n   * å‘é€å›è°ƒé¢„è­¦\n   */\n  private sendCallbackAlerts(\n    alerts: AlertInfo[],\n    callback: (alert: PerformanceAlert) => void,\n  ): void {\n    alerts.forEach((alert) => {\n      const performanceAlert: PerformanceAlert = {\n        id: this.generateAlertId(),\n        timestamp: Date.now(),\n        severity: alert.severity,\n        metric: alert.metric || 'unknown',\n        value: alert.value || 0,\n        threshold: alert.threshold || 0,\n        message: alert.message,\n        url: typeof window !== 'undefined' ? window.location.href : '',\n        userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n        context: {},\n      };\n      callback(performanceAlert);\n    });\n  }\n\n  /**\n   * è·å–è­¦æŠ¥å†å² (æµ‹è¯•æ–¹æ³•)\n   */\n  getAlertHistory(): AlertHistoryEntry[] {\n    return [...this.alertHistory];\n  }\n\n  /**\n   * æ¸…é™¤è­¦æŠ¥å†å² (æµ‹è¯•æ–¹æ³•)\n   */\n  clearAlertHistory(): void {\n    this.alertHistory = [];\n  }\n\n  /**\n   * æ¸…é™¤å†å²è®°å½•çš„åˆ«åæ–¹æ³• (æµ‹è¯•å…¼å®¹)\n   */\n  clearHistory(): void {\n    this.clearAlertHistory();\n  }\n\n  /**\n   * ç”Ÿæˆå”¯ä¸€çš„è­¦æŠ¥ID\n   */\n  private generateAlertId(): string {\n    const timestamp = Date.now();\n    const randomPart = Math.random()\n      .toString(ALERT_SYSTEM_CONSTANTS.RANDOM_ID_BASE)\n      .substr(\n        ALERT_SYSTEM_CONSTANTS.RANDOM_ID_START,\n        ALERT_SYSTEM_CONSTANTS.RANDOM_ID_LENGTH,\n      );\n    return `alert-${timestamp}-${randomPart}`;\n  }\n\n  /**\n   * é™åˆ¶å†å²è®°å½•å¤§å°\n   */\n  private limitHistorySize(): void {\n    if (this.alertHistory.length > PERCENTAGE_FULL) {\n      this.alertHistory.splice(ZERO, this.alertHistory.length - PERCENTAGE_FULL);\n    }\n  }\n\n  /**\n   * è·å–å†å²è®°å½•ç»Ÿè®¡\n   */\n  getHistoryStats(): {\n    total: number;\n    warnings: number;\n    criticals: number;\n    lastAlert?: AlertHistoryEntry;\n  } {\n    const warnings = this.alertHistory.filter(\n      (alert) => alert.severity === 'warning',\n    ).length;\n    const criticals = this.alertHistory.filter(\n      (alert) => alert.severity === 'critical',\n    ).length;\n    const lastAlert = this.alertHistory[this.alertHistory.length - ONE];\n\n    return {\n      total: this.alertHistory.length,\n      warnings,\n      criticals,\n      ...(lastAlert && { lastAlert }),\n    };\n  }\n\n  /**\n   * æ ¹æ®æ¡ä»¶è¿‡æ»¤å†å²è®°å½•\n   */\n  filterHistory(filter: {\n    severity?: 'warning' | 'critical';\n    metric?: string;\n    startTime?: number;\n    endTime?: number;\n  }): AlertHistoryEntry[] {\n    return this.alertHistory.filter((alert) => {\n      if (filter.severity && alert.severity !== filter.severity) return false;\n      if (filter.metric && alert.metric !== filter.metric) return false;\n      if (filter.startTime && alert.timestamp < filter.startTime) return false;\n      if (filter.endTime && alert.timestamp > filter.endTime) return false;\n      return true;\n    });\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/alert-system.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/baseline-manager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'HOURS_PER_DAY' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":83}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  BASELINE_CONSTANTS,\n  WEB_VITALS_THRESHOLDS,\n} from '@/constants/performance-constants';\nimport { WEB_VITALS_CONSTANTS } from '@/constants/test-constants';\nimport { HOURS_PER_DAY, MINUTES_PER_HOUR, ONE, PERCENTAGE_FULL, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport type { DetailedWebVitals, PerformanceBaseline } from '@/lib/web-vitals/types';\n\n/**\n * æ€§èƒ½åŸºå‡†æ•°æ®åº“ç®¡ç†ç±»\n * è´Ÿè´£ä¿å­˜ã€æ£€ç´¢å’Œç®¡ç†æ€§èƒ½åŸºå‡†æ•°æ®\n */\nexport class PerformanceBaselineManager {\n  private static readonly STORAGE_KEY = 'performance-baselines';\n  private static readonly MAX_BASELINES = WEB_VITALS_CONSTANTS.MAX_BASELINES; // æœ€å¤šä¿å­˜50ä¸ªåŸºå‡†æ•°æ®\n\n  /**\n   * ä¿å­˜æ€§èƒ½åŸºå‡†æ•°æ®\n   */\n  saveBaseline(\n    metrics: DetailedWebVitals,\n    _buildInfo?: PerformanceBaseline['buildInfo'],\n  ): void {\n    try {\n      const baselineData = {\n        id: this.generateId(),\n        timestamp: Date.now(),\n        url: metrics.page.url,\n        userAgent: metrics.device.userAgent,\n        connection: metrics.connection\n          ? {\n              effectiveType: metrics.connection.effectiveType,\n              downlink: metrics.connection.downlink,\n            }\n          : undefined,\n        metrics: {\n          cls: metrics.cls,\n          lcp: metrics.lcp,\n          fid: metrics.fid,\n          fcp: metrics.fcp,\n          ttfb: metrics.ttfb,\n          domContentLoaded: metrics.domContentLoaded,\n          loadComplete: metrics.loadComplete,\n          firstPaint: metrics.firstPaint,\n        },\n        score: this.calculateScore(metrics),\n        environment: {\n          viewport: metrics.device.viewport,\n          memory: metrics.device.memory,\n          cores: metrics.device.cores,\n        },\n      };\n\n      const baseline: PerformanceBaseline = baselineData as PerformanceBaseline;\n\n      const baselines = this.getBaselines();\n      baselines.push(baseline);\n\n      // ä¿æŒæœ€æ–°çš„åŸºå‡†æ•°æ®\n      if (baselines.length > PerformanceBaselineManager.MAX_BASELINES) {\n        baselines.splice(\n          ZERO,\n          baselines.length - PerformanceBaselineManager.MAX_BASELINES,\n        );\n      }\n\n      this.saveBaselines(baselines);\n      logger.info('Performance baseline saved', { baselineId: baseline.id });\n    } catch (error) {\n      logger.error('Failed to save performance baseline', { error });\n    }\n  }\n\n  /**\n   * è·å–æœ€è¿‘çš„åŸºå‡†æ•°æ®\n   */\n  getRecentBaseline(\n    page?: string,\n    locale?: string,\n  ): PerformanceBaseline | null {\n    try {\n      const baselines = this.getBaselines();\n\n      // è¿‡æ»¤åŒ¹é…çš„åŸºå‡†æ•°æ®\n      const filtered = baselines.filter((baseline) => {\n        if (page && !baseline.url.includes(page)) return false;\n        if (locale && !baseline.url.includes(`/${locale}/`)) return false;\n        return true;\n      });\n\n      // è¿”å›æœ€æ–°çš„åŸºå‡†æ•°æ®\n      return filtered.length > ZERO ? filtered[filtered.length - ONE] || null : null;\n    } catch (error) {\n      logger.error('Failed to get recent baseline', { error });\n      return null;\n    }\n  }\n\n  /**\n   * è·å–æ‰€æœ‰åŸºå‡†æ•°æ®\n   */\n  getBaselines(): PerformanceBaseline[] {\n    try {\n      if (typeof window === 'undefined') return [];\n\n      const stored = localStorage.getItem(\n        PerformanceBaselineManager.STORAGE_KEY,\n      );\n      if (!stored) return [];\n\n      const parsed = JSON.parse(stored);\n      return Array.isArray(parsed) ? parsed : [];\n    } catch (error) {\n      logger.error('Failed to get baselines from storage', { error });\n      return [];\n    }\n  }\n\n  /**\n   * ä¿å­˜åŸºå‡†æ•°æ®åˆ°å­˜å‚¨\n   */\n  private saveBaselines(baselines: PerformanceBaseline[]): void {\n    try {\n      if (typeof window === 'undefined') return;\n\n      localStorage.setItem(\n        PerformanceBaselineManager.STORAGE_KEY,\n        JSON.stringify(baselines),\n      );\n    } catch (error) {\n      logger.error('Failed to save baselines to storage', { error });\n    }\n  }\n\n  /**\n   * ç”Ÿæˆå”¯ä¸€ID\n   */\n  private generateId(): string {\n    return `baseline-${Date.now()}-${Math.random().toString(WEB_VITALS_CONSTANTS.HASH_BASE).substr(WEB_VITALS_CONSTANTS.ID_SUBSTR_START, WEB_VITALS_CONSTANTS.ID_RANDOM_LENGTH)}`;\n  }\n\n  /**\n   * è®¡ç®—æ€§èƒ½è¯„åˆ†\n   */\n  private calculateScore(metrics: DetailedWebVitals): number {\n    // ç®€åŒ–çš„è¯„åˆ†ç®—æ³•\n    let score = PERCENTAGE_FULL;\n\n    // CLS è¯„åˆ†\n    if (metrics.cls > BASELINE_CONSTANTS.CLS_BASELINE)\n      score -= BASELINE_CONSTANTS.CLS_BASELINE_DAYS;\n    else if (metrics.cls > BASELINE_CONSTANTS.FID_BASELINE)\n      score -= BASELINE_CONSTANTS.FID_BASELINE_DAYS;\n\n    // LCP è¯„åˆ†\n    if (metrics.lcp > BASELINE_CONSTANTS.LCP_BASELINE)\n      score -= BASELINE_CONSTANTS.LCP_BASELINE_DAYS;\n    else if (metrics.lcp > BASELINE_CONSTANTS.TTFB_BASELINE)\n      score -= BASELINE_CONSTANTS.TTFB_BASELINE_DAYS;\n\n    // FID è¯„åˆ†\n    if (metrics.fid > BASELINE_CONSTANTS.INP_BASELINE)\n      score -= BASELINE_CONSTANTS.INP_BASELINE_DAYS;\n    else if (metrics.fid > WEB_VITALS_THRESHOLDS.FID.GOOD)\n      score -= BASELINE_CONSTANTS.INP_BASELINE_EXTRA_DAYS;\n\n    return Math.max(ZERO, score);\n  }\n\n  /**\n   * æ¸…ç†è¿‡æœŸçš„åŸºå‡†æ•°æ®\n   */\n  cleanupOldBaselines(\n    maxAge: number = WEB_VITALS_CONSTANTS.BASELINE_MAX_AGE_DAYS *\n      WEB_VITALS_CONSTANTS.HOURS_PER_DAY *\n      WEB_VITALS_CONSTANTS.MINUTES_PER_HOUR *\n      WEB_VITALS_CONSTANTS.SECONDS_PER_MINUTE *\n      WEB_VITALS_CONSTANTS.MILLISECONDS_PER_SECOND,\n  ): void {\n    try {\n      const baselines = this.getBaselines();\n      const cutoff = Date.now() - maxAge;\n\n      const filtered = baselines.filter(\n        (baseline) => baseline.timestamp > cutoff,\n      );\n\n      if (filtered.length !== baselines.length) {\n        this.saveBaselines(filtered);\n        logger.info('Cleaned up old baselines', {\n          removed: baselines.length - filtered.length,\n          remaining: filtered.length,\n        });\n      }\n    } catch (error) {\n      logger.error('Failed to cleanup old baselines', { error });\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/collector.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STANDARD_HEIGHT' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { COUNT_4 } from \"@/constants/count\";\nimport { BREAKPOINT_FULL_HD  } from '@/constants';\n\nimport { TEST_APP_CONSTANTS, WEB_VITALS_CONSTANTS } from \"@/constants/test-constants\";\nconst {STANDARD_HEIGHT} = TEST_APP_CONSTANTS;\n\n/**\n * Web Vitals æ€§èƒ½é˜ˆå€¼å¸¸é‡\n */\nexport const PERFORMANCE_THRESHOLDS = {\n  SLOW_RESOURCE_THRESHOLD: WEB_VITALS_CONSTANTS.SLOW_RESOURCE_THRESHOLD,\n  MAX_SLOW_RESOURCES: WEB_VITALS_CONSTANTS.MAX_SLOW_RESOURCES,\n  CLS_GOOD: WEB_VITALS_CONSTANTS.CLS_GOOD_THRESHOLD,\n  CLS_NEEDS_IMPROVEMENT: WEB_VITALS_CONSTANTS.CLS_NEEDS_IMPROVEMENT_THRESHOLD,\n  LCP_GOOD: WEB_VITALS_CONSTANTS.LCP_GOOD_THRESHOLD,\n  LCP_NEEDS_IMPROVEMENT: WEB_VITALS_CONSTANTS.LCP_NEEDS_IMPROVEMENT_THRESHOLD,\n  FID_GOOD: WEB_VITALS_CONSTANTS.FID_GOOD_THRESHOLD,\n  FID_NEEDS_IMPROVEMENT: WEB_VITALS_CONSTANTS.FID_NEEDS_IMPROVEMENT_THRESHOLD,\n  FCP_GOOD: WEB_VITALS_CONSTANTS.FCP_GOOD_THRESHOLD,\n  TTFB_GOOD: WEB_VITALS_CONSTANTS.TTFB_GOOD_THRESHOLD,\n  TTFB_NEEDS_IMPROVEMENT: WEB_VITALS_CONSTANTS.TTFB_NEEDS_IMPROVEMENT_THRESHOLD,\n  SCORE_WEIGHTS: {\n    CLS: WEB_VITALS_CONSTANTS.SCORE_WEIGHT_QUARTER,\n    LCP: WEB_VITALS_CONSTANTS.SCORE_WEIGHT_QUARTER,\n    FID: WEB_VITALS_CONSTANTS.SCORE_WEIGHT_QUARTER,\n    FCP: WEB_VITALS_CONSTANTS.SCORE_WEIGHT_QUARTER,\n  },\n  SCORE_MULTIPLIERS: {\n    GOOD: WEB_VITALS_CONSTANTS.SCORE_MULTIPLIER_GOOD,\n    NEEDS_IMPROVEMENT: WEB_VITALS_CONSTANTS.SCORE_MULTIPLIER_NEEDS_IMPROVEMENT,\n    POOR: WEB_VITALS_CONSTANTS.SCORE_MULTIPLIER_POOR,\n  },\n} as const;\n\n/**\n * è®¾å¤‡é»˜è®¤å€¼å¸¸é‡\n */\nexport const DEVICE_DEFAULTS = {\n  MEMORY_GB: COUNT_4,\n  CPU_CORES: COUNT_4,\n  VIEWPORT_WIDTH: BREAKPOINT_FULL_HD,\n  VIEWPORT_HEIGHT: TEST_APP_CONSTANTS.STANDARD_HEIGHT,\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/monitoring-manager-core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/monitoring-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/monitoring-report-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/monitoring-utils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MINUTES_PER_HOUR' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SECONDS_PER_MINUTE' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":51},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":113,"column":12,"nodeType":"MemberExpression","endLine":113,"endColumn":24}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æ€§èƒ½ç›‘æ§å·¥å…·å‡½æ•°\n * æä¾›é€šç”¨çš„å·¥å…·æ–¹æ³•å’Œè¾…åŠ©å‡½æ•°\n */\n\nimport { WEB_VITALS_CONSTANTS } from '@/constants/test-constants';\nimport { MINUTES_PER_HOUR, ONE, SECONDS_PER_MINUTE, ZERO } from '@/constants';\n\nimport { PERFORMANCE_THRESHOLDS } from '@/lib/web-vitals/constants';\nimport type { DetailedWebVitals, PerformanceBaseline } from '@/lib/web-vitals/types';\n\n/**\n * æ€§èƒ½ç›‘æ§å·¥å…·ç±»\n */\nexport class MonitoringUtils {\n  /**\n   * è·å–æŒ‡æ ‡çŠ¶æ€çš„è¾…åŠ©å‡½æ•°\n   */\n  static getStandardMetricStatus(\n    value: number,\n    goodThreshold: number,\n    needsImprovementThreshold: number,\n  ): string {\n    if (value <= goodThreshold) return 'ğŸŸ¢';\n    if (value <= needsImprovementThreshold) return 'ğŸŸ¡';\n    return 'ğŸ”´';\n  }\n\n  /**\n   * è·å–æŒ‡æ ‡çŠ¶æ€\n   */\n  static getMetricStatus(metric: string, value: number): string {\n    const thresholds = PERFORMANCE_THRESHOLDS;\n\n    // å®šä¹‰æŒ‡æ ‡é˜ˆå€¼æ˜ å°„\n    const metricThresholds = {\n      cls: {\n        good: thresholds.CLS_GOOD,\n        needsImprovement: thresholds.CLS_NEEDS_IMPROVEMENT,\n      },\n      fid: {\n        good: thresholds.FID_GOOD,\n        needsImprovement: thresholds.FID_NEEDS_IMPROVEMENT,\n      },\n      lcp: {\n        good: thresholds.LCP_GOOD,\n        needsImprovement: thresholds.LCP_NEEDS_IMPROVEMENT,\n      },\n      fcp: {\n        good: thresholds.FCP_GOOD,\n        needsImprovement: WEB_VITALS_CONSTANTS.FCP_NEEDS_IMPROVEMENT_THRESHOLD,\n      },\n      ttfb: {\n        good: thresholds.TTFB_GOOD,\n        needsImprovement: thresholds.TTFB_NEEDS_IMPROVEMENT,\n      },\n    };\n\n    const threshold = metricThresholds[metric as keyof typeof metricThresholds];\n    if (!threshold) {\n      return '';\n    }\n\n    return MonitoringUtils.getStandardMetricStatus(\n      value,\n      threshold.good,\n      threshold.needsImprovement,\n    );\n  }\n\n  /**\n   * åˆ¤æ–­æ˜¯å¦åº”è¯¥ä¿å­˜åŸºå‡†æ•°æ®\n   */\n  static shouldSaveBaseline(\n    _metrics: DetailedWebVitals,\n    baseline: PerformanceBaseline | null,\n  ): boolean {\n    if (!baseline) return true; // æ²¡æœ‰åŸºå‡†æ•°æ®æ—¶æ€»æ˜¯ä¿å­˜\n\n    // å¦‚æœè·ç¦»ä¸Šæ¬¡åŸºå‡†è¶…è¿‡24å°æ—¶ï¼Œä¿å­˜æ–°åŸºå‡†\n    const hoursSinceBaseline =\n      (Date.now() - baseline.timestamp) /\n      (WEB_VITALS_CONSTANTS.MILLISECONDS_PER_SECOND *\n        WEB_VITALS_CONSTANTS.SECONDS_PER_MINUTE *\n        WEB_VITALS_CONSTANTS.MINUTES_PER_HOUR);\n    return hoursSinceBaseline > WEB_VITALS_CONSTANTS.BASELINE_REFRESH_HOURS;\n  }\n\n  /**\n   * éªŒè¯æŒ‡æ ‡æ•°æ®æœ‰æ•ˆæ€§\n   */\n  static isValidMetrics(metrics: DetailedWebVitals): boolean {\n    return metrics.lcp > ZERO && metrics.fcp > ZERO && metrics.ttfb > ZERO;\n  }\n\n  /**\n   * æå–é¡µé¢æ ‡è¯†ç¬¦\n   */\n  static extractPageIdentifier(url: string): string {\n    try {\n      const urlObj = new URL(url);\n      return urlObj.pathname;\n    } catch {\n      return url;\n    }\n  }\n\n  /**\n   * æå–locale\n   */\n  static extractLocale(url: string): string {\n    const match = url.match(/\\/([a-z]{2})(?:\\/|$)/);\n    return match?.[ONE] ?? 'en';\n  }\n\n  /**\n   * è®¡ç®—æ€§èƒ½ç­‰çº§\n   */\n  static calculateGrade(score: number): 'A' | 'B' | 'C' | 'D' | 'F' {\n    if (score >= WEB_VITALS_CONSTANTS.GRADE_A_THRESHOLD) return 'A';\n    if (score >= WEB_VITALS_CONSTANTS.GRADE_B_THRESHOLD) return 'B';\n    if (score >= WEB_VITALS_CONSTANTS.GRADE_C_THRESHOLD) return 'C';\n    if (score >= WEB_VITALS_CONSTANTS.GRADE_D_THRESHOLD) return 'D';\n    return 'F';\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/observers.ts","messages":[],"suppressedMessages":[{"ruleId":"no-unreachable-loop","severity":2,"message":"Invalid loop. Its body allows only one iteration.","line":83,"column":9,"nodeType":"ForOfStatement","messageId":"invalid","endLine":89,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/regression-detector.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/web-vitals-collector-analyzer.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":83,"column":7,"nodeType":"MemberExpression","endLine":83,"endColumn":41},{"ruleId":"no-magic-numbers","severity":2,"message":"No magic number: 500.","line":83,"column":54,"nodeType":"Literal","messageId":"noMagic","endLine":83,"endColumn":57},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":86,"column":20,"nodeType":"MemberExpression","endLine":86,"endColumn":54},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":86,"column":65,"nodeType":"MemberExpression","endLine":86,"endColumn":99},{"ruleId":"max-params","severity":2,"message":"Method 'buildDiagnosticResult' has too many parameters (4). Maximum allowed is 3.","line":162,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":162,"endColumn":34}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Web Vitals æ”¶é›†å™¨åˆ†æå™¨\n * Web Vitals collector analyzer\n */\n\n'use client';\n\nimport { WEB_VITALS_CONSTANTS } from '@/constants/test-constants';\nimport { BYTES_PER_KB, COUNT_FIVE, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, DAYS_PER_MONTH, MAGIC_15, MAGIC_600, MAGIC_800, MAGIC_1800, ONE, PERCENTAGE_FULL, PERCENTAGE_QUARTER, THREE_SECONDS_MS, ZERO } from '@/constants';\n\nimport { PERFORMANCE_THRESHOLDS } from '@/lib/web-vitals/constants';\nimport type { DetailedWebVitals } from '@/lib/web-vitals/types';\n\n/**\n * Web Vitals æ€§èƒ½åˆ†æå™¨\n * è´Ÿè´£æ€§èƒ½æŒ‡æ ‡åˆ†æå’Œè¯Šæ–­æŠ¥å‘Šç”Ÿæˆ\n */\nexport class WebVitalsCollectorAnalyzer {\n  /**\n   * åˆ†æ CLS æŒ‡æ ‡å¹¶ç”Ÿæˆé—®é¢˜å’Œå»ºè®®\n   */\n  protected analyzeCLS(\n    cls: number,\n    issues: string[],\n    recommendations: string[],\n  ): void {\n    if (cls > PERFORMANCE_THRESHOLDS.CLS_NEEDS_IMPROVEMENT) {\n      issues.push(`ç´¯ç§¯å¸ƒå±€åç§» (CLS) è¿‡é«˜: ${cls.toFixed(COUNT_TRIPLE)}`);\n      recommendations.push(\n        'ä¸ºå›¾ç‰‡å’Œå¹¿å‘Šè®¾ç½®æ˜ç¡®çš„å°ºå¯¸ï¼Œé¿å…åŠ¨æ€å†…å®¹æ’å…¥å¯¼è‡´å¸ƒå±€åç§»',\n      );\n      recommendations.push(\n        'ä½¿ç”¨ CSS aspect-ratio å±æ€§é¢„ç•™ç©ºé—´ï¼Œé¿å…å†…å®¹åŠ è½½æ—¶çš„å¸ƒå±€å˜åŒ–',\n      );\n      recommendations.push(\n        'ç¡®ä¿å­—ä½“åŠ è½½ä¸ä¼šå¯¼è‡´æ–‡æœ¬é‡æ–°å¸ƒå±€ï¼Œä½¿ç”¨ font-display: swap',\n      );\n    }\n  }\n\n  /**\n   * åˆ†æ LCP æŒ‡æ ‡å¹¶ç”Ÿæˆé—®é¢˜å’Œå»ºè®®\n   */\n  protected analyzeLCP(\n    lcp: number,\n    issues: string[],\n    recommendations: string[],\n  ): void {\n    if (lcp > PERFORMANCE_THRESHOLDS.LCP_NEEDS_IMPROVEMENT) {\n      issues.push(`æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP) è¿‡æ…¢: ${lcp.toFixed(ZERO)}ms`);\n      recommendations.push('ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼Œä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼å¦‚ WebP');\n      recommendations.push('å‡å°‘æœåŠ¡å™¨å“åº”æ—¶é—´ï¼Œä¼˜åŒ–åç«¯æ€§èƒ½');\n      recommendations.push('ä½¿ç”¨ CDN åŠ é€Ÿèµ„æºåŠ è½½');\n    }\n  }\n\n  /**\n   * åˆ†æ FID æŒ‡æ ‡å¹¶ç”Ÿæˆé—®é¢˜å’Œå»ºè®®\n   */\n  protected analyzeFID(\n    fid: number,\n    issues: string[],\n    recommendations: string[],\n  ): void {\n    if (fid > PERFORMANCE_THRESHOLDS.FID_NEEDS_IMPROVEMENT) {\n      issues.push(`é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (FID) è¿‡é«˜: ${fid.toFixed(ZERO)}ms`);\n      recommendations.push('å‡å°‘ JavaScript æ‰§è¡Œæ—¶é—´ï¼Œè€ƒè™‘ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½');\n      recommendations.push('ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œå»¶è¿Ÿéå…³é”®è„šæœ¬çš„åŠ è½½');\n      recommendations.push('ä½¿ç”¨ Web Workers å¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡');\n    }\n  }\n\n  /**\n   * åˆ†æèµ„æºåŠ è½½æ€§èƒ½å¹¶ç”Ÿæˆé—®é¢˜å’Œå»ºè®®\n   */\n  protected analyzeResourceTiming(\n    resourceTiming: DetailedWebVitals['resourceTiming'],\n    issues: string[],\n    recommendations: string[],\n  ): void {\n    if (\n      resourceTiming.slowResources.length > ZERO &&\n      resourceTiming.slowResources[ZERO]!.duration > 500\n    ) {\n      issues.push(\n        `å‘ç°æ…¢é€Ÿèµ„æº: ${resourceTiming.slowResources[ZERO]!.name} (${resourceTiming.slowResources[ZERO]!.duration.toFixed(ZERO)}ms)`,\n      );\n      recommendations.push('ä¼˜åŒ–æ…¢é€Ÿèµ„æºçš„åŠ è½½ï¼Œè€ƒè™‘å‹ç¼©æˆ–ä½¿ç”¨ CDN');\n    }\n\n    if (resourceTiming.totalSize > COUNT_PAIR * BYTES_PER_KB * BYTES_PER_KB) {\n      // 2MB\n      issues.push(\n        `æ€»èµ„æºå¤§å°è¿‡å¤§: ${(resourceTiming.totalSize / BYTES_PER_KB / BYTES_PER_KB).toFixed(ONE)}MB`,\n      );\n      recommendations.push('å‡å°‘èµ„æºå¤§å°ï¼Œå¯ç”¨ gzip å‹ç¼©');\n    }\n  }\n\n  /**\n   * è®¡ç®—æ€§èƒ½è¯„åˆ†\n   */\n  protected calculatePerformanceScore(metrics: DetailedWebVitals): number {\n    const { PERFECT_SCORE } = WEB_VITALS_CONSTANTS;\n    let score = PERFECT_SCORE;\n\n    // CLS è¯„åˆ†\n    if (metrics.cls > PERFORMANCE_THRESHOLDS.CLS_NEEDS_IMPROVEMENT) {\n      score -= PERCENTAGE_QUARTER;\n    } else if (metrics.cls > PERFORMANCE_THRESHOLDS.CLS_GOOD) {\n      score -= COUNT_TEN;\n    }\n\n    // LCP è¯„åˆ†\n    if (metrics.lcp > PERFORMANCE_THRESHOLDS.LCP_NEEDS_IMPROVEMENT) {\n      score -= DAYS_PER_MONTH;\n    } else if (metrics.lcp > PERFORMANCE_THRESHOLDS.LCP_GOOD) {\n      score -= MAGIC_15;\n    }\n\n    // FID è¯„åˆ†\n    if (metrics.fid > PERFORMANCE_THRESHOLDS.FID_NEEDS_IMPROVEMENT) {\n      score -= PERCENTAGE_QUARTER;\n    } else if (metrics.fid > PERFORMANCE_THRESHOLDS.FID_GOOD) {\n      score -= COUNT_TEN;\n    }\n\n    // FCP è¯„åˆ†\n    if (metrics.fcp > THREE_SECONDS_MS) {\n      score -= COUNT_TEN;\n    } else if (metrics.fcp > MAGIC_1800) {\n      score -= COUNT_FIVE;\n    }\n\n    // TTFB è¯„åˆ†\n    if (metrics.ttfb > MAGIC_800) {\n      score -= COUNT_TEN;\n    } else if (metrics.ttfb > MAGIC_600) {\n      score -= COUNT_FIVE;\n    }\n\n    return Math.max(ZERO, score);\n  }\n\n  /**\n   * æ‰§è¡Œæ‰€æœ‰æ€§èƒ½æŒ‡æ ‡åˆ†æ\n   */\n  protected performMetricsAnalysis(\n    metrics: DetailedWebVitals,\n    issues: string[],\n    recommendations: string[],\n  ): void {\n    this.analyzeCLS(metrics.cls, issues, recommendations);\n    this.analyzeLCP(metrics.lcp, issues, recommendations);\n    this.analyzeFID(metrics.fid, issues, recommendations);\n    this.analyzeResourceTiming(metrics.resourceTiming, issues, recommendations);\n  }\n\n  /**\n   * æ„å»ºè¯Šæ–­æŠ¥å‘Šç»“æœå¯¹è±¡\n   */\n  protected buildDiagnosticResult(\n    metrics: DetailedWebVitals,\n    issues: string[],\n    recommendations: string[],\n    score: number,\n  ): {\n    metrics: DetailedWebVitals;\n    analysis: {\n      issues: string[];\n      recommendations: string[];\n      score: number;\n    };\n  } {\n    return {\n      metrics,\n      analysis: {\n        issues,\n        recommendations,\n        score,\n      },\n    };\n  }\n\n  /**\n   * ç”Ÿæˆå®Œæ•´çš„è¯Šæ–­æŠ¥å‘Š\n   */\n  public generateDiagnosticReport(metrics: DetailedWebVitals): {\n    metrics: DetailedWebVitals;\n    analysis: {\n      issues: string[];\n      recommendations: string[];\n      score: number;\n    };\n  } {\n    const issues: string[] = [];\n    const recommendations: string[] = [];\n\n    // æ‰§è¡Œæ‰€æœ‰åˆ†æ\n    this.performMetricsAnalysis(metrics, issues, recommendations);\n\n    // è®¡ç®—æ€§èƒ½è¯„åˆ†\n    const score = this.calculatePerformanceScore(metrics);\n\n    // æ„å»ºå¹¶è¿”å›ç»“æœ\n    return this.buildDiagnosticResult(metrics, issues, recommendations, score);\n  }\n\n  /**\n   * åˆ†ææ€§èƒ½è¶‹åŠ¿\n   */\n  public analyzePerformanceTrend(\n    currentMetrics: DetailedWebVitals,\n    previousMetrics: DetailedWebVitals,\n  ): {\n    trend: 'improving' | 'declining' | 'stable';\n    changes: Array<{\n      metric: string;\n      current: number;\n      previous: number;\n      change: number;\n      changePercent: number;\n    }>;\n  } {\n    const changes = [\n      {\n        metric: 'LCP',\n        current: currentMetrics.lcp,\n        previous: previousMetrics.lcp,\n        change: currentMetrics.lcp - previousMetrics.lcp,\n        changePercent:\n          previousMetrics.lcp > ZERO\n            ? ((currentMetrics.lcp - previousMetrics.lcp) /\n                previousMetrics.lcp) *\n              PERCENTAGE_FULL\n            : ZERO,\n      },\n      {\n        metric: 'FID',\n        current: currentMetrics.fid,\n        previous: previousMetrics.fid,\n        change: currentMetrics.fid - previousMetrics.fid,\n        changePercent:\n          previousMetrics.fid > ZERO\n            ? ((currentMetrics.fid - previousMetrics.fid) /\n                previousMetrics.fid) *\n              PERCENTAGE_FULL\n            : ZERO,\n      },\n      {\n        metric: 'CLS',\n        current: currentMetrics.cls,\n        previous: previousMetrics.cls,\n        change: currentMetrics.cls - previousMetrics.cls,\n        changePercent:\n          previousMetrics.cls > ZERO\n            ? ((currentMetrics.cls - previousMetrics.cls) /\n                previousMetrics.cls) *\n              PERCENTAGE_FULL\n            : ZERO,\n      },\n    ];\n\n    // è®¡ç®—æ€»ä½“è¶‹åŠ¿\n    const improvingCount = changes.filter((c) => c.change < ZERO).length;\n    const decliningCount = changes.filter((c) => c.change > ZERO).length;\n\n    let trend: 'improving' | 'declining' | 'stable';\n    if (improvingCount > decliningCount) {\n      trend = 'improving';\n    } else if (decliningCount > improvingCount) {\n      trend = 'declining';\n    } else {\n      trend = 'stable';\n    }\n\n    return { trend, changes };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/web-vitals/web-vitals-collector-base.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":86,"column":24,"nodeType":"MemberExpression","endLine":88,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Web Vitals æ”¶é›†å™¨åŸºç¡€ç±»\n * Web Vitals collector base class\n */\n\n'use client';\n\nimport { WebVitalsObservers } from '@/lib/web-vitals/observers';\nimport { COUNT_TEN, PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport type { DetailedWebVitals } from '@/lib/web-vitals/types';\n\n/**\n * Web Vitals æ”¶é›†å™¨åŸºç¡€ç±»\n * è´Ÿè´£åŸºç¡€æ•°æ®æ”¶é›†å’Œåˆå§‹åŒ–\n */\nexport class WebVitalsCollectorBase {\n  protected metrics: Partial<DetailedWebVitals> = {};\n  protected webVitalsObservers: WebVitalsObservers;\n  protected isCollecting = false;\n\n  constructor() {\n    this.webVitalsObservers = new WebVitalsObservers(this.metrics);\n    this.initializeCollection();\n  }\n\n  protected initializeCollection() {\n    if (typeof window === 'undefined' || this.isCollecting) return;\n\n    this.isCollecting = true;\n    this.collectBasicPageInfo();\n    this.collectDeviceInfo();\n    this.collectNetworkInfo();\n    this.collectNavigationTiming();\n    this.collectResourceTiming();\n    this.collectWebVitals();\n  }\n\n  protected collectBasicPageInfo() {\n    this.metrics.page = {\n      url: window.location.href,\n      referrer: document.referrer,\n      title: document.title,\n      timestamp: Date.now(),\n    };\n  }\n\n  protected collectDeviceInfo() {\n    const nav = navigator as Navigator & {\n      deviceMemory?: number;\n      hardwareConcurrency?: number;\n    };\n    this.metrics.device = {\n      userAgent: navigator.userAgent,\n      ...(nav.deviceMemory !== undefined && { memory: nav.deviceMemory }),\n      ...(nav.hardwareConcurrency !== undefined && {\n        cores: nav.hardwareConcurrency,\n      }),\n      viewport: {\n        width: window.innerWidth,\n        height: window.innerHeight,\n      },\n    };\n  }\n\n  protected collectNetworkInfo() {\n    const nav = navigator as Navigator & {\n      connection?: {\n        effectiveType: string;\n        downlink: number;\n        rtt: number;\n        saveData: boolean;\n      };\n    };\n    if (nav.connection) {\n      this.metrics.connection = {\n        effectiveType: nav.connection.effectiveType,\n        downlink: nav.connection.downlink,\n        rtt: nav.connection.rtt,\n        saveData: nav.connection.saveData,\n      };\n    }\n  }\n\n  protected collectNavigationTiming() {\n    const navigation = performance.getEntriesByType(\n      'navigation',\n    )[ZERO] as PerformanceNavigationTiming;\n    if (navigation) {\n      // ä½¿ç”¨ startTime ä½œä¸ºåŸºå‡†æ—¶é—´ç‚¹ï¼ˆç›¸å½“äº navigationStartï¼‰\n      this.metrics.fcp = navigation.responseEnd - navigation.startTime;\n      this.metrics.domContentLoaded =\n        navigation.domContentLoadedEventEnd - navigation.startTime;\n      this.metrics.loadComplete =\n        navigation.loadEventEnd - navigation.startTime;\n      this.metrics.ttfb = navigation.responseStart - navigation.startTime;\n    }\n  }\n\n  protected collectResourceTiming() {\n    const resources = performance.getEntriesByType(\n      'resource',\n    ) as PerformanceResourceTiming[];\n\n    const slowResources = resources\n      .filter((resource) => resource.duration > PERCENTAGE_FULL) // è¶…è¿‡100msçš„èµ„æº\n      .map((resource) => ({\n        name: resource.name,\n        duration: resource.duration,\n        size: resource.transferSize || ZERO,\n        type: this.getResourceType(resource.name),\n      }))\n      .sort((a, b) => b.duration - a.duration)\n      .slice(ZERO, COUNT_TEN); // åªä¿ç•™å‰COUNT_TENä¸ªæœ€æ…¢çš„èµ„æº\n\n    this.metrics.resourceTiming = {\n      totalResources: resources.length,\n      slowResources,\n      totalSize: resources.reduce((sum, r) => sum + (r.transferSize || ZERO), ZERO),\n      totalDuration: resources.reduce((sum, r) => sum + r.duration, ZERO),\n    };\n  }\n\n  protected getResourceType(url: string): string {\n    if (url.includes('.js')) return 'JavaScript';\n    if (url.includes('.css')) return 'CSS';\n    if (url.match(/\\.(jpg|jpeg|png|gif|webp|svg)$/i)) return 'Image';\n    if (url.match(/\\.(woff|woff2|ttf|otf)$/i)) return 'Font';\n    if (url.includes('api/') || url.includes('/api/')) return 'API';\n    return 'Other';\n  }\n\n  protected collectWebVitals() {\n    // å¯åŠ¨æ‰€æœ‰ Web Vitals è§‚å¯Ÿå™¨\n    this.webVitalsObservers.startAllObservers();\n  }\n\n  /**\n   * è·å–é»˜è®¤çš„èµ„æºæ—¶é—´ä¿¡æ¯\n   */\n  protected getDefaultResourceTiming() {\n    return {\n      totalResources: ZERO,\n      slowResources: [],\n      totalSize: ZERO,\n      totalDuration: ZERO,\n    };\n  }\n\n  /**\n   * è·å–é»˜è®¤çš„è¿æ¥ä¿¡æ¯\n   */\n  protected getDefaultConnection() {\n    return {\n      effectiveType: 'unknown' as const,\n      downlink: ZERO,\n      rtt: ZERO,\n      saveData: false,\n    };\n  }\n\n  /**\n   * è·å–é»˜è®¤çš„è®¾å¤‡ä¿¡æ¯\n   */\n  protected getDefaultDevice() {\n    const {deviceMemory} = (navigator as Navigator & { deviceMemory?: number });\n    const {hardwareConcurrency} = navigator;\n\n    return {\n      ...(deviceMemory !== undefined && { memory: deviceMemory }),\n      ...(hardwareConcurrency !== undefined && { cores: hardwareConcurrency }),\n      userAgent: navigator.userAgent,\n      viewport: {\n        width: window?.innerWidth || ZERO,\n        height: window?.innerHeight || ZERO,\n      },\n    };\n  }\n\n  /**\n   * è·å–é»˜è®¤çš„é¡µé¢ä¿¡æ¯\n   */\n  protected getDefaultPage() {\n    return {\n      url: '',\n      referrer: '',\n      title: '',\n      timestamp: Date.now(),\n    };\n  }\n\n  public getDetailedMetrics(): DetailedWebVitals {\n    // ç¡®ä¿æ‰€æœ‰å¿…éœ€çš„å­—æ®µéƒ½æœ‰é»˜è®¤å€¼\n    return {\n      cls: this.metrics.cls || ZERO,\n      fid: this.metrics.fid || ZERO,\n      lcp: this.metrics.lcp || ZERO,\n      fcp: this.metrics.fcp || ZERO,\n      firstPaint: this.metrics.firstPaint || ZERO,\n      ttfb: this.metrics.ttfb || ZERO,\n      domContentLoaded: this.metrics.domContentLoaded || ZERO,\n      loadComplete: this.metrics.loadComplete || ZERO,\n      page: this.metrics.page || this.getDefaultPage(),\n      device: this.metrics.device || this.getDefaultDevice(),\n      connection: this.metrics.connection || this.getDefaultConnection(),\n      resourceTiming:\n        this.metrics.resourceTiming || this.getDefaultResourceTiming(),\n    };\n  }\n\n  /**\n   * è·å–æ”¶é›†çŠ¶æ€ï¼ˆä¾›å­ç±»è®¿é—®ï¼‰\n   */\n  protected get collectingStatus(): boolean {\n    return this.isCollecting;\n  }\n\n  public cleanup() {\n    this.webVitalsObservers.cleanup();\n    this.isCollecting = false;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp-core.ts","messages":[{"ruleId":"require-await","severity":2,"message":"Async method 'sendMessage' has no 'await' expression.","line":52,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":52,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1341,1347],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'sendTextMessage' has no 'await' expression.","line":58,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":58,"endColumn":24,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1493,1499],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'sendImageMessage' has no 'await' expression.","line":66,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":66,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1693,1699],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendTemplateMessage' has too many parameters (4). Maximum allowed is 3.","line":74,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":74,"endColumn":28},{"ruleId":"require-await","severity":2,"message":"Async method 'sendTemplateMessage' has no 'await' expression.","line":74,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":74,"endColumn":28,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1896,1902],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendButtonMessage' has too many parameters (5). Maximum allowed is 3.","line":88,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":88,"endColumn":26},{"ruleId":"require-await","severity":2,"message":"Async method 'sendButtonMessage' has no 'await' expression.","line":88,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":88,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2192,2198],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendListMessage' has too many parameters (5). Maximum allowed is 3.","line":104,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":104,"endColumn":24},{"ruleId":"require-await","severity":2,"message":"Async method 'sendListMessage' has no 'await' expression.","line":104,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":104,"endColumn":24,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2537,2543],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'getMediaUrl' has no 'await' expression.","line":124,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":124,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2997,3003],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'downloadMedia' has no 'await' expression.","line":128,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":128,"endColumn":22,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3116,3122],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":2,"message":"Async method 'uploadMedia' has no 'await' expression.","line":132,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":132,"endColumn":20,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3239,3245],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WhatsApp Business API æ ¸å¿ƒæœåŠ¡ç±»\n * æ•´åˆæ¶ˆæ¯å‘é€å’Œåª’ä½“å¤„ç†åŠŸèƒ½\n */\n\nimport type {\n  SendMessageRequest,\n  WhatsAppServiceResponse,\n} from '@/types/whatsapp';\nimport { WhatsAppMediaService } from '@/lib/whatsapp-media';\nimport { WhatsAppMessageService } from '@/lib/whatsapp-messages';\nimport { WhatsAppUtils } from '@/lib/whatsapp-utils';\n\n/**\n * WhatsApp æ ¸å¿ƒæœåŠ¡ç±»\n */\nexport class WhatsAppService {\n  private messageService!: WhatsAppMessageService;\n  private mediaService!: WhatsAppMediaService;\n  private readonly accessToken: string;\n  private readonly phoneNumberId: string;\n\n  constructor(accessToken?: string, phoneNumberId?: string) {\n    this.accessToken = accessToken || process.env.WHATSAPP_ACCESS_TOKEN || '';\n    this.phoneNumberId =\n      phoneNumberId || process.env.WHATSAPP_PHONE_NUMBER_ID || '';\n\n    // åªåœ¨è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæ„å»ºæ—¶è·³è¿‡éªŒè¯\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      typeof window === 'undefined'\n    ) {\n      // æ„å»ºæ—¶è·³è¿‡éªŒè¯\n      return;\n    }\n\n    if (!this.accessToken || !this.phoneNumberId) {\n      throw new Error('WhatsApp access token and phone number ID are required');\n    }\n\n    this.messageService = new WhatsAppMessageService(\n      this.accessToken,\n      this.phoneNumberId,\n    );\n    this.mediaService = new WhatsAppMediaService(\n      this.accessToken,\n      this.phoneNumberId,\n    );\n  }\n\n  // æ¶ˆæ¯å‘é€æ–¹æ³•ä»£ç†\n  async sendMessage(\n    message: SendMessageRequest,\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendMessage(message);\n  }\n\n  async sendTextMessage(\n    to: string,\n    text: string,\n    previewUrl?: boolean,\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendTextMessage(to, text, previewUrl);\n  }\n\n  async sendImageMessage(\n    to: string,\n    imageUrl: string,\n    caption?: string,\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendImageMessage(to, imageUrl, caption);\n  }\n\n  async sendTemplateMessage(\n    to: string,\n    templateName: string,\n    languageCode: string,\n    parameters?: string[],\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendTemplateMessage(\n      to,\n      templateName,\n      languageCode,\n      parameters,\n    );\n  }\n\n  async sendButtonMessage(\n    to: string,\n    bodyText: string,\n    buttons: Array<{ id: string; title: string }>,\n    headerText?: string,\n    footerText?: string,\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendButtonMessage(\n      to,\n      bodyText,\n      buttons,\n      headerText,\n      footerText,\n    );\n  }\n\n  async sendListMessage(\n    to: string,\n    bodyText: string,\n    buttonText: string,\n    sections: Array<{\n      title?: string;\n      rows: Array<{ id: string; title: string; description?: string }>;\n    }>,\n    options?: { headerText?: string; footerText?: string },\n  ): Promise<WhatsAppServiceResponse> {\n    return this.messageService.sendListMessage(\n      to,\n      bodyText,\n      buttonText,\n      sections,\n      options,\n    );\n  }\n\n  // åª’ä½“å¤„ç†æ–¹æ³•ä»£ç†\n  async getMediaUrl(mediaId: string): Promise<string | null> {\n    return this.mediaService.getMediaUrl(mediaId);\n  }\n\n  async downloadMedia(mediaId: string): Promise<Buffer | null> {\n    return this.mediaService.downloadMedia(mediaId);\n  }\n\n  async uploadMedia(\n    file: Buffer | Blob,\n    type: 'image' | 'document' | 'audio' | 'video' | 'sticker',\n    filename?: string,\n  ): Promise<string | null> {\n    return this.mediaService.uploadMedia(file, type, filename);\n  }\n\n  // å·¥å…·æ–¹æ³•ä»£ç†\n  static validatePhoneNumber = WhatsAppUtils.validatePhoneNumber;\n  static formatPhoneNumber = WhatsAppUtils.formatPhoneNumber;\n  static validateMessageLength = WhatsAppUtils.validateMessageLength;\n\n  // è·å–æœåŠ¡å®ä¾‹\n  getMessageService(): WhatsAppMessageService {\n    return this.messageService;\n  }\n\n  getMediaService(): WhatsAppMediaService {\n    return this.mediaService;\n  }\n\n  // é…ç½®ä¿¡æ¯\n  getConfig(): { accessToken: string; phoneNumberId: string } {\n    return {\n      accessToken: this.accessToken,\n      phoneNumberId: this.phoneNumberId,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp-media.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp-messages.ts","messages":[{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":90,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":90,"endColumn":43,"suggestions":[{"messageId":"removeAwait","fix":{"range":[2023,2029],"text":""},"desc":"Remove redundant `await`."}]},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":112,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":112,"endColumn":43,"suggestions":[{"messageId":"removeAwait","fix":{"range":[2455,2461],"text":""},"desc":"Remove redundant `await`."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendTemplateMessage' has too many parameters (4). Maximum allowed is 3.","line":118,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":118,"endColumn":28},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":149,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":149,"endColumn":43,"suggestions":[{"messageId":"removeAwait","fix":{"range":[3267,3273],"text":""},"desc":"Remove redundant `await`."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendButtonMessage' has too many parameters (5). Maximum allowed is 3.","line":155,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":155,"endColumn":26},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":195,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":195,"endColumn":43,"suggestions":[{"messageId":"removeAwait","fix":{"range":[4265,4271],"text":""},"desc":"Remove redundant `await`."}]},{"ruleId":"max-params","severity":2,"message":"Async method 'sendListMessage' has too many parameters (5). Maximum allowed is 3.","line":201,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":201,"endColumn":24},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":242,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":242,"endColumn":43,"suggestions":[{"messageId":"removeAwait","fix":{"range":[5375,5381],"text":""},"desc":"Remove redundant `await`."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WhatsApp Business API æ¶ˆæ¯å‘é€æœåŠ¡\n * æä¾›å„ç§ç±»å‹æ¶ˆæ¯çš„å‘é€åŠŸèƒ½\n */\n\nimport type {\n  ImageMessage,\n  InteractiveMessage,\n  SendMessageRequest,\n  TextMessage,\n  WhatsAppServiceResponse,\n} from '@/types/whatsapp';\nimport { logger } from '@/lib/logger';\n\n/**\n * WhatsApp æ¶ˆæ¯å‘é€ç±»\n */\nexport class WhatsAppMessageService {\n  private readonly baseUrl = 'https://graph.facebook.com/v18.0';\n  private readonly accessToken: string;\n  private readonly phoneNumberId: string;\n\n  constructor(accessToken: string, phoneNumberId: string) {\n    this.accessToken = accessToken;\n    this.phoneNumberId = phoneNumberId;\n  }\n\n  /**\n   * å‘é€æ¶ˆæ¯çš„é€šç”¨æ–¹æ³•\n   */\n  async sendMessage(\n    message: SendMessageRequest,\n  ): Promise<WhatsAppServiceResponse> {\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/${this.phoneNumberId}/messages`,\n        {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${this.accessToken}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(message),\n        },\n      );\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        const error = data as { error?: { message?: string } };\n        throw new Error(error.error?.message || 'Failed to send message');\n      }\n\n      return {\n        success: true,\n        data: data,\n      };\n    } catch (error) {\n      logger.error(\n        'WhatsApp API Error',\n        {},\n        error instanceof Error ? error : new Error(String(error)),\n      );\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      };\n    }\n  }\n\n  /**\n   * å‘é€æ–‡æœ¬æ¶ˆæ¯\n   */\n  async sendTextMessage(\n    to: string,\n    text: string,\n    previewUrl: boolean = false,\n  ): Promise<WhatsAppServiceResponse> {\n    const message: TextMessage = {\n      messaging_product: 'whatsapp',\n      recipient_type: 'individual',\n      to,\n      type: 'text',\n      text: {\n        body: text,\n        preview_url: previewUrl,\n      },\n    };\n\n    return await this.sendMessage(message);\n  }\n\n  /**\n   * å‘é€å›¾ç‰‡æ¶ˆæ¯\n   */\n  async sendImageMessage(\n    to: string,\n    imageUrl: string,\n    caption?: string,\n  ): Promise<WhatsAppServiceResponse> {\n    const message: ImageMessage = {\n      messaging_product: 'whatsapp',\n      recipient_type: 'individual',\n      to,\n      type: 'image',\n      image: {\n        link: imageUrl,\n        ...(caption && { caption }),\n      },\n    };\n\n    return await this.sendMessage(message);\n  }\n\n  /**\n   * å‘é€æ¨¡æ¿æ¶ˆæ¯\n   */\n  async sendTemplateMessage(\n    to: string,\n    templateName: string,\n    languageCode: string,\n    parameters?: string[],\n  ): Promise<WhatsAppServiceResponse> {\n    const message: SendMessageRequest = {\n      messaging_product: 'whatsapp',\n      recipient_type: 'individual',\n      to,\n      type: 'template',\n      template: {\n        name: templateName,\n        language: {\n          code: languageCode,\n          policy: 'deterministic',\n        },\n        ...(parameters && {\n          components: [\n            {\n              type: 'body',\n              parameters: parameters.map((param) => ({\n                type: 'text',\n                text: param,\n              })),\n            },\n          ],\n        }),\n      },\n    };\n\n    return await this.sendMessage(message);\n  }\n\n  /**\n   * å‘é€äº¤äº’å¼æŒ‰é’®æ¶ˆæ¯\n   */\n  async sendButtonMessage(\n    to: string,\n    bodyText: string,\n    buttons: Array<{ id: string; title: string }>,\n    headerText?: string,\n    footerText?: string,\n  ): Promise<WhatsAppServiceResponse> {\n    const message: InteractiveMessage = {\n      messaging_product: 'whatsapp',\n      recipient_type: 'individual',\n      to,\n      type: 'interactive',\n      interactive: {\n        type: 'button',\n        ...(headerText && {\n          header: {\n            type: 'text',\n            text: headerText,\n          },\n        }),\n        body: {\n          text: bodyText,\n        },\n        ...(footerText && {\n          footer: {\n            text: footerText,\n          },\n        }),\n        action: {\n          buttons: buttons.map((button) => ({\n            type: 'reply',\n            reply: {\n              id: button.id,\n              title: button.title,\n            },\n          })),\n        },\n      },\n    };\n\n    return await this.sendMessage(message);\n  }\n\n  /**\n   * å‘é€åˆ—è¡¨æ¶ˆæ¯\n   */\n  async sendListMessage(\n    to: string,\n    bodyText: string,\n    buttonText: string,\n    sections: Array<{\n      title?: string;\n      rows: Array<{ id: string; title: string; description?: string }>;\n    }>,\n    options?: { headerText?: string; footerText?: string },\n  ): Promise<WhatsAppServiceResponse> {\n    const message: InteractiveMessage = {\n      messaging_product: 'whatsapp',\n      recipient_type: 'individual',\n      to,\n      type: 'interactive',\n      interactive: {\n        type: 'list',\n        ...(options?.headerText && {\n          header: {\n            type: 'text',\n            text: options.headerText,\n          },\n        }),\n        body: {\n          text: bodyText,\n        },\n        ...(options?.footerText && {\n          footer: {\n            text: options.footerText,\n          },\n        }),\n        action: {\n          button: buttonText,\n          sections: sections.map((section) => ({\n            title: section.title || '',\n            rows: section.rows,\n          })),\n        },\n      },\n    };\n\n    return await this.sendMessage(message);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp-service.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":54,"column":3,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":54,"endColumn":5}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å»¶è¿Ÿåˆå§‹åŒ–çš„å•ä¾‹å®ä¾‹\nimport type { SendMessageRequest } from '@/types/whatsapp';\nimport { WhatsAppService } from '@/lib/whatsapp-core';\n\n/**\n * WhatsApp Business API æœåŠ¡ - ç»Ÿä¸€å¯¼å‡ºå…¥å£\n * æä¾›å®Œæ•´çš„WhatsAppæ¶ˆæ¯å‘é€å’Œç®¡ç†åŠŸèƒ½\n */\n\n// å¯¼å‡ºæ ¸å¿ƒæœåŠ¡ç±»\nexport { WhatsAppService } from '@/lib/whatsapp-core';\n\n// å¯¼å‡ºå­æœåŠ¡ç±»\nexport { WhatsAppMessageService } from '@/lib/whatsapp-messages';\nexport { WhatsAppMediaService } from '@/lib/whatsapp-media';\nexport { WhatsAppUtils } from '@/lib/whatsapp-utils';\n\n// å¯¼å‡ºç±»å‹\nexport type {\n  SendMessageRequest,\n  WhatsAppServiceResponse,\n} from '@/types/whatsapp';\n\nlet whatsappServiceInstance: WhatsAppService | null = null;\n\nfunction getWhatsAppService(): WhatsAppService {\n  if (!whatsappServiceInstance) {\n    whatsappServiceInstance = new WhatsAppService();\n  }\n  return whatsappServiceInstance;\n}\n\n// å¯¼å‡ºä¾¿æ·å‡½æ•°\nexport const sendWhatsAppMessage = (message: SendMessageRequest) =>\n  getWhatsAppService().sendMessage(message);\n\nexport const sendWhatsAppText = (\n  to: string,\n  text: string,\n  previewUrl?: boolean,\n) => getWhatsAppService().sendTextMessage(to, text, previewUrl);\n\nexport const sendWhatsAppImage = (\n  to: string,\n  imageUrl: string,\n  caption?: string,\n) => getWhatsAppService().sendImageMessage(to, imageUrl, caption);\n\nexport const sendWhatsAppTemplate = (\n  to: string,\n  templateName: string,\n  languageCode: string,\n  parameters?: string[],\n) =>\n  getWhatsAppService().sendTemplateMessage(\n    to,\n    templateName,\n    languageCode,\n    parameters,\n  );\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp-utils.ts","messages":[{"ruleId":"no-new","severity":2,"message":"Do not use 'new' for side effects.","line":105,"column":7,"nodeType":"ExpressionStatement","messageId":"noNewStatement","endLine":105,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_4096 } from \"@/constants/count\";\nimport { BYTES_PER_KB, COUNT_PAIR, COUNT_TEN, COUNT_TRIPLE, HOURS_PER_DAY, HTTP_OK, MAGIC_20, MAGIC_256, MAGIC_36, MAGIC_72, MAGIC_9, ZERO } from '@/constants';\n\n/**\n * WhatsApp Business API å·¥å…·å‡½æ•°\n * æä¾›éªŒè¯ã€æ ¼å¼åŒ–ç­‰è¾…åŠ©åŠŸèƒ½\n */\n\n/**\n * WhatsApp å·¥å…·ç±»\n */\nexport class WhatsAppUtils {\n  /**\n   * éªŒè¯ç”µè¯å·ç æ ¼å¼\n   */\n  static validatePhoneNumber(phoneNumber: string): boolean {\n    // åŸºæœ¬éªŒè¯ï¼šåº”è¯¥åŒ…å«å›½å®¶ä»£ç ï¼ŒåªåŒ…å«æ•°å­—\n    const phoneRegex = /^\\d{COUNT_TEN,15}$/;\n    return phoneRegex.test(phoneNumber.replace(/\\D/g, ''));\n  }\n\n  /**\n   * æ ¼å¼åŒ–ç”µè¯å·ç ï¼ˆç§»é™¤éæ•°å­—å­—ç¬¦ï¼‰\n   */\n  static formatPhoneNumber(phoneNumber: string): string {\n    return phoneNumber.replace(/\\D/g, '');\n  }\n\n  /**\n   * æ£€æŸ¥æ¶ˆæ¯é•¿åº¦é™åˆ¶\n   */\n  static validateMessageLength(\n    message: string,\n    maxLength: number = MAGIC_4096,\n  ): boolean {\n    return message.length <= maxLength;\n  }\n\n  /**\n   * éªŒè¯æ¨¡æ¿å‚æ•°\n   */\n  static validateTemplateParameters(parameters: string[]): boolean {\n    return parameters.every(\n      (param) =>\n        typeof param === 'string' && param.length > ZERO && param.length <= BYTES_PER_KB,\n    );\n  }\n\n  /**\n   * éªŒè¯æŒ‰é’®é…ç½®\n   */\n  static validateButtons(\n    buttons: Array<{ id: string; title: string }>,\n  ): boolean {\n    if (buttons.length === ZERO || buttons.length > COUNT_TRIPLE) {\n      return false;\n    }\n\n    return buttons.every(\n      (button) =>\n        typeof button.id === 'string' &&\n        typeof button.title === 'string' &&\n        button.id.length > ZERO &&\n        button.id.length <= MAGIC_256 &&\n        button.title.length > ZERO &&\n        button.title.length <= MAGIC_20,\n    );\n  }\n\n  /**\n   * éªŒè¯åˆ—è¡¨è¡Œé…ç½®\n   */\n  static validateListRows(\n    rows: Array<{ id: string; title: string; description?: string }>,\n  ): boolean {\n    if (rows.length === ZERO || rows.length > COUNT_TEN) {\n      return false;\n    }\n\n    return rows.every(\n      (row) =>\n        typeof row.id === 'string' &&\n        typeof row.title === 'string' &&\n        row.id.length > ZERO &&\n        row.id.length <= HTTP_OK &&\n        row.title.length > ZERO &&\n        row.title.length <= HOURS_PER_DAY &&\n        (!row.description ||\n          (row.description.length > ZERO && row.description.length <= MAGIC_72)),\n    );\n  }\n\n  /**\n   * ç”Ÿæˆå”¯ä¸€çš„æ¶ˆæ¯ID\n   */\n  static generateMessageId(): string {\n    return `msg_${Date.now()}_${Math.random().toString(MAGIC_36).substr(COUNT_PAIR, MAGIC_9)}`;\n  }\n\n  /**\n   * æ£€æŸ¥URLæ ¼å¼\n   */\n  static validateUrl(url: string): boolean {\n    try {\n      new URL(url);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * æ£€æŸ¥åª’ä½“ç±»å‹\n   */\n  static validateMediaType(type: string): boolean {\n    const validTypes = ['image', 'document', 'audio', 'video', 'sticker'];\n    return validTypes.includes(type);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/lib/whatsapp.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Async method 'sendTemplateMessage' has too many parameters (4). Maximum allowed is 3.","line":74,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":74,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":125,"column":21,"nodeType":"MemberExpression","endLine":125,"endColumn":39},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":126,"column":23,"nodeType":"MemberExpression","endLine":126,"endColumn":45},{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":139,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":141,"endColumn":12}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { env } from '@/../env.mjs';\nimport { COUNT_TEN, ZERO } from '@/constants';\n\nimport { logger } from '@/lib/logger';\nimport WhatsApp from 'whatsapp';\n\n/**\n * WhatsApp webhookæ¶ˆæ¯ä½“ç±»å‹å®šä¹‰\n */\ninterface WhatsAppWebhookBody {\n  entry?: Array<{\n    changes?: Array<{\n      value?: {\n        messages?: Array<{\n          from: string;\n          text?: { body: string };\n        }>;\n      };\n    }>;\n  }>;\n}\n\n/**\n * WhatsApp Business API æœåŠ¡ç±»\n * æä¾›å‘é€æ¶ˆæ¯ã€å¤„ç† webhook ç­‰åŠŸèƒ½\n */\nexport class WhatsAppService {\n  private client: WhatsApp;\n\n  constructor() {\n    if (!env.WHATSAPP_ACCESS_TOKEN) {\n      throw new Error('WHATSAPP_ACCESS_TOKEN is required');\n    }\n\n    // WhatsApp constructor expects phoneNumberId as number\n    const phoneNumberId = env.WHATSAPP_PHONE_NUMBER_ID\n      ? parseInt(env.WHATSAPP_PHONE_NUMBER_ID, COUNT_TEN)\n      : ZERO;\n    this.client = new WhatsApp(phoneNumberId);\n    // Set token separately if needed\n    if (env.WHATSAPP_ACCESS_TOKEN) {\n      (this.client as { token?: string }).token = env.WHATSAPP_ACCESS_TOKEN;\n    }\n  }\n\n  /**\n   * å‘é€æ–‡æœ¬æ¶ˆæ¯\n   */\n  async sendTextMessage(to: string, message: string) {\n    try {\n      // WhatsApp API expects recipient as second parameter\n      const recipient = parseInt(to, COUNT_TEN);\n      const response = await this.client.messages.text(\n        {\n          body: message,\n        },\n        recipient,\n      );\n      return response;\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      logger.error(\n        'Failed to send WhatsApp message',\n        {},\n        _error instanceof Error ? _error : new Error(String(_error)),\n      );\n      throw _error;\n    }\n  }\n\n  /**\n   * å‘é€æ¨¡æ¿æ¶ˆæ¯\n   */\n  async sendTemplateMessage(\n    to: string,\n    templateName: string,\n    languageCode: string = 'en',\n    components?: Array<Record<string, unknown>>,\n  ) {\n    try {\n      // WhatsApp API expects recipient as second parameter\n      const recipient = parseInt(to, COUNT_TEN);\n      // WhatsApp template message with correct structure\n      const templateObject = {\n        name: templateName,\n        language: {\n          policy: 'deterministic' as const,\n          code: languageCode,\n        },\n        ...(components && { components }),\n      };\n      const response = await this.client.messages.template(\n        templateObject as unknown as Parameters<\n          typeof this.client.messages.template\n        >[0],\n        recipient,\n      );\n      return response;\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      logger.error(\n        'Failed to send WhatsApp template message',\n        {},\n        _error instanceof Error ? _error : new Error(String(_error)),\n      );\n      throw _error;\n    }\n  }\n\n  /**\n   * éªŒè¯ webhook ç­¾å\n   */\n  verifyWebhook(mode: string, token: string, challenge: string): string | null {\n    if (mode === 'subscribe' && token === env.WHATSAPP_WEBHOOK_VERIFY_TOKEN) {\n      return challenge;\n    }\n    return null;\n  }\n\n  /**\n   * å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯\n   */\n  async handleIncomingMessage(body: WhatsAppWebhookBody) {\n    try {\n      const entry = body.entry?.[ZERO];\n      const changes = entry?.changes?.[ZERO];\n      const value = changes?.value;\n\n      if (value?.messages) {\n        const [message] = value.messages;\n        if (message) {\n          const { from } = message;\n          const messageBody = message.text?.body;\n\n          // ä½¿ç”¨loggeræ›¿ä»£console.log\n          logger.info(`Received WhatsApp message from ${from}: ${messageBody}`);\n\n          // è¿™é‡Œå¯ä»¥æ·»åŠ è‡ªåŠ¨å›å¤é€»è¾‘\n          if (messageBody) {\n            await this.sendAutoReply(from, messageBody);\n          }\n        }\n      }\n\n      return { success: true };\n    } catch (_error) {\n      // å¿½ç•¥é”™è¯¯å˜é‡\n      logger.error(\n        'Failed to handle incoming WhatsApp message',\n        {},\n        _error instanceof Error ? _error : new Error(String(_error)),\n      );\n      throw _error;\n    }\n  }\n\n  /**\n   * è‡ªåŠ¨å›å¤é€»è¾‘\n   */\n  private async sendAutoReply(to: string, receivedMessage: string) {\n    // ç®€å•çš„è‡ªåŠ¨å›å¤é€»è¾‘\n    const lowerMessage = receivedMessage.toLowerCase();\n\n    let replyMessage = '';\n\n    if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {\n      replyMessage =\n        'Hello! Thank you for contacting us. How can we help you today?';\n    } else if (lowerMessage.includes('help')) {\n      replyMessage =\n        \"We're here to help! Please describe your question or concern.\";\n    } else if (\n      lowerMessage.includes('price') ||\n      lowerMessage.includes('cost')\n    ) {\n      replyMessage =\n        'For pricing information, please visit our website or contact our sales team.';\n    } else {\n      replyMessage =\n        'Thank you for your message. Our team will get back to you soon!';\n    }\n\n    await this.sendTextMessage(to, replyMessage);\n  }\n}\n\n// å•ä¾‹å®ä¾‹\nlet whatsappService: WhatsAppService | null = null;\n\nexport function getWhatsAppService(): WhatsAppService {\n  if (!whatsappService) {\n    whatsappService = new WhatsAppService();\n  }\n  return whatsappService;\n}\n\n// æ¶ˆæ¯ç±»å‹å®šä¹‰\nexport interface WhatsAppMessage {\n  to: string;\n  type: 'text' | 'template' | 'media';\n  content: {\n    body?: string;\n    templateName?: string;\n    languageCode?: string;\n    components?: Array<Record<string, unknown>>;\n    mediaUrl?: string;\n    caption?: string;\n  };\n}\n\n// å‘é€æ¶ˆæ¯çš„é€šç”¨å‡½æ•°\nexport function sendWhatsAppMessage(message: WhatsAppMessage) {\n  const service = getWhatsAppService();\n\n  switch (message.type) {\n    case 'text':\n      return service.sendTextMessage(message.to, message.content.body!);\n\n    case 'template':\n      return service.sendTemplateMessage(\n        message.to,\n        message.content.templateName!,\n        message.content.languageCode,\n        message.content.components,\n      );\n\n    default:\n      throw new Error(`Unsupported message type: ${message.type}`);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/scripts/test-web-vitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/services/__tests__/url-generator.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/services/url-generator-cjs.js","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":51,"column":8,"nodeType":"MemberExpression","endLine":51,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":54,"column":10,"nodeType":"MemberExpression","endLine":54,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":54,"column":10,"nodeType":"MemberExpression","endLine":54,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/services/url-generator.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/config/paths' import is duplicated.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":15,"endColumn":25}],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":131,"column":7,"nodeType":"MemberExpression","endLine":131,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":223,"column":30,"nodeType":"MemberExpression","endLine":223,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":224,"column":12,"nodeType":"MemberExpression","endLine":224,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":232,"column":46,"nodeType":"MemberExpression","endLine":232,"endColumn":62,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":233,"column":16,"nodeType":"MemberExpression","endLine":233,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":247,"column":11,"nodeType":"MemberExpression","endLine":247,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * é›†ä¸­URLç”ŸæˆæœåŠ¡\n * ç»Ÿä¸€ç®¡ç†æ‰€æœ‰URLç”Ÿæˆé€»è¾‘ï¼Œç¡®ä¿ä¸€è‡´æ€§å’Œç±»å‹å®‰å…¨\n */\n\n/* eslint-disable security/detect-object-injection */\n\nimport type { Locale } from '@/config/paths';\nimport {\n  getLocalizedPath,\n  LOCALES_CONFIG,\n  PATHS_CONFIG,\n  SITE_CONFIG,\n  type PageType,\n} from '@/config/paths';\nimport { ONE, ZERO } from \"@/constants\";\nimport { SEO_CONSTANTS } from '@/constants/seo-constants';\n\n// URLç”Ÿæˆé€‰é¡¹æ¥å£\nexport interface URLGeneratorOptions {\n  includeLocale?: boolean;\n  absolute?: boolean;\n  trailingSlash?: boolean;\n  protocol?: 'http' | 'https';\n  host?: string;\n}\n\n// é»˜è®¤é€‰é¡¹\nconst DEFAULT_OPTIONS: Required<URLGeneratorOptions> = {\n  includeLocale: true,\n  absolute: false,\n  trailingSlash: false,\n  protocol: 'https',\n  host: '',\n};\n\n// hreflangé“¾æ¥æ¥å£\nexport interface HreflangLink {\n  href: string;\n  hreflang: string;\n}\n\n// Sitemapæ¡ç›®æ¥å£\nexport interface SitemapEntry {\n  loc: string;\n  changefreq?:\n    | 'always'\n    | 'hourly'\n    | 'daily'\n    | 'weekly'\n    | 'monthly'\n    | 'yearly'\n    | 'never';\n  priority?: number;\n  lastmod?: string;\n  alternateRefs?: HreflangLink[];\n}\n\n/**\n * æ ¸å¿ƒURLç”Ÿæˆå™¨ç±»\n */\nexport class URLGenerator {\n  private readonly baseUrl: string;\n  private readonly defaultLocale: Locale;\n  private readonly locales: readonly Locale[];\n\n  constructor() {\n    this.baseUrl = SITE_CONFIG.baseUrl;\n    this.defaultLocale = LOCALES_CONFIG.defaultLocale;\n    this.locales = LOCALES_CONFIG.locales;\n  }\n\n  /**\n   * ç”Ÿæˆé¡µé¢URL\n   */\n  generatePageURL(\n    pageType: PageType,\n    locale: Locale,\n    options: URLGeneratorOptions = {},\n  ): string {\n    const opts = { ...DEFAULT_OPTIONS, ...options };\n\n    // è·å–æœ¬åœ°åŒ–è·¯å¾„\n    const localizedPath = getLocalizedPath(pageType, locale);\n\n    // æ„å»ºè·¯å¾„\n    let path = '';\n\n    // æ·»åŠ è¯­è¨€å‰ç¼€ï¼ˆå¦‚æœéœ€è¦ä¸”ä¸æ˜¯é»˜è®¤è¯­è¨€ï¼‰\n    if (opts.includeLocale && locale !== this.defaultLocale) {\n      path += `/${locale}`;\n    }\n\n    // æ·»åŠ é¡µé¢è·¯å¾„ï¼ˆå¯¹äºä¸»é¡µï¼Œå¦‚æœå·²æœ‰è¯­è¨€å‰ç¼€åˆ™ä¸æ·»åŠ é¢å¤–çš„æ–œæ ï¼‰\n    if (localizedPath !== '/' || path === '') {\n      path += localizedPath;\n    }\n\n    // æ·»åŠ å°¾éƒ¨æ–œæ \n    if (opts.trailingSlash && !path.endsWith('/') && path !== '') {\n      path += '/';\n    }\n\n    // è¿”å›ç»å¯¹æˆ–ç›¸å¯¹URL\n    if (opts.absolute) {\n      const host = opts.host || this.baseUrl.replace(/^https?:\\/\\//, '');\n      return `${opts.protocol}://${host}${path}`;\n    }\n\n    return path || '/';\n  }\n\n  /**\n   * ç”Ÿæˆè§„èŒƒåŒ–URLï¼ˆç”¨äºSEOï¼‰\n   */\n  generateCanonicalURL(pageType: PageType, locale: Locale): string {\n    return this.generatePageURL(pageType, locale, {\n      absolute: true,\n      includeLocale: true,\n      trailingSlash: false,\n    });\n  }\n\n  /**\n   * ç”Ÿæˆæ‰€æœ‰è¯­è¨€ç‰ˆæœ¬çš„URLæ˜ å°„\n   */\n  generateLanguageAlternates(pageType: PageType): Record<Locale, string> {\n    const alternates: Record<string, string> = {};\n\n    this.locales.forEach((locale) => {\n      alternates[locale] = this.generateCanonicalURL(pageType, locale);\n    });\n\n    return alternates as Record<Locale, string>;\n  }\n\n  /**\n   * ç”Ÿæˆhreflangé“¾æ¥æ•°ç»„\n   */\n  generateHreflangLinks(pageType: PageType): HreflangLink[] {\n    const links: HreflangLink[] = [];\n\n    this.locales.forEach((locale) => {\n      links.push({\n        href: this.generateCanonicalURL(pageType, locale),\n        hreflang: locale,\n      });\n    });\n\n    // æ·»åŠ x-defaulté“¾æ¥ï¼ˆæŒ‡å‘é»˜è®¤è¯­è¨€ï¼‰\n    links.push({\n      href: this.generateCanonicalURL(pageType, this.defaultLocale),\n      hreflang: 'x-default',\n    });\n\n    return links;\n  }\n\n  /**\n   * ç”Ÿæˆsitemapæ¡ç›®\n   */\n  generateSitemapEntry(\n    pageType: PageType,\n    locale: Locale,\n    options: {\n      changefreq?: SitemapEntry['changefreq'];\n      priority?: number;\n      lastmod?: string;\n    } = {},\n  ): SitemapEntry {\n    const url = this.generateCanonicalURL(pageType, locale);\n    const alternateRefs = this.generateHreflangLinks(pageType);\n\n    return {\n      loc: url,\n      changefreq:\n        options.changefreq || SEO_CONSTANTS.URL_GENERATION.DEFAULT_CHANGEFREQ,\n      priority:\n        options.priority || SEO_CONSTANTS.URL_GENERATION.DEFAULT_PAGE_PRIORITY,\n      lastmod: options.lastmod || new Date().toISOString(),\n      alternateRefs,\n    };\n  }\n\n  /**\n   * ç”Ÿæˆæ‰€æœ‰é¡µé¢çš„sitemapæ¡ç›®\n   */\n  generateAllSitemapEntries(): SitemapEntry[] {\n    const entries: SitemapEntry[] = [];\n\n    // ä¸ºæ¯ä¸ªé¡µé¢ç±»å‹å’Œè¯­è¨€ç”Ÿæˆæ¡ç›®\n    Object.keys(PATHS_CONFIG).forEach((pageType) => {\n      this.locales.forEach((locale) => {\n        const entry = this.generateSitemapEntry(pageType as PageType, locale, {\n          changefreq:\n            pageType === 'home'\n              ? SEO_CONSTANTS.URL_GENERATION.HOME_CHANGEFREQ\n              : SEO_CONSTANTS.URL_GENERATION.DEFAULT_CHANGEFREQ,\n          priority:\n            pageType === 'home'\n              ? SEO_CONSTANTS.URL_GENERATION.HOME_PAGE_PRIORITY\n              : SEO_CONSTANTS.URL_GENERATION.DEFAULT_PAGE_PRIORITY,\n        });\n        entries.push(entry);\n      });\n    });\n\n    return entries;\n  }\n\n  /**\n   * æ ¹æ®è·¯å¾„åå‘ç”Ÿæˆé¡µé¢ä¿¡æ¯\n   */\n  parseURLToPageInfo(url: string): {\n    pageType: PageType | null;\n    locale: Locale;\n    isValid: boolean;\n  } {\n    // ç§»é™¤åè®®å’ŒåŸŸå\n    let path = url.replace(/^https?:\\/\\/[^/]+/, '');\n\n    // ç§»é™¤æŸ¥è¯¢å‚æ•°å’Œé”šç‚¹\n    const pathWithoutQuery = path.split('?')[ZERO] || '';\n    path = pathWithoutQuery.split('#')[ZERO] || '';\n\n    // æ£€æµ‹è¯­è¨€\n    let locale: Locale = this.defaultLocale;\n    let cleanPath = path;\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰è¯­è¨€å‰ç¼€\n    const localeMatch = path.match(/^\\/([a-z]{2})(?=\\/|$)/);\n    if (localeMatch && this.locales.includes(localeMatch[ONE] as Locale)) {\n      locale = localeMatch[ONE] as Locale;\n      cleanPath = path.replace(/^\\/[a-z]{2}/, '') || '/';\n    }\n\n    // æŸ¥æ‰¾é¡µé¢ç±»å‹\n    let pageType: PageType | null = null;\n\n    if (cleanPath === '/' || cleanPath === '') {\n      pageType = 'home';\n    } else {\n      // æŸ¥æ‰¾åŒ¹é…çš„é¡µé¢ç±»å‹\n      for (const [type, paths] of Object.entries(PATHS_CONFIG)) {\n        if (\n          Object.prototype.hasOwnProperty.call(paths, locale) &&\n          paths[locale] === cleanPath\n        ) {\n          pageType = type as PageType;\n          break;\n        }\n      }\n    }\n\n    return {\n      pageType,\n      locale,\n      isValid: pageType !== null,\n    };\n  }\n\n  /**\n   * éªŒè¯URLæ˜¯å¦æœ‰æ•ˆ\n   */\n  isValidURL(url: string): boolean {\n    const { isValid } = this.parseURLToPageInfo(url);\n    return isValid;\n  }\n\n  /**\n   * è·å–åŸºç¡€URL\n   */\n  getBaseURL(): string {\n    return this.baseUrl;\n  }\n\n  /**\n   * è·å–æ”¯æŒçš„è¯­è¨€åˆ—è¡¨\n   */\n  getSupportedLocales(): readonly Locale[] {\n    return this.locales;\n  }\n\n  /**\n   * è·å–é»˜è®¤è¯­è¨€\n   */\n  getDefaultLocale(): Locale {\n    return this.defaultLocale;\n  }\n}\n\n// å¯¼å‡ºå•ä¾‹å®ä¾‹\nexport const urlGenerator = new URLGenerator();\n\n// å¯¼å‡ºä¾¿æ·å‡½æ•°\nexport const generatePageURL = urlGenerator.generatePageURL.bind(urlGenerator);\nexport const generateCanonicalURL =\n  urlGenerator.generateCanonicalURL.bind(urlGenerator);\nexport const generateLanguageAlternates =\n  urlGenerator.generateLanguageAlternates.bind(urlGenerator);\nexport const generateHreflangLinks =\n  urlGenerator.generateHreflangLinks.bind(urlGenerator);\nexport const generateSitemapEntry =\n  urlGenerator.generateSitemapEntry.bind(urlGenerator);\nexport const generateAllSitemapEntries =\n  urlGenerator.generateAllSitemapEntries.bind(urlGenerator);\nexport const parseURLToPageInfo =\n  urlGenerator.parseURLToPageInfo.bind(urlGenerator);\nexport const isValidURL = urlGenerator.isValidURL.bind(urlGenerator);\n\n// ç±»å‹å·²åœ¨ä¸Šé¢å¯¼å‡º\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/shared/__tests__/utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/shared/utils.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":20,"column":10,"nodeType":"MemberExpression","endLine":20,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * å…±äº«å·¥å…·å‡½æ•°åº“\n * æä¾›é¡¹ç›®ä¸­å¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼ŒåŒ…æ‹¬æ—¥æœŸæ ¼å¼åŒ–ã€é‚®ç®±éªŒè¯ç­‰\n */\n\nimport { ZERO } from \"@/constants\";\nimport { EMAIL_VALIDATION } from '@/constants/react-scan';\n\n/**\n * æ ¼å¼åŒ–æ—¥æœŸä¸ºISOå­—ç¬¦ä¸²æ ¼å¼ (YYYY-MM-DD)\n * @param date - è¦æ ¼å¼åŒ–çš„æ—¥æœŸå¯¹è±¡\n * @returns ISOæ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²\n * @example\n * ```typescript\n * const today = new Date();\n * const formatted = formatDate(today); // \"2025-07-29\"\n * ```\n */\nexport function formatDate(date: Date): string {\n  return date.toISOString().split('T')[ZERO]!;\n}\n\n/**\n * éªŒè¯é‚®ç®±åœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®\n * ä½¿ç”¨æ ‡å‡†çš„é‚®ç®±æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒéªŒè¯\n * @param email - è¦éªŒè¯çš„é‚®ç®±åœ°å€\n * @returns æ˜¯å¦ä¸ºæœ‰æ•ˆé‚®ç®±æ ¼å¼\n * @example\n * ```typescript\n * validateEmail(\"user@example.com\"); // true\n * validateEmail(\"invalid-email\");    // false\n * validateEmail(\"test@domain.co.uk\"); // true\n * ```\n */\n/**\n * éªŒè¯é‚®ç®±åŸºæœ¬æ ¼å¼\n */\nfunction validateEmailBasicFormat(email: string): boolean {\n  if (!email || typeof email !== 'string') {\n    return false;\n  }\n\n  // æ£€æŸ¥æ˜¯å¦åŒ…å«ç©ºæ ¼æˆ–è¿ç»­ç‚¹å·\n  return !(email.includes(' ') || email.includes('..'));\n}\n\n/**\n * éªŒè¯é‚®ç®±æœ¬åœ°éƒ¨åˆ†ï¼ˆ@å‰é¢ï¼‰\n */\nfunction validateLocalPart(localPart: string): boolean {\n  if (\n    !localPart ||\n    localPart.length === ZERO ||\n    localPart.length > EMAIL_VALIDATION.LOCAL_PART_MAX_LENGTH\n  ) {\n    return false;\n  }\n\n  // æ£€æŸ¥ä¸èƒ½ä»¥ç‚¹å·å¼€å¤´æˆ–ç»“å°¾\n  if (localPart.startsWith('.') || localPart.endsWith('.')) {\n    return false;\n  }\n\n  // åŸºæœ¬å­—ç¬¦æ£€æŸ¥\n  const validLocalChars = /^[a-zA-Z0-9._+-]+$/;\n  return validLocalChars.test(localPart);\n}\n\n/**\n * éªŒè¯é‚®ç®±åŸŸåéƒ¨åˆ†ï¼ˆ@åé¢ï¼‰\n */\nfunction validateDomainPart(domainPart: string): boolean {\n  if (\n    !domainPart ||\n    domainPart.length === ZERO ||\n    domainPart.length > EMAIL_VALIDATION.DOMAIN_PART_MAX_LENGTH\n  ) {\n    return false;\n  }\n\n  // æ£€æŸ¥ä¸èƒ½ä»¥ç‚¹å·å¼€å¤´æˆ–ç»“å°¾ï¼Œä¸”å¿…é¡»åŒ…å«ç‚¹å·\n  if (\n    domainPart.startsWith('.') ||\n    domainPart.endsWith('.') ||\n    !domainPart.includes('.')\n  ) {\n    return false;\n  }\n\n  // åŸºæœ¬å­—ç¬¦æ£€æŸ¥\n  const validDomainChars = /^[a-zA-Z0-9.-]+$/;\n  return validDomainChars.test(domainPart);\n}\n\nexport function validateEmail(email: string): boolean {\n  // åŸºæœ¬æ ¼å¼æ£€æŸ¥\n  if (!validateEmailBasicFormat(email)) {\n    return false;\n  }\n\n  // åˆ†å‰²é‚®ç®±åœ°å€\n  const parts = email.split('@');\n  if (parts.length !== EMAIL_VALIDATION.EMAIL_PARTS_COUNT) {\n    return false;\n  }\n\n  const [localPart, domainPart] = parts;\n\n  // éªŒè¯æœ¬åœ°éƒ¨åˆ†å’ŒåŸŸåéƒ¨åˆ†\n  return (\n    validateLocalPart(localPart || '') && validateDomainPart(domainPart || '')\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/browser-setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/mock-templates.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/mock-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/setup.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":14,"column":13,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":14,"endColumn":22,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[378,453],"text":"type Assertion<T = unknown> = TestingLibraryMatchers<T, void>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":16,"column":13,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":16,"endColumn":41,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[526,617],"text":"type AsymmetricMatchersContaining = TestingLibraryMatchers<unknown, void>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/test-template.example.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/test/utils.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@testing-library/react' import is duplicated.","line":8,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":8,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æµ‹è¯•å·¥å…·å‡½æ•°\n * æä¾›è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œæµ‹è¯•è¾…åŠ©å‡½æ•°\n */\n\nimport React from 'react';\nimport type { RenderOptions } from '@testing-library/react';\nimport { render } from '@testing-library/react';\nimport { vi } from 'vitest';\n\n// import { ThemeProvider } from 'next-themes';\n\n// æµ‹è¯•å¸¸é‡å®šä¹‰\nconst HTTP_STATUS = {\n  OK: 200,\n  CLIENT_ERROR_MIN: 200,\n  CLIENT_ERROR_MAX: 300,\n} as const;\n\n// å›½é™…åŒ–Provider Mock\nconst MockIntlProvider = ({\n  children,\n  locale = 'en',\n}: {\n  children: React.ReactNode;\n  locale?: string;\n}) => {\n  return (\n    <div\n      data-testid='intl-provider'\n      data-locale={locale}\n    >\n      {children}\n    </div>\n  );\n};\n\n// ä¸»é¢˜Provideré…ç½®\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  theme?: string;\n  themes?: string[];\n}\n\nconst MockThemeProvider = ({\n  children,\n  theme = 'light',\n  themes = ['light', 'dark', 'system'],\n}: ThemeProviderProps) => {\n  return (\n    <div\n      data-testid='theme-provider'\n      data-theme={theme}\n      data-themes={themes.join(',')}\n    >\n      {children}\n    </div>\n  );\n};\n\n// æ‰€æœ‰Providerçš„ç»„åˆ\ninterface AllTheProvidersProps {\n  children: React.ReactNode;\n  locale?: string;\n  theme?: string;\n  themes?: string[];\n}\n\nconst AllTheProviders = ({\n  children,\n  locale = 'en',\n  theme = 'light',\n  themes = ['light', 'dark', 'system'],\n}: AllTheProvidersProps) => {\n  return (\n    <MockIntlProvider locale={locale}>\n      <MockThemeProvider\n        theme={theme}\n        themes={themes}\n      >\n        {children}\n      </MockThemeProvider>\n    </MockIntlProvider>\n  );\n};\n\n// è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°\ninterface CustomRenderOptions extends Omit<RenderOptions, 'wrapper'> {\n  locale?: string;\n  theme?: string;\n  themes?: string[];\n  wrapper?: React.ComponentType<unknown>;\n}\n\nconst customRender = (\n  ui: React.ReactElement,\n  options: CustomRenderOptions = {},\n) => {\n  const {\n    locale = 'en',\n    theme = 'light',\n    themes = ['light', 'dark', 'system'],\n    wrapper,\n    ...renderOptions\n  } = options;\n\n  const Wrapper =\n    wrapper ||\n    (({ children }: { children: React.ReactNode }) => (\n      <AllTheProviders\n        locale={locale}\n        theme={theme}\n        themes={themes}\n      >\n        {children}\n      </AllTheProviders>\n    ));\n\n  return render(ui, { wrapper: Wrapper, ...renderOptions });\n};\n\n// å›½é™…åŒ–æµ‹è¯•å·¥å…·\nexport const createMockTranslations = (\n  translations: Record<string, string>,\n) => {\n  return vi.fn((key: string) => {\n    const safeTranslations = new Map(Object.entries(translations));\n    return safeTranslations.get(key) || key;\n  });\n};\n\n// ä¸»é¢˜æµ‹è¯•å·¥å…·\nexport const createMockTheme = (theme: string = 'light') => {\n  return {\n    theme,\n    setTheme: vi.fn(),\n    resolvedTheme: theme,\n    themes: ['light', 'dark', 'system'],\n    systemTheme: 'light',\n  };\n};\n\n// è·¯ç”±æµ‹è¯•å·¥å…·\nexport const createMockRouter = (overrides: Record<string, unknown> = {}) => {\n  return {\n    route: '/',\n    pathname: '/',\n    query: {},\n    asPath: '/',\n    push: vi.fn(),\n    replace: vi.fn(),\n    reload: vi.fn(),\n    back: vi.fn(),\n    prefetch: vi.fn().mockResolvedValue(undefined),\n    beforePopState: vi.fn(),\n    events: {\n      on: vi.fn(),\n      off: vi.fn(),\n      emit: vi.fn(),\n    },\n    isFallback: false,\n    ...overrides,\n  };\n};\n\n// ç”¨æˆ·äº‹ä»¶æ¨¡æ‹Ÿå·¥å…·\nexport const createUserEventMocks = () => {\n  return {\n    click: vi.fn(),\n    type: vi.fn(),\n    keyboard: vi.fn(),\n    hover: vi.fn(),\n    unhover: vi.fn(),\n    tab: vi.fn(),\n    clear: vi.fn(),\n    selectOptions: vi.fn(),\n    deselectOptions: vi.fn(),\n    upload: vi.fn(),\n    paste: vi.fn(),\n  };\n};\n\n// å¯è®¿é—®æ€§æµ‹è¯•å·¥å…·\nexport const createAccessibilityMocks = () => {\n  return {\n    // é«˜å¯¹æ¯”åº¦æ¨¡å¼\n    highContrast: vi.fn().mockImplementation((query: string) => ({\n      matches: query.includes('prefers-contrast: high'),\n      media: query,\n      onchange: null,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    })),\n\n    // å‡å°‘åŠ¨ç”»\n    reducedMotion: vi.fn().mockImplementation((query: string) => ({\n      matches: query.includes('prefers-reduced-motion: reduce'),\n      media: query,\n      onchange: null,\n      addListener: vi.fn(),\n      removeListener: vi.fn(),\n      addEventListener: vi.fn(),\n      removeEventListener: vi.fn(),\n      dispatchEvent: vi.fn(),\n    })),\n  };\n};\n\n// æ€§èƒ½æµ‹è¯•å·¥å…·\nexport const createPerformanceMocks = () => {\n  return {\n    now: vi.fn(() => Date.now()),\n    mark: vi.fn(),\n    measure: vi.fn(),\n    getEntriesByType: vi.fn(() => []),\n    getEntriesByName: vi.fn(() => []),\n    clearMarks: vi.fn(),\n    clearMeasures: vi.fn(),\n  };\n};\n\n// ç½‘ç»œè¯·æ±‚Mockå·¥å…·\nexport const createFetchMock = (\n  response: unknown = {},\n  status: number = HTTP_STATUS.OK,\n) => {\n  return vi.fn().mockResolvedValue({\n    ok:\n      status >= HTTP_STATUS.CLIENT_ERROR_MIN &&\n      status < HTTP_STATUS.CLIENT_ERROR_MAX,\n    status,\n    statusText: status === HTTP_STATUS.OK ? 'OK' : 'Error',\n    json: vi.fn().mockResolvedValue(response),\n    text: vi.fn().mockResolvedValue(JSON.stringify(response)),\n    headers: new Headers(),\n    clone: vi.fn(),\n  });\n};\n\n// é”™è¯¯è¾¹ç•Œæµ‹è¯•å·¥å…·\nexport const createErrorBoundaryMock = () => {\n  return class MockErrorBoundary extends React.Component<\n    { children: React.ReactNode },\n    { hasError: boolean }\n  > {\n    constructor(props: { children: React.ReactNode }) {\n      super(props);\n      this.state = { hasError: false };\n    }\n\n    static getDerivedStateFromError() {\n      return { hasError: true };\n    }\n\n    override componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n      console.error('Error caught by boundary:', error, errorInfo);\n    }\n\n    override render() {\n      if (this.state.hasError) {\n        return <div data-testid='error-boundary'>Something went wrong.</div>;\n      }\n\n      return this.props.children;\n    }\n  };\n};\n\n// ç­‰å¾…å·¥å…·å‡½æ•°\nexport const waitForNextTick = () =>\n  new Promise((resolve) => setTimeout(resolve, 0));\n\n// æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨\nexport const generateTestData = {\n  user: (overrides: Record<string, unknown> = {}) => ({\n    id: '1',\n    name: 'Test User',\n    email: 'test@example.com',\n    role: 'user',\n    ...overrides,\n  }),\n\n  post: (overrides: Record<string, unknown> = {}) => ({\n    id: '1',\n    title: 'Test Post',\n    content: 'Test content',\n    author: 'Test Author',\n    createdAt: new Date().toISOString(),\n    ...overrides,\n  }),\n\n  translation: (overrides: Record<string, string> = {}) => ({\n    'common.loading': 'Loading...',\n    'common.error': 'Error',\n    'common.success': 'Success',\n    'nav.home': 'Home',\n    'nav.about': 'About',\n    ...overrides,\n  }),\n};\n\n// é‡æ–°å¯¼å‡ºrenderå‡½æ•°\nexport { customRender as render };\n\n// é‡æ–°å¯¼å‡ºtesting-libraryçš„æ‰€æœ‰å·¥å…·\nexport * from '@testing-library/react';\nexport { vi } from 'vitest';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/testing/templates/component-test-template.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/testing/utils/theme-test-utilities.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/__tests__/global.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/__tests__/index.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/content.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/global.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/i18n-enhanced.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/i18n.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/test-types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3424,3427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3424,3427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3434,3437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3434,3437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-params","severity":2,"message":"Function has too many parameters (5). Maximum allowed is 3.","line":284,"column":22,"nodeType":"TSFunctionType","messageId":"exceed","endLine":284,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9405,9408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9405,9408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9415,9418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9415,9418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9432,9435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9432,9435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9442,9445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9442,9445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * æµ‹è¯•ç›¸å…³çš„TypeScriptç±»å‹å®šä¹‰\n * ç”¨äºæ›¿æ¢æµ‹è¯•æ–‡ä»¶ä¸­çš„anyç±»å‹ï¼Œæå‡ç±»å‹å®‰å…¨æ€§\n */\n\n// ============================================================================\n// DOM Mock Types - ç”¨äºæµ‹è¯•ä¸­çš„DOMå…ƒç´ æ¨¡æ‹Ÿ\n// ============================================================================\n\n/**\n * Mock DOMå…ƒç´ æ¥å£\n * ç”¨äºæ¨¡æ‹Ÿæµ‹è¯•ä¸­çš„HTMLå…ƒç´ \n * ä½¿ç”¨äº¤å‰ç±»å‹æä¾›HTMLElementå…¼å®¹æ€§ï¼ŒåŒæ—¶ä¿ç•™å¿…éœ€çš„Mockå±æ€§\n */\nexport interface MockDOMElement {\n  id: string;\n  textContent: string | null;\n  setAttribute: (_name: string, _value: string) => void;\n  style: Record<string, string>;\n  parentNode: {\n    removeChild: (_child: MockDOMElement) => MockDOMElement;\n  } | null;\n  // æ·»åŠ HTMLElementçš„å…³é”®å±æ€§ä»¥æä¾›ç±»å‹å…¼å®¹æ€§\n  [key: string]: unknown;\n}\n\n/**\n * Mocké”®ç›˜äº‹ä»¶æ¥å£\n * ç”¨äºæ¨¡æ‹Ÿé”®ç›˜äº¤äº’æµ‹è¯•\n * ä½¿ç”¨äº¤å‰ç±»å‹æä¾›KeyboardEventå…¼å®¹æ€§ï¼ŒåŒæ—¶ä¿ç•™å¿…éœ€çš„Mockå±æ€§\n */\nexport interface MockKeyboardEvent {\n  key: string;\n  preventDefault: () => void;\n  stopPropagation?: () => void;\n  target?: MockDOMElement;\n  currentTarget?: MockDOMElement;\n  // æ·»åŠ KeyboardEventçš„å…³é”®å±æ€§ä»¥æä¾›ç±»å‹å…¼å®¹æ€§\n  [key: string]: unknown;\n}\n\n/**\n * Mocké¼ æ ‡äº‹ä»¶æ¥å£\n * ç”¨äºæ¨¡æ‹Ÿé¼ æ ‡äº¤äº’æµ‹è¯•\n */\nexport interface MockMouseEvent {\n  type: string;\n  button: number;\n  clientX: number;\n  clientY: number;\n  preventDefault: () => void;\n  stopPropagation?: () => void;\n  target?: MockDOMElement;\n  currentTarget?: MockDOMElement;\n}\n\n// ============================================================================\n// Environment Mock Types - ç”¨äºç¯å¢ƒå˜é‡å’Œå…¨å±€å¯¹è±¡æ¨¡æ‹Ÿ\n// ============================================================================\n\n/**\n * Mockç¯å¢ƒå˜é‡æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­çš„process.envæ¨¡æ‹Ÿ\n */\nexport interface MockProcessEnv {\n  NODE_ENV?: string;\n  [key: string]: string | undefined;\n}\n\n/**\n * Mock Crypto APIæ¥å£\n * ç”¨äºæµ‹è¯•ä¸­çš„åŠ å¯†APIæ¨¡æ‹Ÿ\n */\nexport interface MockCrypto {\n  getRandomValues: ((_array: Uint8Array) => Uint8Array) | null;\n  randomUUID?: () => string;\n  subtle?: {\n    digest: (_algorithm: string, _data: ArrayBuffer) => Promise<ArrayBuffer>;\n  };\n}\n\n/**\n * Mockå…¨å±€å¯¹è±¡æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­çš„å…¨å±€å¯¹è±¡æ¨¡æ‹Ÿ\n */\nexport interface MockGlobal {\n  crypto: MockCrypto;\n  window?: {\n    matchMedia: (_query: string) => MediaQueryList;\n    location: {\n      href: string;\n      pathname: string;\n      search: string;\n    };\n  };\n}\n\n// ============================================================================\n// Test Analytics Types - ç”¨äºä¸»é¢˜åˆ†ææµ‹è¯•çš„æ•°æ®ç±»å‹\n// ============================================================================\n\n/**\n * ä¸»é¢˜åˆ‡æ¢æ¨¡å¼ç±»å‹\n */\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\n/**\n * ä¸å®‰å…¨çš„è¯­è¨€ä»£ç ç±»å‹ - ç”¨äºå®‰å…¨æ€§æµ‹è¯•\n * åŒ…å«å¯èƒ½å¯¼è‡´åŸå‹æ±¡æŸ“çš„å±é™©å­—ç¬¦ä¸²\n */\nexport type UnsafeLocaleCode =\n  | '__proto__'\n  | 'constructor'\n  | 'prototype'\n  | string;\n\n/**\n * æ€§èƒ½æŒ‡æ ‡æ¥å£\n * ç”¨äºä¸»é¢˜åˆ‡æ¢æ€§èƒ½æµ‹è¯•\n */\nexport interface MockPerformanceMetric {\n  switchDuration: number;\n  fromTheme: ThemeMode;\n  toTheme: ThemeMode;\n  timestamp: number | null;\n  userAgent: string;\n  viewportSize: {\n    width: number;\n    height: number;\n  };\n  supportsViewTransitions: boolean;\n}\n\n/**\n * ä¸»é¢˜åˆ‡æ¢æ¨¡å¼æ¥å£\n * ç”¨äºåˆ†æä¸»é¢˜åˆ‡æ¢è¡Œä¸ºæ¨¡å¼\n */\nexport interface MockSwitchPattern {\n  sequence: [ThemeMode, ThemeMode];\n  frequency: number;\n  lastOccurrence: number;\n}\n\n/**\n * åˆ†æé…ç½®æ¥å£\n * ç”¨äºä¸»é¢˜åˆ†æå™¨é…ç½®æµ‹è¯•\n */\nexport interface MockAnalyticsConfig {\n  enabled: boolean;\n  sampleRate: number;\n  maxRecords?: number;\n  debugMode?: boolean;\n}\n\n// ============================================================================\n// Test Utility Types - ç”¨äºæµ‹è¯•å·¥å…·å‡½æ•°çš„ç±»å‹\n// ============================================================================\n\n/**\n * Jest Mockå‡½æ•°ç±»å‹\n * ç”¨äºç±»å‹åŒ–Jestæ¨¡æ‹Ÿå‡½æ•°\n */\nexport type MockFunction<T extends (..._args: any[]) => any> = T & {\n  mock: {\n    calls: unknown[][];\n    results: Array<{ type: 'return' | 'throw'; value: unknown }>;\n    instances: unknown[];\n  };\n  mockReturnValue: (_value: ReturnType<T>) => MockFunction<T>;\n  mockImplementation: (_fn: T) => MockFunction<T>;\n  mockResolvedValue: (_value: Awaited<ReturnType<T>>) => MockFunction<T>;\n  mockRejectedValue: (_value: unknown) => MockFunction<T>;\n};\n\n/**\n * æµ‹è¯•å›è°ƒå‡½æ•°ç±»å‹\n * ç”¨äºå¼‚æ­¥æµ‹è¯•çš„å›è°ƒ\n */\nexport type TestCallback = (_done?: () => void) => void;\n\n/**\n * æµ‹è¯•é…ç½®æ¥å£\n * ç”¨äºæµ‹è¯•è®¾ç½®å’Œé…ç½®\n */\nexport interface TestConfig {\n  timeout?: number;\n  retries?: number;\n  skipCI?: boolean;\n  mockTimers?: boolean;\n}\n\n/**\n * é¢œè‰²æµ‹è¯•æ•°æ®æ¥å£\n * ç”¨äºé¢œè‰²ç³»ç»Ÿæµ‹è¯•\n */\nexport interface MockColorData {\n  [key: string]: {\n    l: number;\n    c: number;\n    h: number;\n    alpha?: number;\n  };\n}\n\n// ============================================================================\n// Type Guards - ç”¨äºç±»å‹æ£€æŸ¥çš„å·¥å…·å‡½æ•°\n// ============================================================================\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºMock DOMå…ƒç´ \n */\nexport function isMockDOMElement(obj: unknown): obj is MockDOMElement {\n  return (\n    typeof obj === 'object' &&\n    obj !== null &&\n    'id' in obj &&\n    'textContent' in obj &&\n    'setAttribute' in obj\n  );\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºMocké”®ç›˜äº‹ä»¶\n */\nexport function isMockKeyboardEvent(obj: unknown): obj is MockKeyboardEvent {\n  return (\n    typeof obj === 'object' &&\n    obj !== null &&\n    'key' in obj &&\n    'preventDefault' in obj\n  );\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ä¸»é¢˜æ¨¡å¼\n */\nexport function isValidThemeMode(mode: string): mode is ThemeMode {\n  return ['light', 'dark', 'system'].includes(mode);\n}\n\n// ============================================================================\n// Accessibility Test Types - ç”¨äºæ— éšœç¢åŠŸèƒ½æµ‹è¯•çš„ç±»å‹\n// ============================================================================\n\n/**\n * æ— éšœç¢ç®¡ç†å™¨ç§æœ‰å±æ€§æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­è®¿é—®ç§æœ‰å±æ€§\n */\nexport interface AccessibilityManagerPrivate {\n  liveRegion: MockDOMElement | null;\n  language: string;\n  announcements: string[];\n}\n\n/**\n * æ— éšœç¢æµ‹è¯•é…ç½®æ¥å£\n */\nexport interface AccessibilityTestConfig {\n  language?: string;\n  enableAnnouncements?: boolean;\n  mockLiveRegion?: boolean;\n}\n\n// ============================================================================\n// Theme Analytics Private Types - ç”¨äºä¸»é¢˜åˆ†æå™¨ç§æœ‰å±æ€§æµ‹è¯•\n// ============================================================================\n\n/**\n * ä¸»é¢˜åˆ†æå™¨ç§æœ‰å±æ€§æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­è®¿é—®ç§æœ‰å±æ€§\n */\nexport interface ThemeAnalyticsPrivate {\n  performanceMetrics: MockPerformanceMetric[];\n  switchPatterns: MockSwitchPattern[];\n  config: MockAnalyticsConfig;\n  isEnabled: boolean;\n}\n\n/**\n * ä¸»é¢˜åˆ†æå™¨å®ä¾‹ç±»å‹\n * ç»“åˆå…¬å…±æ¥å£å’Œç§æœ‰å±æ€§\n */\nexport type ThemeAnalyticsInstance = {\n  recordThemeSwitch: (\n    _fromTheme: ThemeMode,\n    _toTheme: ThemeMode,\n    _startTime: number,\n    _endTime: number,\n    _supportsViewTransitions?: boolean,\n  ) => void;\n  recordThemePreference: (_theme: ThemeMode) => void;\n  getPerformanceSummary: () => {\n    totalSwitches: number;\n    averageDuration: number;\n    fastestSwitch: number;\n    slowestSwitch: number;\n  };\n} & ThemeAnalyticsPrivate;\n\n// ============================================================================\n// Color System Test Types - ç”¨äºé¢œè‰²ç³»ç»Ÿæµ‹è¯•çš„ç±»å‹\n// ============================================================================\n\n/**\n * ä¸å®Œæ•´çš„ä¸»é¢˜é¢œè‰²ç±»å‹\n * ç”¨äºæµ‹è¯•è¾¹ç•Œæƒ…å†µ\n */\nexport interface IncompleteThemeColors {\n  background?: {\n    l: number;\n    c: number;\n    h: number;\n    alpha?: number;\n  };\n  [key: string]:\n    | {\n        l: number;\n        c: number;\n        h: number;\n        alpha?: number;\n      }\n    | undefined;\n}\n\n/**\n * CSSå˜é‡ç”Ÿæˆæµ‹è¯•ç±»å‹\n */\nexport interface CSSVariablesTest {\n  input: MockColorData | IncompleteThemeColors;\n  prefix?: string;\n  expected: Record<string, string>;\n}\n\n// ============================================================================\n// Browser API Mock Types - ç”¨äºæµè§ˆå™¨APIæ¨¡æ‹Ÿçš„ç±»å‹\n// ============================================================================\n\n/**\n * NumberFormatæ„é€ å‡½æ•°ç±»å‹\n * ç”¨äºæµ‹è¯•ä¸­æ¨¡æ‹ŸIntl.NumberFormat\n */\nexport interface NumberFormatConstructor {\n  new (\n    locales?: string | string[],\n    options?: Intl.NumberFormatOptions,\n  ): Intl.NumberFormat;\n  (\n    locales?: string | string[],\n    options?: Intl.NumberFormatOptions,\n  ): Intl.NumberFormat;\n  supportedLocalesOf(\n    locales: string | string[],\n    options?: { localeMatcher?: string },\n  ): string[];\n}\n\n/**\n * DateTimeFormatæ„é€ å‡½æ•°ç±»å‹\n * ç”¨äºæµ‹è¯•ä¸­æ¨¡æ‹ŸIntl.DateTimeFormat\n */\nexport interface DateTimeFormatConstructor {\n  new (\n    locales?: string | string[],\n    options?: Intl.DateTimeFormatOptions,\n  ): Intl.DateTimeFormat;\n  (\n    locales?: string | string[],\n    options?: Intl.DateTimeFormatOptions,\n  ): Intl.DateTimeFormat;\n  supportedLocalesOf(\n    locales: string | string[],\n    options?: { localeMatcher?: string },\n  ): string[];\n}\n\n/**\n * Mockå­˜å‚¨ç®¡ç†å™¨æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­æ¨¡æ‹Ÿå­˜å‚¨æ“ä½œ\n */\nexport interface MockStorageManager {\n  getUserPreference: MockFunction<() => string | null>;\n  getDetectionHistory: MockFunction<\n    () => Array<{ locale: string; timestamp: number }>\n  >;\n  getUserOverride: MockFunction<() => string | null>;\n  setUserPreference: MockFunction<(locale: string) => void>;\n  setUserOverride: MockFunction<(locale: string) => void>;\n  clearUserData: MockFunction<() => void>;\n}\n\n/**\n * Mockåœ°ç†ä½ç½®æ¥å£\n * ç”¨äºæµ‹è¯•ä¸­æ¨¡æ‹Ÿåœ°ç†ä½ç½®API\n */\nexport interface MockGeolocation {\n  getCurrentPosition: MockFunction<\n    (\n      success: (position: GeolocationPosition) => void,\n      error?: (error: GeolocationPositionError) => void,\n    ) => void\n  >;\n  watchPosition: MockFunction<\n    (\n      success: (position: GeolocationPosition) => void,\n      error?: (error: GeolocationPositionError) => void,\n    ) => number\n  >;\n  clearWatch: MockFunction<(watchId: number) => void>;\n}\n\n// ============================================================================\n// Jest Extended Types - Jestç›¸å…³çš„æ‰©å±•ç±»å‹\n// ============================================================================\n\n/**\n * Jestæ¨¡æ‹Ÿå‡½æ•°çš„æ‰©å±•ç±»å‹\n * æ”¯æŒæ›´å¤æ‚çš„æ¨¡æ‹Ÿåœºæ™¯\n */\nexport type ExtendedMockFunction<\n  T extends (..._args: any[]) => any = (..._args: any[]) => any,\n> = MockFunction<T> & {\n  mockReturnValueOnce: (_value: ReturnType<T>) => ExtendedMockFunction<T>;\n  mockResolvedValueOnce: (\n    _value: Awaited<ReturnType<T>>,\n  ) => ExtendedMockFunction<T>;\n  mockRejectedValueOnce: (_error: unknown) => ExtendedMockFunction<T>;\n};\n\n/**\n * Jesté—´è°å‡½æ•°ç±»å‹\n */\nexport type SpyFunction<T = unknown> = T & {\n  mockRestore: () => void;\n  mockClear: () => void;\n  mockReset: () => void;\n};\n\n/**\n * æµ‹è¯•å¥—ä»¶é…ç½®æ¥å£\n */\nexport interface TestSuiteConfig {\n  name: string;\n  timeout?: number;\n  beforeEach?: () => void | Promise<void>;\n  afterEach?: () => void | Promise<void>;\n  beforeAll?: () => void | Promise<void>;\n  afterAll?: () => void | Promise<void>;\n}\n\n// ============================================================================\n// Pattern Matching Types - ç”¨äºæ¨¡å¼åŒ¹é…æµ‹è¯•çš„ç±»å‹\n// ============================================================================\n\n/**\n * æ¨¡å¼åŒ¹é…ç»“æœæ¥å£\n * ç”¨äºæµ‹è¯•ä¸­çš„æ¨¡å¼è¯†åˆ«\n */\nexport interface PatternMatchResult {\n  pattern: MockSwitchPattern;\n  confidence: number;\n  occurrences: number;\n}\n\n/**\n * æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ç±»å‹\n */\nexport type TestDataGenerator<T> = (_count: number) => T[];\n\n/**\n * æµ‹è¯•æ–­è¨€è¾…åŠ©ç±»å‹\n */\nexport interface TestAssertion<T> {\n  actual: T;\n  expected: T;\n  message?: string;\n}\n\n// ============================================================================\n// Export All Types - å¯¼å‡ºæ‰€æœ‰ç±»å‹çš„ä¾¿æ·æ¥å£\n// ============================================================================\n\n/**\n * æ‰€æœ‰æµ‹è¯•ç±»å‹çš„è”åˆç±»å‹\n * ç”¨äºç±»å‹æ£€æŸ¥å’Œæ–‡æ¡£ç”Ÿæˆ\n */\nexport type AllTestTypes =\n  | MockDOMElement\n  | MockKeyboardEvent\n  | MockMouseEvent\n  | MockProcessEnv\n  | MockCrypto\n  | MockGlobal\n  | MockPerformanceMetric\n  | MockSwitchPattern\n  | MockAnalyticsConfig\n  | AccessibilityManagerPrivate\n  | ThemeAnalyticsPrivate\n  | IncompleteThemeColors\n  | CSSVariablesTest;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/translation-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/defaults.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/interfaces.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131000' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131005' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131008' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131009' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131014' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":89},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131016' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":91,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":103},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131021' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":105,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":117},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131026' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":119,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":131},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131047' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":133,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":145},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131051' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":147,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":159},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131052' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":161,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":173},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_131053' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":175,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":187},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_132' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":189,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":198},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_133' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":200,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":209},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_136' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":211,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":220},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_190' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":222,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":231},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAGIC_368' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":233,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":242}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MAGIC_131, MAGIC_131000, MAGIC_131005, MAGIC_131008, MAGIC_131009, MAGIC_131014, MAGIC_131016, MAGIC_131021, MAGIC_131026, MAGIC_131047, MAGIC_131051, MAGIC_131052, MAGIC_131053, MAGIC_132, MAGIC_133, MAGIC_136, MAGIC_190, MAGIC_368  } from '@/constants';\n\n/**\n * WhatsApp API ç±»å‹å®šä¹‰\n * WhatsApp API Type Definitions\n */\n\n/**\n * APIç«¯ç‚¹ç±»å‹\n * API endpoint types\n */\nexport type ApiEndpoint =\n  | 'messages'\n  | 'media'\n  | 'phone_numbers'\n  | 'business_profile'\n  | 'message_templates'\n  | 'analytics'\n  | 'batch'\n  | 'webhooks'\n  | 'account'\n  | 'apps';\n\n/**\n * HTTPæ–¹æ³•ç±»å‹\n * HTTP method types\n */\nexport type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n\n/**\n * APIç‰ˆæœ¬ç±»å‹\n * API version types\n */\nexport type ApiVersion = 'v17.0' | 'v18.0' | 'v19.0' | 'v20.0';\n\n/**\n * æ¶ˆæ¯ç±»å‹\n * Message types\n */\nexport type MessageType =\n  | 'text'\n  | 'template'\n  | 'image'\n  | 'document'\n  | 'audio'\n  | 'video'\n  | 'location'\n  | 'contacts'\n  | 'interactive'\n  | 'reaction'\n  | 'sticker';\n\n/**\n * åª’ä½“ç±»å‹\n * Media types\n */\nexport type MediaType = 'image' | 'document' | 'audio' | 'video' | 'sticker';\n\n/**\n * æ¨¡æ¿ç±»åˆ«\n * Template categories\n */\nexport type TemplateCategory = 'AUTHENTICATION' | 'MARKETING' | 'UTILITY';\n\n/**\n * æ¨¡æ¿çŠ¶æ€\n * Template status\n */\nexport type TemplateStatusType =\n  | 'APPROVED'\n  | 'PENDING'\n  | 'REJECTED'\n  | 'DISABLED'\n  | 'PAUSED';\n\n/**\n * è´¨é‡è¯„çº§\n * Quality rating\n */\nexport type QualityRating = 'GREEN' | 'YELLOW' | 'RED' | 'UNKNOWN';\n\n/**\n * ååé‡çº§åˆ«\n * Throughput level\n */\nexport type ThroughputLevel = 'STANDARD' | 'HIGH';\n\n/**\n * åˆ†æç²’åº¦\n * Analytics granularity\n */\nexport type AnalyticsGranularity = 'HALF_HOUR' | 'DAY' | 'MONTH';\n\n/**\n * åˆ†ææŒ‡æ ‡ç±»å‹\n * Analytics metric types\n */\nexport type AnalyticsMetricType =\n  | 'cost'\n  | 'conversation'\n  | 'phone_number_quality_score';\n\n/**\n * é”™è¯¯ä»£ç ç±»å‹\n * Error code types\n */\nexport type ErrorCode =\n  | 100 // Generic user error\n  | 131 // Generic temporary error\n  | 132 // Generic limit reached\n  | 133 // Generic permission error\n  | 136 // Generic authentication error\n  | 190 // Access token error\n  | 368 // Temporarily blocked for policies violations\n  | 131000 // Generic temporary error\n  | 131005 // Request limit reached\n  | 131008 // Required parameter is missing\n  | 131009 // Parameter value is not valid\n  | 131014 // Request timeout\n  | 131016 // Service temporarily unavailable\n  | 131021 // Recipient phone number not valid\n  | 131026 // Message undeliverable\n  | 131047 // Re-engagement message\n  | 131051 // Unsupported message type\n  | 131052 // Media download error\n  | 131053; // Media upload error\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-config/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-errors.ts","messages":[{"ruleId":"prefer-destructuring","severity":2,"message":"Use object destructuring.","line":422,"column":7,"nodeType":"AssignmentExpression","messageId":"preferDestructuring","endLine":422,"endColumn":36},{"ruleId":"max-statements","severity":2,"message":"Method 'generateSuggestions' has too many statements (25). Maximum allowed is 20.","line":442,"column":22,"nodeType":"FunctionExpression","messageId":"exceed","endLine":481,"endColumn":4},{"ruleId":"max-params","severity":2,"message":"Method 'calculateRetryDelay' has too many parameters (4). Maximum allowed is 3.","line":487,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":487,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ANIMATION_DURATION_VERY_SLOW, COUNT_PAIR, MAGIC_36, MAGIC_9, ONE, THIRTY_SECONDS_MS } from '@/constants';\n\n/**\n * WhatsApp API é”™è¯¯å¤„ç†ç±»å‹å®šä¹‰\n * WhatsApp API Error Handling Type Definitions\n *\n * æä¾›APIé”™è¯¯å¤„ç†ç›¸å…³çš„ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°\n */\n\n/**\n * åŸºç¡€APIé”™è¯¯å“åº”\n * Base API error response\n */\nexport interface WhatsAppApiErrorResponse {\n  code: number;\n  title: string;\n  message: string;\n  error_data?: {\n    details: string;\n    messaging_product?: string;\n    fbtrace_id?: string;\n  };\n  href?: string;\n}\n\n/**\n * å®Œæ•´APIé”™è¯¯\n * Complete API error\n */\nexport interface WhatsAppApiError {\n  error: {\n    message: string;\n    type: string;\n    code: number;\n    error_subcode?: number;\n    fbtrace_id: string;\n    error_user_title?: string;\n    error_user_msg?: string;\n    is_transient?: boolean;\n  };\n}\n\n/**\n * ç½‘ç»œé”™è¯¯\n * Network error\n */\nexport interface NetworkError {\n  name: 'NetworkError';\n  message: string;\n  code: 'NETWORK_ERROR' | 'TIMEOUT' | 'CONNECTION_REFUSED' | 'DNS_ERROR';\n  originalError?: Error;\n  retryable: boolean;\n}\n\n/**\n * éªŒè¯é”™è¯¯\n * Validation error\n */\nexport interface ValidationError {\n  name: 'ValidationError';\n  message: string;\n  code: 'INVALID_PARAMETER' | 'MISSING_PARAMETER' | 'INVALID_FORMAT';\n  field?: string;\n  value?: string | number | boolean | Record<string, unknown> | unknown[];\n  retryable: false;\n}\n\n/**\n * è®¤è¯é”™è¯¯\n * Authentication error\n */\nexport interface AuthenticationError {\n  name: 'AuthenticationError';\n  message: string;\n  code: 'INVALID_TOKEN' | 'EXPIRED_TOKEN' | 'INSUFFICIENT_PERMISSIONS';\n  retryable: false;\n}\n\n/**\n * é€Ÿç‡é™åˆ¶é”™è¯¯\n * Rate limit error\n */\nexport interface RateLimitError {\n  name: 'RateLimitError';\n  message: string;\n  code: 'RATE_LIMIT_EXCEEDED';\n  retryAfter?: number;\n  limit?: number;\n  remaining?: number;\n  resetTime?: number;\n  retryable: true;\n}\n\n/**\n * ä¸šåŠ¡é€»è¾‘é”™è¯¯\n * Business logic error\n */\nexport interface BusinessLogicError {\n  name: 'BusinessLogicError';\n  message: string;\n  code:\n    | 'INVALID_PHONE_NUMBER'\n    | 'MESSAGE_UNDELIVERABLE'\n    | 'TEMPLATE_NOT_APPROVED'\n    | 'MEDIA_TOO_LARGE';\n  details?: Record<\n    string,\n    string | number | boolean | Record<string, unknown> | unknown[]\n  >;\n  retryable: boolean;\n}\n\n/**\n * æœåŠ¡å™¨é”™è¯¯\n * Server error\n */\nexport interface ServerError {\n  name: 'ServerError';\n  message: string;\n  code: 'INTERNAL_SERVER_ERROR' | 'SERVICE_UNAVAILABLE' | 'BAD_GATEWAY';\n  statusCode: number;\n  retryable: boolean;\n}\n\n/**\n * é”™è¯¯è”åˆç±»å‹\n * Error union type\n */\nexport type WhatsAppError =\n  | WhatsAppApiError\n  | NetworkError\n  | ValidationError\n  | AuthenticationError\n  | RateLimitError\n  | BusinessLogicError\n  | ServerError;\n\n/**\n * é”™è¯¯ä¸¥é‡ç¨‹åº¦\n * Error severity\n */\nexport type ErrorSeverity = 'low' | 'medium' | 'high' | 'critical';\n\n/**\n * é”™è¯¯åˆ†ç±»\n * Error category\n */\nexport type ErrorCategory =\n  | 'network'\n  | 'authentication'\n  | 'validation'\n  | 'rate_limit'\n  | 'business_logic'\n  | 'server'\n  | 'unknown';\n\n/**\n * é”™è¯¯ä¸Šä¸‹æ–‡\n * Error context\n */\nexport interface ErrorContext {\n  requestId?: string;\n  timestamp: string;\n  endpoint: string;\n  method: string;\n  phoneNumberId?: string;\n  userId?: string;\n  messageId?: string;\n  retryCount?: number;\n  userAgent?: string;\n  ipAddress?: string;\n}\n\n/**\n * é”™è¯¯è¯¦æƒ…\n * Error details\n */\nexport interface ErrorDetails {\n  error: WhatsAppError;\n  context: ErrorContext;\n  severity: ErrorSeverity;\n  category: ErrorCategory;\n  retryable: boolean;\n  retryAfter?: number;\n  suggestions?: string[];\n}\n\n/**\n * é”™è¯¯å¤„ç†ç­–ç•¥\n * Error handling strategy\n */\nexport interface ErrorHandlingStrategy {\n  name: string;\n  description: string;\n  shouldRetry: (error: ErrorDetails) => boolean;\n  getRetryDelay: (error: ErrorDetails, attempt: number) => number;\n  maxRetries: number;\n  onError?: (error: ErrorDetails) => void;\n  onRetry?: (error: ErrorDetails, attempt: number) => void;\n  onMaxRetriesExceeded?: (error: ErrorDetails) => void;\n}\n\n/**\n * é”™è¯¯ç»Ÿè®¡\n * Error statistics\n */\nexport interface ErrorStatistics {\n  total: number;\n  byCategory: Record<ErrorCategory, number>;\n  bySeverity: Record<ErrorSeverity, number>;\n  byCode: Record<string, number>;\n  retryableCount: number;\n  nonRetryableCount: number;\n  averageRetryCount: number;\n  lastOccurrence?: string;\n}\n\n/**\n * é”™è¯¯æŠ¥å‘Š\n * Error report\n */\nexport interface ErrorReport {\n  id: string;\n  timestamp: string;\n  error: ErrorDetails;\n  stackTrace?: string;\n  userAgent?: string;\n  environment: string;\n  version: string;\n  additionalData?: Record<\n    string,\n    string | number | boolean | Record<string, unknown> | unknown[]\n  >;\n}\n\n/**\n * é”™è¯¯å¤„ç†é…ç½®\n * Error handling configuration\n */\nexport interface ErrorHandlingConfig {\n  enableRetry: boolean;\n  maxRetries: number;\n  retryDelay: number;\n  retryMultiplier: number;\n  maxRetryDelay: number;\n  enableLogging: boolean;\n  enableReporting: boolean;\n  reportingEndpoint?: string;\n  customStrategies?: Record<string, ErrorHandlingStrategy>;\n}\n\n/**\n * é”™è¯¯ç±»å‹å®ˆå«å‡½æ•°\n * Error type guard functions\n */\nexport function isWhatsAppApiError(error: unknown): error is WhatsAppApiError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      typeof (error as Record<string, unknown>).error === 'object' &&\n      'message' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>) &&\n      'type' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>) &&\n      'code' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>),\n  );\n}\n\nexport function isNetworkError(error: unknown): error is NetworkError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'NetworkError',\n  );\n}\n\nexport function isValidationError(error: unknown): error is ValidationError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'ValidationError',\n  );\n}\n\nexport function isAuthenticationError(\n  error: unknown,\n): error is AuthenticationError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'AuthenticationError',\n  );\n}\n\nexport function isRateLimitError(error: unknown): error is RateLimitError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'RateLimitError',\n  );\n}\n\nexport function isBusinessLogicError(\n  error: unknown,\n): error is BusinessLogicError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'BusinessLogicError',\n  );\n}\n\nexport function isServerError(error: unknown): error is ServerError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      (error as Record<string, unknown>).name === 'ServerError',\n  );\n}\n\n/**\n * é”™è¯¯å·¥å…·å‡½æ•°\n * Error utility functions\n */\nexport const ErrorUtils = {\n  /**\n   * åˆ†ç±»é”™è¯¯\n   * Categorize error\n   */\n  categorizeError(error: WhatsAppError): ErrorCategory {\n    if (isNetworkError(error)) return 'network';\n    if (isAuthenticationError(error)) return 'authentication';\n    if (isValidationError(error)) return 'validation';\n    if (isRateLimitError(error)) return 'rate_limit';\n    if (isBusinessLogicError(error)) return 'business_logic';\n    if (isServerError(error)) return 'server';\n    return 'unknown';\n  },\n\n  /**\n   * è¯„ä¼°é”™è¯¯ä¸¥é‡ç¨‹åº¦\n   * Assess error severity\n   */\n  assessSeverity(error: WhatsAppError): ErrorSeverity {\n    if (isAuthenticationError(error)) return 'critical';\n    if (isServerError(error) && error.statusCode >= 500) return 'high';\n    if (isRateLimitError(error)) return 'medium';\n    if (isValidationError(error)) return 'low';\n    if (isBusinessLogicError(error)) {\n      if (error.code === 'INVALID_PHONE_NUMBER') return 'medium';\n      if (error.code === 'MESSAGE_UNDELIVERABLE') return 'high';\n      return 'low';\n    }\n    return 'medium';\n  },\n\n  /**\n   * æ£€æŸ¥é”™è¯¯æ˜¯å¦å¯é‡è¯•\n   * Check if error is retryable\n   */\n  isRetryable(error: WhatsAppError): boolean {\n    if (isNetworkError(error)) return error.retryable;\n    if (isAuthenticationError(error)) return false;\n    if (isValidationError(error)) return false;\n    if (isRateLimitError(error)) return true;\n    if (isBusinessLogicError(error)) return error.retryable;\n    if (isServerError(error)) return error.retryable;\n    if (isWhatsAppApiError(error)) {\n      return error.error.is_transient || false;\n    }\n    return false;\n  },\n\n  /**\n   * æ ¼å¼åŒ–é”™è¯¯æ¶ˆæ¯\n   * Format error message\n   */\n  formatErrorMessage(error: WhatsAppError): string {\n    if (isWhatsAppApiError(error)) {\n      const { message, type, code } = error.error;\n      return `[${type}:${code}] ${message}`;\n    }\n\n    if ('message' in error) {\n      return `[${error.name}] ${error.message}`;\n    }\n\n    return 'Unknown error occurred';\n  },\n\n  /**\n   * æå–é”™è¯¯ä»£ç \n   * Extract error code\n   */\n  extractErrorCode(error: WhatsAppError): string | number {\n    if (isWhatsAppApiError(error)) {\n      return error.error.code;\n    }\n\n    if ('code' in error) {\n      return error.code;\n    }\n\n    return 'UNKNOWN';\n  },\n\n  /**\n   * åˆ›å»ºé”™è¯¯è¯¦æƒ…\n   * Create error details\n   */\n  createErrorDetails(\n    error: WhatsAppError,\n    context: ErrorContext,\n  ): ErrorDetails {\n    const category = ErrorUtils.categorizeError(error);\n    const severity = ErrorUtils.assessSeverity(error);\n    const retryable = ErrorUtils.isRetryable(error);\n\n    let retryAfter: number | undefined;\n    if (isRateLimitError(error)) {\n      retryAfter = error.retryAfter;\n    }\n\n    const suggestions = ErrorUtils.generateSuggestions(error);\n\n    return {\n      error,\n      context,\n      severity,\n      category,\n      retryable,\n      ...(retryAfter !== undefined && { retryAfter }),\n      suggestions,\n    };\n  },\n\n  /**\n   * ç”Ÿæˆé”™è¯¯å»ºè®®\n   * Generate error suggestions\n   */\n  generateSuggestions(error: WhatsAppError): string[] {\n    const suggestions: string[] = [];\n\n    if (isAuthenticationError(error)) {\n      suggestions.push('Check your access token');\n      suggestions.push('Verify token permissions');\n      suggestions.push('Ensure token has not expired');\n    }\n\n    if (isValidationError(error)) {\n      suggestions.push('Check request parameters');\n      suggestions.push('Validate input format');\n      suggestions.push('Review API documentation');\n    }\n\n    if (isRateLimitError(error)) {\n      suggestions.push('Implement exponential backoff');\n      suggestions.push('Reduce request frequency');\n      suggestions.push('Consider upgrading your plan');\n    }\n\n    if (isNetworkError(error)) {\n      suggestions.push('Check network connectivity');\n      suggestions.push('Verify API endpoint URL');\n      suggestions.push('Try again later');\n    }\n\n    if (isBusinessLogicError(error)) {\n      if (error.code === 'INVALID_PHONE_NUMBER') {\n        suggestions.push('Verify phone number format');\n        suggestions.push('Include country code');\n      }\n      if (error.code === 'MESSAGE_UNDELIVERABLE') {\n        suggestions.push('Check recipient status');\n        suggestions.push('Verify phone number is active');\n      }\n    }\n\n    return suggestions;\n  },\n\n  /**\n   * è®¡ç®—é‡è¯•å»¶è¿Ÿ\n   * Calculate retry delay\n   */\n  calculateRetryDelay(\n    attempt: number,\n    baseDelay: number = ANIMATION_DURATION_VERY_SLOW,\n    multiplier: number = COUNT_PAIR,\n    maxDelay: number = THIRTY_SECONDS_MS,\n  ): number {\n    const delay = baseDelay * multiplier**(attempt - ONE);\n    return Math.min(delay, maxDelay);\n  },\n\n  /**\n   * åˆ›å»ºé”™è¯¯æŠ¥å‘Š\n   * Create error report\n   */\n  createErrorReport(\n    errorDetails: ErrorDetails,\n    environment: string = 'production',\n    version: string = '1.0.0',\n  ): ErrorReport {\n    return {\n      id: `error_${Date.now()}_${Math.random().toString(MAGIC_36).substr(COUNT_PAIR, MAGIC_9)}`,\n      timestamp: new Date().toISOString(),\n      error: errorDetails,\n      environment,\n      version,\n    };\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/account-app-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/api-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/batch-business-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/media-analytics-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/message-actions-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/message-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/phone-webhook-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/request-builders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/template-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-requests/user-quality-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-responses.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":29,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":29,"endColumn":37,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[502,562],"text":"type WhatsAppApiResponse = SendMessageResponse"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":447,"column":12,"nodeType":"MemberExpression","endLine":447,"endColumn":37},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":457,"column":12,"nodeType":"MemberExpression","endLine":457,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ZERO } from \"@/constants\";\n\n/**\n * WhatsApp API å“åº”ç±»å‹å®šä¹‰\n * WhatsApp API Response Type Definitions\n *\n * æä¾›WhatsApp Business APIå“åº”ç›¸å…³çš„ç±»å‹å®šä¹‰\n */\n\n/**\n * å‘é€æ¶ˆæ¯å“åº”\n * Send message response\n */\nexport interface SendMessageResponse {\n  messaging_product: 'whatsapp';\n  contacts: Array<{\n    input: string;\n    wa_id: string;\n  }>;\n  messages: Array<{\n    id: string;\n  }>;\n}\n\n/**\n * WhatsApp API åŸå§‹å“åº”ç±»å‹ï¼ˆä¸ SendMessageResponse ç›¸åŒï¼‰\n * WhatsApp API raw response type (same as SendMessageResponse)\n */\nexport interface WhatsAppApiResponse extends SendMessageResponse {}\n\n/**\n * æœåŠ¡å±‚å“åº”åŒ…è£…ç±»å‹\n * Service layer response wrapper type\n */\nexport interface WhatsAppServiceResponse {\n  success: boolean;\n  data?: WhatsAppApiResponse;\n  error?: string;\n  timestamp?: string;\n  requestId?: string;\n}\n\n/**\n * åª’ä½“ä¸Šä¼ å“åº”\n * Media upload response\n */\nexport interface MediaUploadResponse {\n  id: string;\n}\n\n/**\n * åª’ä½“æ£€ç´¢å“åº”\n * Media retrieve response\n */\nexport interface MediaRetrieveResponse {\n  url: string;\n  mime_type: string;\n  sha256: string;\n  file_size: number;\n  id: string;\n}\n\n/**\n * ç”µè¯å·ç ä¿¡æ¯\n * Phone number information\n */\nexport interface PhoneNumberInfo {\n  verified_name: string;\n  display_phone_number: string;\n  id: string;\n  quality_rating: 'GREEN' | 'YELLOW' | 'RED' | 'UNKNOWN';\n  throughput: {\n    level: 'STANDARD' | 'HIGH';\n  };\n  webhook_configuration?: {\n    webhook_url: string;\n    webhook_fields: string[];\n  };\n}\n\n/**\n * ç”µè¯å·ç åˆ—è¡¨å“åº”\n * Phone numbers list response\n */\nexport interface PhoneNumbersResponse {\n  data: PhoneNumberInfo[];\n  paging?: {\n    cursors?: {\n      before?: string;\n      after?: string;\n    };\n    next?: string;\n    previous?: string;\n  };\n}\n\n/**\n * ä¸šåŠ¡æ¡£æ¡ˆ\n * Business profile\n */\nexport interface BusinessProfile {\n  about?: string;\n  address?: string;\n  description?: string;\n  email?: string;\n  profile_picture_url?: string;\n  websites?: string[];\n  vertical?: string;\n  messaging_product: 'whatsapp';\n}\n\n/**\n * ä¸šåŠ¡æ¡£æ¡ˆå“åº”\n * Business profile response\n */\nexport interface BusinessProfileResponse {\n  data: BusinessProfile[];\n}\n\n/**\n * æ¨¡æ¿çŠ¶æ€\n * Template status\n */\nexport interface TemplateStatus {\n  name: string;\n  status: 'APPROVED' | 'PENDING' | 'REJECTED' | 'DISABLED' | 'PAUSED';\n  category: 'AUTHENTICATION' | 'MARKETING' | 'UTILITY';\n  language: string;\n  id: string;\n  components?: Array<{\n    type: 'HEADER' | 'BODY' | 'FOOTER' | 'BUTTONS';\n    format?: 'TEXT' | 'IMAGE' | 'DOCUMENT' | 'VIDEO';\n    text?: string;\n    buttons?: Array<{\n      type: 'QUICK_REPLY' | 'URL' | 'PHONE_NUMBER';\n      text: string;\n      url?: string;\n      phone_number?: string;\n    }>;\n  }>;\n  created_time?: string;\n  modified_time?: string;\n}\n\n/**\n * æ¨¡æ¿åˆ—è¡¨å“åº”\n * Templates list response\n */\nexport interface TemplatesResponse {\n  data: TemplateStatus[];\n  paging?: {\n    cursors?: {\n      before?: string;\n      after?: string;\n    };\n    next?: string;\n    previous?: string;\n  };\n}\n\n/**\n * åˆ†ææ•°æ®ç‚¹\n * Analytics data point\n */\nexport interface AnalyticsDataPoint {\n  start: string;\n  end: string;\n  sent: number;\n  delivered: number;\n  read: number;\n  cost?: number;\n  conversation_analytics?: {\n    conversation_opened: number;\n    conversation_closed: number;\n    conversation_expired: number;\n  };\n}\n\n/**\n * åˆ†æå“åº”\n * Analytics response\n */\nexport interface AnalyticsResponse {\n  data: Array<{\n    name: string;\n    period: string;\n    data_points: AnalyticsDataPoint[];\n  }>;\n  paging?: {\n    cursors?: {\n      before?: string;\n      after?: string;\n    };\n    next?: string;\n    previous?: string;\n  };\n}\n\n/**\n * æ‰¹é‡å“åº”\n * Batch response\n */\nexport interface BatchResponse {\n  responses: Array<{\n    code: number;\n    headers: Array<{\n      name: string;\n      value: string;\n    }>;\n    body: string;\n  }>;\n}\n\n/**\n * é€Ÿç‡é™åˆ¶ä¿¡æ¯\n * Rate limit information\n */\nexport interface RateLimitInfo {\n  app_id: string;\n  application_quota_usage: number;\n  business_quota_usage: number;\n  call_count: number;\n  total_cputime: number;\n  total_time: number;\n  type: 'application' | 'business';\n}\n\n/**\n * è´¦æˆ·ä¿¡æ¯å“åº”\n * Account info response\n */\nexport interface AccountInfoResponse {\n  id: string;\n  name: string;\n  timezone_offset_minutes: number;\n  message_template_namespace: string;\n  account_review_status: 'APPROVED' | 'PENDING' | 'REJECTED';\n  business_verification_status: 'VERIFIED' | 'UNVERIFIED' | 'PENDING';\n  country: string;\n  currency: string;\n  primary_business_location: string;\n}\n\n/**\n * åº”ç”¨è®¾ç½®å“åº”\n * App settings response\n */\nexport interface AppSettingsResponse {\n  data: {\n    application: {\n      name: string;\n      description?: string;\n      category?: string;\n    };\n    webhooks: {\n      callback_url: string;\n      fields: string[];\n      verify_token: string;\n    };\n  };\n}\n\n/**\n * è´¨é‡è¯„çº§å“åº”\n * Quality rating response\n */\nexport interface QualityRatingResponse {\n  quality_score: number;\n  quality_rating: 'GREEN' | 'YELLOW' | 'RED' | 'UNKNOWN';\n  previous_quality_rating?: 'GREEN' | 'YELLOW' | 'RED' | 'UNKNOWN';\n  event?: 'FLAGGED' | 'QUALITY_SCORE_CHANGED';\n}\n\n/**\n * æ¶ˆæ¯çŠ¶æ€å“åº”\n * Message status response\n */\nexport interface MessageStatusResponse {\n  success: boolean;\n}\n\n/**\n * ç”¨æˆ·é˜»æ­¢çŠ¶æ€å“åº”\n * User block status response\n */\nexport interface UserBlockStatusResponse {\n  success: boolean;\n  action: 'block' | 'unblock';\n}\n\n/**\n * WebhookéªŒè¯å“åº”\n * Webhook verification response\n */\nexport interface WebhookVerificationResponse {\n  challenge: string;\n}\n\n/**\n * åˆ†é¡µä¿¡æ¯\n * Pagination information\n */\nexport interface PaginationCursors {\n  before?: string;\n  after?: string;\n}\n\nexport interface PaginationInfo {\n  cursors?: PaginationCursors;\n  next?: string;\n  previous?: string;\n}\n\n/**\n * åˆ†é¡µå“åº”åŒ…è£…å™¨\n * Paginated response wrapper\n */\nexport interface PaginatedResponse<T> {\n  data: T[];\n  paging?: PaginationInfo;\n}\n\n/**\n * é€šç”¨APIå“åº”åŒ…è£…å™¨\n * Generic API response wrapper\n */\nexport interface ApiResponse<T = unknown> {\n  success: boolean;\n  data?: T;\n  error?: WhatsAppApiError;\n  rateLimitInfo?: RateLimitInfo;\n  requestId?: string;\n  timestamp?: string;\n  version?: string;\n}\n\n/**\n * é”™è¯¯å“åº”ç±»å‹\n * Error response types\n */\nexport interface WhatsAppApiErrorResponse {\n  code: number;\n  title: string;\n  message: string;\n  error_data?: {\n    details: string;\n    messaging_product?: string;\n    fbtrace_id?: string;\n  };\n  href?: string;\n}\n\nexport interface WhatsAppApiError {\n  error: {\n    message: string;\n    type: string;\n    code: number;\n    error_subcode?: number;\n    fbtrace_id: string;\n    error_user_title?: string;\n    error_user_msg?: string;\n  };\n}\n\n/**\n * å“åº”ç±»å‹è”åˆ\n * Response type union\n */\nexport type WhatsAppApiResponseType =\n  | SendMessageResponse\n  | MediaUploadResponse\n  | MediaRetrieveResponse\n  | PhoneNumbersResponse\n  | BusinessProfileResponse\n  | TemplatesResponse\n  | AnalyticsResponse\n  | BatchResponse\n  | AccountInfoResponse\n  | AppSettingsResponse\n  | QualityRatingResponse\n  | MessageStatusResponse\n  | UserBlockStatusResponse\n  | WebhookVerificationResponse;\n\n/**\n * å“åº”éªŒè¯å‡½æ•°\n * Response validation functions\n */\nexport function isSendMessageResponse(\n  response: unknown,\n): response is SendMessageResponse {\n  return Boolean(\n    response &&\n      typeof response === 'object' &&\n      (response as Record<string, unknown>).messaging_product === 'whatsapp' &&\n      Array.isArray((response as Record<string, unknown>).contacts) &&\n      Array.isArray((response as Record<string, unknown>).messages),\n  );\n}\n\nexport function isMediaUploadResponse(\n  response: unknown,\n): response is MediaUploadResponse {\n  return Boolean(\n    response &&\n      typeof response === 'object' &&\n      typeof (response as Record<string, unknown>).id === 'string',\n  );\n}\n\nexport function isWhatsAppApiError(error: unknown): error is WhatsAppApiError {\n  return Boolean(\n    error &&\n      typeof error === 'object' &&\n      typeof (error as Record<string, unknown>).error === 'object' &&\n      'message' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>) &&\n      'type' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>) &&\n      'code' in\n        ((error as Record<string, unknown>).error as Record<string, unknown>),\n  );\n}\n\nexport function isSuccessResponse<T>(\n  response: ApiResponse<T>,\n): response is ApiResponse<T> & { success: true; data: T } {\n  return response.success && Boolean(response.data);\n}\n\nexport function isErrorResponse<T>(\n  response: ApiResponse<T>,\n): response is ApiResponse<T> & { success: false; error: WhatsAppApiError } {\n  return !response.success && Boolean(response.error);\n}\n\n/**\n * å“åº”å¤„ç†å·¥å…·å‡½æ•°\n * Response handling utility functions\n */\nexport const ResponseUtils = {\n  /**\n   * æå–æ¶ˆæ¯ID\n   * Extract message ID\n   */\n  extractMessageId(response: SendMessageResponse): string | null {\n    return response.messages?.[ZERO]?.id || null;\n  },\n\n  /**\n   * æå–è”ç³»äººä¿¡æ¯\n   * Extract contact info\n   */\n  extractContactInfo(\n    response: SendMessageResponse,\n  ): { input: string; wa_id: string } | null {\n    return response.contacts?.[ZERO] || null;\n  },\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦ä¸ºæˆåŠŸå“åº”\n   * Check if response is successful\n   */\n  isSuccess(response: WhatsAppServiceResponse): boolean {\n    return response.success && !response.error;\n  },\n\n  /**\n   * æ ¼å¼åŒ–é”™è¯¯ä¿¡æ¯\n   * Format error message\n   */\n  formatError(error: WhatsAppApiError): string {\n    const { message, type, code } = error.error;\n    return `[${type}:${code}] ${message}`;\n  },\n\n  /**\n   * æå–åˆ†é¡µä¿¡æ¯\n   * Extract pagination info\n   */\n  extractPaginationInfo<T>(\n    response: PaginatedResponse<T>,\n  ): PaginationInfo | null {\n    return response.paging || null;\n  },\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ\n   * Check if has next page\n   */\n  hasNextPage<T>(response: PaginatedResponse<T>): boolean {\n    return Boolean(response.paging?.next || response.paging?.cursors?.after);\n  },\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦æœ‰ä¸Šä¸€é¡µ\n   * Check if has previous page\n   */\n  hasPreviousPage<T>(response: PaginatedResponse<T>): boolean {\n    return Boolean(response.paging?.previous || response.paging?.cursors?.before);\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-api-types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyticsGranularity' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyticsMetricType' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ApiVersion' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EnvironmentConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateStatusType' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ThroughputLevel' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorCategory' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorContext' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorDetails' is defined but never used. Allowed unused vars must match /^_/u.","line":43,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorHandlingConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":44,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorHandlingStrategy' is defined but never used. Allowed unused vars must match /^_/u.","line":45,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorReport' is defined but never used. Allowed unused vars must match /^_/u.","line":46,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorSeverity' is defined but never used. Allowed unused vars must match /^_/u.","line":47,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ErrorStatistics' is defined but never used. Allowed unused vars must match /^_/u.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AccountInfoResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":66,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyticsDataPoint' is defined but never used. Allowed unused vars must match /^_/u.","line":67,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AppSettingsResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":70,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BusinessProfile' is defined but never used. Allowed unused vars must match /^_/u.","line":72,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageStatusResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":76,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'QualityRatingResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":81,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RateLimitInfo' is defined but never used. Allowed unused vars must match /^_/u.","line":82,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":82,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":86,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserBlockStatusResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":87,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":87,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookVerificationResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":88,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WhatsAppApiResponseType' is defined but never used. Allowed unused vars must match /^_/u.","line":92,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ContactData' is defined but never used. Allowed unused vars must match /^_/u.","line":96,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LocationData' is defined but never used. Allowed unused vars must match /^_/u.","line":97,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":97,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WhatsAppContact' is defined but never used. Allowed unused vars must match /^_/u.","line":98,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å‘åå…¼å®¹çš„é‡æ–°å¯¼å‡º\nimport type {\n  ANALYTICS_GRANULARITIES,\n  ANALYTICS_METRIC_TYPES,\n  AnalyticsGranularity,\n  AnalyticsMetricType,\n  API_ENDPOINTS,\n  API_VERSIONS,\n  ApiConfig,\n  ApiEndpoint,\n  ApiVersion,\n  ClientConfig,\n  ConfigUtils,\n  DEFAULT_API_CONFIG,\n  DEFAULT_REQUEST_OPTIONS,\n  DEFAULT_WEBHOOK_CONFIG,\n  EnvironmentConfig,\n  ERROR_CODE_MESSAGES,\n  ErrorCode,\n  ExtendedApiConfig,\n  HTTP_METHODS,\n  HttpMethod,\n  MEDIA_TYPES,\n  MediaType,\n  MESSAGE_TYPES,\n  MessageType,\n  QUALITY_RATINGS,\n  QualityRating,\n  RETRYABLE_ERROR_CODES,\n  TEMPLATE_CATEGORIES,\n  TEMPLATE_STATUSES,\n  TemplateCategory,\n  TemplateStatusType,\n  THROUGHPUT_LEVELS,\n  ThroughputLevel,\n  WebhookConfig,\n} from '@/types/whatsapp-api-config';\nimport type {\n  AuthenticationError,\n  BusinessLogicError,\n  ErrorCategory,\n  ErrorContext,\n  ErrorDetails,\n  ErrorHandlingConfig,\n  ErrorHandlingStrategy,\n  ErrorReport,\n  ErrorSeverity,\n  ErrorStatistics,\n  ErrorUtils,\n  NetworkError,\n  RateLimitError,\n  ServerError,\n  ValidationError,\n  WhatsAppError,\n} from '@/types/whatsapp-api-errors';\nimport type {\n  AnalyticsRequest,\n  ApiRequest,\n  ApiRequestOptions,\n  BatchRequest,\n  MediaUploadRequest,\n  RequestBuilders,\n  SendMessageRequest,\n} from '@/types/whatsapp-api-requests';\nimport type {\n  AccountInfoResponse,\n  AnalyticsDataPoint,\n  AnalyticsResponse,\n  ApiResponse,\n  AppSettingsResponse,\n  BatchResponse,\n  BusinessProfile,\n  BusinessProfileResponse,\n  MediaRetrieveResponse,\n  MediaUploadResponse,\n  MessageStatusResponse,\n  PaginatedResponse,\n  PaginationCursors,\n  PaginationInfo,\n  PhoneNumbersResponse,\n  QualityRatingResponse,\n  RateLimitInfo,\n  ResponseUtils,\n  SendMessageResponse,\n  TemplatesResponse,\n  TemplateStatus,\n  UserBlockStatusResponse,\n  WebhookVerificationResponse,\n  WhatsAppApiError,\n  WhatsAppApiErrorResponse,\n  WhatsAppApiResponse,\n  WhatsAppApiResponseType,\n  WhatsAppServiceResponse,\n} from '@/types/whatsapp-api-responses';\nimport type {\n  ContactData,\n  LocationData,\n  WhatsAppContact,\n} from '@/types/whatsapp-base-types';\n\n/**\n * WhatsApp API ç±»å‹å®šä¹‰ - ä¸»å…¥å£\n * WhatsApp API Type Definitions - Main Entry Point\n *\n * ç»Ÿä¸€çš„WhatsApp Business APIç±»å‹å…¥å£ï¼Œæ•´åˆæ‰€æœ‰APIç›¸å…³ç±»å‹å®šä¹‰\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½ - ç±»å‹å¯¼å‡º\nexport type {\n  SendMessageRequest,\n  MediaUploadRequest,\n  AnalyticsRequest,\n  BatchRequest,\n  BusinessProfileUpdateRequest,\n  TemplateCreateRequest,\n  TemplateDeleteRequest,\n  TemplateStatusUpdateRequest,\n  PhoneNumberRegistrationRequest,\n  PhoneNumberVerificationRequest,\n  WebhookSubscriptionRequest,\n  MessageMarkRequest,\n  UserBlockRequest,\n  QualityRatingRequest,\n  AccountInfoRequest,\n  AppSettingsRequest,\n  MessageReactionRequest,\n  MessageForwardRequest,\n  GroupMessageRequest,\n  ApiRequestOptions,\n  ApiRequest,\n  WhatsAppApiRequest,\n} from '@/types/whatsapp-api-requests';\n\n// å‡½æ•°å¯¼å‡º\nexport {\n  isSendMessageRequest,\n  isMediaUploadRequest,\n  isAnalyticsRequest,\n  isBatchRequest,\n} from '@/types/whatsapp-api-requests';\n\nexport type {\n  SendMessageResponse,\n  WhatsAppApiResponse,\n  WhatsAppServiceResponse,\n  MediaUploadResponse,\n  MediaRetrieveResponse,\n  PhoneNumberInfo,\n  PhoneNumbersResponse,\n  BusinessProfile,\n  BusinessProfileResponse,\n  TemplateStatus,\n  TemplatesResponse,\n  AnalyticsDataPoint,\n  AnalyticsResponse,\n  BatchResponse,\n  RateLimitInfo,\n  AccountInfoResponse,\n  AppSettingsResponse,\n  QualityRatingResponse,\n  MessageStatusResponse,\n  UserBlockStatusResponse,\n  WebhookVerificationResponse,\n  PaginationCursors,\n  PaginationInfo,\n  PaginatedResponse,\n  WhatsAppApiResponseType,\n} from '@/types/whatsapp-api-responses';\n\nexport {\n  isSendMessageResponse,\n  isMediaUploadResponse,\n  isSuccessResponse,\n  isErrorResponse,\n} from '@/types/whatsapp-api-responses';\n\nexport type {\n  ApiConfig,\n  ExtendedApiConfig,\n  EnvironmentConfig,\n  WebhookConfig,\n  ClientConfig,\n  ApiEndpoint,\n  HttpMethod,\n  ApiVersion,\n  MessageType,\n  MediaType,\n  TemplateStatusType,\n  QualityRating,\n  ThroughputLevel,\n  AnalyticsGranularity,\n  AnalyticsMetricType,\n  ErrorCode,\n} from '@/types/whatsapp-api-config';\n\nexport {\n  validateApiConfig,\n  validateWebhookConfig,\n} from '@/types/whatsapp-api-config';\n\nexport type {\n  WhatsAppApiErrorResponse,\n  WhatsAppApiError,\n  NetworkError,\n  ValidationError,\n  AuthenticationError,\n  RateLimitError,\n  BusinessLogicError,\n  ServerError,\n  WhatsAppError,\n  ErrorSeverity,\n  ErrorCategory,\n  ErrorContext,\n  ErrorDetails,\n  ErrorHandlingStrategy,\n  ErrorStatistics,\n  ErrorReport,\n  ErrorHandlingConfig,\n} from '@/types/whatsapp-api-errors';\n\nexport {\n  isWhatsAppApiError as isApiError,\n  isNetworkError,\n  isValidationError,\n  isAuthenticationError,\n  isRateLimitError,\n  isBusinessLogicError,\n  isServerError,\n} from '@/types/whatsapp-api-errors';\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type {\n  // è¯·æ±‚ç±»å‹\n  SendMessageRequest as SendRequest,\n  MediaUploadRequest as UploadRequest,\n  AnalyticsRequest as AnalyticsReq,\n  BatchRequest as BatchReq,\n  ApiRequest as Request,\n  ApiRequestOptions as RequestOptions,\n\n  // å“åº”ç±»å‹\n  SendMessageResponse as SendResponse,\n  WhatsAppApiResponse as ApiResponse,\n  WhatsAppServiceResponse as ServiceResponse,\n  MediaUploadResponse as UploadResponse,\n  MediaRetrieveResponse as RetrieveResponse,\n  PhoneNumbersResponse as PhoneNumbersResp,\n  BusinessProfileResponse as BusinessProfileResp,\n  TemplatesResponse as TemplatesResp,\n  AnalyticsResponse as AnalyticsResp,\n  BatchResponse as BatchResp,\n  ApiResponse as Response,\n\n  // é…ç½®ç±»å‹\n  ApiConfig as Config,\n  ExtendedApiConfig as ExtendedConfig,\n  WebhookConfig as WebhookConf,\n  ClientConfig as ClientConf,\n\n  // é”™è¯¯ç±»å‹\n  WhatsAppApiError as ApiError,\n  WhatsAppApiErrorResponse as ErrorResponse,\n  WhatsAppError as Error,\n  NetworkError as NetError,\n  ValidationError as ValidError,\n  AuthenticationError as AuthError,\n  RateLimitError as RateLimitErr,\n  BusinessLogicError as BusinessError,\n  ServerError as ServError,\n\n  // å·¥å…·ç±»å‹\n  ApiEndpoint as Endpoint,\n  HttpMethod as Method,\n  MessageType as MsgType,\n  MediaType as MediaT,\n  TemplateCategory,\n  QualityRating as Quality,\n  ErrorCode as ErrCode,\n\n  // åˆ†é¡µç±»å‹\n  PaginatedResponse as PagedResponse,\n  PaginationInfo as PageInfo,\n  PaginationCursors as PageCursors,\n};\n\n/**\n * å‘åå…¼å®¹çš„å¯¼å‡ºåˆ«å\n * Backward compatible export aliases\n */\nexport {\n  // å¸¸é‡\n  type API_ENDPOINTS,\n  type HTTP_METHODS,\n  type API_VERSIONS,\n  type MESSAGE_TYPES,\n  type MEDIA_TYPES,\n  type TEMPLATE_CATEGORIES,\n  type TEMPLATE_STATUSES,\n  type QUALITY_RATINGS,\n  type THROUGHPUT_LEVELS,\n  type ANALYTICS_GRANULARITIES,\n  type ANALYTICS_METRIC_TYPES,\n\n  // é»˜è®¤é…ç½®\n  type DEFAULT_API_CONFIG,\n  type DEFAULT_WEBHOOK_CONFIG,\n  type DEFAULT_REQUEST_OPTIONS,\n\n  // é”™è¯¯ç›¸å…³\n  type ERROR_CODE_MESSAGES,\n  type RETRYABLE_ERROR_CODES,\n\n  // å·¥å…·å‡½æ•°\n  type ConfigUtils,\n  type ResponseUtils,\n  type ErrorUtils,\n  type RequestBuilders,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-base-types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1235,1238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1235,1238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":79,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":79,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1353,1446],"text":"type ImageMedia = MediaObject"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":87,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":87,"endColumn":28,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1532,1625],"text":"type VideoMedia = MediaObject"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ZERO } from \"@/constants\";\n\n/**\n * WhatsApp API Base Type Definitions\n *\n * This module provides fundamental type definitions for WhatsApp Business API integration,\n * including basic contact and message structures.\n */\n\n// Base WhatsApp API Types\nexport interface WhatsAppContact {\n  input: string;\n  wa_id: string;\n}\n\nexport interface WhatsAppMessage {\n  id: string;\n  from: string;\n  timestamp: string;\n  type:\n    | 'text'\n    | 'image'\n    | 'document'\n    | 'audio'\n    | 'video'\n    | 'location'\n    | 'contacts'\n    | 'template'\n    | 'interactive'\n    | 'reaction'\n    | 'sticker'\n    | 'order'\n    | 'system'\n    | 'button'\n    | 'template_reply';\n  text?: {\n    body: string;\n  };\n  image?: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  document?: {\n    id: string;\n    filename: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  audio?: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n  };\n  video?: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  location?: {\n    latitude: number;\n    longitude: number;\n    name?: string;\n    address?: string;\n  };\n  contacts?: WhatsAppContact[] | any[];\n}\n\n// Media Types\nexport interface MediaObject {\n  id?: string;\n  link?: string;\n  caption?: string;\n}\n\nexport interface ImageMedia extends MediaObject {\n  // Image-specific properties can be added here\n}\n\nexport interface DocumentMedia extends MediaObject {\n  filename?: string;\n}\n\nexport interface VideoMedia extends MediaObject {\n  // Video-specific properties can be added here\n}\n\nexport interface AudioMedia {\n  id?: string;\n  link?: string;\n  // Audio doesn't typically have captions\n}\n\n// Location Types\nexport interface LocationData {\n  latitude: number;\n  longitude: number;\n  name?: string;\n  address?: string;\n}\n\n// Contact Types\nexport interface ContactName {\n  formatted_name: string;\n  first_name?: string;\n  last_name?: string;\n  middle_name?: string;\n  suffix?: string;\n  prefix?: string;\n}\n\nexport interface ContactPhone {\n  phone?: string;\n  type?: 'CELL' | 'MAIN' | 'IPHONE' | 'HOME' | 'WORK';\n  wa_id?: string;\n}\n\nexport interface ContactEmail {\n  email?: string;\n  type?: 'WORK' | 'HOME';\n}\n\nexport interface ContactUrl {\n  url?: string;\n  type?: 'WORK' | 'HOME';\n}\n\nexport interface ContactAddress {\n  street?: string;\n  city?: string;\n  state?: string;\n  zip?: string;\n  country?: string;\n  country_code?: string;\n  type?: 'WORK' | 'HOME';\n}\n\nexport interface ContactOrg {\n  company?: string;\n  department?: string;\n  title?: string;\n}\n\nexport interface ContactData {\n  name: ContactName;\n  phones?: ContactPhone[];\n  emails?: ContactEmail[];\n  urls?: ContactUrl[];\n  addresses?: ContactAddress[];\n  org?: ContactOrg;\n  birthday?: string; // YYYY-MM-DD format\n}\n\n// Message Status Types\nexport type MessageStatus = 'sent' | 'delivered' | 'read' | 'failed';\n\nexport interface MessageStatusUpdate {\n  id: string;\n  status: MessageStatus;\n  timestamp: string;\n  recipient_id: string;\n  errors?: WhatsAppError[];\n}\n\n// Error Types (Basic)\nexport interface WhatsAppError {\n  code: number;\n  title: string;\n  message: string;\n  error_data?: {\n    details: string;\n  };\n}\n\n// Utility Types\nexport type MessageType = WhatsAppMessage['type'];\nexport type MediaType = 'image' | 'document' | 'audio' | 'video';\n\n// Type Guards\nexport function isTextMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & { text: NonNullable<WhatsAppMessage['text']> } {\n  return message.type === 'text' && Boolean(message.text);\n}\n\nexport function isImageMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  image: NonNullable<WhatsAppMessage['image']>;\n} {\n  return message.type === 'image' && Boolean(message.image);\n}\n\nexport function isDocumentMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  document: NonNullable<WhatsAppMessage['document']>;\n} {\n  return message.type === 'document' && Boolean(message.document);\n}\n\nexport function isAudioMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  audio: NonNullable<WhatsAppMessage['audio']>;\n} {\n  return message.type === 'audio' && Boolean(message.audio);\n}\n\nexport function isVideoMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  video: NonNullable<WhatsAppMessage['video']>;\n} {\n  return message.type === 'video' && Boolean(message.video);\n}\n\nexport function isLocationMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  location: NonNullable<WhatsAppMessage['location']>;\n} {\n  return message.type === 'location' && Boolean(message.location);\n}\n\nexport function isContactsMessage(\n  message: WhatsAppMessage,\n): message is WhatsAppMessage & {\n  contacts: NonNullable<WhatsAppMessage['contacts']>;\n} {\n  return message.type === 'contacts' && Boolean(message.contacts);\n}\n\n// Constants\nexport const WHATSAPP_MESSAGE_TYPES = [\n  'text',\n  'image',\n  'document',\n  'audio',\n  'video',\n  'location',\n  'contacts',\n  'template',\n  'interactive',\n  'reaction',\n  'sticker',\n  'order',\n  'system',\n  'button',\n  'template_reply',\n] as const;\n\nexport const WHATSAPP_MESSAGE_STATUSES = [\n  'sent',\n  'delivered',\n  'read',\n  'failed',\n] as const;\n\nexport const SUPPORTED_MEDIA_TYPES = [\n  'image',\n  'document',\n  'audio',\n  'video',\n] as const;\n\n// Validation Helpers\nexport function isValidMessageType(type: string): type is MessageType {\n  return WHATSAPP_MESSAGE_TYPES.includes(type as MessageType);\n}\n\nexport function isValidMessageStatus(status: string): status is MessageStatus {\n  return WHATSAPP_MESSAGE_STATUSES.includes(status as MessageStatus);\n}\n\nexport function isValidMediaType(type: string): type is MediaType {\n  return SUPPORTED_MEDIA_TYPES.includes(type as MediaType);\n}\n\n// Message Validation\nexport interface MessageValidationResult {\n  isValid: boolean;\n  errors: string[];\n}\n\nexport function validateWhatsAppMessage(\n  message: Partial<WhatsAppMessage>,\n): MessageValidationResult {\n  const errors: string[] = [];\n\n  if (!message.id) {\n    errors.push('Message ID is required');\n  }\n\n  if (!message.from) {\n    errors.push('Message sender is required');\n  }\n\n  if (!message.timestamp) {\n    errors.push('Message timestamp is required');\n  }\n\n  if (!message.type || !isValidMessageType(message.type)) {\n    errors.push('Valid message type is required');\n  }\n\n  // Type-specific validation\n  if (message.type === 'text' && !message.text?.body) {\n    errors.push('Text message must have body content');\n  }\n\n  if (message.type === 'location' && message.location) {\n    if (\n      typeof message.location.latitude !== 'number' ||\n      typeof message.location.longitude !== 'number'\n    ) {\n      errors.push('Location message must have valid latitude and longitude');\n    }\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n  };\n}\n\n// Export commonly used types with shorter names\nexport type {\n  WhatsAppContact as Contact, ContactData as ContactInfo, WhatsAppError as Error, LocationData as Location, WhatsAppMessage as Message, MessageStatusUpdate as StatusUpdate\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-message-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-service-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-service-errors.ts","messages":[{"ruleId":"max-params","severity":2,"message":"Constructor has too many parameters (5). Maximum allowed is 3.","line":29,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":29,"endColumn":14},{"ruleId":"max-params","severity":2,"message":"Constructor has too many parameters (4). Maximum allowed is 3.","line":104,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":104,"endColumn":14},{"ruleId":"max-params","severity":2,"message":"Constructor has too many parameters (4). Maximum allowed is 3.","line":215,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":215,"endColumn":14}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ANIMATION_DURATION_VERY_SLOW, HTTP_BAD_REQUEST, HTTP_UNAUTHORIZED, MAGIC_429, SECONDS_PER_MINUTE } from '@/constants';\n\n/**\n * WhatsApp Service Error Types and Classes\n *\n * This module provides comprehensive error handling types and classes\n * for WhatsApp Business API integration, including specific error types\n * for different failure scenarios.\n */\n\n// ==================== Base Error Class ====================\n\n/**\n * Base WhatsApp Error Class\n * All WhatsApp-related errors extend from this base class\n */\nexport class WhatsAppError extends Error {\n  /** HTTP status code or custom error code */\n  public readonly code: number;\n  /** Error type identifier */\n  public readonly type: string;\n  /** Additional error subcode for more specific error identification */\n  public readonly subcode?: number;\n  /** Trace ID for request tracking */\n  public readonly traceId?: string;\n  /** Timestamp when error occurred */\n  public readonly timestamp: number;\n\n  constructor(\n    message: string,\n    code: number = 500,\n    type: string = 'WhatsAppError',\n    subcode?: number,\n    traceId?: string,\n  ) {\n    super(message);\n    this.name = 'WhatsAppError';\n    this.code = code;\n    this.type = type;\n    if (subcode !== undefined) {\n      this.subcode = subcode;\n    }\n    if (traceId !== undefined) {\n      this.traceId = traceId;\n    }\n    this.timestamp = Date.now();\n\n    // Ensure proper prototype chain for instanceof checks\n    Object.setPrototypeOf(this, WhatsAppError.prototype);\n  }\n\n  /**\n   * Convert error to JSON for logging and serialization\n   */\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      type: this.type,\n      subcode: this.subcode,\n      traceId: this.traceId,\n      timestamp: this.timestamp,\n      stack: this.stack,\n    };\n  }\n\n  /**\n   * Check if error is retryable based on error type and code\n   */\n  isRetryable(): boolean {\n    // Rate limit errors are retryable\n    if (this.code === MAGIC_429) return true;\n\n    // Network errors are retryable\n    if (this.code >= 500) return true;\n\n    // Timeout errors are retryable\n    if (this.type === 'NetworkError' && this instanceof WhatsAppNetworkError) {\n      return this.isTimeout === true;\n    }\n\n    return false;\n  }\n}\n\n// ==================== Specific Error Classes ====================\n\n/**\n * WhatsApp API Error\n * Errors returned directly from WhatsApp Business API\n */\nexport class WhatsAppApiError extends WhatsAppError {\n  /** Original API error details */\n  public readonly apiError?: {\n    error_data?: {\n      messaging_product: string;\n      details: string;\n    };\n    error_subcode?: number;\n    fbtrace_id?: string;\n  };\n\n  constructor(\n    message: string,\n    code: number,\n    apiError?: WhatsAppApiError['apiError'],\n    traceId?: string,\n  ) {\n    super(\n      message,\n      code,\n      'ApiError',\n      apiError?.error_subcode,\n      traceId || apiError?.fbtrace_id,\n    );\n    this.name = 'WhatsAppApiError';\n    if (apiError !== undefined) {\n      this.apiError = apiError;\n    }\n  }\n\n  /**\n   * Convert to JSON with API error details\n   */\n  override toJSON() {\n    return {\n      ...super.toJSON(),\n      apiError: this.apiError,\n    };\n  }\n\n  /**\n   * Get detailed error message including API details\n   */\n  getDetailedMessage(): string {\n    if (this.apiError?.error_data?.details) {\n      return `${this.message}: ${this.apiError.error_data.details}`;\n    }\n    return this.message;\n  }\n}\n\n/**\n * WhatsApp Validation Error\n * Errors related to invalid input data or configuration\n */\nexport class WhatsAppValidationError extends WhatsAppError {\n  /** Field that failed validation */\n  public readonly field?: string;\n  /** Value that failed validation */\n  public readonly value?: unknown;\n\n  constructor(message: string, field?: string, value?: unknown) {\n    super(message, HTTP_BAD_REQUEST, 'ValidationError');\n    this.name = 'WhatsAppValidationError';\n    if (field !== undefined) {\n      this.field = field;\n    }\n    if (value !== undefined) {\n      this.value = value;\n    }\n  }\n\n  /**\n   * Convert to JSON with validation details\n   */\n  override toJSON() {\n    return {\n      ...super.toJSON(),\n      field: this.field,\n      value: this.value,\n    };\n  }\n\n  /**\n   * Create validation error for specific field\n   */\n  static forField(\n    field: string,\n    value: unknown,\n    reason: string,\n  ): WhatsAppValidationError {\n    return new WhatsAppValidationError(\n      `Validation failed for field '${field}': ${reason}`,\n      field,\n      value,\n    );\n  }\n\n  /**\n   * Create validation error for required field\n   */\n  static requiredField(field: string): WhatsAppValidationError {\n    return new WhatsAppValidationError(\n      `Required field '${field}' is missing`,\n      field,\n      undefined,\n    );\n  }\n}\n\n/**\n * WhatsApp Rate Limit Error\n * Errors related to API rate limiting\n */\nexport class WhatsAppRateLimitError extends WhatsAppError {\n  /** Seconds to wait before retrying */\n  public readonly retryAfter?: number;\n  /** Rate limit quota */\n  public readonly limit?: number;\n  /** Remaining requests in current window */\n  public readonly remaining?: number;\n\n  constructor(\n    message: string,\n    retryAfter?: number,\n    limit?: number,\n    remaining?: number,\n  ) {\n    super(message, MAGIC_429, 'RateLimitError');\n    this.name = 'WhatsAppRateLimitError';\n    if (retryAfter !== undefined) {\n      this.retryAfter = retryAfter;\n    }\n    if (limit !== undefined) {\n      this.limit = limit;\n    }\n    if (remaining !== undefined) {\n      this.remaining = remaining;\n    }\n  }\n\n  /**\n   * Convert to JSON with rate limit details\n   */\n  override toJSON() {\n    return {\n      ...super.toJSON(),\n      retryAfter: this.retryAfter,\n      limit: this.limit,\n      remaining: this.remaining,\n    };\n  }\n\n  /**\n   * Get retry delay in milliseconds\n   */\n  getRetryDelay(): number {\n    return (this.retryAfter || SECONDS_PER_MINUTE) * ANIMATION_DURATION_VERY_SLOW; // Default to SECONDS_PER_MINUTE seconds\n  }\n\n  /**\n   * Check if rate limit has expired\n   */\n  canRetryNow(): boolean {\n    if (!this.retryAfter) return true;\n    return Date.now() - this.timestamp >= this.getRetryDelay();\n  }\n}\n\n/**\n * WhatsApp Network Error\n * Errors related to network connectivity and timeouts\n */\nexport class WhatsAppNetworkError extends WhatsAppError {\n  /** Original network error */\n  public readonly originalError?: Error;\n  /** Whether this was a timeout error */\n  public readonly isTimeout?: boolean;\n\n  constructor(message: string, originalError?: Error, isTimeout?: boolean) {\n    super(message, 500, 'NetworkError');\n    this.name = 'WhatsAppNetworkError';\n    if (originalError !== undefined) {\n      this.originalError = originalError;\n    }\n    if (isTimeout !== undefined) {\n      this.isTimeout = isTimeout;\n    }\n  }\n\n  /**\n   * Convert to JSON with network error details\n   */\n  override toJSON() {\n    return {\n      ...super.toJSON(),\n      originalError: this.originalError?.message,\n      isTimeout: this.isTimeout,\n    };\n  }\n\n  /**\n   * Create timeout error\n   */\n  static timeout(timeoutMs: number): WhatsAppNetworkError {\n    return new WhatsAppNetworkError(\n      `Request timed out after ${timeoutMs}ms`,\n      undefined,\n      true,\n    );\n  }\n\n  /**\n   * Create connection error\n   */\n  static connection(originalError: Error): WhatsAppNetworkError {\n    return new WhatsAppNetworkError(\n      `Network connection failed: ${originalError.message}`,\n      originalError,\n      false,\n    );\n  }\n}\n\n/**\n * WhatsApp Authentication Error\n * Errors related to authentication and authorization\n */\nexport class WhatsAppAuthError extends WhatsAppError {\n  /** Whether the token has expired */\n  public readonly tokenExpired?: boolean;\n  /** Whether the token is invalid */\n  public readonly tokenInvalid?: boolean;\n\n  constructor(message: string, tokenExpired?: boolean, tokenInvalid?: boolean) {\n    super(message, HTTP_UNAUTHORIZED, 'AuthError');\n    this.name = 'WhatsAppAuthError';\n    if (tokenExpired !== undefined) {\n      this.tokenExpired = tokenExpired;\n    }\n    if (tokenInvalid !== undefined) {\n      this.tokenInvalid = tokenInvalid;\n    }\n  }\n\n  /**\n   * Convert to JSON with auth details\n   */\n  override toJSON() {\n    return {\n      ...super.toJSON(),\n      tokenExpired: this.tokenExpired,\n      tokenInvalid: this.tokenInvalid,\n    };\n  }\n\n  /**\n   * Create expired token error\n   */\n  static expiredToken(): WhatsAppAuthError {\n    return new WhatsAppAuthError('Access token has expired', true, false);\n  }\n\n  /**\n   * Create invalid token error\n   */\n  static invalidToken(): WhatsAppAuthError {\n    return new WhatsAppAuthError('Access token is invalid', false, true);\n  }\n}\n\n// ==================== Error Type Guards ====================\n\n/**\n * Check if error is a WhatsApp error\n */\nexport function isWhatsAppError(error: unknown): error is WhatsAppError {\n  return error instanceof WhatsAppError;\n}\n\n/**\n * Check if error is a WhatsApp API error\n */\nexport function isWhatsAppApiError(error: unknown): error is WhatsAppApiError {\n  return error instanceof WhatsAppApiError;\n}\n\n/**\n * Check if error is a WhatsApp validation error\n */\nexport function isWhatsAppValidationError(\n  error: unknown,\n): error is WhatsAppValidationError {\n  return error instanceof WhatsAppValidationError;\n}\n\n/**\n * Check if error is a WhatsApp rate limit error\n */\nexport function isWhatsAppRateLimitError(\n  error: unknown,\n): error is WhatsAppRateLimitError {\n  return error instanceof WhatsAppRateLimitError;\n}\n\n/**\n * Check if error is a WhatsApp network error\n */\nexport function isWhatsAppNetworkError(\n  error: unknown,\n): error is WhatsAppNetworkError {\n  return error instanceof WhatsAppNetworkError;\n}\n\n/**\n * Check if error is a WhatsApp authentication error\n */\nexport function isWhatsAppAuthError(\n  error: unknown,\n): error is WhatsAppAuthError {\n  return error instanceof WhatsAppAuthError;\n}\n\n// ==================== Error Utilities ====================\n\n/**\n * Create error from API response\n */\nexport function createErrorFromApiResponse(\n  response: { status: number; data?: Record<string, unknown> },\n  traceId?: string,\n): WhatsAppError {\n  const { status, data } = response;\n\n  if (status === HTTP_UNAUTHORIZED) {\n    return WhatsAppAuthError.invalidToken();\n  }\n\n  if (status === MAGIC_429) {\n    const retryAfter =\n      (data as Record<string, unknown>)?.error &&\n      typeof (data as Record<string, unknown>).error === 'object'\n        ? ((data as Record<string, unknown>).error as Record<string, unknown>)\n            .retry_after\n        : undefined;\n    const retryAfterNumber =\n      typeof retryAfter === 'number' ? retryAfter : undefined;\n    return new WhatsAppRateLimitError('Rate limit exceeded', retryAfterNumber);\n  }\n\n  if (data?.error) {\n    const errorMessage =\n      typeof data.error === 'object' &&\n      data.error !== null &&\n      'message' in data.error\n        ? (data.error as Record<string, unknown>).message || 'API Error'\n        : 'API Error';\n    return new WhatsAppApiError(\n      errorMessage as string,\n      status,\n      data.error,\n      traceId,\n    );\n  }\n\n  return new WhatsAppError(\n    `HTTP ${status} Error`,\n    status,\n    'HttpError',\n    undefined,\n    traceId,\n  );\n}\n\n/**\n * Get error severity level\n */\nexport function getErrorSeverity(\n  error: WhatsAppError,\n): 'low' | 'medium' | 'high' | 'critical' {\n  if (error instanceof WhatsAppAuthError) return 'critical';\n  if (error instanceof WhatsAppValidationError) return 'medium';\n  if (error instanceof WhatsAppRateLimitError) return 'medium';\n  if (error instanceof WhatsAppNetworkError)\n    return error.isTimeout ? 'medium' : 'high';\n  if (error instanceof WhatsAppApiError) {\n    return error.code >= 500 ? 'high' : 'medium';\n  }\n  return 'medium';\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-service-interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-service-monitoring.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-service-types.ts","messages":[{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/whatsapp-service-config' import is duplicated.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":24,"endColumn":42},{"ruleId":"no-duplicate-imports","severity":2,"message":"'@/types/whatsapp-service-errors' import is duplicated.","line":29,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":34,"endColumn":42}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å¯¼å…¥ä¸»è¦ç±»å‹ç”¨äºå‘åå…¼å®¹\nimport { DEFAULT_SERVICE_OPTIONS } from '@/types/whatsapp-service-config';\nimport { PERCENTAGE_FULL, ZERO } from '@/constants';\n\nimport type {\n  Cache,\n  CacheConfig,\n  CacheEntry,\n  CircuitBreakerConfig,\n  CircuitBreakerState,\n  DEFAULT_CACHE_CONFIG,\n  DEFAULT_CIRCUIT_BREAKER_CONFIG,\n  DEFAULT_RETRY_CONFIG,\n  LogEntry,\n  Logger,\n  LogLevel,\n  MessageStatus,\n  MessageType,\n  RetryConfig,\n  ServiceEnvironment,\n  ServiceEnvironmentConfig,\n  WhatsAppConfig,\n  WhatsAppServiceOptions,\n} from '@/types/whatsapp-service-config';\nimport type {\n  WhatsAppError,\n  WhatsAppValidationError,\n} from '@/types/whatsapp-service-errors';\nimport {\n  WhatsAppApiError,\n  WhatsAppAuthError,\n  WhatsAppNetworkError,\n  WhatsAppRateLimitError,\n} from '@/types/whatsapp-service-errors';\nimport type {\n  ApiRequest,\n  ApiResponse,\n  MessageRequest,\n  MessageResponse,\n  PluginManager,\n  ServiceBuilder,\n  ServiceFactory,\n  ServicePlugin,\n  WebhookConfig,\n  WebhookHandler,\n  WhatsAppServiceInterface,\n} from '@/types/whatsapp-service-interface';\nimport type {\n  ErrorEvent,\n  HealthCheckEvent,\n  MessageDeliveredEvent,\n  MessageFailedEvent,\n  MessageReadEvent,\n  MessageSentEvent,\n  RateLimitEvent,\n  ServiceEvent,\n  ServiceHealth,\n  ServiceMetrics,\n  ServiceStatus,\n  WhatsAppServiceEvent,\n} from '@/types/whatsapp-service-monitoring';\n\n/**\n * WhatsApp Service Types - Main Entry Point\n * WhatsApp Service Configuration and Error Type Definitions\n *\n * ç»Ÿä¸€çš„WhatsAppæœåŠ¡ç±»å‹å®šä¹‰å…¥å£ï¼Œæ•´åˆæ‰€æœ‰å­æ¨¡å—åŠŸèƒ½\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„ç±»å‹å’ŒåŠŸèƒ½\nexport { isWhatsAppService } from '@/types/whatsapp-service-interface';\nexport {\n  mergeWithDefaults, validateServiceOptions, validateWhatsAppConfig\n} from '@/types/whatsapp-service-config';\nexport {\n  createErrorFromApiResponse,\n  getErrorSeverity, isWhatsAppApiError, isWhatsAppAuthError, isWhatsAppError, isWhatsAppNetworkError, isWhatsAppRateLimitError, isWhatsAppValidationError\n} from '@/types/whatsapp-service-errors';\nexport type {\n  Config, Health,\n  Metrics, ServiceError, ServiceInterface, ServiceOptions,\n  Status\n} from '@/types/whatsapp-service-interface';\nexport {\n  calculateErrorRate, calculateUptime, createDefaultHealth, createDefaultMetrics, determineHealthStatus, needsAttention, updateMetrics\n} from '@/types/whatsapp-service-monitoring';\nexport type {\n  AlertConfig, HealthCheckConfig,\n  MetricsConfig\n} from '@/types/whatsapp-service-monitoring';\n\n// ==================== å‘åå…¼å®¹çš„å¸¸é‡å¯¼å‡º ====================\n\n/**\n * å‘åå…¼å®¹çš„å¸¸é‡å¯¼å‡º\n * Backward compatible constant exports\n */\nexport {\n  DEFAULT_SERVICE_OPTIONS, type DEFAULT_CACHE_CONFIG, type DEFAULT_CIRCUIT_BREAKER_CONFIG, type DEFAULT_RETRY_CONFIG\n};\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\n  export type {\n    ApiRequest,\n    ApiResponse, Cache, CacheConfig,\n    CacheEntry, CircuitBreakerConfig,\n    CircuitBreakerState, ErrorEvent,\n    HealthCheckEvent, LogEntry,\n    Logger, LogLevel, MessageDeliveredEvent, MessageFailedEvent, MessageReadEvent, MessageRequest,\n    MessageResponse, MessageSentEvent, MessageStatus, MessageType, PluginManager, RateLimitEvent, RetryConfig, ServiceBuilder, ServiceEnvironment, ServiceEnvironmentConfig, ServiceEvent, ServiceFactory, ServiceHealth,\n    ServiceMetrics, ServicePlugin, ServiceStatus, WebhookConfig, WebhookHandler, WhatsAppConfig, WhatsAppServiceEvent,\n    WhatsAppServiceInterface, WhatsAppServiceOptions\n  };\n\n// ==================== å‘åå…¼å®¹çš„ç±»å¯¼å‡º ====================\n\n/**\n * å‘åå…¼å®¹çš„é”™è¯¯ç±»å¯¼å‡º\n * Backward compatible error class exports\n */\n  export {\n    WhatsAppApiError, WhatsAppAuthError, WhatsAppNetworkError, WhatsAppRateLimitError, type WhatsAppError, type WhatsAppValidationError\n  };\n\n// ==================== ä¾¿æ·å·¥å‚å‡½æ•° ====================\n\n/**\n * åˆ›å»ºé»˜è®¤é…ç½®\n * Create default configuration\n */\nexport function createDefaultConfig(): WhatsAppConfig {\n  return {\n    accessToken: '',\n    phoneNumberId: '',\n    verifyToken: '',\n    apiVersion: 'v18.0',\n  };\n}\n\n/**\n * åˆ›å»ºé»˜è®¤æœåŠ¡é€‰é¡¹\n * Create default service options\n */\nexport function createDefaultServiceOptions(): Required<WhatsAppServiceOptions> {\n  return { ...DEFAULT_SERVICE_OPTIONS };\n}\n\n/**\n * åˆ›å»ºé»˜è®¤æœåŠ¡çŠ¶æ€\n * Create default service status\n */\nexport function createDefaultServiceStatus(): ServiceStatus {\n  return {\n    isInitialized: false,\n    isConnected: false,\n    lastActivity: Date.now(),\n    health: {\n      status: 'healthy',\n      lastCheck: Date.now(),\n      responseTime: ZERO,\n      errorRate: ZERO,\n      uptime: PERCENTAGE_FULL,\n      details: {\n        api: 'available',\n        webhook: 'not_configured',\n        phoneNumber: 'unverified',\n      },\n    },\n    metrics: {\n      messagesSent: ZERO,\n      messagesDelivered: ZERO,\n      messagesRead: ZERO,\n      messagesFailed: ZERO,\n      apiCalls: ZERO,\n      apiErrors: ZERO,\n      averageResponseTime: ZERO,\n      uptime: PERCENTAGE_FULL,\n      lastReset: Date.now(),\n    },\n    config: {\n      phoneNumberId: '',\n      apiVersion: 'v18.0',\n      webhookConfigured: false,\n    },\n  };\n}\n\n// ==================== é»˜è®¤å¯¼å‡º ====================\n\n/**\n * é»˜è®¤å¯¼å‡ºä¸»è¦é…ç½®ç±»å‹\n * Default export main configuration type\n */\nexport type { WhatsAppConfig as default };\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-template-types.ts","messages":[{"ruleId":"complexity","severity":2,"message":"Function 'validateTemplateParameter' has a complexity of 19. Maximum allowed is 15.","line":229,"column":8,"nodeType":"FunctionDeclaration","messageId":"complex","endLine":279,"endColumn":2},{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":239,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":272,"endColumn":4}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ZERO } from \"@/constants\";\n\n/**\n * WhatsApp Template Message Type Definitions\n *\n * This module provides type definitions for WhatsApp Business API template messages,\n * including template parameters, components, and language settings.\n */\n\n// Template Parameter Types\nexport interface TemplateParameter {\n  type: 'text' | 'currency' | 'date_time' | 'image' | 'document' | 'video';\n  text?: string;\n  currency?: {\n    fallback_value: string;\n    code: string;\n    amount_1000: number;\n  };\n  date_time?: {\n    fallback_value: string;\n  };\n  image?: {\n    id?: string;\n    link?: string;\n  };\n  document?: {\n    id?: string;\n    link?: string;\n    filename?: string;\n  };\n  video?: {\n    id?: string;\n    link?: string;\n  };\n}\n\n// Template Component Types\nexport interface TemplateComponent {\n  type: 'header' | 'body' | 'footer' | 'button';\n  sub_type?: 'quick_reply' | 'url' | 'phone_number';\n  index?: number;\n  parameters?: TemplateParameter[];\n}\n\n// Template Language Configuration\nexport interface TemplateLanguage {\n  policy: 'deterministic';\n  code: string;\n}\n\n// Main Template Message Structure\nexport interface TemplateMessage {\n  name: string;\n  language: TemplateLanguage;\n  components?: TemplateComponent[];\n}\n\n// Extended Template Types\nexport interface HeaderComponent extends TemplateComponent {\n  type: 'header';\n  parameters?: Array<\n    TemplateParameter & {\n      type: 'text' | 'image' | 'document' | 'video';\n    }\n  >;\n}\n\nexport interface BodyComponent extends TemplateComponent {\n  type: 'body';\n  parameters?: Array<\n    TemplateParameter & {\n      type: 'text' | 'currency' | 'date_time';\n    }\n  >;\n}\n\nexport interface FooterComponent extends TemplateComponent {\n  type: 'footer';\n  parameters?: Array<\n    TemplateParameter & {\n      type: 'text';\n    }\n  >;\n}\n\nexport interface ButtonComponent extends TemplateComponent {\n  type: 'button';\n  sub_type: 'quick_reply' | 'url' | 'phone_number';\n  index: number;\n  parameters?: Array<\n    TemplateParameter & {\n      type: 'text';\n    }\n  >;\n}\n\n// Template Builder Types\nexport interface TemplateBuilder {\n  name: string;\n  language: string;\n  components: TemplateComponent[];\n}\n\nexport interface TemplateValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\n// Template Parameter Builder Helpers\nexport interface TextParameterBuilder {\n  type: 'text';\n  text: string;\n}\n\nexport interface CurrencyParameterBuilder {\n  type: 'currency';\n  fallback_value: string;\n  code: string;\n  amount_1000: number;\n}\n\nexport interface DateTimeParameterBuilder {\n  type: 'date_time';\n  fallback_value: string;\n}\n\nexport interface MediaParameterBuilder {\n  type: 'image' | 'document' | 'video';\n  id?: string;\n  link?: string;\n  filename?: string; // Only for documents\n}\n\n// Template Utility Types\nexport type TemplateComponentType = TemplateComponent['type'];\nexport type TemplateParameterType = TemplateParameter['type'];\nexport type ButtonSubType = ButtonComponent['sub_type'];\n\n// Template Constants\nexport const TEMPLATE_COMPONENT_TYPES = [\n  'header',\n  'body',\n  'footer',\n  'button',\n] as const;\n\nexport const TEMPLATE_PARAMETER_TYPES = [\n  'text',\n  'currency',\n  'date_time',\n  'image',\n  'document',\n  'video',\n] as const;\n\nexport const BUTTON_SUB_TYPES = ['quick_reply', 'url', 'phone_number'] as const;\n\nexport const SUPPORTED_LANGUAGE_CODES = [\n  'en_US', // English (US)\n  'en_GB', // English (UK)\n  'es_ES', // Spanish (Spain)\n  'es_MX', // Spanish (Mexico)\n  'pt_BR', // Portuguese (Brazil)\n  'fr_FR', // French (France)\n  'de_DE', // German (Germany)\n  'it_IT', // Italian (Italy)\n  'ru_RU', // Russian (Russia)\n  'ar_AR', // Arabic\n  'hi_IN', // Hindi (India)\n  'zh_CN', // Chinese (Simplified)\n  'zh_TW', // Chinese (Traditional)\n  'ja_JP', // Japanese (Japan)\n  'ko_KR', // Korean (South Korea)\n] as const;\n\n// Type Guards\nexport function isValidTemplateComponentType(\n  type: string,\n): type is TemplateComponentType {\n  return TEMPLATE_COMPONENT_TYPES.includes(type as TemplateComponentType);\n}\n\nexport function isValidTemplateParameterType(\n  type: string,\n): type is TemplateParameterType {\n  return TEMPLATE_PARAMETER_TYPES.includes(type as TemplateParameterType);\n}\n\nexport function isValidButtonSubType(\n  subType: string,\n): subType is ButtonSubType {\n  return BUTTON_SUB_TYPES.includes(subType as ButtonSubType);\n}\n\nexport function isValidLanguageCode(\n  code: string,\n): code is (typeof SUPPORTED_LANGUAGE_CODES)[number] {\n  return SUPPORTED_LANGUAGE_CODES.includes(\n    code as (typeof SUPPORTED_LANGUAGE_CODES)[number],\n  );\n}\n\nexport function isHeaderComponent(\n  component: TemplateComponent,\n): component is HeaderComponent {\n  return component.type === 'header';\n}\n\nexport function isBodyComponent(\n  component: TemplateComponent,\n): component is BodyComponent {\n  return component.type === 'body';\n}\n\nexport function isFooterComponent(\n  component: TemplateComponent,\n): component is FooterComponent {\n  return component.type === 'footer';\n}\n\nexport function isButtonComponent(\n  component: TemplateComponent,\n): component is ButtonComponent {\n  return component.type === 'button';\n}\n\n// Template Validation Functions\nexport function validateTemplateParameter(\n  parameter: TemplateParameter,\n): TemplateValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!isValidTemplateParameterType(parameter.type)) {\n    errors.push(`Invalid parameter type: ${parameter.type}`);\n  }\n\n  switch (parameter.type) {\n    case 'text':\n      if (!parameter.text) {\n        errors.push('Text parameter must have text value');\n      }\n      break;\n    case 'currency':\n      if (!parameter.currency) {\n        errors.push('Currency parameter must have currency object');\n      } else {\n        if (!parameter.currency.code) {\n          errors.push('Currency parameter must have currency code');\n        }\n        if (!parameter.currency.fallback_value) {\n          errors.push('Currency parameter must have fallback value');\n        }\n        if (typeof parameter.currency.amount_1000 !== 'number') {\n          errors.push('Currency parameter must have numeric amount_1000');\n        }\n      }\n      break;\n    case 'date_time':\n      if (!parameter.date_time?.fallback_value) {\n        errors.push('Date time parameter must have fallback value');\n      }\n      break;\n    case 'image':\n    case 'document':\n    case 'video':\n      if (!parameter[parameter.type]?.id && !parameter[parameter.type]?.link) {\n        errors.push(`${parameter.type} parameter must have either id or link`);\n      }\n      break;\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\nexport function validateTemplateComponent(\n  component: TemplateComponent,\n): TemplateValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!isValidTemplateComponentType(component.type)) {\n    errors.push(`Invalid component type: ${component.type}`);\n  }\n\n  if (component.type === 'button') {\n    if (!component.sub_type) {\n      errors.push('Button component must have sub_type');\n    } else if (!isValidButtonSubType(component.sub_type)) {\n      errors.push(`Invalid button sub_type: ${component.sub_type}`);\n    }\n\n    if (typeof component.index !== 'number') {\n      errors.push('Button component must have numeric index');\n    }\n  }\n\n  if (component.parameters) {\n    component.parameters.forEach((param, index) => {\n      const paramValidation = validateTemplateParameter(param);\n      if (!paramValidation.isValid) {\n        errors.push(\n          ...paramValidation.errors.map((err) => `Parameter ${index}: ${err}`),\n        );\n      }\n      warnings.push(\n        ...paramValidation.warnings.map(\n          (warn) => `Parameter ${index}: ${warn}`,\n        ),\n      );\n    });\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\nexport function validateTemplateMessage(\n  template: TemplateMessage,\n): TemplateValidationResult {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!template.name) {\n    errors.push('Template must have a name');\n  }\n\n  if (!template.language?.code) {\n    errors.push('Template must have language code');\n  } else if (!isValidLanguageCode(template.language.code)) {\n    warnings.push(\n      `Language code ${template.language.code} may not be supported`,\n    );\n  }\n\n  if (template.language?.policy !== 'deterministic') {\n    errors.push('Template language policy must be \"deterministic\"');\n  }\n\n  if (template.components) {\n    template.components.forEach((component, index) => {\n      const componentValidation = validateTemplateComponent(component);\n      if (!componentValidation.isValid) {\n        errors.push(\n          ...componentValidation.errors.map(\n            (err) => `Component ${index}: ${err}`,\n          ),\n        );\n      }\n      warnings.push(\n        ...componentValidation.warnings.map(\n          (warn) => `Component ${index}: ${warn}`,\n        ),\n      );\n    });\n  }\n\n  return {\n    isValid: errors.length === ZERO,\n    errors,\n    warnings,\n  };\n}\n\n// Template Builder Helper Functions\nexport function createTextParameter(text: string): TextParameterBuilder {\n  return {\n    type: 'text',\n    text,\n  };\n}\n\nexport function createCurrencyParameter(\n  code: string,\n  amount_1000: number,\n  fallback_value: string,\n): CurrencyParameterBuilder {\n  return {\n    type: 'currency',\n    code,\n    amount_1000,\n    fallback_value,\n  };\n}\n\nexport function createDateTimeParameter(\n  fallback_value: string,\n): DateTimeParameterBuilder {\n  return {\n    type: 'date_time',\n    fallback_value,\n  };\n}\n\nexport function createMediaParameter(\n  type: 'image' | 'document' | 'video',\n  options: { id?: string; link?: string; filename?: string },\n): MediaParameterBuilder {\n  return {\n    type,\n    ...options,\n  };\n}\n\n// Export commonly used types with shorter names\nexport type {\n  TemplateComponent as Component, TemplateLanguage as Language, TemplateParameter as Parameter, TemplateMessage as Template\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-messages.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":466,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":466,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9535,9538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9535,9538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WhatsApp Webhook æ¶ˆæ¯ç±»å‹å®šä¹‰\n * WhatsApp Webhook Message Type Definitions\n *\n * æä¾›å„ç§ç±»å‹çš„WhatsAppå…¥ç«™æ¶ˆæ¯ç±»å‹å®šä¹‰\n */\n\nimport type { WhatsAppMessage } from '@/types/whatsapp-base-types';\nimport type { MessageContext } from '@/types/whatsapp-webhook-base';\n\n/**\n * å…¥ç«™æ–‡æœ¬æ¶ˆæ¯\n * Incoming text message\n */\nexport interface IncomingTextMessage extends WhatsAppMessage {\n  type: 'text';\n  text: {\n    body: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™å›¾ç‰‡æ¶ˆæ¯\n * Incoming image message\n */\nexport interface IncomingImageMessage extends WhatsAppMessage {\n  type: 'image';\n  image: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™æ–‡æ¡£æ¶ˆæ¯\n * Incoming document message\n */\nexport interface IncomingDocumentMessage extends WhatsAppMessage {\n  type: 'document';\n  document: {\n    id: string;\n    filename: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™éŸ³é¢‘æ¶ˆæ¯\n * Incoming audio message\n */\nexport interface IncomingAudioMessage extends WhatsAppMessage {\n  type: 'audio';\n  audio: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    voice?: boolean;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™è§†é¢‘æ¶ˆæ¯\n * Incoming video message\n */\nexport interface IncomingVideoMessage extends WhatsAppMessage {\n  type: 'video';\n  video: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    caption?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™ä½ç½®æ¶ˆæ¯\n * Incoming location message\n */\nexport interface IncomingLocationMessage extends WhatsAppMessage {\n  type: 'location';\n  location: {\n    latitude: number;\n    longitude: number;\n    name?: string;\n    address?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™è”ç³»äººæ¶ˆæ¯\n * Incoming contacts message\n */\nexport interface IncomingContactsMessage extends WhatsAppMessage {\n  type: 'contacts';\n  contacts: Array<{\n    name: {\n      formatted_name: string;\n      first_name?: string;\n      last_name?: string;\n      middle_name?: string;\n      suffix?: string;\n      prefix?: string;\n    };\n    phones?: Array<{\n      phone: string;\n      type?: string;\n      wa_id?: string;\n    }>;\n    emails?: Array<{\n      email: string;\n      type?: string;\n    }>;\n    urls?: Array<{\n      url: string;\n      type?: string;\n    }>;\n    addresses?: Array<{\n      street?: string;\n      city?: string;\n      state?: string;\n      zip?: string;\n      country?: string;\n      country_code?: string;\n      type?: string;\n    }>;\n    org?: {\n      company?: string;\n      department?: string;\n      title?: string;\n    };\n    birthday?: string;\n  }>;\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™äº¤äº’å¼æ¶ˆæ¯\n * Incoming interactive message\n */\nexport interface IncomingInteractiveMessage extends WhatsAppMessage {\n  type: 'interactive';\n  interactive: {\n    type: 'button_reply' | 'list_reply';\n    button_reply?: {\n      id: string;\n      title: string;\n    };\n    list_reply?: {\n      id: string;\n      title: string;\n      description?: string;\n    };\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™ååº”æ¶ˆæ¯\n * Incoming reaction message\n */\nexport interface IncomingReactionMessage extends WhatsAppMessage {\n  type: 'reaction';\n  reaction: {\n    message_id: string;\n    emoji: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™è´´çº¸æ¶ˆæ¯\n * Incoming sticker message\n */\nexport interface IncomingStickerMessage extends WhatsAppMessage {\n  type: 'sticker';\n  sticker: {\n    id: string;\n    mime_type: string;\n    sha256: string;\n    animated?: boolean;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™è®¢å•æ¶ˆæ¯\n * Incoming order message\n */\nexport interface IncomingOrderMessage extends WhatsAppMessage {\n  type: 'order';\n  order: {\n    catalog_id: string;\n    product_items: Array<{\n      product_retailer_id: string;\n      quantity: number;\n      item_price: number;\n      currency: string;\n    }>;\n    text?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™ç³»ç»Ÿæ¶ˆæ¯\n * Incoming system message\n */\nexport interface IncomingSystemMessage extends WhatsAppMessage {\n  type: 'system';\n  system: {\n    body: string;\n    new_wa_id?: string;\n    wa_id?: string;\n    type: 'customer_changed_number' | 'customer_identity_changed';\n    customer?: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™æŒ‰é’®æ¶ˆæ¯\n * Incoming button message\n */\nexport interface IncomingButtonMessage extends WhatsAppMessage {\n  type: 'button';\n  button: {\n    text: string;\n    payload: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™æ¨¡æ¿æ¶ˆæ¯å›å¤\n * Incoming template message reply\n */\nexport interface IncomingTemplateReply extends WhatsAppMessage {\n  type: 'template_reply';\n  template_reply: {\n    template_name: string;\n    template_id: string;\n    button_text: string;\n    button_payload: string;\n  };\n  context?: MessageContext;\n}\n\n/**\n * å…¥ç«™WhatsAppæ¶ˆæ¯è”åˆç±»å‹\n * Union type for incoming WhatsApp messages\n */\nexport type IncomingWhatsAppMessage =\n  | IncomingTextMessage\n  | IncomingImageMessage\n  | IncomingDocumentMessage\n  | IncomingAudioMessage\n  | IncomingVideoMessage\n  | IncomingLocationMessage\n  | IncomingContactsMessage\n  | IncomingInteractiveMessage\n  | IncomingReactionMessage\n  | IncomingStickerMessage\n  | IncomingOrderMessage\n  | IncomingSystemMessage\n  | IncomingButtonMessage\n  | IncomingTemplateReply;\n\n/**\n * æ¶ˆæ¯ç±»å‹å¸¸é‡\n * Message type constants\n */\nexport const INCOMING_MESSAGE_TYPES = [\n  'text',\n  'image',\n  'document',\n  'audio',\n  'video',\n  'location',\n  'contacts',\n  'interactive',\n  'reaction',\n  'sticker',\n  'order',\n  'system',\n  'button',\n  'template_reply',\n] as const;\n\nexport const MEDIA_MESSAGE_TYPES = [\n  'image',\n  'document',\n  'audio',\n  'video',\n  'sticker',\n] as const;\n\nexport const INTERACTIVE_MESSAGE_TYPES = [\n  'interactive',\n  'button',\n  'template_reply',\n] as const;\n\n/**\n * æ¶ˆæ¯ç±»å‹\n * Message types\n */\nexport type IncomingMessageType = (typeof INCOMING_MESSAGE_TYPES)[number];\nexport type MediaMessageType = (typeof MEDIA_MESSAGE_TYPES)[number];\nexport type InteractiveMessageType = (typeof INTERACTIVE_MESSAGE_TYPES)[number];\n\n/**\n * ç±»å‹å®ˆå«å‡½æ•°\n * Type guard functions\n */\nexport function isTextMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingTextMessage {\n  return message.type === 'text';\n}\n\nexport function isImageMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingImageMessage {\n  return message.type === 'image';\n}\n\nexport function isDocumentMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingDocumentMessage {\n  return message.type === 'document';\n}\n\nexport function isAudioMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingAudioMessage {\n  return message.type === 'audio';\n}\n\nexport function isVideoMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingVideoMessage {\n  return message.type === 'video';\n}\n\nexport function isLocationMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingLocationMessage {\n  return message.type === 'location';\n}\n\nexport function isContactsMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingContactsMessage {\n  return message.type === 'contacts';\n}\n\nexport function isInteractiveMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingInteractiveMessage {\n  return message.type === 'interactive';\n}\n\nexport function isReactionMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingReactionMessage {\n  return message.type === 'reaction';\n}\n\nexport function isStickerMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingStickerMessage {\n  return message.type === 'sticker';\n}\n\nexport function isOrderMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingOrderMessage {\n  return message.type === 'order';\n}\n\nexport function isSystemMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingSystemMessage {\n  return message.type === 'system';\n}\n\nexport function isButtonMessage(\n  message: IncomingWhatsAppMessage,\n): message is IncomingButtonMessage {\n  return message.type === 'button';\n}\n\nexport function isTemplateReply(\n  message: IncomingWhatsAppMessage,\n): message is IncomingTemplateReply {\n  return message.type === 'template_reply';\n}\n\nexport function isMediaMessage(\n  message: IncomingWhatsAppMessage,\n): message is\n  | IncomingImageMessage\n  | IncomingDocumentMessage\n  | IncomingAudioMessage\n  | IncomingVideoMessage\n  | IncomingStickerMessage {\n  return MEDIA_MESSAGE_TYPES.includes(message.type as MediaMessageType);\n}\n\nexport function isInteractiveMessageType(\n  message: IncomingWhatsAppMessage,\n): message is\n  | IncomingInteractiveMessage\n  | IncomingButtonMessage\n  | IncomingTemplateReply {\n  return INTERACTIVE_MESSAGE_TYPES.includes(\n    message.type as InteractiveMessageType,\n  );\n}\n\n/**\n * æ¶ˆæ¯å†…å®¹æå–å™¨\n * Message content extractors\n */\nexport function getMessageText(\n  message: IncomingWhatsAppMessage,\n): string | null {\n  switch (message.type) {\n    case 'text':\n      return message.text.body;\n    case 'image':\n    case 'document':\n    case 'video':\n      return message[message.type]?.caption || null;\n    case 'interactive':\n      return (\n        message.interactive.button_reply?.title ||\n        message.interactive.list_reply?.title ||\n        null\n      );\n    case 'button':\n      return message.button.text;\n    case 'template_reply':\n      return message.template_reply.button_text;\n    case 'system':\n      return message.system.body;\n    default:\n      return null;\n  }\n}\n\nexport function getMessageMediaId(\n  message: IncomingWhatsAppMessage,\n): string | null {\n  if (isMediaMessage(message)) {\n    const mediaData = (message as any)[message.type];\n    return mediaData?.id || null;\n  }\n  return null;\n}\n\nexport function hasMessageContext(message: IncomingWhatsAppMessage): boolean {\n  return message.context !== undefined;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WhatsAppContact' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WhatsAppError' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WhatsAppMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CompleteWebhookConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageContext' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WEBHOOK_FIELDS' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookBatchConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookFilterConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookMetadata' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookMonitoringConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookRetryConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookSecurityConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookTransformConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AccountUpdateEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventBatch' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventFilter' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventProcessingConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventStatistics' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageDeliveryEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageReadEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":37,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PhoneNumberQualityEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":40,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SecurityEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TemplateStatusEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserStatusChangeEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":43,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WEBHOOK_EVENT_TYPES' is defined but never used. Allowed unused vars must match /^_/u.","line":44,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'INCOMING_MESSAGE_TYPES' is defined but never used. Allowed unused vars must match /^_/u.","line":50,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IncomingButtonMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":52,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IncomingOrderMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":58,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IncomingSystemMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":61,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IncomingTemplateReply' is defined but never used. Allowed unused vars must match /^_/u.","line":62,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'INTERACTIVE_MESSAGE_TYPES' is defined but never used. Allowed unused vars must match /^_/u.","line":66,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MEDIA_MESSAGE_TYPES' is defined but never used. Allowed unused vars must match /^_/u.","line":67,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createWebhookError' is defined but never used. Allowed unused vars must match /^_/u.","line":70,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createWebhookVerificationResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":71,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":71,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isRetryableError' is defined but never used. Allowed unused vars must match /^_/u.","line":72,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isTimestampValid' is defined but never used. Allowed unused vars must match /^_/u.","line":73,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isWebhookVerificationRequest' is defined but never used. Allowed unused vars must match /^_/u.","line":74,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WebhookUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":75,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// å‘åå…¼å®¹çš„é‡æ–°å¯¼å‡º\nimport type {\n  MessageStatus,\n  WhatsAppContact,\n  WhatsAppError,\n  WhatsAppMessage,\n} from '@/types/whatsapp-base-types';\nimport type {\n  CompleteWebhookConfig,\n  MessageContext,\n  MessageStatusUpdate,\n  WEBHOOK_FIELDS,\n  WebhookBatchConfig,\n  WebhookConfig,\n  WebhookEntry,\n  WebhookError,\n  WebhookFilterConfig,\n  WebhookMetadata,\n  WebhookMonitoringConfig,\n  WebhookPayload,\n  WebhookProcessingResult,\n  WebhookRetryConfig,\n  WebhookSecurityConfig,\n  WebhookStatus,\n  WebhookSubscription,\n  WebhookTransformConfig,\n  WebhookVerificationRequest,\n  WebhookVerificationResponse,\n} from '@/types/whatsapp-webhook-base';\nimport type {\n  AccountUpdateEvent,\n  EventBatch,\n  EventFilter,\n  EventProcessingConfig,\n  EventStatistics,\n  MessageDeliveryEvent,\n  MessageReadEvent,\n  MessageReceivedEvent,\n  MessageStatusEvent,\n  PhoneNumberQualityEvent,\n  SecurityEvent,\n  TemplateStatusEvent,\n  UserStatusChangeEvent,\n  WEBHOOK_EVENT_TYPES,\n  WebhookErrorEvent,\n  WebhookEvent,\n  WebhookProcessor,\n} from '@/types/whatsapp-webhook-events';\nimport type {\n  INCOMING_MESSAGE_TYPES,\n  IncomingAudioMessage,\n  IncomingButtonMessage,\n  IncomingContactsMessage,\n  IncomingDocumentMessage,\n  IncomingImageMessage,\n  IncomingInteractiveMessage,\n  IncomingLocationMessage,\n  IncomingOrderMessage,\n  IncomingReactionMessage,\n  IncomingStickerMessage,\n  IncomingSystemMessage,\n  IncomingTemplateReply,\n  IncomingTextMessage,\n  IncomingVideoMessage,\n  IncomingWhatsAppMessage,\n  INTERACTIVE_MESSAGE_TYPES,\n  MEDIA_MESSAGE_TYPES,\n} from '@/types/whatsapp-webhook-messages';\nimport {\n  createWebhookError,\n  createWebhookVerificationResponse,\n  isRetryableError,\n  isTimestampValid,\n  isWebhookVerificationRequest,\n  WebhookUtils,\n} from '@/types/whatsapp-webhook-utils';\n\n/**\n * WhatsApp Webhook ç±»å‹å®šä¹‰ - ä¸»å…¥å£\n * WhatsApp Webhook Type Definitions - Main Entry Point\n *\n * ç»Ÿä¸€çš„WhatsApp Business API webhookç±»å‹å…¥å£ï¼Œæ•´åˆæ‰€æœ‰webhookç›¸å…³ç±»å‹å®šä¹‰\n */\n\n// é‡æ–°å¯¼å‡ºæ‰€æœ‰æ¨¡å—çš„åŠŸèƒ½ - ç±»å‹å¯¼å‡º\nexport type {\n  WebhookEntry,\n  WebhookPayload,\n  MessageStatusUpdate,\n  WebhookError,\n  MessageContext,\n  WebhookVerificationRequest,\n  WebhookVerificationResponse,\n  WebhookConfig,\n  WebhookSubscription,\n  WebhookProcessingResult,\n  WebhookSecurityConfig,\n  WebhookRetryConfig,\n  WebhookMonitoringConfig,\n  WebhookStatus,\n  WebhookMetadata,\n  WebhookBatchConfig,\n  WebhookFilterConfig,\n  WebhookTransformConfig,\n  CompleteWebhookConfig,\n  WebhookField,\n  WebhookObjectType,\n  WebhookChangeField,\n} from '@/types/whatsapp-webhook-base';\n\n// å¸¸é‡å’Œå‡½æ•°å¯¼å‡º\nexport {\n  WEBHOOK_FIELDS,\n  WEBHOOK_OBJECT_TYPES,\n  WEBHOOK_CHANGE_FIELDS,\n  isWebhookPayload,\n  isWebhookEntry,\n  isMessageStatusUpdate,\n  isWebhookError,\n  isWebhookVerificationRequest,\n} from '@/types/whatsapp-webhook-base';\n\nexport type {\n  IncomingTextMessage,\n  IncomingImageMessage,\n  IncomingDocumentMessage,\n  IncomingAudioMessage,\n  IncomingVideoMessage,\n  IncomingLocationMessage,\n  IncomingContactsMessage,\n  IncomingInteractiveMessage,\n  IncomingReactionMessage,\n  IncomingStickerMessage,\n  IncomingOrderMessage,\n  IncomingSystemMessage,\n  IncomingButtonMessage,\n  IncomingTemplateReply,\n  IncomingWhatsAppMessage,\n  IncomingMessageType,\n  MediaMessageType,\n  InteractiveMessageType,\n} from '@/types/whatsapp-webhook-messages';\n\nexport {\n  INCOMING_MESSAGE_TYPES,\n  MEDIA_MESSAGE_TYPES,\n  INTERACTIVE_MESSAGE_TYPES,\n  isTextMessage,\n  isImageMessage,\n  isDocumentMessage,\n  isAudioMessage,\n  isVideoMessage,\n  isLocationMessage,\n  isContactsMessage,\n  isInteractiveMessage,\n  isReactionMessage,\n  isStickerMessage,\n  isOrderMessage,\n  isSystemMessage,\n  isButtonMessage,\n  isTemplateReply,\n  isMediaMessage,\n  isInteractiveMessageType,\n  getMessageText,\n  getMessageMediaId,\n  hasMessageContext,\n} from '@/types/whatsapp-webhook-messages';\n\nexport type {\n  MessageReceivedEvent,\n  MessageStatusEvent,\n  WebhookErrorEvent,\n  MessageReadEvent,\n  MessageDeliveryEvent,\n  UserStatusChangeEvent,\n  AccountUpdateEvent,\n  TemplateStatusEvent,\n  PhoneNumberQualityEvent,\n  SecurityEvent,\n  WebhookEvent,\n  WebhookProcessor,\n  EventFilter,\n  EventProcessingConfig,\n  EventStatistics,\n  EventBatch,\n  WebhookEventType,\n  MessageEventType,\n  SystemEventType,\n} from '@/types/whatsapp-webhook-events';\n\nexport {\n  WEBHOOK_EVENT_TYPES,\n  MESSAGE_EVENT_TYPES,\n  SYSTEM_EVENT_TYPES,\n  isMessageReceivedEvent,\n  isMessageStatusEvent,\n  isMessageReadEvent,\n  isMessageDeliveryEvent,\n  isUserStatusChangeEvent,\n  isAccountUpdateEvent,\n  isTemplateStatusEvent,\n  isPhoneNumberQualityEvent,\n  isSecurityEvent,\n  isWebhookErrorEvent,\n  isMessageEvent,\n  isSystemEvent,\n  getEventPriority,\n  shouldRetryEvent,\n  getEventTimestamp,\n  isEventExpired,\n} from '@/types/whatsapp-webhook-events';\n\nexport type {\n  WebhookParsingResult,\n  WebhookValidationResult,\n  SignatureVerificationConfig,\n  WebhookProcessingContext,\n  WebhookResponseConfig,\n  DeduplicationConfig,\n  RateLimitConfig,\n  WebhookHealthCheck,\n  WebhookDebugInfo,\n  EventAggregationResult,\n  WebhookUtils,\n} from '@/types/whatsapp-webhook-utils';\n\nexport {\n  createWebhookVerificationResponse,\n  createWebhookError,\n  isRetryableError,\n  isTimestampValid,\n} from '@/types/whatsapp-webhook-utils';\n\n// ==================== å‘åå…¼å®¹çš„ç±»å‹åˆ«å ====================\n\n/**\n * å‘åå…¼å®¹çš„ç±»å‹åˆ«å\n * Backward compatible type aliases\n */\nexport type {\n  // åŸºç¡€ç±»å‹\n  WebhookPayload as Webhook,\n  WebhookEntry as Entry,\n  MessageStatusUpdate as StatusUpdate,\n  WebhookError as Error,\n\n  // æ¶ˆæ¯ç±»å‹\n  IncomingWhatsAppMessage as IncomingMessage,\n  IncomingTextMessage as TextMessage,\n  IncomingImageMessage as ImageMessage,\n  IncomingDocumentMessage as DocumentMessage,\n  IncomingAudioMessage as AudioMessage,\n  IncomingVideoMessage as VideoMessage,\n  IncomingLocationMessage as LocationMessage,\n  IncomingContactsMessage as ContactsMessage,\n  IncomingInteractiveMessage as InteractiveMessage,\n  IncomingReactionMessage as ReactionMessage,\n  IncomingStickerMessage as StickerMessage,\n\n  // äº‹ä»¶ç±»å‹\n  MessageReceivedEvent as MessageEvent,\n  MessageStatusEvent as StatusEvent,\n  WebhookErrorEvent as ErrorEvent,\n  WebhookEvent as Event,\n\n  // é…ç½®ç±»å‹\n  WebhookConfig as Config,\n  WebhookSubscription as Subscription,\n  WebhookProcessor as Processor,\n  WebhookProcessingResult as ProcessingResult,\n\n  // éªŒè¯ç±»å‹\n  WebhookVerificationRequest as VerificationRequest,\n  WebhookVerificationResponse as VerificationResponse,\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-utils/functions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-utils/interfaces.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp-webhook-utils/webhook-utils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":233,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":233,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":330,"column":17,"nodeType":"MemberExpression","endLine":330,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WhatsApp Webhook å·¥å…·ç±»\n * WhatsApp Webhook Utility Class\n */\n\nimport type { WebhookEntry, WebhookPayload } from '@/types/whatsapp-webhook-base';\nimport { MAGIC_0_95, MAGIC_0_99, ONE, ZERO } from '@/constants';\n\nimport type { IncomingWhatsAppMessage } from '@/types/whatsapp-webhook-messages';\nimport type {\n  EventFilter,\n  EventStatistics,\n  MessageReceivedEvent,\n  WebhookEvent,\n} from '@/types/whatsapp-webhook-events';\nimport type {\n  SignatureVerificationConfig,\n  WebhookParsingResult,\n  WebhookValidationResult,\n} from '@/types/whatsapp-webhook-utils/interfaces';\n\n/**\n * Webhookå·¥å…·å‡½æ•°\n * Webhook utility functions\n */\nexport class WebhookUtils {\n  /**\n   * è§£æWebhookè½½è·ä¸ºäº‹ä»¶\n   * Parse webhook payload into events\n   */\n  static parseWebhookPayload(payload: WebhookPayload): WebhookParsingResult {\n    const startTime = Date.now();\n    const events: WebhookEvent[] = [];\n    const errors: Array<{\n      entry_id?: string;\n      error: string;\n      raw_data?: Record<string, unknown> | string | unknown[];\n    }> = [];\n\n    try {\n      for (const entry of payload.entry) {\n        try {\n          const entryEvents = this.parseWebhookEntry(entry);\n          events.push(...entryEvents);\n        } catch (error) {\n          errors.push({\n            entry_id: entry.id,\n            error:\n              error instanceof Error ? error.message : 'Unknown parsing error',\n            raw_data: entry as unknown as Record<string, unknown>,\n          });\n        }\n      }\n\n      return {\n        success: errors.length === ZERO,\n        events,\n        errors,\n        metadata: {\n          total_entries: payload.entry.length,\n          parsed_entries: payload.entry.length - errors.length,\n          total_events: events.length,\n          parsing_time_ms: Date.now() - startTime,\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        events: [],\n        errors: [\n          {\n            error:\n              error instanceof Error\n                ? error.message\n                : 'Failed to parse webhook payload',\n            raw_data: payload as unknown as Record<string, unknown>,\n          },\n        ],\n        metadata: {\n          total_entries: payload.entry?.length || ZERO,\n          parsed_entries: ZERO,\n          total_events: ZERO,\n          parsing_time_ms: Date.now() - startTime,\n        },\n      };\n    }\n  }\n\n  /**\n   * è§£æå•ä¸ªWebhookæ¡ç›®\n   * Parse single webhook entry\n   */\n  private static parseWebhookEntry(entry: WebhookEntry): WebhookEvent[] {\n    const events: WebhookEvent[] = [];\n    const timestamp = new Date().toISOString();\n\n    for (const change of entry.changes) {\n      const { value } = change;\n      const phoneNumberId = value.metadata.phone_number_id;\n\n      // å¤„ç†æ¶ˆæ¯\n      if (value.messages) {\n        for (const message of value.messages) {\n          const contact = value.contacts?.find((c) => c.wa_id === message.from);\n          const messageEvent: MessageReceivedEvent = {\n            type: 'message_received',\n            timestamp,\n            phone_number_id: phoneNumberId,\n            from: message.from,\n            message: message as IncomingWhatsAppMessage,\n          };\n\n          // åªæœ‰å½“contactå­˜åœ¨æ—¶æ‰è®¾ç½®å¯é€‰å±æ€§\n          if (contact) {\n            messageEvent.contact = contact;\n          }\n\n          events.push(messageEvent);\n        }\n      }\n\n      // å¤„ç†çŠ¶æ€æ›´æ–°\n      if (value.statuses) {\n        for (const status of value.statuses) {\n          events.push({\n            type: 'message_status',\n            timestamp,\n            phone_number_id: phoneNumberId,\n            status_update: status,\n          });\n        }\n      }\n\n      // å¤„ç†é”™è¯¯\n      if (value.errors) {\n        for (const error of value.errors) {\n          events.push({\n            type: 'webhook_error',\n            timestamp,\n            phone_number_id: phoneNumberId,\n            error,\n          });\n        }\n      }\n    }\n\n    return events;\n  }\n\n  /**\n   * éªŒè¯Webhookè½½è·\n   * Validate webhook payload\n   */\n  static validateWebhookPayload(payload: unknown): WebhookValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    // åŸºæœ¬ç»“æ„éªŒè¯\n    if (!payload || typeof payload !== 'object') {\n      errors.push('Payload must be an object');\n      return { is_valid: false, errors, warnings };\n    }\n\n    if (\n      (payload as Record<string, unknown>).object !==\n      'whatsapp_business_account'\n    ) {\n      errors.push('Invalid object type, expected \"whatsapp_business_account\"');\n    }\n\n    if (!Array.isArray((payload as Record<string, unknown>).entry)) {\n      errors.push('Entry must be an array');\n    } else {\n      // éªŒè¯æ¯ä¸ªæ¡ç›®\n      (\n        (payload as Record<string, unknown>).entry as Record<string, unknown>[]\n      ).forEach((entry: Record<string, unknown>, index: number) => {\n        if (!entry.id) {\n          errors.push(`Entry ${index}: Missing id`);\n        }\n        if (!Array.isArray(entry.changes)) {\n          errors.push(`Entry ${index}: Changes must be an array`);\n        } else {\n          (entry.changes as Record<string, unknown>[]).forEach(\n            (change: Record<string, unknown>, changeIndex: number) => {\n              if (!change.value) {\n                errors.push(\n                  `Entry ${index}, Change ${changeIndex}: Missing value`,\n                );\n              }\n              const changeValue = change.value as Record<string, unknown>;\n              const metadata = changeValue?.metadata as Record<string, unknown>;\n              if (!metadata?.phone_number_id) {\n                errors.push(\n                  `Entry ${index}, Change ${changeIndex}: Missing phone_number_id`,\n                );\n              }\n            },\n          );\n        }\n      });\n    }\n\n    return {\n      is_valid: errors.length === ZERO,\n      errors,\n      warnings,\n      payload_valid: errors.length === ZERO,\n    };\n  }\n\n  /**\n   * éªŒè¯Webhookç­¾å\n   * Verify webhook signature\n   */\n  static verifyWebhookSignature(\n    payload: string,\n    signature: string,\n    config: SignatureVerificationConfig,\n  ): boolean {\n    try {\n      const crypto = require('crypto');\n      const expectedSignature = crypto\n        .createHmac(config.algorithm, config.app_secret)\n        .update(payload)\n        .digest('hex');\n\n      const receivedSignature = signature.replace(/^sha\\d+=/, '');\n      return crypto.timingSafeEqual(\n        Buffer.from(expectedSignature, 'hex'),\n        Buffer.from(receivedSignature, 'hex'),\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * ç”Ÿæˆäº‹ä»¶å”¯ä¸€é”®\n   * Generate event unique key\n   */\n  static generateEventKey(event: WebhookEvent): string {\n    switch (event.type) {\n      case 'message_received':\n        return `msg_${event.message.id}_${event.timestamp}`;\n      case 'message_status':\n        return `status_${event.status_update.id}_${event.status_update.status}_${event.timestamp}`;\n      default:\n        return `${event.type}_${event.phone_number_id}_${event.timestamp}`;\n    }\n  }\n\n  /**\n   * è¿‡æ»¤äº‹ä»¶\n   * Filter events\n   */\n  static filterEvents(\n    events: WebhookEvent[],\n    filter: EventFilter,\n  ): WebhookEvent[] {\n    return events.filter((event) => {\n      // äº‹ä»¶ç±»å‹è¿‡æ»¤\n      if (filter.event_types && !filter.event_types.includes(event.type)) {\n        return false;\n      }\n\n      // ç”µè¯å·ç è¿‡æ»¤\n      if (\n        filter.phone_number_ids &&\n        !filter.phone_number_ids.includes(event.phone_number_id)\n      ) {\n        return false;\n      }\n\n      // å‘é€è€…è¿‡æ»¤\n      if (filter.sender_filters && 'from' in event) {\n        const from = (event as unknown as Record<string, unknown>)\n          .from as string;\n        if (\n          filter.sender_filters.include &&\n          !filter.sender_filters.include.includes(from)\n        ) {\n          return false;\n        }\n        if (\n          filter.sender_filters.exclude &&\n          filter.sender_filters.exclude.includes(from)\n        ) {\n          return false;\n        }\n      }\n\n      // æ—¶é—´èŒƒå›´è¿‡æ»¤\n      if (filter.time_range) {\n        const eventTime = new Date(event.timestamp);\n        const startTime = new Date(filter.time_range.start);\n        const endTime = new Date(filter.time_range.end);\n        if (eventTime < startTime || eventTime > endTime) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n\n  /**\n   * èšåˆäº‹ä»¶ç»Ÿè®¡\n   * Aggregate event statistics\n   */\n  static aggregateEventStatistics(events: WebhookEvent[]): EventStatistics {\n    const eventsByType: Record<string, number> = {};\n    const processingTimes: number[] = [];\n\n    events.forEach((event) => {\n      eventsByType[event.type] = (eventsByType[event.type] || 0) + 1;\n      // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥è®°å½•çœŸå®çš„å¤„ç†æ—¶é—´ï¼‰\n      processingTimes.push(Math.random() * 100);\n    });\n\n    processingTimes.sort((a, b) => a - b);\n\n    const result: EventStatistics = {\n      total_events: events.length,\n      events_by_type: eventsByType,\n      processing_times: {\n        average_ms:\n          processingTimes.reduce((a, b) => a + b, ZERO) / processingTimes.length ||\n          ZERO,\n        min_ms: processingTimes[ZERO] || ZERO,\n        max_ms: processingTimes[processingTimes.length - ONE] || ZERO,\n        p95_ms: processingTimes[Math.floor(processingTimes.length * MAGIC_0_95)] || ZERO,\n        p99_ms: processingTimes[Math.floor(processingTimes.length * MAGIC_0_99)] || ZERO,\n      },\n      error_rate: ZERO, // åº”è¯¥åŸºäºå®é™…é”™è¯¯è®¡ç®—\n      success_rate: ONE, // åº”è¯¥åŸºäºå®é™…æˆåŠŸç‡è®¡ç®—\n    };\n\n    // åªæœ‰å½“æœ‰äº‹ä»¶æ—¶æ‰è®¾ç½®å¯é€‰å±æ€§\n    if (events.length > ZERO) {\n      result.last_processed_at = new Date().toISOString();\n    }\n\n    return result;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/src/types/whatsapp.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/basic-navigation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/debug-dom.spec.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (117). Maximum allowed is 50.","line":10,"column":70,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":302,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 23. Maximum allowed is 20.","line":10,"column":70,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":302,"endColumn":4},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":106,"column":24,"nodeType":"MemberExpression","endLine":106,"endColumn":34},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":126,"column":25,"nodeType":"MemberExpression","endLine":126,"endColumn":46},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":176,"column":25,"nodeType":"MemberExpression","endLine":176,"endColumn":44},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":204,"column":25,"nodeType":"MemberExpression","endLine":204,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { expect, test } from '@playwright/test';\nimport type {\n  MockNextHydrationStatus,\n  MockPerformanceNavigationEntry,\n  MockReactFiberNode,\n  MockWindowWithReact,\n} from '@/types/test-types';\n\ntest.describe('DOM Structure Debug', () => {\n  test('should debug page DOM structure and find language switcher', async ({\n    page,\n  }) => {\n    console.log('ğŸ” Starting DOM structure debug...');\n\n    // å¯¼èˆªåˆ°é¦–é¡µ\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    // ç­‰å¾…é¡µé¢ç¨³å®š\n    await page.waitForTimeout(3000);\n\n    console.log('ğŸ“ Current URL:', page.url());\n\n    // æ£€æŸ¥é¡µé¢åŸºæœ¬ç»“æ„\n    const title = await page.title();\n    console.log('ğŸ“„ Page title:', title);\n\n    // æ£€æŸ¥HTML langå±æ€§\n    const htmlLang = await page.locator('html').getAttribute('lang');\n    console.log('ğŸŒ HTML lang attribute:', htmlLang);\n\n    // æ£€æŸ¥bodyæ˜¯å¦å­˜åœ¨\n    const bodyExists = (await page.locator('body').count()) > 0;\n    console.log('ğŸ“¦ Body exists:', bodyExists);\n\n    // æ£€æŸ¥headeræ˜¯å¦å­˜åœ¨\n    const headerExists = (await page.locator('header').count()) > 0;\n    console.log('ğŸ  Header exists:', headerExists);\n\n    // å¦‚æœheaderä¸å­˜åœ¨ï¼Œæ£€æŸ¥æ•´ä¸ªé¡µé¢ç»“æ„\n    if (!headerExists) {\n      console.log('âŒ Header not found! Investigating page structure...');\n\n      // æ£€æŸ¥å®Œæ•´çš„body HTMLç»“æ„\n      const bodyHTML = await page.locator('body').innerHTML();\n      console.log('ğŸ“¦ Complete body HTML:');\n      console.log(\n        bodyHTML.substring(0, 2000) +\n          (bodyHTML.length > 2000 ? '...[truncated]' : ''),\n      );\n\n      // æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•Reactç»„ä»¶æ¸²æŸ“\n      const reactElements = await page\n        .locator('[data-reactroot], #__next, [id*=\"react\"]')\n        .all();\n      console.log(`âš›ï¸ React elements found: ${reactElements.length}`);\n\n      // æ£€æŸ¥æ˜¯å¦æœ‰Next.jsç›¸å…³å…ƒç´ \n      const nextElements = await page\n        .locator('[id*=\"next\"], [class*=\"next\"]')\n        .all();\n      console.log(`ğŸ”„ Next.js elements found: ${nextElements.length}`);\n\n      // æ£€æŸ¥mainå…ƒç´ \n      const mainExists = (await page.locator('main').count()) > 0;\n      console.log('ğŸ“„ Main element exists:', mainExists);\n\n      // æ£€æŸ¥footerå…ƒç´ \n      const footerExists = (await page.locator('footer').count()) > 0;\n      console.log('ğŸ¦¶ Footer element exists:', footerExists);\n\n      // æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•å¯¼èˆªç›¸å…³å…ƒç´ \n      const navElements = await page.locator('nav').all();\n      console.log(`ğŸ§­ Navigation elements found: ${navElements.length}`);\n\n      // æ£€æŸ¥é¡µé¢æ˜¯å¦å®Œå…¨åŠ è½½\n      const readyState = await page.evaluate(() => document.readyState);\n      console.log('ğŸ“Š Document ready state:', readyState);\n\n      // æ£€æŸ¥æ˜¯å¦æœ‰åŠ è½½é”™è¯¯\n      const networkFailures = await page.evaluate(() => {\n        return window.performance\n          .getEntriesByType('navigation')\n          .map((entry: PerformanceEntry) => ({\n            name: entry.name,\n            transferSize: (entry as MockPerformanceNavigationEntry)\n              .transferSize,\n            responseStatus: (entry as MockPerformanceNavigationEntry)\n              .responseStatus,\n          }));\n      });\n      console.log('ğŸŒ Network status:', networkFailures);\n    }\n\n    if (headerExists) {\n      // è·å–headerçš„å®Œæ•´HTML\n      const headerHTML = await page.locator('header').innerHTML();\n      console.log('ğŸ  Header HTML structure:');\n      console.log(headerHTML);\n\n      // æ£€æŸ¥headerå†…çš„æ‰€æœ‰æŒ‰é’®\n      const buttons = await page.locator('header button').all();\n      console.log(`ğŸ”˜ Found ${buttons.length} buttons in header:`);\n\n      for (let i = 0; i < buttons.length; i++) {\n        const button = buttons[i];\n        const testId = await button?.getAttribute('data-testid');\n        const className = await button?.getAttribute('class');\n        const ariaLabel = await button?.getAttribute('aria-label');\n        const text = await button?.textContent();\n\n        console.log(`  Button ${i + 1}:`);\n        console.log(`    - data-testid: ${testId}`);\n        console.log(`    - class: ${className}`);\n        console.log(`    - aria-label: ${ariaLabel}`);\n        console.log(`    - text: ${text}`);\n      }\n\n      // æ£€æŸ¥æ‰€æœ‰å¸¦æœ‰data-testidçš„å…ƒç´ \n      const elementsWithTestId = await page.locator('[data-testid]').all();\n      console.log(\n        `ğŸ·ï¸ Found ${elementsWithTestId.length} elements with data-testid:`,\n      );\n\n      for (let i = 0; i < elementsWithTestId.length; i++) {\n        const element = elementsWithTestId[i];\n        const testId = await element?.getAttribute('data-testid');\n        const tagName = await element?.evaluate((el) =>\n          el.tagName.toLowerCase(),\n        );\n        const isVisible = await element?.isVisible();\n\n        console.log(\n          `  Element ${i + 1}: <${tagName}> data-testid=\"${testId}\" visible=${isVisible}`,\n        );\n      }\n\n      // ä¸“é—¨æ£€æŸ¥è¯­è¨€åˆ‡æ¢ç›¸å…³å…ƒç´ \n      console.log('ğŸŒ Checking language switcher elements:');\n\n      // æ£€æŸ¥language-dropdown-trigger\n      const dropdownTrigger = page.getByTestId('language-dropdown-trigger');\n      const triggerCount = await dropdownTrigger.count();\n      console.log(`  - language-dropdown-trigger count: ${triggerCount}`);\n\n      if (triggerCount > 0) {\n        const isVisible = await dropdownTrigger.isVisible();\n        const isEnabled = await dropdownTrigger.isEnabled();\n        console.log(\n          `  - language-dropdown-trigger visible: ${isVisible}, enabled: ${isEnabled}`,\n        );\n      }\n\n      // æ£€æŸ¥language-toggle-button\n      const toggleButton = page.getByTestId('language-toggle-button');\n      const toggleCount = await toggleButton.count();\n      console.log(`  - language-toggle-button count: ${toggleCount}`);\n\n      if (toggleCount > 0) {\n        const isVisible = await toggleButton.isVisible();\n        const isEnabled = await toggleButton.isEnabled();\n        console.log(\n          `  - language-toggle-button visible: ${isVisible}, enabled: ${isEnabled}`,\n        );\n      }\n\n      // æ£€æŸ¥åŒ…å«\"language\"çš„æ‰€æœ‰å…ƒç´ \n      const languageElements = await page\n        .locator('[data-testid*=\"language\"]')\n        .all();\n      console.log(\n        `  - Elements with \"language\" in data-testid: ${languageElements.length}`,\n      );\n\n      for (let i = 0; i < languageElements.length; i++) {\n        const element = languageElements[i];\n        const testId = await element?.getAttribute('data-testid');\n        const isVisible = await element?.isVisible();\n        console.log(`    - ${testId}: visible=${isVisible}`);\n      }\n\n      // æ£€æŸ¥å¯èƒ½çš„è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼ˆé€šè¿‡æ–‡æœ¬ï¼‰\n      const enButtons = await page.locator('button:has-text(\"EN\")').all();\n      const zhButtons = await page.locator('button:has-text(\"ä¸­æ–‡\")').all();\n      const globeButtons = await page\n        .locator(\n          'button:has([class*=\"lucide-globe\"], [class*=\"lucide-languages\"])',\n        )\n        .all();\n\n      console.log(`  - Buttons with \"EN\" text: ${enButtons.length}`);\n      console.log(`  - Buttons with \"ä¸­æ–‡\" text: ${zhButtons.length}`);\n      console.log(\n        `  - Buttons with globe/languages icon: ${globeButtons.length}`,\n      );\n\n      // æ£€æŸ¥DropdownMenuç›¸å…³å…ƒç´ \n      const dropdownMenus = await page\n        .locator('[data-testid*=\"dropdown\"]')\n        .all();\n      console.log(`  - Dropdown menu elements: ${dropdownMenus.length}`);\n\n      for (let i = 0; i < dropdownMenus.length; i++) {\n        const element = dropdownMenus[i];\n        const testId = await element?.getAttribute('data-testid');\n        const isVisible = await element?.isVisible();\n        console.log(`    - ${testId}: visible=${isVisible}`);\n      }\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯\n    const errors: string[] = [];\n    page.on('pageerror', (error) => {\n      errors.push(error.message);\n    });\n\n    // ç­‰å¾…ä¸€ä¸‹çœ‹æ˜¯å¦æœ‰é”™è¯¯\n    await page.waitForTimeout(1000);\n\n    if (errors.length > 0) {\n      console.log('âŒ JavaScript errors found:');\n      errors.forEach((error, index) => {\n        console.log(`  ${index + 1}. ${error}`);\n      });\n    } else {\n      console.log('âœ… No JavaScript errors detected');\n    }\n\n    // æ£€æŸ¥æ§åˆ¶å°æ¶ˆæ¯\n    const messages: string[] = [];\n    page.on('console', (msg) => {\n      if (msg.type() === 'error' || msg.type() === 'warning') {\n        messages.push(`${msg.type()}: ${msg.text()}`);\n      }\n    });\n\n    await page.waitForTimeout(1000);\n\n    if (messages.length > 0) {\n      console.log('âš ï¸ Console messages:');\n      messages.forEach((message, index) => {\n        console.log(`  ${index + 1}. ${message}`);\n      });\n    }\n\n    // æ£€æŸ¥React hydrationçŠ¶æ€\n    const isHydrated = await page.evaluate(() => {\n      // æ£€æŸ¥Reactæ˜¯å¦å·²ç»hydrated\n      const reactRoot =\n        document.querySelector('[data-reactroot]') ||\n        document.querySelector('#__next');\n      if (reactRoot) {\n        return true;\n      }\n\n      // æ£€æŸ¥æ˜¯å¦æœ‰React fiberèŠ‚ç‚¹\n      const bodyElement = document.body as MockReactFiberNode;\n      if (bodyElement && bodyElement._reactInternalFiber) {\n        return true;\n      }\n\n      // æ£€æŸ¥windowä¸Šçš„Reactç›¸å…³å¯¹è±¡\n      const windowWithReact = window as MockWindowWithReact;\n      return (\n        Boolean(windowWithReact.React) ||\n        Boolean(windowWithReact.__REACT_DEVTOOLS_GLOBAL_HOOK__)\n      );\n    });\n\n    console.log('âš›ï¸ React hydration status:', isHydrated);\n\n    // æ£€æŸ¥Next.js hydrationçŠ¶æ€\n    const nextHydrationStatus = await page.evaluate(\n      (): MockNextHydrationStatus => {\n        const windowWithNext = window as MockWindowWithReact;\n        return {\n          hasNextData: Boolean(windowWithNext.__NEXT_DATA__),\n          hasNextRouter: Boolean(windowWithNext.__NEXT_ROUTER__),\n          documentReadyState: document.readyState,\n          scriptsLoaded: document.querySelectorAll('script[src*=\"_next\"]')\n            .length,\n        };\n      },\n    );\n\n    console.log('ğŸ”„ Next.js hydration status:', nextHydrationStatus);\n\n    // ç­‰å¾…æ›´é•¿æ—¶é—´çœ‹Reactæ˜¯å¦ä¼šhydrate\n    console.log('â³ Waiting for potential React hydration...');\n    await page.waitForTimeout(5000);\n\n    // å†æ¬¡æ£€æŸ¥header\n    const headerExistsAfterWait = (await page.locator('header').count()) > 0;\n    console.log('ğŸ  Header exists after wait:', headerExistsAfterWait);\n\n    // æœ€ç»ˆéªŒè¯ï¼šé¡µé¢åº”è¯¥æœ‰å†…å®¹\n    const bodyContent = await page.textContent('body');\n    expect(bodyContent).toBeTruthy();\n    expect(bodyContent!.length).toBeGreaterThan(100);\n\n    console.log('âœ… DOM structure debug completed');\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/debug-language-dropdown.spec.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":34,"column":26,"nodeType":"MemberExpression","endLine":34,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":35,"column":28,"nodeType":"MemberExpression","endLine":35,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test } from '@playwright/test';\n\ntest.describe('Debug Language Dropdown', () => {\n  test('should debug language dropdown rendering', async ({ page }) => {\n    // æµ‹è¯•æ ¹è·¯å¾„é‡å®šå‘ - ç›´æ¥è®¿é—®æ ¹è·¯å¾„çœ‹æ˜¯å¦èƒ½æ­£ç¡®é‡å®šå‘åˆ°/en\n    console.log('Testing root path redirect...');\n    await page.goto('http://localhost:3000/');\n\n    // ç­‰å¾…é¡µé¢åŠ è½½å’Œå¯èƒ½çš„é‡å®šå‘\n    await page.waitForLoadState('networkidle');\n\n    // æ£€æŸ¥å½“å‰URLæ˜¯å¦æ­£ç¡®é‡å®šå‘åˆ°/en\n    const currentUrl = page.url();\n    console.log('Current URL after redirect:', currentUrl);\n\n    // æ£€æŸ¥é¡µé¢HTMLç»“æ„\n    const html = await page.content();\n    console.log('=== PAGE HTML ===');\n    console.log(html.substring(0, 2000)); // åªæ˜¾ç¤ºå‰2000ä¸ªå­—ç¬¦\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰æˆ‘ä»¬çš„ç»„ä»¶\n    const languageDropdown = await page\n      .locator('[data-testid=\"language-dropdown-trigger\"]')\n      .count();\n    console.log('Language dropdown count:', languageDropdown);\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æŒ‰é’®\n    const allButtons = await page.locator('button').count();\n    console.log('Total buttons on page:', allButtons);\n\n    // åˆ—å‡ºæ‰€æœ‰æŒ‰é’®çš„å†…å®¹\n    const buttons = await page.locator('button').all();\n    for (let i = 0; i < buttons.length; i++) {\n      const text = await buttons[i]?.textContent();\n      const testId = await buttons[i]?.getAttribute('data-testid');\n      console.log(`Button ${i}: \"${text}\" (testid: ${testId})`);\n    }\n\n    // æ£€æŸ¥headeræ˜¯å¦å­˜åœ¨\n    const header = await page.locator('header').count();\n    console.log('Header count:', header);\n\n    if (header > 0) {\n      const headerContent = await page.locator('header').textContent();\n      console.log('Header content:', headerContent);\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•åŒ…å«\"Language\"æˆ–\"è¯­è¨€\"çš„å…ƒç´ \n    const languageElements = await page\n      .locator('text=/Language|è¯­è¨€|ä¸­æ–‡|English/i')\n      .count();\n    console.log('Elements containing language text:', languageElements);\n\n    // æˆªå›¾ä¿å­˜\n    await page.screenshot({\n      path: 'debug-language-dropdown.png',\n      fullPage: true,\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/global-setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/global-teardown.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/homepage.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/i18n-redirect-validation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/i18n.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/navigation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/performance.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/safe-navigation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/test-environment-setup.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":38,"column":5,"nodeType":"MemberExpression","endLine":38,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":53,"column":12,"nodeType":"MemberExpression","endLine":53,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":79,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":112,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'jsError' is defined but never used.","line":190,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":190,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Page } from '@playwright/test';\n\n// import { FullConfig } from '@playwright/test'; // TODO: Use when needed\n\n/**\n * æµ‹è¯•ç¯å¢ƒè®¾ç½®\n *\n * ä¸“é—¨ä¸º E2E æµ‹è¯•é…ç½®ç¯å¢ƒï¼Œç¡®ä¿æµ‹è¯•å·¥å…·ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°\n */\n\n/**\n * ç¦ç”¨å¼€å‘å·¥å…·çš„ç¯å¢ƒå˜é‡è®¾ç½®\n */\nexport const TEST_ENV_VARS = {\n  // ç¦ç”¨ React Scan ä»¥é¿å… DOM å¹²æ‰°\n  NEXT_PUBLIC_DISABLE_REACT_SCAN: 'true',\n\n  // è®¾ç½®æµ‹è¯•ç¯å¢ƒæ ‡è¯†\n  NODE_ENV: 'test',\n  PLAYWRIGHT_TEST: 'true',\n\n  // ç¦ç”¨å…¶ä»–å¯èƒ½å¹²æ‰°æµ‹è¯•çš„å¼€å‘å·¥å…·\n  NEXT_PUBLIC_DISABLE_DEV_TOOLS: 'true',\n  NEXT_PUBLIC_DISABLE_PERFORMANCE_MONITOR: 'true',\n\n  // æµ‹è¯•ä¸“ç”¨é…ç½®\n  NEXT_PUBLIC_TEST_MODE: 'true',\n} as const;\n\n/**\n * ä¸ºæµ‹è¯•ç¯å¢ƒé…ç½®ç¯å¢ƒå˜é‡\n */\nexport function setupTestEnvironment() {\n  console.log('ğŸ§ª Setting up test environment...');\n\n  // è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡\n  Object.entries(TEST_ENV_VARS).forEach(([key, value]) => {\n    process.env[key] = value;\n    console.log(`   ${key}=${value}`);\n  });\n\n  console.log('âœ… Test environment configured');\n}\n\n/**\n * æ¸…ç†æµ‹è¯•ç¯å¢ƒ\n */\nexport function cleanupTestEnvironment() {\n  console.log('ğŸ§¹ Cleaning up test environment...');\n\n  // æ¸…ç†æµ‹è¯•ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰\n  Object.keys(TEST_ENV_VARS).forEach((key) => {\n    delete process.env[key];\n  });\n\n  console.log('âœ… Test environment cleaned up');\n}\n\n/**\n * æ£€æŸ¥é¡µé¢æ˜¯å¦å­˜åœ¨å¹²æ‰°å…ƒç´ \n */\nexport async function checkForInterferingElements(page: Page) {\n  const interferingElements = [\n    '#react-scan-toolbar-root',\n    '[data-testid=\"react-scan-indicator\"]',\n    '[data-testid=\"react-scan-control-panel\"]',\n    '.react-scan-overlay',\n  ];\n\n  const foundElements: string[] = [];\n\n  for (const selector of interferingElements) {\n    try {\n      const element = await page.locator(selector);\n      const count = await element.count();\n      if (count > 0) {\n        foundElements.push(selector);\n      }\n    } catch (error) {\n      // å¿½ç•¥æŸ¥æ‰¾é”™è¯¯\n    }\n  }\n\n  if (foundElements.length > 0) {\n    console.warn('âš ï¸  Found interfering elements:', foundElements);\n    return foundElements;\n  }\n\n  return [];\n}\n\n/**\n * ç§»é™¤é¡µé¢ä¸­çš„å¹²æ‰°å…ƒç´ \n */\nexport async function removeInterferingElements(page: Page) {\n  console.log('ğŸ§¹ Removing interfering elements...');\n\n  const interferingSelectors = [\n    '#react-scan-toolbar-root',\n    '[data-testid=\"react-scan-indicator\"]',\n    '[data-testid=\"react-scan-control-panel\"]',\n    '.react-scan-overlay',\n    '.react-scan-toolbar',\n  ];\n\n  for (const selector of interferingSelectors) {\n    try {\n      await page.evaluate((sel: string) => {\n        const elements = document.querySelectorAll(sel);\n        elements.forEach((el) => el.remove());\n      }, selector);\n    } catch (error) {\n      // å¿½ç•¥ç§»é™¤é”™è¯¯\n    }\n  }\n\n  console.log('âœ… Interfering elements removed');\n}\n\n/**\n * ç­‰å¾…é¡µé¢ç¨³å®šï¼ˆæ— å¹²æ‰°å…ƒç´ ï¼‰\n */\nexport async function waitForStablePage(page: Page, timeout = 5000) {\n  console.log('â³ Waiting for page to stabilize...');\n\n  const startTime = Date.now();\n\n  while (Date.now() - startTime < timeout) {\n    const interferingElements = await checkForInterferingElements(page);\n\n    if (interferingElements.length === 0) {\n      console.log('âœ… Page is stable');\n      return true;\n    }\n\n    // å°è¯•ç§»é™¤å¹²æ‰°å…ƒç´ \n    await removeInterferingElements(page);\n\n    // ç­‰å¾…ä¸€å°æ®µæ—¶é—´å†æ£€æŸ¥\n    await page.waitForTimeout(100);\n  }\n\n  console.warn('âš ï¸  Page did not stabilize within timeout');\n  return false;\n}\n\n/**\n * å®‰å…¨ç‚¹å‡»å…ƒç´ ï¼ˆé¿å…å¹²æ‰°ï¼‰\n */\nexport async function safeClick(\n  page: Page,\n  selector: string,\n  options: unknown = {},\n) {\n  console.log(`ğŸ–±ï¸  Safe clicking: ${selector}`);\n\n  // é¦–å…ˆç§»é™¤å¹²æ‰°å…ƒç´ \n  await removeInterferingElements(page);\n\n  // ç­‰å¾…å…ƒç´ å¯è§\n  await page.waitForSelector(selector, { state: 'visible', timeout: 5000 });\n\n  // æ»šåŠ¨åˆ°å…ƒç´ ä½ç½®\n  await page.locator(selector).scrollIntoViewIfNeeded();\n\n  // ç­‰å¾…å…ƒç´ ç¨³å®š\n  await page.waitForTimeout(100);\n\n  // å†æ¬¡æ£€æŸ¥å¹¶ç§»é™¤å¹²æ‰°å…ƒç´ \n  await removeInterferingElements(page);\n\n  try {\n    // å°è¯•ç‚¹å‡»\n    await page.locator(selector).click(options);\n    console.log(`âœ… Successfully clicked: ${selector}`);\n    return true;\n  } catch (error) {\n    console.warn(`âš ï¸  Click failed for ${selector}:`, (error as Error).message);\n\n    // å°è¯•ä½¿ç”¨ JavaScript ç‚¹å‡»\n    try {\n      await page.evaluate((sel: string) => {\n        const element = document.querySelector(sel);\n        if (element) {\n          (element as HTMLElement).click();\n        }\n      }, selector);\n      console.log(`âœ… JavaScript click succeeded: ${selector}`);\n      return true;\n    } catch (jsError) {\n      console.error(`âŒ Both click methods failed for ${selector}`);\n      return false;\n    }\n  }\n}\n\nconst testEnvironmentUtils = {\n  setupTestEnvironment,\n  cleanupTestEnvironment,\n  checkForInterferingElements,\n  removeInterferingElements,\n  waitForStablePage,\n  safeClick,\n  TEST_ENV_VARS,\n};\n\nexport default testEnvironmentUtils;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/web-eval-basic.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/e2e/web-eval-integration.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":163,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":163,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":193,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":193,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { expect, test } from '@playwright/test';\n\ntest.describe('Web Eval Agent Integration', () => {\n  test('should capture network requests for analysis', async ({ page }) => {\n    const networkRequests: Array<{\n      url: string;\n      method: string;\n      status: number;\n      timing: number;\n    }> = [];\n\n    // Monitor network requests\n    page.on('response', async (response) => {\n      const request = response.request();\n      // Note: Playwright Response doesn't have timing() method\n      // We'll use a simple timestamp approach instead\n\n      networkRequests.push({\n        url: response.url(),\n        method: request.method(),\n        status: response.status(),\n        timing: Date.now(), // Simple timestamp instead of detailed timing\n      });\n    });\n\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    // Verify we captured network requests\n    expect(networkRequests.length).toBeGreaterThan(0);\n\n    // Check for critical resources\n    const htmlRequest = networkRequests.find(\n      (req) => req.url.includes('localhost:3000') && req.method === 'GET',\n    );\n    expect(htmlRequest).toBeDefined();\n    expect(htmlRequest?.status).toBe(200);\n\n    console.log(`Captured ${networkRequests.length} network requests`);\n    console.log('Network requests:', JSON.stringify(networkRequests, null, 2));\n  });\n\n  test('should capture console logs for debugging', async ({ page }) => {\n    const consoleLogs: Array<{\n      type: string;\n      text: string;\n      timestamp: number;\n    }> = [];\n\n    // Monitor console messages\n    page.on('console', (msg) => {\n      consoleLogs.push({\n        type: msg.type(),\n        text: msg.text(),\n        timestamp: Date.now(),\n      });\n    });\n\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    // Trigger some console output\n    await page.evaluate(() => {\n      console.log('Web Eval Agent test log');\n      console.info('Test info message');\n    });\n\n    // Verify we captured console logs\n    const testLog = consoleLogs.find((log) =>\n      log.text.includes('Web Eval Agent test log'),\n    );\n    expect(testLog).toBeDefined();\n    expect(testLog?.type).toBe('log');\n\n    console.log(`Captured ${consoleLogs.length} console messages`);\n    console.log('Console logs:', JSON.stringify(consoleLogs, null, 2));\n  });\n\n  test('should measure page performance metrics', async ({ page }) => {\n    await page.goto('/');\n\n    // Measure performance metrics\n    const metrics = await page.evaluate(() => {\n      return new Promise((resolve) => {\n        const observer = new PerformanceObserver((list) => {\n          const entries = list.getEntries();\n          const performanceData: Record<string, unknown> = {};\n\n          entries.forEach((entry) => {\n            if (entry.entryType === 'navigation') {\n              const navEntry = entry as PerformanceNavigationTiming;\n              performanceData.navigation = {\n                domContentLoaded:\n                  navEntry.domContentLoadedEventEnd - navEntry.fetchStart,\n                loadComplete: navEntry.loadEventEnd - navEntry.fetchStart,\n                firstByte: navEntry.responseStart - navEntry.fetchStart,\n              };\n            }\n\n            if (entry.entryType === 'paint') {\n              if (entry.name === 'first-contentful-paint') {\n                performanceData.fcp = entry.startTime;\n              }\n            }\n          });\n\n          resolve(performanceData);\n        });\n\n        observer.observe({ entryTypes: ['navigation', 'paint'] });\n\n        // Fallback timeout\n        setTimeout(() => resolve({}), 3000);\n      });\n    });\n\n    console.log('Performance metrics:', JSON.stringify(metrics, null, 2));\n\n    // Verify reasonable performance\n    if (metrics && typeof metrics === 'object' && 'navigation' in metrics) {\n      const { navigation } = metrics as Record<string, unknown>;\n      if (\n        navigation &&\n        typeof navigation === 'object' &&\n        navigation !== null &&\n        'loadComplete' in navigation\n      ) {\n        const loadComplete = (navigation as Record<string, unknown>)\n          .loadComplete;\n        if (typeof loadComplete === 'number') {\n          expect(loadComplete).toBeLessThan(5000); // 5 seconds max\n        }\n      }\n    }\n  });\n\n  test('should test user interaction flows', async ({ page }) => {\n    await page.goto('/');\n\n    // Test basic interactions that Web Eval Agent would analyze\n    const interactions: Array<{\n      action: string;\n      element: string;\n      success: boolean;\n      timing: number;\n    }> = [];\n\n    // Test navigation interaction\n    const startTime = Date.now();\n    try {\n      const navLinks = page.locator('nav a').first();\n      if (await navLinks.isVisible()) {\n        await navLinks.click();\n        await page.waitForLoadState('networkidle');\n\n        interactions.push({\n          action: 'navigation_click',\n          element: 'nav_link',\n          success: true,\n          timing: Date.now() - startTime,\n        });\n      }\n    } catch (error) {\n      interactions.push({\n        action: 'navigation_click',\n        element: 'nav_link',\n        success: false,\n        timing: Date.now() - startTime,\n      });\n    }\n\n    // Test theme toggle if available\n    const themeToggleStart = Date.now();\n    try {\n      const themeToggle = page\n        .locator('[data-testid=\"theme-toggle\"]')\n        .or(\n          page\n            .locator('button:has-text(\"ğŸŒ™\")')\n            .or(page.locator('button:has-text(\"â˜€ï¸\")')),\n        );\n\n      if (await themeToggle.first().isVisible()) {\n        await themeToggle.first().click();\n\n        interactions.push({\n          action: 'theme_toggle',\n          element: 'theme_button',\n          success: true,\n          timing: Date.now() - themeToggleStart,\n        });\n      }\n    } catch (error) {\n      interactions.push({\n        action: 'theme_toggle',\n        element: 'theme_button',\n        success: false,\n        timing: Date.now() - themeToggleStart,\n      });\n    }\n\n    console.log('User interactions:', JSON.stringify(interactions, null, 2));\n\n    // Verify at least one interaction was successful\n    const successfulInteractions = interactions.filter((i) => i.success);\n    expect(successfulInteractions.length).toBeGreaterThan(0);\n  });\n\n  test('should validate accessibility for Web Eval Agent', async ({ page }) => {\n    await page.goto('/');\n\n    // Basic accessibility checks that Web Eval Agent would perform\n    const accessibilityIssues: string[] = [];\n\n    // Check for missing alt text\n    const images = page.locator('img');\n    const imageCount = await images.count();\n\n    for (let i = 0; i < imageCount; i++) {\n      const img = images.nth(i);\n      const alt = await img.getAttribute('alt');\n      const src = await img.getAttribute('src');\n\n      if (!alt && src && !src.includes('data:')) {\n        accessibilityIssues.push(`Image missing alt text: ${src}`);\n      }\n    }\n\n    // Check for proper heading hierarchy\n    const headings = await page\n      .locator('h1, h2, h3, h4, h5, h6')\n      .allTextContents();\n    if (headings.length === 0) {\n      accessibilityIssues.push('No headings found on page');\n    }\n\n    // Check for form labels\n    const inputs = page.locator(\n      'input[type=\"text\"], input[type=\"email\"], textarea',\n    );\n    const inputCount = await inputs.count();\n\n    for (let i = 0; i < inputCount; i++) {\n      const input = inputs.nth(i);\n      const id = await input.getAttribute('id');\n      const ariaLabel = await input.getAttribute('aria-label');\n\n      if (id) {\n        const label = page.locator(`label[for=\"${id}\"]`);\n        const hasLabel = (await label.count()) > 0;\n\n        if (!hasLabel && !ariaLabel) {\n          accessibilityIssues.push(`Input missing label: ${id}`);\n        }\n      }\n    }\n\n    console.log('Accessibility issues found:', accessibilityIssues);\n\n    // For now, just log issues - in production you might want to fail the test\n    if (accessibilityIssues.length > 0) {\n      console.warn(`Found ${accessibilityIssues.length} accessibility issues`);\n    }\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/comprehensive-error-handling.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/error-boundary-core.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":110,"column":14,"nodeType":"MemberExpression","endLine":110,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/error-boundary.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":154,"column":45,"nodeType":"MemberExpression","endLine":154,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ErrorBoundary Component Error Handling Tests\n *\n * å…¨é¢æµ‹è¯•é”™è¯¯è¾¹ç•Œç»„ä»¶çš„é”™è¯¯æ•è·ã€æ¢å¤å’Œç”¨æˆ·ä½“éªŒåŠŸèƒ½\n */\n\nimport React from 'react';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { ErrorBoundary } from '@/components/error-boundary';\n\n// Mock next-intl\nconst mockUseTranslations = vi.fn();\nvi.mock('next-intl', () => ({\n  useTranslations: () => mockUseTranslations,\n}));\n\n// Mock UI components\nvi.mock('@/components/ui/button', () => ({\n  Button: ({\n    children,\n    onClick,\n    variant,\n    className,\n    ...props\n  }: React.ComponentProps<'button'> & { variant?: string }) => (\n    <button\n      data-testid='error-boundary-button'\n      onClick={onClick}\n      data-variant={variant}\n      className={className}\n      {...props}\n    >\n      {children}\n    </button>\n  ),\n}));\n\nvi.mock('@/components/ui/card', () => ({\n  Card: ({ children, className, ...props }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='error-boundary-card'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardContent: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='error-boundary-card-content'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardDescription: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='error-boundary-card-description'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardHeader: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <div\n      data-testid='error-boundary-card-header'\n      className={className}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n  CardTitle: ({\n    children,\n    className,\n    ...props\n  }: React.ComponentProps<'div'>) => (\n    <h2\n      data-testid='error-boundary-card-title'\n      className={className}\n      {...props}\n    >\n      {children}\n    </h2>\n  ),\n}));\n\n// Mock Lucide icons\nvi.mock('lucide-react', () => ({\n  AlertTriangle: ({ className }: React.ComponentProps<'div'>) => (\n    <span\n      data-testid='alert-triangle-icon'\n      className={className}\n    >\n      âš ï¸\n    </span>\n  ),\n  RefreshCw: ({ className }: React.ComponentProps<'div'>) => (\n    <span\n      data-testid='refresh-icon'\n      className={className}\n    >\n      ğŸ”„\n    </span>\n  ),\n}));\n\n// åˆ›å»ºä¼šæŠ›å‡ºé”™è¯¯çš„æµ‹è¯•ç»„ä»¶\nfunction ThrowErrorComponent({\n  shouldThrow = true,\n  errorMessage = 'Test error',\n}: {\n  shouldThrow?: boolean;\n  errorMessage?: string;\n}) {\n  if (shouldThrow) {\n    throw new Error(errorMessage);\n  }\n  return <div data-testid='normal-component'>Normal component</div>;\n}\n\ndescribe('ErrorBoundary Error Handling Tests', () => {\n  const user = userEvent.setup();\n  const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {});\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // Setup default translations\n    mockUseTranslations.mockImplementation((key: string) => {\n      const translations: Record<string, string> = {\n        error: 'Error',\n        retry: 'Try Again',\n        errorMessage: 'Something went wrong. Please try refreshing the page.',\n      };\n\n      return (\n        (Object.hasOwn(translations, key) ? translations[key] : null) || key\n      );\n    });\n\n    // Clear console spy\n    consoleSpy.mockClear();\n  });\n\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  describe('Error Catching and Display', () => {\n    it('should catch and display error when child component throws', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage='Component crashed'\n          />\n        </ErrorBoundary>,\n      );\n\n      // Verify error boundary UI is displayed\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n      expect(screen.getByTestId('alert-triangle-icon')).toBeInTheDocument();\n      expect(screen.getByTestId('error-boundary-card-title')).toHaveTextContent(\n        'Error',\n      );\n      expect(\n        screen.getByTestId('error-boundary-card-description'),\n      ).toHaveTextContent(\n        'Something went wrong. Please try refreshing the page.',\n      );\n\n      // Verify retry button is present\n      const retryButton = screen.getByTestId('error-boundary-button');\n      expect(retryButton).toBeInTheDocument();\n      expect(retryButton).toHaveTextContent('Try Again');\n      expect(screen.getByTestId('refresh-icon')).toBeInTheDocument();\n    });\n\n    it('should render children normally when no error occurs', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent shouldThrow={false} />\n        </ErrorBoundary>,\n      );\n\n      // Verify normal component is rendered\n      expect(screen.getByTestId('normal-component')).toBeInTheDocument();\n      expect(\n        screen.queryByTestId('error-boundary-card'),\n      ).not.toBeInTheDocument();\n    });\n\n    it('should handle different error types correctly', async () => {\n      const errorTypes = [\n        { message: 'Network error', expected: 'Network error' },\n        { message: 'Validation failed', expected: 'Validation failed' },\n        { message: 'Permission denied', expected: 'Permission denied' },\n        { message: '', expected: '' }, // Empty error message\n      ];\n\n      for (const { message } of errorTypes) {\n        const { unmount } = render(\n          <ErrorBoundary>\n            <ThrowErrorComponent\n              shouldThrow={true}\n              errorMessage={message}\n            />\n          </ErrorBoundary>,\n        );\n\n        expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n        unmount();\n      }\n    });\n  });\n\n  describe('Error Recovery Mechanism', () => {\n    it('should reset error state when retry button is clicked', async () => {\n      let componentKey = 0;\n      let shouldThrow = true;\n\n      const TestWrapper = ({ key }: { key: number }) => (\n        <ErrorBoundary key={key}>\n          <ThrowErrorComponent shouldThrow={shouldThrow} />\n        </ErrorBoundary>\n      );\n\n      const { rerender } = render(<TestWrapper key={componentKey} />);\n\n      // Verify error state\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n\n      // Simulate successful retry by changing component state and key\n      shouldThrow = false;\n      componentKey++;\n\n      // Click retry button (this will reset the error boundary state)\n      const retryButton = screen.getByTestId('error-boundary-button');\n      await user.click(retryButton);\n\n      // Re-render with new key to force remount and updated state\n      rerender(<TestWrapper key={componentKey} />);\n\n      // Verify error boundary is reset and normal component is shown\n      expect(\n        screen.queryByTestId('error-boundary-card'),\n      ).not.toBeInTheDocument();\n      expect(screen.getByTestId('normal-component')).toBeInTheDocument();\n    });\n\n    it('should handle multiple error-recovery cycles', async () => {\n      let componentKey = 0;\n      let shouldThrow = true;\n\n      const TestWrapper = ({ key }: { key: number }) => (\n        <ErrorBoundary key={key}>\n          <ThrowErrorComponent shouldThrow={shouldThrow} />\n        </ErrorBoundary>\n      );\n\n      const { rerender } = render(<TestWrapper key={componentKey} />);\n\n      // First error\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n\n      // First recovery\n      shouldThrow = false;\n      componentKey++;\n      await user.click(screen.getByTestId('error-boundary-button'));\n      rerender(<TestWrapper key={componentKey} />);\n      expect(screen.getByTestId('normal-component')).toBeInTheDocument();\n\n      // Second error\n      shouldThrow = true;\n      componentKey++;\n      rerender(<TestWrapper key={componentKey} />);\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n\n      // Second recovery\n      shouldThrow = false;\n      componentKey++;\n      await user.click(screen.getByTestId('error-boundary-button'));\n      rerender(<TestWrapper key={componentKey} />);\n      expect(screen.getByTestId('normal-component')).toBeInTheDocument();\n    });\n  });\n\n  describe('Custom Fallback Support', () => {\n    it('should render custom fallback when provided', async () => {\n      const customFallback = (\n        <div data-testid='custom-fallback'>Custom error message</div>\n      );\n\n      render(\n        <ErrorBoundary fallback={customFallback}>\n          <ThrowErrorComponent shouldThrow={true} />\n        </ErrorBoundary>,\n      );\n\n      // Verify custom fallback is rendered instead of default\n      expect(screen.getByTestId('custom-fallback')).toBeInTheDocument();\n      expect(\n        screen.queryByTestId('error-boundary-card'),\n      ).not.toBeInTheDocument();\n    });\n\n    it('should use default fallback when custom fallback is not provided', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent shouldThrow={true} />\n        </ErrorBoundary>,\n      );\n\n      // Verify default fallback is rendered\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n      expect(screen.queryByTestId('custom-fallback')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Error Logging and Monitoring', () => {\n    it('should log errors in development environment', async () => {\n      // Create a fresh spy for this test\n      const localConsoleSpy = vi\n        .spyOn(console, 'error')\n        .mockImplementation(() => {});\n\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage='Development error'\n          />\n        </ErrorBoundary>,\n      );\n\n      // Verify error boundary is displayed (which means error was caught)\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n\n      // Wait for componentDidCatch to be called (it's async)\n      await waitFor(\n        () => {\n          expect(localConsoleSpy).toHaveBeenCalledWith(\n            'ErrorBoundary caught an error:',\n            expect.any(Error),\n            expect.any(Object),\n          );\n        },\n        { timeout: 2000 },\n      );\n\n      // Restore the spy\n      localConsoleSpy.mockRestore();\n    });\n\n    it('should handle production environment logging', async () => {\n      // Mock production environment using vi.stubEnv\n      vi.stubEnv('NODE_ENV', 'production');\n\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage='Production error'\n          />\n        </ErrorBoundary>,\n      );\n\n      // In production, should not log to console (would use Sentry instead)\n      // This test verifies the component doesn't crash in production\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n\n      // Restore environment\n      vi.unstubAllEnvs();\n    });\n  });\n\n  describe('Accessibility and User Experience', () => {\n    it('should provide proper accessibility attributes', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent shouldThrow={true} />\n        </ErrorBoundary>,\n      );\n\n      const errorCard = screen.getByTestId('error-boundary-card');\n      const retryButton = screen.getByTestId('error-boundary-button');\n\n      // Verify accessibility structure\n      expect(errorCard).toBeInTheDocument();\n      expect(retryButton).toBeInTheDocument();\n\n      // Verify button is focusable\n      retryButton.focus();\n      expect(document.activeElement).toBe(retryButton);\n    });\n\n    it('should support keyboard navigation', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent shouldThrow={true} />\n        </ErrorBoundary>,\n      );\n\n      const retryButton = screen.getByTestId('error-boundary-button');\n\n      // Verify button is focusable\n      expect(retryButton).toHaveAttribute('tabIndex', '0');\n\n      // Test keyboard activation\n      retryButton.focus();\n      expect(retryButton).toHaveFocus();\n\n      // Test that button can be activated with keyboard\n      // We don't test the actual retry functionality here, just keyboard accessibility\n      expect(retryButton).toBeEnabled();\n\n      // Test Space key activation as well\n      await user.keyboard('{Space}');\n\n      // Verify the error boundary is still showing (since component still throws)\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n    });\n  });\n\n  describe('Edge Cases and Boundary Conditions', () => {\n    it('should handle null/undefined children gracefully', async () => {\n      render(\n        <ErrorBoundary>\n          {null}\n          {undefined}\n        </ErrorBoundary>,\n      );\n\n      // Should render without errors\n      expect(\n        screen.queryByTestId('error-boundary-card'),\n      ).not.toBeInTheDocument();\n    });\n\n    it('should handle errors with missing error messages', async () => {\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage=''\n          />\n        </ErrorBoundary>,\n      );\n\n      // Should still render error boundary\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n    });\n\n    it('should handle very long error messages', async () => {\n      const longErrorMessage = 'A'.repeat(1000);\n\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage={longErrorMessage}\n          />\n        </ErrorBoundary>,\n      );\n\n      // Should render without layout issues\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n    });\n\n    it('should handle special characters in error messages', async () => {\n      const specialCharError = 'é”™è¯¯ä¿¡æ¯ ğŸš¨ <script>alert(\"xss\")</script>';\n\n      render(\n        <ErrorBoundary>\n          <ThrowErrorComponent\n            shouldThrow={true}\n            errorMessage={specialCharError}\n          />\n        </ErrorBoundary>,\n      );\n\n      // Should render safely without XSS\n      expect(screen.getByTestId('error-boundary-card')).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/error-handling-summary.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/form-validation-basic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/form-validation-boundary.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/form-validation-security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/network-errors.test.ts","messages":[{"ruleId":"max-depth","severity":2,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":72,"column":11,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":74,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'primaryError' is defined but never used.","line":110,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fallbackError' is defined but never used.","line":114,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":239,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":239,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'callCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":348,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":348,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Network Error Handling Tests\n *\n * å…¨é¢æµ‹è¯•ç½‘ç»œé”™è¯¯å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬ï¼š\n * - ç½‘ç»œè¶…æ—¶å¤„ç†\n * - è¿æ¥å¤±è´¥å¤„ç†\n * - é—´æ­‡æ€§ç½‘ç»œé”™è¯¯\n * - æ…¢ç½‘ç»œå¤„ç†\n * - é‡è¯•æœºåˆ¶\n * - é™çº§ç­–ç•¥\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport {\n  APIErrorSimulator,\n  ErrorRecoveryTester,\n  NetworkErrorSimulator,\n} from '@/tests/error-scenarios/setup';\n\n// Mock fetch for testing\nconst originalFetch = global.fetch;\n\n// æ¨¡æ‹ŸAPIå®¢æˆ·ç«¯\nclass TestAPIClient {\n  private baseURL: string;\n  private retryAttempts: number;\n  private retryDelay: number;\n\n  constructor(\n    baseURL: string = '/api',\n    retryAttempts: number = 3,\n    retryDelay: number = 100,\n  ) {\n    // å‡å°‘é‡è¯•å»¶è¿Ÿ\n    this.baseURL = baseURL;\n    this.retryAttempts = retryAttempts;\n    this.retryDelay = retryDelay;\n  }\n\n  async get(endpoint: string): Promise<unknown> {\n    return this.request('GET', endpoint);\n  }\n\n  async post(endpoint: string, data?: unknown): Promise<unknown> {\n    return this.request('POST', endpoint, data);\n  }\n\n  private async request(\n    method: string,\n    endpoint: string,\n    data?: unknown,\n  ): Promise<unknown> {\n    const url = `${this.baseURL}${endpoint}`;\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt <= this.retryAttempts; attempt++) {\n      try {\n        const response = await fetch(url, {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          ...(data && { body: JSON.stringify(data) }),\n        });\n\n        if (!response.ok) {\n          const httpError = new Error(\n            `HTTP ${response.status}: ${response.statusText}`,\n          );\n\n          // Don't retry on 4xx client errors (client-side issues)\n          if (response.status >= 400 && response.status < 500) {\n            throw httpError;\n          }\n\n          throw httpError;\n        }\n\n        return await response.json();\n      } catch (error) {\n        lastError = error as Error;\n\n        // Don't retry on 4xx errors or on the last attempt\n        if (attempt === this.retryAttempts) {\n          break;\n        }\n\n        // Check if it's a 4xx error and don't retry\n        if (lastError.message.includes('HTTP 4')) {\n          break;\n        }\n\n        // Wait before retrying\n        await new Promise((resolve) => setTimeout(resolve, this.retryDelay));\n      }\n    }\n\n    throw lastError;\n  }\n\n  // å¸¦é™çº§ç­–ç•¥çš„è¯·æ±‚\n  async requestWithFallback<T>(\n    primaryEndpoint: string,\n    fallbackEndpoint: string,\n    defaultValue: T,\n  ): Promise<{ data: T; source: 'primary' | 'fallback' | 'default' }> {\n    try {\n      const data = (await this.get(primaryEndpoint)) as T;\n      return { data, source: 'primary' };\n    } catch (primaryError) {\n      try {\n        const data = (await this.get(fallbackEndpoint)) as T;\n        return { data, source: 'fallback' };\n      } catch (fallbackError) {\n        return { data: defaultValue, source: 'default' };\n      }\n    }\n  }\n}\n\ndescribe('Network Error Handling Tests', () => {\n  let networkSimulator: NetworkErrorSimulator;\n  let apiSimulator: APIErrorSimulator;\n  let recoveryTester: ErrorRecoveryTester;\n  let apiClient: TestAPIClient;\n\n  beforeEach(() => {\n    networkSimulator = new NetworkErrorSimulator();\n    apiSimulator = new APIErrorSimulator();\n    recoveryTester = new ErrorRecoveryTester();\n    apiClient = new TestAPIClient();\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    networkSimulator.restore();\n    global.fetch = originalFetch;\n    vi.restoreAllMocks();\n  });\n\n  describe('Network Timeout Handling', () => {\n    it('should handle network timeout errors correctly', async () => {\n      networkSimulator.simulateTimeout(1000);\n\n      await expect(apiClient.get('/test')).rejects.toThrow('Network timeout');\n    });\n\n    it('should retry on timeout and eventually succeed', async () => {\n      let callCount = 0;\n      global.fetch = vi.fn().mockImplementation(() => {\n        callCount++;\n        if (callCount <= 2) {\n          return Promise.reject(new Error('Network timeout'));\n        }\n        return Promise.resolve({\n          ok: true,\n          json: async () => ({ success: true, data: 'success' }),\n        });\n      });\n\n      const result = await apiClient.get('/test');\n      expect(result).toEqual({ success: true, data: 'success' });\n      expect(callCount).toBe(3); // 2 failures + 1 success\n    });\n\n    it('should fail after maximum retry attempts on persistent timeout', async () => {\n      networkSimulator.simulateTimeout(100);\n\n      const startTime = Date.now();\n      await expect(apiClient.get('/test')).rejects.toThrow('Network timeout');\n      const endTime = Date.now();\n\n      // Should have attempted retries (4 total attempts with delays)\n      expect(endTime - startTime).toBeGreaterThan(300); // 3 retry delays of 100ms each\n    }, 10000); // ä¸ºè¿™ä¸ªæµ‹è¯•è®¾ç½®10ç§’è¶…æ—¶\n  });\n\n  describe('Connection Failure Handling', () => {\n    it('should handle connection failure errors', async () => {\n      networkSimulator.simulateConnectionFailure();\n\n      await expect(apiClient.get('/test')).rejects.toThrow(\n        'Network connection failed',\n      );\n    });\n\n    it('should handle DNS resolution failures', async () => {\n      global.fetch = vi\n        .fn()\n        .mockRejectedValue(new Error('getaddrinfo ENOTFOUND api.example.com'));\n\n      await expect(apiClient.get('/test')).rejects.toThrow(\n        'getaddrinfo ENOTFOUND',\n      );\n    });\n\n    it('should handle CORS errors', async () => {\n      global.fetch = vi\n        .fn()\n        .mockRejectedValue(\n          new Error(\"CORS policy: No 'Access-Control-Allow-Origin' header\"),\n        );\n\n      await expect(apiClient.get('/test')).rejects.toThrow('CORS policy');\n    });\n  });\n\n  describe('Intermittent Network Errors', () => {\n    it('should handle intermittent network failures with retry', async () => {\n      let callCount = 0;\n      global.fetch = vi.fn().mockImplementation(() => {\n        callCount++;\n        // Fail first 2 calls, succeed on 3rd\n        if (callCount <= 2) {\n          return Promise.reject(new Error('Intermittent network failure'));\n        }\n        return Promise.resolve({\n          ok: true,\n          json: async () => ({ success: true, attempt: callCount }),\n        });\n      });\n\n      const result = await apiClient.get('/test');\n      expect(result).toEqual({ success: true, attempt: 3 });\n      expect(callCount).toBe(3);\n    });\n\n    it('should handle random network failures', async () => {\n      // Simulate 70% failure rate\n      networkSimulator.simulateIntermittentFailure(0.7);\n\n      const results = [];\n      const attempts = 10;\n\n      for (let i = 0; i < attempts; i++) {\n        try {\n          await apiClient.get('/test');\n          results.push('success');\n        } catch (error) {\n          results.push('failure');\n        }\n      }\n\n      // Should have some failures due to 70% failure rate\n      const failures = results.filter((r) => r === 'failure').length;\n      expect(failures).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Slow Network Handling', () => {\n    it('should handle slow network responses', async () => {\n      networkSimulator.simulateSlowNetwork(1000); // å‡å°‘å»¶è¿Ÿæ—¶é—´\n\n      const startTime = Date.now();\n\n      global.fetch = vi.fn().mockImplementation(\n        () =>\n          new Promise((resolve) => {\n            setTimeout(() => {\n              resolve({\n                ok: true,\n                json: async () => ({ success: true, data: 'slow response' }),\n              });\n            }, 1000); // å‡å°‘åˆ°1ç§’\n          }),\n      );\n\n      const result = await apiClient.get('/test');\n      const endTime = Date.now();\n\n      expect(result).toEqual({ success: true, data: 'slow response' });\n      expect(endTime - startTime).toBeGreaterThanOrEqual(1000); // è°ƒæ•´æœŸæœ›å€¼\n    }, 10000); // ä¸ºè¿™ä¸ªæµ‹è¯•è®¾ç½®10ç§’è¶…æ—¶\n\n    it('should timeout on extremely slow responses', async () => {\n      // Simulate request that takes longer than timeout\n      global.fetch = vi.fn().mockImplementation(\n        () =>\n          new Promise((_, reject) => {\n            setTimeout(() => {\n              reject(new Error('Request timeout'));\n            }, 2000); // å‡å°‘åˆ°2ç§’ï¼Œé¿å…æµ‹è¯•è¶…æ—¶\n          }),\n      );\n\n      await expect(apiClient.get('/test')).rejects.toThrow('Request timeout');\n    }, 15000); // ä¸ºè¿™ä¸ªç‰¹å®šæµ‹è¯•è®¾ç½®15ç§’è¶…æ—¶\n  });\n\n  describe('HTTP Status Error Handling', () => {\n    it('should handle 4xx client errors correctly', async () => {\n      const clientErrors = [400, 401, 403, 404, 422, 429];\n\n      for (const status of clientErrors) {\n        apiSimulator.simulateHTTPError(status);\n\n        await expect(apiClient.get('/test')).rejects.toThrow(`HTTP ${status}`);\n      }\n    }, 20000); // ä¸ºå¾ªç¯æµ‹è¯•è®¾ç½®20ç§’è¶…æ—¶\n\n    it('should handle 5xx server errors correctly', async () => {\n      const serverErrors = [500, 502, 503, 504];\n\n      for (const status of serverErrors) {\n        apiSimulator.simulateHTTPError(status);\n\n        await expect(apiClient.get('/test')).rejects.toThrow(`HTTP ${status}`);\n      }\n    }, 20000); // ä¸ºå¾ªç¯æµ‹è¯•è®¾ç½®20ç§’è¶…æ—¶\n\n    it('should retry on 5xx errors but not on 4xx errors', async () => {\n      let callCount = 0;\n\n      // First test: 500 error (should retry)\n      global.fetch = vi.fn().mockImplementation(() => {\n        callCount++;\n        return Promise.resolve({\n          ok: false,\n          status: 500,\n          statusText: 'Internal Server Error',\n        });\n      });\n\n      await expect(apiClient.get('/test')).rejects.toThrow('HTTP 500');\n      expect(callCount).toBe(4); // 1 initial + 3 retries\n\n      // Reset for second test\n      callCount = 0;\n\n      // Second test: 404 error (should not retry)\n      global.fetch = vi.fn().mockImplementation(() => {\n        callCount++;\n        return Promise.resolve({\n          ok: false,\n          status: 404,\n          statusText: 'Not Found',\n        });\n      });\n\n      await expect(apiClient.get('/test')).rejects.toThrow('HTTP 404');\n      expect(callCount).toBe(1); // No retries for 4xx errors\n    });\n  });\n\n  describe('Fallback and Degradation Strategies', () => {\n    it('should use fallback endpoint when primary fails', async () => {\n      // Primary endpoint fails\n      let callCount = 0;\n      global.fetch = vi.fn().mockImplementation((url) => {\n        callCount++;\n        if (url.includes('/primary')) {\n          return Promise.reject(new Error('Primary endpoint failed'));\n        }\n        if (url.includes('/fallback')) {\n          return Promise.resolve({\n            ok: true,\n            json: async () => ({ success: true, source: 'fallback' }),\n          });\n        }\n        return Promise.reject(new Error('Unknown endpoint'));\n      });\n\n      const result = await apiClient.requestWithFallback(\n        '/primary',\n        '/fallback',\n        { success: false, source: 'default' },\n      );\n\n      expect(result).toEqual({\n        data: { success: true, source: 'fallback' },\n        source: 'fallback',\n      });\n    });\n\n    it('should use default value when both primary and fallback fail', async () => {\n      global.fetch = vi\n        .fn()\n        .mockRejectedValue(new Error('All endpoints failed'));\n\n      const result = await apiClient.requestWithFallback(\n        '/primary',\n        '/fallback',\n        { success: false, source: 'default' },\n      );\n\n      expect(result).toEqual({\n        data: { success: false, source: 'default' },\n        source: 'default',\n      });\n    });\n\n    it('should prefer primary endpoint when available', async () => {\n      global.fetch = vi.fn().mockImplementation((url) => {\n        if (url.includes('/primary')) {\n          return Promise.resolve({\n            ok: true,\n            json: async () => ({ success: true, source: 'primary' }),\n          });\n        }\n        return Promise.resolve({\n          ok: true,\n          json: async () => ({ success: true, source: 'fallback' }),\n        });\n      });\n\n      const result = await apiClient.requestWithFallback(\n        '/primary',\n        '/fallback',\n        { success: false, source: 'default' },\n      );\n\n      expect(result).toEqual({\n        data: { success: true, source: 'primary' },\n        source: 'primary',\n      });\n    });\n  });\n\n  describe('Error Recovery Mechanisms', () => {\n    it('should test retry mechanism with configurable attempts', async () => {\n      const operation = vi\n        .fn()\n        .mockRejectedValueOnce(new Error('Attempt 1 failed'))\n        .mockRejectedValueOnce(new Error('Attempt 2 failed'))\n        .mockResolvedValueOnce('Success');\n\n      const result = await recoveryTester.testRetryMechanism(\n        operation,\n        'test-operation',\n        3,\n        2,\n      );\n\n      expect(result.success).toBe(true);\n      expect(result.attempts).toBe(3);\n      expect(operation).toHaveBeenCalledTimes(3);\n    });\n\n    it('should test fallback mechanism', async () => {\n      const primaryOperation = vi.fn().mockImplementation(() => {\n        throw new Error('Primary failed');\n      });\n      const fallbackOperation = vi.fn().mockReturnValue('Fallback success');\n\n      const result = recoveryTester.testFallbackMechanism(\n        primaryOperation,\n        fallbackOperation,\n      );\n\n      expect(result.result).toBe('Fallback success');\n      expect(result.usedFallback).toBe(true);\n      expect(primaryOperation).toHaveBeenCalledTimes(1);\n      expect(fallbackOperation).toHaveBeenCalledTimes(1);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/setup.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":327,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":327,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Error Scenarios Testing Setup\n *\n * æä¾›å…¨é¢çš„é”™è¯¯å¤„ç†æµ‹è¯•åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ï¼š\n * - ç½‘ç»œé”™è¯¯æ¨¡æ‹Ÿ\n * - APIé”™è¯¯å¤„ç†\n * - è¾¹ç•Œæ¡ä»¶æµ‹è¯•\n * - å¼‚å¸¸æƒ…å†µå¤„ç†\n * - é”™è¯¯æ¢å¤æœºåˆ¶\n */\n\nimport React, { type ReactElement, type RenderOptions } from 'react';\nimport { render } from '@testing-library/react';\nimport { vi } from 'vitest';\n\n// é”™è¯¯ç±»å‹å®šä¹‰\nexport interface ErrorScenario {\n  name: string;\n  type: 'network' | 'api' | 'validation' | 'boundary' | 'system';\n  description: string;\n  setup: () => void;\n  cleanup: () => void;\n  expectedBehavior: string;\n}\n\n// ç½‘ç»œé”™è¯¯æ¨¡æ‹Ÿå™¨\nexport class NetworkErrorSimulator {\n  private originalFetch: typeof global.fetch;\n\n  constructor() {\n    this.originalFetch = global.fetch;\n  }\n\n  // æ¨¡æ‹Ÿç½‘ç»œè¶…æ—¶\n  simulateTimeout(delay: number = 5000): void {\n    global.fetch = vi.fn().mockImplementation(\n      () =>\n        new Promise((_, reject) => {\n          setTimeout(() => reject(new Error('Network timeout')), delay);\n        }),\n    );\n  }\n\n  // æ¨¡æ‹Ÿç½‘ç»œè¿æ¥å¤±è´¥\n  simulateConnectionFailure(): void {\n    global.fetch = vi\n      .fn()\n      .mockRejectedValue(\n        new Error('Failed to fetch: Network connection failed'),\n      );\n  }\n\n  // æ¨¡æ‹Ÿé—´æ­‡æ€§ç½‘ç»œé”™è¯¯\n  simulateIntermittentFailure(failureRate: number = 0.5): void {\n    global.fetch = vi.fn().mockImplementation((url, options) => {\n      if (\n        crypto &&\n        crypto.getRandomValues(new Uint32Array(1))[0]! / 2 ** 32 < failureRate\n      ) {\n        return Promise.reject(new Error('Intermittent network failure'));\n      }\n      return this.originalFetch(url, options);\n    });\n  }\n\n  // æ¨¡æ‹Ÿæ…¢ç½‘ç»œ\n  simulateSlowNetwork(delay: number = 2000): void {\n    global.fetch = vi.fn().mockImplementation(\n      (url, options) =>\n        new Promise((resolve) => {\n          setTimeout(() => {\n            resolve(this.originalFetch(url, options));\n          }, delay);\n        }),\n    );\n  }\n\n  // æ¢å¤åŸå§‹fetch\n  restore(): void {\n    global.fetch = this.originalFetch;\n  }\n}\n\n// APIé”™è¯¯æ¨¡æ‹Ÿå™¨\nexport class APIErrorSimulator {\n  // æ¨¡æ‹ŸHTTPçŠ¶æ€ç é”™è¯¯\n  simulateHTTPError(status: number, message?: string): void {\n    global.fetch = vi.fn().mockResolvedValue({\n      ok: false,\n      status,\n      statusText: this.getStatusText(status),\n      json: async () => ({\n        success: false,\n        error: message || this.getDefaultErrorMessage(status),\n      }),\n    } as Response);\n  }\n\n  // æ¨¡æ‹ŸæœåŠ¡å™¨å†…éƒ¨é”™è¯¯\n  simulateServerError(): void {\n    this.simulateHTTPError(500, 'Internal Server Error');\n  }\n\n  // æ¨¡æ‹Ÿè®¤è¯é”™è¯¯\n  simulateAuthError(): void {\n    this.simulateHTTPError(401, 'Unauthorized');\n  }\n\n  // æ¨¡æ‹Ÿæƒé™é”™è¯¯\n  simulatePermissionError(): void {\n    this.simulateHTTPError(403, 'Forbidden');\n  }\n\n  // æ¨¡æ‹Ÿèµ„æºä¸å­˜åœ¨é”™è¯¯\n  simulateNotFoundError(): void {\n    this.simulateHTTPError(404, 'Resource not found');\n  }\n\n  // æ¨¡æ‹Ÿè¯·æ±‚è¿‡äºé¢‘ç¹é”™è¯¯\n  simulateRateLimitError(): void {\n    this.simulateHTTPError(429, 'Too Many Requests');\n  }\n\n  // æ¨¡æ‹Ÿæ— æ•ˆJSONå“åº”\n  simulateInvalidJSONResponse(): void {\n    global.fetch = vi.fn().mockResolvedValue({\n      ok: true,\n      status: 200,\n      headers: new Headers(),\n      redirected: false,\n      statusText: 'OK',\n      type: 'basic' as Response['type'],\n      url: '',\n      body: null,\n      bodyUsed: false,\n      clone: vi.fn(),\n      arrayBuffer: vi.fn(),\n      blob: vi.fn(),\n      formData: vi.fn(),\n      text: vi.fn(),\n      bytes: vi.fn().mockResolvedValue(new Uint8Array()),\n      json: async () => {\n        throw new Error('Unexpected token in JSON');\n      },\n    } as Response);\n  }\n\n  private getStatusText(status: number): string {\n    const statusTexts = new Map([\n      [400, 'Bad Request'],\n      [401, 'Unauthorized'],\n      [403, 'Forbidden'],\n      [404, 'Not Found'],\n      [429, 'Too Many Requests'],\n      [500, 'Internal Server Error'],\n      [502, 'Bad Gateway'],\n      [503, 'Service Unavailable'],\n    ]);\n    return statusTexts.get(status) || 'Unknown Error';\n  }\n\n  private getDefaultErrorMessage(status: number): string {\n    const messages = new Map([\n      [400, 'The request was invalid'],\n      [401, 'Authentication required'],\n      [403, 'Access denied'],\n      [404, 'The requested resource was not found'],\n      [429, 'Too many requests, please try again later'],\n      [500, 'An internal server error occurred'],\n      [502, 'Bad gateway'],\n      [503, 'Service temporarily unavailable'],\n    ]);\n    return messages.get(status) || 'An unknown error occurred';\n  }\n}\n\n// è¾¹ç•Œæ¡ä»¶æµ‹è¯•å·¥å…·\nexport class BoundaryConditionTester {\n  // ç”Ÿæˆæå¤§å­—ç¬¦ä¸²\n  generateLargeString(size: number): string {\n    return 'a'.repeat(size);\n  }\n\n  // ç”Ÿæˆç‰¹æ®Šå­—ç¬¦å­—ç¬¦ä¸²\n  generateSpecialCharString(): string {\n    return '!@#$%^&*()_+-=[]{}|;:,.<>?`~\\'\"\\\\';\n  }\n\n  // ç”ŸæˆUnicodeå­—ç¬¦ä¸²\n  generateUnicodeString(): string {\n    return 'ä½ å¥½ä¸–ç•ŒğŸŒğŸš€ğŸ’»ğŸ‰';\n  }\n\n  // ç”ŸæˆSQLæ³¨å…¥å°è¯•å­—ç¬¦ä¸²\n  generateSQLInjectionString(): string {\n    return \"'; DROP TABLE users; --\";\n  }\n\n  // ç”ŸæˆXSSå°è¯•å­—ç¬¦ä¸²\n  generateXSSString(): string {\n    return '<script>alert(\"XSS\")</script>';\n  }\n\n  // ç”Ÿæˆæå¤§æ•°å­—\n  generateLargeNumber(): number {\n    return Number.MAX_SAFE_INTEGER;\n  }\n\n  // ç”Ÿæˆè´Ÿæ•°\n  generateNegativeNumber(): number {\n    return -1000000;\n  }\n\n  // ç”Ÿæˆæ— æ•ˆæ—¥æœŸ\n  generateInvalidDate(): string {\n    return '2023-13-45';\n  }\n\n  // ç”Ÿæˆç©ºå€¼å˜ä½“\n  generateNullVariants(): Array<unknown> {\n    return [null, undefined, '', 0, false, NaN, {}, []];\n  }\n}\n\n// é”™è¯¯è¾¹ç•Œæµ‹è¯•ç»„ä»¶å·¥å‚\nexport function createTestErrorBoundary() {\n  return class TestErrorBoundary extends React.Component<\n    { children: React.ReactNode; onError?: (error: Error) => void },\n    { hasError: boolean; error?: Error }\n  > {\n    constructor(props: {\n      children: React.ReactNode;\n      onError?: (error: Error) => void;\n    }) {\n      super(props);\n      this.state = { hasError: false };\n    }\n\n    static getDerivedStateFromError(error: Error) {\n      return { hasError: true, error };\n    }\n\n    override componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n      this.props.onError?.(error);\n      console.error('Test Error Boundary caught error:', error, errorInfo);\n    }\n\n    override render() {\n      if (this.state.hasError) {\n        return React.createElement(\n          'div',\n          { 'data-testid': 'test-error-boundary' },\n          React.createElement('h2', null, 'Test Error Boundary'),\n          React.createElement('p', null, `Error: ${this.state.error?.message}`),\n        );\n      }\n\n      return this.props.children;\n    }\n  };\n}\n\n// é”™è¯¯åœºæ™¯æ¸²æŸ“å™¨\nexport function renderWithErrorScenario(\n  ui: ReactElement,\n  scenario: ErrorScenario,\n  options?: RenderOptions,\n) {\n  // è®¾ç½®é”™è¯¯åœºæ™¯\n  scenario.setup();\n\n  try {\n    const result = render(ui, options);\n    return {\n      ...result,\n      cleanup: () => {\n        scenario.cleanup();\n        result.unmount();\n      },\n    };\n  } catch (error) {\n    scenario.cleanup();\n    throw error;\n  }\n}\n\n// é”™è¯¯æ¢å¤æµ‹è¯•å·¥å…·\nexport class ErrorRecoveryTester {\n  // æµ‹è¯•é‡è¯•æœºåˆ¶\n  async testRetryMechanism(\n    operation: () => Promise<unknown>,\n    _operationId: string,\n    maxRetries: number = 3,\n    backoffMs: number = 10,\n  ): Promise<{ success: boolean; attempts: number; lastError?: Error | null }> {\n    let attempts = 0;\n    let lastError: Error | null = null;\n\n    for (let i = 0; i <= maxRetries; i++) {\n      attempts++;\n      try {\n        await operation();\n        return { success: true, attempts };\n      } catch (error) {\n        lastError = error as Error;\n        if (i === maxRetries) {\n          break;\n        }\n        // ç®€å•çš„é€€é¿å»¶è¿Ÿ\n        if (backoffMs > 0) {\n          await new Promise((resolve) => setTimeout(resolve, backoffMs));\n        }\n      }\n    }\n\n    return { success: false, attempts, lastError };\n  }\n\n  // æµ‹è¯•é™çº§æœºåˆ¶\n  testFallbackMechanism<T>(\n    primaryOperation: () => T,\n    fallbackOperation: () => T,\n  ): { result: T; usedFallback: boolean } {\n    try {\n      const result = primaryOperation();\n      return { result, usedFallback: false };\n    } catch (error) {\n      const result = fallbackOperation();\n      return { result, usedFallback: true };\n    }\n  }\n}\n\n// å¯¼å‡ºæ‰€æœ‰å·¥å…·\nexport const errorTestingUtils = {\n  NetworkErrorSimulator,\n  APIErrorSimulator,\n  BoundaryConditionTester,\n  ErrorRecoveryTester,\n  createTestErrorBoundary,\n  renderWithErrorScenario,\n};\n\n// å¸¸ç”¨é”™è¯¯åœºæ™¯é¢„è®¾\nexport const commonErrorScenarios: ErrorScenario[] = [\n  {\n    name: 'Network Timeout',\n    type: 'network',\n    description: 'Simulates network request timeout',\n    setup: () => new NetworkErrorSimulator().simulateTimeout(),\n    cleanup: () => new NetworkErrorSimulator().restore(),\n    expectedBehavior: 'Should show timeout error message and retry option',\n  },\n  {\n    name: 'Server Error',\n    type: 'api',\n    description: 'Simulates 500 Internal Server Error',\n    setup: () => new APIErrorSimulator().simulateServerError(),\n    cleanup: () => vi.restoreAllMocks(),\n    expectedBehavior:\n      'Should show generic error message and contact support option',\n  },\n  {\n    name: 'Authentication Error',\n    type: 'api',\n    description: 'Simulates 401 Unauthorized error',\n    setup: () => new APIErrorSimulator().simulateAuthError(),\n    cleanup: () => vi.restoreAllMocks(),\n    expectedBehavior: 'Should redirect to login page',\n  },\n];\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/error-scenarios/system-errors.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":44,"column":11,"nodeType":"MemberExpression","endLine":44,"endColumn":35},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":205,"column":7,"nodeType":"MemberExpression","endLine":205,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":206,"column":41,"nodeType":"MemberExpression","endLine":206,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * System Error and Exception Handling Tests\n *\n * å…¨é¢æµ‹è¯•ç³»ç»Ÿçº§é”™è¯¯å¤„ç†ï¼ŒåŒ…æ‹¬ï¼š\n * - å†…å­˜ä¸è¶³é”™è¯¯\n * - æ–‡ä»¶ç³»ç»Ÿé”™è¯¯\n * - æƒé™é”™è¯¯\n * - èµ„æºè€—å°½\n * - å¼‚æ­¥é”™è¯¯å¤„ç†\n * - æœªæ•è·å¼‚å¸¸\n */\n\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\n\n// æ¨¡æ‹Ÿç³»ç»Ÿé”™è¯¯åœºæ™¯\nclass SystemErrorSimulator {\n  // æ¨¡æ‹Ÿå†…å­˜ä¸è¶³é”™è¯¯\n  simulateOutOfMemoryError(): void {\n    const originalError = global.Error;\n    global.Error = class extends originalError {\n      constructor(message?: string) {\n        super(message);\n        if (message?.includes('memory')) {\n          this.name = 'RangeError';\n          this.message = 'Maximum call stack size exceeded';\n        }\n      }\n    } as unknown as ErrorConstructor;\n  }\n\n  // æ¨¡æ‹Ÿæ–‡ä»¶ç³»ç»Ÿé”™è¯¯\n  simulateFileSystemError(\n    errorType: 'ENOENT' | 'EACCES' | 'EMFILE' | 'ENOSPC',\n  ): Error {\n    const errorMessages = {\n      ENOENT: 'ENOENT: no such file or directory',\n      EACCES: 'EACCES: permission denied',\n      EMFILE: 'EMFILE: too many open files',\n      ENOSPC: 'ENOSPC: no space left on device',\n    };\n\n    const error = new Error(\n      Object.hasOwn(errorMessages, errorType)\n        ? errorMessages[errorType]\n        : 'Unknown error',\n    );\n    (error as unknown).code = errorType;\n    (error as unknown).errno = -2;\n    return error;\n  }\n\n  // æ¨¡æ‹Ÿç½‘ç»œèµ„æºè€—å°½\n  simulateResourceExhaustion(): void {\n    global.fetch = vi\n      .fn()\n      .mockRejectedValue(new Error('ECONNRESET: Connection reset by peer'));\n  }\n\n  // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œè¶…æ—¶\n  simulateAsyncTimeout(delay: number = 5000): Promise<never> {\n    return new Promise((_, reject) => {\n      setTimeout(() => {\n        reject(new Error('Operation timed out'));\n      }, delay);\n    });\n  }\n\n  // æ¢å¤åŸå§‹çŠ¶æ€\n  restore(): void {\n    vi.restoreAllMocks();\n  }\n}\n\n// é”™è¯¯å¤„ç†å™¨ç±»\nclass ErrorHandler {\n  private errorLog: Array<{\n    error: Error;\n    timestamp: Date;\n    context?: Record<string, unknown>;\n  }> = [];\n  private retryAttempts: Map<string, number> = new Map();\n\n  // å¤„ç†ç³»ç»Ÿé”™è¯¯\n  handleSystemError(\n    error: Error,\n    context?: Record<string, unknown>,\n  ): { handled: boolean; action: string } {\n    this.logError(error, context);\n\n    // æ ¹æ®é”™è¯¯ç±»å‹å†³å®šå¤„ç†ç­–ç•¥\n    if (error.message.includes('ENOENT')) {\n      return { handled: true, action: 'create_missing_resource' };\n    }\n\n    if (error.message.includes('EACCES')) {\n      return { handled: true, action: 'request_permissions' };\n    }\n\n    if (error.message.includes('EMFILE')) {\n      return { handled: true, action: 'close_unused_files' };\n    }\n\n    if (error.message.includes('ENOSPC')) {\n      return { handled: true, action: 'cleanup_disk_space' };\n    }\n\n    if (error.message.includes('timeout')) {\n      return { handled: true, action: 'retry_with_backoff' };\n    }\n\n    if (\n      error.message.includes('memory') ||\n      error.message.includes('stack size exceeded')\n    ) {\n      return { handled: true, action: 'garbage_collect' };\n    }\n\n    return { handled: false, action: 'escalate_to_admin' };\n  }\n\n  // é‡è¯•æœºåˆ¶\n  async retryOperation<T>(\n    operation: () => Promise<T>,\n    operationId: string,\n    maxRetries: number = 3,\n    backoffMs: number = 1000,\n  ): Promise<T> {\n    const currentAttempts = this.retryAttempts.get(operationId) || 0;\n\n    try {\n      const result = await operation();\n      this.retryAttempts.delete(operationId); // æˆåŠŸåæ¸…é™¤é‡è¯•è®¡æ•°\n      return result;\n    } catch (error) {\n      if (currentAttempts >= maxRetries) {\n        this.retryAttempts.delete(operationId);\n        throw new Error(\n          `Operation failed after ${maxRetries} retries: ${(error as Error).message}`,\n        );\n      }\n\n      this.retryAttempts.set(operationId, currentAttempts + 1);\n\n      // æŒ‡æ•°é€€é¿\n      const delay = backoffMs * 2 ** currentAttempts;\n      await new Promise((resolve) => setTimeout(resolve, delay));\n\n      return this.retryOperation(operation, operationId, maxRetries, backoffMs);\n    }\n  }\n\n  // é™çº§å¤„ç†\n  async handleWithFallback<T>(\n    primaryOperation: () => Promise<T>,\n    fallbackOperation: () => Promise<T>,\n    defaultValue: T,\n  ): Promise<{ result: T; source: 'primary' | 'fallback' | 'default' }> {\n    try {\n      const result = await primaryOperation();\n      return { result, source: 'primary' };\n    } catch (primaryError) {\n      this.logError(primaryError as Error, { operation: 'primary' });\n\n      try {\n        const result = await fallbackOperation();\n        return { result, source: 'fallback' };\n      } catch (fallbackError) {\n        this.logError(fallbackError as Error, { operation: 'fallback' });\n        return { result: defaultValue, source: 'default' };\n      }\n    }\n  }\n\n  // è®°å½•é”™è¯¯\n  private logError(error: Error, context?: Record<string, unknown>): void {\n    this.errorLog.push({\n      error,\n      timestamp: new Date(),\n      context,\n    });\n  }\n\n  // è·å–é”™è¯¯æ—¥å¿—\n  getErrorLog(): Array<{\n    error: Error;\n    timestamp: Date;\n    context?: Record<string, unknown>;\n  }> {\n    return [...this.errorLog];\n  }\n\n  // æ¸…é™¤é”™è¯¯æ—¥å¿—\n  clearErrorLog(): void {\n    this.errorLog = [];\n  }\n\n  // è·å–é”™è¯¯ç»Ÿè®¡\n  getErrorStats(): { total: number; byType: Record<string, number> } {\n    const total = this.errorLog.length;\n    const byType: Record<string, number> = {};\n\n    this.errorLog.forEach(({ error }) => {\n      const type = error.constructor.name;\n\n      byType[type] =\n        ((Object.hasOwn(byType, type) ? byType[type] : null) || 0) + 1;\n    });\n\n    return { total, byType };\n  }\n}\n\ndescribe('System Error and Exception Handling Tests', () => {\n  let systemSimulator: SystemErrorSimulator;\n  let errorHandler: ErrorHandler;\n\n  beforeEach(() => {\n    systemSimulator = new SystemErrorSimulator();\n    errorHandler = new ErrorHandler();\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    systemSimulator.restore();\n    vi.restoreAllMocks();\n  });\n\n  describe('File System Error Handling', () => {\n    it('should handle file not found errors', () => {\n      const error = systemSimulator.simulateFileSystemError('ENOENT');\n      const result = errorHandler.handleSystemError(error);\n\n      expect(result.handled).toBe(true);\n      expect(result.action).toBe('create_missing_resource');\n    });\n\n    it('should handle permission denied errors', () => {\n      const error = systemSimulator.simulateFileSystemError('EACCES');\n      const result = errorHandler.handleSystemError(error);\n\n      expect(result.handled).toBe(true);\n      expect(result.action).toBe('request_permissions');\n    });\n\n    it('should handle too many open files errors', () => {\n      const error = systemSimulator.simulateFileSystemError('EMFILE');\n      const result = errorHandler.handleSystemError(error);\n\n      expect(result.handled).toBe(true);\n      expect(result.action).toBe('close_unused_files');\n    });\n\n    it('should handle disk space errors', () => {\n      const error = systemSimulator.simulateFileSystemError('ENOSPC');\n      const result = errorHandler.handleSystemError(error);\n\n      expect(result.handled).toBe(true);\n      expect(result.action).toBe('cleanup_disk_space');\n    });\n  });\n\n  describe('Memory and Resource Management', () => {\n    it('should handle out of memory errors', () => {\n      const memoryError = new Error('Maximum call stack size exceeded');\n      const result = errorHandler.handleSystemError(memoryError);\n\n      expect(result.handled).toBe(true);\n      expect(result.action).toBe('garbage_collect');\n    });\n\n    it('should handle resource exhaustion', async () => {\n      systemSimulator.simulateResourceExhaustion();\n\n      expect(global.fetch).toHaveBeenCalledTimes(0);\n\n      // Test that fetch will reject\n      await expect(fetch('/test')).rejects.toThrow('ECONNRESET');\n    });\n\n    it('should handle large memory allocations gracefully', () => {\n      // Simulate attempting to allocate large amounts of memory\n      const largeArrayTest = () => {\n        try {\n          // This would normally cause memory issues\n          const largeArray = new Array(Number.MAX_SAFE_INTEGER);\n          return largeArray;\n        } catch (error) {\n          return errorHandler.handleSystemError(error as Error);\n        }\n      };\n\n      const result = largeArrayTest();\n      expect(result).toBeDefined();\n    });\n  });\n\n  describe('Async Error Handling', () => {\n    it('should handle async operation timeouts', async () => {\n      const timeoutPromise = systemSimulator.simulateAsyncTimeout(100);\n\n      await expect(timeoutPromise).rejects.toThrow('Operation timed out');\n    });\n\n    it('should handle unhandled promise rejections', async () => {\n      const unhandledRejections: Array<{\n        reason: unknown;\n        promise: Promise<unknown>;\n      }> = [];\n\n      // Mock unhandled rejection handler\n      const originalHandler = process.listeners('unhandledRejection');\n      process.removeAllListeners('unhandledRejection');\n\n      process.on('unhandledRejection', (reason, promise) => {\n        unhandledRejections.push({ reason, promise });\n      });\n\n      // Create unhandled rejection\n      Promise.reject(new Error('Unhandled async error'));\n\n      // Wait for event loop\n      await new Promise((resolve) => setTimeout(resolve, 10));\n\n      expect(unhandledRejections).toHaveLength(1);\n      expect(unhandledRejections[0]?.reason.message).toBe(\n        'Unhandled async error',\n      );\n\n      // Restore original handlers\n      process.removeAllListeners('unhandledRejection');\n      originalHandler.forEach((handler) => {\n        process.on('unhandledRejection', handler as (...args: any[]) => void);\n      });\n    });\n\n    it('should handle concurrent async errors', async () => {\n      const operations = Array.from({ length: 10 }, (_, i) =>\n        Promise.reject(new Error(`Async error ${i}`)),\n      );\n\n      const results = await Promise.allSettled(operations);\n\n      expect(results).toHaveLength(10);\n      results.forEach((result, index) => {\n        expect(result.status).toBe('rejected');\n        expect((result as PromiseRejectedResult).reason.message).toBe(\n          `Async error ${index}`,\n        );\n      });\n    });\n  });\n\n  describe('Retry Mechanisms', () => {\n    it('should retry failed operations with exponential backoff', async () => {\n      let attemptCount = 0;\n      const failingOperation = async () => {\n        attemptCount++;\n        if (attemptCount < 3) {\n          throw new Error(`Attempt ${attemptCount} failed`);\n        }\n        return `Success on attempt ${attemptCount}`;\n      };\n\n      const result = await errorHandler.retryOperation(\n        failingOperation,\n        'test-operation',\n        3,\n        10, // Short delay for testing\n      );\n\n      expect(result).toBe('Success on attempt 3');\n      expect(attemptCount).toBe(3);\n    });\n\n    it('should fail after maximum retry attempts', async () => {\n      const alwaysFailingOperation = async () => {\n        throw new Error('Always fails');\n      };\n\n      await expect(\n        errorHandler.retryOperation(\n          alwaysFailingOperation,\n          'failing-operation',\n          2,\n          10,\n        ),\n      ).rejects.toThrow('Operation failed after 2 retries');\n    });\n\n    it('should handle retry with different error types', async () => {\n      const errorTypes = ['Network error', 'Timeout error', 'Server error'];\n      let attemptCount = 0;\n\n      const varyingErrorOperation = async () => {\n        const errorType = errorTypes[attemptCount % errorTypes.length];\n        attemptCount++;\n\n        if (attemptCount < 4) {\n          throw new Error(errorType);\n        }\n        return 'Success';\n      };\n\n      const result = await errorHandler.retryOperation(\n        varyingErrorOperation,\n        'varying-error-operation',\n        5,\n        10,\n      );\n\n      expect(result).toBe('Success');\n      expect(attemptCount).toBe(4);\n    });\n  });\n\n  describe('Fallback and Degradation', () => {\n    it('should use fallback when primary operation fails', async () => {\n      const primaryOperation = async () => {\n        throw new Error('Primary failed');\n      };\n\n      const fallbackOperation = async () => {\n        return 'Fallback success';\n      };\n\n      const result = await errorHandler.handleWithFallback(\n        primaryOperation,\n        fallbackOperation,\n        'Default value',\n      );\n\n      expect(result.result).toBe('Fallback success');\n      expect(result.source).toBe('fallback');\n    });\n\n    it('should use default value when both operations fail', async () => {\n      const primaryOperation = async () => {\n        throw new Error('Primary failed');\n      };\n\n      const fallbackOperation = async () => {\n        throw new Error('Fallback failed');\n      };\n\n      const result = await errorHandler.handleWithFallback(\n        primaryOperation,\n        fallbackOperation,\n        'Default value',\n      );\n\n      expect(result.result).toBe('Default value');\n      expect(result.source).toBe('default');\n    });\n\n    it('should prefer primary operation when successful', async () => {\n      const primaryOperation = async () => {\n        return 'Primary success';\n      };\n\n      const fallbackOperation = async () => {\n        return 'Fallback success';\n      };\n\n      const result = await errorHandler.handleWithFallback(\n        primaryOperation,\n        fallbackOperation,\n        'Default value',\n      );\n\n      expect(result.result).toBe('Primary success');\n      expect(result.source).toBe('primary');\n    });\n  });\n\n  describe('Error Logging and Monitoring', () => {\n    it('should log all errors with timestamps', () => {\n      const errors = [\n        new Error('Error 1'),\n        new Error('Error 2'),\n        new Error('Error 3'),\n      ];\n\n      errors.forEach((error) => {\n        errorHandler.handleSystemError(error);\n      });\n\n      const errorLog = errorHandler.getErrorLog();\n      expect(errorLog).toHaveLength(3);\n\n      errorLog.forEach((entry, index) => {\n        expect(entry.error.message).toBe(`Error ${index + 1}`);\n        expect(entry.timestamp).toBeInstanceOf(Date);\n      });\n    });\n\n    it('should provide error statistics', () => {\n      const errors = [\n        new Error('Error 1'),\n        new TypeError('Type Error'),\n        new RangeError('Range Error'),\n        new Error('Error 2'),\n      ];\n\n      errors.forEach((error) => {\n        errorHandler.handleSystemError(error);\n      });\n\n      const stats = errorHandler.getErrorStats();\n      expect(stats.total).toBe(4);\n      expect(stats.byType.Error).toBe(2);\n      expect(stats.byType.TypeError).toBe(1);\n      expect(stats.byType.RangeError).toBe(1);\n    });\n\n    it('should clear error logs when requested', () => {\n      errorHandler.handleSystemError(new Error('Test error'));\n      expect(errorHandler.getErrorLog()).toHaveLength(1);\n\n      errorHandler.clearErrorLog();\n      expect(errorHandler.getErrorLog()).toHaveLength(0);\n    });\n  });\n\n  describe('Unknown Error Handling', () => {\n    it('should handle unknown error types gracefully', () => {\n      const unknownError = new Error('Unknown system error');\n      const result = errorHandler.handleSystemError(unknownError);\n\n      expect(result.handled).toBe(false);\n      expect(result.action).toBe('escalate_to_admin');\n    });\n\n    it('should handle non-Error objects thrown as errors', () => {\n      const nonErrorObject = { message: 'Not an Error object', code: 500 };\n\n      // Simulate handling non-Error objects\n      const handleNonError = (obj: unknown) => {\n        try {\n          throw obj;\n        } catch (caught) {\n          if (caught instanceof Error) {\n            return errorHandler.handleSystemError(caught);\n          }\n          // Convert to Error\n          const caughtObj = caught as Record<string, unknown>;\n          const error = new Error(String(caughtObj?.message || caught));\n          return errorHandler.handleSystemError(error);\n        }\n      };\n\n      const result = handleNonError(nonErrorObject);\n      expect(result).toBeDefined();\n      expect(result.handled).toBe(false);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/api/test-content.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/footer-i18n-branding.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/footer-responsive-accessibility.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/footer-structure-navigation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/footer.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'label' is defined but never used. Allowed unused args must match /^_/u.","line":144,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":10},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":188,"column":45,"nodeType":"MemberExpression","endLine":188,"endColumn":62},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":354,"column":15,"nodeType":"MemberExpression","endLine":354,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Integration Tests for Footer Component\n *\n * Tests the complete footer functionality including:\n * - Navigation link integration\n * - Internationalization\n * - Social media links\n * - Company branding\n * - Responsive behavior\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { Footer } from '@/components/layout/footer';\n\n// Mock next-intl hooks\nconst mockUseTranslations = vi.fn();\nconst mockUseLocale = vi.fn();\n\nvi.mock('next-intl', () => ({\n  useTranslations: () => mockUseTranslations,\n  useLocale: () => mockUseLocale(),\n}));\n\n// Mock Next.js Link component\nconst mockLinkClick = vi.fn();\nvi.mock('next/link', () => ({\n  default: ({\n    children,\n    href,\n    className,\n    ...props\n  }: React.ComponentProps<'a'> & { href: string }) => (\n    <a\n      data-testid={`footer-link-${href.replace(/[^a-zA-Z0-9]/g, '-')}`}\n      href={href}\n      className={className}\n      onClick={() => mockLinkClick(href)}\n      {...props}\n    >\n      {children}\n    </a>\n  ),\n}));\n\nvi.mock('@/lib/footer-config', () => {\n  const mockFooterConfig = {\n    company: {\n      name: 'Tucsenberg',\n      description: 'Enterprise solutions provider',\n    },\n    sections: [\n      {\n        key: 'products',\n        titleKey: 'footer.sections.products.title',\n        links: [\n          {\n            translationKey: 'footer.sections.products.links.solutions',\n            href: '/solutions',\n            external: false,\n          },\n          {\n            translationKey: 'footer.sections.products.links.services',\n            href: '/services',\n            external: false,\n          },\n        ],\n      },\n      {\n        key: 'company',\n        titleKey: 'footer.sections.company.title',\n        links: [\n          {\n            translationKey: 'footer.sections.company.links.about',\n            href: '/about',\n            external: false,\n          },\n          {\n            translationKey: 'footer.sections.company.links.contact',\n            href: '/contact',\n            external: false,\n          },\n        ],\n      },\n      {\n        key: 'legal',\n        titleKey: 'footer.sections.legal.title',\n        links: [\n          {\n            translationKey: 'footer.sections.legal.links.privacy',\n            href: '/privacy',\n            external: false,\n          },\n          {\n            translationKey: 'footer.sections.legal.links.terms',\n            href: '/terms',\n            external: false,\n          },\n        ],\n      },\n    ],\n    socialLinks: [\n      {\n        key: 'linkedin',\n        href: 'https://linkedin.com/company/tucsenberg',\n        icon: 'linkedin',\n        label: 'LinkedIn',\n        ariaLabel: 'LinkedIn',\n      },\n      {\n        key: 'twitter',\n        href: 'https://twitter.com/tucsenberg',\n        icon: 'twitter',\n        label: 'Twitter',\n        ariaLabel: 'Twitter',\n      },\n    ],\n  };\n\n  return {\n    FOOTER_CONFIG: mockFooterConfig,\n    getCopyrightText: (locale: string) =>\n      locale === 'en'\n        ? 'Â© 2024 Tucsenberg. All rights reserved.'\n        : 'Â© 2024 Tucsenberg. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚',\n  };\n});\n\n// Mock social icons component\nvi.mock('@/components/ui/social-icons', () => ({\n  ExternalLinkIcon: ({ size }: { size?: string }) => (\n    <span\n      data-testid='external-link-icon'\n      data-size={size}\n    >\n      ğŸ”—\n    </span>\n  ),\n  SocialIconLink: ({\n    href,\n    icon,\n    label,\n    ariaLabel,\n    ...props\n  }: React.ComponentProps<'a'> & {\n    href: string;\n    icon: string;\n    label: string;\n    ariaLabel: string;\n  }) => (\n    <a\n      data-testid={`social-link-${icon}`}\n      href={href}\n      aria-label={ariaLabel}\n      target='_blank'\n      rel='noopener noreferrer'\n      {...props}\n    >\n      {icon === 'linkedin' ? 'ğŸ’¼' : 'ğŸ¦'}\n    </a>\n  ),\n}));\n\ndescribe('Footer Integration Tests', () => {\n  const user = userEvent.setup();\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // Setup default translations\n    mockUseTranslations.mockImplementation((key: string) => {\n      const translations: Record<string, string> = {\n        'footer.sections.products.title': 'Products',\n        'footer.sections.products.links.solutions': 'Solutions',\n        'footer.sections.products.links.services': 'Services',\n        'footer.sections.company.title': 'Company',\n        'footer.sections.company.links.about': 'About Us',\n        'footer.sections.company.links.contact': 'Contact',\n        'footer.sections.legal.title': 'Legal',\n        'footer.sections.legal.links.privacy': 'Privacy Policy',\n        'footer.sections.legal.links.terms': 'Terms of Service',\n        'footer.sections.social.title': 'Follow Us',\n      };\n\n      return (\n        (Object.hasOwn(translations, key) ? translations[key] : null) || key\n      );\n    });\n\n    mockUseLocale.mockReturnValue('en');\n  });\n\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  describe('Complete Footer Structure Integration', () => {\n    it('should render complete footer with all sections', async () => {\n      render(<Footer />);\n\n      // Verify main footer container\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n      expect(footer).toHaveClass('border-t', 'border-gray-200', 'bg-white');\n\n      // Verify company logo section\n      const companyLogo = screen.getByText('Tucsenberg');\n      expect(companyLogo).toBeInTheDocument();\n\n      // Verify all navigation sections are present\n      expect(screen.getByText('Products')).toBeInTheDocument();\n      expect(screen.getByText('Company')).toBeInTheDocument();\n      expect(screen.getByText('Legal')).toBeInTheDocument();\n\n      // Verify social section\n      expect(screen.getByText('Follow Us')).toBeInTheDocument();\n    });\n\n    it('should render all navigation links correctly', async () => {\n      render(<Footer />);\n\n      // Products section links\n      expect(screen.getByText('Solutions')).toBeInTheDocument();\n      expect(screen.getByText('Services')).toBeInTheDocument();\n\n      // Company section links\n      expect(screen.getByText('About Us')).toBeInTheDocument();\n      expect(screen.getByText('Contact')).toBeInTheDocument();\n\n      // Legal section links\n      expect(screen.getByText('Privacy Policy')).toBeInTheDocument();\n      expect(screen.getByText('Terms of Service')).toBeInTheDocument();\n    });\n  });\n\n  describe('Navigation Integration', () => {\n    it('should handle internal link navigation correctly', async () => {\n      render(<Footer />);\n\n      const aboutLink = screen.getByTestId('footer-link--about');\n      await user.click(aboutLink);\n\n      expect(mockLinkClick).toHaveBeenCalledWith('/about');\n    });\n\n    it('should handle all internal navigation links', async () => {\n      render(<Footer />);\n\n      const internalLinks = [\n        { testId: 'footer-link--solutions', href: '/solutions' },\n        { testId: 'footer-link--services', href: '/services' },\n        { testId: 'footer-link--about', href: '/about' },\n        { testId: 'footer-link--contact', href: '/contact' },\n        { testId: 'footer-link--privacy', href: '/privacy' },\n        { testId: 'footer-link--terms', href: '/terms' },\n      ];\n\n      for (const link of internalLinks) {\n        const linkElement = screen.getByTestId(link.testId);\n        expect(linkElement).toBeInTheDocument();\n        expect(linkElement).toHaveAttribute('href', link.href);\n      }\n    });\n\n    it('should handle external links with proper attributes', async () => {\n      // Test that the footer renders correctly with current configuration\n      render(<Footer />);\n\n      // Verify footer structure is correct\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n\n      // Note: This test covers the external link branch in FooterLinkComponent\n      // The external link functionality is tested through the social media links\n      // which are external by nature (target=\"_blank\", rel=\"noopener noreferrer\")\n      const socialLinks = screen.getAllByTestId(/social-link-/);\n      expect(socialLinks.length).toBeGreaterThan(0);\n\n      // Verify social links have external attributes\n      socialLinks.forEach((link) => {\n        expect(link).toHaveAttribute('target', '_blank');\n        expect(link).toHaveAttribute('rel', 'noopener noreferrer');\n      });\n    });\n  });\n\n  describe('Social Media Integration', () => {\n    it('should render all social media links correctly', async () => {\n      render(<Footer />);\n\n      const linkedinLink = screen.getByTestId('social-link-linkedin');\n      expect(linkedinLink).toBeInTheDocument();\n      expect(linkedinLink).toHaveAttribute(\n        'href',\n        'https://linkedin.com/company/tucsenberg',\n      );\n      expect(linkedinLink).toHaveAttribute('aria-label', 'LinkedIn');\n\n      const twitterLink = screen.getByTestId('social-link-twitter');\n      expect(twitterLink).toBeInTheDocument();\n      expect(twitterLink).toHaveAttribute(\n        'href',\n        'https://twitter.com/tucsenberg',\n      );\n      expect(twitterLink).toHaveAttribute('aria-label', 'Twitter');\n    });\n\n    it('should handle social link clicks correctly', async () => {\n      render(<Footer />);\n\n      const linkedinLink = screen.getByTestId('social-link-linkedin');\n\n      // Verify link attributes for external navigation\n      expect(linkedinLink).toHaveAttribute('target', '_blank');\n      expect(linkedinLink).toHaveAttribute('rel', 'noopener noreferrer');\n    });\n  });\n\n  describe('Internationalization Integration', () => {\n    it('should display correct content for English locale', async () => {\n      mockUseLocale.mockReturnValue('en');\n\n      render(<Footer />);\n\n      // Verify English translations are used\n      expect(mockUseTranslations).toHaveBeenCalled();\n      expect(screen.getByText('Products')).toBeInTheDocument();\n      expect(screen.getByText('Company')).toBeInTheDocument();\n      expect(screen.getByText('Legal')).toBeInTheDocument();\n    });\n\n    it('should display correct content for Chinese locale', async () => {\n      mockUseLocale.mockReturnValue('zh');\n\n      // Setup Chinese translations\n      mockUseTranslations.mockImplementation((key: string) => {\n        const chineseTranslations: Record<string, string> = {\n          'footer.sections.products.title': 'äº§å“',\n          'footer.sections.products.links.solutions': 'è§£å†³æ–¹æ¡ˆ',\n          'footer.sections.products.links.services': 'æœåŠ¡',\n          'footer.sections.company.title': 'å…¬å¸',\n          'footer.sections.company.links.about': 'å…³äºæˆ‘ä»¬',\n          'footer.sections.company.links.contact': 'è”ç³»æˆ‘ä»¬',\n          'footer.sections.legal.title': 'æ³•å¾‹',\n          'footer.sections.legal.links.privacy': 'éšç§æ”¿ç­–',\n          'footer.sections.legal.links.terms': 'æœåŠ¡æ¡æ¬¾',\n          'footer.social.title': 'å…³æ³¨æˆ‘ä»¬',\n        };\n\n        return (\n          (Object.hasOwn(chineseTranslations, key)\n            ? chineseTranslations[key]\n            : null) || key\n        );\n      });\n\n      render(<Footer />);\n\n      expect(screen.getByText('äº§å“')).toBeInTheDocument();\n      expect(screen.getByText('å…¬å¸')).toBeInTheDocument();\n      expect(screen.getByText('æ³•å¾‹')).toBeInTheDocument();\n    });\n\n    it('should handle missing translations gracefully', async () => {\n      mockUseTranslations.mockImplementation((key: string) => `missing.${key}`);\n\n      expect(() => render(<Footer />)).not.toThrow();\n\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n    });\n  });\n\n  describe('Company Branding Integration', () => {\n    it('should display company logo and branding correctly', async () => {\n      render(<Footer />);\n\n      const companyLink = screen.getByLabelText('Tucsenberg homepage');\n      expect(companyLink).toBeInTheDocument();\n      expect(companyLink).toHaveAttribute('href', '/');\n\n      const companyName = screen.getByText('Tucsenberg');\n      expect(companyName).toBeInTheDocument();\n\n      // Verify logo placeholder\n      const logoPlaceholder = companyName.parentElement?.querySelector('div');\n      expect(logoPlaceholder).toHaveTextContent('T'); // First letter of company name\n    });\n\n    it('should display copyright information correctly', async () => {\n      render(<Footer />);\n\n      const copyrightText = screen.getByText(\n        'Â© 2024 Tucsenberg. All rights reserved.',\n      );\n      expect(copyrightText).toBeInTheDocument();\n    });\n  });\n\n  describe('Responsive Behavior Integration', () => {\n    it('should apply correct responsive grid classes', async () => {\n      render(<Footer />);\n\n      const gridContainer = screen\n        .getByRole('contentinfo')\n        .querySelector('.grid');\n      expect(gridContainer).toHaveClass(\n        'grid',\n        'grid-cols-1',\n        'gap-8',\n        'md:grid-cols-5',\n      );\n    });\n\n    it('should handle responsive column spans correctly', async () => {\n      render(<Footer />);\n\n      const footer = screen.getByRole('contentinfo');\n\n      // Company logo section should span 1 column on md+\n      const logoSection = footer.querySelector('.md\\\\:col-span-1');\n      expect(logoSection).toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility Integration', () => {\n    it('should provide proper semantic structure', async () => {\n      render(<Footer />);\n\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n\n      // Verify proper heading structure would be present\n      // (Note: This would depend on the actual implementation of section titles)\n    });\n\n    it('should provide proper ARIA labels for interactive elements', async () => {\n      render(<Footer />);\n\n      const companyLink = screen.getByLabelText('Tucsenberg homepage');\n      expect(companyLink).toBeInTheDocument();\n\n      const socialLinks = screen.getAllByRole('link', {\n        name: /LinkedIn|Twitter/,\n      });\n      expect(socialLinks).toHaveLength(2);\n    });\n  });\n\n  describe('Error Recovery Integration', () => {\n    it('should handle missing footer configuration gracefully', async () => {\n      // Test with minimal configuration\n      render(<Footer />);\n\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n    });\n\n    it('should handle locale detection errors gracefully', async () => {\n      mockUseLocale.mockReturnValue(undefined);\n\n      render(<Footer />);\n\n      const footer = screen.getByRole('contentinfo');\n      expect(footer).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/header.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/language-toggle.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":162,"column":45,"nodeType":"MemberExpression","endLine":162,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Integration Tests for LanguageToggle Component\n *\n * Tests the complete language switching workflow including:\n * - User interaction flows\n * - Transition states\n * - Internationalization integration\n * - Navigation behavior\n * - Loading states\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\nimport { LanguageToggle } from '@/components/language-toggle';\n\n// Mock next-intl hooks\nconst mockUseTranslations = vi.fn();\nconst mockUseLocale = vi.fn();\nconst mockUsePathname = vi.fn();\n\nvi.mock('next-intl', () => ({\n  useTranslations: () => mockUseTranslations,\n  useLocale: () => mockUseLocale(),\n}));\n\n// Mock next-intl navigation\nvi.mock('next-intl/navigation', () => ({\n  usePathname: () => mockUsePathname(),\n  createNavigation: () => ({\n    Link: ({\n      children,\n      href,\n      locale,\n      onClick,\n      className,\n      ...props\n    }: React.ComponentProps<'a'> & { href: string; locale: string }) => (\n      <a\n        data-testid={`language-link-${locale}`}\n        href={href}\n        data-locale={locale}\n        className={className}\n        onClick={(e) => {\n          mockLinkClick({ href, locale });\n          onClick?.(e);\n        }}\n        {...props}\n      >\n        {children}\n      </a>\n    ),\n    usePathname: () => mockUsePathname(),\n  }),\n}));\n\n// Mock Link click tracking\nconst mockLinkClick = vi.fn();\n\n// Mock React hooks\nconst mockStartTransition = vi.fn();\nvi.mock('react', async () => {\n  const actual = await vi.importActual('react');\n  return {\n    ...actual,\n    useTransition: () => [false, mockStartTransition],\n    useState: vi.fn((initial) => {\n      const state = vi.fn(() => initial);\n      const setState = vi.fn();\n      return [state(), setState];\n    }),\n  };\n});\n\n// Mock UI components\nvi.mock('@/components/ui/dropdown-menu', () => ({\n  DropdownMenu: ({ children }: React.ComponentProps<'div'>) => (\n    <div data-testid='language-dropdown-menu'>{children}</div>\n  ),\n  DropdownMenuTrigger: ({\n    children,\n    asChild: _asChild,\n  }: React.ComponentProps<'div'> & { asChild?: boolean }) => (\n    <div data-testid='language-dropdown-trigger'>{children}</div>\n  ),\n  DropdownMenuContent: ({\n    children,\n    align,\n  }: React.ComponentProps<'div'> & { align?: string }) => (\n    <div\n      data-testid='language-dropdown-content'\n      data-align={align}\n    >\n      {children}\n    </div>\n  ),\n  DropdownMenuItem: ({\n    children,\n    asChild: _asChild,\n  }: React.ComponentProps<'div'> & { asChild?: boolean }) => (\n    <div data-testid='language-dropdown-item'>{children}</div>\n  ),\n}));\n\nvi.mock('@/components/ui/button', () => ({\n  Button: ({\n    children,\n    variant,\n    size,\n    disabled,\n    ...props\n  }: React.ComponentProps<'button'> & { variant?: string; size?: string }) => (\n    <button\n      data-testid='language-toggle-button'\n      data-variant={variant}\n      data-size={size}\n      disabled={disabled}\n      {...props}\n    >\n      {children}\n    </button>\n  ),\n}));\n\n// Mock Lucide icons\nvi.mock('lucide-react', () => ({\n  Languages: () => <span data-testid='languages-icon'>ğŸŒ</span>,\n  Loader2: ({ className }: React.ComponentProps<'div'>) => (\n    <span\n      data-testid='loader-icon'\n      className={className}\n    >\n      â³\n    </span>\n  ),\n  Check: ({ className }: React.ComponentProps<'div'>) => (\n    <span\n      data-testid='check-icon'\n      className={className}\n    >\n      âœ“\n    </span>\n  ),\n}));\n\ndescribe('LanguageToggle Integration Tests', () => {\n  const user = userEvent.setup();\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // Setup default mock returns\n    mockUseTranslations.mockImplementation((key: string) => {\n      const translations: Record<string, string> = {\n        toggle: 'Toggle language',\n        english: 'English',\n        chinese: 'ä¸­æ–‡',\n      };\n\n      return (\n        (Object.hasOwn(translations, key) ? translations[key] : null) || key\n      );\n    });\n\n    mockUseLocale.mockReturnValue('en');\n    mockUsePathname.mockReturnValue('/about');\n    mockStartTransition.mockImplementation((fn) => fn());\n  });\n\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  describe('Complete Language Switching Workflow', () => {\n    it('should complete full language switch from English to Chinese', async () => {\n      render(<LanguageToggle />);\n\n      // 1. Initial state verification\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      expect(toggleButton).toBeInTheDocument();\n      expect(toggleButton).not.toBeDisabled();\n\n      // 2. Verify current language indicator\n      const checkIcon = screen.getByTestId('check-icon');\n      expect(checkIcon).toBeInTheDocument();\n\n      // 3. Click on Chinese language option\n      const chineseLink = screen.getByTestId('language-link-zh');\n      expect(chineseLink).toBeInTheDocument();\n      expect(chineseLink).toHaveAttribute('data-locale', 'zh');\n\n      await user.click(chineseLink);\n\n      // 4. Verify navigation was triggered\n      expect(mockLinkClick).toHaveBeenCalledWith({\n        href: '/about',\n        locale: 'zh',\n      });\n\n      // 5. Verify transition was started\n      expect(mockStartTransition).toHaveBeenCalled();\n    });\n\n    it('should handle language switch from Chinese to English', async () => {\n      // Setup Chinese as current locale\n      mockUseLocale.mockReturnValue('zh');\n\n      render(<LanguageToggle />);\n\n      const englishLink = screen.getByTestId('language-link-en');\n      await user.click(englishLink);\n\n      expect(mockLinkClick).toHaveBeenCalledWith({\n        href: '/about',\n        locale: 'en',\n      });\n    });\n  });\n\n  describe('Loading States Integration', () => {\n    it('should show loading state during transition', async () => {\n      // Mock the component to simulate loading state\n      const MockLanguageToggle = () => (\n        <div data-testid='language-dropdown-menu'>\n          <div data-testid='language-dropdown-trigger'>\n            <button\n              data-testid='language-toggle-button'\n              data-variant='outline'\n              data-size='icon'\n              disabled\n            >\n              <span data-testid='languages-icon'>ğŸŒ</span>\n              <span\n                data-testid='loader-icon'\n                className='animate-spin'\n              >\n                â³\n              </span>\n              <span className='sr-only'>Toggle language</span>\n            </button>\n          </div>\n        </div>\n      );\n\n      render(<MockLanguageToggle />);\n\n      // Verify loading state is shown\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      expect(toggleButton).toBeDisabled();\n\n      const loaderIcon = screen.getByTestId('loader-icon');\n      expect(loaderIcon).toBeInTheDocument();\n      expect(loaderIcon).toHaveClass('animate-spin');\n    });\n\n    it('should show individual language loading indicators', async () => {\n      // Mock the component to simulate specific language switching\n      const MockLanguageToggleWithLoader = () => (\n        <div data-testid='language-dropdown-menu'>\n          <div data-testid='language-dropdown-trigger'>\n            <button data-testid='language-toggle-button'>\n              <span data-testid='languages-icon'>ğŸŒ</span>\n            </button>\n          </div>\n          <div data-testid='language-dropdown-content'>\n            <div data-testid='language-dropdown-item'>\n              <a\n                data-testid='language-link-zh'\n                className='flex items-center'\n              >\n                <span>ZH</span>\n                <span>ä¸­æ–‡</span>\n                <span\n                  data-testid='loader-icon'\n                  className='animate-spin'\n                >\n                  â³\n                </span>\n              </a>\n            </div>\n          </div>\n        </div>\n      );\n\n      render(<MockLanguageToggleWithLoader />);\n\n      // Should show loader for Chinese option\n      const chineseSection = screen.getByTestId('language-link-zh');\n      const loaderInChinese = chineseSection.querySelector(\n        '[data-testid=\"loader-icon\"]',\n      );\n      expect(loaderInChinese).toBeInTheDocument();\n    });\n  });\n\n  describe('Internationalization Integration', () => {\n    it('should use correct translations for interface elements', async () => {\n      render(<LanguageToggle />);\n\n      // Verify translations are called correctly\n      expect(mockUseTranslations).toHaveBeenCalledWith('toggle');\n      expect(mockUseTranslations).toHaveBeenCalledWith('english');\n      expect(mockUseTranslations).toHaveBeenCalledWith('chinese');\n\n      // Verify screen reader text\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      const srText = toggleButton.querySelector('.sr-only');\n      expect(srText).toHaveTextContent('Toggle language');\n    });\n\n    it('should handle missing translations gracefully', async () => {\n      // Mock missing translations\n      mockUseTranslations.mockImplementation((key: string) => `missing.${key}`);\n\n      expect(() => render(<LanguageToggle />)).not.toThrow();\n\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      expect(toggleButton).toBeInTheDocument();\n    });\n  });\n\n  describe('Navigation Integration', () => {\n    it('should preserve current pathname during language switch', async () => {\n      const testPaths = ['/about', '/contact', '/products/item-1'];\n\n      for (const path of testPaths) {\n        mockUsePathname.mockReturnValue(path);\n\n        const { unmount } = render(<LanguageToggle />);\n\n        const englishLinks = screen.getAllByTestId('language-link-en');\n        const chineseLinks = screen.getAllByTestId('language-link-zh');\n\n        // å–ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ \n        expect(englishLinks[0]).toHaveAttribute('href', path);\n        expect(chineseLinks[0]).toHaveAttribute('href', path);\n\n        // æ¸…ç†DOMä»¥é¿å…é‡å¤å…ƒç´ \n        unmount();\n      }\n    });\n\n    it('should handle complex pathnames with parameters', async () => {\n      mockUsePathname.mockReturnValue(\n        '/products/category/electronics?sort=price',\n      );\n\n      render(<LanguageToggle />);\n\n      const links = screen.getAllByTestId(/language-link-/);\n      links.forEach((link) => {\n        expect(link).toHaveAttribute(\n          'href',\n          '/products/category/electronics?sort=price',\n        );\n      });\n    });\n  });\n\n  describe('Accessibility Integration', () => {\n    it('should provide proper ARIA labels and roles', async () => {\n      render(<LanguageToggle />);\n\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      const srText = toggleButton.querySelector('.sr-only');\n      expect(srText).toBeInTheDocument();\n      expect(srText).toHaveTextContent('Toggle language');\n    });\n\n    it('should support keyboard navigation', async () => {\n      render(<LanguageToggle />);\n\n      const toggleButton = screen.getByTestId('language-toggle-button');\n\n      // Test keyboard focus\n      toggleButton.focus();\n      expect(document.activeElement).toBe(toggleButton);\n\n      // Test keyboard activation\n      await user.keyboard('{Enter}');\n      // Dropdown should be accessible via keyboard\n      expect(\n        screen.getByTestId('language-dropdown-content'),\n      ).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Recovery Integration', () => {\n    it('should handle locale detection errors gracefully', async () => {\n      mockUseLocale.mockReturnValue(undefined);\n\n      expect(() => render(<LanguageToggle />)).not.toThrow();\n\n      const toggleButton = screen.getByTestId('language-toggle-button');\n      expect(toggleButton).toBeInTheDocument();\n    });\n\n    it('should handle pathname errors gracefully', async () => {\n      mockUsePathname.mockReturnValue('');\n\n      expect(() => render(<LanguageToggle />)).not.toThrow();\n\n      const links = screen.getAllByTestId(/language-link-/);\n      links.forEach((link) => {\n        expect(link).toHaveAttribute('href', '');\n      });\n    });\n\n    it('should handle transition errors gracefully', async () => {\n      mockStartTransition.mockImplementation(() => {\n        throw new Error('Transition failed');\n      });\n\n      render(<LanguageToggle />);\n\n      const chineseLink = screen.getByTestId('language-link-zh');\n\n      // Should not crash when transition fails\n      expect(() => user.click(chineseLink)).not.toThrow();\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/components/theme-toggle.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/i18n-components.test.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":207,"column":16,"nodeType":"MemberExpression","endLine":207,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { fireEvent, render, screen } from '@testing-library/react';\nimport { NextIntlClientProvider } from 'next-intl';\nimport { beforeEach, describe, expect, it, vi } from 'vitest';\n\n/**\n * i18n ç»„ä»¶é›†æˆæµ‹è¯•\n *\n * æµ‹è¯•ç­–ç•¥ï¼š\n * - åœ¨ JSDOM ç¯å¢ƒä¸‹æµ‹è¯• i18n ç»„ä»¶è¡Œä¸º\n * - ä½¿ç”¨ NextIntlClientProvider æä¾›çœŸå®çš„ i18n ä¸Šä¸‹æ–‡\n * - æµ‹è¯•è¯­è¨€åˆ‡æ¢ã€æ¶ˆæ¯æ˜¾ç¤ºã€æ ¼å¼åŒ–ç­‰åŠŸèƒ½\n * - ä¸ä¾èµ– SSR ç¯å¢ƒï¼Œä¸“æ³¨äºå®¢æˆ·ç«¯è¡Œä¸º\n */\n\n// Mocké…ç½® - ä½¿ç”¨vi.hoistedç¡®ä¿Mockåœ¨æ¨¡å—å¯¼å…¥å‰è®¾ç½®\nconst {\n  mockUseLocale,\n  mockUseTranslations,\n  mockUsePathname,\n  mockUseRouter,\n  mockLink,\n  mockRouting,\n  mockEnMessages,\n  mockZhMessages,\n} = vi.hoisted(() => ({\n  mockUseLocale: vi.fn(),\n  mockUseTranslations: vi.fn(),\n  mockUsePathname: vi.fn(),\n  mockUseRouter: vi.fn(),\n  mockLink: vi.fn(),\n  mockRouting: {\n    locales: ['en', 'zh'],\n    defaultLocale: 'en',\n  },\n  mockEnMessages: {\n    common: {\n      loading: 'Loading...',\n      error: 'Error occurred',\n      success: 'Success',\n    },\n    navigation: {\n      home: 'Home',\n      about: 'About',\n      contact: 'Contact',\n    },\n    language: {\n      toggle: 'Toggle language',\n      selectLanguage: 'Select Language',\n      english: 'English',\n      chinese: 'Chinese',\n    },\n  },\n  mockZhMessages: {\n    common: {\n      loading: 'åŠ è½½ä¸­...',\n      error: 'å‘ç”Ÿé”™è¯¯',\n      success: 'æˆåŠŸ',\n    },\n    navigation: {\n      home: 'é¦–é¡µ',\n      about: 'å…³äº',\n      contact: 'è”ç³»',\n    },\n    language: {\n      toggle: 'åˆ‡æ¢è¯­è¨€',\n      selectLanguage: 'é€‰æ‹©è¯­è¨€',\n      english: 'è‹±è¯­',\n      chinese: 'ä¸­æ–‡',\n    },\n  },\n}));\n\n// Mock next-intl hooks\nvi.mock('next-intl', () => ({\n  useLocale: mockUseLocale,\n  useTranslations: mockUseTranslations,\n  NextIntlClientProvider: ({\n    children,\n    locale,\n  }: {\n    children: React.ReactNode;\n    locale: string;\n  }) => <div data-testid={`intl-provider-${locale}`}>{children}</div>,\n}));\n\n// Mock next-intl/navigation\nvi.mock('next-intl/navigation', () => ({\n  usePathname: mockUsePathname,\n  useRouter: mockUseRouter,\n  Link: mockLink,\n  routing: mockRouting,\n}));\n\n// Mock locale detection hooks\nvi.mock('@/lib/locale-detection', () => ({\n  useClientLocaleDetection: () => ({\n    detectClientLocale: vi.fn().mockReturnValue({\n      locale: 'en',\n      source: 'browser',\n      confidence: 0.9,\n    }),\n  }),\n}));\n\nvi.mock('@/lib/locale-storage', () => ({\n  useLocaleStorage: () => ({\n    getStats: vi.fn().mockReturnValue({\n      switchCount: 0,\n      lastSwitch: null,\n      preferredLocale: null,\n    }),\n  }),\n}));\n\n// æµ‹è¯•ç»„ä»¶ï¼šç®€å•çš„ç¿»è¯‘ç»„ä»¶\nfunction TestTranslationComponent({\n  namespace = 'common',\n}: {\n  namespace?: string;\n}) {\n  const t = mockUseTranslations(namespace);\n\n  return (\n    <div data-testid='translation-component'>\n      <h1 data-testid='loading-text'>{t('loading')}</h1>\n      <p data-testid='error-text'>{t('error')}</p>\n      <span data-testid='success-text'>{t('success')}</span>\n    </div>\n  );\n}\n\n// æµ‹è¯•ç»„ä»¶ï¼šå¯¼èˆªç»„ä»¶\nfunction TestNavigationComponent() {\n  const t = mockUseTranslations('navigation');\n\n  return (\n    <nav data-testid='navigation-component'>\n      <span data-testid='home-link'>{t('home')}</span>\n      <span data-testid='about-link'>{t('about')}</span>\n      <span data-testid='contact-link'>{t('contact')}</span>\n    </nav>\n  );\n}\n\n// æµ‹è¯•ç»„ä»¶ï¼šè¯­è¨€åˆ‡æ¢ç»„ä»¶\nfunction TestLanguageSwitcher() {\n  const locale = mockUseLocale();\n  const t = mockUseTranslations('language');\n\n  const handleLanguageSwitch = (newLocale: string) => {\n    mockUseLocale.mockReturnValue(newLocale);\n  };\n\n  return (\n    <div data-testid='language-switcher'>\n      <button\n        data-testid='language-toggle'\n        onClick={() => handleLanguageSwitch(locale === 'en' ? 'zh' : 'en')}\n      >\n        {t('toggle')}\n      </button>\n      <div data-testid='current-locale'>{locale}</div>\n      <div data-testid='select-language-text'>{t('selectLanguage')}</div>\n      <div data-testid='english-text'>{t('english')}</div>\n      <div data-testid='chinese-text'>{t('chinese')}</div>\n    </div>\n  );\n}\n\n// è¾…åŠ©å‡½æ•°ï¼šæ¸²æŸ“å¸¦æœ‰i18nä¸Šä¸‹æ–‡çš„ç»„ä»¶\nfunction renderWithI18n(component: React.ReactElement, locale: string = 'en') {\n  const messages = locale === 'en' ? mockEnMessages : mockZhMessages;\n\n  return render(\n    <NextIntlClientProvider\n      locale={locale}\n      messages={messages}\n    >\n      {component}\n    </NextIntlClientProvider>,\n  );\n}\n\ndescribe('i18n ç»„ä»¶é›†æˆæµ‹è¯•', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // è®¾ç½®é»˜è®¤Mockè¿”å›å€¼\n    mockUseLocale.mockReturnValue('en');\n    mockUsePathname.mockReturnValue('/');\n    mockUseRouter.mockReturnValue({\n      push: vi.fn(),\n      replace: vi.fn(),\n      back: vi.fn(),\n      forward: vi.fn(),\n      refresh: vi.fn(),\n      prefetch: vi.fn(),\n    });\n\n    // è®¾ç½®ç¿»è¯‘å‡½æ•°Mock\n    mockUseTranslations.mockImplementation((namespace: string) => {\n      return (key: string) => {\n        const messages =\n          mockUseLocale() === 'en' ? mockEnMessages : mockZhMessages;\n        const namespaceMessages = messages[namespace as keyof typeof messages];\n        return (namespaceMessages as Record<string, string>)?.[key] || key;\n      };\n    });\n\n    mockLink.mockImplementation(\n      ({\n        children,\n        href,\n        ...props\n      }: React.ComponentProps<'a'> & { href: string }) => (\n        <a\n          href={href}\n          {...props}\n        >\n          {children}\n        </a>\n      ),\n    );\n  });\n\n  describe('åŸºç¡€ç¿»è¯‘åŠŸèƒ½', () => {\n    it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºè‹±æ–‡ç¿»è¯‘', () => {\n      renderWithI18n(<TestTranslationComponent />, 'en');\n\n      expect(screen.getByTestId('loading-text')).toHaveTextContent(\n        'Loading...',\n      );\n      expect(screen.getByTestId('error-text')).toHaveTextContent(\n        'Error occurred',\n      );\n      expect(screen.getByTestId('success-text')).toHaveTextContent('Success');\n    });\n\n    it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘', () => {\n      mockUseLocale.mockReturnValue('zh');\n      renderWithI18n(<TestTranslationComponent />, 'zh');\n\n      expect(screen.getByTestId('loading-text')).toHaveTextContent('åŠ è½½ä¸­...');\n      expect(screen.getByTestId('error-text')).toHaveTextContent('å‘ç”Ÿé”™è¯¯');\n      expect(screen.getByTestId('success-text')).toHaveTextContent('æˆåŠŸ');\n    });\n\n    it('åº”è¯¥æ”¯æŒä¸åŒçš„å‘½åç©ºé—´', () => {\n      renderWithI18n(<TestTranslationComponent namespace='navigation' />, 'en');\n\n      // ç”±äºä½¿ç”¨äº†navigationå‘½åç©ºé—´ï¼Œåº”è¯¥æ˜¾ç¤ºnavigationçš„ç¿»è¯‘\n      expect(screen.getByTestId('loading-text')).toHaveTextContent('loading');\n      expect(screen.getByTestId('error-text')).toHaveTextContent('error');\n      expect(screen.getByTestId('success-text')).toHaveTextContent('success');\n    });\n  });\n\n  describe('å¯¼èˆªç»„ä»¶ç¿»è¯‘', () => {\n    it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºè‹±æ–‡å¯¼èˆª', () => {\n      renderWithI18n(<TestNavigationComponent />, 'en');\n\n      expect(screen.getByTestId('home-link')).toHaveTextContent('Home');\n      expect(screen.getByTestId('about-link')).toHaveTextContent('About');\n      expect(screen.getByTestId('contact-link')).toHaveTextContent('Contact');\n    });\n\n    it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡å¯¼èˆª', () => {\n      mockUseLocale.mockReturnValue('zh');\n      renderWithI18n(<TestNavigationComponent />, 'zh');\n\n      expect(screen.getByTestId('home-link')).toHaveTextContent('é¦–é¡µ');\n      expect(screen.getByTestId('about-link')).toHaveTextContent('å…³äº');\n      expect(screen.getByTestId('contact-link')).toHaveTextContent('è”ç³»');\n    });\n  });\n\n  describe('è¯­è¨€åˆ‡æ¢åŠŸèƒ½', () => {\n    it('åº”è¯¥æ˜¾ç¤ºå½“å‰è¯­è¨€', () => {\n      renderWithI18n(<TestLanguageSwitcher />, 'en');\n\n      expect(screen.getByTestId('current-locale')).toHaveTextContent('en');\n      expect(screen.getByTestId('language-toggle')).toHaveTextContent(\n        'Toggle language',\n      );\n    });\n\n    it('åº”è¯¥æ”¯æŒè¯­è¨€åˆ‡æ¢æŒ‰é’®ç‚¹å‡»', async () => {\n      renderWithI18n(<TestLanguageSwitcher />, 'en');\n\n      const toggleButton = screen.getByTestId('language-toggle');\n      fireEvent.click(toggleButton);\n\n      // éªŒè¯Mockå‡½æ•°è¢«è°ƒç”¨\n      expect(mockUseLocale).toHaveBeenCalled();\n    });\n\n    it('åº”è¯¥æ˜¾ç¤ºè¯­è¨€é€‰æ‹©ç›¸å…³æ–‡æœ¬', () => {\n      renderWithI18n(<TestLanguageSwitcher />, 'en');\n\n      expect(screen.getByTestId('select-language-text')).toHaveTextContent(\n        'Select Language',\n      );\n      expect(screen.getByTestId('english-text')).toHaveTextContent('English');\n      expect(screen.getByTestId('chinese-text')).toHaveTextContent('Chinese');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/integration/pages/home.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/tests/unit/i18n.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":212,"column":24,"nodeType":"MemberExpression","endLine":212,"endColumn":32},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":212,"column":49,"nodeType":"MemberExpression","endLine":212,"endColumn":57},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":213,"column":46,"nodeType":"MemberExpression","endLine":213,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest';\n\n/**\n * i18n æ ¸å¿ƒåŠŸèƒ½å•å…ƒæµ‹è¯•\n *\n * æµ‹è¯•ç­–ç•¥ï¼š\n * - ä¸ä¾èµ– SSR ç¯å¢ƒ\n * - ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘æµ‹è¯•\n * - ä½¿ç”¨ Mock æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–\n * - è¦†ç›– locale æ£€æµ‹ã€æ¶ˆæ¯åŠ è½½ã€æ ¼å¼åŒ–ç­‰æ ¸å¿ƒåŠŸèƒ½\n */\n\n// Mocké…ç½® - ä½¿ç”¨vi.hoistedç¡®ä¿Mockåœ¨æ¨¡å—å¯¼å…¥å‰è®¾ç½®\nconst { mockRouting, mockEnMessages, mockZhMessages, mockGetFormats } =\n  vi.hoisted(() => ({\n    mockRouting: {\n      locales: ['en', 'zh'] as const,\n      defaultLocale: 'en' as const,\n      pathnames: {},\n    },\n    mockEnMessages: {\n      common: {\n        loading: 'Loading...',\n        error: 'Error occurred',\n        success: 'Success',\n      },\n      navigation: {\n        home: 'Home',\n        about: 'About',\n        contact: 'Contact',\n      },\n      seo: {\n        title: 'Tucsenberg Web Frontier',\n        description: 'Modern B2B Enterprise Web Platform',\n        siteName: 'Tucsenberg Web Frontier',\n      },\n    },\n    mockZhMessages: {\n      common: {\n        loading: 'åŠ è½½ä¸­...',\n        error: 'å‘ç”Ÿé”™è¯¯',\n        success: 'æˆåŠŸ',\n      },\n      navigation: {\n        home: 'é¦–é¡µ',\n        about: 'å…³äº',\n        contact: 'è”ç³»',\n      },\n      seo: {\n        title: 'Tucsenberg Web Frontier',\n        description: 'ç°ä»£åŒ–B2Bä¼ä¸šç½‘ç»œå¹³å°',\n        siteName: 'Tucsenberg Web Frontier',\n      },\n    },\n    mockGetFormats: vi.fn(),\n    mockDetectLocale: vi.fn(),\n    mockLoadMessages: vi.fn(),\n  }));\n\n// Mock routingé…ç½®\nvi.mock('@/i18n/routing', () => ({\n  routing: mockRouting,\n}));\n\n// Mock æ¶ˆæ¯æ–‡ä»¶\nvi.mock('../../../messages/en.json', () => ({\n  default: mockEnMessages,\n}));\n\nvi.mock('../../../messages/zh.json', () => ({\n  default: mockZhMessages,\n}));\n\n// Mock æ ¼å¼åŒ–å‡½æ•°\nvi.mock('@/i18n/formats', () => ({\n  getFormats: mockGetFormats,\n}));\n\ndescribe('i18n æ ¸å¿ƒåŠŸèƒ½å•å…ƒæµ‹è¯•', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n\n    // é‡ç½®ç¯å¢ƒå˜é‡\n    vi.stubEnv('NODE_ENV', 'test');\n    vi.stubEnv('PLAYWRIGHT_TEST', 'false');\n\n    // è®¾ç½®é»˜è®¤çš„æ ¼å¼åŒ–é…ç½®\n    mockGetFormats.mockReturnValue({\n      dateTime: {\n        short: {\n          day: 'numeric' as const,\n          month: 'short' as const,\n          year: 'numeric' as const,\n        },\n      },\n      number: {\n        currency: {\n          style: 'currency' as const,\n          currency: 'USD',\n        },\n      },\n    });\n  });\n\n  describe('Locale æ£€æµ‹å’ŒéªŒè¯', () => {\n    it('åº”è¯¥æ­£ç¡®éªŒè¯æœ‰æ•ˆçš„ locale', () => {\n      const validLocales = ['en', 'zh'];\n\n      validLocales.forEach((locale) => {\n        expect(mockRouting.locales).toContain(locale);\n      });\n    });\n\n    it('åº”è¯¥è¯†åˆ«æ— æ•ˆçš„ locale', () => {\n      const invalidLocales = ['fr', 'de', 'ja', 'invalid'];\n\n      invalidLocales.forEach((locale) => {\n        expect(mockRouting.locales).not.toContain(locale);\n      });\n    });\n\n    it('åº”è¯¥æä¾›é»˜è®¤ locale', () => {\n      expect(mockRouting.defaultLocale).toBe('en');\n      expect(mockRouting.locales).toContain(mockRouting.defaultLocale);\n    });\n\n    it('åº”è¯¥å¤„ç† locale å›é€€é€»è¾‘', () => {\n      // æ¨¡æ‹Ÿ locale å›é€€å‡½æ•°\n      const fallbackToDefault = (locale: string | null | undefined) => {\n        if (!locale || !mockRouting.locales.includes(locale as any)) {\n          return mockRouting.defaultLocale;\n        }\n        return locale;\n      };\n\n      expect(fallbackToDefault(null)).toBe('en');\n      expect(fallbackToDefault(undefined)).toBe('en');\n      expect(fallbackToDefault('')).toBe('en');\n      expect(fallbackToDefault('invalid')).toBe('en');\n      expect(fallbackToDefault('zh')).toBe('zh');\n      expect(fallbackToDefault('en')).toBe('en');\n    });\n  });\n\n  describe('æ¶ˆæ¯åŠ è½½å’Œç¼“å­˜', () => {\n    it('åº”è¯¥æ­£ç¡®åŠ è½½è‹±æ–‡æ¶ˆæ¯', async () => {\n      // æ¨¡æ‹Ÿæ¶ˆæ¯åŠ è½½å‡½æ•°\n      const loadMessages = async (locale: string) => {\n        if (locale === 'en') {\n          return mockEnMessages;\n        } else if (locale === 'zh') {\n          return mockZhMessages;\n        }\n        throw new Error(`Unsupported locale: ${locale}`);\n      };\n\n      const enMessages = await loadMessages('en');\n      expect(enMessages).toEqual(mockEnMessages);\n      expect(enMessages.common.loading).toBe('Loading...');\n      expect(enMessages.navigation.home).toBe('Home');\n    });\n\n    it('åº”è¯¥æ­£ç¡®åŠ è½½ä¸­æ–‡æ¶ˆæ¯', async () => {\n      const loadMessages = async (locale: string) => {\n        if (locale === 'en') {\n          return mockEnMessages;\n        } else if (locale === 'zh') {\n          return mockZhMessages;\n        }\n        throw new Error(`Unsupported locale: ${locale}`);\n      };\n\n      const zhMessages = await loadMessages('zh');\n      expect(zhMessages).toEqual(mockZhMessages);\n      expect(zhMessages.common.loading).toBe('åŠ è½½ä¸­...');\n      expect(zhMessages.navigation.home).toBe('é¦–é¡µ');\n    });\n\n    it('åº”è¯¥å¤„ç†æ¶ˆæ¯åŠ è½½é”™è¯¯', async () => {\n      const loadMessages = async (locale: string) => {\n        if (locale === 'invalid') {\n          throw new Error(`Unsupported locale: ${locale}`);\n        }\n        return mockEnMessages;\n      };\n\n      await expect(loadMessages('invalid')).rejects.toThrow(\n        'Unsupported locale: invalid',\n      );\n    });\n\n    it('åº”è¯¥éªŒè¯æ¶ˆæ¯ç»“æ„å®Œæ•´æ€§', () => {\n      // éªŒè¯å¿…éœ€çš„æ¶ˆæ¯é”®å­˜åœ¨\n      const requiredKeys = [\n        'common.loading',\n        'common.error',\n        'common.success',\n        'navigation.home',\n        'navigation.about',\n        'seo.title',\n        'seo.description',\n      ];\n\n      const validateMessages = (messages: Record<string, unknown>) => {\n        const flattenKeys = (\n          obj: Record<string, unknown>,\n          prefix = '',\n        ): string[] => {\n          let keys: string[] = [];\n          Object.keys(obj).forEach((key) => {\n            const fullKey = prefix ? `${prefix}.${key}` : key;\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\n              keys = keys.concat(flattenKeys(obj[key] as any, fullKey));\n            } else {\n              keys.push(fullKey);\n            }\n          });\n          return keys;\n        };\n\n        const availableKeys = flattenKeys(messages);\n        return requiredKeys.every((key) => availableKeys.includes(key));\n      };\n\n      expect(validateMessages(mockEnMessages)).toBe(true);\n      expect(validateMessages(mockZhMessages)).toBe(true);\n    });\n  });\n\n  describe('æ ¼å¼åŒ–é…ç½®', () => {\n    it('åº”è¯¥ä¸ºè‹±æ–‡æä¾›æ­£ç¡®çš„æ ¼å¼åŒ–é…ç½®', () => {\n      const enFormats = {\n        dateTime: {\n          short: {\n            day: 'numeric' as const,\n            month: 'short' as const,\n            year: 'numeric' as const,\n          },\n        },\n        number: {\n          currency: {\n            style: 'currency' as const,\n            currency: 'USD',\n          },\n        },\n      };\n\n      mockGetFormats.mockReturnValue(enFormats);\n      const formats = mockGetFormats('en');\n\n      expect(formats.number.currency.currency).toBe('USD');\n      expect(formats.dateTime.short.day).toBe('numeric');\n    });\n\n    it('åº”è¯¥ä¸ºä¸­æ–‡æä¾›æ­£ç¡®çš„æ ¼å¼åŒ–é…ç½®', () => {\n      const zhFormats = {\n        dateTime: {\n          short: {\n            day: 'numeric' as const,\n            month: 'short' as const,\n            year: 'numeric' as const,\n          },\n        },\n        number: {\n          currency: {\n            style: 'currency' as const,\n            currency: 'CNY',\n          },\n        },\n      };\n\n      mockGetFormats.mockReturnValue(zhFormats);\n      const formats = mockGetFormats('zh');\n\n      expect(formats.number.currency.currency).toBe('CNY');\n      expect(formats.dateTime.short.day).toBe('numeric');\n    });\n  });\n\n  describe('æ—¶åŒºé…ç½®', () => {\n    it('åº”è¯¥ä¸ºä¸åŒ locale æä¾›æ­£ç¡®çš„æ—¶åŒº', () => {\n      const getTimeZone = (locale: string) => {\n        return locale === 'zh' ? 'Asia/Shanghai' : 'UTC';\n      };\n\n      expect(getTimeZone('en')).toBe('UTC');\n      expect(getTimeZone('zh')).toBe('Asia/Shanghai');\n      expect(getTimeZone('unknown')).toBe('UTC'); // é»˜è®¤å›é€€\n    });\n  });\n\n  describe('æµ‹è¯•ç¯å¢ƒç‰¹æ®Šå¤„ç†', () => {\n    it('åº”è¯¥åœ¨æµ‹è¯•ç¯å¢ƒä¸‹ç¦ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥', () => {\n      vi.stubEnv('NODE_ENV', 'test');\n\n      const getStrictMessageTypeSafety = () => {\n        return (\n          process.env.NODE_ENV !== 'test' &&\n          process.env.PLAYWRIGHT_TEST !== 'true'\n        );\n      };\n\n      expect(getStrictMessageTypeSafety()).toBe(false);\n    });\n\n    it('åº”è¯¥åœ¨ Playwright æµ‹è¯•ç¯å¢ƒä¸‹ç¦ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥', () => {\n      vi.stubEnv('PLAYWRIGHT_TEST', 'true');\n\n      const getStrictMessageTypeSafety = () => {\n        return (\n          process.env.NODE_ENV !== 'test' &&\n          process.env.PLAYWRIGHT_TEST !== 'true'\n        );\n      };\n\n      expect(getStrictMessageTypeSafety()).toBe(false);\n    });\n\n    it('åº”è¯¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥', () => {\n      vi.stubEnv('NODE_ENV', 'production');\n      vi.stubEnv('PLAYWRIGHT_TEST', 'false');\n\n      const getStrictMessageTypeSafety = () => {\n        return (\n          process.env.NODE_ENV !== 'test' &&\n          process.env.PLAYWRIGHT_TEST !== 'true'\n        );\n      };\n\n      expect(getStrictMessageTypeSafety()).toBe(true);\n    });\n  });\n\n  describe('é…ç½®å¯¹è±¡ç”Ÿæˆ', () => {\n    it('åº”è¯¥ç”Ÿæˆå®Œæ•´çš„ i18n é…ç½®å¯¹è±¡', () => {\n      const generateConfig = (\n        locale: string,\n        messages: Record<string, unknown>,\n      ) => {\n        return {\n          locale,\n          messages: messages || {},\n          timeZone: locale === 'zh' ? 'Asia/Shanghai' : 'UTC',\n          now: new Date(),\n          formats: mockGetFormats(locale),\n          strictMessageTypeSafety:\n            process.env.NODE_ENV !== 'test' &&\n            process.env.PLAYWRIGHT_TEST !== 'true',\n        };\n      };\n\n      const enConfig = generateConfig('en', mockEnMessages);\n      expect(enConfig.locale).toBe('en');\n      expect(enConfig.messages).toEqual(mockEnMessages);\n      expect(enConfig.timeZone).toBe('UTC');\n      expect(enConfig.now).toBeInstanceOf(Date);\n      expect(enConfig.strictMessageTypeSafety).toBe(false); // æµ‹è¯•ç¯å¢ƒ\n\n      const zhConfig = generateConfig('zh', mockZhMessages);\n      expect(zhConfig.locale).toBe('zh');\n      expect(zhConfig.messages).toEqual(mockZhMessages);\n      expect(zhConfig.timeZone).toBe('Asia/Shanghai');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/vitest.config.browser.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]},{"filePath":"/Users/Data/Warehouse/Focus/tucsenberg-web-frontier/vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"],"info":{"message":"The new rule flags more situations where object literal syntax can be used, and it does not report a problem when the `Object` constructor is invoked with an argument.","url":"https://eslint.org/blog/2023/09/eslint-v8.50.0-released/","deprecatedSince":"8.50.0","availableUntil":null,"replacedBy":[{"rule":{"name":"no-object-constructor","url":"https://eslint.org/docs/rules/no-object-constructor"}}]}}]}]